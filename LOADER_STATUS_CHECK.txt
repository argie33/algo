=== REAL-TIME LOADER STATUS REPORT ===
Generated: 2026-01-03 07:49:51 CST
Report Time: Last 48 hours of activity

KEY FINDINGS:
- 20 critical loaders requested for review
- CloudWatch log groups EXIST but have ZERO log streams (no logs are being written)
- Local application logs show recent activity through Jan 3, 2026
- 21 ECS tasks are RUNNING in stocks-cluster (all stock-scores tasks)
- Lambda API endpoint is FUNCTIONAL with active requests

============================================================================
LOADER-BY-LOADER STATUS (from local logs):
============================================================================

GROUP 1: BUY/SELL SIGNAL LOADERS
------------------------------------

1. BUY/SELL DAILY LOADER (/ecs/buyselldaily-loader)
   Status: RUNNING (ACTIVELY PROCESSING)
   Last Activity: 2026-01-03 07:49:36 CST (3 minutes ago)
   Latest Log: "[AEP] pivot_price column exists: 16168/16168 non-null values"
   Progress: 73/5057 stocks (1.4%)
   Observation: Still processing stock signals, 5000+ stocks to process

2. BUY/SELL MONTHLY LOADER (/ecs/buysellmonthly-loader)
   Status: COMPLETED
   Last Activity: 2026-01-02 15:53:51 CST (16 hours ago)
   Latest Log: "✅ Monthly Signals Loader completed"
   Results: 5639 trades, 40.41% win rate, 1.83 profit factor
   Observation: Successfully completed monthly signal processing

3. BUY/SELL WEEKLY LOADER (/ecs/buysellweekly-loader)
   Status: COMPLETED
   Last Activity: 2026-01-02 17:56:55 CST (14 hours ago)
   Latest Log: "✅ Weekly Signals Loader completed"
   Results: 26371 trades, 37.63% win rate, 1.45 profit factor
   Observation: Successfully completed weekly signal processing

GROUP 2: PRICE DATA LOADERS
------------------------------------

4. PRICE DAILY LOADER (/ecs/pricedaily-loader or latestpricedaily)
   Status: COMPLETED
   Last Activity: 2026-01-02 15:09:58 CST (16 hours ago)
   Latest Log: "All done."
   Results: Stocks 4 total (0 inserted, 4 failed), ETFs 0 total
   ERROR: All 4 stock symbols FAILED to load

5. PRICE MONTHLY LOADER (/ecs/latestpricemonthly-loader)
   Status: COMPLETED
   Last Activity: 2026-01-02 15:25:36 CST (16 hours ago)
   Latest Log: "All done. Exiting successfully."
   Results: Stocks 5300 (1,081,075 inserted, 9 failed), ETFs 4817 (365,012 inserted, 1 failed)
   Observation: High success rate for stocks and ETFs

6. PRICE WEEKLY LOADER (/ecs/priceweekly-loader)
   Status: COMPLETED
   Last Activity: 2026-01-02 15:30:15 CST (16 hours ago)
   Latest Log: "All done. Exiting successfully."
   Results: Stocks 5300 (4,858,294 inserted, 10 failed), ETFs 4817 (1,563,173 inserted, 0 failed)
   Observation: Strong data load with minimal failures

GROUP 3: ETF PRICE LOADERS
------------------------------------

7. ETF PRICE DAILY LOADER (/ecs/etfpricedaily-loader)
   Status: COMPLETED
   Last Activity: 2026-01-02 15:09:47 CST (16 hours ago)
   Latest Log: "Done."
   Results: 0 ETF symbols to load (no data)
   Observation: No ETF symbols in system for daily load

8. ETF PRICE MONTHLY LOADER (/ecs/etfpricemonthly-loader)
   Status: COMPLETED
   Last Activity: 2026-01-02 15:21:35 CST (16 hours ago)
   Latest Log: "Done."
   Results: ETFs 4817 total (364,962 inserted, 2 failed)
   Observation: Successfully loaded ETF monthly data

9. ETF PRICE WEEKLY LOADER (/ecs/etfpriceweekly-loader)
   Status: COMPLETED
   Last Activity: 2026-01-02 15:22:23 CST (16 hours ago)
   Latest Log: "Done."
   Results: ETFs 4817 total (1,563,128 inserted, 1 failed)
   Observation: Successfully loaded ETF weekly data

GROUP 4: FINANCIAL STATEMENT LOADERS
------------------------------------

10. TTM INCOME STATEMENT LOADER (/ecs/ttmincomestatement-loader)
    Status: FAILED
    Last Activity: 2026-01-02 06:30 CST (25 hours ago)
    Error: "/home/stocks/algo/load_with_env.sh: not found"
    Latest Log: "exec: loadttmincomestatement.py: not found"
    Observation: Missing required shell script and Python file execution failure

============================================================================
UNMAPPED LOADERS (No local logs found - likely CloudWatch only):
============================================================================

11. STOCK SCORES LOADER (/aws/ecs/stock-scores-loader)
    Status: UNABLE TO DETERMINE - No CloudWatch streams
    Last Attempt: 2025-12-07 14:48:35 CST (27 days ago)
    Error: "column ss.momentum_intraweek does not exist"
    Note: CloudWatch log group exists but has NO active log streams

12-20. OTHER LOADERS (Not found in local logs):
    - /ecs/factormetrics-loader - NO LOGS
    - /ecs/positioning-loader - NO LOGS
    - /ecs/momentum-loader - NO LOGS (1 PENDING task in ECS)
    - /ecs/earningsestimate-loader - NO LOGS
    - /ecs/revenueestimate-loader - NO LOGS
    - /ecs/stocksymbols-loader - NO LOGS
    - /ecs/companyprofile-loader - NO LOGS
    Status: ALL STOPPED/INACTIVE
    Last Activity: Unknown (no log files found)

============================================================================
INFRASTRUCTURE STATUS:
============================================================================

ECS CLUSTER: stocks-cluster
  Active Tasks: 21 total
  Task Distribution:
    - 20x stock-scores tasks: RUNNING (various versions 46-64)
    - 1x momentum-loader task: PENDING (just started 2026-01-03 07:47:07)

ECS SERVICES: 6 active
  - benchmarks-service: Running
  - etfpricemonthly-loader-service: Running
  - growth-metrics-service: Running
  - latestpricedaily-loader-service: Running
  - latesttechnicalsdaily-loader-service: Running
  - quarterlybalancesheet-loader-service: Running

CloudWatch Insights: 
  - Log Groups Created: 40+ (all for /ecs/* and /aws/ecs/*)
  - Log Groups with Content: 0 bytes (EMPTY)
  - Exception: /aws/lambda/stocks-webapp-api-dev (37KB, ACTIVE with requests)

Lambda API: OPERATIONAL
  - Endpoint: /aws/lambda/stocks-webapp-api-dev
  - Status: Processing requests successfully
  - Last Activity: 2026-01-03 13:39:27 UTC (current)
  - Database Connection: WORKING (stocks RDS)

============================================================================
CRITICAL ISSUES IDENTIFIED:
============================================================================

ISSUE 1: LOG ROUTING FAILURE
  Problem: CloudWatch log groups exist but have NO log streams
  Impact: Cannot monitor loader status via CloudWatch dashboard
  Root Cause: Either logs not being sent to CloudWatch, or log routing misconfigured
  Evidence: 40 log groups with 0 bytes, 0 streams

ISSUE 2: PRICE DAILY LOADER FAILURE
  Problem: All 4 stock price records failed to load
  Details: Last activity 2026-01-02 15:09:58
  Impact: Daily stock price data is NOT being updated
  Root Cause: Unknown (insufficient error details in logs)

ISSUE 3: TTM INCOME STATEMENT LOADER BROKEN
  Problem: Shell script not found: /home/stocks/algo/load_with_env.sh
  Last Attempt: 2026-01-02 06:30
  Impact: Historical financial statement data not loading
  Files Missing: load_with_env.sh, loadttmincomestatement.py

ISSUE 4: METRICS CALCULATORS NOT RUNNING
  Status: STOPPED - No logs, no recent activity
  Loaders Affected: 
    - factor-metrics
    - positioning
    - momentum (only a PENDING task, not running)
    - quality/growth/value metrics calculators

ISSUE 5: STOCK SCORES LOADER OUTDATED
  Last Run: 2025-12-07 14:48:35 (27 days ago)
  Error: Database schema mismatch - missing momentum_intraweek column
  Status: STUCK - Not recovering automatically

============================================================================
SUMMARY BY STATUS:
============================================================================

RUNNING:
  ✅ loadbuyselldaily (actively processing 1.4% complete)

COMPLETED (Last 48 hours):
  ✅ loadbuysellmonthly (2026-01-02 15:53:51)
  ✅ loadbuysellweekly (2026-01-02 17:56:55)
  ✅ etfpricemonthly (2026-01-02 15:21:35)
  ✅ etfpriceweekly (2026-01-02 15:22:23)
  ✅ pricemonthly (2026-01-02 15:25:36)
  ✅ priceweekly (2026-01-02 15:30:15)

COMPLETED WITH FAILURES:
  ⚠️  pricedaily (2026-01-02 15:09:58) - 4/4 symbols FAILED
  ⚠️  etfpricedaily (2026-01-02 15:09:47) - No data to load

FAILED:
  ❌ loadttmincomestatement (2026-01-02 06:30) - Missing files

STOPPED/INACTIVE (No recent activity):
  ❌ stock-scores-loader (27 days old, schema error)
  ❌ factormetrics-loader
  ❌ positioning-loader  
  ❌ momentum-loader (PENDING task but not running)
  ❌ earningsestimate-loader
  ❌ revenueestimate-loader
  ❌ stocksymbols-loader
  ❌ companyprofile-loader
  ❌ annualbalancesheet-loader (and other financials)
  ❌ annualcashflow-loader
  ❌ annualincomestatement-loader

============================================================================
IMMEDIATE ACTION ITEMS:
============================================================================

CRITICAL (Do immediately):
1. Fix CloudWatch log routing - logs not being sent from ECS tasks
2. Investigate pricedaily loader failure - 4 stock symbols failed
3. Restore missing files for TTM income statement loader
4. Fix stock-scores-loader database schema error (momentum_intraweek)
5. Fix momentum-loader PENDING state - get it RUNNING

HIGH PRIORITY (Next 1-2 hours):
6. Re-enable metrics calculators (factor, positioning, quality)
7. Verify earnings and revenue estimate loaders
8. Verify financial statement loaders (company profile, fundamentals)
9. Test stocksymbols-loader functionality

MONITORING:
10. Continue watching loadbuyselldaily - progress is slow (1.4% in 10+ min)
11. Set up alert for stalled long-running tasks

