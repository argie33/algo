{"version":3,"file":"index-BEIl5Wfs.js","sources":["../../node_modules/react-dom/client.js","../../node_modules/@remix-run/router/dist/router.js","../../node_modules/react-router/dist/index.js","../../node_modules/react-router-dom/dist/index.js","../../node_modules/@tanstack/query-core/build/modern/subscribable.js","../../node_modules/@tanstack/query-core/build/modern/timeoutManager.js","../../node_modules/@tanstack/query-core/build/modern/utils.js","../../node_modules/@tanstack/query-core/build/modern/focusManager.js","../../node_modules/@tanstack/query-core/build/modern/thenable.js","../../node_modules/@tanstack/query-core/build/modern/notifyManager.js","../../node_modules/@tanstack/query-core/build/modern/onlineManager.js","../../node_modules/@tanstack/query-core/build/modern/retryer.js","../../node_modules/@tanstack/query-core/build/modern/removable.js","../../node_modules/@tanstack/query-core/build/modern/query.js","../../node_modules/@tanstack/query-core/build/modern/queryObserver.js","../../node_modules/@tanstack/query-core/build/modern/infiniteQueryBehavior.js","../../node_modules/@tanstack/query-core/build/modern/mutation.js","../../node_modules/@tanstack/query-core/build/modern/mutationCache.js","../../node_modules/@tanstack/query-core/build/modern/queryCache.js","../../node_modules/@tanstack/query-core/build/modern/queryClient.js","../../node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js","../../node_modules/@tanstack/react-query/build/modern/IsRestoringProvider.js","../../node_modules/@tanstack/react-query/build/modern/QueryErrorResetBoundary.js","../../node_modules/@tanstack/react-query/build/modern/errorBoundaryUtils.js","../../node_modules/@tanstack/react-query/build/modern/suspense.js","../../node_modules/@tanstack/react-query/build/modern/useBaseQuery.js","../../node_modules/@tanstack/react-query/build/modern/useQuery.js","../../src/services/api.js","../../src/pages/MetricsDashboard.jsx","../../src/pages/ServiceHealth.jsx","../../src/aws-amplify-mock/auth/index.js","../../src/aws-amplify-mock/index.js","../../src/config/amplify.js","../../src/services/devAuth.js","../../src/services/sessionManager.js","../../src/components/auth/SessionWarningDialog.jsx","../../src/contexts/AuthContext.jsx","../../src/hooks/useDocumentTitle.js","../../node_modules/@mui/icons-material/utils/createSvgIcon.js","../../node_modules/@mui/icons-material/Delete.js","../../node_modules/@mui/icons-material/Edit.js","../../node_modules/@mui/icons-material/Add.js","../../src/components/ManualPositionsDialog.jsx","../../src/components/ManualTradesDialog.jsx","../../src/pages/PortfolioDashboard.jsx","../../src/pages/PortfolioOptimizerNew.jsx","../../node_modules/@mui/base/utils/isHostComponent.js","../../node_modules/@mui/base/utils/appendOwnerState.js","../../node_modules/@mui/base/utils/extractEventHandlers.js","../../node_modules/@mui/base/utils/resolveComponentProps.js","../../node_modules/@mui/base/node_modules/@mui/utils/esm/useForkRef/useForkRef.js","../../node_modules/@mui/base/utils/omitEventHandlers.js","../../node_modules/@mui/base/utils/mergeSlotProps.js","../../node_modules/@mui/base/utils/useSlotProps.js","../../node_modules/@mui/x-date-pickers/internals/utils/views.js","../../node_modules/@mui/x-date-pickers/internals/utils/date-utils.js","../../node_modules/@mui/x-date-pickers/internals/utils/time-utils.js","../../node_modules/@mui/x-date-pickers/internals/utils/getDefaultReferenceDate.js","../../node_modules/@mui/x-date-pickers/internals/hooks/useField/useField.utils.js","../../node_modules/@mui/x-date-pickers/internals/utils/valueManagers.js","../../node_modules/@mui/x-date-pickers/LocalizationProvider/LocalizationProvider.js","../../node_modules/@mui/x-date-pickers/locales/utils/getPickersLocalization.js","../../node_modules/@mui/x-date-pickers/locales/enUS.js","../../node_modules/@mui/x-date-pickers/internals/hooks/useUtils.js","../../node_modules/@mui/x-date-pickers/internals/components/pickersToolbarClasses.js","../../node_modules/@mui/x-date-pickers/internals/components/PickersToolbar.js","../../node_modules/@mui/x-date-pickers/DatePicker/datePickerToolbarClasses.js","../../node_modules/@mui/x-date-pickers/DatePicker/DatePickerToolbar.js","../../node_modules/@mui/x-date-pickers/internals/utils/slots-migration.js","../../node_modules/@mui/x-date-pickers/DatePicker/shared.js","../../node_modules/@mui/x-date-pickers/icons/index.js","../../node_modules/@mui/x-date-pickers/internals/components/PickersArrowSwitcher/pickersArrowSwitcherClasses.js","../../node_modules/@mui/x-date-pickers/internals/components/PickersArrowSwitcher/PickersArrowSwitcher.js","../../node_modules/@mui/x-date-pickers/internals/constants/dimensions.js","../../node_modules/@mui/x-date-pickers/internals/components/PickersModalDialog.js","../../node_modules/@mui/x-date-pickers/internals/components/pickersPopperClasses.js","../../node_modules/@mui/x-date-pickers/internals/utils/utils.js","../../node_modules/@mui/x-date-pickers/internals/hooks/useDefaultReduceAnimations.js","../../node_modules/@mui/x-date-pickers/internals/components/PickersPopper.js","../../node_modules/@mui/x-date-pickers/internals/hooks/useValueWithTimezone.js","../../node_modules/@mui/x-date-pickers/internals/hooks/useValidation.js","../../node_modules/@mui/x-date-pickers/internals/hooks/useField/useFieldState.js","../../node_modules/@mui/x-date-pickers/internals/hooks/useField/useFieldCharacterEditing.js","../../node_modules/@mui/x-date-pickers/internals/hooks/useField/useField.js","../../node_modules/@mui/x-date-pickers/internals/hooks/useOpenState.js","../../node_modules/@mui/x-date-pickers/internals/hooks/usePicker/usePickerValue.js","../../node_modules/@mui/x-date-pickers/internals/hooks/useViews.js","../../node_modules/@mui/x-date-pickers/internals/hooks/usePicker/usePickerViews.js","../../node_modules/@mui/x-date-pickers/internals/hooks/useIsLandscape.js","../../node_modules/@mui/x-date-pickers/internals/hooks/usePicker/usePickerLayoutProps.js","../../node_modules/@mui/x-date-pickers/internals/hooks/usePicker/usePicker.js","../../node_modules/@mui/x-date-pickers/PickersLayout/pickersLayoutClasses.js","../../node_modules/@mui/x-date-pickers/PickersActionBar/PickersActionBar.js","../../node_modules/@mui/x-date-pickers/PickersShortcuts/PickersShortcuts.js","../../node_modules/@mui/x-date-pickers/PickersLayout/usePickerLayout.js","../../node_modules/@mui/x-date-pickers/PickersLayout/PickersLayout.js","../../node_modules/@mui/x-date-pickers/internals/hooks/date-helpers-hooks.js","../../node_modules/@mui/x-date-pickers/internals/utils/validation/extractValidationProps.js","../../node_modules/@mui/x-date-pickers/internals/utils/fields.js","../../node_modules/@mui/x-date-pickers/internals/utils/validation/validateDate.js","../../node_modules/@mui/x-date-pickers/PickersDay/pickersDayClasses.js","../../node_modules/@mui/x-date-pickers/PickersDay/PickersDay.js","../../node_modules/@mui/x-date-pickers/DateCalendar/pickersSlideTransitionClasses.js","../../node_modules/@mui/x-date-pickers/DateCalendar/PickersSlideTransition.js","../../node_modules/@mui/x-date-pickers/DateCalendar/useIsDateDisabled.js","../../node_modules/@mui/x-date-pickers/DateCalendar/dayCalendarClasses.js","../../node_modules/@mui/x-date-pickers/DateCalendar/DayCalendar.js","../../node_modules/@mui/x-date-pickers/DateCalendar/useCalendarState.js","../../node_modules/@mui/x-date-pickers/internals/hooks/useDesktopPicker/useDesktopPicker.js","../../node_modules/@mui/x-date-pickers/DateField/useDateField.js","../../node_modules/@mui/x-date-pickers/hooks/useClearableField.js","../../node_modules/@mui/x-date-pickers/DateField/DateField.js","../../node_modules/@mui/x-date-pickers/DateCalendar/pickersFadeTransitionGroupClasses.js","../../node_modules/@mui/x-date-pickers/DateCalendar/PickersFadeTransitionGroup.js","../../node_modules/@mui/x-date-pickers/MonthCalendar/pickersMonthClasses.js","../../node_modules/@mui/x-date-pickers/MonthCalendar/PickersMonth.js","../../node_modules/@mui/x-date-pickers/MonthCalendar/monthCalendarClasses.js","../../node_modules/@mui/x-date-pickers/MonthCalendar/MonthCalendar.js","../../node_modules/@mui/x-date-pickers/YearCalendar/pickersYearClasses.js","../../node_modules/@mui/x-date-pickers/YearCalendar/PickersYear.js","../../node_modules/@mui/x-date-pickers/YearCalendar/yearCalendarClasses.js","../../node_modules/@mui/x-date-pickers/YearCalendar/YearCalendar.js","../../node_modules/@mui/x-date-pickers/PickersCalendarHeader/pickersCalendarHeaderClasses.js","../../node_modules/@mui/x-date-pickers/PickersCalendarHeader/PickersCalendarHeader.js","../../node_modules/@mui/x-date-pickers/internals/components/PickerViewRoot/PickerViewRoot.js","../../node_modules/@mui/x-date-pickers/DateCalendar/dateCalendarClasses.js","../../node_modules/@mui/x-date-pickers/DateCalendar/DateCalendar.js","../../node_modules/@mui/x-date-pickers/dateViewRenderers/dateViewRenderers.js","../../node_modules/@mui/x-date-pickers/DesktopDatePicker/DesktopDatePicker.js","../../node_modules/@mui/x-date-pickers/internals/hooks/useMobilePicker/useMobilePicker.js","../../node_modules/@mui/x-date-pickers/MobileDatePicker/MobileDatePicker.js","../../node_modules/@mui/x-date-pickers/DatePicker/DatePicker.js","../../node_modules/date-fns/_lib/format/longFormatters/index.js","../../node_modules/@mui/x-date-pickers/AdapterDateFnsBase/AdapterDateFnsBase.js","../../node_modules/@mui/x-date-pickers/AdapterDateFns/AdapterDateFns.js","../../src/pages/TradeHistory.jsx","../../src/utils/errorLogger.js","../../src/pages/Settings.jsx","../../src/pages/Messages.jsx","../../src/components/auth/LoginForm.jsx","../../src/components/auth/RegisterForm.jsx","../../src/components/auth/ConfirmationForm.jsx","../../src/components/auth/ForgotPasswordForm.jsx","../../src/components/auth/ResetPasswordForm.jsx","../../src/components/auth/MFAChallenge.jsx","../../src/components/auth/AuthModal.jsx","../../src/components/auth/ProtectedRoute.jsx","../../src/components/ErrorBoundary.jsx","../../src/components/RootRedirect.jsx","../../src/pages/AuthTest.jsx","../../src/App.jsx","../../src/main.jsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/**\n * @remix-run/router v1.23.0\n *\n * Copyright (c) Remix Software Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\n////////////////////////////////////////////////////////////////////////////////\n//#region Types and Constants\n////////////////////////////////////////////////////////////////////////////////\n/**\n * Actions represent the type of change to a location value.\n */\nvar Action;\n(function (Action) {\n  /**\n   * A POP indicates a change to an arbitrary index in the history stack, such\n   * as a back or forward navigation. It does not describe the direction of the\n   * navigation, only that the current index changed.\n   *\n   * Note: This is the default action for newly created history objects.\n   */\n  Action[\"Pop\"] = \"POP\";\n  /**\n   * A PUSH indicates a new entry being added to the history stack, such as when\n   * a link is clicked and a new page loads. When this happens, all subsequent\n   * entries in the stack are lost.\n   */\n  Action[\"Push\"] = \"PUSH\";\n  /**\n   * A REPLACE indicates the entry at the current index in the history stack\n   * being replaced by a new one.\n   */\n  Action[\"Replace\"] = \"REPLACE\";\n})(Action || (Action = {}));\nconst PopStateEventType = \"popstate\";\n/**\n * Memory history stores the current location in memory. It is designed for use\n * in stateful non-browser environments like tests and React Native.\n */\nfunction createMemoryHistory(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  let {\n    initialEntries = [\"/\"],\n    initialIndex,\n    v5Compat = false\n  } = options;\n  let entries; // Declare so we can access from createMemoryLocation\n  entries = initialEntries.map((entry, index) => createMemoryLocation(entry, typeof entry === \"string\" ? null : entry.state, index === 0 ? \"default\" : undefined));\n  let index = clampIndex(initialIndex == null ? entries.length - 1 : initialIndex);\n  let action = Action.Pop;\n  let listener = null;\n  function clampIndex(n) {\n    return Math.min(Math.max(n, 0), entries.length - 1);\n  }\n  function getCurrentLocation() {\n    return entries[index];\n  }\n  function createMemoryLocation(to, state, key) {\n    if (state === void 0) {\n      state = null;\n    }\n    let location = createLocation(entries ? getCurrentLocation().pathname : \"/\", to, state, key);\n    warning(location.pathname.charAt(0) === \"/\", \"relative pathnames are not supported in memory history: \" + JSON.stringify(to));\n    return location;\n  }\n  function createHref(to) {\n    return typeof to === \"string\" ? to : createPath(to);\n  }\n  let history = {\n    get index() {\n      return index;\n    },\n    get action() {\n      return action;\n    },\n    get location() {\n      return getCurrentLocation();\n    },\n    createHref,\n    createURL(to) {\n      return new URL(createHref(to), \"http://localhost\");\n    },\n    encodeLocation(to) {\n      let path = typeof to === \"string\" ? parsePath(to) : to;\n      return {\n        pathname: path.pathname || \"\",\n        search: path.search || \"\",\n        hash: path.hash || \"\"\n      };\n    },\n    push(to, state) {\n      action = Action.Push;\n      let nextLocation = createMemoryLocation(to, state);\n      index += 1;\n      entries.splice(index, entries.length, nextLocation);\n      if (v5Compat && listener) {\n        listener({\n          action,\n          location: nextLocation,\n          delta: 1\n        });\n      }\n    },\n    replace(to, state) {\n      action = Action.Replace;\n      let nextLocation = createMemoryLocation(to, state);\n      entries[index] = nextLocation;\n      if (v5Compat && listener) {\n        listener({\n          action,\n          location: nextLocation,\n          delta: 0\n        });\n      }\n    },\n    go(delta) {\n      action = Action.Pop;\n      let nextIndex = clampIndex(index + delta);\n      let nextLocation = entries[nextIndex];\n      index = nextIndex;\n      if (listener) {\n        listener({\n          action,\n          location: nextLocation,\n          delta\n        });\n      }\n    },\n    listen(fn) {\n      listener = fn;\n      return () => {\n        listener = null;\n      };\n    }\n  };\n  return history;\n}\n/**\n * Browser history stores the location in regular URLs. This is the standard for\n * most web apps, but it requires some configuration on the server to ensure you\n * serve the same app at multiple URLs.\n *\n * @see https://github.com/remix-run/history/tree/main/docs/api-reference.md#createbrowserhistory\n */\nfunction createBrowserHistory(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  function createBrowserLocation(window, globalHistory) {\n    let {\n      pathname,\n      search,\n      hash\n    } = window.location;\n    return createLocation(\"\", {\n      pathname,\n      search,\n      hash\n    },\n    // state defaults to `null` because `window.history.state` does\n    globalHistory.state && globalHistory.state.usr || null, globalHistory.state && globalHistory.state.key || \"default\");\n  }\n  function createBrowserHref(window, to) {\n    return typeof to === \"string\" ? to : createPath(to);\n  }\n  return getUrlBasedHistory(createBrowserLocation, createBrowserHref, null, options);\n}\n/**\n * Hash history stores the location in window.location.hash. This makes it ideal\n * for situations where you don't want to send the location to the server for\n * some reason, either because you do cannot configure it or the URL space is\n * reserved for something else.\n *\n * @see https://github.com/remix-run/history/tree/main/docs/api-reference.md#createhashhistory\n */\nfunction createHashHistory(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  function createHashLocation(window, globalHistory) {\n    let {\n      pathname = \"/\",\n      search = \"\",\n      hash = \"\"\n    } = parsePath(window.location.hash.substr(1));\n    // Hash URL should always have a leading / just like window.location.pathname\n    // does, so if an app ends up at a route like /#something then we add a\n    // leading slash so all of our path-matching behaves the same as if it would\n    // in a browser router.  This is particularly important when there exists a\n    // root splat route (<Route path=\"*\">) since that matches internally against\n    // \"/*\" and we'd expect /#something to 404 in a hash router app.\n    if (!pathname.startsWith(\"/\") && !pathname.startsWith(\".\")) {\n      pathname = \"/\" + pathname;\n    }\n    return createLocation(\"\", {\n      pathname,\n      search,\n      hash\n    },\n    // state defaults to `null` because `window.history.state` does\n    globalHistory.state && globalHistory.state.usr || null, globalHistory.state && globalHistory.state.key || \"default\");\n  }\n  function createHashHref(window, to) {\n    let base = window.document.querySelector(\"base\");\n    let href = \"\";\n    if (base && base.getAttribute(\"href\")) {\n      let url = window.location.href;\n      let hashIndex = url.indexOf(\"#\");\n      href = hashIndex === -1 ? url : url.slice(0, hashIndex);\n    }\n    return href + \"#\" + (typeof to === \"string\" ? to : createPath(to));\n  }\n  function validateHashLocation(location, to) {\n    warning(location.pathname.charAt(0) === \"/\", \"relative pathnames are not supported in hash history.push(\" + JSON.stringify(to) + \")\");\n  }\n  return getUrlBasedHistory(createHashLocation, createHashHref, validateHashLocation, options);\n}\nfunction invariant(value, message) {\n  if (value === false || value === null || typeof value === \"undefined\") {\n    throw new Error(message);\n  }\n}\nfunction warning(cond, message) {\n  if (!cond) {\n    // eslint-disable-next-line no-console\n    if (typeof console !== \"undefined\") console.warn(message);\n    try {\n      // Welcome to debugging history!\n      //\n      // This error is thrown as a convenience, so you can more easily\n      // find the source for a warning that appears in the console by\n      // enabling \"pause on exceptions\" in your JavaScript debugger.\n      throw new Error(message);\n      // eslint-disable-next-line no-empty\n    } catch (e) {}\n  }\n}\nfunction createKey() {\n  return Math.random().toString(36).substr(2, 8);\n}\n/**\n * For browser-based histories, we combine the state and key into an object\n */\nfunction getHistoryState(location, index) {\n  return {\n    usr: location.state,\n    key: location.key,\n    idx: index\n  };\n}\n/**\n * Creates a Location object with a unique key from the given Path\n */\nfunction createLocation(current, to, state, key) {\n  if (state === void 0) {\n    state = null;\n  }\n  let location = _extends({\n    pathname: typeof current === \"string\" ? current : current.pathname,\n    search: \"\",\n    hash: \"\"\n  }, typeof to === \"string\" ? parsePath(to) : to, {\n    state,\n    // TODO: This could be cleaned up.  push/replace should probably just take\n    // full Locations now and avoid the need to run through this flow at all\n    // But that's a pretty big refactor to the current test suite so going to\n    // keep as is for the time being and just let any incoming keys take precedence\n    key: to && to.key || key || createKey()\n  });\n  return location;\n}\n/**\n * Creates a string URL path from the given pathname, search, and hash components.\n */\nfunction createPath(_ref) {\n  let {\n    pathname = \"/\",\n    search = \"\",\n    hash = \"\"\n  } = _ref;\n  if (search && search !== \"?\") pathname += search.charAt(0) === \"?\" ? search : \"?\" + search;\n  if (hash && hash !== \"#\") pathname += hash.charAt(0) === \"#\" ? hash : \"#\" + hash;\n  return pathname;\n}\n/**\n * Parses a string URL path into its separate pathname, search, and hash components.\n */\nfunction parsePath(path) {\n  let parsedPath = {};\n  if (path) {\n    let hashIndex = path.indexOf(\"#\");\n    if (hashIndex >= 0) {\n      parsedPath.hash = path.substr(hashIndex);\n      path = path.substr(0, hashIndex);\n    }\n    let searchIndex = path.indexOf(\"?\");\n    if (searchIndex >= 0) {\n      parsedPath.search = path.substr(searchIndex);\n      path = path.substr(0, searchIndex);\n    }\n    if (path) {\n      parsedPath.pathname = path;\n    }\n  }\n  return parsedPath;\n}\nfunction getUrlBasedHistory(getLocation, createHref, validateLocation, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  let {\n    window = document.defaultView,\n    v5Compat = false\n  } = options;\n  let globalHistory = window.history;\n  let action = Action.Pop;\n  let listener = null;\n  let index = getIndex();\n  // Index should only be null when we initialize. If not, it's because the\n  // user called history.pushState or history.replaceState directly, in which\n  // case we should log a warning as it will result in bugs.\n  if (index == null) {\n    index = 0;\n    globalHistory.replaceState(_extends({}, globalHistory.state, {\n      idx: index\n    }), \"\");\n  }\n  function getIndex() {\n    let state = globalHistory.state || {\n      idx: null\n    };\n    return state.idx;\n  }\n  function handlePop() {\n    action = Action.Pop;\n    let nextIndex = getIndex();\n    let delta = nextIndex == null ? null : nextIndex - index;\n    index = nextIndex;\n    if (listener) {\n      listener({\n        action,\n        location: history.location,\n        delta\n      });\n    }\n  }\n  function push(to, state) {\n    action = Action.Push;\n    let location = createLocation(history.location, to, state);\n    if (validateLocation) validateLocation(location, to);\n    index = getIndex() + 1;\n    let historyState = getHistoryState(location, index);\n    let url = history.createHref(location);\n    // try...catch because iOS limits us to 100 pushState calls :/\n    try {\n      globalHistory.pushState(historyState, \"\", url);\n    } catch (error) {\n      // If the exception is because `state` can't be serialized, let that throw\n      // outwards just like a replace call would so the dev knows the cause\n      // https://html.spec.whatwg.org/multipage/nav-history-apis.html#shared-history-push/replace-state-steps\n      // https://html.spec.whatwg.org/multipage/structured-data.html#structuredserializeinternal\n      if (error instanceof DOMException && error.name === \"DataCloneError\") {\n        throw error;\n      }\n      // They are going to lose state here, but there is no real\n      // way to warn them about it since the page will refresh...\n      window.location.assign(url);\n    }\n    if (v5Compat && listener) {\n      listener({\n        action,\n        location: history.location,\n        delta: 1\n      });\n    }\n  }\n  function replace(to, state) {\n    action = Action.Replace;\n    let location = createLocation(history.location, to, state);\n    if (validateLocation) validateLocation(location, to);\n    index = getIndex();\n    let historyState = getHistoryState(location, index);\n    let url = history.createHref(location);\n    globalHistory.replaceState(historyState, \"\", url);\n    if (v5Compat && listener) {\n      listener({\n        action,\n        location: history.location,\n        delta: 0\n      });\n    }\n  }\n  function createURL(to) {\n    // window.location.origin is \"null\" (the literal string value) in Firefox\n    // under certain conditions, notably when serving from a local HTML file\n    // See https://bugzilla.mozilla.org/show_bug.cgi?id=878297\n    let base = window.location.origin !== \"null\" ? window.location.origin : window.location.href;\n    let href = typeof to === \"string\" ? to : createPath(to);\n    // Treating this as a full URL will strip any trailing spaces so we need to\n    // pre-encode them since they might be part of a matching splat param from\n    // an ancestor route\n    href = href.replace(/ $/, \"%20\");\n    invariant(base, \"No window.location.(origin|href) available to create URL for href: \" + href);\n    return new URL(href, base);\n  }\n  let history = {\n    get action() {\n      return action;\n    },\n    get location() {\n      return getLocation(window, globalHistory);\n    },\n    listen(fn) {\n      if (listener) {\n        throw new Error(\"A history only accepts one active listener\");\n      }\n      window.addEventListener(PopStateEventType, handlePop);\n      listener = fn;\n      return () => {\n        window.removeEventListener(PopStateEventType, handlePop);\n        listener = null;\n      };\n    },\n    createHref(to) {\n      return createHref(window, to);\n    },\n    createURL,\n    encodeLocation(to) {\n      // Encode a Location the same way window.location would\n      let url = createURL(to);\n      return {\n        pathname: url.pathname,\n        search: url.search,\n        hash: url.hash\n      };\n    },\n    push,\n    replace,\n    go(n) {\n      return globalHistory.go(n);\n    }\n  };\n  return history;\n}\n//#endregion\n\nvar ResultType;\n(function (ResultType) {\n  ResultType[\"data\"] = \"data\";\n  ResultType[\"deferred\"] = \"deferred\";\n  ResultType[\"redirect\"] = \"redirect\";\n  ResultType[\"error\"] = \"error\";\n})(ResultType || (ResultType = {}));\nconst immutableRouteKeys = new Set([\"lazy\", \"caseSensitive\", \"path\", \"id\", \"index\", \"children\"]);\nfunction isIndexRoute(route) {\n  return route.index === true;\n}\n// Walk the route tree generating unique IDs where necessary, so we are working\n// solely with AgnosticDataRouteObject's within the Router\nfunction convertRoutesToDataRoutes(routes, mapRouteProperties, parentPath, manifest) {\n  if (parentPath === void 0) {\n    parentPath = [];\n  }\n  if (manifest === void 0) {\n    manifest = {};\n  }\n  return routes.map((route, index) => {\n    let treePath = [...parentPath, String(index)];\n    let id = typeof route.id === \"string\" ? route.id : treePath.join(\"-\");\n    invariant(route.index !== true || !route.children, \"Cannot specify children on an index route\");\n    invariant(!manifest[id], \"Found a route id collision on id \\\"\" + id + \"\\\".  Route \" + \"id's must be globally unique within Data Router usages\");\n    if (isIndexRoute(route)) {\n      let indexRoute = _extends({}, route, mapRouteProperties(route), {\n        id\n      });\n      manifest[id] = indexRoute;\n      return indexRoute;\n    } else {\n      let pathOrLayoutRoute = _extends({}, route, mapRouteProperties(route), {\n        id,\n        children: undefined\n      });\n      manifest[id] = pathOrLayoutRoute;\n      if (route.children) {\n        pathOrLayoutRoute.children = convertRoutesToDataRoutes(route.children, mapRouteProperties, treePath, manifest);\n      }\n      return pathOrLayoutRoute;\n    }\n  });\n}\n/**\n * Matches the given routes to a location and returns the match data.\n *\n * @see https://reactrouter.com/v6/utils/match-routes\n */\nfunction matchRoutes(routes, locationArg, basename) {\n  if (basename === void 0) {\n    basename = \"/\";\n  }\n  return matchRoutesImpl(routes, locationArg, basename, false);\n}\nfunction matchRoutesImpl(routes, locationArg, basename, allowPartial) {\n  let location = typeof locationArg === \"string\" ? parsePath(locationArg) : locationArg;\n  let pathname = stripBasename(location.pathname || \"/\", basename);\n  if (pathname == null) {\n    return null;\n  }\n  let branches = flattenRoutes(routes);\n  rankRouteBranches(branches);\n  let matches = null;\n  for (let i = 0; matches == null && i < branches.length; ++i) {\n    // Incoming pathnames are generally encoded from either window.location\n    // or from router.navigate, but we want to match against the unencoded\n    // paths in the route definitions.  Memory router locations won't be\n    // encoded here but there also shouldn't be anything to decode so this\n    // should be a safe operation.  This avoids needing matchRoutes to be\n    // history-aware.\n    let decoded = decodePath(pathname);\n    matches = matchRouteBranch(branches[i], decoded, allowPartial);\n  }\n  return matches;\n}\nfunction convertRouteMatchToUiMatch(match, loaderData) {\n  let {\n    route,\n    pathname,\n    params\n  } = match;\n  return {\n    id: route.id,\n    pathname,\n    params,\n    data: loaderData[route.id],\n    handle: route.handle\n  };\n}\nfunction flattenRoutes(routes, branches, parentsMeta, parentPath) {\n  if (branches === void 0) {\n    branches = [];\n  }\n  if (parentsMeta === void 0) {\n    parentsMeta = [];\n  }\n  if (parentPath === void 0) {\n    parentPath = \"\";\n  }\n  let flattenRoute = (route, index, relativePath) => {\n    let meta = {\n      relativePath: relativePath === undefined ? route.path || \"\" : relativePath,\n      caseSensitive: route.caseSensitive === true,\n      childrenIndex: index,\n      route\n    };\n    if (meta.relativePath.startsWith(\"/\")) {\n      invariant(meta.relativePath.startsWith(parentPath), \"Absolute route path \\\"\" + meta.relativePath + \"\\\" nested under path \" + (\"\\\"\" + parentPath + \"\\\" is not valid. An absolute child route path \") + \"must start with the combined path of all its parent routes.\");\n      meta.relativePath = meta.relativePath.slice(parentPath.length);\n    }\n    let path = joinPaths([parentPath, meta.relativePath]);\n    let routesMeta = parentsMeta.concat(meta);\n    // Add the children before adding this route to the array, so we traverse the\n    // route tree depth-first and child routes appear before their parents in\n    // the \"flattened\" version.\n    if (route.children && route.children.length > 0) {\n      invariant(\n      // Our types know better, but runtime JS may not!\n      // @ts-expect-error\n      route.index !== true, \"Index routes must not have child routes. Please remove \" + (\"all child routes from route path \\\"\" + path + \"\\\".\"));\n      flattenRoutes(route.children, branches, routesMeta, path);\n    }\n    // Routes without a path shouldn't ever match by themselves unless they are\n    // index routes, so don't add them to the list of possible branches.\n    if (route.path == null && !route.index) {\n      return;\n    }\n    branches.push({\n      path,\n      score: computeScore(path, route.index),\n      routesMeta\n    });\n  };\n  routes.forEach((route, index) => {\n    var _route$path;\n    // coarse-grain check for optional params\n    if (route.path === \"\" || !((_route$path = route.path) != null && _route$path.includes(\"?\"))) {\n      flattenRoute(route, index);\n    } else {\n      for (let exploded of explodeOptionalSegments(route.path)) {\n        flattenRoute(route, index, exploded);\n      }\n    }\n  });\n  return branches;\n}\n/**\n * Computes all combinations of optional path segments for a given path,\n * excluding combinations that are ambiguous and of lower priority.\n *\n * For example, `/one/:two?/three/:four?/:five?` explodes to:\n * - `/one/three`\n * - `/one/:two/three`\n * - `/one/three/:four`\n * - `/one/three/:five`\n * - `/one/:two/three/:four`\n * - `/one/:two/three/:five`\n * - `/one/three/:four/:five`\n * - `/one/:two/three/:four/:five`\n */\nfunction explodeOptionalSegments(path) {\n  let segments = path.split(\"/\");\n  if (segments.length === 0) return [];\n  let [first, ...rest] = segments;\n  // Optional path segments are denoted by a trailing `?`\n  let isOptional = first.endsWith(\"?\");\n  // Compute the corresponding required segment: `foo?` -> `foo`\n  let required = first.replace(/\\?$/, \"\");\n  if (rest.length === 0) {\n    // Intepret empty string as omitting an optional segment\n    // `[\"one\", \"\", \"three\"]` corresponds to omitting `:two` from `/one/:two?/three` -> `/one/three`\n    return isOptional ? [required, \"\"] : [required];\n  }\n  let restExploded = explodeOptionalSegments(rest.join(\"/\"));\n  let result = [];\n  // All child paths with the prefix.  Do this for all children before the\n  // optional version for all children, so we get consistent ordering where the\n  // parent optional aspect is preferred as required.  Otherwise, we can get\n  // child sections interspersed where deeper optional segments are higher than\n  // parent optional segments, where for example, /:two would explode _earlier_\n  // then /:one.  By always including the parent as required _for all children_\n  // first, we avoid this issue\n  result.push(...restExploded.map(subpath => subpath === \"\" ? required : [required, subpath].join(\"/\")));\n  // Then, if this is an optional value, add all child versions without\n  if (isOptional) {\n    result.push(...restExploded);\n  }\n  // for absolute paths, ensure `/` instead of empty segment\n  return result.map(exploded => path.startsWith(\"/\") && exploded === \"\" ? \"/\" : exploded);\n}\nfunction rankRouteBranches(branches) {\n  branches.sort((a, b) => a.score !== b.score ? b.score - a.score // Higher score first\n  : compareIndexes(a.routesMeta.map(meta => meta.childrenIndex), b.routesMeta.map(meta => meta.childrenIndex)));\n}\nconst paramRe = /^:[\\w-]+$/;\nconst dynamicSegmentValue = 3;\nconst indexRouteValue = 2;\nconst emptySegmentValue = 1;\nconst staticSegmentValue = 10;\nconst splatPenalty = -2;\nconst isSplat = s => s === \"*\";\nfunction computeScore(path, index) {\n  let segments = path.split(\"/\");\n  let initialScore = segments.length;\n  if (segments.some(isSplat)) {\n    initialScore += splatPenalty;\n  }\n  if (index) {\n    initialScore += indexRouteValue;\n  }\n  return segments.filter(s => !isSplat(s)).reduce((score, segment) => score + (paramRe.test(segment) ? dynamicSegmentValue : segment === \"\" ? emptySegmentValue : staticSegmentValue), initialScore);\n}\nfunction compareIndexes(a, b) {\n  let siblings = a.length === b.length && a.slice(0, -1).every((n, i) => n === b[i]);\n  return siblings ?\n  // If two routes are siblings, we should try to match the earlier sibling\n  // first. This allows people to have fine-grained control over the matching\n  // behavior by simply putting routes with identical paths in the order they\n  // want them tried.\n  a[a.length - 1] - b[b.length - 1] :\n  // Otherwise, it doesn't really make sense to rank non-siblings by index,\n  // so they sort equally.\n  0;\n}\nfunction matchRouteBranch(branch, pathname, allowPartial) {\n  if (allowPartial === void 0) {\n    allowPartial = false;\n  }\n  let {\n    routesMeta\n  } = branch;\n  let matchedParams = {};\n  let matchedPathname = \"/\";\n  let matches = [];\n  for (let i = 0; i < routesMeta.length; ++i) {\n    let meta = routesMeta[i];\n    let end = i === routesMeta.length - 1;\n    let remainingPathname = matchedPathname === \"/\" ? pathname : pathname.slice(matchedPathname.length) || \"/\";\n    let match = matchPath({\n      path: meta.relativePath,\n      caseSensitive: meta.caseSensitive,\n      end\n    }, remainingPathname);\n    let route = meta.route;\n    if (!match && end && allowPartial && !routesMeta[routesMeta.length - 1].route.index) {\n      match = matchPath({\n        path: meta.relativePath,\n        caseSensitive: meta.caseSensitive,\n        end: false\n      }, remainingPathname);\n    }\n    if (!match) {\n      return null;\n    }\n    Object.assign(matchedParams, match.params);\n    matches.push({\n      // TODO: Can this as be avoided?\n      params: matchedParams,\n      pathname: joinPaths([matchedPathname, match.pathname]),\n      pathnameBase: normalizePathname(joinPaths([matchedPathname, match.pathnameBase])),\n      route\n    });\n    if (match.pathnameBase !== \"/\") {\n      matchedPathname = joinPaths([matchedPathname, match.pathnameBase]);\n    }\n  }\n  return matches;\n}\n/**\n * Returns a path with params interpolated.\n *\n * @see https://reactrouter.com/v6/utils/generate-path\n */\nfunction generatePath(originalPath, params) {\n  if (params === void 0) {\n    params = {};\n  }\n  let path = originalPath;\n  if (path.endsWith(\"*\") && path !== \"*\" && !path.endsWith(\"/*\")) {\n    warning(false, \"Route path \\\"\" + path + \"\\\" will be treated as if it were \" + (\"\\\"\" + path.replace(/\\*$/, \"/*\") + \"\\\" because the `*` character must \") + \"always follow a `/` in the pattern. To get rid of this warning, \" + (\"please change the route path to \\\"\" + path.replace(/\\*$/, \"/*\") + \"\\\".\"));\n    path = path.replace(/\\*$/, \"/*\");\n  }\n  // ensure `/` is added at the beginning if the path is absolute\n  const prefix = path.startsWith(\"/\") ? \"/\" : \"\";\n  const stringify = p => p == null ? \"\" : typeof p === \"string\" ? p : String(p);\n  const segments = path.split(/\\/+/).map((segment, index, array) => {\n    const isLastSegment = index === array.length - 1;\n    // only apply the splat if it's the last segment\n    if (isLastSegment && segment === \"*\") {\n      const star = \"*\";\n      // Apply the splat\n      return stringify(params[star]);\n    }\n    const keyMatch = segment.match(/^:([\\w-]+)(\\??)$/);\n    if (keyMatch) {\n      const [, key, optional] = keyMatch;\n      let param = params[key];\n      invariant(optional === \"?\" || param != null, \"Missing \\\":\" + key + \"\\\" param\");\n      return stringify(param);\n    }\n    // Remove any optional markers from optional static segments\n    return segment.replace(/\\?$/g, \"\");\n  })\n  // Remove empty segments\n  .filter(segment => !!segment);\n  return prefix + segments.join(\"/\");\n}\n/**\n * Performs pattern matching on a URL pathname and returns information about\n * the match.\n *\n * @see https://reactrouter.com/v6/utils/match-path\n */\nfunction matchPath(pattern, pathname) {\n  if (typeof pattern === \"string\") {\n    pattern = {\n      path: pattern,\n      caseSensitive: false,\n      end: true\n    };\n  }\n  let [matcher, compiledParams] = compilePath(pattern.path, pattern.caseSensitive, pattern.end);\n  let match = pathname.match(matcher);\n  if (!match) return null;\n  let matchedPathname = match[0];\n  let pathnameBase = matchedPathname.replace(/(.)\\/+$/, \"$1\");\n  let captureGroups = match.slice(1);\n  let params = compiledParams.reduce((memo, _ref, index) => {\n    let {\n      paramName,\n      isOptional\n    } = _ref;\n    // We need to compute the pathnameBase here using the raw splat value\n    // instead of using params[\"*\"] later because it will be decoded then\n    if (paramName === \"*\") {\n      let splatValue = captureGroups[index] || \"\";\n      pathnameBase = matchedPathname.slice(0, matchedPathname.length - splatValue.length).replace(/(.)\\/+$/, \"$1\");\n    }\n    const value = captureGroups[index];\n    if (isOptional && !value) {\n      memo[paramName] = undefined;\n    } else {\n      memo[paramName] = (value || \"\").replace(/%2F/g, \"/\");\n    }\n    return memo;\n  }, {});\n  return {\n    params,\n    pathname: matchedPathname,\n    pathnameBase,\n    pattern\n  };\n}\nfunction compilePath(path, caseSensitive, end) {\n  if (caseSensitive === void 0) {\n    caseSensitive = false;\n  }\n  if (end === void 0) {\n    end = true;\n  }\n  warning(path === \"*\" || !path.endsWith(\"*\") || path.endsWith(\"/*\"), \"Route path \\\"\" + path + \"\\\" will be treated as if it were \" + (\"\\\"\" + path.replace(/\\*$/, \"/*\") + \"\\\" because the `*` character must \") + \"always follow a `/` in the pattern. To get rid of this warning, \" + (\"please change the route path to \\\"\" + path.replace(/\\*$/, \"/*\") + \"\\\".\"));\n  let params = [];\n  let regexpSource = \"^\" + path.replace(/\\/*\\*?$/, \"\") // Ignore trailing / and /*, we'll handle it below\n  .replace(/^\\/*/, \"/\") // Make sure it has a leading /\n  .replace(/[\\\\.*+^${}|()[\\]]/g, \"\\\\$&\") // Escape special regex chars\n  .replace(/\\/:([\\w-]+)(\\?)?/g, (_, paramName, isOptional) => {\n    params.push({\n      paramName,\n      isOptional: isOptional != null\n    });\n    return isOptional ? \"/?([^\\\\/]+)?\" : \"/([^\\\\/]+)\";\n  });\n  if (path.endsWith(\"*\")) {\n    params.push({\n      paramName: \"*\"\n    });\n    regexpSource += path === \"*\" || path === \"/*\" ? \"(.*)$\" // Already matched the initial /, just match the rest\n    : \"(?:\\\\/(.+)|\\\\/*)$\"; // Don't include the / in params[\"*\"]\n  } else if (end) {\n    // When matching to the end, ignore trailing slashes\n    regexpSource += \"\\\\/*$\";\n  } else if (path !== \"\" && path !== \"/\") {\n    // If our path is non-empty and contains anything beyond an initial slash,\n    // then we have _some_ form of path in our regex, so we should expect to\n    // match only if we find the end of this path segment.  Look for an optional\n    // non-captured trailing slash (to match a portion of the URL) or the end\n    // of the path (if we've matched to the end).  We used to do this with a\n    // word boundary but that gives false positives on routes like\n    // /user-preferences since `-` counts as a word boundary.\n    regexpSource += \"(?:(?=\\\\/|$))\";\n  } else ;\n  let matcher = new RegExp(regexpSource, caseSensitive ? undefined : \"i\");\n  return [matcher, params];\n}\nfunction decodePath(value) {\n  try {\n    return value.split(\"/\").map(v => decodeURIComponent(v).replace(/\\//g, \"%2F\")).join(\"/\");\n  } catch (error) {\n    warning(false, \"The URL path \\\"\" + value + \"\\\" could not be decoded because it is is a \" + \"malformed URL segment. This is probably due to a bad percent \" + (\"encoding (\" + error + \").\"));\n    return value;\n  }\n}\n/**\n * @private\n */\nfunction stripBasename(pathname, basename) {\n  if (basename === \"/\") return pathname;\n  if (!pathname.toLowerCase().startsWith(basename.toLowerCase())) {\n    return null;\n  }\n  // We want to leave trailing slash behavior in the user's control, so if they\n  // specify a basename with a trailing slash, we should support it\n  let startIndex = basename.endsWith(\"/\") ? basename.length - 1 : basename.length;\n  let nextChar = pathname.charAt(startIndex);\n  if (nextChar && nextChar !== \"/\") {\n    // pathname does not start with basename/\n    return null;\n  }\n  return pathname.slice(startIndex) || \"/\";\n}\n/**\n * Returns a resolved path object relative to the given pathname.\n *\n * @see https://reactrouter.com/v6/utils/resolve-path\n */\nfunction resolvePath(to, fromPathname) {\n  if (fromPathname === void 0) {\n    fromPathname = \"/\";\n  }\n  let {\n    pathname: toPathname,\n    search = \"\",\n    hash = \"\"\n  } = typeof to === \"string\" ? parsePath(to) : to;\n  let pathname = toPathname ? toPathname.startsWith(\"/\") ? toPathname : resolvePathname(toPathname, fromPathname) : fromPathname;\n  return {\n    pathname,\n    search: normalizeSearch(search),\n    hash: normalizeHash(hash)\n  };\n}\nfunction resolvePathname(relativePath, fromPathname) {\n  let segments = fromPathname.replace(/\\/+$/, \"\").split(\"/\");\n  let relativeSegments = relativePath.split(\"/\");\n  relativeSegments.forEach(segment => {\n    if (segment === \"..\") {\n      // Keep the root \"\" segment so the pathname starts at /\n      if (segments.length > 1) segments.pop();\n    } else if (segment !== \".\") {\n      segments.push(segment);\n    }\n  });\n  return segments.length > 1 ? segments.join(\"/\") : \"/\";\n}\nfunction getInvalidPathError(char, field, dest, path) {\n  return \"Cannot include a '\" + char + \"' character in a manually specified \" + (\"`to.\" + field + \"` field [\" + JSON.stringify(path) + \"].  Please separate it out to the \") + (\"`to.\" + dest + \"` field. Alternatively you may provide the full path as \") + \"a string in <Link to=\\\"...\\\"> and the router will parse it for you.\";\n}\n/**\n * @private\n *\n * When processing relative navigation we want to ignore ancestor routes that\n * do not contribute to the path, such that index/pathless layout routes don't\n * interfere.\n *\n * For example, when moving a route element into an index route and/or a\n * pathless layout route, relative link behavior contained within should stay\n * the same.  Both of the following examples should link back to the root:\n *\n *   <Route path=\"/\">\n *     <Route path=\"accounts\" element={<Link to=\"..\"}>\n *   </Route>\n *\n *   <Route path=\"/\">\n *     <Route path=\"accounts\">\n *       <Route element={<AccountsLayout />}>       // <-- Does not contribute\n *         <Route index element={<Link to=\"..\"} />  // <-- Does not contribute\n *       </Route\n *     </Route>\n *   </Route>\n */\nfunction getPathContributingMatches(matches) {\n  return matches.filter((match, index) => index === 0 || match.route.path && match.route.path.length > 0);\n}\n// Return the array of pathnames for the current route matches - used to\n// generate the routePathnames input for resolveTo()\nfunction getResolveToMatches(matches, v7_relativeSplatPath) {\n  let pathMatches = getPathContributingMatches(matches);\n  // When v7_relativeSplatPath is enabled, use the full pathname for the leaf\n  // match so we include splat values for \".\" links.  See:\n  // https://github.com/remix-run/react-router/issues/11052#issuecomment-1836589329\n  if (v7_relativeSplatPath) {\n    return pathMatches.map((match, idx) => idx === pathMatches.length - 1 ? match.pathname : match.pathnameBase);\n  }\n  return pathMatches.map(match => match.pathnameBase);\n}\n/**\n * @private\n */\nfunction resolveTo(toArg, routePathnames, locationPathname, isPathRelative) {\n  if (isPathRelative === void 0) {\n    isPathRelative = false;\n  }\n  let to;\n  if (typeof toArg === \"string\") {\n    to = parsePath(toArg);\n  } else {\n    to = _extends({}, toArg);\n    invariant(!to.pathname || !to.pathname.includes(\"?\"), getInvalidPathError(\"?\", \"pathname\", \"search\", to));\n    invariant(!to.pathname || !to.pathname.includes(\"#\"), getInvalidPathError(\"#\", \"pathname\", \"hash\", to));\n    invariant(!to.search || !to.search.includes(\"#\"), getInvalidPathError(\"#\", \"search\", \"hash\", to));\n  }\n  let isEmptyPath = toArg === \"\" || to.pathname === \"\";\n  let toPathname = isEmptyPath ? \"/\" : to.pathname;\n  let from;\n  // Routing is relative to the current pathname if explicitly requested.\n  //\n  // If a pathname is explicitly provided in `to`, it should be relative to the\n  // route context. This is explained in `Note on `<Link to>` values` in our\n  // migration guide from v5 as a means of disambiguation between `to` values\n  // that begin with `/` and those that do not. However, this is problematic for\n  // `to` values that do not provide a pathname. `to` can simply be a search or\n  // hash string, in which case we should assume that the navigation is relative\n  // to the current location's pathname and *not* the route pathname.\n  if (toPathname == null) {\n    from = locationPathname;\n  } else {\n    let routePathnameIndex = routePathnames.length - 1;\n    // With relative=\"route\" (the default), each leading .. segment means\n    // \"go up one route\" instead of \"go up one URL segment\".  This is a key\n    // difference from how <a href> works and a major reason we call this a\n    // \"to\" value instead of a \"href\".\n    if (!isPathRelative && toPathname.startsWith(\"..\")) {\n      let toSegments = toPathname.split(\"/\");\n      while (toSegments[0] === \"..\") {\n        toSegments.shift();\n        routePathnameIndex -= 1;\n      }\n      to.pathname = toSegments.join(\"/\");\n    }\n    from = routePathnameIndex >= 0 ? routePathnames[routePathnameIndex] : \"/\";\n  }\n  let path = resolvePath(to, from);\n  // Ensure the pathname has a trailing slash if the original \"to\" had one\n  let hasExplicitTrailingSlash = toPathname && toPathname !== \"/\" && toPathname.endsWith(\"/\");\n  // Or if this was a link to the current path which has a trailing slash\n  let hasCurrentTrailingSlash = (isEmptyPath || toPathname === \".\") && locationPathname.endsWith(\"/\");\n  if (!path.pathname.endsWith(\"/\") && (hasExplicitTrailingSlash || hasCurrentTrailingSlash)) {\n    path.pathname += \"/\";\n  }\n  return path;\n}\n/**\n * @private\n */\nfunction getToPathname(to) {\n  // Empty strings should be treated the same as / paths\n  return to === \"\" || to.pathname === \"\" ? \"/\" : typeof to === \"string\" ? parsePath(to).pathname : to.pathname;\n}\n/**\n * @private\n */\nconst joinPaths = paths => paths.join(\"/\").replace(/\\/\\/+/g, \"/\");\n/**\n * @private\n */\nconst normalizePathname = pathname => pathname.replace(/\\/+$/, \"\").replace(/^\\/*/, \"/\");\n/**\n * @private\n */\nconst normalizeSearch = search => !search || search === \"?\" ? \"\" : search.startsWith(\"?\") ? search : \"?\" + search;\n/**\n * @private\n */\nconst normalizeHash = hash => !hash || hash === \"#\" ? \"\" : hash.startsWith(\"#\") ? hash : \"#\" + hash;\n/**\n * This is a shortcut for creating `application/json` responses. Converts `data`\n * to JSON and sets the `Content-Type` header.\n *\n * @deprecated The `json` method is deprecated in favor of returning raw objects.\n * This method will be removed in v7.\n */\nconst json = function json(data, init) {\n  if (init === void 0) {\n    init = {};\n  }\n  let responseInit = typeof init === \"number\" ? {\n    status: init\n  } : init;\n  let headers = new Headers(responseInit.headers);\n  if (!headers.has(\"Content-Type\")) {\n    headers.set(\"Content-Type\", \"application/json; charset=utf-8\");\n  }\n  return new Response(JSON.stringify(data), _extends({}, responseInit, {\n    headers\n  }));\n};\nclass DataWithResponseInit {\n  constructor(data, init) {\n    this.type = \"DataWithResponseInit\";\n    this.data = data;\n    this.init = init || null;\n  }\n}\n/**\n * Create \"responses\" that contain `status`/`headers` without forcing\n * serialization into an actual `Response` - used by Remix single fetch\n */\nfunction data(data, init) {\n  return new DataWithResponseInit(data, typeof init === \"number\" ? {\n    status: init\n  } : init);\n}\nclass AbortedDeferredError extends Error {}\nclass DeferredData {\n  constructor(data, responseInit) {\n    this.pendingKeysSet = new Set();\n    this.subscribers = new Set();\n    this.deferredKeys = [];\n    invariant(data && typeof data === \"object\" && !Array.isArray(data), \"defer() only accepts plain objects\");\n    // Set up an AbortController + Promise we can race against to exit early\n    // cancellation\n    let reject;\n    this.abortPromise = new Promise((_, r) => reject = r);\n    this.controller = new AbortController();\n    let onAbort = () => reject(new AbortedDeferredError(\"Deferred data aborted\"));\n    this.unlistenAbortSignal = () => this.controller.signal.removeEventListener(\"abort\", onAbort);\n    this.controller.signal.addEventListener(\"abort\", onAbort);\n    this.data = Object.entries(data).reduce((acc, _ref2) => {\n      let [key, value] = _ref2;\n      return Object.assign(acc, {\n        [key]: this.trackPromise(key, value)\n      });\n    }, {});\n    if (this.done) {\n      // All incoming values were resolved\n      this.unlistenAbortSignal();\n    }\n    this.init = responseInit;\n  }\n  trackPromise(key, value) {\n    if (!(value instanceof Promise)) {\n      return value;\n    }\n    this.deferredKeys.push(key);\n    this.pendingKeysSet.add(key);\n    // We store a little wrapper promise that will be extended with\n    // _data/_error props upon resolve/reject\n    let promise = Promise.race([value, this.abortPromise]).then(data => this.onSettle(promise, key, undefined, data), error => this.onSettle(promise, key, error));\n    // Register rejection listeners to avoid uncaught promise rejections on\n    // errors or aborted deferred values\n    promise.catch(() => {});\n    Object.defineProperty(promise, \"_tracked\", {\n      get: () => true\n    });\n    return promise;\n  }\n  onSettle(promise, key, error, data) {\n    if (this.controller.signal.aborted && error instanceof AbortedDeferredError) {\n      this.unlistenAbortSignal();\n      Object.defineProperty(promise, \"_error\", {\n        get: () => error\n      });\n      return Promise.reject(error);\n    }\n    this.pendingKeysSet.delete(key);\n    if (this.done) {\n      // Nothing left to abort!\n      this.unlistenAbortSignal();\n    }\n    // If the promise was resolved/rejected with undefined, we'll throw an error as you\n    // should always resolve with a value or null\n    if (error === undefined && data === undefined) {\n      let undefinedError = new Error(\"Deferred data for key \\\"\" + key + \"\\\" resolved/rejected with `undefined`, \" + \"you must resolve/reject with a value or `null`.\");\n      Object.defineProperty(promise, \"_error\", {\n        get: () => undefinedError\n      });\n      this.emit(false, key);\n      return Promise.reject(undefinedError);\n    }\n    if (data === undefined) {\n      Object.defineProperty(promise, \"_error\", {\n        get: () => error\n      });\n      this.emit(false, key);\n      return Promise.reject(error);\n    }\n    Object.defineProperty(promise, \"_data\", {\n      get: () => data\n    });\n    this.emit(false, key);\n    return data;\n  }\n  emit(aborted, settledKey) {\n    this.subscribers.forEach(subscriber => subscriber(aborted, settledKey));\n  }\n  subscribe(fn) {\n    this.subscribers.add(fn);\n    return () => this.subscribers.delete(fn);\n  }\n  cancel() {\n    this.controller.abort();\n    this.pendingKeysSet.forEach((v, k) => this.pendingKeysSet.delete(k));\n    this.emit(true);\n  }\n  async resolveData(signal) {\n    let aborted = false;\n    if (!this.done) {\n      let onAbort = () => this.cancel();\n      signal.addEventListener(\"abort\", onAbort);\n      aborted = await new Promise(resolve => {\n        this.subscribe(aborted => {\n          signal.removeEventListener(\"abort\", onAbort);\n          if (aborted || this.done) {\n            resolve(aborted);\n          }\n        });\n      });\n    }\n    return aborted;\n  }\n  get done() {\n    return this.pendingKeysSet.size === 0;\n  }\n  get unwrappedData() {\n    invariant(this.data !== null && this.done, \"Can only unwrap data on initialized and settled deferreds\");\n    return Object.entries(this.data).reduce((acc, _ref3) => {\n      let [key, value] = _ref3;\n      return Object.assign(acc, {\n        [key]: unwrapTrackedPromise(value)\n      });\n    }, {});\n  }\n  get pendingKeys() {\n    return Array.from(this.pendingKeysSet);\n  }\n}\nfunction isTrackedPromise(value) {\n  return value instanceof Promise && value._tracked === true;\n}\nfunction unwrapTrackedPromise(value) {\n  if (!isTrackedPromise(value)) {\n    return value;\n  }\n  if (value._error) {\n    throw value._error;\n  }\n  return value._data;\n}\n/**\n * @deprecated The `defer` method is deprecated in favor of returning raw\n * objects. This method will be removed in v7.\n */\nconst defer = function defer(data, init) {\n  if (init === void 0) {\n    init = {};\n  }\n  let responseInit = typeof init === \"number\" ? {\n    status: init\n  } : init;\n  return new DeferredData(data, responseInit);\n};\n/**\n * A redirect response. Sets the status code and the `Location` header.\n * Defaults to \"302 Found\".\n */\nconst redirect = function redirect(url, init) {\n  if (init === void 0) {\n    init = 302;\n  }\n  let responseInit = init;\n  if (typeof responseInit === \"number\") {\n    responseInit = {\n      status: responseInit\n    };\n  } else if (typeof responseInit.status === \"undefined\") {\n    responseInit.status = 302;\n  }\n  let headers = new Headers(responseInit.headers);\n  headers.set(\"Location\", url);\n  return new Response(null, _extends({}, responseInit, {\n    headers\n  }));\n};\n/**\n * A redirect response that will force a document reload to the new location.\n * Sets the status code and the `Location` header.\n * Defaults to \"302 Found\".\n */\nconst redirectDocument = (url, init) => {\n  let response = redirect(url, init);\n  response.headers.set(\"X-Remix-Reload-Document\", \"true\");\n  return response;\n};\n/**\n * A redirect response that will perform a `history.replaceState` instead of a\n * `history.pushState` for client-side navigation redirects.\n * Sets the status code and the `Location` header.\n * Defaults to \"302 Found\".\n */\nconst replace = (url, init) => {\n  let response = redirect(url, init);\n  response.headers.set(\"X-Remix-Replace\", \"true\");\n  return response;\n};\n/**\n * @private\n * Utility class we use to hold auto-unwrapped 4xx/5xx Response bodies\n *\n * We don't export the class for public use since it's an implementation\n * detail, but we export the interface above so folks can build their own\n * abstractions around instances via isRouteErrorResponse()\n */\nclass ErrorResponseImpl {\n  constructor(status, statusText, data, internal) {\n    if (internal === void 0) {\n      internal = false;\n    }\n    this.status = status;\n    this.statusText = statusText || \"\";\n    this.internal = internal;\n    if (data instanceof Error) {\n      this.data = data.toString();\n      this.error = data;\n    } else {\n      this.data = data;\n    }\n  }\n}\n/**\n * Check if the given error is an ErrorResponse generated from a 4xx/5xx\n * Response thrown from an action/loader\n */\nfunction isRouteErrorResponse(error) {\n  return error != null && typeof error.status === \"number\" && typeof error.statusText === \"string\" && typeof error.internal === \"boolean\" && \"data\" in error;\n}\n\nconst validMutationMethodsArr = [\"post\", \"put\", \"patch\", \"delete\"];\nconst validMutationMethods = new Set(validMutationMethodsArr);\nconst validRequestMethodsArr = [\"get\", ...validMutationMethodsArr];\nconst validRequestMethods = new Set(validRequestMethodsArr);\nconst redirectStatusCodes = new Set([301, 302, 303, 307, 308]);\nconst redirectPreserveMethodStatusCodes = new Set([307, 308]);\nconst IDLE_NAVIGATION = {\n  state: \"idle\",\n  location: undefined,\n  formMethod: undefined,\n  formAction: undefined,\n  formEncType: undefined,\n  formData: undefined,\n  json: undefined,\n  text: undefined\n};\nconst IDLE_FETCHER = {\n  state: \"idle\",\n  data: undefined,\n  formMethod: undefined,\n  formAction: undefined,\n  formEncType: undefined,\n  formData: undefined,\n  json: undefined,\n  text: undefined\n};\nconst IDLE_BLOCKER = {\n  state: \"unblocked\",\n  proceed: undefined,\n  reset: undefined,\n  location: undefined\n};\nconst ABSOLUTE_URL_REGEX = /^(?:[a-z][a-z0-9+.-]*:|\\/\\/)/i;\nconst defaultMapRouteProperties = route => ({\n  hasErrorBoundary: Boolean(route.hasErrorBoundary)\n});\nconst TRANSITIONS_STORAGE_KEY = \"remix-router-transitions\";\n//#endregion\n////////////////////////////////////////////////////////////////////////////////\n//#region createRouter\n////////////////////////////////////////////////////////////////////////////////\n/**\n * Create a router and listen to history POP navigations\n */\nfunction createRouter(init) {\n  const routerWindow = init.window ? init.window : typeof window !== \"undefined\" ? window : undefined;\n  const isBrowser = typeof routerWindow !== \"undefined\" && typeof routerWindow.document !== \"undefined\" && typeof routerWindow.document.createElement !== \"undefined\";\n  const isServer = !isBrowser;\n  invariant(init.routes.length > 0, \"You must provide a non-empty routes array to createRouter\");\n  let mapRouteProperties;\n  if (init.mapRouteProperties) {\n    mapRouteProperties = init.mapRouteProperties;\n  } else if (init.detectErrorBoundary) {\n    // If they are still using the deprecated version, wrap it with the new API\n    let detectErrorBoundary = init.detectErrorBoundary;\n    mapRouteProperties = route => ({\n      hasErrorBoundary: detectErrorBoundary(route)\n    });\n  } else {\n    mapRouteProperties = defaultMapRouteProperties;\n  }\n  // Routes keyed by ID\n  let manifest = {};\n  // Routes in tree format for matching\n  let dataRoutes = convertRoutesToDataRoutes(init.routes, mapRouteProperties, undefined, manifest);\n  let inFlightDataRoutes;\n  let basename = init.basename || \"/\";\n  let dataStrategyImpl = init.dataStrategy || defaultDataStrategy;\n  let patchRoutesOnNavigationImpl = init.patchRoutesOnNavigation;\n  // Config driven behavior flags\n  let future = _extends({\n    v7_fetcherPersist: false,\n    v7_normalizeFormMethod: false,\n    v7_partialHydration: false,\n    v7_prependBasename: false,\n    v7_relativeSplatPath: false,\n    v7_skipActionErrorRevalidation: false\n  }, init.future);\n  // Cleanup function for history\n  let unlistenHistory = null;\n  // Externally-provided functions to call on all state changes\n  let subscribers = new Set();\n  // Externally-provided object to hold scroll restoration locations during routing\n  let savedScrollPositions = null;\n  // Externally-provided function to get scroll restoration keys\n  let getScrollRestorationKey = null;\n  // Externally-provided function to get current scroll position\n  let getScrollPosition = null;\n  // One-time flag to control the initial hydration scroll restoration.  Because\n  // we don't get the saved positions from <ScrollRestoration /> until _after_\n  // the initial render, we need to manually trigger a separate updateState to\n  // send along the restoreScrollPosition\n  // Set to true if we have `hydrationData` since we assume we were SSR'd and that\n  // SSR did the initial scroll restoration.\n  let initialScrollRestored = init.hydrationData != null;\n  let initialMatches = matchRoutes(dataRoutes, init.history.location, basename);\n  let initialMatchesIsFOW = false;\n  let initialErrors = null;\n  if (initialMatches == null && !patchRoutesOnNavigationImpl) {\n    // If we do not match a user-provided-route, fall back to the root\n    // to allow the error boundary to take over\n    let error = getInternalRouterError(404, {\n      pathname: init.history.location.pathname\n    });\n    let {\n      matches,\n      route\n    } = getShortCircuitMatches(dataRoutes);\n    initialMatches = matches;\n    initialErrors = {\n      [route.id]: error\n    };\n  }\n  // In SPA apps, if the user provided a patchRoutesOnNavigation implementation and\n  // our initial match is a splat route, clear them out so we run through lazy\n  // discovery on hydration in case there's a more accurate lazy route match.\n  // In SSR apps (with `hydrationData`), we expect that the server will send\n  // up the proper matched routes so we don't want to run lazy discovery on\n  // initial hydration and want to hydrate into the splat route.\n  if (initialMatches && !init.hydrationData) {\n    let fogOfWar = checkFogOfWar(initialMatches, dataRoutes, init.history.location.pathname);\n    if (fogOfWar.active) {\n      initialMatches = null;\n    }\n  }\n  let initialized;\n  if (!initialMatches) {\n    initialized = false;\n    initialMatches = [];\n    // If partial hydration and fog of war is enabled, we will be running\n    // `patchRoutesOnNavigation` during hydration so include any partial matches as\n    // the initial matches so we can properly render `HydrateFallback`'s\n    if (future.v7_partialHydration) {\n      let fogOfWar = checkFogOfWar(null, dataRoutes, init.history.location.pathname);\n      if (fogOfWar.active && fogOfWar.matches) {\n        initialMatchesIsFOW = true;\n        initialMatches = fogOfWar.matches;\n      }\n    }\n  } else if (initialMatches.some(m => m.route.lazy)) {\n    // All initialMatches need to be loaded before we're ready.  If we have lazy\n    // functions around still then we'll need to run them in initialize()\n    initialized = false;\n  } else if (!initialMatches.some(m => m.route.loader)) {\n    // If we've got no loaders to run, then we're good to go\n    initialized = true;\n  } else if (future.v7_partialHydration) {\n    // If partial hydration is enabled, we're initialized so long as we were\n    // provided with hydrationData for every route with a loader, and no loaders\n    // were marked for explicit hydration\n    let loaderData = init.hydrationData ? init.hydrationData.loaderData : null;\n    let errors = init.hydrationData ? init.hydrationData.errors : null;\n    // If errors exist, don't consider routes below the boundary\n    if (errors) {\n      let idx = initialMatches.findIndex(m => errors[m.route.id] !== undefined);\n      initialized = initialMatches.slice(0, idx + 1).every(m => !shouldLoadRouteOnHydration(m.route, loaderData, errors));\n    } else {\n      initialized = initialMatches.every(m => !shouldLoadRouteOnHydration(m.route, loaderData, errors));\n    }\n  } else {\n    // Without partial hydration - we're initialized if we were provided any\n    // hydrationData - which is expected to be complete\n    initialized = init.hydrationData != null;\n  }\n  let router;\n  let state = {\n    historyAction: init.history.action,\n    location: init.history.location,\n    matches: initialMatches,\n    initialized,\n    navigation: IDLE_NAVIGATION,\n    // Don't restore on initial updateState() if we were SSR'd\n    restoreScrollPosition: init.hydrationData != null ? false : null,\n    preventScrollReset: false,\n    revalidation: \"idle\",\n    loaderData: init.hydrationData && init.hydrationData.loaderData || {},\n    actionData: init.hydrationData && init.hydrationData.actionData || null,\n    errors: init.hydrationData && init.hydrationData.errors || initialErrors,\n    fetchers: new Map(),\n    blockers: new Map()\n  };\n  // -- Stateful internal variables to manage navigations --\n  // Current navigation in progress (to be committed in completeNavigation)\n  let pendingAction = Action.Pop;\n  // Should the current navigation prevent the scroll reset if scroll cannot\n  // be restored?\n  let pendingPreventScrollReset = false;\n  // AbortController for the active navigation\n  let pendingNavigationController;\n  // Should the current navigation enable document.startViewTransition?\n  let pendingViewTransitionEnabled = false;\n  // Store applied view transitions so we can apply them on POP\n  let appliedViewTransitions = new Map();\n  // Cleanup function for persisting applied transitions to sessionStorage\n  let removePageHideEventListener = null;\n  // We use this to avoid touching history in completeNavigation if a\n  // revalidation is entirely uninterrupted\n  let isUninterruptedRevalidation = false;\n  // Use this internal flag to force revalidation of all loaders:\n  //  - submissions (completed or interrupted)\n  //  - useRevalidator()\n  //  - X-Remix-Revalidate (from redirect)\n  let isRevalidationRequired = false;\n  // Use this internal array to capture routes that require revalidation due\n  // to a cancelled deferred on action submission\n  let cancelledDeferredRoutes = [];\n  // Use this internal array to capture fetcher loads that were cancelled by an\n  // action navigation and require revalidation\n  let cancelledFetcherLoads = new Set();\n  // AbortControllers for any in-flight fetchers\n  let fetchControllers = new Map();\n  // Track loads based on the order in which they started\n  let incrementingLoadId = 0;\n  // Track the outstanding pending navigation data load to be compared against\n  // the globally incrementing load when a fetcher load lands after a completed\n  // navigation\n  let pendingNavigationLoadId = -1;\n  // Fetchers that triggered data reloads as a result of their actions\n  let fetchReloadIds = new Map();\n  // Fetchers that triggered redirect navigations\n  let fetchRedirectIds = new Set();\n  // Most recent href/match for fetcher.load calls for fetchers\n  let fetchLoadMatches = new Map();\n  // Ref-count mounted fetchers so we know when it's ok to clean them up\n  let activeFetchers = new Map();\n  // Fetchers that have requested a delete when using v7_fetcherPersist,\n  // they'll be officially removed after they return to idle\n  let deletedFetchers = new Set();\n  // Store DeferredData instances for active route matches.  When a\n  // route loader returns defer() we stick one in here.  Then, when a nested\n  // promise resolves we update loaderData.  If a new navigation starts we\n  // cancel active deferreds for eliminated routes.\n  let activeDeferreds = new Map();\n  // Store blocker functions in a separate Map outside of router state since\n  // we don't need to update UI state if they change\n  let blockerFunctions = new Map();\n  // Flag to ignore the next history update, so we can revert the URL change on\n  // a POP navigation that was blocked by the user without touching router state\n  let unblockBlockerHistoryUpdate = undefined;\n  // Initialize the router, all side effects should be kicked off from here.\n  // Implemented as a Fluent API for ease of:\n  //   let router = createRouter(init).initialize();\n  function initialize() {\n    // If history informs us of a POP navigation, start the navigation but do not update\n    // state.  We'll update our own state once the navigation completes\n    unlistenHistory = init.history.listen(_ref => {\n      let {\n        action: historyAction,\n        location,\n        delta\n      } = _ref;\n      // Ignore this event if it was just us resetting the URL from a\n      // blocked POP navigation\n      if (unblockBlockerHistoryUpdate) {\n        unblockBlockerHistoryUpdate();\n        unblockBlockerHistoryUpdate = undefined;\n        return;\n      }\n      warning(blockerFunctions.size === 0 || delta != null, \"You are trying to use a blocker on a POP navigation to a location \" + \"that was not created by @remix-run/router. This will fail silently in \" + \"production. This can happen if you are navigating outside the router \" + \"via `window.history.pushState`/`window.location.hash` instead of using \" + \"router navigation APIs.  This can also happen if you are using \" + \"createHashRouter and the user manually changes the URL.\");\n      let blockerKey = shouldBlockNavigation({\n        currentLocation: state.location,\n        nextLocation: location,\n        historyAction\n      });\n      if (blockerKey && delta != null) {\n        // Restore the URL to match the current UI, but don't update router state\n        let nextHistoryUpdatePromise = new Promise(resolve => {\n          unblockBlockerHistoryUpdate = resolve;\n        });\n        init.history.go(delta * -1);\n        // Put the blocker into a blocked state\n        updateBlocker(blockerKey, {\n          state: \"blocked\",\n          location,\n          proceed() {\n            updateBlocker(blockerKey, {\n              state: \"proceeding\",\n              proceed: undefined,\n              reset: undefined,\n              location\n            });\n            // Re-do the same POP navigation we just blocked, after the url\n            // restoration is also complete.  See:\n            // https://github.com/remix-run/react-router/issues/11613\n            nextHistoryUpdatePromise.then(() => init.history.go(delta));\n          },\n          reset() {\n            let blockers = new Map(state.blockers);\n            blockers.set(blockerKey, IDLE_BLOCKER);\n            updateState({\n              blockers\n            });\n          }\n        });\n        return;\n      }\n      return startNavigation(historyAction, location);\n    });\n    if (isBrowser) {\n      // FIXME: This feels gross.  How can we cleanup the lines between\n      // scrollRestoration/appliedTransitions persistance?\n      restoreAppliedTransitions(routerWindow, appliedViewTransitions);\n      let _saveAppliedTransitions = () => persistAppliedTransitions(routerWindow, appliedViewTransitions);\n      routerWindow.addEventListener(\"pagehide\", _saveAppliedTransitions);\n      removePageHideEventListener = () => routerWindow.removeEventListener(\"pagehide\", _saveAppliedTransitions);\n    }\n    // Kick off initial data load if needed.  Use Pop to avoid modifying history\n    // Note we don't do any handling of lazy here.  For SPA's it'll get handled\n    // in the normal navigation flow.  For SSR it's expected that lazy modules are\n    // resolved prior to router creation since we can't go into a fallbackElement\n    // UI for SSR'd apps\n    if (!state.initialized) {\n      startNavigation(Action.Pop, state.location, {\n        initialHydration: true\n      });\n    }\n    return router;\n  }\n  // Clean up a router and it's side effects\n  function dispose() {\n    if (unlistenHistory) {\n      unlistenHistory();\n    }\n    if (removePageHideEventListener) {\n      removePageHideEventListener();\n    }\n    subscribers.clear();\n    pendingNavigationController && pendingNavigationController.abort();\n    state.fetchers.forEach((_, key) => deleteFetcher(key));\n    state.blockers.forEach((_, key) => deleteBlocker(key));\n  }\n  // Subscribe to state updates for the router\n  function subscribe(fn) {\n    subscribers.add(fn);\n    return () => subscribers.delete(fn);\n  }\n  // Update our state and notify the calling context of the change\n  function updateState(newState, opts) {\n    if (opts === void 0) {\n      opts = {};\n    }\n    state = _extends({}, state, newState);\n    // Prep fetcher cleanup so we can tell the UI which fetcher data entries\n    // can be removed\n    let completedFetchers = [];\n    let deletedFetchersKeys = [];\n    if (future.v7_fetcherPersist) {\n      state.fetchers.forEach((fetcher, key) => {\n        if (fetcher.state === \"idle\") {\n          if (deletedFetchers.has(key)) {\n            // Unmounted from the UI and can be totally removed\n            deletedFetchersKeys.push(key);\n          } else {\n            // Returned to idle but still mounted in the UI, so semi-remains for\n            // revalidations and such\n            completedFetchers.push(key);\n          }\n        }\n      });\n    }\n    // Remove any lingering deleted fetchers that have already been removed\n    // from state.fetchers\n    deletedFetchers.forEach(key => {\n      if (!state.fetchers.has(key) && !fetchControllers.has(key)) {\n        deletedFetchersKeys.push(key);\n      }\n    });\n    // Iterate over a local copy so that if flushSync is used and we end up\n    // removing and adding a new subscriber due to the useCallback dependencies,\n    // we don't get ourselves into a loop calling the new subscriber immediately\n    [...subscribers].forEach(subscriber => subscriber(state, {\n      deletedFetchers: deletedFetchersKeys,\n      viewTransitionOpts: opts.viewTransitionOpts,\n      flushSync: opts.flushSync === true\n    }));\n    // Remove idle fetchers from state since we only care about in-flight fetchers.\n    if (future.v7_fetcherPersist) {\n      completedFetchers.forEach(key => state.fetchers.delete(key));\n      deletedFetchersKeys.forEach(key => deleteFetcher(key));\n    } else {\n      // We already called deleteFetcher() on these, can remove them from this\n      // Set now that we've handed the keys off to the data layer\n      deletedFetchersKeys.forEach(key => deletedFetchers.delete(key));\n    }\n  }\n  // Complete a navigation returning the state.navigation back to the IDLE_NAVIGATION\n  // and setting state.[historyAction/location/matches] to the new route.\n  // - Location is a required param\n  // - Navigation will always be set to IDLE_NAVIGATION\n  // - Can pass any other state in newState\n  function completeNavigation(location, newState, _temp) {\n    var _location$state, _location$state2;\n    let {\n      flushSync\n    } = _temp === void 0 ? {} : _temp;\n    // Deduce if we're in a loading/actionReload state:\n    // - We have committed actionData in the store\n    // - The current navigation was a mutation submission\n    // - We're past the submitting state and into the loading state\n    // - The location being loaded is not the result of a redirect\n    let isActionReload = state.actionData != null && state.navigation.formMethod != null && isMutationMethod(state.navigation.formMethod) && state.navigation.state === \"loading\" && ((_location$state = location.state) == null ? void 0 : _location$state._isRedirect) !== true;\n    let actionData;\n    if (newState.actionData) {\n      if (Object.keys(newState.actionData).length > 0) {\n        actionData = newState.actionData;\n      } else {\n        // Empty actionData -> clear prior actionData due to an action error\n        actionData = null;\n      }\n    } else if (isActionReload) {\n      // Keep the current data if we're wrapping up the action reload\n      actionData = state.actionData;\n    } else {\n      // Clear actionData on any other completed navigations\n      actionData = null;\n    }\n    // Always preserve any existing loaderData from re-used routes\n    let loaderData = newState.loaderData ? mergeLoaderData(state.loaderData, newState.loaderData, newState.matches || [], newState.errors) : state.loaderData;\n    // On a successful navigation we can assume we got through all blockers\n    // so we can start fresh\n    let blockers = state.blockers;\n    if (blockers.size > 0) {\n      blockers = new Map(blockers);\n      blockers.forEach((_, k) => blockers.set(k, IDLE_BLOCKER));\n    }\n    // Always respect the user flag.  Otherwise don't reset on mutation\n    // submission navigations unless they redirect\n    let preventScrollReset = pendingPreventScrollReset === true || state.navigation.formMethod != null && isMutationMethod(state.navigation.formMethod) && ((_location$state2 = location.state) == null ? void 0 : _location$state2._isRedirect) !== true;\n    // Commit any in-flight routes at the end of the HMR revalidation \"navigation\"\n    if (inFlightDataRoutes) {\n      dataRoutes = inFlightDataRoutes;\n      inFlightDataRoutes = undefined;\n    }\n    if (isUninterruptedRevalidation) ; else if (pendingAction === Action.Pop) ; else if (pendingAction === Action.Push) {\n      init.history.push(location, location.state);\n    } else if (pendingAction === Action.Replace) {\n      init.history.replace(location, location.state);\n    }\n    let viewTransitionOpts;\n    // On POP, enable transitions if they were enabled on the original navigation\n    if (pendingAction === Action.Pop) {\n      // Forward takes precedence so they behave like the original navigation\n      let priorPaths = appliedViewTransitions.get(state.location.pathname);\n      if (priorPaths && priorPaths.has(location.pathname)) {\n        viewTransitionOpts = {\n          currentLocation: state.location,\n          nextLocation: location\n        };\n      } else if (appliedViewTransitions.has(location.pathname)) {\n        // If we don't have a previous forward nav, assume we're popping back to\n        // the new location and enable if that location previously enabled\n        viewTransitionOpts = {\n          currentLocation: location,\n          nextLocation: state.location\n        };\n      }\n    } else if (pendingViewTransitionEnabled) {\n      // Store the applied transition on PUSH/REPLACE\n      let toPaths = appliedViewTransitions.get(state.location.pathname);\n      if (toPaths) {\n        toPaths.add(location.pathname);\n      } else {\n        toPaths = new Set([location.pathname]);\n        appliedViewTransitions.set(state.location.pathname, toPaths);\n      }\n      viewTransitionOpts = {\n        currentLocation: state.location,\n        nextLocation: location\n      };\n    }\n    updateState(_extends({}, newState, {\n      actionData,\n      loaderData,\n      historyAction: pendingAction,\n      location,\n      initialized: true,\n      navigation: IDLE_NAVIGATION,\n      revalidation: \"idle\",\n      restoreScrollPosition: getSavedScrollPosition(location, newState.matches || state.matches),\n      preventScrollReset,\n      blockers\n    }), {\n      viewTransitionOpts,\n      flushSync: flushSync === true\n    });\n    // Reset stateful navigation vars\n    pendingAction = Action.Pop;\n    pendingPreventScrollReset = false;\n    pendingViewTransitionEnabled = false;\n    isUninterruptedRevalidation = false;\n    isRevalidationRequired = false;\n    cancelledDeferredRoutes = [];\n  }\n  // Trigger a navigation event, which can either be a numerical POP or a PUSH\n  // replace with an optional submission\n  async function navigate(to, opts) {\n    if (typeof to === \"number\") {\n      init.history.go(to);\n      return;\n    }\n    let normalizedPath = normalizeTo(state.location, state.matches, basename, future.v7_prependBasename, to, future.v7_relativeSplatPath, opts == null ? void 0 : opts.fromRouteId, opts == null ? void 0 : opts.relative);\n    let {\n      path,\n      submission,\n      error\n    } = normalizeNavigateOptions(future.v7_normalizeFormMethod, false, normalizedPath, opts);\n    let currentLocation = state.location;\n    let nextLocation = createLocation(state.location, path, opts && opts.state);\n    // When using navigate as a PUSH/REPLACE we aren't reading an already-encoded\n    // URL from window.location, so we need to encode it here so the behavior\n    // remains the same as POP and non-data-router usages.  new URL() does all\n    // the same encoding we'd get from a history.pushState/window.location read\n    // without having to touch history\n    nextLocation = _extends({}, nextLocation, init.history.encodeLocation(nextLocation));\n    let userReplace = opts && opts.replace != null ? opts.replace : undefined;\n    let historyAction = Action.Push;\n    if (userReplace === true) {\n      historyAction = Action.Replace;\n    } else if (userReplace === false) ; else if (submission != null && isMutationMethod(submission.formMethod) && submission.formAction === state.location.pathname + state.location.search) {\n      // By default on submissions to the current location we REPLACE so that\n      // users don't have to double-click the back button to get to the prior\n      // location.  If the user redirects to a different location from the\n      // action/loader this will be ignored and the redirect will be a PUSH\n      historyAction = Action.Replace;\n    }\n    let preventScrollReset = opts && \"preventScrollReset\" in opts ? opts.preventScrollReset === true : undefined;\n    let flushSync = (opts && opts.flushSync) === true;\n    let blockerKey = shouldBlockNavigation({\n      currentLocation,\n      nextLocation,\n      historyAction\n    });\n    if (blockerKey) {\n      // Put the blocker into a blocked state\n      updateBlocker(blockerKey, {\n        state: \"blocked\",\n        location: nextLocation,\n        proceed() {\n          updateBlocker(blockerKey, {\n            state: \"proceeding\",\n            proceed: undefined,\n            reset: undefined,\n            location: nextLocation\n          });\n          // Send the same navigation through\n          navigate(to, opts);\n        },\n        reset() {\n          let blockers = new Map(state.blockers);\n          blockers.set(blockerKey, IDLE_BLOCKER);\n          updateState({\n            blockers\n          });\n        }\n      });\n      return;\n    }\n    return await startNavigation(historyAction, nextLocation, {\n      submission,\n      // Send through the formData serialization error if we have one so we can\n      // render at the right error boundary after we match routes\n      pendingError: error,\n      preventScrollReset,\n      replace: opts && opts.replace,\n      enableViewTransition: opts && opts.viewTransition,\n      flushSync\n    });\n  }\n  // Revalidate all current loaders.  If a navigation is in progress or if this\n  // is interrupted by a navigation, allow this to \"succeed\" by calling all\n  // loaders during the next loader round\n  function revalidate() {\n    interruptActiveLoads();\n    updateState({\n      revalidation: \"loading\"\n    });\n    // If we're currently submitting an action, we don't need to start a new\n    // navigation, we'll just let the follow up loader execution call all loaders\n    if (state.navigation.state === \"submitting\") {\n      return;\n    }\n    // If we're currently in an idle state, start a new navigation for the current\n    // action/location and mark it as uninterrupted, which will skip the history\n    // update in completeNavigation\n    if (state.navigation.state === \"idle\") {\n      startNavigation(state.historyAction, state.location, {\n        startUninterruptedRevalidation: true\n      });\n      return;\n    }\n    // Otherwise, if we're currently in a loading state, just start a new\n    // navigation to the navigation.location but do not trigger an uninterrupted\n    // revalidation so that history correctly updates once the navigation completes\n    startNavigation(pendingAction || state.historyAction, state.navigation.location, {\n      overrideNavigation: state.navigation,\n      // Proxy through any rending view transition\n      enableViewTransition: pendingViewTransitionEnabled === true\n    });\n  }\n  // Start a navigation to the given action/location.  Can optionally provide a\n  // overrideNavigation which will override the normalLoad in the case of a redirect\n  // navigation\n  async function startNavigation(historyAction, location, opts) {\n    // Abort any in-progress navigations and start a new one. Unset any ongoing\n    // uninterrupted revalidations unless told otherwise, since we want this\n    // new navigation to update history normally\n    pendingNavigationController && pendingNavigationController.abort();\n    pendingNavigationController = null;\n    pendingAction = historyAction;\n    isUninterruptedRevalidation = (opts && opts.startUninterruptedRevalidation) === true;\n    // Save the current scroll position every time we start a new navigation,\n    // and track whether we should reset scroll on completion\n    saveScrollPosition(state.location, state.matches);\n    pendingPreventScrollReset = (opts && opts.preventScrollReset) === true;\n    pendingViewTransitionEnabled = (opts && opts.enableViewTransition) === true;\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let loadingNavigation = opts && opts.overrideNavigation;\n    let matches = opts != null && opts.initialHydration && state.matches && state.matches.length > 0 && !initialMatchesIsFOW ?\n    // `matchRoutes()` has already been called if we're in here via `router.initialize()`\n    state.matches : matchRoutes(routesToUse, location, basename);\n    let flushSync = (opts && opts.flushSync) === true;\n    // Short circuit if it's only a hash change and not a revalidation or\n    // mutation submission.\n    //\n    // Ignore on initial page loads because since the initial hydration will always\n    // be \"same hash\".  For example, on /page#hash and submit a <Form method=\"post\">\n    // which will default to a navigation to /page\n    if (matches && state.initialized && !isRevalidationRequired && isHashChangeOnly(state.location, location) && !(opts && opts.submission && isMutationMethod(opts.submission.formMethod))) {\n      completeNavigation(location, {\n        matches\n      }, {\n        flushSync\n      });\n      return;\n    }\n    let fogOfWar = checkFogOfWar(matches, routesToUse, location.pathname);\n    if (fogOfWar.active && fogOfWar.matches) {\n      matches = fogOfWar.matches;\n    }\n    // Short circuit with a 404 on the root error boundary if we match nothing\n    if (!matches) {\n      let {\n        error,\n        notFoundMatches,\n        route\n      } = handleNavigational404(location.pathname);\n      completeNavigation(location, {\n        matches: notFoundMatches,\n        loaderData: {},\n        errors: {\n          [route.id]: error\n        }\n      }, {\n        flushSync\n      });\n      return;\n    }\n    // Create a controller/Request for this navigation\n    pendingNavigationController = new AbortController();\n    let request = createClientSideRequest(init.history, location, pendingNavigationController.signal, opts && opts.submission);\n    let pendingActionResult;\n    if (opts && opts.pendingError) {\n      // If we have a pendingError, it means the user attempted a GET submission\n      // with binary FormData so assign here and skip to handleLoaders.  That\n      // way we handle calling loaders above the boundary etc.  It's not really\n      // different from an actionError in that sense.\n      pendingActionResult = [findNearestBoundary(matches).route.id, {\n        type: ResultType.error,\n        error: opts.pendingError\n      }];\n    } else if (opts && opts.submission && isMutationMethod(opts.submission.formMethod)) {\n      // Call action if we received an action submission\n      let actionResult = await handleAction(request, location, opts.submission, matches, fogOfWar.active, {\n        replace: opts.replace,\n        flushSync\n      });\n      if (actionResult.shortCircuited) {\n        return;\n      }\n      // If we received a 404 from handleAction, it's because we couldn't lazily\n      // discover the destination route so we don't want to call loaders\n      if (actionResult.pendingActionResult) {\n        let [routeId, result] = actionResult.pendingActionResult;\n        if (isErrorResult(result) && isRouteErrorResponse(result.error) && result.error.status === 404) {\n          pendingNavigationController = null;\n          completeNavigation(location, {\n            matches: actionResult.matches,\n            loaderData: {},\n            errors: {\n              [routeId]: result.error\n            }\n          });\n          return;\n        }\n      }\n      matches = actionResult.matches || matches;\n      pendingActionResult = actionResult.pendingActionResult;\n      loadingNavigation = getLoadingNavigation(location, opts.submission);\n      flushSync = false;\n      // No need to do fog of war matching again on loader execution\n      fogOfWar.active = false;\n      // Create a GET request for the loaders\n      request = createClientSideRequest(init.history, request.url, request.signal);\n    }\n    // Call loaders\n    let {\n      shortCircuited,\n      matches: updatedMatches,\n      loaderData,\n      errors\n    } = await handleLoaders(request, location, matches, fogOfWar.active, loadingNavigation, opts && opts.submission, opts && opts.fetcherSubmission, opts && opts.replace, opts && opts.initialHydration === true, flushSync, pendingActionResult);\n    if (shortCircuited) {\n      return;\n    }\n    // Clean up now that the action/loaders have completed.  Don't clean up if\n    // we short circuited because pendingNavigationController will have already\n    // been assigned to a new controller for the next navigation\n    pendingNavigationController = null;\n    completeNavigation(location, _extends({\n      matches: updatedMatches || matches\n    }, getActionDataForCommit(pendingActionResult), {\n      loaderData,\n      errors\n    }));\n  }\n  // Call the action matched by the leaf route for this navigation and handle\n  // redirects/errors\n  async function handleAction(request, location, submission, matches, isFogOfWar, opts) {\n    if (opts === void 0) {\n      opts = {};\n    }\n    interruptActiveLoads();\n    // Put us in a submitting state\n    let navigation = getSubmittingNavigation(location, submission);\n    updateState({\n      navigation\n    }, {\n      flushSync: opts.flushSync === true\n    });\n    if (isFogOfWar) {\n      let discoverResult = await discoverRoutes(matches, location.pathname, request.signal);\n      if (discoverResult.type === \"aborted\") {\n        return {\n          shortCircuited: true\n        };\n      } else if (discoverResult.type === \"error\") {\n        let boundaryId = findNearestBoundary(discoverResult.partialMatches).route.id;\n        return {\n          matches: discoverResult.partialMatches,\n          pendingActionResult: [boundaryId, {\n            type: ResultType.error,\n            error: discoverResult.error\n          }]\n        };\n      } else if (!discoverResult.matches) {\n        let {\n          notFoundMatches,\n          error,\n          route\n        } = handleNavigational404(location.pathname);\n        return {\n          matches: notFoundMatches,\n          pendingActionResult: [route.id, {\n            type: ResultType.error,\n            error\n          }]\n        };\n      } else {\n        matches = discoverResult.matches;\n      }\n    }\n    // Call our action and get the result\n    let result;\n    let actionMatch = getTargetMatch(matches, location);\n    if (!actionMatch.route.action && !actionMatch.route.lazy) {\n      result = {\n        type: ResultType.error,\n        error: getInternalRouterError(405, {\n          method: request.method,\n          pathname: location.pathname,\n          routeId: actionMatch.route.id\n        })\n      };\n    } else {\n      let results = await callDataStrategy(\"action\", state, request, [actionMatch], matches, null);\n      result = results[actionMatch.route.id];\n      if (request.signal.aborted) {\n        return {\n          shortCircuited: true\n        };\n      }\n    }\n    if (isRedirectResult(result)) {\n      let replace;\n      if (opts && opts.replace != null) {\n        replace = opts.replace;\n      } else {\n        // If the user didn't explicity indicate replace behavior, replace if\n        // we redirected to the exact same location we're currently at to avoid\n        // double back-buttons\n        let location = normalizeRedirectLocation(result.response.headers.get(\"Location\"), new URL(request.url), basename);\n        replace = location === state.location.pathname + state.location.search;\n      }\n      await startRedirectNavigation(request, result, true, {\n        submission,\n        replace\n      });\n      return {\n        shortCircuited: true\n      };\n    }\n    if (isDeferredResult(result)) {\n      throw getInternalRouterError(400, {\n        type: \"defer-action\"\n      });\n    }\n    if (isErrorResult(result)) {\n      // Store off the pending error - we use it to determine which loaders\n      // to call and will commit it when we complete the navigation\n      let boundaryMatch = findNearestBoundary(matches, actionMatch.route.id);\n      // By default, all submissions to the current location are REPLACE\n      // navigations, but if the action threw an error that'll be rendered in\n      // an errorElement, we fall back to PUSH so that the user can use the\n      // back button to get back to the pre-submission form location to try\n      // again\n      if ((opts && opts.replace) !== true) {\n        pendingAction = Action.Push;\n      }\n      return {\n        matches,\n        pendingActionResult: [boundaryMatch.route.id, result]\n      };\n    }\n    return {\n      matches,\n      pendingActionResult: [actionMatch.route.id, result]\n    };\n  }\n  // Call all applicable loaders for the given matches, handling redirects,\n  // errors, etc.\n  async function handleLoaders(request, location, matches, isFogOfWar, overrideNavigation, submission, fetcherSubmission, replace, initialHydration, flushSync, pendingActionResult) {\n    // Figure out the right navigation we want to use for data loading\n    let loadingNavigation = overrideNavigation || getLoadingNavigation(location, submission);\n    // If this was a redirect from an action we don't have a \"submission\" but\n    // we have it on the loading navigation so use that if available\n    let activeSubmission = submission || fetcherSubmission || getSubmissionFromNavigation(loadingNavigation);\n    // If this is an uninterrupted revalidation, we remain in our current idle\n    // state.  If not, we need to switch to our loading state and load data,\n    // preserving any new action data or existing action data (in the case of\n    // a revalidation interrupting an actionReload)\n    // If we have partialHydration enabled, then don't update the state for the\n    // initial data load since it's not a \"navigation\"\n    let shouldUpdateNavigationState = !isUninterruptedRevalidation && (!future.v7_partialHydration || !initialHydration);\n    // When fog of war is enabled, we enter our `loading` state earlier so we\n    // can discover new routes during the `loading` state.  We skip this if\n    // we've already run actions since we would have done our matching already.\n    // If the children() function threw then, we want to proceed with the\n    // partial matches it discovered.\n    if (isFogOfWar) {\n      if (shouldUpdateNavigationState) {\n        let actionData = getUpdatedActionData(pendingActionResult);\n        updateState(_extends({\n          navigation: loadingNavigation\n        }, actionData !== undefined ? {\n          actionData\n        } : {}), {\n          flushSync\n        });\n      }\n      let discoverResult = await discoverRoutes(matches, location.pathname, request.signal);\n      if (discoverResult.type === \"aborted\") {\n        return {\n          shortCircuited: true\n        };\n      } else if (discoverResult.type === \"error\") {\n        let boundaryId = findNearestBoundary(discoverResult.partialMatches).route.id;\n        return {\n          matches: discoverResult.partialMatches,\n          loaderData: {},\n          errors: {\n            [boundaryId]: discoverResult.error\n          }\n        };\n      } else if (!discoverResult.matches) {\n        let {\n          error,\n          notFoundMatches,\n          route\n        } = handleNavigational404(location.pathname);\n        return {\n          matches: notFoundMatches,\n          loaderData: {},\n          errors: {\n            [route.id]: error\n          }\n        };\n      } else {\n        matches = discoverResult.matches;\n      }\n    }\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let [matchesToLoad, revalidatingFetchers] = getMatchesToLoad(init.history, state, matches, activeSubmission, location, future.v7_partialHydration && initialHydration === true, future.v7_skipActionErrorRevalidation, isRevalidationRequired, cancelledDeferredRoutes, cancelledFetcherLoads, deletedFetchers, fetchLoadMatches, fetchRedirectIds, routesToUse, basename, pendingActionResult);\n    // Cancel pending deferreds for no-longer-matched routes or routes we're\n    // about to reload.  Note that if this is an action reload we would have\n    // already cancelled all pending deferreds so this would be a no-op\n    cancelActiveDeferreds(routeId => !(matches && matches.some(m => m.route.id === routeId)) || matchesToLoad && matchesToLoad.some(m => m.route.id === routeId));\n    pendingNavigationLoadId = ++incrementingLoadId;\n    // Short circuit if we have no loaders to run\n    if (matchesToLoad.length === 0 && revalidatingFetchers.length === 0) {\n      let updatedFetchers = markFetchRedirectsDone();\n      completeNavigation(location, _extends({\n        matches,\n        loaderData: {},\n        // Commit pending error if we're short circuiting\n        errors: pendingActionResult && isErrorResult(pendingActionResult[1]) ? {\n          [pendingActionResult[0]]: pendingActionResult[1].error\n        } : null\n      }, getActionDataForCommit(pendingActionResult), updatedFetchers ? {\n        fetchers: new Map(state.fetchers)\n      } : {}), {\n        flushSync\n      });\n      return {\n        shortCircuited: true\n      };\n    }\n    if (shouldUpdateNavigationState) {\n      let updates = {};\n      if (!isFogOfWar) {\n        // Only update navigation/actionNData if we didn't already do it above\n        updates.navigation = loadingNavigation;\n        let actionData = getUpdatedActionData(pendingActionResult);\n        if (actionData !== undefined) {\n          updates.actionData = actionData;\n        }\n      }\n      if (revalidatingFetchers.length > 0) {\n        updates.fetchers = getUpdatedRevalidatingFetchers(revalidatingFetchers);\n      }\n      updateState(updates, {\n        flushSync\n      });\n    }\n    revalidatingFetchers.forEach(rf => {\n      abortFetcher(rf.key);\n      if (rf.controller) {\n        // Fetchers use an independent AbortController so that aborting a fetcher\n        // (via deleteFetcher) does not abort the triggering navigation that\n        // triggered the revalidation\n        fetchControllers.set(rf.key, rf.controller);\n      }\n    });\n    // Proxy navigation abort through to revalidation fetchers\n    let abortPendingFetchRevalidations = () => revalidatingFetchers.forEach(f => abortFetcher(f.key));\n    if (pendingNavigationController) {\n      pendingNavigationController.signal.addEventListener(\"abort\", abortPendingFetchRevalidations);\n    }\n    let {\n      loaderResults,\n      fetcherResults\n    } = await callLoadersAndMaybeResolveData(state, matches, matchesToLoad, revalidatingFetchers, request);\n    if (request.signal.aborted) {\n      return {\n        shortCircuited: true\n      };\n    }\n    // Clean up _after_ loaders have completed.  Don't clean up if we short\n    // circuited because fetchControllers would have been aborted and\n    // reassigned to new controllers for the next navigation\n    if (pendingNavigationController) {\n      pendingNavigationController.signal.removeEventListener(\"abort\", abortPendingFetchRevalidations);\n    }\n    revalidatingFetchers.forEach(rf => fetchControllers.delete(rf.key));\n    // If any loaders returned a redirect Response, start a new REPLACE navigation\n    let redirect = findRedirect(loaderResults);\n    if (redirect) {\n      await startRedirectNavigation(request, redirect.result, true, {\n        replace\n      });\n      return {\n        shortCircuited: true\n      };\n    }\n    redirect = findRedirect(fetcherResults);\n    if (redirect) {\n      // If this redirect came from a fetcher make sure we mark it in\n      // fetchRedirectIds so it doesn't get revalidated on the next set of\n      // loader executions\n      fetchRedirectIds.add(redirect.key);\n      await startRedirectNavigation(request, redirect.result, true, {\n        replace\n      });\n      return {\n        shortCircuited: true\n      };\n    }\n    // Process and commit output from loaders\n    let {\n      loaderData,\n      errors\n    } = processLoaderData(state, matches, loaderResults, pendingActionResult, revalidatingFetchers, fetcherResults, activeDeferreds);\n    // Wire up subscribers to update loaderData as promises settle\n    activeDeferreds.forEach((deferredData, routeId) => {\n      deferredData.subscribe(aborted => {\n        // Note: No need to updateState here since the TrackedPromise on\n        // loaderData is stable across resolve/reject\n        // Remove this instance if we were aborted or if promises have settled\n        if (aborted || deferredData.done) {\n          activeDeferreds.delete(routeId);\n        }\n      });\n    });\n    // Preserve SSR errors during partial hydration\n    if (future.v7_partialHydration && initialHydration && state.errors) {\n      errors = _extends({}, state.errors, errors);\n    }\n    let updatedFetchers = markFetchRedirectsDone();\n    let didAbortFetchLoads = abortStaleFetchLoads(pendingNavigationLoadId);\n    let shouldUpdateFetchers = updatedFetchers || didAbortFetchLoads || revalidatingFetchers.length > 0;\n    return _extends({\n      matches,\n      loaderData,\n      errors\n    }, shouldUpdateFetchers ? {\n      fetchers: new Map(state.fetchers)\n    } : {});\n  }\n  function getUpdatedActionData(pendingActionResult) {\n    if (pendingActionResult && !isErrorResult(pendingActionResult[1])) {\n      // This is cast to `any` currently because `RouteData`uses any and it\n      // would be a breaking change to use any.\n      // TODO: v7 - change `RouteData` to use `unknown` instead of `any`\n      return {\n        [pendingActionResult[0]]: pendingActionResult[1].data\n      };\n    } else if (state.actionData) {\n      if (Object.keys(state.actionData).length === 0) {\n        return null;\n      } else {\n        return state.actionData;\n      }\n    }\n  }\n  function getUpdatedRevalidatingFetchers(revalidatingFetchers) {\n    revalidatingFetchers.forEach(rf => {\n      let fetcher = state.fetchers.get(rf.key);\n      let revalidatingFetcher = getLoadingFetcher(undefined, fetcher ? fetcher.data : undefined);\n      state.fetchers.set(rf.key, revalidatingFetcher);\n    });\n    return new Map(state.fetchers);\n  }\n  // Trigger a fetcher load/submit for the given fetcher key\n  function fetch(key, routeId, href, opts) {\n    if (isServer) {\n      throw new Error(\"router.fetch() was called during the server render, but it shouldn't be. \" + \"You are likely calling a useFetcher() method in the body of your component. \" + \"Try moving it to a useEffect or a callback.\");\n    }\n    abortFetcher(key);\n    let flushSync = (opts && opts.flushSync) === true;\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let normalizedPath = normalizeTo(state.location, state.matches, basename, future.v7_prependBasename, href, future.v7_relativeSplatPath, routeId, opts == null ? void 0 : opts.relative);\n    let matches = matchRoutes(routesToUse, normalizedPath, basename);\n    let fogOfWar = checkFogOfWar(matches, routesToUse, normalizedPath);\n    if (fogOfWar.active && fogOfWar.matches) {\n      matches = fogOfWar.matches;\n    }\n    if (!matches) {\n      setFetcherError(key, routeId, getInternalRouterError(404, {\n        pathname: normalizedPath\n      }), {\n        flushSync\n      });\n      return;\n    }\n    let {\n      path,\n      submission,\n      error\n    } = normalizeNavigateOptions(future.v7_normalizeFormMethod, true, normalizedPath, opts);\n    if (error) {\n      setFetcherError(key, routeId, error, {\n        flushSync\n      });\n      return;\n    }\n    let match = getTargetMatch(matches, path);\n    let preventScrollReset = (opts && opts.preventScrollReset) === true;\n    if (submission && isMutationMethod(submission.formMethod)) {\n      handleFetcherAction(key, routeId, path, match, matches, fogOfWar.active, flushSync, preventScrollReset, submission);\n      return;\n    }\n    // Store off the match so we can call it's shouldRevalidate on subsequent\n    // revalidations\n    fetchLoadMatches.set(key, {\n      routeId,\n      path\n    });\n    handleFetcherLoader(key, routeId, path, match, matches, fogOfWar.active, flushSync, preventScrollReset, submission);\n  }\n  // Call the action for the matched fetcher.submit(), and then handle redirects,\n  // errors, and revalidation\n  async function handleFetcherAction(key, routeId, path, match, requestMatches, isFogOfWar, flushSync, preventScrollReset, submission) {\n    interruptActiveLoads();\n    fetchLoadMatches.delete(key);\n    function detectAndHandle405Error(m) {\n      if (!m.route.action && !m.route.lazy) {\n        let error = getInternalRouterError(405, {\n          method: submission.formMethod,\n          pathname: path,\n          routeId: routeId\n        });\n        setFetcherError(key, routeId, error, {\n          flushSync\n        });\n        return true;\n      }\n      return false;\n    }\n    if (!isFogOfWar && detectAndHandle405Error(match)) {\n      return;\n    }\n    // Put this fetcher into it's submitting state\n    let existingFetcher = state.fetchers.get(key);\n    updateFetcherState(key, getSubmittingFetcher(submission, existingFetcher), {\n      flushSync\n    });\n    let abortController = new AbortController();\n    let fetchRequest = createClientSideRequest(init.history, path, abortController.signal, submission);\n    if (isFogOfWar) {\n      let discoverResult = await discoverRoutes(requestMatches, new URL(fetchRequest.url).pathname, fetchRequest.signal, key);\n      if (discoverResult.type === \"aborted\") {\n        return;\n      } else if (discoverResult.type === \"error\") {\n        setFetcherError(key, routeId, discoverResult.error, {\n          flushSync\n        });\n        return;\n      } else if (!discoverResult.matches) {\n        setFetcherError(key, routeId, getInternalRouterError(404, {\n          pathname: path\n        }), {\n          flushSync\n        });\n        return;\n      } else {\n        requestMatches = discoverResult.matches;\n        match = getTargetMatch(requestMatches, path);\n        if (detectAndHandle405Error(match)) {\n          return;\n        }\n      }\n    }\n    // Call the action for the fetcher\n    fetchControllers.set(key, abortController);\n    let originatingLoadId = incrementingLoadId;\n    let actionResults = await callDataStrategy(\"action\", state, fetchRequest, [match], requestMatches, key);\n    let actionResult = actionResults[match.route.id];\n    if (fetchRequest.signal.aborted) {\n      // We can delete this so long as we weren't aborted by our own fetcher\n      // re-submit which would have put _new_ controller is in fetchControllers\n      if (fetchControllers.get(key) === abortController) {\n        fetchControllers.delete(key);\n      }\n      return;\n    }\n    // When using v7_fetcherPersist, we don't want errors bubbling up to the UI\n    // or redirects processed for unmounted fetchers so we just revert them to\n    // idle\n    if (future.v7_fetcherPersist && deletedFetchers.has(key)) {\n      if (isRedirectResult(actionResult) || isErrorResult(actionResult)) {\n        updateFetcherState(key, getDoneFetcher(undefined));\n        return;\n      }\n      // Let SuccessResult's fall through for revalidation\n    } else {\n      if (isRedirectResult(actionResult)) {\n        fetchControllers.delete(key);\n        if (pendingNavigationLoadId > originatingLoadId) {\n          // A new navigation was kicked off after our action started, so that\n          // should take precedence over this redirect navigation.  We already\n          // set isRevalidationRequired so all loaders for the new route should\n          // fire unless opted out via shouldRevalidate\n          updateFetcherState(key, getDoneFetcher(undefined));\n          return;\n        } else {\n          fetchRedirectIds.add(key);\n          updateFetcherState(key, getLoadingFetcher(submission));\n          return startRedirectNavigation(fetchRequest, actionResult, false, {\n            fetcherSubmission: submission,\n            preventScrollReset\n          });\n        }\n      }\n      // Process any non-redirect errors thrown\n      if (isErrorResult(actionResult)) {\n        setFetcherError(key, routeId, actionResult.error);\n        return;\n      }\n    }\n    if (isDeferredResult(actionResult)) {\n      throw getInternalRouterError(400, {\n        type: \"defer-action\"\n      });\n    }\n    // Start the data load for current matches, or the next location if we're\n    // in the middle of a navigation\n    let nextLocation = state.navigation.location || state.location;\n    let revalidationRequest = createClientSideRequest(init.history, nextLocation, abortController.signal);\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let matches = state.navigation.state !== \"idle\" ? matchRoutes(routesToUse, state.navigation.location, basename) : state.matches;\n    invariant(matches, \"Didn't find any matches after fetcher action\");\n    let loadId = ++incrementingLoadId;\n    fetchReloadIds.set(key, loadId);\n    let loadFetcher = getLoadingFetcher(submission, actionResult.data);\n    state.fetchers.set(key, loadFetcher);\n    let [matchesToLoad, revalidatingFetchers] = getMatchesToLoad(init.history, state, matches, submission, nextLocation, false, future.v7_skipActionErrorRevalidation, isRevalidationRequired, cancelledDeferredRoutes, cancelledFetcherLoads, deletedFetchers, fetchLoadMatches, fetchRedirectIds, routesToUse, basename, [match.route.id, actionResult]);\n    // Put all revalidating fetchers into the loading state, except for the\n    // current fetcher which we want to keep in it's current loading state which\n    // contains it's action submission info + action data\n    revalidatingFetchers.filter(rf => rf.key !== key).forEach(rf => {\n      let staleKey = rf.key;\n      let existingFetcher = state.fetchers.get(staleKey);\n      let revalidatingFetcher = getLoadingFetcher(undefined, existingFetcher ? existingFetcher.data : undefined);\n      state.fetchers.set(staleKey, revalidatingFetcher);\n      abortFetcher(staleKey);\n      if (rf.controller) {\n        fetchControllers.set(staleKey, rf.controller);\n      }\n    });\n    updateState({\n      fetchers: new Map(state.fetchers)\n    });\n    let abortPendingFetchRevalidations = () => revalidatingFetchers.forEach(rf => abortFetcher(rf.key));\n    abortController.signal.addEventListener(\"abort\", abortPendingFetchRevalidations);\n    let {\n      loaderResults,\n      fetcherResults\n    } = await callLoadersAndMaybeResolveData(state, matches, matchesToLoad, revalidatingFetchers, revalidationRequest);\n    if (abortController.signal.aborted) {\n      return;\n    }\n    abortController.signal.removeEventListener(\"abort\", abortPendingFetchRevalidations);\n    fetchReloadIds.delete(key);\n    fetchControllers.delete(key);\n    revalidatingFetchers.forEach(r => fetchControllers.delete(r.key));\n    let redirect = findRedirect(loaderResults);\n    if (redirect) {\n      return startRedirectNavigation(revalidationRequest, redirect.result, false, {\n        preventScrollReset\n      });\n    }\n    redirect = findRedirect(fetcherResults);\n    if (redirect) {\n      // If this redirect came from a fetcher make sure we mark it in\n      // fetchRedirectIds so it doesn't get revalidated on the next set of\n      // loader executions\n      fetchRedirectIds.add(redirect.key);\n      return startRedirectNavigation(revalidationRequest, redirect.result, false, {\n        preventScrollReset\n      });\n    }\n    // Process and commit output from loaders\n    let {\n      loaderData,\n      errors\n    } = processLoaderData(state, matches, loaderResults, undefined, revalidatingFetchers, fetcherResults, activeDeferreds);\n    // Since we let revalidations complete even if the submitting fetcher was\n    // deleted, only put it back to idle if it hasn't been deleted\n    if (state.fetchers.has(key)) {\n      let doneFetcher = getDoneFetcher(actionResult.data);\n      state.fetchers.set(key, doneFetcher);\n    }\n    abortStaleFetchLoads(loadId);\n    // If we are currently in a navigation loading state and this fetcher is\n    // more recent than the navigation, we want the newer data so abort the\n    // navigation and complete it with the fetcher data\n    if (state.navigation.state === \"loading\" && loadId > pendingNavigationLoadId) {\n      invariant(pendingAction, \"Expected pending action\");\n      pendingNavigationController && pendingNavigationController.abort();\n      completeNavigation(state.navigation.location, {\n        matches,\n        loaderData,\n        errors,\n        fetchers: new Map(state.fetchers)\n      });\n    } else {\n      // otherwise just update with the fetcher data, preserving any existing\n      // loaderData for loaders that did not need to reload.  We have to\n      // manually merge here since we aren't going through completeNavigation\n      updateState({\n        errors,\n        loaderData: mergeLoaderData(state.loaderData, loaderData, matches, errors),\n        fetchers: new Map(state.fetchers)\n      });\n      isRevalidationRequired = false;\n    }\n  }\n  // Call the matched loader for fetcher.load(), handling redirects, errors, etc.\n  async function handleFetcherLoader(key, routeId, path, match, matches, isFogOfWar, flushSync, preventScrollReset, submission) {\n    let existingFetcher = state.fetchers.get(key);\n    updateFetcherState(key, getLoadingFetcher(submission, existingFetcher ? existingFetcher.data : undefined), {\n      flushSync\n    });\n    let abortController = new AbortController();\n    let fetchRequest = createClientSideRequest(init.history, path, abortController.signal);\n    if (isFogOfWar) {\n      let discoverResult = await discoverRoutes(matches, new URL(fetchRequest.url).pathname, fetchRequest.signal, key);\n      if (discoverResult.type === \"aborted\") {\n        return;\n      } else if (discoverResult.type === \"error\") {\n        setFetcherError(key, routeId, discoverResult.error, {\n          flushSync\n        });\n        return;\n      } else if (!discoverResult.matches) {\n        setFetcherError(key, routeId, getInternalRouterError(404, {\n          pathname: path\n        }), {\n          flushSync\n        });\n        return;\n      } else {\n        matches = discoverResult.matches;\n        match = getTargetMatch(matches, path);\n      }\n    }\n    // Call the loader for this fetcher route match\n    fetchControllers.set(key, abortController);\n    let originatingLoadId = incrementingLoadId;\n    let results = await callDataStrategy(\"loader\", state, fetchRequest, [match], matches, key);\n    let result = results[match.route.id];\n    // Deferred isn't supported for fetcher loads, await everything and treat it\n    // as a normal load.  resolveDeferredData will return undefined if this\n    // fetcher gets aborted, so we just leave result untouched and short circuit\n    // below if that happens\n    if (isDeferredResult(result)) {\n      result = (await resolveDeferredData(result, fetchRequest.signal, true)) || result;\n    }\n    // We can delete this so long as we weren't aborted by our our own fetcher\n    // re-load which would have put _new_ controller is in fetchControllers\n    if (fetchControllers.get(key) === abortController) {\n      fetchControllers.delete(key);\n    }\n    if (fetchRequest.signal.aborted) {\n      return;\n    }\n    // We don't want errors bubbling up or redirects followed for unmounted\n    // fetchers, so short circuit here if it was removed from the UI\n    if (deletedFetchers.has(key)) {\n      updateFetcherState(key, getDoneFetcher(undefined));\n      return;\n    }\n    // If the loader threw a redirect Response, start a new REPLACE navigation\n    if (isRedirectResult(result)) {\n      if (pendingNavigationLoadId > originatingLoadId) {\n        // A new navigation was kicked off after our loader started, so that\n        // should take precedence over this redirect navigation\n        updateFetcherState(key, getDoneFetcher(undefined));\n        return;\n      } else {\n        fetchRedirectIds.add(key);\n        await startRedirectNavigation(fetchRequest, result, false, {\n          preventScrollReset\n        });\n        return;\n      }\n    }\n    // Process any non-redirect errors thrown\n    if (isErrorResult(result)) {\n      setFetcherError(key, routeId, result.error);\n      return;\n    }\n    invariant(!isDeferredResult(result), \"Unhandled fetcher deferred data\");\n    // Put the fetcher back into an idle state\n    updateFetcherState(key, getDoneFetcher(result.data));\n  }\n  /**\n   * Utility function to handle redirects returned from an action or loader.\n   * Normally, a redirect \"replaces\" the navigation that triggered it.  So, for\n   * example:\n   *\n   *  - user is on /a\n   *  - user clicks a link to /b\n   *  - loader for /b redirects to /c\n   *\n   * In a non-JS app the browser would track the in-flight navigation to /b and\n   * then replace it with /c when it encountered the redirect response.  In\n   * the end it would only ever update the URL bar with /c.\n   *\n   * In client-side routing using pushState/replaceState, we aim to emulate\n   * this behavior and we also do not update history until the end of the\n   * navigation (including processed redirects).  This means that we never\n   * actually touch history until we've processed redirects, so we just use\n   * the history action from the original navigation (PUSH or REPLACE).\n   */\n  async function startRedirectNavigation(request, redirect, isNavigation, _temp2) {\n    let {\n      submission,\n      fetcherSubmission,\n      preventScrollReset,\n      replace\n    } = _temp2 === void 0 ? {} : _temp2;\n    if (redirect.response.headers.has(\"X-Remix-Revalidate\")) {\n      isRevalidationRequired = true;\n    }\n    let location = redirect.response.headers.get(\"Location\");\n    invariant(location, \"Expected a Location header on the redirect Response\");\n    location = normalizeRedirectLocation(location, new URL(request.url), basename);\n    let redirectLocation = createLocation(state.location, location, {\n      _isRedirect: true\n    });\n    if (isBrowser) {\n      let isDocumentReload = false;\n      if (redirect.response.headers.has(\"X-Remix-Reload-Document\")) {\n        // Hard reload if the response contained X-Remix-Reload-Document\n        isDocumentReload = true;\n      } else if (ABSOLUTE_URL_REGEX.test(location)) {\n        const url = init.history.createURL(location);\n        isDocumentReload =\n        // Hard reload if it's an absolute URL to a new origin\n        url.origin !== routerWindow.location.origin ||\n        // Hard reload if it's an absolute URL that does not match our basename\n        stripBasename(url.pathname, basename) == null;\n      }\n      if (isDocumentReload) {\n        if (replace) {\n          routerWindow.location.replace(location);\n        } else {\n          routerWindow.location.assign(location);\n        }\n        return;\n      }\n    }\n    // There's no need to abort on redirects, since we don't detect the\n    // redirect until the action/loaders have settled\n    pendingNavigationController = null;\n    let redirectHistoryAction = replace === true || redirect.response.headers.has(\"X-Remix-Replace\") ? Action.Replace : Action.Push;\n    // Use the incoming submission if provided, fallback on the active one in\n    // state.navigation\n    let {\n      formMethod,\n      formAction,\n      formEncType\n    } = state.navigation;\n    if (!submission && !fetcherSubmission && formMethod && formAction && formEncType) {\n      submission = getSubmissionFromNavigation(state.navigation);\n    }\n    // If this was a 307/308 submission we want to preserve the HTTP method and\n    // re-submit the GET/POST/PUT/PATCH/DELETE as a submission navigation to the\n    // redirected location\n    let activeSubmission = submission || fetcherSubmission;\n    if (redirectPreserveMethodStatusCodes.has(redirect.response.status) && activeSubmission && isMutationMethod(activeSubmission.formMethod)) {\n      await startNavigation(redirectHistoryAction, redirectLocation, {\n        submission: _extends({}, activeSubmission, {\n          formAction: location\n        }),\n        // Preserve these flags across redirects\n        preventScrollReset: preventScrollReset || pendingPreventScrollReset,\n        enableViewTransition: isNavigation ? pendingViewTransitionEnabled : undefined\n      });\n    } else {\n      // If we have a navigation submission, we will preserve it through the\n      // redirect navigation\n      let overrideNavigation = getLoadingNavigation(redirectLocation, submission);\n      await startNavigation(redirectHistoryAction, redirectLocation, {\n        overrideNavigation,\n        // Send fetcher submissions through for shouldRevalidate\n        fetcherSubmission,\n        // Preserve these flags across redirects\n        preventScrollReset: preventScrollReset || pendingPreventScrollReset,\n        enableViewTransition: isNavigation ? pendingViewTransitionEnabled : undefined\n      });\n    }\n  }\n  // Utility wrapper for calling dataStrategy client-side without having to\n  // pass around the manifest, mapRouteProperties, etc.\n  async function callDataStrategy(type, state, request, matchesToLoad, matches, fetcherKey) {\n    let results;\n    let dataResults = {};\n    try {\n      results = await callDataStrategyImpl(dataStrategyImpl, type, state, request, matchesToLoad, matches, fetcherKey, manifest, mapRouteProperties);\n    } catch (e) {\n      // If the outer dataStrategy method throws, just return the error for all\n      // matches - and it'll naturally bubble to the root\n      matchesToLoad.forEach(m => {\n        dataResults[m.route.id] = {\n          type: ResultType.error,\n          error: e\n        };\n      });\n      return dataResults;\n    }\n    for (let [routeId, result] of Object.entries(results)) {\n      if (isRedirectDataStrategyResultResult(result)) {\n        let response = result.result;\n        dataResults[routeId] = {\n          type: ResultType.redirect,\n          response: normalizeRelativeRoutingRedirectResponse(response, request, routeId, matches, basename, future.v7_relativeSplatPath)\n        };\n      } else {\n        dataResults[routeId] = await convertDataStrategyResultToDataResult(result);\n      }\n    }\n    return dataResults;\n  }\n  async function callLoadersAndMaybeResolveData(state, matches, matchesToLoad, fetchersToLoad, request) {\n    let currentMatches = state.matches;\n    // Kick off loaders and fetchers in parallel\n    let loaderResultsPromise = callDataStrategy(\"loader\", state, request, matchesToLoad, matches, null);\n    let fetcherResultsPromise = Promise.all(fetchersToLoad.map(async f => {\n      if (f.matches && f.match && f.controller) {\n        let results = await callDataStrategy(\"loader\", state, createClientSideRequest(init.history, f.path, f.controller.signal), [f.match], f.matches, f.key);\n        let result = results[f.match.route.id];\n        // Fetcher results are keyed by fetcher key from here on out, not routeId\n        return {\n          [f.key]: result\n        };\n      } else {\n        return Promise.resolve({\n          [f.key]: {\n            type: ResultType.error,\n            error: getInternalRouterError(404, {\n              pathname: f.path\n            })\n          }\n        });\n      }\n    }));\n    let loaderResults = await loaderResultsPromise;\n    let fetcherResults = (await fetcherResultsPromise).reduce((acc, r) => Object.assign(acc, r), {});\n    await Promise.all([resolveNavigationDeferredResults(matches, loaderResults, request.signal, currentMatches, state.loaderData), resolveFetcherDeferredResults(matches, fetcherResults, fetchersToLoad)]);\n    return {\n      loaderResults,\n      fetcherResults\n    };\n  }\n  function interruptActiveLoads() {\n    // Every interruption triggers a revalidation\n    isRevalidationRequired = true;\n    // Cancel pending route-level deferreds and mark cancelled routes for\n    // revalidation\n    cancelledDeferredRoutes.push(...cancelActiveDeferreds());\n    // Abort in-flight fetcher loads\n    fetchLoadMatches.forEach((_, key) => {\n      if (fetchControllers.has(key)) {\n        cancelledFetcherLoads.add(key);\n      }\n      abortFetcher(key);\n    });\n  }\n  function updateFetcherState(key, fetcher, opts) {\n    if (opts === void 0) {\n      opts = {};\n    }\n    state.fetchers.set(key, fetcher);\n    updateState({\n      fetchers: new Map(state.fetchers)\n    }, {\n      flushSync: (opts && opts.flushSync) === true\n    });\n  }\n  function setFetcherError(key, routeId, error, opts) {\n    if (opts === void 0) {\n      opts = {};\n    }\n    let boundaryMatch = findNearestBoundary(state.matches, routeId);\n    deleteFetcher(key);\n    updateState({\n      errors: {\n        [boundaryMatch.route.id]: error\n      },\n      fetchers: new Map(state.fetchers)\n    }, {\n      flushSync: (opts && opts.flushSync) === true\n    });\n  }\n  function getFetcher(key) {\n    activeFetchers.set(key, (activeFetchers.get(key) || 0) + 1);\n    // If this fetcher was previously marked for deletion, unmark it since we\n    // have a new instance\n    if (deletedFetchers.has(key)) {\n      deletedFetchers.delete(key);\n    }\n    return state.fetchers.get(key) || IDLE_FETCHER;\n  }\n  function deleteFetcher(key) {\n    let fetcher = state.fetchers.get(key);\n    // Don't abort the controller if this is a deletion of a fetcher.submit()\n    // in it's loading phase since - we don't want to abort the corresponding\n    // revalidation and want them to complete and land\n    if (fetchControllers.has(key) && !(fetcher && fetcher.state === \"loading\" && fetchReloadIds.has(key))) {\n      abortFetcher(key);\n    }\n    fetchLoadMatches.delete(key);\n    fetchReloadIds.delete(key);\n    fetchRedirectIds.delete(key);\n    // If we opted into the flag we can clear this now since we're calling\n    // deleteFetcher() at the end of updateState() and we've already handed the\n    // deleted fetcher keys off to the data layer.\n    // If not, we're eagerly calling deleteFetcher() and we need to keep this\n    // Set populated until the next updateState call, and we'll clear\n    // `deletedFetchers` then\n    if (future.v7_fetcherPersist) {\n      deletedFetchers.delete(key);\n    }\n    cancelledFetcherLoads.delete(key);\n    state.fetchers.delete(key);\n  }\n  function deleteFetcherAndUpdateState(key) {\n    let count = (activeFetchers.get(key) || 0) - 1;\n    if (count <= 0) {\n      activeFetchers.delete(key);\n      deletedFetchers.add(key);\n      if (!future.v7_fetcherPersist) {\n        deleteFetcher(key);\n      }\n    } else {\n      activeFetchers.set(key, count);\n    }\n    updateState({\n      fetchers: new Map(state.fetchers)\n    });\n  }\n  function abortFetcher(key) {\n    let controller = fetchControllers.get(key);\n    if (controller) {\n      controller.abort();\n      fetchControllers.delete(key);\n    }\n  }\n  function markFetchersDone(keys) {\n    for (let key of keys) {\n      let fetcher = getFetcher(key);\n      let doneFetcher = getDoneFetcher(fetcher.data);\n      state.fetchers.set(key, doneFetcher);\n    }\n  }\n  function markFetchRedirectsDone() {\n    let doneKeys = [];\n    let updatedFetchers = false;\n    for (let key of fetchRedirectIds) {\n      let fetcher = state.fetchers.get(key);\n      invariant(fetcher, \"Expected fetcher: \" + key);\n      if (fetcher.state === \"loading\") {\n        fetchRedirectIds.delete(key);\n        doneKeys.push(key);\n        updatedFetchers = true;\n      }\n    }\n    markFetchersDone(doneKeys);\n    return updatedFetchers;\n  }\n  function abortStaleFetchLoads(landedId) {\n    let yeetedKeys = [];\n    for (let [key, id] of fetchReloadIds) {\n      if (id < landedId) {\n        let fetcher = state.fetchers.get(key);\n        invariant(fetcher, \"Expected fetcher: \" + key);\n        if (fetcher.state === \"loading\") {\n          abortFetcher(key);\n          fetchReloadIds.delete(key);\n          yeetedKeys.push(key);\n        }\n      }\n    }\n    markFetchersDone(yeetedKeys);\n    return yeetedKeys.length > 0;\n  }\n  function getBlocker(key, fn) {\n    let blocker = state.blockers.get(key) || IDLE_BLOCKER;\n    if (blockerFunctions.get(key) !== fn) {\n      blockerFunctions.set(key, fn);\n    }\n    return blocker;\n  }\n  function deleteBlocker(key) {\n    state.blockers.delete(key);\n    blockerFunctions.delete(key);\n  }\n  // Utility function to update blockers, ensuring valid state transitions\n  function updateBlocker(key, newBlocker) {\n    let blocker = state.blockers.get(key) || IDLE_BLOCKER;\n    // Poor mans state machine :)\n    // https://mermaid.live/edit#pako:eNqVkc9OwzAMxl8l8nnjAYrEtDIOHEBIgwvKJTReGy3_lDpIqO27k6awMG0XcrLlnz87nwdonESogKXXBuE79rq75XZO3-yHds0RJVuv70YrPlUrCEe2HfrORS3rubqZfuhtpg5C9wk5tZ4VKcRUq88q9Z8RS0-48cE1iHJkL0ugbHuFLus9L6spZy8nX9MP2CNdomVaposqu3fGayT8T8-jJQwhepo_UtpgBQaDEUom04dZhAN1aJBDlUKJBxE1ceB2Smj0Mln-IBW5AFU2dwUiktt_2Qaq2dBfaKdEup85UV7Yd-dKjlnkabl2Pvr0DTkTreM\n    invariant(blocker.state === \"unblocked\" && newBlocker.state === \"blocked\" || blocker.state === \"blocked\" && newBlocker.state === \"blocked\" || blocker.state === \"blocked\" && newBlocker.state === \"proceeding\" || blocker.state === \"blocked\" && newBlocker.state === \"unblocked\" || blocker.state === \"proceeding\" && newBlocker.state === \"unblocked\", \"Invalid blocker state transition: \" + blocker.state + \" -> \" + newBlocker.state);\n    let blockers = new Map(state.blockers);\n    blockers.set(key, newBlocker);\n    updateState({\n      blockers\n    });\n  }\n  function shouldBlockNavigation(_ref2) {\n    let {\n      currentLocation,\n      nextLocation,\n      historyAction\n    } = _ref2;\n    if (blockerFunctions.size === 0) {\n      return;\n    }\n    // We ony support a single active blocker at the moment since we don't have\n    // any compelling use cases for multi-blocker yet\n    if (blockerFunctions.size > 1) {\n      warning(false, \"A router only supports one blocker at a time\");\n    }\n    let entries = Array.from(blockerFunctions.entries());\n    let [blockerKey, blockerFunction] = entries[entries.length - 1];\n    let blocker = state.blockers.get(blockerKey);\n    if (blocker && blocker.state === \"proceeding\") {\n      // If the blocker is currently proceeding, we don't need to re-check\n      // it and can let this navigation continue\n      return;\n    }\n    // At this point, we know we're unblocked/blocked so we need to check the\n    // user-provided blocker function\n    if (blockerFunction({\n      currentLocation,\n      nextLocation,\n      historyAction\n    })) {\n      return blockerKey;\n    }\n  }\n  function handleNavigational404(pathname) {\n    let error = getInternalRouterError(404, {\n      pathname\n    });\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let {\n      matches,\n      route\n    } = getShortCircuitMatches(routesToUse);\n    // Cancel all pending deferred on 404s since we don't keep any routes\n    cancelActiveDeferreds();\n    return {\n      notFoundMatches: matches,\n      route,\n      error\n    };\n  }\n  function cancelActiveDeferreds(predicate) {\n    let cancelledRouteIds = [];\n    activeDeferreds.forEach((dfd, routeId) => {\n      if (!predicate || predicate(routeId)) {\n        // Cancel the deferred - but do not remove from activeDeferreds here -\n        // we rely on the subscribers to do that so our tests can assert proper\n        // cleanup via _internalActiveDeferreds\n        dfd.cancel();\n        cancelledRouteIds.push(routeId);\n        activeDeferreds.delete(routeId);\n      }\n    });\n    return cancelledRouteIds;\n  }\n  // Opt in to capturing and reporting scroll positions during navigations,\n  // used by the <ScrollRestoration> component\n  function enableScrollRestoration(positions, getPosition, getKey) {\n    savedScrollPositions = positions;\n    getScrollPosition = getPosition;\n    getScrollRestorationKey = getKey || null;\n    // Perform initial hydration scroll restoration, since we miss the boat on\n    // the initial updateState() because we've not yet rendered <ScrollRestoration/>\n    // and therefore have no savedScrollPositions available\n    if (!initialScrollRestored && state.navigation === IDLE_NAVIGATION) {\n      initialScrollRestored = true;\n      let y = getSavedScrollPosition(state.location, state.matches);\n      if (y != null) {\n        updateState({\n          restoreScrollPosition: y\n        });\n      }\n    }\n    return () => {\n      savedScrollPositions = null;\n      getScrollPosition = null;\n      getScrollRestorationKey = null;\n    };\n  }\n  function getScrollKey(location, matches) {\n    if (getScrollRestorationKey) {\n      let key = getScrollRestorationKey(location, matches.map(m => convertRouteMatchToUiMatch(m, state.loaderData)));\n      return key || location.key;\n    }\n    return location.key;\n  }\n  function saveScrollPosition(location, matches) {\n    if (savedScrollPositions && getScrollPosition) {\n      let key = getScrollKey(location, matches);\n      savedScrollPositions[key] = getScrollPosition();\n    }\n  }\n  function getSavedScrollPosition(location, matches) {\n    if (savedScrollPositions) {\n      let key = getScrollKey(location, matches);\n      let y = savedScrollPositions[key];\n      if (typeof y === \"number\") {\n        return y;\n      }\n    }\n    return null;\n  }\n  function checkFogOfWar(matches, routesToUse, pathname) {\n    if (patchRoutesOnNavigationImpl) {\n      if (!matches) {\n        let fogMatches = matchRoutesImpl(routesToUse, pathname, basename, true);\n        return {\n          active: true,\n          matches: fogMatches || []\n        };\n      } else {\n        if (Object.keys(matches[0].params).length > 0) {\n          // If we matched a dynamic param or a splat, it might only be because\n          // we haven't yet discovered other routes that would match with a\n          // higher score.  Call patchRoutesOnNavigation just to be sure\n          let partialMatches = matchRoutesImpl(routesToUse, pathname, basename, true);\n          return {\n            active: true,\n            matches: partialMatches\n          };\n        }\n      }\n    }\n    return {\n      active: false,\n      matches: null\n    };\n  }\n  async function discoverRoutes(matches, pathname, signal, fetcherKey) {\n    if (!patchRoutesOnNavigationImpl) {\n      return {\n        type: \"success\",\n        matches\n      };\n    }\n    let partialMatches = matches;\n    while (true) {\n      let isNonHMR = inFlightDataRoutes == null;\n      let routesToUse = inFlightDataRoutes || dataRoutes;\n      let localManifest = manifest;\n      try {\n        await patchRoutesOnNavigationImpl({\n          signal,\n          path: pathname,\n          matches: partialMatches,\n          fetcherKey,\n          patch: (routeId, children) => {\n            if (signal.aborted) return;\n            patchRoutesImpl(routeId, children, routesToUse, localManifest, mapRouteProperties);\n          }\n        });\n      } catch (e) {\n        return {\n          type: \"error\",\n          error: e,\n          partialMatches\n        };\n      } finally {\n        // If we are not in the middle of an HMR revalidation and we changed the\n        // routes, provide a new identity so when we `updateState` at the end of\n        // this navigation/fetch `router.routes` will be a new identity and\n        // trigger a re-run of memoized `router.routes` dependencies.\n        // HMR will already update the identity and reflow when it lands\n        // `inFlightDataRoutes` in `completeNavigation`\n        if (isNonHMR && !signal.aborted) {\n          dataRoutes = [...dataRoutes];\n        }\n      }\n      if (signal.aborted) {\n        return {\n          type: \"aborted\"\n        };\n      }\n      let newMatches = matchRoutes(routesToUse, pathname, basename);\n      if (newMatches) {\n        return {\n          type: \"success\",\n          matches: newMatches\n        };\n      }\n      let newPartialMatches = matchRoutesImpl(routesToUse, pathname, basename, true);\n      // Avoid loops if the second pass results in the same partial matches\n      if (!newPartialMatches || partialMatches.length === newPartialMatches.length && partialMatches.every((m, i) => m.route.id === newPartialMatches[i].route.id)) {\n        return {\n          type: \"success\",\n          matches: null\n        };\n      }\n      partialMatches = newPartialMatches;\n    }\n  }\n  function _internalSetRoutes(newRoutes) {\n    manifest = {};\n    inFlightDataRoutes = convertRoutesToDataRoutes(newRoutes, mapRouteProperties, undefined, manifest);\n  }\n  function patchRoutes(routeId, children) {\n    let isNonHMR = inFlightDataRoutes == null;\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    patchRoutesImpl(routeId, children, routesToUse, manifest, mapRouteProperties);\n    // If we are not in the middle of an HMR revalidation and we changed the\n    // routes, provide a new identity and trigger a reflow via `updateState`\n    // to re-run memoized `router.routes` dependencies.\n    // HMR will already update the identity and reflow when it lands\n    // `inFlightDataRoutes` in `completeNavigation`\n    if (isNonHMR) {\n      dataRoutes = [...dataRoutes];\n      updateState({});\n    }\n  }\n  router = {\n    get basename() {\n      return basename;\n    },\n    get future() {\n      return future;\n    },\n    get state() {\n      return state;\n    },\n    get routes() {\n      return dataRoutes;\n    },\n    get window() {\n      return routerWindow;\n    },\n    initialize,\n    subscribe,\n    enableScrollRestoration,\n    navigate,\n    fetch,\n    revalidate,\n    // Passthrough to history-aware createHref used by useHref so we get proper\n    // hash-aware URLs in DOM paths\n    createHref: to => init.history.createHref(to),\n    encodeLocation: to => init.history.encodeLocation(to),\n    getFetcher,\n    deleteFetcher: deleteFetcherAndUpdateState,\n    dispose,\n    getBlocker,\n    deleteBlocker,\n    patchRoutes,\n    _internalFetchControllers: fetchControllers,\n    _internalActiveDeferreds: activeDeferreds,\n    // TODO: Remove setRoutes, it's temporary to avoid dealing with\n    // updating the tree while validating the update algorithm.\n    _internalSetRoutes\n  };\n  return router;\n}\n//#endregion\n////////////////////////////////////////////////////////////////////////////////\n//#region createStaticHandler\n////////////////////////////////////////////////////////////////////////////////\nconst UNSAFE_DEFERRED_SYMBOL = Symbol(\"deferred\");\nfunction createStaticHandler(routes, opts) {\n  invariant(routes.length > 0, \"You must provide a non-empty routes array to createStaticHandler\");\n  let manifest = {};\n  let basename = (opts ? opts.basename : null) || \"/\";\n  let mapRouteProperties;\n  if (opts != null && opts.mapRouteProperties) {\n    mapRouteProperties = opts.mapRouteProperties;\n  } else if (opts != null && opts.detectErrorBoundary) {\n    // If they are still using the deprecated version, wrap it with the new API\n    let detectErrorBoundary = opts.detectErrorBoundary;\n    mapRouteProperties = route => ({\n      hasErrorBoundary: detectErrorBoundary(route)\n    });\n  } else {\n    mapRouteProperties = defaultMapRouteProperties;\n  }\n  // Config driven behavior flags\n  let future = _extends({\n    v7_relativeSplatPath: false,\n    v7_throwAbortReason: false\n  }, opts ? opts.future : null);\n  let dataRoutes = convertRoutesToDataRoutes(routes, mapRouteProperties, undefined, manifest);\n  /**\n   * The query() method is intended for document requests, in which we want to\n   * call an optional action and potentially multiple loaders for all nested\n   * routes.  It returns a StaticHandlerContext object, which is very similar\n   * to the router state (location, loaderData, actionData, errors, etc.) and\n   * also adds SSR-specific information such as the statusCode and headers\n   * from action/loaders Responses.\n   *\n   * It _should_ never throw and should report all errors through the\n   * returned context.errors object, properly associating errors to their error\n   * boundary.  Additionally, it tracks _deepestRenderedBoundaryId which can be\n   * used to emulate React error boundaries during SSr by performing a second\n   * pass only down to the boundaryId.\n   *\n   * The one exception where we do not return a StaticHandlerContext is when a\n   * redirect response is returned or thrown from any action/loader.  We\n   * propagate that out and return the raw Response so the HTTP server can\n   * return it directly.\n   *\n   * - `opts.requestContext` is an optional server context that will be passed\n   *   to actions/loaders in the `context` parameter\n   * - `opts.skipLoaderErrorBubbling` is an optional parameter that will prevent\n   *   the bubbling of errors which allows single-fetch-type implementations\n   *   where the client will handle the bubbling and we may need to return data\n   *   for the handling route\n   */\n  async function query(request, _temp3) {\n    let {\n      requestContext,\n      skipLoaderErrorBubbling,\n      dataStrategy\n    } = _temp3 === void 0 ? {} : _temp3;\n    let url = new URL(request.url);\n    let method = request.method;\n    let location = createLocation(\"\", createPath(url), null, \"default\");\n    let matches = matchRoutes(dataRoutes, location, basename);\n    // SSR supports HEAD requests while SPA doesn't\n    if (!isValidMethod(method) && method !== \"HEAD\") {\n      let error = getInternalRouterError(405, {\n        method\n      });\n      let {\n        matches: methodNotAllowedMatches,\n        route\n      } = getShortCircuitMatches(dataRoutes);\n      return {\n        basename,\n        location,\n        matches: methodNotAllowedMatches,\n        loaderData: {},\n        actionData: null,\n        errors: {\n          [route.id]: error\n        },\n        statusCode: error.status,\n        loaderHeaders: {},\n        actionHeaders: {},\n        activeDeferreds: null\n      };\n    } else if (!matches) {\n      let error = getInternalRouterError(404, {\n        pathname: location.pathname\n      });\n      let {\n        matches: notFoundMatches,\n        route\n      } = getShortCircuitMatches(dataRoutes);\n      return {\n        basename,\n        location,\n        matches: notFoundMatches,\n        loaderData: {},\n        actionData: null,\n        errors: {\n          [route.id]: error\n        },\n        statusCode: error.status,\n        loaderHeaders: {},\n        actionHeaders: {},\n        activeDeferreds: null\n      };\n    }\n    let result = await queryImpl(request, location, matches, requestContext, dataStrategy || null, skipLoaderErrorBubbling === true, null);\n    if (isResponse(result)) {\n      return result;\n    }\n    // When returning StaticHandlerContext, we patch back in the location here\n    // since we need it for React Context.  But this helps keep our submit and\n    // loadRouteData operating on a Request instead of a Location\n    return _extends({\n      location,\n      basename\n    }, result);\n  }\n  /**\n   * The queryRoute() method is intended for targeted route requests, either\n   * for fetch ?_data requests or resource route requests.  In this case, we\n   * are only ever calling a single action or loader, and we are returning the\n   * returned value directly.  In most cases, this will be a Response returned\n   * from the action/loader, but it may be a primitive or other value as well -\n   * and in such cases the calling context should handle that accordingly.\n   *\n   * We do respect the throw/return differentiation, so if an action/loader\n   * throws, then this method will throw the value.  This is important so we\n   * can do proper boundary identification in Remix where a thrown Response\n   * must go to the Catch Boundary but a returned Response is happy-path.\n   *\n   * One thing to note is that any Router-initiated Errors that make sense\n   * to associate with a status code will be thrown as an ErrorResponse\n   * instance which include the raw Error, such that the calling context can\n   * serialize the error as they see fit while including the proper response\n   * code.  Examples here are 404 and 405 errors that occur prior to reaching\n   * any user-defined loaders.\n   *\n   * - `opts.routeId` allows you to specify the specific route handler to call.\n   *   If not provided the handler will determine the proper route by matching\n   *   against `request.url`\n   * - `opts.requestContext` is an optional server context that will be passed\n   *    to actions/loaders in the `context` parameter\n   */\n  async function queryRoute(request, _temp4) {\n    let {\n      routeId,\n      requestContext,\n      dataStrategy\n    } = _temp4 === void 0 ? {} : _temp4;\n    let url = new URL(request.url);\n    let method = request.method;\n    let location = createLocation(\"\", createPath(url), null, \"default\");\n    let matches = matchRoutes(dataRoutes, location, basename);\n    // SSR supports HEAD requests while SPA doesn't\n    if (!isValidMethod(method) && method !== \"HEAD\" && method !== \"OPTIONS\") {\n      throw getInternalRouterError(405, {\n        method\n      });\n    } else if (!matches) {\n      throw getInternalRouterError(404, {\n        pathname: location.pathname\n      });\n    }\n    let match = routeId ? matches.find(m => m.route.id === routeId) : getTargetMatch(matches, location);\n    if (routeId && !match) {\n      throw getInternalRouterError(403, {\n        pathname: location.pathname,\n        routeId\n      });\n    } else if (!match) {\n      // This should never hit I don't think?\n      throw getInternalRouterError(404, {\n        pathname: location.pathname\n      });\n    }\n    let result = await queryImpl(request, location, matches, requestContext, dataStrategy || null, false, match);\n    if (isResponse(result)) {\n      return result;\n    }\n    let error = result.errors ? Object.values(result.errors)[0] : undefined;\n    if (error !== undefined) {\n      // If we got back result.errors, that means the loader/action threw\n      // _something_ that wasn't a Response, but it's not guaranteed/required\n      // to be an `instanceof Error` either, so we have to use throw here to\n      // preserve the \"error\" state outside of queryImpl.\n      throw error;\n    }\n    // Pick off the right state value to return\n    if (result.actionData) {\n      return Object.values(result.actionData)[0];\n    }\n    if (result.loaderData) {\n      var _result$activeDeferre;\n      let data = Object.values(result.loaderData)[0];\n      if ((_result$activeDeferre = result.activeDeferreds) != null && _result$activeDeferre[match.route.id]) {\n        data[UNSAFE_DEFERRED_SYMBOL] = result.activeDeferreds[match.route.id];\n      }\n      return data;\n    }\n    return undefined;\n  }\n  async function queryImpl(request, location, matches, requestContext, dataStrategy, skipLoaderErrorBubbling, routeMatch) {\n    invariant(request.signal, \"query()/queryRoute() requests must contain an AbortController signal\");\n    try {\n      if (isMutationMethod(request.method.toLowerCase())) {\n        let result = await submit(request, matches, routeMatch || getTargetMatch(matches, location), requestContext, dataStrategy, skipLoaderErrorBubbling, routeMatch != null);\n        return result;\n      }\n      let result = await loadRouteData(request, matches, requestContext, dataStrategy, skipLoaderErrorBubbling, routeMatch);\n      return isResponse(result) ? result : _extends({}, result, {\n        actionData: null,\n        actionHeaders: {}\n      });\n    } catch (e) {\n      // If the user threw/returned a Response in callLoaderOrAction for a\n      // `queryRoute` call, we throw the `DataStrategyResult` to bail out early\n      // and then return or throw the raw Response here accordingly\n      if (isDataStrategyResult(e) && isResponse(e.result)) {\n        if (e.type === ResultType.error) {\n          throw e.result;\n        }\n        return e.result;\n      }\n      // Redirects are always returned since they don't propagate to catch\n      // boundaries\n      if (isRedirectResponse(e)) {\n        return e;\n      }\n      throw e;\n    }\n  }\n  async function submit(request, matches, actionMatch, requestContext, dataStrategy, skipLoaderErrorBubbling, isRouteRequest) {\n    let result;\n    if (!actionMatch.route.action && !actionMatch.route.lazy) {\n      let error = getInternalRouterError(405, {\n        method: request.method,\n        pathname: new URL(request.url).pathname,\n        routeId: actionMatch.route.id\n      });\n      if (isRouteRequest) {\n        throw error;\n      }\n      result = {\n        type: ResultType.error,\n        error\n      };\n    } else {\n      let results = await callDataStrategy(\"action\", request, [actionMatch], matches, isRouteRequest, requestContext, dataStrategy);\n      result = results[actionMatch.route.id];\n      if (request.signal.aborted) {\n        throwStaticHandlerAbortedError(request, isRouteRequest, future);\n      }\n    }\n    if (isRedirectResult(result)) {\n      // Uhhhh - this should never happen, we should always throw these from\n      // callLoaderOrAction, but the type narrowing here keeps TS happy and we\n      // can get back on the \"throw all redirect responses\" train here should\n      // this ever happen :/\n      throw new Response(null, {\n        status: result.response.status,\n        headers: {\n          Location: result.response.headers.get(\"Location\")\n        }\n      });\n    }\n    if (isDeferredResult(result)) {\n      let error = getInternalRouterError(400, {\n        type: \"defer-action\"\n      });\n      if (isRouteRequest) {\n        throw error;\n      }\n      result = {\n        type: ResultType.error,\n        error\n      };\n    }\n    if (isRouteRequest) {\n      // Note: This should only be non-Response values if we get here, since\n      // isRouteRequest should throw any Response received in callLoaderOrAction\n      if (isErrorResult(result)) {\n        throw result.error;\n      }\n      return {\n        matches: [actionMatch],\n        loaderData: {},\n        actionData: {\n          [actionMatch.route.id]: result.data\n        },\n        errors: null,\n        // Note: statusCode + headers are unused here since queryRoute will\n        // return the raw Response or value\n        statusCode: 200,\n        loaderHeaders: {},\n        actionHeaders: {},\n        activeDeferreds: null\n      };\n    }\n    // Create a GET request for the loaders\n    let loaderRequest = new Request(request.url, {\n      headers: request.headers,\n      redirect: request.redirect,\n      signal: request.signal\n    });\n    if (isErrorResult(result)) {\n      // Store off the pending error - we use it to determine which loaders\n      // to call and will commit it when we complete the navigation\n      let boundaryMatch = skipLoaderErrorBubbling ? actionMatch : findNearestBoundary(matches, actionMatch.route.id);\n      let context = await loadRouteData(loaderRequest, matches, requestContext, dataStrategy, skipLoaderErrorBubbling, null, [boundaryMatch.route.id, result]);\n      // action status codes take precedence over loader status codes\n      return _extends({}, context, {\n        statusCode: isRouteErrorResponse(result.error) ? result.error.status : result.statusCode != null ? result.statusCode : 500,\n        actionData: null,\n        actionHeaders: _extends({}, result.headers ? {\n          [actionMatch.route.id]: result.headers\n        } : {})\n      });\n    }\n    let context = await loadRouteData(loaderRequest, matches, requestContext, dataStrategy, skipLoaderErrorBubbling, null);\n    return _extends({}, context, {\n      actionData: {\n        [actionMatch.route.id]: result.data\n      }\n    }, result.statusCode ? {\n      statusCode: result.statusCode\n    } : {}, {\n      actionHeaders: result.headers ? {\n        [actionMatch.route.id]: result.headers\n      } : {}\n    });\n  }\n  async function loadRouteData(request, matches, requestContext, dataStrategy, skipLoaderErrorBubbling, routeMatch, pendingActionResult) {\n    let isRouteRequest = routeMatch != null;\n    // Short circuit if we have no loaders to run (queryRoute())\n    if (isRouteRequest && !(routeMatch != null && routeMatch.route.loader) && !(routeMatch != null && routeMatch.route.lazy)) {\n      throw getInternalRouterError(400, {\n        method: request.method,\n        pathname: new URL(request.url).pathname,\n        routeId: routeMatch == null ? void 0 : routeMatch.route.id\n      });\n    }\n    let requestMatches = routeMatch ? [routeMatch] : pendingActionResult && isErrorResult(pendingActionResult[1]) ? getLoaderMatchesUntilBoundary(matches, pendingActionResult[0]) : matches;\n    let matchesToLoad = requestMatches.filter(m => m.route.loader || m.route.lazy);\n    // Short circuit if we have no loaders to run (query())\n    if (matchesToLoad.length === 0) {\n      return {\n        matches,\n        // Add a null for all matched routes for proper revalidation on the client\n        loaderData: matches.reduce((acc, m) => Object.assign(acc, {\n          [m.route.id]: null\n        }), {}),\n        errors: pendingActionResult && isErrorResult(pendingActionResult[1]) ? {\n          [pendingActionResult[0]]: pendingActionResult[1].error\n        } : null,\n        statusCode: 200,\n        loaderHeaders: {},\n        activeDeferreds: null\n      };\n    }\n    let results = await callDataStrategy(\"loader\", request, matchesToLoad, matches, isRouteRequest, requestContext, dataStrategy);\n    if (request.signal.aborted) {\n      throwStaticHandlerAbortedError(request, isRouteRequest, future);\n    }\n    // Process and commit output from loaders\n    let activeDeferreds = new Map();\n    let context = processRouteLoaderData(matches, results, pendingActionResult, activeDeferreds, skipLoaderErrorBubbling);\n    // Add a null for any non-loader matches for proper revalidation on the client\n    let executedLoaders = new Set(matchesToLoad.map(match => match.route.id));\n    matches.forEach(match => {\n      if (!executedLoaders.has(match.route.id)) {\n        context.loaderData[match.route.id] = null;\n      }\n    });\n    return _extends({}, context, {\n      matches,\n      activeDeferreds: activeDeferreds.size > 0 ? Object.fromEntries(activeDeferreds.entries()) : null\n    });\n  }\n  // Utility wrapper for calling dataStrategy server-side without having to\n  // pass around the manifest, mapRouteProperties, etc.\n  async function callDataStrategy(type, request, matchesToLoad, matches, isRouteRequest, requestContext, dataStrategy) {\n    let results = await callDataStrategyImpl(dataStrategy || defaultDataStrategy, type, null, request, matchesToLoad, matches, null, manifest, mapRouteProperties, requestContext);\n    let dataResults = {};\n    await Promise.all(matches.map(async match => {\n      if (!(match.route.id in results)) {\n        return;\n      }\n      let result = results[match.route.id];\n      if (isRedirectDataStrategyResultResult(result)) {\n        let response = result.result;\n        // Throw redirects and let the server handle them with an HTTP redirect\n        throw normalizeRelativeRoutingRedirectResponse(response, request, match.route.id, matches, basename, future.v7_relativeSplatPath);\n      }\n      if (isResponse(result.result) && isRouteRequest) {\n        // For SSR single-route requests, we want to hand Responses back\n        // directly without unwrapping\n        throw result;\n      }\n      dataResults[match.route.id] = await convertDataStrategyResultToDataResult(result);\n    }));\n    return dataResults;\n  }\n  return {\n    dataRoutes,\n    query,\n    queryRoute\n  };\n}\n//#endregion\n////////////////////////////////////////////////////////////////////////////////\n//#region Helpers\n////////////////////////////////////////////////////////////////////////////////\n/**\n * Given an existing StaticHandlerContext and an error thrown at render time,\n * provide an updated StaticHandlerContext suitable for a second SSR render\n */\nfunction getStaticContextFromError(routes, context, error) {\n  let newContext = _extends({}, context, {\n    statusCode: isRouteErrorResponse(error) ? error.status : 500,\n    errors: {\n      [context._deepestRenderedBoundaryId || routes[0].id]: error\n    }\n  });\n  return newContext;\n}\nfunction throwStaticHandlerAbortedError(request, isRouteRequest, future) {\n  if (future.v7_throwAbortReason && request.signal.reason !== undefined) {\n    throw request.signal.reason;\n  }\n  let method = isRouteRequest ? \"queryRoute\" : \"query\";\n  throw new Error(method + \"() call aborted: \" + request.method + \" \" + request.url);\n}\nfunction isSubmissionNavigation(opts) {\n  return opts != null && (\"formData\" in opts && opts.formData != null || \"body\" in opts && opts.body !== undefined);\n}\nfunction normalizeTo(location, matches, basename, prependBasename, to, v7_relativeSplatPath, fromRouteId, relative) {\n  let contextualMatches;\n  let activeRouteMatch;\n  if (fromRouteId) {\n    // Grab matches up to the calling route so our route-relative logic is\n    // relative to the correct source route\n    contextualMatches = [];\n    for (let match of matches) {\n      contextualMatches.push(match);\n      if (match.route.id === fromRouteId) {\n        activeRouteMatch = match;\n        break;\n      }\n    }\n  } else {\n    contextualMatches = matches;\n    activeRouteMatch = matches[matches.length - 1];\n  }\n  // Resolve the relative path\n  let path = resolveTo(to ? to : \".\", getResolveToMatches(contextualMatches, v7_relativeSplatPath), stripBasename(location.pathname, basename) || location.pathname, relative === \"path\");\n  // When `to` is not specified we inherit search/hash from the current\n  // location, unlike when to=\".\" and we just inherit the path.\n  // See https://github.com/remix-run/remix/issues/927\n  if (to == null) {\n    path.search = location.search;\n    path.hash = location.hash;\n  }\n  // Account for `?index` params when routing to the current location\n  if ((to == null || to === \"\" || to === \".\") && activeRouteMatch) {\n    let nakedIndex = hasNakedIndexQuery(path.search);\n    if (activeRouteMatch.route.index && !nakedIndex) {\n      // Add one when we're targeting an index route\n      path.search = path.search ? path.search.replace(/^\\?/, \"?index&\") : \"?index\";\n    } else if (!activeRouteMatch.route.index && nakedIndex) {\n      // Remove existing ones when we're not\n      let params = new URLSearchParams(path.search);\n      let indexValues = params.getAll(\"index\");\n      params.delete(\"index\");\n      indexValues.filter(v => v).forEach(v => params.append(\"index\", v));\n      let qs = params.toString();\n      path.search = qs ? \"?\" + qs : \"\";\n    }\n  }\n  // If we're operating within a basename, prepend it to the pathname.  If\n  // this is a root navigation, then just use the raw basename which allows\n  // the basename to have full control over the presence of a trailing slash\n  // on root actions\n  if (prependBasename && basename !== \"/\") {\n    path.pathname = path.pathname === \"/\" ? basename : joinPaths([basename, path.pathname]);\n  }\n  return createPath(path);\n}\n// Normalize navigation options by converting formMethod=GET formData objects to\n// URLSearchParams so they behave identically to links with query params\nfunction normalizeNavigateOptions(normalizeFormMethod, isFetcher, path, opts) {\n  // Return location verbatim on non-submission navigations\n  if (!opts || !isSubmissionNavigation(opts)) {\n    return {\n      path\n    };\n  }\n  if (opts.formMethod && !isValidMethod(opts.formMethod)) {\n    return {\n      path,\n      error: getInternalRouterError(405, {\n        method: opts.formMethod\n      })\n    };\n  }\n  let getInvalidBodyError = () => ({\n    path,\n    error: getInternalRouterError(400, {\n      type: \"invalid-body\"\n    })\n  });\n  // Create a Submission on non-GET navigations\n  let rawFormMethod = opts.formMethod || \"get\";\n  let formMethod = normalizeFormMethod ? rawFormMethod.toUpperCase() : rawFormMethod.toLowerCase();\n  let formAction = stripHashFromPath(path);\n  if (opts.body !== undefined) {\n    if (opts.formEncType === \"text/plain\") {\n      // text only support POST/PUT/PATCH/DELETE submissions\n      if (!isMutationMethod(formMethod)) {\n        return getInvalidBodyError();\n      }\n      let text = typeof opts.body === \"string\" ? opts.body : opts.body instanceof FormData || opts.body instanceof URLSearchParams ?\n      // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#plain-text-form-data\n      Array.from(opts.body.entries()).reduce((acc, _ref3) => {\n        let [name, value] = _ref3;\n        return \"\" + acc + name + \"=\" + value + \"\\n\";\n      }, \"\") : String(opts.body);\n      return {\n        path,\n        submission: {\n          formMethod,\n          formAction,\n          formEncType: opts.formEncType,\n          formData: undefined,\n          json: undefined,\n          text\n        }\n      };\n    } else if (opts.formEncType === \"application/json\") {\n      // json only supports POST/PUT/PATCH/DELETE submissions\n      if (!isMutationMethod(formMethod)) {\n        return getInvalidBodyError();\n      }\n      try {\n        let json = typeof opts.body === \"string\" ? JSON.parse(opts.body) : opts.body;\n        return {\n          path,\n          submission: {\n            formMethod,\n            formAction,\n            formEncType: opts.formEncType,\n            formData: undefined,\n            json,\n            text: undefined\n          }\n        };\n      } catch (e) {\n        return getInvalidBodyError();\n      }\n    }\n  }\n  invariant(typeof FormData === \"function\", \"FormData is not available in this environment\");\n  let searchParams;\n  let formData;\n  if (opts.formData) {\n    searchParams = convertFormDataToSearchParams(opts.formData);\n    formData = opts.formData;\n  } else if (opts.body instanceof FormData) {\n    searchParams = convertFormDataToSearchParams(opts.body);\n    formData = opts.body;\n  } else if (opts.body instanceof URLSearchParams) {\n    searchParams = opts.body;\n    formData = convertSearchParamsToFormData(searchParams);\n  } else if (opts.body == null) {\n    searchParams = new URLSearchParams();\n    formData = new FormData();\n  } else {\n    try {\n      searchParams = new URLSearchParams(opts.body);\n      formData = convertSearchParamsToFormData(searchParams);\n    } catch (e) {\n      return getInvalidBodyError();\n    }\n  }\n  let submission = {\n    formMethod,\n    formAction,\n    formEncType: opts && opts.formEncType || \"application/x-www-form-urlencoded\",\n    formData,\n    json: undefined,\n    text: undefined\n  };\n  if (isMutationMethod(submission.formMethod)) {\n    return {\n      path,\n      submission\n    };\n  }\n  // Flatten submission onto URLSearchParams for GET submissions\n  let parsedPath = parsePath(path);\n  // On GET navigation submissions we can drop the ?index param from the\n  // resulting location since all loaders will run.  But fetcher GET submissions\n  // only run a single loader so we need to preserve any incoming ?index params\n  if (isFetcher && parsedPath.search && hasNakedIndexQuery(parsedPath.search)) {\n    searchParams.append(\"index\", \"\");\n  }\n  parsedPath.search = \"?\" + searchParams;\n  return {\n    path: createPath(parsedPath),\n    submission\n  };\n}\n// Filter out all routes at/below any caught error as they aren't going to\n// render so we don't need to load them\nfunction getLoaderMatchesUntilBoundary(matches, boundaryId, includeBoundary) {\n  if (includeBoundary === void 0) {\n    includeBoundary = false;\n  }\n  let index = matches.findIndex(m => m.route.id === boundaryId);\n  if (index >= 0) {\n    return matches.slice(0, includeBoundary ? index + 1 : index);\n  }\n  return matches;\n}\nfunction getMatchesToLoad(history, state, matches, submission, location, initialHydration, skipActionErrorRevalidation, isRevalidationRequired, cancelledDeferredRoutes, cancelledFetcherLoads, deletedFetchers, fetchLoadMatches, fetchRedirectIds, routesToUse, basename, pendingActionResult) {\n  let actionResult = pendingActionResult ? isErrorResult(pendingActionResult[1]) ? pendingActionResult[1].error : pendingActionResult[1].data : undefined;\n  let currentUrl = history.createURL(state.location);\n  let nextUrl = history.createURL(location);\n  // Pick navigation matches that are net-new or qualify for revalidation\n  let boundaryMatches = matches;\n  if (initialHydration && state.errors) {\n    // On initial hydration, only consider matches up to _and including_ the boundary.\n    // This is inclusive to handle cases where a server loader ran successfully,\n    // a child server loader bubbled up to this route, but this route has\n    // `clientLoader.hydrate` so we want to still run the `clientLoader` so that\n    // we have a complete version of `loaderData`\n    boundaryMatches = getLoaderMatchesUntilBoundary(matches, Object.keys(state.errors)[0], true);\n  } else if (pendingActionResult && isErrorResult(pendingActionResult[1])) {\n    // If an action threw an error, we call loaders up to, but not including the\n    // boundary\n    boundaryMatches = getLoaderMatchesUntilBoundary(matches, pendingActionResult[0]);\n  }\n  // Don't revalidate loaders by default after action 4xx/5xx responses\n  // when the flag is enabled.  They can still opt-into revalidation via\n  // `shouldRevalidate` via `actionResult`\n  let actionStatus = pendingActionResult ? pendingActionResult[1].statusCode : undefined;\n  let shouldSkipRevalidation = skipActionErrorRevalidation && actionStatus && actionStatus >= 400;\n  let navigationMatches = boundaryMatches.filter((match, index) => {\n    let {\n      route\n    } = match;\n    if (route.lazy) {\n      // We haven't loaded this route yet so we don't know if it's got a loader!\n      return true;\n    }\n    if (route.loader == null) {\n      return false;\n    }\n    if (initialHydration) {\n      return shouldLoadRouteOnHydration(route, state.loaderData, state.errors);\n    }\n    // Always call the loader on new route instances and pending defer cancellations\n    if (isNewLoader(state.loaderData, state.matches[index], match) || cancelledDeferredRoutes.some(id => id === match.route.id)) {\n      return true;\n    }\n    // This is the default implementation for when we revalidate.  If the route\n    // provides it's own implementation, then we give them full control but\n    // provide this value so they can leverage it if needed after they check\n    // their own specific use cases\n    let currentRouteMatch = state.matches[index];\n    let nextRouteMatch = match;\n    return shouldRevalidateLoader(match, _extends({\n      currentUrl,\n      currentParams: currentRouteMatch.params,\n      nextUrl,\n      nextParams: nextRouteMatch.params\n    }, submission, {\n      actionResult,\n      actionStatus,\n      defaultShouldRevalidate: shouldSkipRevalidation ? false :\n      // Forced revalidation due to submission, useRevalidator, or X-Remix-Revalidate\n      isRevalidationRequired || currentUrl.pathname + currentUrl.search === nextUrl.pathname + nextUrl.search ||\n      // Search params affect all loaders\n      currentUrl.search !== nextUrl.search || isNewRouteInstance(currentRouteMatch, nextRouteMatch)\n    }));\n  });\n  // Pick fetcher.loads that need to be revalidated\n  let revalidatingFetchers = [];\n  fetchLoadMatches.forEach((f, key) => {\n    // Don't revalidate:\n    //  - on initial hydration (shouldn't be any fetchers then anyway)\n    //  - if fetcher won't be present in the subsequent render\n    //    - no longer matches the URL (v7_fetcherPersist=false)\n    //    - was unmounted but persisted due to v7_fetcherPersist=true\n    if (initialHydration || !matches.some(m => m.route.id === f.routeId) || deletedFetchers.has(key)) {\n      return;\n    }\n    let fetcherMatches = matchRoutes(routesToUse, f.path, basename);\n    // If the fetcher path no longer matches, push it in with null matches so\n    // we can trigger a 404 in callLoadersAndMaybeResolveData.  Note this is\n    // currently only a use-case for Remix HMR where the route tree can change\n    // at runtime and remove a route previously loaded via a fetcher\n    if (!fetcherMatches) {\n      revalidatingFetchers.push({\n        key,\n        routeId: f.routeId,\n        path: f.path,\n        matches: null,\n        match: null,\n        controller: null\n      });\n      return;\n    }\n    // Revalidating fetchers are decoupled from the route matches since they\n    // load from a static href.  They revalidate based on explicit revalidation\n    // (submission, useRevalidator, or X-Remix-Revalidate)\n    let fetcher = state.fetchers.get(key);\n    let fetcherMatch = getTargetMatch(fetcherMatches, f.path);\n    let shouldRevalidate = false;\n    if (fetchRedirectIds.has(key)) {\n      // Never trigger a revalidation of an actively redirecting fetcher\n      shouldRevalidate = false;\n    } else if (cancelledFetcherLoads.has(key)) {\n      // Always mark for revalidation if the fetcher was cancelled\n      cancelledFetcherLoads.delete(key);\n      shouldRevalidate = true;\n    } else if (fetcher && fetcher.state !== \"idle\" && fetcher.data === undefined) {\n      // If the fetcher hasn't ever completed loading yet, then this isn't a\n      // revalidation, it would just be a brand new load if an explicit\n      // revalidation is required\n      shouldRevalidate = isRevalidationRequired;\n    } else {\n      // Otherwise fall back on any user-defined shouldRevalidate, defaulting\n      // to explicit revalidations only\n      shouldRevalidate = shouldRevalidateLoader(fetcherMatch, _extends({\n        currentUrl,\n        currentParams: state.matches[state.matches.length - 1].params,\n        nextUrl,\n        nextParams: matches[matches.length - 1].params\n      }, submission, {\n        actionResult,\n        actionStatus,\n        defaultShouldRevalidate: shouldSkipRevalidation ? false : isRevalidationRequired\n      }));\n    }\n    if (shouldRevalidate) {\n      revalidatingFetchers.push({\n        key,\n        routeId: f.routeId,\n        path: f.path,\n        matches: fetcherMatches,\n        match: fetcherMatch,\n        controller: new AbortController()\n      });\n    }\n  });\n  return [navigationMatches, revalidatingFetchers];\n}\nfunction shouldLoadRouteOnHydration(route, loaderData, errors) {\n  // We dunno if we have a loader - gotta find out!\n  if (route.lazy) {\n    return true;\n  }\n  // No loader, nothing to initialize\n  if (!route.loader) {\n    return false;\n  }\n  let hasData = loaderData != null && loaderData[route.id] !== undefined;\n  let hasError = errors != null && errors[route.id] !== undefined;\n  // Don't run if we error'd during SSR\n  if (!hasData && hasError) {\n    return false;\n  }\n  // Explicitly opting-in to running on hydration\n  if (typeof route.loader === \"function\" && route.loader.hydrate === true) {\n    return true;\n  }\n  // Otherwise, run if we're not yet initialized with anything\n  return !hasData && !hasError;\n}\nfunction isNewLoader(currentLoaderData, currentMatch, match) {\n  let isNew =\n  // [a] -> [a, b]\n  !currentMatch ||\n  // [a, b] -> [a, c]\n  match.route.id !== currentMatch.route.id;\n  // Handle the case that we don't have data for a re-used route, potentially\n  // from a prior error or from a cancelled pending deferred\n  let isMissingData = currentLoaderData[match.route.id] === undefined;\n  // Always load if this is a net-new route or we don't yet have data\n  return isNew || isMissingData;\n}\nfunction isNewRouteInstance(currentMatch, match) {\n  let currentPath = currentMatch.route.path;\n  return (\n    // param change for this match, /users/123 -> /users/456\n    currentMatch.pathname !== match.pathname ||\n    // splat param changed, which is not present in match.path\n    // e.g. /files/images/avatar.jpg -> files/finances.xls\n    currentPath != null && currentPath.endsWith(\"*\") && currentMatch.params[\"*\"] !== match.params[\"*\"]\n  );\n}\nfunction shouldRevalidateLoader(loaderMatch, arg) {\n  if (loaderMatch.route.shouldRevalidate) {\n    let routeChoice = loaderMatch.route.shouldRevalidate(arg);\n    if (typeof routeChoice === \"boolean\") {\n      return routeChoice;\n    }\n  }\n  return arg.defaultShouldRevalidate;\n}\nfunction patchRoutesImpl(routeId, children, routesToUse, manifest, mapRouteProperties) {\n  var _childrenToPatch;\n  let childrenToPatch;\n  if (routeId) {\n    let route = manifest[routeId];\n    invariant(route, \"No route found to patch children into: routeId = \" + routeId);\n    if (!route.children) {\n      route.children = [];\n    }\n    childrenToPatch = route.children;\n  } else {\n    childrenToPatch = routesToUse;\n  }\n  // Don't patch in routes we already know about so that `patch` is idempotent\n  // to simplify user-land code. This is useful because we re-call the\n  // `patchRoutesOnNavigation` function for matched routes with params.\n  let uniqueChildren = children.filter(newRoute => !childrenToPatch.some(existingRoute => isSameRoute(newRoute, existingRoute)));\n  let newRoutes = convertRoutesToDataRoutes(uniqueChildren, mapRouteProperties, [routeId || \"_\", \"patch\", String(((_childrenToPatch = childrenToPatch) == null ? void 0 : _childrenToPatch.length) || \"0\")], manifest);\n  childrenToPatch.push(...newRoutes);\n}\nfunction isSameRoute(newRoute, existingRoute) {\n  // Most optimal check is by id\n  if (\"id\" in newRoute && \"id\" in existingRoute && newRoute.id === existingRoute.id) {\n    return true;\n  }\n  // Second is by pathing differences\n  if (!(newRoute.index === existingRoute.index && newRoute.path === existingRoute.path && newRoute.caseSensitive === existingRoute.caseSensitive)) {\n    return false;\n  }\n  // Pathless layout routes are trickier since we need to check children.\n  // If they have no children then they're the same as far as we can tell\n  if ((!newRoute.children || newRoute.children.length === 0) && (!existingRoute.children || existingRoute.children.length === 0)) {\n    return true;\n  }\n  // Otherwise, we look to see if every child in the new route is already\n  // represented in the existing route's children\n  return newRoute.children.every((aChild, i) => {\n    var _existingRoute$childr;\n    return (_existingRoute$childr = existingRoute.children) == null ? void 0 : _existingRoute$childr.some(bChild => isSameRoute(aChild, bChild));\n  });\n}\n/**\n * Execute route.lazy() methods to lazily load route modules (loader, action,\n * shouldRevalidate) and update the routeManifest in place which shares objects\n * with dataRoutes so those get updated as well.\n */\nasync function loadLazyRouteModule(route, mapRouteProperties, manifest) {\n  if (!route.lazy) {\n    return;\n  }\n  let lazyRoute = await route.lazy();\n  // If the lazy route function was executed and removed by another parallel\n  // call then we can return - first lazy() to finish wins because the return\n  // value of lazy is expected to be static\n  if (!route.lazy) {\n    return;\n  }\n  let routeToUpdate = manifest[route.id];\n  invariant(routeToUpdate, \"No route found in manifest\");\n  // Update the route in place.  This should be safe because there's no way\n  // we could yet be sitting on this route as we can't get there without\n  // resolving lazy() first.\n  //\n  // This is different than the HMR \"update\" use-case where we may actively be\n  // on the route being updated.  The main concern boils down to \"does this\n  // mutation affect any ongoing navigations or any current state.matches\n  // values?\".  If not, it should be safe to update in place.\n  let routeUpdates = {};\n  for (let lazyRouteProperty in lazyRoute) {\n    let staticRouteValue = routeToUpdate[lazyRouteProperty];\n    let isPropertyStaticallyDefined = staticRouteValue !== undefined &&\n    // This property isn't static since it should always be updated based\n    // on the route updates\n    lazyRouteProperty !== \"hasErrorBoundary\";\n    warning(!isPropertyStaticallyDefined, \"Route \\\"\" + routeToUpdate.id + \"\\\" has a static property \\\"\" + lazyRouteProperty + \"\\\" \" + \"defined but its lazy function is also returning a value for this property. \" + (\"The lazy route property \\\"\" + lazyRouteProperty + \"\\\" will be ignored.\"));\n    if (!isPropertyStaticallyDefined && !immutableRouteKeys.has(lazyRouteProperty)) {\n      routeUpdates[lazyRouteProperty] = lazyRoute[lazyRouteProperty];\n    }\n  }\n  // Mutate the route with the provided updates.  Do this first so we pass\n  // the updated version to mapRouteProperties\n  Object.assign(routeToUpdate, routeUpdates);\n  // Mutate the `hasErrorBoundary` property on the route based on the route\n  // updates and remove the `lazy` function so we don't resolve the lazy\n  // route again.\n  Object.assign(routeToUpdate, _extends({}, mapRouteProperties(routeToUpdate), {\n    lazy: undefined\n  }));\n}\n// Default implementation of `dataStrategy` which fetches all loaders in parallel\nasync function defaultDataStrategy(_ref4) {\n  let {\n    matches\n  } = _ref4;\n  let matchesToLoad = matches.filter(m => m.shouldLoad);\n  let results = await Promise.all(matchesToLoad.map(m => m.resolve()));\n  return results.reduce((acc, result, i) => Object.assign(acc, {\n    [matchesToLoad[i].route.id]: result\n  }), {});\n}\nasync function callDataStrategyImpl(dataStrategyImpl, type, state, request, matchesToLoad, matches, fetcherKey, manifest, mapRouteProperties, requestContext) {\n  let loadRouteDefinitionsPromises = matches.map(m => m.route.lazy ? loadLazyRouteModule(m.route, mapRouteProperties, manifest) : undefined);\n  let dsMatches = matches.map((match, i) => {\n    let loadRoutePromise = loadRouteDefinitionsPromises[i];\n    let shouldLoad = matchesToLoad.some(m => m.route.id === match.route.id);\n    // `resolve` encapsulates route.lazy(), executing the loader/action,\n    // and mapping return values/thrown errors to a `DataStrategyResult`.  Users\n    // can pass a callback to take fine-grained control over the execution\n    // of the loader/action\n    let resolve = async handlerOverride => {\n      if (handlerOverride && request.method === \"GET\" && (match.route.lazy || match.route.loader)) {\n        shouldLoad = true;\n      }\n      return shouldLoad ? callLoaderOrAction(type, request, match, loadRoutePromise, handlerOverride, requestContext) : Promise.resolve({\n        type: ResultType.data,\n        result: undefined\n      });\n    };\n    return _extends({}, match, {\n      shouldLoad,\n      resolve\n    });\n  });\n  // Send all matches here to allow for a middleware-type implementation.\n  // handler will be a no-op for unneeded routes and we filter those results\n  // back out below.\n  let results = await dataStrategyImpl({\n    matches: dsMatches,\n    request,\n    params: matches[0].params,\n    fetcherKey,\n    context: requestContext\n  });\n  // Wait for all routes to load here but 'swallow the error since we want\n  // it to bubble up from the `await loadRoutePromise` in `callLoaderOrAction` -\n  // called from `match.resolve()`\n  try {\n    await Promise.all(loadRouteDefinitionsPromises);\n  } catch (e) {\n    // No-op\n  }\n  return results;\n}\n// Default logic for calling a loader/action is the user has no specified a dataStrategy\nasync function callLoaderOrAction(type, request, match, loadRoutePromise, handlerOverride, staticContext) {\n  let result;\n  let onReject;\n  let runHandler = handler => {\n    // Setup a promise we can race against so that abort signals short circuit\n    let reject;\n    // This will never resolve so safe to type it as Promise<DataStrategyResult> to\n    // satisfy the function return value\n    let abortPromise = new Promise((_, r) => reject = r);\n    onReject = () => reject();\n    request.signal.addEventListener(\"abort\", onReject);\n    let actualHandler = ctx => {\n      if (typeof handler !== \"function\") {\n        return Promise.reject(new Error(\"You cannot call the handler for a route which defines a boolean \" + (\"\\\"\" + type + \"\\\" [routeId: \" + match.route.id + \"]\")));\n      }\n      return handler({\n        request,\n        params: match.params,\n        context: staticContext\n      }, ...(ctx !== undefined ? [ctx] : []));\n    };\n    let handlerPromise = (async () => {\n      try {\n        let val = await (handlerOverride ? handlerOverride(ctx => actualHandler(ctx)) : actualHandler());\n        return {\n          type: \"data\",\n          result: val\n        };\n      } catch (e) {\n        return {\n          type: \"error\",\n          result: e\n        };\n      }\n    })();\n    return Promise.race([handlerPromise, abortPromise]);\n  };\n  try {\n    let handler = match.route[type];\n    // If we have a route.lazy promise, await that first\n    if (loadRoutePromise) {\n      if (handler) {\n        // Run statically defined handler in parallel with lazy()\n        let handlerError;\n        let [value] = await Promise.all([\n        // If the handler throws, don't let it immediately bubble out,\n        // since we need to let the lazy() execution finish so we know if this\n        // route has a boundary that can handle the error\n        runHandler(handler).catch(e => {\n          handlerError = e;\n        }), loadRoutePromise]);\n        if (handlerError !== undefined) {\n          throw handlerError;\n        }\n        result = value;\n      } else {\n        // Load lazy route module, then run any returned handler\n        await loadRoutePromise;\n        handler = match.route[type];\n        if (handler) {\n          // Handler still runs even if we got interrupted to maintain consistency\n          // with un-abortable behavior of handler execution on non-lazy or\n          // previously-lazy-loaded routes\n          result = await runHandler(handler);\n        } else if (type === \"action\") {\n          let url = new URL(request.url);\n          let pathname = url.pathname + url.search;\n          throw getInternalRouterError(405, {\n            method: request.method,\n            pathname,\n            routeId: match.route.id\n          });\n        } else {\n          // lazy() route has no loader to run.  Short circuit here so we don't\n          // hit the invariant below that errors on returning undefined.\n          return {\n            type: ResultType.data,\n            result: undefined\n          };\n        }\n      }\n    } else if (!handler) {\n      let url = new URL(request.url);\n      let pathname = url.pathname + url.search;\n      throw getInternalRouterError(404, {\n        pathname\n      });\n    } else {\n      result = await runHandler(handler);\n    }\n    invariant(result.result !== undefined, \"You defined \" + (type === \"action\" ? \"an action\" : \"a loader\") + \" for route \" + (\"\\\"\" + match.route.id + \"\\\" but didn't return anything from your `\" + type + \"` \") + \"function. Please return a value or `null`.\");\n  } catch (e) {\n    // We should already be catching and converting normal handler executions to\n    // DataStrategyResults and returning them, so anything that throws here is an\n    // unexpected error we still need to wrap\n    return {\n      type: ResultType.error,\n      result: e\n    };\n  } finally {\n    if (onReject) {\n      request.signal.removeEventListener(\"abort\", onReject);\n    }\n  }\n  return result;\n}\nasync function convertDataStrategyResultToDataResult(dataStrategyResult) {\n  let {\n    result,\n    type\n  } = dataStrategyResult;\n  if (isResponse(result)) {\n    let data;\n    try {\n      let contentType = result.headers.get(\"Content-Type\");\n      // Check between word boundaries instead of startsWith() due to the last\n      // paragraph of https://httpwg.org/specs/rfc9110.html#field.content-type\n      if (contentType && /\\bapplication\\/json\\b/.test(contentType)) {\n        if (result.body == null) {\n          data = null;\n        } else {\n          data = await result.json();\n        }\n      } else {\n        data = await result.text();\n      }\n    } catch (e) {\n      return {\n        type: ResultType.error,\n        error: e\n      };\n    }\n    if (type === ResultType.error) {\n      return {\n        type: ResultType.error,\n        error: new ErrorResponseImpl(result.status, result.statusText, data),\n        statusCode: result.status,\n        headers: result.headers\n      };\n    }\n    return {\n      type: ResultType.data,\n      data,\n      statusCode: result.status,\n      headers: result.headers\n    };\n  }\n  if (type === ResultType.error) {\n    if (isDataWithResponseInit(result)) {\n      var _result$init3, _result$init4;\n      if (result.data instanceof Error) {\n        var _result$init, _result$init2;\n        return {\n          type: ResultType.error,\n          error: result.data,\n          statusCode: (_result$init = result.init) == null ? void 0 : _result$init.status,\n          headers: (_result$init2 = result.init) != null && _result$init2.headers ? new Headers(result.init.headers) : undefined\n        };\n      }\n      // Convert thrown data() to ErrorResponse instances\n      return {\n        type: ResultType.error,\n        error: new ErrorResponseImpl(((_result$init3 = result.init) == null ? void 0 : _result$init3.status) || 500, undefined, result.data),\n        statusCode: isRouteErrorResponse(result) ? result.status : undefined,\n        headers: (_result$init4 = result.init) != null && _result$init4.headers ? new Headers(result.init.headers) : undefined\n      };\n    }\n    return {\n      type: ResultType.error,\n      error: result,\n      statusCode: isRouteErrorResponse(result) ? result.status : undefined\n    };\n  }\n  if (isDeferredData(result)) {\n    var _result$init5, _result$init6;\n    return {\n      type: ResultType.deferred,\n      deferredData: result,\n      statusCode: (_result$init5 = result.init) == null ? void 0 : _result$init5.status,\n      headers: ((_result$init6 = result.init) == null ? void 0 : _result$init6.headers) && new Headers(result.init.headers)\n    };\n  }\n  if (isDataWithResponseInit(result)) {\n    var _result$init7, _result$init8;\n    return {\n      type: ResultType.data,\n      data: result.data,\n      statusCode: (_result$init7 = result.init) == null ? void 0 : _result$init7.status,\n      headers: (_result$init8 = result.init) != null && _result$init8.headers ? new Headers(result.init.headers) : undefined\n    };\n  }\n  return {\n    type: ResultType.data,\n    data: result\n  };\n}\n// Support relative routing in internal redirects\nfunction normalizeRelativeRoutingRedirectResponse(response, request, routeId, matches, basename, v7_relativeSplatPath) {\n  let location = response.headers.get(\"Location\");\n  invariant(location, \"Redirects returned/thrown from loaders/actions must have a Location header\");\n  if (!ABSOLUTE_URL_REGEX.test(location)) {\n    let trimmedMatches = matches.slice(0, matches.findIndex(m => m.route.id === routeId) + 1);\n    location = normalizeTo(new URL(request.url), trimmedMatches, basename, true, location, v7_relativeSplatPath);\n    response.headers.set(\"Location\", location);\n  }\n  return response;\n}\nfunction normalizeRedirectLocation(location, currentUrl, basename) {\n  if (ABSOLUTE_URL_REGEX.test(location)) {\n    // Strip off the protocol+origin for same-origin + same-basename absolute redirects\n    let normalizedLocation = location;\n    let url = normalizedLocation.startsWith(\"//\") ? new URL(currentUrl.protocol + normalizedLocation) : new URL(normalizedLocation);\n    let isSameBasename = stripBasename(url.pathname, basename) != null;\n    if (url.origin === currentUrl.origin && isSameBasename) {\n      return url.pathname + url.search + url.hash;\n    }\n  }\n  return location;\n}\n// Utility method for creating the Request instances for loaders/actions during\n// client-side navigations and fetches.  During SSR we will always have a\n// Request instance from the static handler (query/queryRoute)\nfunction createClientSideRequest(history, location, signal, submission) {\n  let url = history.createURL(stripHashFromPath(location)).toString();\n  let init = {\n    signal\n  };\n  if (submission && isMutationMethod(submission.formMethod)) {\n    let {\n      formMethod,\n      formEncType\n    } = submission;\n    // Didn't think we needed this but it turns out unlike other methods, patch\n    // won't be properly normalized to uppercase and results in a 405 error.\n    // See: https://fetch.spec.whatwg.org/#concept-method\n    init.method = formMethod.toUpperCase();\n    if (formEncType === \"application/json\") {\n      init.headers = new Headers({\n        \"Content-Type\": formEncType\n      });\n      init.body = JSON.stringify(submission.json);\n    } else if (formEncType === \"text/plain\") {\n      // Content-Type is inferred (https://fetch.spec.whatwg.org/#dom-request)\n      init.body = submission.text;\n    } else if (formEncType === \"application/x-www-form-urlencoded\" && submission.formData) {\n      // Content-Type is inferred (https://fetch.spec.whatwg.org/#dom-request)\n      init.body = convertFormDataToSearchParams(submission.formData);\n    } else {\n      // Content-Type is inferred (https://fetch.spec.whatwg.org/#dom-request)\n      init.body = submission.formData;\n    }\n  }\n  return new Request(url, init);\n}\nfunction convertFormDataToSearchParams(formData) {\n  let searchParams = new URLSearchParams();\n  for (let [key, value] of formData.entries()) {\n    // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#converting-an-entry-list-to-a-list-of-name-value-pairs\n    searchParams.append(key, typeof value === \"string\" ? value : value.name);\n  }\n  return searchParams;\n}\nfunction convertSearchParamsToFormData(searchParams) {\n  let formData = new FormData();\n  for (let [key, value] of searchParams.entries()) {\n    formData.append(key, value);\n  }\n  return formData;\n}\nfunction processRouteLoaderData(matches, results, pendingActionResult, activeDeferreds, skipLoaderErrorBubbling) {\n  // Fill in loaderData/errors from our loaders\n  let loaderData = {};\n  let errors = null;\n  let statusCode;\n  let foundError = false;\n  let loaderHeaders = {};\n  let pendingError = pendingActionResult && isErrorResult(pendingActionResult[1]) ? pendingActionResult[1].error : undefined;\n  // Process loader results into state.loaderData/state.errors\n  matches.forEach(match => {\n    if (!(match.route.id in results)) {\n      return;\n    }\n    let id = match.route.id;\n    let result = results[id];\n    invariant(!isRedirectResult(result), \"Cannot handle redirect results in processLoaderData\");\n    if (isErrorResult(result)) {\n      let error = result.error;\n      // If we have a pending action error, we report it at the highest-route\n      // that throws a loader error, and then clear it out to indicate that\n      // it was consumed\n      if (pendingError !== undefined) {\n        error = pendingError;\n        pendingError = undefined;\n      }\n      errors = errors || {};\n      if (skipLoaderErrorBubbling) {\n        errors[id] = error;\n      } else {\n        // Look upwards from the matched route for the closest ancestor error\n        // boundary, defaulting to the root match.  Prefer higher error values\n        // if lower errors bubble to the same boundary\n        let boundaryMatch = findNearestBoundary(matches, id);\n        if (errors[boundaryMatch.route.id] == null) {\n          errors[boundaryMatch.route.id] = error;\n        }\n      }\n      // Clear our any prior loaderData for the throwing route\n      loaderData[id] = undefined;\n      // Once we find our first (highest) error, we set the status code and\n      // prevent deeper status codes from overriding\n      if (!foundError) {\n        foundError = true;\n        statusCode = isRouteErrorResponse(result.error) ? result.error.status : 500;\n      }\n      if (result.headers) {\n        loaderHeaders[id] = result.headers;\n      }\n    } else {\n      if (isDeferredResult(result)) {\n        activeDeferreds.set(id, result.deferredData);\n        loaderData[id] = result.deferredData.data;\n        // Error status codes always override success status codes, but if all\n        // loaders are successful we take the deepest status code.\n        if (result.statusCode != null && result.statusCode !== 200 && !foundError) {\n          statusCode = result.statusCode;\n        }\n        if (result.headers) {\n          loaderHeaders[id] = result.headers;\n        }\n      } else {\n        loaderData[id] = result.data;\n        // Error status codes always override success status codes, but if all\n        // loaders are successful we take the deepest status code.\n        if (result.statusCode && result.statusCode !== 200 && !foundError) {\n          statusCode = result.statusCode;\n        }\n        if (result.headers) {\n          loaderHeaders[id] = result.headers;\n        }\n      }\n    }\n  });\n  // If we didn't consume the pending action error (i.e., all loaders\n  // resolved), then consume it here.  Also clear out any loaderData for the\n  // throwing route\n  if (pendingError !== undefined && pendingActionResult) {\n    errors = {\n      [pendingActionResult[0]]: pendingError\n    };\n    loaderData[pendingActionResult[0]] = undefined;\n  }\n  return {\n    loaderData,\n    errors,\n    statusCode: statusCode || 200,\n    loaderHeaders\n  };\n}\nfunction processLoaderData(state, matches, results, pendingActionResult, revalidatingFetchers, fetcherResults, activeDeferreds) {\n  let {\n    loaderData,\n    errors\n  } = processRouteLoaderData(matches, results, pendingActionResult, activeDeferreds, false // This method is only called client side so we always want to bubble\n  );\n  // Process results from our revalidating fetchers\n  revalidatingFetchers.forEach(rf => {\n    let {\n      key,\n      match,\n      controller\n    } = rf;\n    let result = fetcherResults[key];\n    invariant(result, \"Did not find corresponding fetcher result\");\n    // Process fetcher non-redirect errors\n    if (controller && controller.signal.aborted) {\n      // Nothing to do for aborted fetchers\n      return;\n    } else if (isErrorResult(result)) {\n      let boundaryMatch = findNearestBoundary(state.matches, match == null ? void 0 : match.route.id);\n      if (!(errors && errors[boundaryMatch.route.id])) {\n        errors = _extends({}, errors, {\n          [boundaryMatch.route.id]: result.error\n        });\n      }\n      state.fetchers.delete(key);\n    } else if (isRedirectResult(result)) {\n      // Should never get here, redirects should get processed above, but we\n      // keep this to type narrow to a success result in the else\n      invariant(false, \"Unhandled fetcher revalidation redirect\");\n    } else if (isDeferredResult(result)) {\n      // Should never get here, deferred data should be awaited for fetchers\n      // in resolveDeferredResults\n      invariant(false, \"Unhandled fetcher deferred data\");\n    } else {\n      let doneFetcher = getDoneFetcher(result.data);\n      state.fetchers.set(key, doneFetcher);\n    }\n  });\n  return {\n    loaderData,\n    errors\n  };\n}\nfunction mergeLoaderData(loaderData, newLoaderData, matches, errors) {\n  let mergedLoaderData = _extends({}, newLoaderData);\n  for (let match of matches) {\n    let id = match.route.id;\n    if (newLoaderData.hasOwnProperty(id)) {\n      if (newLoaderData[id] !== undefined) {\n        mergedLoaderData[id] = newLoaderData[id];\n      }\n    } else if (loaderData[id] !== undefined && match.route.loader) {\n      // Preserve existing keys not included in newLoaderData and where a loader\n      // wasn't removed by HMR\n      mergedLoaderData[id] = loaderData[id];\n    }\n    if (errors && errors.hasOwnProperty(id)) {\n      // Don't keep any loader data below the boundary\n      break;\n    }\n  }\n  return mergedLoaderData;\n}\nfunction getActionDataForCommit(pendingActionResult) {\n  if (!pendingActionResult) {\n    return {};\n  }\n  return isErrorResult(pendingActionResult[1]) ? {\n    // Clear out prior actionData on errors\n    actionData: {}\n  } : {\n    actionData: {\n      [pendingActionResult[0]]: pendingActionResult[1].data\n    }\n  };\n}\n// Find the nearest error boundary, looking upwards from the leaf route (or the\n// route specified by routeId) for the closest ancestor error boundary,\n// defaulting to the root match\nfunction findNearestBoundary(matches, routeId) {\n  let eligibleMatches = routeId ? matches.slice(0, matches.findIndex(m => m.route.id === routeId) + 1) : [...matches];\n  return eligibleMatches.reverse().find(m => m.route.hasErrorBoundary === true) || matches[0];\n}\nfunction getShortCircuitMatches(routes) {\n  // Prefer a root layout route if present, otherwise shim in a route object\n  let route = routes.length === 1 ? routes[0] : routes.find(r => r.index || !r.path || r.path === \"/\") || {\n    id: \"__shim-error-route__\"\n  };\n  return {\n    matches: [{\n      params: {},\n      pathname: \"\",\n      pathnameBase: \"\",\n      route\n    }],\n    route\n  };\n}\nfunction getInternalRouterError(status, _temp5) {\n  let {\n    pathname,\n    routeId,\n    method,\n    type,\n    message\n  } = _temp5 === void 0 ? {} : _temp5;\n  let statusText = \"Unknown Server Error\";\n  let errorMessage = \"Unknown @remix-run/router error\";\n  if (status === 400) {\n    statusText = \"Bad Request\";\n    if (method && pathname && routeId) {\n      errorMessage = \"You made a \" + method + \" request to \\\"\" + pathname + \"\\\" but \" + (\"did not provide a `loader` for route \\\"\" + routeId + \"\\\", \") + \"so there is no way to handle the request.\";\n    } else if (type === \"defer-action\") {\n      errorMessage = \"defer() is not supported in actions\";\n    } else if (type === \"invalid-body\") {\n      errorMessage = \"Unable to encode submission body\";\n    }\n  } else if (status === 403) {\n    statusText = \"Forbidden\";\n    errorMessage = \"Route \\\"\" + routeId + \"\\\" does not match URL \\\"\" + pathname + \"\\\"\";\n  } else if (status === 404) {\n    statusText = \"Not Found\";\n    errorMessage = \"No route matches URL \\\"\" + pathname + \"\\\"\";\n  } else if (status === 405) {\n    statusText = \"Method Not Allowed\";\n    if (method && pathname && routeId) {\n      errorMessage = \"You made a \" + method.toUpperCase() + \" request to \\\"\" + pathname + \"\\\" but \" + (\"did not provide an `action` for route \\\"\" + routeId + \"\\\", \") + \"so there is no way to handle the request.\";\n    } else if (method) {\n      errorMessage = \"Invalid request method \\\"\" + method.toUpperCase() + \"\\\"\";\n    }\n  }\n  return new ErrorResponseImpl(status || 500, statusText, new Error(errorMessage), true);\n}\n// Find any returned redirect errors, starting from the lowest match\nfunction findRedirect(results) {\n  let entries = Object.entries(results);\n  for (let i = entries.length - 1; i >= 0; i--) {\n    let [key, result] = entries[i];\n    if (isRedirectResult(result)) {\n      return {\n        key,\n        result\n      };\n    }\n  }\n}\nfunction stripHashFromPath(path) {\n  let parsedPath = typeof path === \"string\" ? parsePath(path) : path;\n  return createPath(_extends({}, parsedPath, {\n    hash: \"\"\n  }));\n}\nfunction isHashChangeOnly(a, b) {\n  if (a.pathname !== b.pathname || a.search !== b.search) {\n    return false;\n  }\n  if (a.hash === \"\") {\n    // /page -> /page#hash\n    return b.hash !== \"\";\n  } else if (a.hash === b.hash) {\n    // /page#hash -> /page#hash\n    return true;\n  } else if (b.hash !== \"\") {\n    // /page#hash -> /page#other\n    return true;\n  }\n  // If the hash is removed the browser will re-perform a request to the server\n  // /page#hash -> /page\n  return false;\n}\nfunction isDataStrategyResult(result) {\n  return result != null && typeof result === \"object\" && \"type\" in result && \"result\" in result && (result.type === ResultType.data || result.type === ResultType.error);\n}\nfunction isRedirectDataStrategyResultResult(result) {\n  return isResponse(result.result) && redirectStatusCodes.has(result.result.status);\n}\nfunction isDeferredResult(result) {\n  return result.type === ResultType.deferred;\n}\nfunction isErrorResult(result) {\n  return result.type === ResultType.error;\n}\nfunction isRedirectResult(result) {\n  return (result && result.type) === ResultType.redirect;\n}\nfunction isDataWithResponseInit(value) {\n  return typeof value === \"object\" && value != null && \"type\" in value && \"data\" in value && \"init\" in value && value.type === \"DataWithResponseInit\";\n}\nfunction isDeferredData(value) {\n  let deferred = value;\n  return deferred && typeof deferred === \"object\" && typeof deferred.data === \"object\" && typeof deferred.subscribe === \"function\" && typeof deferred.cancel === \"function\" && typeof deferred.resolveData === \"function\";\n}\nfunction isResponse(value) {\n  return value != null && typeof value.status === \"number\" && typeof value.statusText === \"string\" && typeof value.headers === \"object\" && typeof value.body !== \"undefined\";\n}\nfunction isRedirectResponse(result) {\n  if (!isResponse(result)) {\n    return false;\n  }\n  let status = result.status;\n  let location = result.headers.get(\"Location\");\n  return status >= 300 && status <= 399 && location != null;\n}\nfunction isValidMethod(method) {\n  return validRequestMethods.has(method.toLowerCase());\n}\nfunction isMutationMethod(method) {\n  return validMutationMethods.has(method.toLowerCase());\n}\nasync function resolveNavigationDeferredResults(matches, results, signal, currentMatches, currentLoaderData) {\n  let entries = Object.entries(results);\n  for (let index = 0; index < entries.length; index++) {\n    let [routeId, result] = entries[index];\n    let match = matches.find(m => (m == null ? void 0 : m.route.id) === routeId);\n    // If we don't have a match, then we can have a deferred result to do\n    // anything with.  This is for revalidating fetchers where the route was\n    // removed during HMR\n    if (!match) {\n      continue;\n    }\n    let currentMatch = currentMatches.find(m => m.route.id === match.route.id);\n    let isRevalidatingLoader = currentMatch != null && !isNewRouteInstance(currentMatch, match) && (currentLoaderData && currentLoaderData[match.route.id]) !== undefined;\n    if (isDeferredResult(result) && isRevalidatingLoader) {\n      // Note: we do not have to touch activeDeferreds here since we race them\n      // against the signal in resolveDeferredData and they'll get aborted\n      // there if needed\n      await resolveDeferredData(result, signal, false).then(result => {\n        if (result) {\n          results[routeId] = result;\n        }\n      });\n    }\n  }\n}\nasync function resolveFetcherDeferredResults(matches, results, revalidatingFetchers) {\n  for (let index = 0; index < revalidatingFetchers.length; index++) {\n    let {\n      key,\n      routeId,\n      controller\n    } = revalidatingFetchers[index];\n    let result = results[key];\n    let match = matches.find(m => (m == null ? void 0 : m.route.id) === routeId);\n    // If we don't have a match, then we can have a deferred result to do\n    // anything with.  This is for revalidating fetchers where the route was\n    // removed during HMR\n    if (!match) {\n      continue;\n    }\n    if (isDeferredResult(result)) {\n      // Note: we do not have to touch activeDeferreds here since we race them\n      // against the signal in resolveDeferredData and they'll get aborted\n      // there if needed\n      invariant(controller, \"Expected an AbortController for revalidating fetcher deferred result\");\n      await resolveDeferredData(result, controller.signal, true).then(result => {\n        if (result) {\n          results[key] = result;\n        }\n      });\n    }\n  }\n}\nasync function resolveDeferredData(result, signal, unwrap) {\n  if (unwrap === void 0) {\n    unwrap = false;\n  }\n  let aborted = await result.deferredData.resolveData(signal);\n  if (aborted) {\n    return;\n  }\n  if (unwrap) {\n    try {\n      return {\n        type: ResultType.data,\n        data: result.deferredData.unwrappedData\n      };\n    } catch (e) {\n      // Handle any TrackedPromise._error values encountered while unwrapping\n      return {\n        type: ResultType.error,\n        error: e\n      };\n    }\n  }\n  return {\n    type: ResultType.data,\n    data: result.deferredData.data\n  };\n}\nfunction hasNakedIndexQuery(search) {\n  return new URLSearchParams(search).getAll(\"index\").some(v => v === \"\");\n}\nfunction getTargetMatch(matches, location) {\n  let search = typeof location === \"string\" ? parsePath(location).search : location.search;\n  if (matches[matches.length - 1].route.index && hasNakedIndexQuery(search || \"\")) {\n    // Return the leaf index route when index is present\n    return matches[matches.length - 1];\n  }\n  // Otherwise grab the deepest \"path contributing\" match (ignoring index and\n  // pathless layout routes)\n  let pathMatches = getPathContributingMatches(matches);\n  return pathMatches[pathMatches.length - 1];\n}\nfunction getSubmissionFromNavigation(navigation) {\n  let {\n    formMethod,\n    formAction,\n    formEncType,\n    text,\n    formData,\n    json\n  } = navigation;\n  if (!formMethod || !formAction || !formEncType) {\n    return;\n  }\n  if (text != null) {\n    return {\n      formMethod,\n      formAction,\n      formEncType,\n      formData: undefined,\n      json: undefined,\n      text\n    };\n  } else if (formData != null) {\n    return {\n      formMethod,\n      formAction,\n      formEncType,\n      formData,\n      json: undefined,\n      text: undefined\n    };\n  } else if (json !== undefined) {\n    return {\n      formMethod,\n      formAction,\n      formEncType,\n      formData: undefined,\n      json,\n      text: undefined\n    };\n  }\n}\nfunction getLoadingNavigation(location, submission) {\n  if (submission) {\n    let navigation = {\n      state: \"loading\",\n      location,\n      formMethod: submission.formMethod,\n      formAction: submission.formAction,\n      formEncType: submission.formEncType,\n      formData: submission.formData,\n      json: submission.json,\n      text: submission.text\n    };\n    return navigation;\n  } else {\n    let navigation = {\n      state: \"loading\",\n      location,\n      formMethod: undefined,\n      formAction: undefined,\n      formEncType: undefined,\n      formData: undefined,\n      json: undefined,\n      text: undefined\n    };\n    return navigation;\n  }\n}\nfunction getSubmittingNavigation(location, submission) {\n  let navigation = {\n    state: \"submitting\",\n    location,\n    formMethod: submission.formMethod,\n    formAction: submission.formAction,\n    formEncType: submission.formEncType,\n    formData: submission.formData,\n    json: submission.json,\n    text: submission.text\n  };\n  return navigation;\n}\nfunction getLoadingFetcher(submission, data) {\n  if (submission) {\n    let fetcher = {\n      state: \"loading\",\n      formMethod: submission.formMethod,\n      formAction: submission.formAction,\n      formEncType: submission.formEncType,\n      formData: submission.formData,\n      json: submission.json,\n      text: submission.text,\n      data\n    };\n    return fetcher;\n  } else {\n    let fetcher = {\n      state: \"loading\",\n      formMethod: undefined,\n      formAction: undefined,\n      formEncType: undefined,\n      formData: undefined,\n      json: undefined,\n      text: undefined,\n      data\n    };\n    return fetcher;\n  }\n}\nfunction getSubmittingFetcher(submission, existingFetcher) {\n  let fetcher = {\n    state: \"submitting\",\n    formMethod: submission.formMethod,\n    formAction: submission.formAction,\n    formEncType: submission.formEncType,\n    formData: submission.formData,\n    json: submission.json,\n    text: submission.text,\n    data: existingFetcher ? existingFetcher.data : undefined\n  };\n  return fetcher;\n}\nfunction getDoneFetcher(data) {\n  let fetcher = {\n    state: \"idle\",\n    formMethod: undefined,\n    formAction: undefined,\n    formEncType: undefined,\n    formData: undefined,\n    json: undefined,\n    text: undefined,\n    data\n  };\n  return fetcher;\n}\nfunction restoreAppliedTransitions(_window, transitions) {\n  try {\n    let sessionPositions = _window.sessionStorage.getItem(TRANSITIONS_STORAGE_KEY);\n    if (sessionPositions) {\n      let json = JSON.parse(sessionPositions);\n      for (let [k, v] of Object.entries(json || {})) {\n        if (v && Array.isArray(v)) {\n          transitions.set(k, new Set(v || []));\n        }\n      }\n    }\n  } catch (e) {\n    // no-op, use default empty object\n  }\n}\nfunction persistAppliedTransitions(_window, transitions) {\n  if (transitions.size > 0) {\n    let json = {};\n    for (let [k, v] of transitions) {\n      json[k] = [...v];\n    }\n    try {\n      _window.sessionStorage.setItem(TRANSITIONS_STORAGE_KEY, JSON.stringify(json));\n    } catch (error) {\n      warning(false, \"Failed to save applied view transitions in sessionStorage (\" + error + \").\");\n    }\n  }\n}\n//#endregion\n\nexport { AbortedDeferredError, Action, IDLE_BLOCKER, IDLE_FETCHER, IDLE_NAVIGATION, UNSAFE_DEFERRED_SYMBOL, DeferredData as UNSAFE_DeferredData, ErrorResponseImpl as UNSAFE_ErrorResponseImpl, convertRouteMatchToUiMatch as UNSAFE_convertRouteMatchToUiMatch, convertRoutesToDataRoutes as UNSAFE_convertRoutesToDataRoutes, decodePath as UNSAFE_decodePath, getResolveToMatches as UNSAFE_getResolveToMatches, invariant as UNSAFE_invariant, warning as UNSAFE_warning, createBrowserHistory, createHashHistory, createMemoryHistory, createPath, createRouter, createStaticHandler, data, defer, generatePath, getStaticContextFromError, getToPathname, isDataWithResponseInit, isDeferredData, isRouteErrorResponse, joinPaths, json, matchPath, matchRoutes, normalizePathname, parsePath, redirect, redirectDocument, replace, resolvePath, resolveTo, stripBasename };\n//# sourceMappingURL=router.js.map\n","/**\n * React Router v6.30.1\n *\n * Copyright (c) Remix Software Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nimport * as React from 'react';\nimport { UNSAFE_invariant, joinPaths, matchPath, UNSAFE_decodePath, UNSAFE_getResolveToMatches, UNSAFE_warning, resolveTo, parsePath, matchRoutes, Action, UNSAFE_convertRouteMatchToUiMatch, stripBasename, IDLE_BLOCKER, isRouteErrorResponse, createMemoryHistory, AbortedDeferredError, createRouter } from '@remix-run/router';\nexport { AbortedDeferredError, Action as NavigationType, createPath, defer, generatePath, isRouteErrorResponse, json, matchPath, matchRoutes, parsePath, redirect, redirectDocument, replace, resolvePath } from '@remix-run/router';\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\n// Create react-specific types from the agnostic types in @remix-run/router to\n// export from react-router\nconst DataRouterContext = /*#__PURE__*/React.createContext(null);\nif (process.env.NODE_ENV !== \"production\") {\n  DataRouterContext.displayName = \"DataRouter\";\n}\nconst DataRouterStateContext = /*#__PURE__*/React.createContext(null);\nif (process.env.NODE_ENV !== \"production\") {\n  DataRouterStateContext.displayName = \"DataRouterState\";\n}\nconst AwaitContext = /*#__PURE__*/React.createContext(null);\nif (process.env.NODE_ENV !== \"production\") {\n  AwaitContext.displayName = \"Await\";\n}\n\n/**\n * A Navigator is a \"location changer\"; it's how you get to different locations.\n *\n * Every history instance conforms to the Navigator interface, but the\n * distinction is useful primarily when it comes to the low-level `<Router>` API\n * where both the location and a navigator must be provided separately in order\n * to avoid \"tearing\" that may occur in a suspense-enabled app if the action\n * and/or location were to be read directly from the history instance.\n */\n\nconst NavigationContext = /*#__PURE__*/React.createContext(null);\nif (process.env.NODE_ENV !== \"production\") {\n  NavigationContext.displayName = \"Navigation\";\n}\nconst LocationContext = /*#__PURE__*/React.createContext(null);\nif (process.env.NODE_ENV !== \"production\") {\n  LocationContext.displayName = \"Location\";\n}\nconst RouteContext = /*#__PURE__*/React.createContext({\n  outlet: null,\n  matches: [],\n  isDataRoute: false\n});\nif (process.env.NODE_ENV !== \"production\") {\n  RouteContext.displayName = \"Route\";\n}\nconst RouteErrorContext = /*#__PURE__*/React.createContext(null);\nif (process.env.NODE_ENV !== \"production\") {\n  RouteErrorContext.displayName = \"RouteError\";\n}\n\n/**\n * Returns the full href for the given \"to\" value. This is useful for building\n * custom links that are also accessible and preserve right-click behavior.\n *\n * @see https://reactrouter.com/v6/hooks/use-href\n */\nfunction useHref(to, _temp) {\n  let {\n    relative\n  } = _temp === void 0 ? {} : _temp;\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, // TODO: This error is probably because they somehow have 2 versions of the\n  // router loaded. We can help them understand how to avoid that.\n  \"useHref() may be used only in the context of a <Router> component.\") : UNSAFE_invariant(false) : void 0;\n  let {\n    basename,\n    navigator\n  } = React.useContext(NavigationContext);\n  let {\n    hash,\n    pathname,\n    search\n  } = useResolvedPath(to, {\n    relative\n  });\n  let joinedPathname = pathname;\n\n  // If we're operating within a basename, prepend it to the pathname prior\n  // to creating the href.  If this is a root navigation, then just use the raw\n  // basename which allows the basename to have full control over the presence\n  // of a trailing slash on root links\n  if (basename !== \"/\") {\n    joinedPathname = pathname === \"/\" ? basename : joinPaths([basename, pathname]);\n  }\n  return navigator.createHref({\n    pathname: joinedPathname,\n    search,\n    hash\n  });\n}\n\n/**\n * Returns true if this component is a descendant of a `<Router>`.\n *\n * @see https://reactrouter.com/v6/hooks/use-in-router-context\n */\nfunction useInRouterContext() {\n  return React.useContext(LocationContext) != null;\n}\n\n/**\n * Returns the current location object, which represents the current URL in web\n * browsers.\n *\n * Note: If you're using this it may mean you're doing some of your own\n * \"routing\" in your app, and we'd like to know what your use case is. We may\n * be able to provide something higher-level to better suit your needs.\n *\n * @see https://reactrouter.com/v6/hooks/use-location\n */\nfunction useLocation() {\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, // TODO: This error is probably because they somehow have 2 versions of the\n  // router loaded. We can help them understand how to avoid that.\n  \"useLocation() may be used only in the context of a <Router> component.\") : UNSAFE_invariant(false) : void 0;\n  return React.useContext(LocationContext).location;\n}\n\n/**\n * Returns the current navigation action which describes how the router came to\n * the current location, either by a pop, push, or replace on the history stack.\n *\n * @see https://reactrouter.com/v6/hooks/use-navigation-type\n */\nfunction useNavigationType() {\n  return React.useContext(LocationContext).navigationType;\n}\n\n/**\n * Returns a PathMatch object if the given pattern matches the current URL.\n * This is useful for components that need to know \"active\" state, e.g.\n * `<NavLink>`.\n *\n * @see https://reactrouter.com/v6/hooks/use-match\n */\nfunction useMatch(pattern) {\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, // TODO: This error is probably because they somehow have 2 versions of the\n  // router loaded. We can help them understand how to avoid that.\n  \"useMatch() may be used only in the context of a <Router> component.\") : UNSAFE_invariant(false) : void 0;\n  let {\n    pathname\n  } = useLocation();\n  return React.useMemo(() => matchPath(pattern, UNSAFE_decodePath(pathname)), [pathname, pattern]);\n}\n\n/**\n * The interface for the navigate() function returned from useNavigate().\n */\n\nconst navigateEffectWarning = \"You should call navigate() in a React.useEffect(), not when \" + \"your component is first rendered.\";\n\n// Mute warnings for calls to useNavigate in SSR environments\nfunction useIsomorphicLayoutEffect(cb) {\n  let isStatic = React.useContext(NavigationContext).static;\n  if (!isStatic) {\n    // We should be able to get rid of this once react 18.3 is released\n    // See: https://github.com/facebook/react/pull/26395\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useLayoutEffect(cb);\n  }\n}\n\n/**\n * Returns an imperative method for changing the location. Used by `<Link>`s, but\n * may also be used by other elements to change the location.\n *\n * @see https://reactrouter.com/v6/hooks/use-navigate\n */\nfunction useNavigate() {\n  let {\n    isDataRoute\n  } = React.useContext(RouteContext);\n  // Conditional usage is OK here because the usage of a data router is static\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  return isDataRoute ? useNavigateStable() : useNavigateUnstable();\n}\nfunction useNavigateUnstable() {\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, // TODO: This error is probably because they somehow have 2 versions of the\n  // router loaded. We can help them understand how to avoid that.\n  \"useNavigate() may be used only in the context of a <Router> component.\") : UNSAFE_invariant(false) : void 0;\n  let dataRouterContext = React.useContext(DataRouterContext);\n  let {\n    basename,\n    future,\n    navigator\n  } = React.useContext(NavigationContext);\n  let {\n    matches\n  } = React.useContext(RouteContext);\n  let {\n    pathname: locationPathname\n  } = useLocation();\n  let routePathnamesJson = JSON.stringify(UNSAFE_getResolveToMatches(matches, future.v7_relativeSplatPath));\n  let activeRef = React.useRef(false);\n  useIsomorphicLayoutEffect(() => {\n    activeRef.current = true;\n  });\n  let navigate = React.useCallback(function (to, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(activeRef.current, navigateEffectWarning) : void 0;\n\n    // Short circuit here since if this happens on first render the navigate\n    // is useless because we haven't wired up our history listener yet\n    if (!activeRef.current) return;\n    if (typeof to === \"number\") {\n      navigator.go(to);\n      return;\n    }\n    let path = resolveTo(to, JSON.parse(routePathnamesJson), locationPathname, options.relative === \"path\");\n\n    // If we're operating within a basename, prepend it to the pathname prior\n    // to handing off to history (but only if we're not in a data router,\n    // otherwise it'll prepend the basename inside of the router).\n    // If this is a root navigation, then we navigate to the raw basename\n    // which allows the basename to have full control over the presence of a\n    // trailing slash on root links\n    if (dataRouterContext == null && basename !== \"/\") {\n      path.pathname = path.pathname === \"/\" ? basename : joinPaths([basename, path.pathname]);\n    }\n    (!!options.replace ? navigator.replace : navigator.push)(path, options.state, options);\n  }, [basename, navigator, routePathnamesJson, locationPathname, dataRouterContext]);\n  return navigate;\n}\nconst OutletContext = /*#__PURE__*/React.createContext(null);\n\n/**\n * Returns the context (if provided) for the child route at this level of the route\n * hierarchy.\n * @see https://reactrouter.com/v6/hooks/use-outlet-context\n */\nfunction useOutletContext() {\n  return React.useContext(OutletContext);\n}\n\n/**\n * Returns the element for the child route at this level of the route\n * hierarchy. Used internally by `<Outlet>` to render child routes.\n *\n * @see https://reactrouter.com/v6/hooks/use-outlet\n */\nfunction useOutlet(context) {\n  let outlet = React.useContext(RouteContext).outlet;\n  if (outlet) {\n    return /*#__PURE__*/React.createElement(OutletContext.Provider, {\n      value: context\n    }, outlet);\n  }\n  return outlet;\n}\n\n/**\n * Returns an object of key/value pairs of the dynamic params from the current\n * URL that were matched by the route path.\n *\n * @see https://reactrouter.com/v6/hooks/use-params\n */\nfunction useParams() {\n  let {\n    matches\n  } = React.useContext(RouteContext);\n  let routeMatch = matches[matches.length - 1];\n  return routeMatch ? routeMatch.params : {};\n}\n\n/**\n * Resolves the pathname of the given `to` value against the current location.\n *\n * @see https://reactrouter.com/v6/hooks/use-resolved-path\n */\nfunction useResolvedPath(to, _temp2) {\n  let {\n    relative\n  } = _temp2 === void 0 ? {} : _temp2;\n  let {\n    future\n  } = React.useContext(NavigationContext);\n  let {\n    matches\n  } = React.useContext(RouteContext);\n  let {\n    pathname: locationPathname\n  } = useLocation();\n  let routePathnamesJson = JSON.stringify(UNSAFE_getResolveToMatches(matches, future.v7_relativeSplatPath));\n  return React.useMemo(() => resolveTo(to, JSON.parse(routePathnamesJson), locationPathname, relative === \"path\"), [to, routePathnamesJson, locationPathname, relative]);\n}\n\n/**\n * Returns the element of the route that matched the current location, prepared\n * with the correct context to render the remainder of the route tree. Route\n * elements in the tree must render an `<Outlet>` to render their child route's\n * element.\n *\n * @see https://reactrouter.com/v6/hooks/use-routes\n */\nfunction useRoutes(routes, locationArg) {\n  return useRoutesImpl(routes, locationArg);\n}\n\n// Internal implementation with accept optional param for RouterProvider usage\nfunction useRoutesImpl(routes, locationArg, dataRouterState, future) {\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, // TODO: This error is probably because they somehow have 2 versions of the\n  // router loaded. We can help them understand how to avoid that.\n  \"useRoutes() may be used only in the context of a <Router> component.\") : UNSAFE_invariant(false) : void 0;\n  let {\n    navigator\n  } = React.useContext(NavigationContext);\n  let {\n    matches: parentMatches\n  } = React.useContext(RouteContext);\n  let routeMatch = parentMatches[parentMatches.length - 1];\n  let parentParams = routeMatch ? routeMatch.params : {};\n  let parentPathname = routeMatch ? routeMatch.pathname : \"/\";\n  let parentPathnameBase = routeMatch ? routeMatch.pathnameBase : \"/\";\n  let parentRoute = routeMatch && routeMatch.route;\n  if (process.env.NODE_ENV !== \"production\") {\n    // You won't get a warning about 2 different <Routes> under a <Route>\n    // without a trailing *, but this is a best-effort warning anyway since we\n    // cannot even give the warning unless they land at the parent route.\n    //\n    // Example:\n    //\n    // <Routes>\n    //   {/* This route path MUST end with /* because otherwise\n    //       it will never match /blog/post/123 */}\n    //   <Route path=\"blog\" element={<Blog />} />\n    //   <Route path=\"blog/feed\" element={<BlogFeed />} />\n    // </Routes>\n    //\n    // function Blog() {\n    //   return (\n    //     <Routes>\n    //       <Route path=\"post/:id\" element={<Post />} />\n    //     </Routes>\n    //   );\n    // }\n    let parentPath = parentRoute && parentRoute.path || \"\";\n    warningOnce(parentPathname, !parentRoute || parentPath.endsWith(\"*\"), \"You rendered descendant <Routes> (or called `useRoutes()`) at \" + (\"\\\"\" + parentPathname + \"\\\" (under <Route path=\\\"\" + parentPath + \"\\\">) but the \") + \"parent route path has no trailing \\\"*\\\". This means if you navigate \" + \"deeper, the parent won't match anymore and therefore the child \" + \"routes will never render.\\n\\n\" + (\"Please change the parent <Route path=\\\"\" + parentPath + \"\\\"> to <Route \") + (\"path=\\\"\" + (parentPath === \"/\" ? \"*\" : parentPath + \"/*\") + \"\\\">.\"));\n  }\n  let locationFromContext = useLocation();\n  let location;\n  if (locationArg) {\n    var _parsedLocationArg$pa;\n    let parsedLocationArg = typeof locationArg === \"string\" ? parsePath(locationArg) : locationArg;\n    !(parentPathnameBase === \"/\" || ((_parsedLocationArg$pa = parsedLocationArg.pathname) == null ? void 0 : _parsedLocationArg$pa.startsWith(parentPathnameBase))) ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, \" + \"the location pathname must begin with the portion of the URL pathname that was \" + (\"matched by all parent routes. The current pathname base is \\\"\" + parentPathnameBase + \"\\\" \") + (\"but pathname \\\"\" + parsedLocationArg.pathname + \"\\\" was given in the `location` prop.\")) : UNSAFE_invariant(false) : void 0;\n    location = parsedLocationArg;\n  } else {\n    location = locationFromContext;\n  }\n  let pathname = location.pathname || \"/\";\n  let remainingPathname = pathname;\n  if (parentPathnameBase !== \"/\") {\n    // Determine the remaining pathname by removing the # of URL segments the\n    // parentPathnameBase has, instead of removing based on character count.\n    // This is because we can't guarantee that incoming/outgoing encodings/\n    // decodings will match exactly.\n    // We decode paths before matching on a per-segment basis with\n    // decodeURIComponent(), but we re-encode pathnames via `new URL()` so they\n    // match what `window.location.pathname` would reflect.  Those don't 100%\n    // align when it comes to encoded URI characters such as % and &.\n    //\n    // So we may end up with:\n    //   pathname:           \"/descendant/a%25b/match\"\n    //   parentPathnameBase: \"/descendant/a%b\"\n    //\n    // And the direct substring removal approach won't work :/\n    let parentSegments = parentPathnameBase.replace(/^\\//, \"\").split(\"/\");\n    let segments = pathname.replace(/^\\//, \"\").split(\"/\");\n    remainingPathname = \"/\" + segments.slice(parentSegments.length).join(\"/\");\n  }\n  let matches = matchRoutes(routes, {\n    pathname: remainingPathname\n  });\n  if (process.env.NODE_ENV !== \"production\") {\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(parentRoute || matches != null, \"No routes matched location \\\"\" + location.pathname + location.search + location.hash + \"\\\" \") : void 0;\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(matches == null || matches[matches.length - 1].route.element !== undefined || matches[matches.length - 1].route.Component !== undefined || matches[matches.length - 1].route.lazy !== undefined, \"Matched leaf route at location \\\"\" + location.pathname + location.search + location.hash + \"\\\" \" + \"does not have an element or Component. This means it will render an <Outlet /> with a \" + \"null value by default resulting in an \\\"empty\\\" page.\") : void 0;\n  }\n  let renderedMatches = _renderMatches(matches && matches.map(match => Object.assign({}, match, {\n    params: Object.assign({}, parentParams, match.params),\n    pathname: joinPaths([parentPathnameBase,\n    // Re-encode pathnames that were decoded inside matchRoutes\n    navigator.encodeLocation ? navigator.encodeLocation(match.pathname).pathname : match.pathname]),\n    pathnameBase: match.pathnameBase === \"/\" ? parentPathnameBase : joinPaths([parentPathnameBase,\n    // Re-encode pathnames that were decoded inside matchRoutes\n    navigator.encodeLocation ? navigator.encodeLocation(match.pathnameBase).pathname : match.pathnameBase])\n  })), parentMatches, dataRouterState, future);\n\n  // When a user passes in a `locationArg`, the associated routes need to\n  // be wrapped in a new `LocationContext.Provider` in order for `useLocation`\n  // to use the scoped location instead of the global location.\n  if (locationArg && renderedMatches) {\n    return /*#__PURE__*/React.createElement(LocationContext.Provider, {\n      value: {\n        location: _extends({\n          pathname: \"/\",\n          search: \"\",\n          hash: \"\",\n          state: null,\n          key: \"default\"\n        }, location),\n        navigationType: Action.Pop\n      }\n    }, renderedMatches);\n  }\n  return renderedMatches;\n}\nfunction DefaultErrorComponent() {\n  let error = useRouteError();\n  let message = isRouteErrorResponse(error) ? error.status + \" \" + error.statusText : error instanceof Error ? error.message : JSON.stringify(error);\n  let stack = error instanceof Error ? error.stack : null;\n  let lightgrey = \"rgba(200,200,200, 0.5)\";\n  let preStyles = {\n    padding: \"0.5rem\",\n    backgroundColor: lightgrey\n  };\n  let codeStyles = {\n    padding: \"2px 4px\",\n    backgroundColor: lightgrey\n  };\n  let devInfo = null;\n  if (process.env.NODE_ENV !== \"production\") {\n    console.error(\"Error handled by React Router default ErrorBoundary:\", error);\n    devInfo = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", null, \"\\uD83D\\uDCBF Hey developer \\uD83D\\uDC4B\"), /*#__PURE__*/React.createElement(\"p\", null, \"You can provide a way better UX than this when your app throws errors by providing your own \", /*#__PURE__*/React.createElement(\"code\", {\n      style: codeStyles\n    }, \"ErrorBoundary\"), \" or\", \" \", /*#__PURE__*/React.createElement(\"code\", {\n      style: codeStyles\n    }, \"errorElement\"), \" prop on your route.\"));\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h2\", null, \"Unexpected Application Error!\"), /*#__PURE__*/React.createElement(\"h3\", {\n    style: {\n      fontStyle: \"italic\"\n    }\n  }, message), stack ? /*#__PURE__*/React.createElement(\"pre\", {\n    style: preStyles\n  }, stack) : null, devInfo);\n}\nconst defaultErrorElement = /*#__PURE__*/React.createElement(DefaultErrorComponent, null);\nclass RenderErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      location: props.location,\n      revalidation: props.revalidation,\n      error: props.error\n    };\n  }\n  static getDerivedStateFromError(error) {\n    return {\n      error: error\n    };\n  }\n  static getDerivedStateFromProps(props, state) {\n    // When we get into an error state, the user will likely click \"back\" to the\n    // previous page that didn't have an error. Because this wraps the entire\n    // application, that will have no effect--the error page continues to display.\n    // This gives us a mechanism to recover from the error when the location changes.\n    //\n    // Whether we're in an error state or not, we update the location in state\n    // so that when we are in an error state, it gets reset when a new location\n    // comes in and the user recovers from the error.\n    if (state.location !== props.location || state.revalidation !== \"idle\" && props.revalidation === \"idle\") {\n      return {\n        error: props.error,\n        location: props.location,\n        revalidation: props.revalidation\n      };\n    }\n\n    // If we're not changing locations, preserve the location but still surface\n    // any new errors that may come through. We retain the existing error, we do\n    // this because the error provided from the app state may be cleared without\n    // the location changing.\n    return {\n      error: props.error !== undefined ? props.error : state.error,\n      location: state.location,\n      revalidation: props.revalidation || state.revalidation\n    };\n  }\n  componentDidCatch(error, errorInfo) {\n    console.error(\"React Router caught the following error during render\", error, errorInfo);\n  }\n  render() {\n    return this.state.error !== undefined ? /*#__PURE__*/React.createElement(RouteContext.Provider, {\n      value: this.props.routeContext\n    }, /*#__PURE__*/React.createElement(RouteErrorContext.Provider, {\n      value: this.state.error,\n      children: this.props.component\n    })) : this.props.children;\n  }\n}\nfunction RenderedRoute(_ref) {\n  let {\n    routeContext,\n    match,\n    children\n  } = _ref;\n  let dataRouterContext = React.useContext(DataRouterContext);\n\n  // Track how deep we got in our render pass to emulate SSR componentDidCatch\n  // in a DataStaticRouter\n  if (dataRouterContext && dataRouterContext.static && dataRouterContext.staticContext && (match.route.errorElement || match.route.ErrorBoundary)) {\n    dataRouterContext.staticContext._deepestRenderedBoundaryId = match.route.id;\n  }\n  return /*#__PURE__*/React.createElement(RouteContext.Provider, {\n    value: routeContext\n  }, children);\n}\nfunction _renderMatches(matches, parentMatches, dataRouterState, future) {\n  var _dataRouterState;\n  if (parentMatches === void 0) {\n    parentMatches = [];\n  }\n  if (dataRouterState === void 0) {\n    dataRouterState = null;\n  }\n  if (future === void 0) {\n    future = null;\n  }\n  if (matches == null) {\n    var _future;\n    if (!dataRouterState) {\n      return null;\n    }\n    if (dataRouterState.errors) {\n      // Don't bail if we have data router errors so we can render them in the\n      // boundary.  Use the pre-matched (or shimmed) matches\n      matches = dataRouterState.matches;\n    } else if ((_future = future) != null && _future.v7_partialHydration && parentMatches.length === 0 && !dataRouterState.initialized && dataRouterState.matches.length > 0) {\n      // Don't bail if we're initializing with partial hydration and we have\n      // router matches.  That means we're actively running `patchRoutesOnNavigation`\n      // so we should render down the partial matches to the appropriate\n      // `HydrateFallback`.  We only do this if `parentMatches` is empty so it\n      // only impacts the root matches for `RouterProvider` and no descendant\n      // `<Routes>`\n      matches = dataRouterState.matches;\n    } else {\n      return null;\n    }\n  }\n  let renderedMatches = matches;\n\n  // If we have data errors, trim matches to the highest error boundary\n  let errors = (_dataRouterState = dataRouterState) == null ? void 0 : _dataRouterState.errors;\n  if (errors != null) {\n    let errorIndex = renderedMatches.findIndex(m => m.route.id && (errors == null ? void 0 : errors[m.route.id]) !== undefined);\n    !(errorIndex >= 0) ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"Could not find a matching route for errors on route IDs: \" + Object.keys(errors).join(\",\")) : UNSAFE_invariant(false) : void 0;\n    renderedMatches = renderedMatches.slice(0, Math.min(renderedMatches.length, errorIndex + 1));\n  }\n\n  // If we're in a partial hydration mode, detect if we need to render down to\n  // a given HydrateFallback while we load the rest of the hydration data\n  let renderFallback = false;\n  let fallbackIndex = -1;\n  if (dataRouterState && future && future.v7_partialHydration) {\n    for (let i = 0; i < renderedMatches.length; i++) {\n      let match = renderedMatches[i];\n      // Track the deepest fallback up until the first route without data\n      if (match.route.HydrateFallback || match.route.hydrateFallbackElement) {\n        fallbackIndex = i;\n      }\n      if (match.route.id) {\n        let {\n          loaderData,\n          errors\n        } = dataRouterState;\n        let needsToRunLoader = match.route.loader && loaderData[match.route.id] === undefined && (!errors || errors[match.route.id] === undefined);\n        if (match.route.lazy || needsToRunLoader) {\n          // We found the first route that's not ready to render (waiting on\n          // lazy, or has a loader that hasn't run yet).  Flag that we need to\n          // render a fallback and render up until the appropriate fallback\n          renderFallback = true;\n          if (fallbackIndex >= 0) {\n            renderedMatches = renderedMatches.slice(0, fallbackIndex + 1);\n          } else {\n            renderedMatches = [renderedMatches[0]];\n          }\n          break;\n        }\n      }\n    }\n  }\n  return renderedMatches.reduceRight((outlet, match, index) => {\n    // Only data routers handle errors/fallbacks\n    let error;\n    let shouldRenderHydrateFallback = false;\n    let errorElement = null;\n    let hydrateFallbackElement = null;\n    if (dataRouterState) {\n      error = errors && match.route.id ? errors[match.route.id] : undefined;\n      errorElement = match.route.errorElement || defaultErrorElement;\n      if (renderFallback) {\n        if (fallbackIndex < 0 && index === 0) {\n          warningOnce(\"route-fallback\", false, \"No `HydrateFallback` element provided to render during initial hydration\");\n          shouldRenderHydrateFallback = true;\n          hydrateFallbackElement = null;\n        } else if (fallbackIndex === index) {\n          shouldRenderHydrateFallback = true;\n          hydrateFallbackElement = match.route.hydrateFallbackElement || null;\n        }\n      }\n    }\n    let matches = parentMatches.concat(renderedMatches.slice(0, index + 1));\n    let getChildren = () => {\n      let children;\n      if (error) {\n        children = errorElement;\n      } else if (shouldRenderHydrateFallback) {\n        children = hydrateFallbackElement;\n      } else if (match.route.Component) {\n        // Note: This is a de-optimized path since React won't re-use the\n        // ReactElement since it's identity changes with each new\n        // React.createElement call.  We keep this so folks can use\n        // `<Route Component={...}>` in `<Routes>` but generally `Component`\n        // usage is only advised in `RouterProvider` when we can convert it to\n        // `element` ahead of time.\n        children = /*#__PURE__*/React.createElement(match.route.Component, null);\n      } else if (match.route.element) {\n        children = match.route.element;\n      } else {\n        children = outlet;\n      }\n      return /*#__PURE__*/React.createElement(RenderedRoute, {\n        match: match,\n        routeContext: {\n          outlet,\n          matches,\n          isDataRoute: dataRouterState != null\n        },\n        children: children\n      });\n    };\n    // Only wrap in an error boundary within data router usages when we have an\n    // ErrorBoundary/errorElement on this route.  Otherwise let it bubble up to\n    // an ancestor ErrorBoundary/errorElement\n    return dataRouterState && (match.route.ErrorBoundary || match.route.errorElement || index === 0) ? /*#__PURE__*/React.createElement(RenderErrorBoundary, {\n      location: dataRouterState.location,\n      revalidation: dataRouterState.revalidation,\n      component: errorElement,\n      error: error,\n      children: getChildren(),\n      routeContext: {\n        outlet: null,\n        matches,\n        isDataRoute: true\n      }\n    }) : getChildren();\n  }, null);\n}\nvar DataRouterHook = /*#__PURE__*/function (DataRouterHook) {\n  DataRouterHook[\"UseBlocker\"] = \"useBlocker\";\n  DataRouterHook[\"UseRevalidator\"] = \"useRevalidator\";\n  DataRouterHook[\"UseNavigateStable\"] = \"useNavigate\";\n  return DataRouterHook;\n}(DataRouterHook || {});\nvar DataRouterStateHook = /*#__PURE__*/function (DataRouterStateHook) {\n  DataRouterStateHook[\"UseBlocker\"] = \"useBlocker\";\n  DataRouterStateHook[\"UseLoaderData\"] = \"useLoaderData\";\n  DataRouterStateHook[\"UseActionData\"] = \"useActionData\";\n  DataRouterStateHook[\"UseRouteError\"] = \"useRouteError\";\n  DataRouterStateHook[\"UseNavigation\"] = \"useNavigation\";\n  DataRouterStateHook[\"UseRouteLoaderData\"] = \"useRouteLoaderData\";\n  DataRouterStateHook[\"UseMatches\"] = \"useMatches\";\n  DataRouterStateHook[\"UseRevalidator\"] = \"useRevalidator\";\n  DataRouterStateHook[\"UseNavigateStable\"] = \"useNavigate\";\n  DataRouterStateHook[\"UseRouteId\"] = \"useRouteId\";\n  return DataRouterStateHook;\n}(DataRouterStateHook || {});\nfunction getDataRouterConsoleError(hookName) {\n  return hookName + \" must be used within a data router.  See https://reactrouter.com/v6/routers/picking-a-router.\";\n}\nfunction useDataRouterContext(hookName) {\n  let ctx = React.useContext(DataRouterContext);\n  !ctx ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, getDataRouterConsoleError(hookName)) : UNSAFE_invariant(false) : void 0;\n  return ctx;\n}\nfunction useDataRouterState(hookName) {\n  let state = React.useContext(DataRouterStateContext);\n  !state ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, getDataRouterConsoleError(hookName)) : UNSAFE_invariant(false) : void 0;\n  return state;\n}\nfunction useRouteContext(hookName) {\n  let route = React.useContext(RouteContext);\n  !route ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, getDataRouterConsoleError(hookName)) : UNSAFE_invariant(false) : void 0;\n  return route;\n}\n\n// Internal version with hookName-aware debugging\nfunction useCurrentRouteId(hookName) {\n  let route = useRouteContext(hookName);\n  let thisRoute = route.matches[route.matches.length - 1];\n  !thisRoute.route.id ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, hookName + \" can only be used on routes that contain a unique \\\"id\\\"\") : UNSAFE_invariant(false) : void 0;\n  return thisRoute.route.id;\n}\n\n/**\n * Returns the ID for the nearest contextual route\n */\nfunction useRouteId() {\n  return useCurrentRouteId(DataRouterStateHook.UseRouteId);\n}\n\n/**\n * Returns the current navigation, defaulting to an \"idle\" navigation when\n * no navigation is in progress\n */\nfunction useNavigation() {\n  let state = useDataRouterState(DataRouterStateHook.UseNavigation);\n  return state.navigation;\n}\n\n/**\n * Returns a revalidate function for manually triggering revalidation, as well\n * as the current state of any manual revalidations\n */\nfunction useRevalidator() {\n  let dataRouterContext = useDataRouterContext(DataRouterHook.UseRevalidator);\n  let state = useDataRouterState(DataRouterStateHook.UseRevalidator);\n  return React.useMemo(() => ({\n    revalidate: dataRouterContext.router.revalidate,\n    state: state.revalidation\n  }), [dataRouterContext.router.revalidate, state.revalidation]);\n}\n\n/**\n * Returns the active route matches, useful for accessing loaderData for\n * parent/child routes or the route \"handle\" property\n */\nfunction useMatches() {\n  let {\n    matches,\n    loaderData\n  } = useDataRouterState(DataRouterStateHook.UseMatches);\n  return React.useMemo(() => matches.map(m => UNSAFE_convertRouteMatchToUiMatch(m, loaderData)), [matches, loaderData]);\n}\n\n/**\n * Returns the loader data for the nearest ancestor Route loader\n */\nfunction useLoaderData() {\n  let state = useDataRouterState(DataRouterStateHook.UseLoaderData);\n  let routeId = useCurrentRouteId(DataRouterStateHook.UseLoaderData);\n  if (state.errors && state.errors[routeId] != null) {\n    console.error(\"You cannot `useLoaderData` in an errorElement (routeId: \" + routeId + \")\");\n    return undefined;\n  }\n  return state.loaderData[routeId];\n}\n\n/**\n * Returns the loaderData for the given routeId\n */\nfunction useRouteLoaderData(routeId) {\n  let state = useDataRouterState(DataRouterStateHook.UseRouteLoaderData);\n  return state.loaderData[routeId];\n}\n\n/**\n * Returns the action data for the nearest ancestor Route action\n */\nfunction useActionData() {\n  let state = useDataRouterState(DataRouterStateHook.UseActionData);\n  let routeId = useCurrentRouteId(DataRouterStateHook.UseLoaderData);\n  return state.actionData ? state.actionData[routeId] : undefined;\n}\n\n/**\n * Returns the nearest ancestor Route error, which could be a loader/action\n * error or a render error.  This is intended to be called from your\n * ErrorBoundary/errorElement to display a proper error message.\n */\nfunction useRouteError() {\n  var _state$errors;\n  let error = React.useContext(RouteErrorContext);\n  let state = useDataRouterState(DataRouterStateHook.UseRouteError);\n  let routeId = useCurrentRouteId(DataRouterStateHook.UseRouteError);\n\n  // If this was a render error, we put it in a RouteError context inside\n  // of RenderErrorBoundary\n  if (error !== undefined) {\n    return error;\n  }\n\n  // Otherwise look for errors from our data router state\n  return (_state$errors = state.errors) == null ? void 0 : _state$errors[routeId];\n}\n\n/**\n * Returns the happy-path data from the nearest ancestor `<Await />` value\n */\nfunction useAsyncValue() {\n  let value = React.useContext(AwaitContext);\n  return value == null ? void 0 : value._data;\n}\n\n/**\n * Returns the error from the nearest ancestor `<Await />` value\n */\nfunction useAsyncError() {\n  let value = React.useContext(AwaitContext);\n  return value == null ? void 0 : value._error;\n}\nlet blockerId = 0;\n\n/**\n * Allow the application to block navigations within the SPA and present the\n * user a confirmation dialog to confirm the navigation.  Mostly used to avoid\n * using half-filled form data.  This does not handle hard-reloads or\n * cross-origin navigations.\n */\nfunction useBlocker(shouldBlock) {\n  let {\n    router,\n    basename\n  } = useDataRouterContext(DataRouterHook.UseBlocker);\n  let state = useDataRouterState(DataRouterStateHook.UseBlocker);\n  let [blockerKey, setBlockerKey] = React.useState(\"\");\n  let blockerFunction = React.useCallback(arg => {\n    if (typeof shouldBlock !== \"function\") {\n      return !!shouldBlock;\n    }\n    if (basename === \"/\") {\n      return shouldBlock(arg);\n    }\n\n    // If they provided us a function and we've got an active basename, strip\n    // it from the locations we expose to the user to match the behavior of\n    // useLocation\n    let {\n      currentLocation,\n      nextLocation,\n      historyAction\n    } = arg;\n    return shouldBlock({\n      currentLocation: _extends({}, currentLocation, {\n        pathname: stripBasename(currentLocation.pathname, basename) || currentLocation.pathname\n      }),\n      nextLocation: _extends({}, nextLocation, {\n        pathname: stripBasename(nextLocation.pathname, basename) || nextLocation.pathname\n      }),\n      historyAction\n    });\n  }, [basename, shouldBlock]);\n\n  // This effect is in charge of blocker key assignment and deletion (which is\n  // tightly coupled to the key)\n  React.useEffect(() => {\n    let key = String(++blockerId);\n    setBlockerKey(key);\n    return () => router.deleteBlocker(key);\n  }, [router]);\n\n  // This effect handles assigning the blockerFunction.  This is to handle\n  // unstable blocker function identities, and happens only after the prior\n  // effect so we don't get an orphaned blockerFunction in the router with a\n  // key of \"\".  Until then we just have the IDLE_BLOCKER.\n  React.useEffect(() => {\n    if (blockerKey !== \"\") {\n      router.getBlocker(blockerKey, blockerFunction);\n    }\n  }, [router, blockerKey, blockerFunction]);\n\n  // Prefer the blocker from `state` not `router.state` since DataRouterContext\n  // is memoized so this ensures we update on blocker state updates\n  return blockerKey && state.blockers.has(blockerKey) ? state.blockers.get(blockerKey) : IDLE_BLOCKER;\n}\n\n/**\n * Stable version of useNavigate that is used when we are in the context of\n * a RouterProvider.\n */\nfunction useNavigateStable() {\n  let {\n    router\n  } = useDataRouterContext(DataRouterHook.UseNavigateStable);\n  let id = useCurrentRouteId(DataRouterStateHook.UseNavigateStable);\n  let activeRef = React.useRef(false);\n  useIsomorphicLayoutEffect(() => {\n    activeRef.current = true;\n  });\n  let navigate = React.useCallback(function (to, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(activeRef.current, navigateEffectWarning) : void 0;\n\n    // Short circuit here since if this happens on first render the navigate\n    // is useless because we haven't wired up our router subscriber yet\n    if (!activeRef.current) return;\n    if (typeof to === \"number\") {\n      router.navigate(to);\n    } else {\n      router.navigate(to, _extends({\n        fromRouteId: id\n      }, options));\n    }\n  }, [router, id]);\n  return navigate;\n}\nconst alreadyWarned$1 = {};\nfunction warningOnce(key, cond, message) {\n  if (!cond && !alreadyWarned$1[key]) {\n    alreadyWarned$1[key] = true;\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(false, message) : void 0;\n  }\n}\n\nconst alreadyWarned = {};\nfunction warnOnce(key, message) {\n  if (process.env.NODE_ENV !== \"production\" && !alreadyWarned[message]) {\n    alreadyWarned[message] = true;\n    console.warn(message);\n  }\n}\nconst logDeprecation = (flag, msg, link) => warnOnce(flag, \"\\u26A0\\uFE0F React Router Future Flag Warning: \" + msg + \". \" + (\"You can use the `\" + flag + \"` future flag to opt-in early. \") + (\"For more information, see \" + link + \".\"));\nfunction logV6DeprecationWarnings(renderFuture, routerFuture) {\n  if ((renderFuture == null ? void 0 : renderFuture.v7_startTransition) === undefined) {\n    logDeprecation(\"v7_startTransition\", \"React Router will begin wrapping state updates in `React.startTransition` in v7\", \"https://reactrouter.com/v6/upgrading/future#v7_starttransition\");\n  }\n  if ((renderFuture == null ? void 0 : renderFuture.v7_relativeSplatPath) === undefined && (!routerFuture || routerFuture.v7_relativeSplatPath === undefined)) {\n    logDeprecation(\"v7_relativeSplatPath\", \"Relative route resolution within Splat routes is changing in v7\", \"https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath\");\n  }\n  if (routerFuture) {\n    if (routerFuture.v7_fetcherPersist === undefined) {\n      logDeprecation(\"v7_fetcherPersist\", \"The persistence behavior of fetchers is changing in v7\", \"https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist\");\n    }\n    if (routerFuture.v7_normalizeFormMethod === undefined) {\n      logDeprecation(\"v7_normalizeFormMethod\", \"Casing of `formMethod` fields is being normalized to uppercase in v7\", \"https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod\");\n    }\n    if (routerFuture.v7_partialHydration === undefined) {\n      logDeprecation(\"v7_partialHydration\", \"`RouterProvider` hydration behavior is changing in v7\", \"https://reactrouter.com/v6/upgrading/future#v7_partialhydration\");\n    }\n    if (routerFuture.v7_skipActionErrorRevalidation === undefined) {\n      logDeprecation(\"v7_skipActionErrorRevalidation\", \"The revalidation behavior after 4xx/5xx `action` responses is changing in v7\", \"https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation\");\n    }\n  }\n}\n\n/**\n  Webpack + React 17 fails to compile on any of the following because webpack\n  complains that `startTransition` doesn't exist in `React`:\n  * import { startTransition } from \"react\"\n  * import * as React from from \"react\";\n    \"startTransition\" in React ? React.startTransition(() => setState()) : setState()\n  * import * as React from from \"react\";\n    \"startTransition\" in React ? React[\"startTransition\"](() => setState()) : setState()\n\n  Moving it to a constant such as the following solves the Webpack/React 17 issue:\n  * import * as React from from \"react\";\n    const START_TRANSITION = \"startTransition\";\n    START_TRANSITION in React ? React[START_TRANSITION](() => setState()) : setState()\n\n  However, that introduces webpack/terser minification issues in production builds\n  in React 18 where minification/obfuscation ends up removing the call of\n  React.startTransition entirely from the first half of the ternary.  Grabbing\n  this exported reference once up front resolves that issue.\n\n  See https://github.com/remix-run/react-router/issues/10579\n*/\nconst START_TRANSITION = \"startTransition\";\nconst startTransitionImpl = React[START_TRANSITION];\n\n/**\n * Given a Remix Router instance, render the appropriate UI\n */\nfunction RouterProvider(_ref) {\n  let {\n    fallbackElement,\n    router,\n    future\n  } = _ref;\n  let [state, setStateImpl] = React.useState(router.state);\n  let {\n    v7_startTransition\n  } = future || {};\n  let setState = React.useCallback(newState => {\n    if (v7_startTransition && startTransitionImpl) {\n      startTransitionImpl(() => setStateImpl(newState));\n    } else {\n      setStateImpl(newState);\n    }\n  }, [setStateImpl, v7_startTransition]);\n\n  // Need to use a layout effect here so we are subscribed early enough to\n  // pick up on any render-driven redirects/navigations (useEffect/<Navigate>)\n  React.useLayoutEffect(() => router.subscribe(setState), [router, setState]);\n  React.useEffect(() => {\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(fallbackElement == null || !router.future.v7_partialHydration, \"`<RouterProvider fallbackElement>` is deprecated when using \" + \"`v7_partialHydration`, use a `HydrateFallback` component instead\") : void 0;\n    // Only log this once on initial mount\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  let navigator = React.useMemo(() => {\n    return {\n      createHref: router.createHref,\n      encodeLocation: router.encodeLocation,\n      go: n => router.navigate(n),\n      push: (to, state, opts) => router.navigate(to, {\n        state,\n        preventScrollReset: opts == null ? void 0 : opts.preventScrollReset\n      }),\n      replace: (to, state, opts) => router.navigate(to, {\n        replace: true,\n        state,\n        preventScrollReset: opts == null ? void 0 : opts.preventScrollReset\n      })\n    };\n  }, [router]);\n  let basename = router.basename || \"/\";\n  let dataRouterContext = React.useMemo(() => ({\n    router,\n    navigator,\n    static: false,\n    basename\n  }), [router, navigator, basename]);\n  React.useEffect(() => logV6DeprecationWarnings(future, router.future), [router, future]);\n\n  // The fragment and {null} here are important!  We need them to keep React 18's\n  // useId happy when we are server-rendering since we may have a <script> here\n  // containing the hydrated server-side staticContext (from StaticRouterProvider).\n  // useId relies on the component tree structure to generate deterministic id's\n  // so we need to ensure it remains the same on the client even though\n  // we don't need the <script> tag\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(DataRouterContext.Provider, {\n    value: dataRouterContext\n  }, /*#__PURE__*/React.createElement(DataRouterStateContext.Provider, {\n    value: state\n  }, /*#__PURE__*/React.createElement(Router, {\n    basename: basename,\n    location: state.location,\n    navigationType: state.historyAction,\n    navigator: navigator,\n    future: {\n      v7_relativeSplatPath: router.future.v7_relativeSplatPath\n    }\n  }, state.initialized || router.future.v7_partialHydration ? /*#__PURE__*/React.createElement(DataRoutes, {\n    routes: router.routes,\n    future: router.future,\n    state: state\n  }) : fallbackElement))), null);\n}\nfunction DataRoutes(_ref2) {\n  let {\n    routes,\n    future,\n    state\n  } = _ref2;\n  return useRoutesImpl(routes, undefined, state, future);\n}\n/**\n * A `<Router>` that stores all entries in memory.\n *\n * @see https://reactrouter.com/v6/router-components/memory-router\n */\nfunction MemoryRouter(_ref3) {\n  let {\n    basename,\n    children,\n    initialEntries,\n    initialIndex,\n    future\n  } = _ref3;\n  let historyRef = React.useRef();\n  if (historyRef.current == null) {\n    historyRef.current = createMemoryHistory({\n      initialEntries,\n      initialIndex,\n      v5Compat: true\n    });\n  }\n  let history = historyRef.current;\n  let [state, setStateImpl] = React.useState({\n    action: history.action,\n    location: history.location\n  });\n  let {\n    v7_startTransition\n  } = future || {};\n  let setState = React.useCallback(newState => {\n    v7_startTransition && startTransitionImpl ? startTransitionImpl(() => setStateImpl(newState)) : setStateImpl(newState);\n  }, [setStateImpl, v7_startTransition]);\n  React.useLayoutEffect(() => history.listen(setState), [history, setState]);\n  React.useEffect(() => logV6DeprecationWarnings(future), [future]);\n  return /*#__PURE__*/React.createElement(Router, {\n    basename: basename,\n    children: children,\n    location: state.location,\n    navigationType: state.action,\n    navigator: history,\n    future: future\n  });\n}\n/**\n * Changes the current location.\n *\n * Note: This API is mostly useful in React.Component subclasses that are not\n * able to use hooks. In functional components, we recommend you use the\n * `useNavigate` hook instead.\n *\n * @see https://reactrouter.com/v6/components/navigate\n */\nfunction Navigate(_ref4) {\n  let {\n    to,\n    replace,\n    state,\n    relative\n  } = _ref4;\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, // TODO: This error is probably because they somehow have 2 versions of\n  // the router loaded. We can help them understand how to avoid that.\n  \"<Navigate> may be used only in the context of a <Router> component.\") : UNSAFE_invariant(false) : void 0;\n  let {\n    future,\n    static: isStatic\n  } = React.useContext(NavigationContext);\n  process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(!isStatic, \"<Navigate> must not be used on the initial render in a <StaticRouter>. \" + \"This is a no-op, but you should modify your code so the <Navigate> is \" + \"only ever rendered in response to some user interaction or state change.\") : void 0;\n  let {\n    matches\n  } = React.useContext(RouteContext);\n  let {\n    pathname: locationPathname\n  } = useLocation();\n  let navigate = useNavigate();\n\n  // Resolve the path outside of the effect so that when effects run twice in\n  // StrictMode they navigate to the same place\n  let path = resolveTo(to, UNSAFE_getResolveToMatches(matches, future.v7_relativeSplatPath), locationPathname, relative === \"path\");\n  let jsonPath = JSON.stringify(path);\n  React.useEffect(() => navigate(JSON.parse(jsonPath), {\n    replace,\n    state,\n    relative\n  }), [navigate, jsonPath, relative, replace, state]);\n  return null;\n}\n/**\n * Renders the child route's element, if there is one.\n *\n * @see https://reactrouter.com/v6/components/outlet\n */\nfunction Outlet(props) {\n  return useOutlet(props.context);\n}\n/**\n * Declares an element that should be rendered at a certain URL path.\n *\n * @see https://reactrouter.com/v6/components/route\n */\nfunction Route(_props) {\n  process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"A <Route> is only ever to be used as the child of <Routes> element, \" + \"never rendered directly. Please wrap your <Route> in a <Routes>.\") : UNSAFE_invariant(false) ;\n}\n/**\n * Provides location context for the rest of the app.\n *\n * Note: You usually won't render a `<Router>` directly. Instead, you'll render a\n * router that is more specific to your environment such as a `<BrowserRouter>`\n * in web browsers or a `<StaticRouter>` for server rendering.\n *\n * @see https://reactrouter.com/v6/router-components/router\n */\nfunction Router(_ref5) {\n  let {\n    basename: basenameProp = \"/\",\n    children = null,\n    location: locationProp,\n    navigationType = Action.Pop,\n    navigator,\n    static: staticProp = false,\n    future\n  } = _ref5;\n  !!useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"You cannot render a <Router> inside another <Router>.\" + \" You should never have more than one in your app.\") : UNSAFE_invariant(false) : void 0;\n\n  // Preserve trailing slashes on basename, so we can let the user control\n  // the enforcement of trailing slashes throughout the app\n  let basename = basenameProp.replace(/^\\/*/, \"/\");\n  let navigationContext = React.useMemo(() => ({\n    basename,\n    navigator,\n    static: staticProp,\n    future: _extends({\n      v7_relativeSplatPath: false\n    }, future)\n  }), [basename, future, navigator, staticProp]);\n  if (typeof locationProp === \"string\") {\n    locationProp = parsePath(locationProp);\n  }\n  let {\n    pathname = \"/\",\n    search = \"\",\n    hash = \"\",\n    state = null,\n    key = \"default\"\n  } = locationProp;\n  let locationContext = React.useMemo(() => {\n    let trailingPathname = stripBasename(pathname, basename);\n    if (trailingPathname == null) {\n      return null;\n    }\n    return {\n      location: {\n        pathname: trailingPathname,\n        search,\n        hash,\n        state,\n        key\n      },\n      navigationType\n    };\n  }, [basename, pathname, search, hash, state, key, navigationType]);\n  process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(locationContext != null, \"<Router basename=\\\"\" + basename + \"\\\"> is not able to match the URL \" + (\"\\\"\" + pathname + search + hash + \"\\\" because it does not start with the \") + \"basename, so the <Router> won't render anything.\") : void 0;\n  if (locationContext == null) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(NavigationContext.Provider, {\n    value: navigationContext\n  }, /*#__PURE__*/React.createElement(LocationContext.Provider, {\n    children: children,\n    value: locationContext\n  }));\n}\n/**\n * A container for a nested tree of `<Route>` elements that renders the branch\n * that best matches the current location.\n *\n * @see https://reactrouter.com/v6/components/routes\n */\nfunction Routes(_ref6) {\n  let {\n    children,\n    location\n  } = _ref6;\n  return useRoutes(createRoutesFromChildren(children), location);\n}\n/**\n * Component to use for rendering lazily loaded data from returning defer()\n * in a loader function\n */\nfunction Await(_ref7) {\n  let {\n    children,\n    errorElement,\n    resolve\n  } = _ref7;\n  return /*#__PURE__*/React.createElement(AwaitErrorBoundary, {\n    resolve: resolve,\n    errorElement: errorElement\n  }, /*#__PURE__*/React.createElement(ResolveAwait, null, children));\n}\nvar AwaitRenderStatus = /*#__PURE__*/function (AwaitRenderStatus) {\n  AwaitRenderStatus[AwaitRenderStatus[\"pending\"] = 0] = \"pending\";\n  AwaitRenderStatus[AwaitRenderStatus[\"success\"] = 1] = \"success\";\n  AwaitRenderStatus[AwaitRenderStatus[\"error\"] = 2] = \"error\";\n  return AwaitRenderStatus;\n}(AwaitRenderStatus || {});\nconst neverSettledPromise = new Promise(() => {});\nclass AwaitErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null\n    };\n  }\n  static getDerivedStateFromError(error) {\n    return {\n      error\n    };\n  }\n  componentDidCatch(error, errorInfo) {\n    console.error(\"<Await> caught the following error during render\", error, errorInfo);\n  }\n  render() {\n    let {\n      children,\n      errorElement,\n      resolve\n    } = this.props;\n    let promise = null;\n    let status = AwaitRenderStatus.pending;\n    if (!(resolve instanceof Promise)) {\n      // Didn't get a promise - provide as a resolved promise\n      status = AwaitRenderStatus.success;\n      promise = Promise.resolve();\n      Object.defineProperty(promise, \"_tracked\", {\n        get: () => true\n      });\n      Object.defineProperty(promise, \"_data\", {\n        get: () => resolve\n      });\n    } else if (this.state.error) {\n      // Caught a render error, provide it as a rejected promise\n      status = AwaitRenderStatus.error;\n      let renderError = this.state.error;\n      promise = Promise.reject().catch(() => {}); // Avoid unhandled rejection warnings\n      Object.defineProperty(promise, \"_tracked\", {\n        get: () => true\n      });\n      Object.defineProperty(promise, \"_error\", {\n        get: () => renderError\n      });\n    } else if (resolve._tracked) {\n      // Already tracked promise - check contents\n      promise = resolve;\n      status = \"_error\" in promise ? AwaitRenderStatus.error : \"_data\" in promise ? AwaitRenderStatus.success : AwaitRenderStatus.pending;\n    } else {\n      // Raw (untracked) promise - track it\n      status = AwaitRenderStatus.pending;\n      Object.defineProperty(resolve, \"_tracked\", {\n        get: () => true\n      });\n      promise = resolve.then(data => Object.defineProperty(resolve, \"_data\", {\n        get: () => data\n      }), error => Object.defineProperty(resolve, \"_error\", {\n        get: () => error\n      }));\n    }\n    if (status === AwaitRenderStatus.error && promise._error instanceof AbortedDeferredError) {\n      // Freeze the UI by throwing a never resolved promise\n      throw neverSettledPromise;\n    }\n    if (status === AwaitRenderStatus.error && !errorElement) {\n      // No errorElement, throw to the nearest route-level error boundary\n      throw promise._error;\n    }\n    if (status === AwaitRenderStatus.error) {\n      // Render via our errorElement\n      return /*#__PURE__*/React.createElement(AwaitContext.Provider, {\n        value: promise,\n        children: errorElement\n      });\n    }\n    if (status === AwaitRenderStatus.success) {\n      // Render children with resolved value\n      return /*#__PURE__*/React.createElement(AwaitContext.Provider, {\n        value: promise,\n        children: children\n      });\n    }\n\n    // Throw to the suspense boundary\n    throw promise;\n  }\n}\n\n/**\n * @private\n * Indirection to leverage useAsyncValue for a render-prop API on `<Await>`\n */\nfunction ResolveAwait(_ref8) {\n  let {\n    children\n  } = _ref8;\n  let data = useAsyncValue();\n  let toRender = typeof children === \"function\" ? children(data) : children;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, toRender);\n}\n\n///////////////////////////////////////////////////////////////////////////////\n// UTILS\n///////////////////////////////////////////////////////////////////////////////\n\n/**\n * Creates a route config from a React \"children\" object, which is usually\n * either a `<Route>` element or an array of them. Used internally by\n * `<Routes>` to create a route config from its children.\n *\n * @see https://reactrouter.com/v6/utils/create-routes-from-children\n */\nfunction createRoutesFromChildren(children, parentPath) {\n  if (parentPath === void 0) {\n    parentPath = [];\n  }\n  let routes = [];\n  React.Children.forEach(children, (element, index) => {\n    if (! /*#__PURE__*/React.isValidElement(element)) {\n      // Ignore non-elements. This allows people to more easily inline\n      // conditionals in their route config.\n      return;\n    }\n    let treePath = [...parentPath, index];\n    if (element.type === React.Fragment) {\n      // Transparently support React.Fragment and its children.\n      routes.push.apply(routes, createRoutesFromChildren(element.props.children, treePath));\n      return;\n    }\n    !(element.type === Route) ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"[\" + (typeof element.type === \"string\" ? element.type : element.type.name) + \"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>\") : UNSAFE_invariant(false) : void 0;\n    !(!element.props.index || !element.props.children) ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"An index route cannot have child routes.\") : UNSAFE_invariant(false) : void 0;\n    let route = {\n      id: element.props.id || treePath.join(\"-\"),\n      caseSensitive: element.props.caseSensitive,\n      element: element.props.element,\n      Component: element.props.Component,\n      index: element.props.index,\n      path: element.props.path,\n      loader: element.props.loader,\n      action: element.props.action,\n      errorElement: element.props.errorElement,\n      ErrorBoundary: element.props.ErrorBoundary,\n      hasErrorBoundary: element.props.ErrorBoundary != null || element.props.errorElement != null,\n      shouldRevalidate: element.props.shouldRevalidate,\n      handle: element.props.handle,\n      lazy: element.props.lazy\n    };\n    if (element.props.children) {\n      route.children = createRoutesFromChildren(element.props.children, treePath);\n    }\n    routes.push(route);\n  });\n  return routes;\n}\n\n/**\n * Renders the result of `matchRoutes()` into a React element.\n */\nfunction renderMatches(matches) {\n  return _renderMatches(matches);\n}\n\nfunction mapRouteProperties(route) {\n  let updates = {\n    // Note: this check also occurs in createRoutesFromChildren so update\n    // there if you change this -- please and thank you!\n    hasErrorBoundary: route.ErrorBoundary != null || route.errorElement != null\n  };\n  if (route.Component) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (route.element) {\n        process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(false, \"You should not include both `Component` and `element` on your route - \" + \"`Component` will be used.\") : void 0;\n      }\n    }\n    Object.assign(updates, {\n      element: /*#__PURE__*/React.createElement(route.Component),\n      Component: undefined\n    });\n  }\n  if (route.HydrateFallback) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (route.hydrateFallbackElement) {\n        process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(false, \"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - \" + \"`HydrateFallback` will be used.\") : void 0;\n      }\n    }\n    Object.assign(updates, {\n      hydrateFallbackElement: /*#__PURE__*/React.createElement(route.HydrateFallback),\n      HydrateFallback: undefined\n    });\n  }\n  if (route.ErrorBoundary) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (route.errorElement) {\n        process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(false, \"You should not include both `ErrorBoundary` and `errorElement` on your route - \" + \"`ErrorBoundary` will be used.\") : void 0;\n      }\n    }\n    Object.assign(updates, {\n      errorElement: /*#__PURE__*/React.createElement(route.ErrorBoundary),\n      ErrorBoundary: undefined\n    });\n  }\n  return updates;\n}\nfunction createMemoryRouter(routes, opts) {\n  return createRouter({\n    basename: opts == null ? void 0 : opts.basename,\n    future: _extends({}, opts == null ? void 0 : opts.future, {\n      v7_prependBasename: true\n    }),\n    history: createMemoryHistory({\n      initialEntries: opts == null ? void 0 : opts.initialEntries,\n      initialIndex: opts == null ? void 0 : opts.initialIndex\n    }),\n    hydrationData: opts == null ? void 0 : opts.hydrationData,\n    routes,\n    mapRouteProperties,\n    dataStrategy: opts == null ? void 0 : opts.dataStrategy,\n    patchRoutesOnNavigation: opts == null ? void 0 : opts.patchRoutesOnNavigation\n  }).initialize();\n}\n\nexport { Await, MemoryRouter, Navigate, Outlet, Route, Router, RouterProvider, Routes, DataRouterContext as UNSAFE_DataRouterContext, DataRouterStateContext as UNSAFE_DataRouterStateContext, LocationContext as UNSAFE_LocationContext, NavigationContext as UNSAFE_NavigationContext, RouteContext as UNSAFE_RouteContext, logV6DeprecationWarnings as UNSAFE_logV6DeprecationWarnings, mapRouteProperties as UNSAFE_mapRouteProperties, useRouteId as UNSAFE_useRouteId, useRoutesImpl as UNSAFE_useRoutesImpl, createMemoryRouter, createRoutesFromChildren, createRoutesFromChildren as createRoutesFromElements, renderMatches, useActionData, useAsyncError, useAsyncValue, useBlocker, useHref, useInRouterContext, useLoaderData, useLocation, useMatch, useMatches, useNavigate, useNavigation, useNavigationType, useOutlet, useOutletContext, useParams, useResolvedPath, useRevalidator, useRouteError, useRouteLoaderData, useRoutes };\n//# sourceMappingURL=index.js.map\n","/**\n * React Router DOM v6.30.1\n *\n * Copyright (c) Remix Software Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { UNSAFE_mapRouteProperties, UNSAFE_logV6DeprecationWarnings, UNSAFE_DataRouterContext, UNSAFE_DataRouterStateContext, Router, UNSAFE_useRoutesImpl, UNSAFE_NavigationContext, useHref, useResolvedPath, useLocation, useNavigate, createPath, UNSAFE_useRouteId, UNSAFE_RouteContext, useMatches, useNavigation, useBlocker } from 'react-router';\nexport { AbortedDeferredError, Await, MemoryRouter, Navigate, NavigationType, Outlet, Route, Router, Routes, UNSAFE_DataRouterContext, UNSAFE_DataRouterStateContext, UNSAFE_LocationContext, UNSAFE_NavigationContext, UNSAFE_RouteContext, UNSAFE_useRouteId, createMemoryRouter, createPath, createRoutesFromChildren, createRoutesFromElements, defer, generatePath, isRouteErrorResponse, json, matchPath, matchRoutes, parsePath, redirect, redirectDocument, renderMatches, replace, resolvePath, useActionData, useAsyncError, useAsyncValue, useBlocker, useHref, useInRouterContext, useLoaderData, useLocation, useMatch, useMatches, useNavigate, useNavigation, useNavigationType, useOutlet, useOutletContext, useParams, useResolvedPath, useRevalidator, useRouteError, useRouteLoaderData, useRoutes } from 'react-router';\nimport { stripBasename, UNSAFE_warning, createRouter, createBrowserHistory, createHashHistory, UNSAFE_ErrorResponseImpl, UNSAFE_invariant, joinPaths, IDLE_FETCHER, matchPath } from '@remix-run/router';\nexport { UNSAFE_ErrorResponseImpl } from '@remix-run/router';\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\n\nconst defaultMethod = \"get\";\nconst defaultEncType = \"application/x-www-form-urlencoded\";\nfunction isHtmlElement(object) {\n  return object != null && typeof object.tagName === \"string\";\n}\nfunction isButtonElement(object) {\n  return isHtmlElement(object) && object.tagName.toLowerCase() === \"button\";\n}\nfunction isFormElement(object) {\n  return isHtmlElement(object) && object.tagName.toLowerCase() === \"form\";\n}\nfunction isInputElement(object) {\n  return isHtmlElement(object) && object.tagName.toLowerCase() === \"input\";\n}\nfunction isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\nfunction shouldProcessLinkClick(event, target) {\n  return event.button === 0 && (\n  // Ignore everything but left clicks\n  !target || target === \"_self\") &&\n  // Let browser handle \"target=_blank\" etc.\n  !isModifiedEvent(event) // Ignore clicks with modifier keys\n  ;\n}\n/**\n * Creates a URLSearchParams object using the given initializer.\n *\n * This is identical to `new URLSearchParams(init)` except it also\n * supports arrays as values in the object form of the initializer\n * instead of just strings. This is convenient when you need multiple\n * values for a given key, but don't want to use an array initializer.\n *\n * For example, instead of:\n *\n *   let searchParams = new URLSearchParams([\n *     ['sort', 'name'],\n *     ['sort', 'price']\n *   ]);\n *\n * you can do:\n *\n *   let searchParams = createSearchParams({\n *     sort: ['name', 'price']\n *   });\n */\nfunction createSearchParams(init) {\n  if (init === void 0) {\n    init = \"\";\n  }\n  return new URLSearchParams(typeof init === \"string\" || Array.isArray(init) || init instanceof URLSearchParams ? init : Object.keys(init).reduce((memo, key) => {\n    let value = init[key];\n    return memo.concat(Array.isArray(value) ? value.map(v => [key, v]) : [[key, value]]);\n  }, []));\n}\nfunction getSearchParamsForLocation(locationSearch, defaultSearchParams) {\n  let searchParams = createSearchParams(locationSearch);\n  if (defaultSearchParams) {\n    // Use `defaultSearchParams.forEach(...)` here instead of iterating of\n    // `defaultSearchParams.keys()` to work-around a bug in Firefox related to\n    // web extensions. Relevant Bugzilla tickets:\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1414602\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1023984\n    defaultSearchParams.forEach((_, key) => {\n      if (!searchParams.has(key)) {\n        defaultSearchParams.getAll(key).forEach(value => {\n          searchParams.append(key, value);\n        });\n      }\n    });\n  }\n  return searchParams;\n}\n// One-time check for submitter support\nlet _formDataSupportsSubmitter = null;\nfunction isFormDataSubmitterSupported() {\n  if (_formDataSupportsSubmitter === null) {\n    try {\n      new FormData(document.createElement(\"form\"),\n      // @ts-expect-error if FormData supports the submitter parameter, this will throw\n      0);\n      _formDataSupportsSubmitter = false;\n    } catch (e) {\n      _formDataSupportsSubmitter = true;\n    }\n  }\n  return _formDataSupportsSubmitter;\n}\nconst supportedFormEncTypes = new Set([\"application/x-www-form-urlencoded\", \"multipart/form-data\", \"text/plain\"]);\nfunction getFormEncType(encType) {\n  if (encType != null && !supportedFormEncTypes.has(encType)) {\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(false, \"\\\"\" + encType + \"\\\" is not a valid `encType` for `<Form>`/`<fetcher.Form>` \" + (\"and will default to \\\"\" + defaultEncType + \"\\\"\")) : void 0;\n    return null;\n  }\n  return encType;\n}\nfunction getFormSubmissionInfo(target, basename) {\n  let method;\n  let action;\n  let encType;\n  let formData;\n  let body;\n  if (isFormElement(target)) {\n    // When grabbing the action from the element, it will have had the basename\n    // prefixed to ensure non-JS scenarios work, so strip it since we'll\n    // re-prefix in the router\n    let attr = target.getAttribute(\"action\");\n    action = attr ? stripBasename(attr, basename) : null;\n    method = target.getAttribute(\"method\") || defaultMethod;\n    encType = getFormEncType(target.getAttribute(\"enctype\")) || defaultEncType;\n    formData = new FormData(target);\n  } else if (isButtonElement(target) || isInputElement(target) && (target.type === \"submit\" || target.type === \"image\")) {\n    let form = target.form;\n    if (form == null) {\n      throw new Error(\"Cannot submit a <button> or <input type=\\\"submit\\\"> without a <form>\");\n    }\n    // <button>/<input type=\"submit\"> may override attributes of <form>\n    // When grabbing the action from the element, it will have had the basename\n    // prefixed to ensure non-JS scenarios work, so strip it since we'll\n    // re-prefix in the router\n    let attr = target.getAttribute(\"formaction\") || form.getAttribute(\"action\");\n    action = attr ? stripBasename(attr, basename) : null;\n    method = target.getAttribute(\"formmethod\") || form.getAttribute(\"method\") || defaultMethod;\n    encType = getFormEncType(target.getAttribute(\"formenctype\")) || getFormEncType(form.getAttribute(\"enctype\")) || defaultEncType;\n    // Build a FormData object populated from a form and submitter\n    formData = new FormData(form, target);\n    // If this browser doesn't support the `FormData(el, submitter)` format,\n    // then tack on the submitter value at the end.  This is a lightweight\n    // solution that is not 100% spec compliant.  For complete support in older\n    // browsers, consider using the `formdata-submitter-polyfill` package\n    if (!isFormDataSubmitterSupported()) {\n      let {\n        name,\n        type,\n        value\n      } = target;\n      if (type === \"image\") {\n        let prefix = name ? name + \".\" : \"\";\n        formData.append(prefix + \"x\", \"0\");\n        formData.append(prefix + \"y\", \"0\");\n      } else if (name) {\n        formData.append(name, value);\n      }\n    }\n  } else if (isHtmlElement(target)) {\n    throw new Error(\"Cannot submit element that is not <form>, <button>, or \" + \"<input type=\\\"submit|image\\\">\");\n  } else {\n    method = defaultMethod;\n    action = null;\n    encType = defaultEncType;\n    body = target;\n  }\n  // Send body for <Form encType=\"text/plain\" so we encode it into text\n  if (formData && encType === \"text/plain\") {\n    body = formData;\n    formData = undefined;\n  }\n  return {\n    action,\n    method: method.toLowerCase(),\n    encType,\n    formData,\n    body\n  };\n}\n\nconst _excluded = [\"onClick\", \"relative\", \"reloadDocument\", \"replace\", \"state\", \"target\", \"to\", \"preventScrollReset\", \"viewTransition\"],\n  _excluded2 = [\"aria-current\", \"caseSensitive\", \"className\", \"end\", \"style\", \"to\", \"viewTransition\", \"children\"],\n  _excluded3 = [\"fetcherKey\", \"navigate\", \"reloadDocument\", \"replace\", \"state\", \"method\", \"action\", \"onSubmit\", \"relative\", \"preventScrollReset\", \"viewTransition\"];\n// HEY YOU! DON'T TOUCH THIS VARIABLE!\n//\n// It is replaced with the proper version at build time via a babel plugin in\n// the rollup config.\n//\n// Export a global property onto the window for React Router detection by the\n// Core Web Vitals Technology Report.  This way they can configure the `wappalyzer`\n// to detect and properly classify live websites as being built with React Router:\n// https://github.com/HTTPArchive/wappalyzer/blob/main/src/technologies/r.json\nconst REACT_ROUTER_VERSION = \"6\";\ntry {\n  window.__reactRouterVersion = REACT_ROUTER_VERSION;\n} catch (e) {\n  // no-op\n}\nfunction createBrowserRouter(routes, opts) {\n  return createRouter({\n    basename: opts == null ? void 0 : opts.basename,\n    future: _extends({}, opts == null ? void 0 : opts.future, {\n      v7_prependBasename: true\n    }),\n    history: createBrowserHistory({\n      window: opts == null ? void 0 : opts.window\n    }),\n    hydrationData: (opts == null ? void 0 : opts.hydrationData) || parseHydrationData(),\n    routes,\n    mapRouteProperties: UNSAFE_mapRouteProperties,\n    dataStrategy: opts == null ? void 0 : opts.dataStrategy,\n    patchRoutesOnNavigation: opts == null ? void 0 : opts.patchRoutesOnNavigation,\n    window: opts == null ? void 0 : opts.window\n  }).initialize();\n}\nfunction createHashRouter(routes, opts) {\n  return createRouter({\n    basename: opts == null ? void 0 : opts.basename,\n    future: _extends({}, opts == null ? void 0 : opts.future, {\n      v7_prependBasename: true\n    }),\n    history: createHashHistory({\n      window: opts == null ? void 0 : opts.window\n    }),\n    hydrationData: (opts == null ? void 0 : opts.hydrationData) || parseHydrationData(),\n    routes,\n    mapRouteProperties: UNSAFE_mapRouteProperties,\n    dataStrategy: opts == null ? void 0 : opts.dataStrategy,\n    patchRoutesOnNavigation: opts == null ? void 0 : opts.patchRoutesOnNavigation,\n    window: opts == null ? void 0 : opts.window\n  }).initialize();\n}\nfunction parseHydrationData() {\n  var _window;\n  let state = (_window = window) == null ? void 0 : _window.__staticRouterHydrationData;\n  if (state && state.errors) {\n    state = _extends({}, state, {\n      errors: deserializeErrors(state.errors)\n    });\n  }\n  return state;\n}\nfunction deserializeErrors(errors) {\n  if (!errors) return null;\n  let entries = Object.entries(errors);\n  let serialized = {};\n  for (let [key, val] of entries) {\n    // Hey you!  If you change this, please change the corresponding logic in\n    // serializeErrors in react-router-dom/server.tsx :)\n    if (val && val.__type === \"RouteErrorResponse\") {\n      serialized[key] = new UNSAFE_ErrorResponseImpl(val.status, val.statusText, val.data, val.internal === true);\n    } else if (val && val.__type === \"Error\") {\n      // Attempt to reconstruct the right type of Error (i.e., ReferenceError)\n      if (val.__subType) {\n        let ErrorConstructor = window[val.__subType];\n        if (typeof ErrorConstructor === \"function\") {\n          try {\n            // @ts-expect-error\n            let error = new ErrorConstructor(val.message);\n            // Wipe away the client-side stack trace.  Nothing to fill it in with\n            // because we don't serialize SSR stack traces for security reasons\n            error.stack = \"\";\n            serialized[key] = error;\n          } catch (e) {\n            // no-op - fall through and create a normal Error\n          }\n        }\n      }\n      if (serialized[key] == null) {\n        let error = new Error(val.message);\n        // Wipe away the client-side stack trace.  Nothing to fill it in with\n        // because we don't serialize SSR stack traces for security reasons\n        error.stack = \"\";\n        serialized[key] = error;\n      }\n    } else {\n      serialized[key] = val;\n    }\n  }\n  return serialized;\n}\nconst ViewTransitionContext = /*#__PURE__*/React.createContext({\n  isTransitioning: false\n});\nif (process.env.NODE_ENV !== \"production\") {\n  ViewTransitionContext.displayName = \"ViewTransition\";\n}\nconst FetchersContext = /*#__PURE__*/React.createContext(new Map());\nif (process.env.NODE_ENV !== \"production\") {\n  FetchersContext.displayName = \"Fetchers\";\n}\n//#endregion\n////////////////////////////////////////////////////////////////////////////////\n//#region Components\n////////////////////////////////////////////////////////////////////////////////\n/**\n  Webpack + React 17 fails to compile on any of the following because webpack\n  complains that `startTransition` doesn't exist in `React`:\n  * import { startTransition } from \"react\"\n  * import * as React from from \"react\";\n    \"startTransition\" in React ? React.startTransition(() => setState()) : setState()\n  * import * as React from from \"react\";\n    \"startTransition\" in React ? React[\"startTransition\"](() => setState()) : setState()\n\n  Moving it to a constant such as the following solves the Webpack/React 17 issue:\n  * import * as React from from \"react\";\n    const START_TRANSITION = \"startTransition\";\n    START_TRANSITION in React ? React[START_TRANSITION](() => setState()) : setState()\n\n  However, that introduces webpack/terser minification issues in production builds\n  in React 18 where minification/obfuscation ends up removing the call of\n  React.startTransition entirely from the first half of the ternary.  Grabbing\n  this exported reference once up front resolves that issue.\n\n  See https://github.com/remix-run/react-router/issues/10579\n*/\nconst START_TRANSITION = \"startTransition\";\nconst startTransitionImpl = React[START_TRANSITION];\nconst FLUSH_SYNC = \"flushSync\";\nconst flushSyncImpl = ReactDOM[FLUSH_SYNC];\nconst USE_ID = \"useId\";\nconst useIdImpl = React[USE_ID];\nfunction startTransitionSafe(cb) {\n  if (startTransitionImpl) {\n    startTransitionImpl(cb);\n  } else {\n    cb();\n  }\n}\nfunction flushSyncSafe(cb) {\n  if (flushSyncImpl) {\n    flushSyncImpl(cb);\n  } else {\n    cb();\n  }\n}\nclass Deferred {\n  constructor() {\n    this.status = \"pending\";\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = value => {\n        if (this.status === \"pending\") {\n          this.status = \"resolved\";\n          resolve(value);\n        }\n      };\n      this.reject = reason => {\n        if (this.status === \"pending\") {\n          this.status = \"rejected\";\n          reject(reason);\n        }\n      };\n    });\n  }\n}\n/**\n * Given a Remix Router instance, render the appropriate UI\n */\nfunction RouterProvider(_ref) {\n  let {\n    fallbackElement,\n    router,\n    future\n  } = _ref;\n  let [state, setStateImpl] = React.useState(router.state);\n  let [pendingState, setPendingState] = React.useState();\n  let [vtContext, setVtContext] = React.useState({\n    isTransitioning: false\n  });\n  let [renderDfd, setRenderDfd] = React.useState();\n  let [transition, setTransition] = React.useState();\n  let [interruption, setInterruption] = React.useState();\n  let fetcherData = React.useRef(new Map());\n  let {\n    v7_startTransition\n  } = future || {};\n  let optInStartTransition = React.useCallback(cb => {\n    if (v7_startTransition) {\n      startTransitionSafe(cb);\n    } else {\n      cb();\n    }\n  }, [v7_startTransition]);\n  let setState = React.useCallback((newState, _ref2) => {\n    let {\n      deletedFetchers,\n      flushSync: flushSync,\n      viewTransitionOpts: viewTransitionOpts\n    } = _ref2;\n    newState.fetchers.forEach((fetcher, key) => {\n      if (fetcher.data !== undefined) {\n        fetcherData.current.set(key, fetcher.data);\n      }\n    });\n    deletedFetchers.forEach(key => fetcherData.current.delete(key));\n    let isViewTransitionUnavailable = router.window == null || router.window.document == null || typeof router.window.document.startViewTransition !== \"function\";\n    // If this isn't a view transition or it's not available in this browser,\n    // just update and be done with it\n    if (!viewTransitionOpts || isViewTransitionUnavailable) {\n      if (flushSync) {\n        flushSyncSafe(() => setStateImpl(newState));\n      } else {\n        optInStartTransition(() => setStateImpl(newState));\n      }\n      return;\n    }\n    // flushSync + startViewTransition\n    if (flushSync) {\n      // Flush through the context to mark DOM elements as transition=ing\n      flushSyncSafe(() => {\n        // Cancel any pending transitions\n        if (transition) {\n          renderDfd && renderDfd.resolve();\n          transition.skipTransition();\n        }\n        setVtContext({\n          isTransitioning: true,\n          flushSync: true,\n          currentLocation: viewTransitionOpts.currentLocation,\n          nextLocation: viewTransitionOpts.nextLocation\n        });\n      });\n      // Update the DOM\n      let t = router.window.document.startViewTransition(() => {\n        flushSyncSafe(() => setStateImpl(newState));\n      });\n      // Clean up after the animation completes\n      t.finished.finally(() => {\n        flushSyncSafe(() => {\n          setRenderDfd(undefined);\n          setTransition(undefined);\n          setPendingState(undefined);\n          setVtContext({\n            isTransitioning: false\n          });\n        });\n      });\n      flushSyncSafe(() => setTransition(t));\n      return;\n    }\n    // startTransition + startViewTransition\n    if (transition) {\n      // Interrupting an in-progress transition, cancel and let everything flush\n      // out, and then kick off a new transition from the interruption state\n      renderDfd && renderDfd.resolve();\n      transition.skipTransition();\n      setInterruption({\n        state: newState,\n        currentLocation: viewTransitionOpts.currentLocation,\n        nextLocation: viewTransitionOpts.nextLocation\n      });\n    } else {\n      // Completed navigation update with opted-in view transitions, let 'er rip\n      setPendingState(newState);\n      setVtContext({\n        isTransitioning: true,\n        flushSync: false,\n        currentLocation: viewTransitionOpts.currentLocation,\n        nextLocation: viewTransitionOpts.nextLocation\n      });\n    }\n  }, [router.window, transition, renderDfd, fetcherData, optInStartTransition]);\n  // Need to use a layout effect here so we are subscribed early enough to\n  // pick up on any render-driven redirects/navigations (useEffect/<Navigate>)\n  React.useLayoutEffect(() => router.subscribe(setState), [router, setState]);\n  // When we start a view transition, create a Deferred we can use for the\n  // eventual \"completed\" render\n  React.useEffect(() => {\n    if (vtContext.isTransitioning && !vtContext.flushSync) {\n      setRenderDfd(new Deferred());\n    }\n  }, [vtContext]);\n  // Once the deferred is created, kick off startViewTransition() to update the\n  // DOM and then wait on the Deferred to resolve (indicating the DOM update has\n  // happened)\n  React.useEffect(() => {\n    if (renderDfd && pendingState && router.window) {\n      let newState = pendingState;\n      let renderPromise = renderDfd.promise;\n      let transition = router.window.document.startViewTransition(async () => {\n        optInStartTransition(() => setStateImpl(newState));\n        await renderPromise;\n      });\n      transition.finished.finally(() => {\n        setRenderDfd(undefined);\n        setTransition(undefined);\n        setPendingState(undefined);\n        setVtContext({\n          isTransitioning: false\n        });\n      });\n      setTransition(transition);\n    }\n  }, [optInStartTransition, pendingState, renderDfd, router.window]);\n  // When the new location finally renders and is committed to the DOM, this\n  // effect will run to resolve the transition\n  React.useEffect(() => {\n    if (renderDfd && pendingState && state.location.key === pendingState.location.key) {\n      renderDfd.resolve();\n    }\n  }, [renderDfd, transition, state.location, pendingState]);\n  // If we get interrupted with a new navigation during a transition, we skip\n  // the active transition, let it cleanup, then kick it off again here\n  React.useEffect(() => {\n    if (!vtContext.isTransitioning && interruption) {\n      setPendingState(interruption.state);\n      setVtContext({\n        isTransitioning: true,\n        flushSync: false,\n        currentLocation: interruption.currentLocation,\n        nextLocation: interruption.nextLocation\n      });\n      setInterruption(undefined);\n    }\n  }, [vtContext.isTransitioning, interruption]);\n  React.useEffect(() => {\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(fallbackElement == null || !router.future.v7_partialHydration, \"`<RouterProvider fallbackElement>` is deprecated when using \" + \"`v7_partialHydration`, use a `HydrateFallback` component instead\") : void 0;\n    // Only log this once on initial mount\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  let navigator = React.useMemo(() => {\n    return {\n      createHref: router.createHref,\n      encodeLocation: router.encodeLocation,\n      go: n => router.navigate(n),\n      push: (to, state, opts) => router.navigate(to, {\n        state,\n        preventScrollReset: opts == null ? void 0 : opts.preventScrollReset\n      }),\n      replace: (to, state, opts) => router.navigate(to, {\n        replace: true,\n        state,\n        preventScrollReset: opts == null ? void 0 : opts.preventScrollReset\n      })\n    };\n  }, [router]);\n  let basename = router.basename || \"/\";\n  let dataRouterContext = React.useMemo(() => ({\n    router,\n    navigator,\n    static: false,\n    basename\n  }), [router, navigator, basename]);\n  let routerFuture = React.useMemo(() => ({\n    v7_relativeSplatPath: router.future.v7_relativeSplatPath\n  }), [router.future.v7_relativeSplatPath]);\n  React.useEffect(() => UNSAFE_logV6DeprecationWarnings(future, router.future), [future, router.future]);\n  // The fragment and {null} here are important!  We need them to keep React 18's\n  // useId happy when we are server-rendering since we may have a <script> here\n  // containing the hydrated server-side staticContext (from StaticRouterProvider).\n  // useId relies on the component tree structure to generate deterministic id's\n  // so we need to ensure it remains the same on the client even though\n  // we don't need the <script> tag\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(UNSAFE_DataRouterContext.Provider, {\n    value: dataRouterContext\n  }, /*#__PURE__*/React.createElement(UNSAFE_DataRouterStateContext.Provider, {\n    value: state\n  }, /*#__PURE__*/React.createElement(FetchersContext.Provider, {\n    value: fetcherData.current\n  }, /*#__PURE__*/React.createElement(ViewTransitionContext.Provider, {\n    value: vtContext\n  }, /*#__PURE__*/React.createElement(Router, {\n    basename: basename,\n    location: state.location,\n    navigationType: state.historyAction,\n    navigator: navigator,\n    future: routerFuture\n  }, state.initialized || router.future.v7_partialHydration ? /*#__PURE__*/React.createElement(MemoizedDataRoutes, {\n    routes: router.routes,\n    future: router.future,\n    state: state\n  }) : fallbackElement))))), null);\n}\n// Memoize to avoid re-renders when updating `ViewTransitionContext`\nconst MemoizedDataRoutes = /*#__PURE__*/React.memo(DataRoutes);\nfunction DataRoutes(_ref3) {\n  let {\n    routes,\n    future,\n    state\n  } = _ref3;\n  return UNSAFE_useRoutesImpl(routes, undefined, state, future);\n}\n/**\n * A `<Router>` for use in web browsers. Provides the cleanest URLs.\n */\nfunction BrowserRouter(_ref4) {\n  let {\n    basename,\n    children,\n    future,\n    window\n  } = _ref4;\n  let historyRef = React.useRef();\n  if (historyRef.current == null) {\n    historyRef.current = createBrowserHistory({\n      window,\n      v5Compat: true\n    });\n  }\n  let history = historyRef.current;\n  let [state, setStateImpl] = React.useState({\n    action: history.action,\n    location: history.location\n  });\n  let {\n    v7_startTransition\n  } = future || {};\n  let setState = React.useCallback(newState => {\n    v7_startTransition && startTransitionImpl ? startTransitionImpl(() => setStateImpl(newState)) : setStateImpl(newState);\n  }, [setStateImpl, v7_startTransition]);\n  React.useLayoutEffect(() => history.listen(setState), [history, setState]);\n  React.useEffect(() => UNSAFE_logV6DeprecationWarnings(future), [future]);\n  return /*#__PURE__*/React.createElement(Router, {\n    basename: basename,\n    children: children,\n    location: state.location,\n    navigationType: state.action,\n    navigator: history,\n    future: future\n  });\n}\n/**\n * A `<Router>` for use in web browsers. Stores the location in the hash\n * portion of the URL so it is not sent to the server.\n */\nfunction HashRouter(_ref5) {\n  let {\n    basename,\n    children,\n    future,\n    window\n  } = _ref5;\n  let historyRef = React.useRef();\n  if (historyRef.current == null) {\n    historyRef.current = createHashHistory({\n      window,\n      v5Compat: true\n    });\n  }\n  let history = historyRef.current;\n  let [state, setStateImpl] = React.useState({\n    action: history.action,\n    location: history.location\n  });\n  let {\n    v7_startTransition\n  } = future || {};\n  let setState = React.useCallback(newState => {\n    v7_startTransition && startTransitionImpl ? startTransitionImpl(() => setStateImpl(newState)) : setStateImpl(newState);\n  }, [setStateImpl, v7_startTransition]);\n  React.useLayoutEffect(() => history.listen(setState), [history, setState]);\n  React.useEffect(() => UNSAFE_logV6DeprecationWarnings(future), [future]);\n  return /*#__PURE__*/React.createElement(Router, {\n    basename: basename,\n    children: children,\n    location: state.location,\n    navigationType: state.action,\n    navigator: history,\n    future: future\n  });\n}\n/**\n * A `<Router>` that accepts a pre-instantiated history object. It's important\n * to note that using your own history object is highly discouraged and may add\n * two versions of the history library to your bundles unless you use the same\n * version of the history library that React Router uses internally.\n */\nfunction HistoryRouter(_ref6) {\n  let {\n    basename,\n    children,\n    future,\n    history\n  } = _ref6;\n  let [state, setStateImpl] = React.useState({\n    action: history.action,\n    location: history.location\n  });\n  let {\n    v7_startTransition\n  } = future || {};\n  let setState = React.useCallback(newState => {\n    v7_startTransition && startTransitionImpl ? startTransitionImpl(() => setStateImpl(newState)) : setStateImpl(newState);\n  }, [setStateImpl, v7_startTransition]);\n  React.useLayoutEffect(() => history.listen(setState), [history, setState]);\n  React.useEffect(() => UNSAFE_logV6DeprecationWarnings(future), [future]);\n  return /*#__PURE__*/React.createElement(Router, {\n    basename: basename,\n    children: children,\n    location: state.location,\n    navigationType: state.action,\n    navigator: history,\n    future: future\n  });\n}\nif (process.env.NODE_ENV !== \"production\") {\n  HistoryRouter.displayName = \"unstable_HistoryRouter\";\n}\nconst isBrowser = typeof window !== \"undefined\" && typeof window.document !== \"undefined\" && typeof window.document.createElement !== \"undefined\";\nconst ABSOLUTE_URL_REGEX = /^(?:[a-z][a-z0-9+.-]*:|\\/\\/)/i;\n/**\n * The public API for rendering a history-aware `<a>`.\n */\nconst Link = /*#__PURE__*/React.forwardRef(function LinkWithRef(_ref7, ref) {\n  let {\n      onClick,\n      relative,\n      reloadDocument,\n      replace,\n      state,\n      target,\n      to,\n      preventScrollReset,\n      viewTransition\n    } = _ref7,\n    rest = _objectWithoutPropertiesLoose(_ref7, _excluded);\n  let {\n    basename\n  } = React.useContext(UNSAFE_NavigationContext);\n  // Rendered into <a href> for absolute URLs\n  let absoluteHref;\n  let isExternal = false;\n  if (typeof to === \"string\" && ABSOLUTE_URL_REGEX.test(to)) {\n    // Render the absolute href server- and client-side\n    absoluteHref = to;\n    // Only check for external origins client-side\n    if (isBrowser) {\n      try {\n        let currentUrl = new URL(window.location.href);\n        let targetUrl = to.startsWith(\"//\") ? new URL(currentUrl.protocol + to) : new URL(to);\n        let path = stripBasename(targetUrl.pathname, basename);\n        if (targetUrl.origin === currentUrl.origin && path != null) {\n          // Strip the protocol/origin/basename for same-origin absolute URLs\n          to = path + targetUrl.search + targetUrl.hash;\n        } else {\n          isExternal = true;\n        }\n      } catch (e) {\n        // We can't do external URL detection without a valid URL\n        process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(false, \"<Link to=\\\"\" + to + \"\\\"> contains an invalid URL which will probably break \" + \"when clicked - please update to a valid URL path.\") : void 0;\n      }\n    }\n  }\n  // Rendered into <a href> for relative URLs\n  let href = useHref(to, {\n    relative\n  });\n  let internalOnClick = useLinkClickHandler(to, {\n    replace,\n    state,\n    target,\n    preventScrollReset,\n    relative,\n    viewTransition\n  });\n  function handleClick(event) {\n    if (onClick) onClick(event);\n    if (!event.defaultPrevented) {\n      internalOnClick(event);\n    }\n  }\n  return (\n    /*#__PURE__*/\n    // eslint-disable-next-line jsx-a11y/anchor-has-content\n    React.createElement(\"a\", _extends({}, rest, {\n      href: absoluteHref || href,\n      onClick: isExternal || reloadDocument ? onClick : handleClick,\n      ref: ref,\n      target: target\n    }))\n  );\n});\nif (process.env.NODE_ENV !== \"production\") {\n  Link.displayName = \"Link\";\n}\n/**\n * A `<Link>` wrapper that knows if it's \"active\" or not.\n */\nconst NavLink = /*#__PURE__*/React.forwardRef(function NavLinkWithRef(_ref8, ref) {\n  let {\n      \"aria-current\": ariaCurrentProp = \"page\",\n      caseSensitive = false,\n      className: classNameProp = \"\",\n      end = false,\n      style: styleProp,\n      to,\n      viewTransition,\n      children\n    } = _ref8,\n    rest = _objectWithoutPropertiesLoose(_ref8, _excluded2);\n  let path = useResolvedPath(to, {\n    relative: rest.relative\n  });\n  let location = useLocation();\n  let routerState = React.useContext(UNSAFE_DataRouterStateContext);\n  let {\n    navigator,\n    basename\n  } = React.useContext(UNSAFE_NavigationContext);\n  let isTransitioning = routerState != null &&\n  // Conditional usage is OK here because the usage of a data router is static\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  useViewTransitionState(path) && viewTransition === true;\n  let toPathname = navigator.encodeLocation ? navigator.encodeLocation(path).pathname : path.pathname;\n  let locationPathname = location.pathname;\n  let nextLocationPathname = routerState && routerState.navigation && routerState.navigation.location ? routerState.navigation.location.pathname : null;\n  if (!caseSensitive) {\n    locationPathname = locationPathname.toLowerCase();\n    nextLocationPathname = nextLocationPathname ? nextLocationPathname.toLowerCase() : null;\n    toPathname = toPathname.toLowerCase();\n  }\n  if (nextLocationPathname && basename) {\n    nextLocationPathname = stripBasename(nextLocationPathname, basename) || nextLocationPathname;\n  }\n  // If the `to` has a trailing slash, look at that exact spot.  Otherwise,\n  // we're looking for a slash _after_ what's in `to`.  For example:\n  //\n  // <NavLink to=\"/users\"> and <NavLink to=\"/users/\">\n  // both want to look for a / at index 6 to match URL `/users/matt`\n  const endSlashPosition = toPathname !== \"/\" && toPathname.endsWith(\"/\") ? toPathname.length - 1 : toPathname.length;\n  let isActive = locationPathname === toPathname || !end && locationPathname.startsWith(toPathname) && locationPathname.charAt(endSlashPosition) === \"/\";\n  let isPending = nextLocationPathname != null && (nextLocationPathname === toPathname || !end && nextLocationPathname.startsWith(toPathname) && nextLocationPathname.charAt(toPathname.length) === \"/\");\n  let renderProps = {\n    isActive,\n    isPending,\n    isTransitioning\n  };\n  let ariaCurrent = isActive ? ariaCurrentProp : undefined;\n  let className;\n  if (typeof classNameProp === \"function\") {\n    className = classNameProp(renderProps);\n  } else {\n    // If the className prop is not a function, we use a default `active`\n    // class for <NavLink />s that are active. In v5 `active` was the default\n    // value for `activeClassName`, but we are removing that API and can still\n    // use the old default behavior for a cleaner upgrade path and keep the\n    // simple styling rules working as they currently do.\n    className = [classNameProp, isActive ? \"active\" : null, isPending ? \"pending\" : null, isTransitioning ? \"transitioning\" : null].filter(Boolean).join(\" \");\n  }\n  let style = typeof styleProp === \"function\" ? styleProp(renderProps) : styleProp;\n  return /*#__PURE__*/React.createElement(Link, _extends({}, rest, {\n    \"aria-current\": ariaCurrent,\n    className: className,\n    ref: ref,\n    style: style,\n    to: to,\n    viewTransition: viewTransition\n  }), typeof children === \"function\" ? children(renderProps) : children);\n});\nif (process.env.NODE_ENV !== \"production\") {\n  NavLink.displayName = \"NavLink\";\n}\n/**\n * A `@remix-run/router`-aware `<form>`. It behaves like a normal form except\n * that the interaction with the server is with `fetch` instead of new document\n * requests, allowing components to add nicer UX to the page as the form is\n * submitted and returns with data.\n */\nconst Form = /*#__PURE__*/React.forwardRef((_ref9, forwardedRef) => {\n  let {\n      fetcherKey,\n      navigate,\n      reloadDocument,\n      replace,\n      state,\n      method = defaultMethod,\n      action,\n      onSubmit,\n      relative,\n      preventScrollReset,\n      viewTransition\n    } = _ref9,\n    props = _objectWithoutPropertiesLoose(_ref9, _excluded3);\n  let submit = useSubmit();\n  let formAction = useFormAction(action, {\n    relative\n  });\n  let formMethod = method.toLowerCase() === \"get\" ? \"get\" : \"post\";\n  let submitHandler = event => {\n    onSubmit && onSubmit(event);\n    if (event.defaultPrevented) return;\n    event.preventDefault();\n    let submitter = event.nativeEvent.submitter;\n    let submitMethod = (submitter == null ? void 0 : submitter.getAttribute(\"formmethod\")) || method;\n    submit(submitter || event.currentTarget, {\n      fetcherKey,\n      method: submitMethod,\n      navigate,\n      replace,\n      state,\n      relative,\n      preventScrollReset,\n      viewTransition\n    });\n  };\n  return /*#__PURE__*/React.createElement(\"form\", _extends({\n    ref: forwardedRef,\n    method: formMethod,\n    action: formAction,\n    onSubmit: reloadDocument ? onSubmit : submitHandler\n  }, props));\n});\nif (process.env.NODE_ENV !== \"production\") {\n  Form.displayName = \"Form\";\n}\n/**\n * This component will emulate the browser's scroll restoration on location\n * changes.\n */\nfunction ScrollRestoration(_ref10) {\n  let {\n    getKey,\n    storageKey\n  } = _ref10;\n  useScrollRestoration({\n    getKey,\n    storageKey\n  });\n  return null;\n}\nif (process.env.NODE_ENV !== \"production\") {\n  ScrollRestoration.displayName = \"ScrollRestoration\";\n}\n//#endregion\n////////////////////////////////////////////////////////////////////////////////\n//#region Hooks\n////////////////////////////////////////////////////////////////////////////////\nvar DataRouterHook;\n(function (DataRouterHook) {\n  DataRouterHook[\"UseScrollRestoration\"] = \"useScrollRestoration\";\n  DataRouterHook[\"UseSubmit\"] = \"useSubmit\";\n  DataRouterHook[\"UseSubmitFetcher\"] = \"useSubmitFetcher\";\n  DataRouterHook[\"UseFetcher\"] = \"useFetcher\";\n  DataRouterHook[\"useViewTransitionState\"] = \"useViewTransitionState\";\n})(DataRouterHook || (DataRouterHook = {}));\nvar DataRouterStateHook;\n(function (DataRouterStateHook) {\n  DataRouterStateHook[\"UseFetcher\"] = \"useFetcher\";\n  DataRouterStateHook[\"UseFetchers\"] = \"useFetchers\";\n  DataRouterStateHook[\"UseScrollRestoration\"] = \"useScrollRestoration\";\n})(DataRouterStateHook || (DataRouterStateHook = {}));\n// Internal hooks\nfunction getDataRouterConsoleError(hookName) {\n  return hookName + \" must be used within a data router.  See https://reactrouter.com/v6/routers/picking-a-router.\";\n}\nfunction useDataRouterContext(hookName) {\n  let ctx = React.useContext(UNSAFE_DataRouterContext);\n  !ctx ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, getDataRouterConsoleError(hookName)) : UNSAFE_invariant(false) : void 0;\n  return ctx;\n}\nfunction useDataRouterState(hookName) {\n  let state = React.useContext(UNSAFE_DataRouterStateContext);\n  !state ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, getDataRouterConsoleError(hookName)) : UNSAFE_invariant(false) : void 0;\n  return state;\n}\n// External hooks\n/**\n * Handles the click behavior for router `<Link>` components. This is useful if\n * you need to create custom `<Link>` components with the same click behavior we\n * use in our exported `<Link>`.\n */\nfunction useLinkClickHandler(to, _temp) {\n  let {\n    target,\n    replace: replaceProp,\n    state,\n    preventScrollReset,\n    relative,\n    viewTransition\n  } = _temp === void 0 ? {} : _temp;\n  let navigate = useNavigate();\n  let location = useLocation();\n  let path = useResolvedPath(to, {\n    relative\n  });\n  return React.useCallback(event => {\n    if (shouldProcessLinkClick(event, target)) {\n      event.preventDefault();\n      // If the URL hasn't changed, a regular <a> will do a replace instead of\n      // a push, so do the same here unless the replace prop is explicitly set\n      let replace = replaceProp !== undefined ? replaceProp : createPath(location) === createPath(path);\n      navigate(to, {\n        replace,\n        state,\n        preventScrollReset,\n        relative,\n        viewTransition\n      });\n    }\n  }, [location, navigate, path, replaceProp, state, target, to, preventScrollReset, relative, viewTransition]);\n}\n/**\n * A convenient wrapper for reading and writing search parameters via the\n * URLSearchParams interface.\n */\nfunction useSearchParams(defaultInit) {\n  process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(typeof URLSearchParams !== \"undefined\", \"You cannot use the `useSearchParams` hook in a browser that does not \" + \"support the URLSearchParams API. If you need to support Internet \" + \"Explorer 11, we recommend you load a polyfill such as \" + \"https://github.com/ungap/url-search-params.\") : void 0;\n  let defaultSearchParamsRef = React.useRef(createSearchParams(defaultInit));\n  let hasSetSearchParamsRef = React.useRef(false);\n  let location = useLocation();\n  let searchParams = React.useMemo(() =>\n  // Only merge in the defaults if we haven't yet called setSearchParams.\n  // Once we call that we want those to take precedence, otherwise you can't\n  // remove a param with setSearchParams({}) if it has an initial value\n  getSearchParamsForLocation(location.search, hasSetSearchParamsRef.current ? null : defaultSearchParamsRef.current), [location.search]);\n  let navigate = useNavigate();\n  let setSearchParams = React.useCallback((nextInit, navigateOptions) => {\n    const newSearchParams = createSearchParams(typeof nextInit === \"function\" ? nextInit(searchParams) : nextInit);\n    hasSetSearchParamsRef.current = true;\n    navigate(\"?\" + newSearchParams, navigateOptions);\n  }, [navigate, searchParams]);\n  return [searchParams, setSearchParams];\n}\nfunction validateClientSideSubmission() {\n  if (typeof document === \"undefined\") {\n    throw new Error(\"You are calling submit during the server render. \" + \"Try calling submit within a `useEffect` or callback instead.\");\n  }\n}\nlet fetcherId = 0;\nlet getUniqueFetcherId = () => \"__\" + String(++fetcherId) + \"__\";\n/**\n * Returns a function that may be used to programmatically submit a form (or\n * some arbitrary data) to the server.\n */\nfunction useSubmit() {\n  let {\n    router\n  } = useDataRouterContext(DataRouterHook.UseSubmit);\n  let {\n    basename\n  } = React.useContext(UNSAFE_NavigationContext);\n  let currentRouteId = UNSAFE_useRouteId();\n  return React.useCallback(function (target, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    validateClientSideSubmission();\n    let {\n      action,\n      method,\n      encType,\n      formData,\n      body\n    } = getFormSubmissionInfo(target, basename);\n    if (options.navigate === false) {\n      let key = options.fetcherKey || getUniqueFetcherId();\n      router.fetch(key, currentRouteId, options.action || action, {\n        preventScrollReset: options.preventScrollReset,\n        formData,\n        body,\n        formMethod: options.method || method,\n        formEncType: options.encType || encType,\n        flushSync: options.flushSync\n      });\n    } else {\n      router.navigate(options.action || action, {\n        preventScrollReset: options.preventScrollReset,\n        formData,\n        body,\n        formMethod: options.method || method,\n        formEncType: options.encType || encType,\n        replace: options.replace,\n        state: options.state,\n        fromRouteId: currentRouteId,\n        flushSync: options.flushSync,\n        viewTransition: options.viewTransition\n      });\n    }\n  }, [router, basename, currentRouteId]);\n}\n// v7: Eventually we should deprecate this entirely in favor of using the\n// router method directly?\nfunction useFormAction(action, _temp2) {\n  let {\n    relative\n  } = _temp2 === void 0 ? {} : _temp2;\n  let {\n    basename\n  } = React.useContext(UNSAFE_NavigationContext);\n  let routeContext = React.useContext(UNSAFE_RouteContext);\n  !routeContext ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"useFormAction must be used inside a RouteContext\") : UNSAFE_invariant(false) : void 0;\n  let [match] = routeContext.matches.slice(-1);\n  // Shallow clone path so we can modify it below, otherwise we modify the\n  // object referenced by useMemo inside useResolvedPath\n  let path = _extends({}, useResolvedPath(action ? action : \".\", {\n    relative\n  }));\n  // If no action was specified, browsers will persist current search params\n  // when determining the path, so match that behavior\n  // https://github.com/remix-run/remix/issues/927\n  let location = useLocation();\n  if (action == null) {\n    // Safe to write to this directly here since if action was undefined, we\n    // would have called useResolvedPath(\".\") which will never include a search\n    path.search = location.search;\n    // When grabbing search params from the URL, remove any included ?index param\n    // since it might not apply to our contextual route.  We add it back based\n    // on match.route.index below\n    let params = new URLSearchParams(path.search);\n    let indexValues = params.getAll(\"index\");\n    let hasNakedIndexParam = indexValues.some(v => v === \"\");\n    if (hasNakedIndexParam) {\n      params.delete(\"index\");\n      indexValues.filter(v => v).forEach(v => params.append(\"index\", v));\n      let qs = params.toString();\n      path.search = qs ? \"?\" + qs : \"\";\n    }\n  }\n  if ((!action || action === \".\") && match.route.index) {\n    path.search = path.search ? path.search.replace(/^\\?/, \"?index&\") : \"?index\";\n  }\n  // If we're operating within a basename, prepend it to the pathname prior\n  // to creating the form action.  If this is a root navigation, then just use\n  // the raw basename which allows the basename to have full control over the\n  // presence of a trailing slash on root actions\n  if (basename !== \"/\") {\n    path.pathname = path.pathname === \"/\" ? basename : joinPaths([basename, path.pathname]);\n  }\n  return createPath(path);\n}\n// TODO: (v7) Change the useFetcher generic default from `any` to `unknown`\n/**\n * Interacts with route loaders and actions without causing a navigation. Great\n * for any interaction that stays on the same page.\n */\nfunction useFetcher(_temp3) {\n  var _route$matches;\n  let {\n    key\n  } = _temp3 === void 0 ? {} : _temp3;\n  let {\n    router\n  } = useDataRouterContext(DataRouterHook.UseFetcher);\n  let state = useDataRouterState(DataRouterStateHook.UseFetcher);\n  let fetcherData = React.useContext(FetchersContext);\n  let route = React.useContext(UNSAFE_RouteContext);\n  let routeId = (_route$matches = route.matches[route.matches.length - 1]) == null ? void 0 : _route$matches.route.id;\n  !fetcherData ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"useFetcher must be used inside a FetchersContext\") : UNSAFE_invariant(false) : void 0;\n  !route ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"useFetcher must be used inside a RouteContext\") : UNSAFE_invariant(false) : void 0;\n  !(routeId != null) ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"useFetcher can only be used on routes that contain a unique \\\"id\\\"\") : UNSAFE_invariant(false) : void 0;\n  // Fetcher key handling\n  // OK to call conditionally to feature detect `useId`\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  let defaultKey = useIdImpl ? useIdImpl() : \"\";\n  let [fetcherKey, setFetcherKey] = React.useState(key || defaultKey);\n  if (key && key !== fetcherKey) {\n    setFetcherKey(key);\n  } else if (!fetcherKey) {\n    // We will only fall through here when `useId` is not available\n    setFetcherKey(getUniqueFetcherId());\n  }\n  // Registration/cleanup\n  React.useEffect(() => {\n    router.getFetcher(fetcherKey);\n    return () => {\n      // Tell the router we've unmounted - if v7_fetcherPersist is enabled this\n      // will not delete immediately but instead queue up a delete after the\n      // fetcher returns to an `idle` state\n      router.deleteFetcher(fetcherKey);\n    };\n  }, [router, fetcherKey]);\n  // Fetcher additions\n  let load = React.useCallback((href, opts) => {\n    !routeId ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"No routeId available for fetcher.load()\") : UNSAFE_invariant(false) : void 0;\n    router.fetch(fetcherKey, routeId, href, opts);\n  }, [fetcherKey, routeId, router]);\n  let submitImpl = useSubmit();\n  let submit = React.useCallback((target, opts) => {\n    submitImpl(target, _extends({}, opts, {\n      navigate: false,\n      fetcherKey\n    }));\n  }, [fetcherKey, submitImpl]);\n  let FetcherForm = React.useMemo(() => {\n    let FetcherForm = /*#__PURE__*/React.forwardRef((props, ref) => {\n      return /*#__PURE__*/React.createElement(Form, _extends({}, props, {\n        navigate: false,\n        fetcherKey: fetcherKey,\n        ref: ref\n      }));\n    });\n    if (process.env.NODE_ENV !== \"production\") {\n      FetcherForm.displayName = \"fetcher.Form\";\n    }\n    return FetcherForm;\n  }, [fetcherKey]);\n  // Exposed FetcherWithComponents\n  let fetcher = state.fetchers.get(fetcherKey) || IDLE_FETCHER;\n  let data = fetcherData.get(fetcherKey);\n  let fetcherWithComponents = React.useMemo(() => _extends({\n    Form: FetcherForm,\n    submit,\n    load\n  }, fetcher, {\n    data\n  }), [FetcherForm, submit, load, fetcher, data]);\n  return fetcherWithComponents;\n}\n/**\n * Provides all fetchers currently on the page. Useful for layouts and parent\n * routes that need to provide pending/optimistic UI regarding the fetch.\n */\nfunction useFetchers() {\n  let state = useDataRouterState(DataRouterStateHook.UseFetchers);\n  return Array.from(state.fetchers.entries()).map(_ref11 => {\n    let [key, fetcher] = _ref11;\n    return _extends({}, fetcher, {\n      key\n    });\n  });\n}\nconst SCROLL_RESTORATION_STORAGE_KEY = \"react-router-scroll-positions\";\nlet savedScrollPositions = {};\n/**\n * When rendered inside a RouterProvider, will restore scroll positions on navigations\n */\nfunction useScrollRestoration(_temp4) {\n  let {\n    getKey,\n    storageKey\n  } = _temp4 === void 0 ? {} : _temp4;\n  let {\n    router\n  } = useDataRouterContext(DataRouterHook.UseScrollRestoration);\n  let {\n    restoreScrollPosition,\n    preventScrollReset\n  } = useDataRouterState(DataRouterStateHook.UseScrollRestoration);\n  let {\n    basename\n  } = React.useContext(UNSAFE_NavigationContext);\n  let location = useLocation();\n  let matches = useMatches();\n  let navigation = useNavigation();\n  // Trigger manual scroll restoration while we're active\n  React.useEffect(() => {\n    window.history.scrollRestoration = \"manual\";\n    return () => {\n      window.history.scrollRestoration = \"auto\";\n    };\n  }, []);\n  // Save positions on pagehide\n  usePageHide(React.useCallback(() => {\n    if (navigation.state === \"idle\") {\n      let key = (getKey ? getKey(location, matches) : null) || location.key;\n      savedScrollPositions[key] = window.scrollY;\n    }\n    try {\n      sessionStorage.setItem(storageKey || SCROLL_RESTORATION_STORAGE_KEY, JSON.stringify(savedScrollPositions));\n    } catch (error) {\n      process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(false, \"Failed to save scroll positions in sessionStorage, <ScrollRestoration /> will not work properly (\" + error + \").\") : void 0;\n    }\n    window.history.scrollRestoration = \"auto\";\n  }, [storageKey, getKey, navigation.state, location, matches]));\n  // Read in any saved scroll locations\n  if (typeof document !== \"undefined\") {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useLayoutEffect(() => {\n      try {\n        let sessionPositions = sessionStorage.getItem(storageKey || SCROLL_RESTORATION_STORAGE_KEY);\n        if (sessionPositions) {\n          savedScrollPositions = JSON.parse(sessionPositions);\n        }\n      } catch (e) {\n        // no-op, use default empty object\n      }\n    }, [storageKey]);\n    // Enable scroll restoration in the router\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useLayoutEffect(() => {\n      let getKeyWithoutBasename = getKey && basename !== \"/\" ? (location, matches) => getKey( // Strip the basename to match useLocation()\n      _extends({}, location, {\n        pathname: stripBasename(location.pathname, basename) || location.pathname\n      }), matches) : getKey;\n      let disableScrollRestoration = router == null ? void 0 : router.enableScrollRestoration(savedScrollPositions, () => window.scrollY, getKeyWithoutBasename);\n      return () => disableScrollRestoration && disableScrollRestoration();\n    }, [router, basename, getKey]);\n    // Restore scrolling when state.restoreScrollPosition changes\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useLayoutEffect(() => {\n      // Explicit false means don't do anything (used for submissions)\n      if (restoreScrollPosition === false) {\n        return;\n      }\n      // been here before, scroll to it\n      if (typeof restoreScrollPosition === \"number\") {\n        window.scrollTo(0, restoreScrollPosition);\n        return;\n      }\n      // try to scroll to the hash\n      if (location.hash) {\n        let el = document.getElementById(decodeURIComponent(location.hash.slice(1)));\n        if (el) {\n          el.scrollIntoView();\n          return;\n        }\n      }\n      // Don't reset if this navigation opted out\n      if (preventScrollReset === true) {\n        return;\n      }\n      // otherwise go to the top on new locations\n      window.scrollTo(0, 0);\n    }, [location, restoreScrollPosition, preventScrollReset]);\n  }\n}\n/**\n * Setup a callback to be fired on the window's `beforeunload` event. This is\n * useful for saving some data to `window.localStorage` just before the page\n * refreshes.\n *\n * Note: The `callback` argument should be a function created with\n * `React.useCallback()`.\n */\nfunction useBeforeUnload(callback, options) {\n  let {\n    capture\n  } = options || {};\n  React.useEffect(() => {\n    let opts = capture != null ? {\n      capture\n    } : undefined;\n    window.addEventListener(\"beforeunload\", callback, opts);\n    return () => {\n      window.removeEventListener(\"beforeunload\", callback, opts);\n    };\n  }, [callback, capture]);\n}\n/**\n * Setup a callback to be fired on the window's `pagehide` event. This is\n * useful for saving some data to `window.localStorage` just before the page\n * refreshes.  This event is better supported than beforeunload across browsers.\n *\n * Note: The `callback` argument should be a function created with\n * `React.useCallback()`.\n */\nfunction usePageHide(callback, options) {\n  let {\n    capture\n  } = options || {};\n  React.useEffect(() => {\n    let opts = capture != null ? {\n      capture\n    } : undefined;\n    window.addEventListener(\"pagehide\", callback, opts);\n    return () => {\n      window.removeEventListener(\"pagehide\", callback, opts);\n    };\n  }, [callback, capture]);\n}\n/**\n * Wrapper around useBlocker to show a window.confirm prompt to users instead\n * of building a custom UI with useBlocker.\n *\n * Warning: This has *a lot of rough edges* and behaves very differently (and\n * very incorrectly in some cases) across browsers if user click addition\n * back/forward navigations while the confirm is open.  Use at your own risk.\n */\nfunction usePrompt(_ref12) {\n  let {\n    when,\n    message\n  } = _ref12;\n  let blocker = useBlocker(when);\n  React.useEffect(() => {\n    if (blocker.state === \"blocked\") {\n      let proceed = window.confirm(message);\n      if (proceed) {\n        // This timeout is needed to avoid a weird \"race\" on POP navigations\n        // between the `window.history` revert navigation and the result of\n        // `window.confirm`\n        setTimeout(blocker.proceed, 0);\n      } else {\n        blocker.reset();\n      }\n    }\n  }, [blocker, message]);\n  React.useEffect(() => {\n    if (blocker.state === \"blocked\" && !when) {\n      blocker.reset();\n    }\n  }, [blocker, when]);\n}\n/**\n * Return a boolean indicating if there is an active view transition to the\n * given href.  You can use this value to render CSS classes or viewTransitionName\n * styles onto your elements\n *\n * @param href The destination href\n * @param [opts.relative] Relative routing type (\"route\" | \"path\")\n */\nfunction useViewTransitionState(to, opts) {\n  if (opts === void 0) {\n    opts = {};\n  }\n  let vtContext = React.useContext(ViewTransitionContext);\n  !(vtContext != null) ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  \" + \"Did you accidentally import `RouterProvider` from `react-router`?\") : UNSAFE_invariant(false) : void 0;\n  let {\n    basename\n  } = useDataRouterContext(DataRouterHook.useViewTransitionState);\n  let path = useResolvedPath(to, {\n    relative: opts.relative\n  });\n  if (!vtContext.isTransitioning) {\n    return false;\n  }\n  let currentPath = stripBasename(vtContext.currentLocation.pathname, basename) || vtContext.currentLocation.pathname;\n  let nextPath = stripBasename(vtContext.nextLocation.pathname, basename) || vtContext.nextLocation.pathname;\n  // Transition is active if we're going to or coming from the indicated\n  // destination.  This ensures that other PUSH navigations that reverse\n  // an indicated transition apply.  I.e., on the list view you have:\n  //\n  //   <NavLink to=\"/details/1\" viewTransition>\n  //\n  // If you click the breadcrumb back to the list view:\n  //\n  //   <NavLink to=\"/list\" viewTransition>\n  //\n  // We should apply the transition because it's indicated as active going\n  // from /list -> /details/1 and therefore should be active on the reverse\n  // (even though this isn't strictly a POP reverse)\n  return matchPath(path.pathname, nextPath) != null || matchPath(path.pathname, currentPath) != null;\n}\n//#endregion\n\nexport { BrowserRouter, Form, HashRouter, Link, NavLink, RouterProvider, ScrollRestoration, FetchersContext as UNSAFE_FetchersContext, ViewTransitionContext as UNSAFE_ViewTransitionContext, useScrollRestoration as UNSAFE_useScrollRestoration, createBrowserRouter, createHashRouter, createSearchParams, HistoryRouter as unstable_HistoryRouter, usePrompt as unstable_usePrompt, useBeforeUnload, useFetcher, useFetchers, useFormAction, useLinkClickHandler, useSearchParams, useSubmit, useViewTransitionState };\n//# sourceMappingURL=index.js.map\n","// src/subscribable.ts\nvar Subscribable = class {\n  constructor() {\n    this.listeners = /* @__PURE__ */ new Set();\n    this.subscribe = this.subscribe.bind(this);\n  }\n  subscribe(listener) {\n    this.listeners.add(listener);\n    this.onSubscribe();\n    return () => {\n      this.listeners.delete(listener);\n      this.onUnsubscribe();\n    };\n  }\n  hasListeners() {\n    return this.listeners.size > 0;\n  }\n  onSubscribe() {\n  }\n  onUnsubscribe() {\n  }\n};\nexport {\n  Subscribable\n};\n//# sourceMappingURL=subscribable.js.map","// src/timeoutManager.ts\nvar defaultTimeoutProvider = {\n  // We need the wrapper function syntax below instead of direct references to\n  // global setTimeout etc.\n  //\n  // BAD: `setTimeout: setTimeout`\n  // GOOD: `setTimeout: (cb, delay) => setTimeout(cb, delay)`\n  //\n  // If we use direct references here, then anything that wants to spy on or\n  // replace the global setTimeout (like tests) won't work since we'll already\n  // have a hard reference to the original implementation at the time when this\n  // file was imported.\n  setTimeout: (callback, delay) => setTimeout(callback, delay),\n  clearTimeout: (timeoutId) => clearTimeout(timeoutId),\n  setInterval: (callback, delay) => setInterval(callback, delay),\n  clearInterval: (intervalId) => clearInterval(intervalId)\n};\nvar TimeoutManager = class {\n  // We cannot have TimeoutManager<T> as we must instantiate it with a concrete\n  // type at app boot; and if we leave that type, then any new timer provider\n  // would need to support ReturnType<typeof setTimeout>, which is infeasible.\n  //\n  // We settle for type safety for the TimeoutProvider type, and accept that\n  // this class is unsafe internally to allow for extension.\n  #provider = defaultTimeoutProvider;\n  #providerCalled = false;\n  setTimeoutProvider(provider) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (this.#providerCalled && provider !== this.#provider) {\n        console.error(\n          `[timeoutManager]: Switching provider after calls to previous provider might result in unexpected behavior.`,\n          { previous: this.#provider, provider }\n        );\n      }\n    }\n    this.#provider = provider;\n    if (process.env.NODE_ENV !== \"production\") {\n      this.#providerCalled = false;\n    }\n  }\n  setTimeout(callback, delay) {\n    if (process.env.NODE_ENV !== \"production\") {\n      this.#providerCalled = true;\n    }\n    return this.#provider.setTimeout(callback, delay);\n  }\n  clearTimeout(timeoutId) {\n    this.#provider.clearTimeout(timeoutId);\n  }\n  setInterval(callback, delay) {\n    if (process.env.NODE_ENV !== \"production\") {\n      this.#providerCalled = true;\n    }\n    return this.#provider.setInterval(callback, delay);\n  }\n  clearInterval(intervalId) {\n    this.#provider.clearInterval(intervalId);\n  }\n};\nvar timeoutManager = new TimeoutManager();\nfunction systemSetTimeoutZero(callback) {\n  setTimeout(callback, 0);\n}\nexport {\n  TimeoutManager,\n  defaultTimeoutProvider,\n  systemSetTimeoutZero,\n  timeoutManager\n};\n//# sourceMappingURL=timeoutManager.js.map","// src/utils.ts\nimport { timeoutManager } from \"./timeoutManager.js\";\nvar isServer = typeof window === \"undefined\" || \"Deno\" in globalThis;\nfunction noop() {\n}\nfunction functionalUpdate(updater, input) {\n  return typeof updater === \"function\" ? updater(input) : updater;\n}\nfunction isValidTimeout(value) {\n  return typeof value === \"number\" && value >= 0 && value !== Infinity;\n}\nfunction timeUntilStale(updatedAt, staleTime) {\n  return Math.max(updatedAt + (staleTime || 0) - Date.now(), 0);\n}\nfunction resolveStaleTime(staleTime, query) {\n  return typeof staleTime === \"function\" ? staleTime(query) : staleTime;\n}\nfunction resolveEnabled(enabled, query) {\n  return typeof enabled === \"function\" ? enabled(query) : enabled;\n}\nfunction matchQuery(filters, query) {\n  const {\n    type = \"all\",\n    exact,\n    fetchStatus,\n    predicate,\n    queryKey,\n    stale\n  } = filters;\n  if (queryKey) {\n    if (exact) {\n      if (query.queryHash !== hashQueryKeyByOptions(queryKey, query.options)) {\n        return false;\n      }\n    } else if (!partialMatchKey(query.queryKey, queryKey)) {\n      return false;\n    }\n  }\n  if (type !== \"all\") {\n    const isActive = query.isActive();\n    if (type === \"active\" && !isActive) {\n      return false;\n    }\n    if (type === \"inactive\" && isActive) {\n      return false;\n    }\n  }\n  if (typeof stale === \"boolean\" && query.isStale() !== stale) {\n    return false;\n  }\n  if (fetchStatus && fetchStatus !== query.state.fetchStatus) {\n    return false;\n  }\n  if (predicate && !predicate(query)) {\n    return false;\n  }\n  return true;\n}\nfunction matchMutation(filters, mutation) {\n  const { exact, status, predicate, mutationKey } = filters;\n  if (mutationKey) {\n    if (!mutation.options.mutationKey) {\n      return false;\n    }\n    if (exact) {\n      if (hashKey(mutation.options.mutationKey) !== hashKey(mutationKey)) {\n        return false;\n      }\n    } else if (!partialMatchKey(mutation.options.mutationKey, mutationKey)) {\n      return false;\n    }\n  }\n  if (status && mutation.state.status !== status) {\n    return false;\n  }\n  if (predicate && !predicate(mutation)) {\n    return false;\n  }\n  return true;\n}\nfunction hashQueryKeyByOptions(queryKey, options) {\n  const hashFn = options?.queryKeyHashFn || hashKey;\n  return hashFn(queryKey);\n}\nfunction hashKey(queryKey) {\n  return JSON.stringify(\n    queryKey,\n    (_, val) => isPlainObject(val) ? Object.keys(val).sort().reduce((result, key) => {\n      result[key] = val[key];\n      return result;\n    }, {}) : val\n  );\n}\nfunction partialMatchKey(a, b) {\n  if (a === b) {\n    return true;\n  }\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (a && b && typeof a === \"object\" && typeof b === \"object\") {\n    return Object.keys(b).every((key) => partialMatchKey(a[key], b[key]));\n  }\n  return false;\n}\nvar hasOwn = Object.prototype.hasOwnProperty;\nfunction replaceEqualDeep(a, b) {\n  if (a === b) {\n    return a;\n  }\n  const array = isPlainArray(a) && isPlainArray(b);\n  if (!array && !(isPlainObject(a) && isPlainObject(b))) return b;\n  const aItems = array ? a : Object.keys(a);\n  const aSize = aItems.length;\n  const bItems = array ? b : Object.keys(b);\n  const bSize = bItems.length;\n  const copy = array ? new Array(bSize) : {};\n  let equalItems = 0;\n  for (let i = 0; i < bSize; i++) {\n    const key = array ? i : bItems[i];\n    const aItem = a[key];\n    const bItem = b[key];\n    if (aItem === bItem) {\n      copy[key] = aItem;\n      if (array ? i < aSize : hasOwn.call(a, key)) equalItems++;\n      continue;\n    }\n    if (aItem === null || bItem === null || typeof aItem !== \"object\" || typeof bItem !== \"object\") {\n      copy[key] = bItem;\n      continue;\n    }\n    const v = replaceEqualDeep(aItem, bItem);\n    copy[key] = v;\n    if (v === aItem) equalItems++;\n  }\n  return aSize === bSize && equalItems === aSize ? a : copy;\n}\nfunction shallowEqualObjects(a, b) {\n  if (!b || Object.keys(a).length !== Object.keys(b).length) {\n    return false;\n  }\n  for (const key in a) {\n    if (a[key] !== b[key]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction isPlainArray(value) {\n  return Array.isArray(value) && value.length === Object.keys(value).length;\n}\nfunction isPlainObject(o) {\n  if (!hasObjectPrototype(o)) {\n    return false;\n  }\n  const ctor = o.constructor;\n  if (ctor === void 0) {\n    return true;\n  }\n  const prot = ctor.prototype;\n  if (!hasObjectPrototype(prot)) {\n    return false;\n  }\n  if (!prot.hasOwnProperty(\"isPrototypeOf\")) {\n    return false;\n  }\n  if (Object.getPrototypeOf(o) !== Object.prototype) {\n    return false;\n  }\n  return true;\n}\nfunction hasObjectPrototype(o) {\n  return Object.prototype.toString.call(o) === \"[object Object]\";\n}\nfunction sleep(timeout) {\n  return new Promise((resolve) => {\n    timeoutManager.setTimeout(resolve, timeout);\n  });\n}\nfunction replaceData(prevData, data, options) {\n  if (typeof options.structuralSharing === \"function\") {\n    return options.structuralSharing(prevData, data);\n  } else if (options.structuralSharing !== false) {\n    if (process.env.NODE_ENV !== \"production\") {\n      try {\n        return replaceEqualDeep(prevData, data);\n      } catch (error) {\n        console.error(\n          `Structural sharing requires data to be JSON serializable. To fix this, turn off structuralSharing or return JSON-serializable data from your queryFn. [${options.queryHash}]: ${error}`\n        );\n        throw error;\n      }\n    }\n    return replaceEqualDeep(prevData, data);\n  }\n  return data;\n}\nfunction keepPreviousData(previousData) {\n  return previousData;\n}\nfunction addToEnd(items, item, max = 0) {\n  const newItems = [...items, item];\n  return max && newItems.length > max ? newItems.slice(1) : newItems;\n}\nfunction addToStart(items, item, max = 0) {\n  const newItems = [item, ...items];\n  return max && newItems.length > max ? newItems.slice(0, -1) : newItems;\n}\nvar skipToken = Symbol();\nfunction ensureQueryFn(options, fetchOptions) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (options.queryFn === skipToken) {\n      console.error(\n        `Attempted to invoke queryFn when set to skipToken. This is likely a configuration error. Query hash: '${options.queryHash}'`\n      );\n    }\n  }\n  if (!options.queryFn && fetchOptions?.initialPromise) {\n    return () => fetchOptions.initialPromise;\n  }\n  if (!options.queryFn || options.queryFn === skipToken) {\n    return () => Promise.reject(new Error(`Missing queryFn: '${options.queryHash}'`));\n  }\n  return options.queryFn;\n}\nfunction shouldThrowError(throwOnError, params) {\n  if (typeof throwOnError === \"function\") {\n    return throwOnError(...params);\n  }\n  return !!throwOnError;\n}\nexport {\n  addToEnd,\n  addToStart,\n  ensureQueryFn,\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  isPlainArray,\n  isPlainObject,\n  isServer,\n  isValidTimeout,\n  keepPreviousData,\n  matchMutation,\n  matchQuery,\n  noop,\n  partialMatchKey,\n  replaceData,\n  replaceEqualDeep,\n  resolveEnabled,\n  resolveStaleTime,\n  shallowEqualObjects,\n  shouldThrowError,\n  skipToken,\n  sleep,\n  timeUntilStale\n};\n//# sourceMappingURL=utils.js.map","// src/focusManager.ts\nimport { Subscribable } from \"./subscribable.js\";\nimport { isServer } from \"./utils.js\";\nvar FocusManager = class extends Subscribable {\n  #focused;\n  #cleanup;\n  #setup;\n  constructor() {\n    super();\n    this.#setup = (onFocus) => {\n      if (!isServer && window.addEventListener) {\n        const listener = () => onFocus();\n        window.addEventListener(\"visibilitychange\", listener, false);\n        return () => {\n          window.removeEventListener(\"visibilitychange\", listener);\n        };\n      }\n      return;\n    };\n  }\n  onSubscribe() {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.();\n      this.#cleanup = void 0;\n    }\n  }\n  setEventListener(setup) {\n    this.#setup = setup;\n    this.#cleanup?.();\n    this.#cleanup = setup((focused) => {\n      if (typeof focused === \"boolean\") {\n        this.setFocused(focused);\n      } else {\n        this.onFocus();\n      }\n    });\n  }\n  setFocused(focused) {\n    const changed = this.#focused !== focused;\n    if (changed) {\n      this.#focused = focused;\n      this.onFocus();\n    }\n  }\n  onFocus() {\n    const isFocused = this.isFocused();\n    this.listeners.forEach((listener) => {\n      listener(isFocused);\n    });\n  }\n  isFocused() {\n    if (typeof this.#focused === \"boolean\") {\n      return this.#focused;\n    }\n    return globalThis.document?.visibilityState !== \"hidden\";\n  }\n};\nvar focusManager = new FocusManager();\nexport {\n  FocusManager,\n  focusManager\n};\n//# sourceMappingURL=focusManager.js.map","// src/thenable.ts\nimport { noop } from \"./utils.js\";\nfunction pendingThenable() {\n  let resolve;\n  let reject;\n  const thenable = new Promise((_resolve, _reject) => {\n    resolve = _resolve;\n    reject = _reject;\n  });\n  thenable.status = \"pending\";\n  thenable.catch(() => {\n  });\n  function finalize(data) {\n    Object.assign(thenable, data);\n    delete thenable.resolve;\n    delete thenable.reject;\n  }\n  thenable.resolve = (value) => {\n    finalize({\n      status: \"fulfilled\",\n      value\n    });\n    resolve(value);\n  };\n  thenable.reject = (reason) => {\n    finalize({\n      status: \"rejected\",\n      reason\n    });\n    reject(reason);\n  };\n  return thenable;\n}\nfunction tryResolveSync(promise) {\n  let data;\n  promise.then((result) => {\n    data = result;\n    return result;\n  }, noop)?.catch(noop);\n  if (data !== void 0) {\n    return { data };\n  }\n  return void 0;\n}\nexport {\n  pendingThenable,\n  tryResolveSync\n};\n//# sourceMappingURL=thenable.js.map","// src/notifyManager.ts\nimport { systemSetTimeoutZero } from \"./timeoutManager.js\";\nvar defaultScheduler = systemSetTimeoutZero;\nfunction createNotifyManager() {\n  let queue = [];\n  let transactions = 0;\n  let notifyFn = (callback) => {\n    callback();\n  };\n  let batchNotifyFn = (callback) => {\n    callback();\n  };\n  let scheduleFn = defaultScheduler;\n  const schedule = (callback) => {\n    if (transactions) {\n      queue.push(callback);\n    } else {\n      scheduleFn(() => {\n        notifyFn(callback);\n      });\n    }\n  };\n  const flush = () => {\n    const originalQueue = queue;\n    queue = [];\n    if (originalQueue.length) {\n      scheduleFn(() => {\n        batchNotifyFn(() => {\n          originalQueue.forEach((callback) => {\n            notifyFn(callback);\n          });\n        });\n      });\n    }\n  };\n  return {\n    batch: (callback) => {\n      let result;\n      transactions++;\n      try {\n        result = callback();\n      } finally {\n        transactions--;\n        if (!transactions) {\n          flush();\n        }\n      }\n      return result;\n    },\n    /**\n     * All calls to the wrapped function will be batched.\n     */\n    batchCalls: (callback) => {\n      return (...args) => {\n        schedule(() => {\n          callback(...args);\n        });\n      };\n    },\n    schedule,\n    /**\n     * Use this method to set a custom notify function.\n     * This can be used to for example wrap notifications with `React.act` while running tests.\n     */\n    setNotifyFunction: (fn) => {\n      notifyFn = fn;\n    },\n    /**\n     * Use this method to set a custom function to batch notifications together into a single tick.\n     * By default React Query will use the batch function provided by ReactDOM or React Native.\n     */\n    setBatchNotifyFunction: (fn) => {\n      batchNotifyFn = fn;\n    },\n    setScheduler: (fn) => {\n      scheduleFn = fn;\n    }\n  };\n}\nvar notifyManager = createNotifyManager();\nexport {\n  createNotifyManager,\n  defaultScheduler,\n  notifyManager\n};\n//# sourceMappingURL=notifyManager.js.map","// src/onlineManager.ts\nimport { Subscribable } from \"./subscribable.js\";\nimport { isServer } from \"./utils.js\";\nvar OnlineManager = class extends Subscribable {\n  #online = true;\n  #cleanup;\n  #setup;\n  constructor() {\n    super();\n    this.#setup = (onOnline) => {\n      if (!isServer && window.addEventListener) {\n        const onlineListener = () => onOnline(true);\n        const offlineListener = () => onOnline(false);\n        window.addEventListener(\"online\", onlineListener, false);\n        window.addEventListener(\"offline\", offlineListener, false);\n        return () => {\n          window.removeEventListener(\"online\", onlineListener);\n          window.removeEventListener(\"offline\", offlineListener);\n        };\n      }\n      return;\n    };\n  }\n  onSubscribe() {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.();\n      this.#cleanup = void 0;\n    }\n  }\n  setEventListener(setup) {\n    this.#setup = setup;\n    this.#cleanup?.();\n    this.#cleanup = setup(this.setOnline.bind(this));\n  }\n  setOnline(online) {\n    const changed = this.#online !== online;\n    if (changed) {\n      this.#online = online;\n      this.listeners.forEach((listener) => {\n        listener(online);\n      });\n    }\n  }\n  isOnline() {\n    return this.#online;\n  }\n};\nvar onlineManager = new OnlineManager();\nexport {\n  OnlineManager,\n  onlineManager\n};\n//# sourceMappingURL=onlineManager.js.map","// src/retryer.ts\nimport { focusManager } from \"./focusManager.js\";\nimport { onlineManager } from \"./onlineManager.js\";\nimport { pendingThenable } from \"./thenable.js\";\nimport { isServer, sleep } from \"./utils.js\";\nfunction defaultRetryDelay(failureCount) {\n  return Math.min(1e3 * 2 ** failureCount, 3e4);\n}\nfunction canFetch(networkMode) {\n  return (networkMode ?? \"online\") === \"online\" ? onlineManager.isOnline() : true;\n}\nvar CancelledError = class extends Error {\n  constructor(options) {\n    super(\"CancelledError\");\n    this.revert = options?.revert;\n    this.silent = options?.silent;\n  }\n};\nfunction isCancelledError(value) {\n  return value instanceof CancelledError;\n}\nfunction createRetryer(config) {\n  let isRetryCancelled = false;\n  let failureCount = 0;\n  let continueFn;\n  const thenable = pendingThenable();\n  const isResolved = () => thenable.status !== \"pending\";\n  const cancel = (cancelOptions) => {\n    if (!isResolved()) {\n      const error = new CancelledError(cancelOptions);\n      reject(error);\n      config.onCancel?.(error);\n    }\n  };\n  const cancelRetry = () => {\n    isRetryCancelled = true;\n  };\n  const continueRetry = () => {\n    isRetryCancelled = false;\n  };\n  const canContinue = () => focusManager.isFocused() && (config.networkMode === \"always\" || onlineManager.isOnline()) && config.canRun();\n  const canStart = () => canFetch(config.networkMode) && config.canRun();\n  const resolve = (value) => {\n    if (!isResolved()) {\n      continueFn?.();\n      thenable.resolve(value);\n    }\n  };\n  const reject = (value) => {\n    if (!isResolved()) {\n      continueFn?.();\n      thenable.reject(value);\n    }\n  };\n  const pause = () => {\n    return new Promise((continueResolve) => {\n      continueFn = (value) => {\n        if (isResolved() || canContinue()) {\n          continueResolve(value);\n        }\n      };\n      config.onPause?.();\n    }).then(() => {\n      continueFn = void 0;\n      if (!isResolved()) {\n        config.onContinue?.();\n      }\n    });\n  };\n  const run = () => {\n    if (isResolved()) {\n      return;\n    }\n    let promiseOrValue;\n    const initialPromise = failureCount === 0 ? config.initialPromise : void 0;\n    try {\n      promiseOrValue = initialPromise ?? config.fn();\n    } catch (error) {\n      promiseOrValue = Promise.reject(error);\n    }\n    Promise.resolve(promiseOrValue).then(resolve).catch((error) => {\n      if (isResolved()) {\n        return;\n      }\n      const retry = config.retry ?? (isServer ? 0 : 3);\n      const retryDelay = config.retryDelay ?? defaultRetryDelay;\n      const delay = typeof retryDelay === \"function\" ? retryDelay(failureCount, error) : retryDelay;\n      const shouldRetry = retry === true || typeof retry === \"number\" && failureCount < retry || typeof retry === \"function\" && retry(failureCount, error);\n      if (isRetryCancelled || !shouldRetry) {\n        reject(error);\n        return;\n      }\n      failureCount++;\n      config.onFail?.(failureCount, error);\n      sleep(delay).then(() => {\n        return canContinue() ? void 0 : pause();\n      }).then(() => {\n        if (isRetryCancelled) {\n          reject(error);\n        } else {\n          run();\n        }\n      });\n    });\n  };\n  return {\n    promise: thenable,\n    status: () => thenable.status,\n    cancel,\n    continue: () => {\n      continueFn?.();\n      return thenable;\n    },\n    cancelRetry,\n    continueRetry,\n    canStart,\n    start: () => {\n      if (canStart()) {\n        run();\n      } else {\n        pause().then(run);\n      }\n      return thenable;\n    }\n  };\n}\nexport {\n  CancelledError,\n  canFetch,\n  createRetryer,\n  isCancelledError\n};\n//# sourceMappingURL=retryer.js.map","// src/removable.ts\nimport { timeoutManager } from \"./timeoutManager.js\";\nimport { isServer, isValidTimeout } from \"./utils.js\";\nvar Removable = class {\n  #gcTimeout;\n  destroy() {\n    this.clearGcTimeout();\n  }\n  scheduleGc() {\n    this.clearGcTimeout();\n    if (isValidTimeout(this.gcTime)) {\n      this.#gcTimeout = timeoutManager.setTimeout(() => {\n        this.optionalRemove();\n      }, this.gcTime);\n    }\n  }\n  updateGcTime(newGcTime) {\n    this.gcTime = Math.max(\n      this.gcTime || 0,\n      newGcTime ?? (isServer ? Infinity : 5 * 60 * 1e3)\n    );\n  }\n  clearGcTimeout() {\n    if (this.#gcTimeout) {\n      timeoutManager.clearTimeout(this.#gcTimeout);\n      this.#gcTimeout = void 0;\n    }\n  }\n};\nexport {\n  Removable\n};\n//# sourceMappingURL=removable.js.map","// src/query.ts\nimport {\n  ensureQueryFn,\n  noop,\n  replaceData,\n  resolveEnabled,\n  resolveStaleTime,\n  skipToken,\n  timeUntilStale\n} from \"./utils.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { CancelledError, canFetch, createRetryer } from \"./retryer.js\";\nimport { Removable } from \"./removable.js\";\nvar Query = class extends Removable {\n  #initialState;\n  #revertState;\n  #cache;\n  #client;\n  #retryer;\n  #defaultOptions;\n  #abortSignalConsumed;\n  constructor(config) {\n    super();\n    this.#abortSignalConsumed = false;\n    this.#defaultOptions = config.defaultOptions;\n    this.setOptions(config.options);\n    this.observers = [];\n    this.#client = config.client;\n    this.#cache = this.#client.getQueryCache();\n    this.queryKey = config.queryKey;\n    this.queryHash = config.queryHash;\n    this.#initialState = getDefaultState(this.options);\n    this.state = config.state ?? this.#initialState;\n    this.scheduleGc();\n  }\n  get meta() {\n    return this.options.meta;\n  }\n  get promise() {\n    return this.#retryer?.promise;\n  }\n  setOptions(options) {\n    this.options = { ...this.#defaultOptions, ...options };\n    this.updateGcTime(this.options.gcTime);\n    if (this.state && this.state.data === void 0) {\n      const defaultState = getDefaultState(this.options);\n      if (defaultState.data !== void 0) {\n        this.setData(defaultState.data, {\n          updatedAt: defaultState.dataUpdatedAt,\n          manual: true\n        });\n        this.#initialState = defaultState;\n      }\n    }\n  }\n  optionalRemove() {\n    if (!this.observers.length && this.state.fetchStatus === \"idle\") {\n      this.#cache.remove(this);\n    }\n  }\n  setData(newData, options) {\n    const data = replaceData(this.state.data, newData, this.options);\n    this.#dispatch({\n      data,\n      type: \"success\",\n      dataUpdatedAt: options?.updatedAt,\n      manual: options?.manual\n    });\n    return data;\n  }\n  setState(state, setStateOptions) {\n    this.#dispatch({ type: \"setState\", state, setStateOptions });\n  }\n  cancel(options) {\n    const promise = this.#retryer?.promise;\n    this.#retryer?.cancel(options);\n    return promise ? promise.then(noop).catch(noop) : Promise.resolve();\n  }\n  destroy() {\n    super.destroy();\n    this.cancel({ silent: true });\n  }\n  reset() {\n    this.destroy();\n    this.setState(this.#initialState);\n  }\n  isActive() {\n    return this.observers.some(\n      (observer) => resolveEnabled(observer.options.enabled, this) !== false\n    );\n  }\n  isDisabled() {\n    if (this.getObserversCount() > 0) {\n      return !this.isActive();\n    }\n    return this.options.queryFn === skipToken || this.state.dataUpdateCount + this.state.errorUpdateCount === 0;\n  }\n  isStatic() {\n    if (this.getObserversCount() > 0) {\n      return this.observers.some(\n        (observer) => resolveStaleTime(observer.options.staleTime, this) === \"static\"\n      );\n    }\n    return false;\n  }\n  isStale() {\n    if (this.getObserversCount() > 0) {\n      return this.observers.some(\n        (observer) => observer.getCurrentResult().isStale\n      );\n    }\n    return this.state.data === void 0 || this.state.isInvalidated;\n  }\n  isStaleByTime(staleTime = 0) {\n    if (this.state.data === void 0) {\n      return true;\n    }\n    if (staleTime === \"static\") {\n      return false;\n    }\n    if (this.state.isInvalidated) {\n      return true;\n    }\n    return !timeUntilStale(this.state.dataUpdatedAt, staleTime);\n  }\n  onFocus() {\n    const observer = this.observers.find((x) => x.shouldFetchOnWindowFocus());\n    observer?.refetch({ cancelRefetch: false });\n    this.#retryer?.continue();\n  }\n  onOnline() {\n    const observer = this.observers.find((x) => x.shouldFetchOnReconnect());\n    observer?.refetch({ cancelRefetch: false });\n    this.#retryer?.continue();\n  }\n  addObserver(observer) {\n    if (!this.observers.includes(observer)) {\n      this.observers.push(observer);\n      this.clearGcTimeout();\n      this.#cache.notify({ type: \"observerAdded\", query: this, observer });\n    }\n  }\n  removeObserver(observer) {\n    if (this.observers.includes(observer)) {\n      this.observers = this.observers.filter((x) => x !== observer);\n      if (!this.observers.length) {\n        if (this.#retryer) {\n          if (this.#abortSignalConsumed) {\n            this.#retryer.cancel({ revert: true });\n          } else {\n            this.#retryer.cancelRetry();\n          }\n        }\n        this.scheduleGc();\n      }\n      this.#cache.notify({ type: \"observerRemoved\", query: this, observer });\n    }\n  }\n  getObserversCount() {\n    return this.observers.length;\n  }\n  invalidate() {\n    if (!this.state.isInvalidated) {\n      this.#dispatch({ type: \"invalidate\" });\n    }\n  }\n  async fetch(options, fetchOptions) {\n    if (this.state.fetchStatus !== \"idle\" && // If the promise in the retyer is already rejected, we have to definitely\n    // re-start the fetch; there is a chance that the query is still in a\n    // pending state when that happens\n    this.#retryer?.status() !== \"rejected\") {\n      if (this.state.data !== void 0 && fetchOptions?.cancelRefetch) {\n        this.cancel({ silent: true });\n      } else if (this.#retryer) {\n        this.#retryer.continueRetry();\n        return this.#retryer.promise;\n      }\n    }\n    if (options) {\n      this.setOptions(options);\n    }\n    if (!this.options.queryFn) {\n      const observer = this.observers.find((x) => x.options.queryFn);\n      if (observer) {\n        this.setOptions(observer.options);\n      }\n    }\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!Array.isArray(this.options.queryKey)) {\n        console.error(\n          `As of v4, queryKey needs to be an Array. If you are using a string like 'repoData', please change it to an Array, e.g. ['repoData']`\n        );\n      }\n    }\n    const abortController = new AbortController();\n    const addSignalProperty = (object) => {\n      Object.defineProperty(object, \"signal\", {\n        enumerable: true,\n        get: () => {\n          this.#abortSignalConsumed = true;\n          return abortController.signal;\n        }\n      });\n    };\n    const fetchFn = () => {\n      const queryFn = ensureQueryFn(this.options, fetchOptions);\n      const createQueryFnContext = () => {\n        const queryFnContext2 = {\n          client: this.#client,\n          queryKey: this.queryKey,\n          meta: this.meta\n        };\n        addSignalProperty(queryFnContext2);\n        return queryFnContext2;\n      };\n      const queryFnContext = createQueryFnContext();\n      this.#abortSignalConsumed = false;\n      if (this.options.persister) {\n        return this.options.persister(\n          queryFn,\n          queryFnContext,\n          this\n        );\n      }\n      return queryFn(queryFnContext);\n    };\n    const createFetchContext = () => {\n      const context2 = {\n        fetchOptions,\n        options: this.options,\n        queryKey: this.queryKey,\n        client: this.#client,\n        state: this.state,\n        fetchFn\n      };\n      addSignalProperty(context2);\n      return context2;\n    };\n    const context = createFetchContext();\n    this.options.behavior?.onFetch(context, this);\n    this.#revertState = this.state;\n    if (this.state.fetchStatus === \"idle\" || this.state.fetchMeta !== context.fetchOptions?.meta) {\n      this.#dispatch({ type: \"fetch\", meta: context.fetchOptions?.meta });\n    }\n    this.#retryer = createRetryer({\n      initialPromise: fetchOptions?.initialPromise,\n      fn: context.fetchFn,\n      onCancel: (error) => {\n        if (error instanceof CancelledError && error.revert) {\n          this.setState({\n            ...this.#revertState,\n            fetchStatus: \"idle\"\n          });\n        }\n        abortController.abort();\n      },\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: \"failed\", failureCount, error });\n      },\n      onPause: () => {\n        this.#dispatch({ type: \"pause\" });\n      },\n      onContinue: () => {\n        this.#dispatch({ type: \"continue\" });\n      },\n      retry: context.options.retry,\n      retryDelay: context.options.retryDelay,\n      networkMode: context.options.networkMode,\n      canRun: () => true\n    });\n    try {\n      const data = await this.#retryer.start();\n      if (data === void 0) {\n        if (process.env.NODE_ENV !== \"production\") {\n          console.error(\n            `Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: ${this.queryHash}`\n          );\n        }\n        throw new Error(`${this.queryHash} data is undefined`);\n      }\n      this.setData(data);\n      this.#cache.config.onSuccess?.(data, this);\n      this.#cache.config.onSettled?.(\n        data,\n        this.state.error,\n        this\n      );\n      return data;\n    } catch (error) {\n      if (error instanceof CancelledError) {\n        if (error.silent) {\n          return this.#retryer.promise;\n        } else if (error.revert) {\n          if (this.state.data === void 0) {\n            throw error;\n          }\n          return this.state.data;\n        }\n      }\n      this.#dispatch({\n        type: \"error\",\n        error\n      });\n      this.#cache.config.onError?.(\n        error,\n        this\n      );\n      this.#cache.config.onSettled?.(\n        this.state.data,\n        error,\n        this\n      );\n      throw error;\n    } finally {\n      this.scheduleGc();\n    }\n  }\n  #dispatch(action) {\n    const reducer = (state) => {\n      switch (action.type) {\n        case \"failed\":\n          return {\n            ...state,\n            fetchFailureCount: action.failureCount,\n            fetchFailureReason: action.error\n          };\n        case \"pause\":\n          return {\n            ...state,\n            fetchStatus: \"paused\"\n          };\n        case \"continue\":\n          return {\n            ...state,\n            fetchStatus: \"fetching\"\n          };\n        case \"fetch\":\n          return {\n            ...state,\n            ...fetchState(state.data, this.options),\n            fetchMeta: action.meta ?? null\n          };\n        case \"success\":\n          const newState = {\n            ...state,\n            data: action.data,\n            dataUpdateCount: state.dataUpdateCount + 1,\n            dataUpdatedAt: action.dataUpdatedAt ?? Date.now(),\n            error: null,\n            isInvalidated: false,\n            status: \"success\",\n            ...!action.manual && {\n              fetchStatus: \"idle\",\n              fetchFailureCount: 0,\n              fetchFailureReason: null\n            }\n          };\n          this.#revertState = action.manual ? newState : void 0;\n          return newState;\n        case \"error\":\n          const error = action.error;\n          return {\n            ...state,\n            error,\n            errorUpdateCount: state.errorUpdateCount + 1,\n            errorUpdatedAt: Date.now(),\n            fetchFailureCount: state.fetchFailureCount + 1,\n            fetchFailureReason: error,\n            fetchStatus: \"idle\",\n            status: \"error\"\n          };\n        case \"invalidate\":\n          return {\n            ...state,\n            isInvalidated: true\n          };\n        case \"setState\":\n          return {\n            ...state,\n            ...action.state\n          };\n      }\n    };\n    this.state = reducer(this.state);\n    notifyManager.batch(() => {\n      this.observers.forEach((observer) => {\n        observer.onQueryUpdate();\n      });\n      this.#cache.notify({ query: this, type: \"updated\", action });\n    });\n  }\n};\nfunction fetchState(data, options) {\n  return {\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchStatus: canFetch(options.networkMode) ? \"fetching\" : \"paused\",\n    ...data === void 0 && {\n      error: null,\n      status: \"pending\"\n    }\n  };\n}\nfunction getDefaultState(options) {\n  const data = typeof options.initialData === \"function\" ? options.initialData() : options.initialData;\n  const hasData = data !== void 0;\n  const initialDataUpdatedAt = hasData ? typeof options.initialDataUpdatedAt === \"function\" ? options.initialDataUpdatedAt() : options.initialDataUpdatedAt : 0;\n  return {\n    data,\n    dataUpdateCount: 0,\n    dataUpdatedAt: hasData ? initialDataUpdatedAt ?? Date.now() : 0,\n    error: null,\n    errorUpdateCount: 0,\n    errorUpdatedAt: 0,\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchMeta: null,\n    isInvalidated: false,\n    status: hasData ? \"success\" : \"pending\",\n    fetchStatus: \"idle\"\n  };\n}\nexport {\n  Query,\n  fetchState\n};\n//# sourceMappingURL=query.js.map","// src/queryObserver.ts\nimport { focusManager } from \"./focusManager.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { fetchState } from \"./query.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { pendingThenable } from \"./thenable.js\";\nimport {\n  isServer,\n  isValidTimeout,\n  noop,\n  replaceData,\n  resolveEnabled,\n  resolveStaleTime,\n  shallowEqualObjects,\n  timeUntilStale\n} from \"./utils.js\";\nimport { timeoutManager } from \"./timeoutManager.js\";\nvar QueryObserver = class extends Subscribable {\n  constructor(client, options) {\n    super();\n    this.options = options;\n    this.#client = client;\n    this.#selectError = null;\n    this.#currentThenable = pendingThenable();\n    this.bindMethods();\n    this.setOptions(options);\n  }\n  #client;\n  #currentQuery = void 0;\n  #currentQueryInitialState = void 0;\n  #currentResult = void 0;\n  #currentResultState;\n  #currentResultOptions;\n  #currentThenable;\n  #selectError;\n  #selectFn;\n  #selectResult;\n  // This property keeps track of the last query with defined data.\n  // It will be used to pass the previous data and query to the placeholder function between renders.\n  #lastQueryWithDefinedData;\n  #staleTimeoutId;\n  #refetchIntervalId;\n  #currentRefetchInterval;\n  #trackedProps = /* @__PURE__ */ new Set();\n  bindMethods() {\n    this.refetch = this.refetch.bind(this);\n  }\n  onSubscribe() {\n    if (this.listeners.size === 1) {\n      this.#currentQuery.addObserver(this);\n      if (shouldFetchOnMount(this.#currentQuery, this.options)) {\n        this.#executeFetch();\n      } else {\n        this.updateResult();\n      }\n      this.#updateTimers();\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.destroy();\n    }\n  }\n  shouldFetchOnReconnect() {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnReconnect\n    );\n  }\n  shouldFetchOnWindowFocus() {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnWindowFocus\n    );\n  }\n  destroy() {\n    this.listeners = /* @__PURE__ */ new Set();\n    this.#clearStaleTimeout();\n    this.#clearRefetchInterval();\n    this.#currentQuery.removeObserver(this);\n  }\n  setOptions(options) {\n    const prevOptions = this.options;\n    const prevQuery = this.#currentQuery;\n    this.options = this.#client.defaultQueryOptions(options);\n    if (this.options.enabled !== void 0 && typeof this.options.enabled !== \"boolean\" && typeof this.options.enabled !== \"function\" && typeof resolveEnabled(this.options.enabled, this.#currentQuery) !== \"boolean\") {\n      throw new Error(\n        \"Expected enabled to be a boolean or a callback that returns a boolean\"\n      );\n    }\n    this.#updateQuery();\n    this.#currentQuery.setOptions(this.options);\n    if (prevOptions._defaulted && !shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getQueryCache().notify({\n        type: \"observerOptionsUpdated\",\n        query: this.#currentQuery,\n        observer: this\n      });\n    }\n    const mounted = this.hasListeners();\n    if (mounted && shouldFetchOptionally(\n      this.#currentQuery,\n      prevQuery,\n      this.options,\n      prevOptions\n    )) {\n      this.#executeFetch();\n    }\n    this.updateResult();\n    if (mounted && (this.#currentQuery !== prevQuery || resolveEnabled(this.options.enabled, this.#currentQuery) !== resolveEnabled(prevOptions.enabled, this.#currentQuery) || resolveStaleTime(this.options.staleTime, this.#currentQuery) !== resolveStaleTime(prevOptions.staleTime, this.#currentQuery))) {\n      this.#updateStaleTimeout();\n    }\n    const nextRefetchInterval = this.#computeRefetchInterval();\n    if (mounted && (this.#currentQuery !== prevQuery || resolveEnabled(this.options.enabled, this.#currentQuery) !== resolveEnabled(prevOptions.enabled, this.#currentQuery) || nextRefetchInterval !== this.#currentRefetchInterval)) {\n      this.#updateRefetchInterval(nextRefetchInterval);\n    }\n  }\n  getOptimisticResult(options) {\n    const query = this.#client.getQueryCache().build(this.#client, options);\n    const result = this.createResult(query, options);\n    if (shouldAssignObserverCurrentProperties(this, result)) {\n      this.#currentResult = result;\n      this.#currentResultOptions = this.options;\n      this.#currentResultState = this.#currentQuery.state;\n    }\n    return result;\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  trackResult(result, onPropTracked) {\n    return new Proxy(result, {\n      get: (target, key) => {\n        this.trackProp(key);\n        onPropTracked?.(key);\n        if (key === \"promise\") {\n          this.trackProp(\"data\");\n          if (!this.options.experimental_prefetchInRender && this.#currentThenable.status === \"pending\") {\n            this.#currentThenable.reject(\n              new Error(\n                \"experimental_prefetchInRender feature flag is not enabled\"\n              )\n            );\n          }\n        }\n        return Reflect.get(target, key);\n      }\n    });\n  }\n  trackProp(key) {\n    this.#trackedProps.add(key);\n  }\n  getCurrentQuery() {\n    return this.#currentQuery;\n  }\n  refetch({ ...options } = {}) {\n    return this.fetch({\n      ...options\n    });\n  }\n  fetchOptimistic(options) {\n    const defaultedOptions = this.#client.defaultQueryOptions(options);\n    const query = this.#client.getQueryCache().build(this.#client, defaultedOptions);\n    return query.fetch().then(() => this.createResult(query, defaultedOptions));\n  }\n  fetch(fetchOptions) {\n    return this.#executeFetch({\n      ...fetchOptions,\n      cancelRefetch: fetchOptions.cancelRefetch ?? true\n    }).then(() => {\n      this.updateResult();\n      return this.#currentResult;\n    });\n  }\n  #executeFetch(fetchOptions) {\n    this.#updateQuery();\n    let promise = this.#currentQuery.fetch(\n      this.options,\n      fetchOptions\n    );\n    if (!fetchOptions?.throwOnError) {\n      promise = promise.catch(noop);\n    }\n    return promise;\n  }\n  #updateStaleTimeout() {\n    this.#clearStaleTimeout();\n    const staleTime = resolveStaleTime(\n      this.options.staleTime,\n      this.#currentQuery\n    );\n    if (isServer || this.#currentResult.isStale || !isValidTimeout(staleTime)) {\n      return;\n    }\n    const time = timeUntilStale(this.#currentResult.dataUpdatedAt, staleTime);\n    const timeout = time + 1;\n    this.#staleTimeoutId = timeoutManager.setTimeout(() => {\n      if (!this.#currentResult.isStale) {\n        this.updateResult();\n      }\n    }, timeout);\n  }\n  #computeRefetchInterval() {\n    return (typeof this.options.refetchInterval === \"function\" ? this.options.refetchInterval(this.#currentQuery) : this.options.refetchInterval) ?? false;\n  }\n  #updateRefetchInterval(nextInterval) {\n    this.#clearRefetchInterval();\n    this.#currentRefetchInterval = nextInterval;\n    if (isServer || resolveEnabled(this.options.enabled, this.#currentQuery) === false || !isValidTimeout(this.#currentRefetchInterval) || this.#currentRefetchInterval === 0) {\n      return;\n    }\n    this.#refetchIntervalId = timeoutManager.setInterval(() => {\n      if (this.options.refetchIntervalInBackground || focusManager.isFocused()) {\n        this.#executeFetch();\n      }\n    }, this.#currentRefetchInterval);\n  }\n  #updateTimers() {\n    this.#updateStaleTimeout();\n    this.#updateRefetchInterval(this.#computeRefetchInterval());\n  }\n  #clearStaleTimeout() {\n    if (this.#staleTimeoutId) {\n      timeoutManager.clearTimeout(this.#staleTimeoutId);\n      this.#staleTimeoutId = void 0;\n    }\n  }\n  #clearRefetchInterval() {\n    if (this.#refetchIntervalId) {\n      timeoutManager.clearInterval(this.#refetchIntervalId);\n      this.#refetchIntervalId = void 0;\n    }\n  }\n  createResult(query, options) {\n    const prevQuery = this.#currentQuery;\n    const prevOptions = this.options;\n    const prevResult = this.#currentResult;\n    const prevResultState = this.#currentResultState;\n    const prevResultOptions = this.#currentResultOptions;\n    const queryChange = query !== prevQuery;\n    const queryInitialState = queryChange ? query.state : this.#currentQueryInitialState;\n    const { state } = query;\n    let newState = { ...state };\n    let isPlaceholderData = false;\n    let data;\n    if (options._optimisticResults) {\n      const mounted = this.hasListeners();\n      const fetchOnMount = !mounted && shouldFetchOnMount(query, options);\n      const fetchOptionally = mounted && shouldFetchOptionally(query, prevQuery, options, prevOptions);\n      if (fetchOnMount || fetchOptionally) {\n        newState = {\n          ...newState,\n          ...fetchState(state.data, query.options)\n        };\n      }\n      if (options._optimisticResults === \"isRestoring\") {\n        newState.fetchStatus = \"idle\";\n      }\n    }\n    let { error, errorUpdatedAt, status } = newState;\n    data = newState.data;\n    let skipSelect = false;\n    if (options.placeholderData !== void 0 && data === void 0 && status === \"pending\") {\n      let placeholderData;\n      if (prevResult?.isPlaceholderData && options.placeholderData === prevResultOptions?.placeholderData) {\n        placeholderData = prevResult.data;\n        skipSelect = true;\n      } else {\n        placeholderData = typeof options.placeholderData === \"function\" ? options.placeholderData(\n          this.#lastQueryWithDefinedData?.state.data,\n          this.#lastQueryWithDefinedData\n        ) : options.placeholderData;\n      }\n      if (placeholderData !== void 0) {\n        status = \"success\";\n        data = replaceData(\n          prevResult?.data,\n          placeholderData,\n          options\n        );\n        isPlaceholderData = true;\n      }\n    }\n    if (options.select && data !== void 0 && !skipSelect) {\n      if (prevResult && data === prevResultState?.data && options.select === this.#selectFn) {\n        data = this.#selectResult;\n      } else {\n        try {\n          this.#selectFn = options.select;\n          data = options.select(data);\n          data = replaceData(prevResult?.data, data, options);\n          this.#selectResult = data;\n          this.#selectError = null;\n        } catch (selectError) {\n          this.#selectError = selectError;\n        }\n      }\n    }\n    if (this.#selectError) {\n      error = this.#selectError;\n      data = this.#selectResult;\n      errorUpdatedAt = Date.now();\n      status = \"error\";\n    }\n    const isFetching = newState.fetchStatus === \"fetching\";\n    const isPending = status === \"pending\";\n    const isError = status === \"error\";\n    const isLoading = isPending && isFetching;\n    const hasData = data !== void 0;\n    const result = {\n      status,\n      fetchStatus: newState.fetchStatus,\n      isPending,\n      isSuccess: status === \"success\",\n      isError,\n      isInitialLoading: isLoading,\n      isLoading,\n      data,\n      dataUpdatedAt: newState.dataUpdatedAt,\n      error,\n      errorUpdatedAt,\n      failureCount: newState.fetchFailureCount,\n      failureReason: newState.fetchFailureReason,\n      errorUpdateCount: newState.errorUpdateCount,\n      isFetched: newState.dataUpdateCount > 0 || newState.errorUpdateCount > 0,\n      isFetchedAfterMount: newState.dataUpdateCount > queryInitialState.dataUpdateCount || newState.errorUpdateCount > queryInitialState.errorUpdateCount,\n      isFetching,\n      isRefetching: isFetching && !isPending,\n      isLoadingError: isError && !hasData,\n      isPaused: newState.fetchStatus === \"paused\",\n      isPlaceholderData,\n      isRefetchError: isError && hasData,\n      isStale: isStale(query, options),\n      refetch: this.refetch,\n      promise: this.#currentThenable,\n      isEnabled: resolveEnabled(options.enabled, query) !== false\n    };\n    const nextResult = result;\n    if (this.options.experimental_prefetchInRender) {\n      const finalizeThenableIfPossible = (thenable) => {\n        if (nextResult.status === \"error\") {\n          thenable.reject(nextResult.error);\n        } else if (nextResult.data !== void 0) {\n          thenable.resolve(nextResult.data);\n        }\n      };\n      const recreateThenable = () => {\n        const pending = this.#currentThenable = nextResult.promise = pendingThenable();\n        finalizeThenableIfPossible(pending);\n      };\n      const prevThenable = this.#currentThenable;\n      switch (prevThenable.status) {\n        case \"pending\":\n          if (query.queryHash === prevQuery.queryHash) {\n            finalizeThenableIfPossible(prevThenable);\n          }\n          break;\n        case \"fulfilled\":\n          if (nextResult.status === \"error\" || nextResult.data !== prevThenable.value) {\n            recreateThenable();\n          }\n          break;\n        case \"rejected\":\n          if (nextResult.status !== \"error\" || nextResult.error !== prevThenable.reason) {\n            recreateThenable();\n          }\n          break;\n      }\n    }\n    return nextResult;\n  }\n  updateResult() {\n    const prevResult = this.#currentResult;\n    const nextResult = this.createResult(this.#currentQuery, this.options);\n    this.#currentResultState = this.#currentQuery.state;\n    this.#currentResultOptions = this.options;\n    if (this.#currentResultState.data !== void 0) {\n      this.#lastQueryWithDefinedData = this.#currentQuery;\n    }\n    if (shallowEqualObjects(nextResult, prevResult)) {\n      return;\n    }\n    this.#currentResult = nextResult;\n    const shouldNotifyListeners = () => {\n      if (!prevResult) {\n        return true;\n      }\n      const { notifyOnChangeProps } = this.options;\n      const notifyOnChangePropsValue = typeof notifyOnChangeProps === \"function\" ? notifyOnChangeProps() : notifyOnChangeProps;\n      if (notifyOnChangePropsValue === \"all\" || !notifyOnChangePropsValue && !this.#trackedProps.size) {\n        return true;\n      }\n      const includedProps = new Set(\n        notifyOnChangePropsValue ?? this.#trackedProps\n      );\n      if (this.options.throwOnError) {\n        includedProps.add(\"error\");\n      }\n      return Object.keys(this.#currentResult).some((key) => {\n        const typedKey = key;\n        const changed = this.#currentResult[typedKey] !== prevResult[typedKey];\n        return changed && includedProps.has(typedKey);\n      });\n    };\n    this.#notify({ listeners: shouldNotifyListeners() });\n  }\n  #updateQuery() {\n    const query = this.#client.getQueryCache().build(this.#client, this.options);\n    if (query === this.#currentQuery) {\n      return;\n    }\n    const prevQuery = this.#currentQuery;\n    this.#currentQuery = query;\n    this.#currentQueryInitialState = query.state;\n    if (this.hasListeners()) {\n      prevQuery?.removeObserver(this);\n      query.addObserver(this);\n    }\n  }\n  onQueryUpdate() {\n    this.updateResult();\n    if (this.hasListeners()) {\n      this.#updateTimers();\n    }\n  }\n  #notify(notifyOptions) {\n    notifyManager.batch(() => {\n      if (notifyOptions.listeners) {\n        this.listeners.forEach((listener) => {\n          listener(this.#currentResult);\n        });\n      }\n      this.#client.getQueryCache().notify({\n        query: this.#currentQuery,\n        type: \"observerResultsUpdated\"\n      });\n    });\n  }\n};\nfunction shouldLoadOnMount(query, options) {\n  return resolveEnabled(options.enabled, query) !== false && query.state.data === void 0 && !(query.state.status === \"error\" && options.retryOnMount === false);\n}\nfunction shouldFetchOnMount(query, options) {\n  return shouldLoadOnMount(query, options) || query.state.data !== void 0 && shouldFetchOn(query, options, options.refetchOnMount);\n}\nfunction shouldFetchOn(query, options, field) {\n  if (resolveEnabled(options.enabled, query) !== false && resolveStaleTime(options.staleTime, query) !== \"static\") {\n    const value = typeof field === \"function\" ? field(query) : field;\n    return value === \"always\" || value !== false && isStale(query, options);\n  }\n  return false;\n}\nfunction shouldFetchOptionally(query, prevQuery, options, prevOptions) {\n  return (query !== prevQuery || resolveEnabled(prevOptions.enabled, query) === false) && (!options.suspense || query.state.status !== \"error\") && isStale(query, options);\n}\nfunction isStale(query, options) {\n  return resolveEnabled(options.enabled, query) !== false && query.isStaleByTime(resolveStaleTime(options.staleTime, query));\n}\nfunction shouldAssignObserverCurrentProperties(observer, optimisticResult) {\n  if (!shallowEqualObjects(observer.getCurrentResult(), optimisticResult)) {\n    return true;\n  }\n  return false;\n}\nexport {\n  QueryObserver\n};\n//# sourceMappingURL=queryObserver.js.map","// src/infiniteQueryBehavior.ts\nimport { addToEnd, addToStart, ensureQueryFn } from \"./utils.js\";\nfunction infiniteQueryBehavior(pages) {\n  return {\n    onFetch: (context, query) => {\n      const options = context.options;\n      const direction = context.fetchOptions?.meta?.fetchMore?.direction;\n      const oldPages = context.state.data?.pages || [];\n      const oldPageParams = context.state.data?.pageParams || [];\n      let result = { pages: [], pageParams: [] };\n      let currentPage = 0;\n      const fetchFn = async () => {\n        let cancelled = false;\n        const addSignalProperty = (object) => {\n          Object.defineProperty(object, \"signal\", {\n            enumerable: true,\n            get: () => {\n              if (context.signal.aborted) {\n                cancelled = true;\n              } else {\n                context.signal.addEventListener(\"abort\", () => {\n                  cancelled = true;\n                });\n              }\n              return context.signal;\n            }\n          });\n        };\n        const queryFn = ensureQueryFn(context.options, context.fetchOptions);\n        const fetchPage = async (data, param, previous) => {\n          if (cancelled) {\n            return Promise.reject();\n          }\n          if (param == null && data.pages.length) {\n            return Promise.resolve(data);\n          }\n          const createQueryFnContext = () => {\n            const queryFnContext2 = {\n              client: context.client,\n              queryKey: context.queryKey,\n              pageParam: param,\n              direction: previous ? \"backward\" : \"forward\",\n              meta: context.options.meta\n            };\n            addSignalProperty(queryFnContext2);\n            return queryFnContext2;\n          };\n          const queryFnContext = createQueryFnContext();\n          const page = await queryFn(queryFnContext);\n          const { maxPages } = context.options;\n          const addTo = previous ? addToStart : addToEnd;\n          return {\n            pages: addTo(data.pages, page, maxPages),\n            pageParams: addTo(data.pageParams, param, maxPages)\n          };\n        };\n        if (direction && oldPages.length) {\n          const previous = direction === \"backward\";\n          const pageParamFn = previous ? getPreviousPageParam : getNextPageParam;\n          const oldData = {\n            pages: oldPages,\n            pageParams: oldPageParams\n          };\n          const param = pageParamFn(options, oldData);\n          result = await fetchPage(oldData, param, previous);\n        } else {\n          const remainingPages = pages ?? oldPages.length;\n          do {\n            const param = currentPage === 0 ? oldPageParams[0] ?? options.initialPageParam : getNextPageParam(options, result);\n            if (currentPage > 0 && param == null) {\n              break;\n            }\n            result = await fetchPage(result, param);\n            currentPage++;\n          } while (currentPage < remainingPages);\n        }\n        return result;\n      };\n      if (context.options.persister) {\n        context.fetchFn = () => {\n          return context.options.persister?.(\n            fetchFn,\n            {\n              client: context.client,\n              queryKey: context.queryKey,\n              meta: context.options.meta,\n              signal: context.signal\n            },\n            query\n          );\n        };\n      } else {\n        context.fetchFn = fetchFn;\n      }\n    }\n  };\n}\nfunction getNextPageParam(options, { pages, pageParams }) {\n  const lastIndex = pages.length - 1;\n  return pages.length > 0 ? options.getNextPageParam(\n    pages[lastIndex],\n    pages,\n    pageParams[lastIndex],\n    pageParams\n  ) : void 0;\n}\nfunction getPreviousPageParam(options, { pages, pageParams }) {\n  return pages.length > 0 ? options.getPreviousPageParam?.(pages[0], pages, pageParams[0], pageParams) : void 0;\n}\nfunction hasNextPage(options, data) {\n  if (!data) return false;\n  return getNextPageParam(options, data) != null;\n}\nfunction hasPreviousPage(options, data) {\n  if (!data || !options.getPreviousPageParam) return false;\n  return getPreviousPageParam(options, data) != null;\n}\nexport {\n  hasNextPage,\n  hasPreviousPage,\n  infiniteQueryBehavior\n};\n//# sourceMappingURL=infiniteQueryBehavior.js.map","// src/mutation.ts\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Removable } from \"./removable.js\";\nimport { createRetryer } from \"./retryer.js\";\nvar Mutation = class extends Removable {\n  #client;\n  #observers;\n  #mutationCache;\n  #retryer;\n  constructor(config) {\n    super();\n    this.#client = config.client;\n    this.mutationId = config.mutationId;\n    this.#mutationCache = config.mutationCache;\n    this.#observers = [];\n    this.state = config.state || getDefaultState();\n    this.setOptions(config.options);\n    this.scheduleGc();\n  }\n  setOptions(options) {\n    this.options = options;\n    this.updateGcTime(this.options.gcTime);\n  }\n  get meta() {\n    return this.options.meta;\n  }\n  addObserver(observer) {\n    if (!this.#observers.includes(observer)) {\n      this.#observers.push(observer);\n      this.clearGcTimeout();\n      this.#mutationCache.notify({\n        type: \"observerAdded\",\n        mutation: this,\n        observer\n      });\n    }\n  }\n  removeObserver(observer) {\n    this.#observers = this.#observers.filter((x) => x !== observer);\n    this.scheduleGc();\n    this.#mutationCache.notify({\n      type: \"observerRemoved\",\n      mutation: this,\n      observer\n    });\n  }\n  optionalRemove() {\n    if (!this.#observers.length) {\n      if (this.state.status === \"pending\") {\n        this.scheduleGc();\n      } else {\n        this.#mutationCache.remove(this);\n      }\n    }\n  }\n  continue() {\n    return this.#retryer?.continue() ?? // continuing a mutation assumes that variables are set, mutation must have been dehydrated before\n    this.execute(this.state.variables);\n  }\n  async execute(variables) {\n    const onContinue = () => {\n      this.#dispatch({ type: \"continue\" });\n    };\n    const mutationFnContext = {\n      client: this.#client,\n      meta: this.options.meta,\n      mutationKey: this.options.mutationKey\n    };\n    this.#retryer = createRetryer({\n      fn: () => {\n        if (!this.options.mutationFn) {\n          return Promise.reject(new Error(\"No mutationFn found\"));\n        }\n        return this.options.mutationFn(variables, mutationFnContext);\n      },\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: \"failed\", failureCount, error });\n      },\n      onPause: () => {\n        this.#dispatch({ type: \"pause\" });\n      },\n      onContinue,\n      retry: this.options.retry ?? 0,\n      retryDelay: this.options.retryDelay,\n      networkMode: this.options.networkMode,\n      canRun: () => this.#mutationCache.canRun(this)\n    });\n    const restored = this.state.status === \"pending\";\n    const isPaused = !this.#retryer.canStart();\n    try {\n      if (restored) {\n        onContinue();\n      } else {\n        this.#dispatch({ type: \"pending\", variables, isPaused });\n        await this.#mutationCache.config.onMutate?.(\n          variables,\n          this,\n          mutationFnContext\n        );\n        const context = await this.options.onMutate?.(\n          variables,\n          mutationFnContext\n        );\n        if (context !== this.state.context) {\n          this.#dispatch({\n            type: \"pending\",\n            context,\n            variables,\n            isPaused\n          });\n        }\n      }\n      const data = await this.#retryer.start();\n      await this.#mutationCache.config.onSuccess?.(\n        data,\n        variables,\n        this.state.context,\n        this,\n        mutationFnContext\n      );\n      await this.options.onSuccess?.(\n        data,\n        variables,\n        this.state.context,\n        mutationFnContext\n      );\n      await this.#mutationCache.config.onSettled?.(\n        data,\n        null,\n        this.state.variables,\n        this.state.context,\n        this,\n        mutationFnContext\n      );\n      await this.options.onSettled?.(\n        data,\n        null,\n        variables,\n        this.state.context,\n        mutationFnContext\n      );\n      this.#dispatch({ type: \"success\", data });\n      return data;\n    } catch (error) {\n      try {\n        await this.#mutationCache.config.onError?.(\n          error,\n          variables,\n          this.state.context,\n          this,\n          mutationFnContext\n        );\n        await this.options.onError?.(\n          error,\n          variables,\n          this.state.context,\n          mutationFnContext\n        );\n        await this.#mutationCache.config.onSettled?.(\n          void 0,\n          error,\n          this.state.variables,\n          this.state.context,\n          this,\n          mutationFnContext\n        );\n        await this.options.onSettled?.(\n          void 0,\n          error,\n          variables,\n          this.state.context,\n          mutationFnContext\n        );\n        throw error;\n      } finally {\n        this.#dispatch({ type: \"error\", error });\n      }\n    } finally {\n      this.#mutationCache.runNext(this);\n    }\n  }\n  #dispatch(action) {\n    const reducer = (state) => {\n      switch (action.type) {\n        case \"failed\":\n          return {\n            ...state,\n            failureCount: action.failureCount,\n            failureReason: action.error\n          };\n        case \"pause\":\n          return {\n            ...state,\n            isPaused: true\n          };\n        case \"continue\":\n          return {\n            ...state,\n            isPaused: false\n          };\n        case \"pending\":\n          return {\n            ...state,\n            context: action.context,\n            data: void 0,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            isPaused: action.isPaused,\n            status: \"pending\",\n            variables: action.variables,\n            submittedAt: Date.now()\n          };\n        case \"success\":\n          return {\n            ...state,\n            data: action.data,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            status: \"success\",\n            isPaused: false\n          };\n        case \"error\":\n          return {\n            ...state,\n            data: void 0,\n            error: action.error,\n            failureCount: state.failureCount + 1,\n            failureReason: action.error,\n            isPaused: false,\n            status: \"error\"\n          };\n      }\n    };\n    this.state = reducer(this.state);\n    notifyManager.batch(() => {\n      this.#observers.forEach((observer) => {\n        observer.onMutationUpdate(action);\n      });\n      this.#mutationCache.notify({\n        mutation: this,\n        type: \"updated\",\n        action\n      });\n    });\n  }\n};\nfunction getDefaultState() {\n  return {\n    context: void 0,\n    data: void 0,\n    error: null,\n    failureCount: 0,\n    failureReason: null,\n    isPaused: false,\n    status: \"idle\",\n    variables: void 0,\n    submittedAt: 0\n  };\n}\nexport {\n  Mutation,\n  getDefaultState\n};\n//# sourceMappingURL=mutation.js.map","// src/mutationCache.ts\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Mutation } from \"./mutation.js\";\nimport { matchMutation, noop } from \"./utils.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar MutationCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#mutations = /* @__PURE__ */ new Set();\n    this.#scopes = /* @__PURE__ */ new Map();\n    this.#mutationId = 0;\n  }\n  #mutations;\n  #scopes;\n  #mutationId;\n  build(client, options, state) {\n    const mutation = new Mutation({\n      client,\n      mutationCache: this,\n      mutationId: ++this.#mutationId,\n      options: client.defaultMutationOptions(options),\n      state\n    });\n    this.add(mutation);\n    return mutation;\n  }\n  add(mutation) {\n    this.#mutations.add(mutation);\n    const scope = scopeFor(mutation);\n    if (typeof scope === \"string\") {\n      const scopedMutations = this.#scopes.get(scope);\n      if (scopedMutations) {\n        scopedMutations.push(mutation);\n      } else {\n        this.#scopes.set(scope, [mutation]);\n      }\n    }\n    this.notify({ type: \"added\", mutation });\n  }\n  remove(mutation) {\n    if (this.#mutations.delete(mutation)) {\n      const scope = scopeFor(mutation);\n      if (typeof scope === \"string\") {\n        const scopedMutations = this.#scopes.get(scope);\n        if (scopedMutations) {\n          if (scopedMutations.length > 1) {\n            const index = scopedMutations.indexOf(mutation);\n            if (index !== -1) {\n              scopedMutations.splice(index, 1);\n            }\n          } else if (scopedMutations[0] === mutation) {\n            this.#scopes.delete(scope);\n          }\n        }\n      }\n    }\n    this.notify({ type: \"removed\", mutation });\n  }\n  canRun(mutation) {\n    const scope = scopeFor(mutation);\n    if (typeof scope === \"string\") {\n      const mutationsWithSameScope = this.#scopes.get(scope);\n      const firstPendingMutation = mutationsWithSameScope?.find(\n        (m) => m.state.status === \"pending\"\n      );\n      return !firstPendingMutation || firstPendingMutation === mutation;\n    } else {\n      return true;\n    }\n  }\n  runNext(mutation) {\n    const scope = scopeFor(mutation);\n    if (typeof scope === \"string\") {\n      const foundMutation = this.#scopes.get(scope)?.find((m) => m !== mutation && m.state.isPaused);\n      return foundMutation?.continue() ?? Promise.resolve();\n    } else {\n      return Promise.resolve();\n    }\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.#mutations.forEach((mutation) => {\n        this.notify({ type: \"removed\", mutation });\n      });\n      this.#mutations.clear();\n      this.#scopes.clear();\n    });\n  }\n  getAll() {\n    return Array.from(this.#mutations);\n  }\n  find(filters) {\n    const defaultedFilters = { exact: true, ...filters };\n    return this.getAll().find(\n      (mutation) => matchMutation(defaultedFilters, mutation)\n    );\n  }\n  findAll(filters = {}) {\n    return this.getAll().filter((mutation) => matchMutation(filters, mutation));\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event);\n      });\n    });\n  }\n  resumePausedMutations() {\n    const pausedMutations = this.getAll().filter((x) => x.state.isPaused);\n    return notifyManager.batch(\n      () => Promise.all(\n        pausedMutations.map((mutation) => mutation.continue().catch(noop))\n      )\n    );\n  }\n};\nfunction scopeFor(mutation) {\n  return mutation.options.scope?.id;\n}\nexport {\n  MutationCache\n};\n//# sourceMappingURL=mutationCache.js.map","// src/queryCache.ts\nimport { hashQueryKeyByOptions, matchQuery } from \"./utils.js\";\nimport { Query } from \"./query.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar QueryCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#queries = /* @__PURE__ */ new Map();\n  }\n  #queries;\n  build(client, options, state) {\n    const queryKey = options.queryKey;\n    const queryHash = options.queryHash ?? hashQueryKeyByOptions(queryKey, options);\n    let query = this.get(queryHash);\n    if (!query) {\n      query = new Query({\n        client,\n        queryKey,\n        queryHash,\n        options: client.defaultQueryOptions(options),\n        state,\n        defaultOptions: client.getQueryDefaults(queryKey)\n      });\n      this.add(query);\n    }\n    return query;\n  }\n  add(query) {\n    if (!this.#queries.has(query.queryHash)) {\n      this.#queries.set(query.queryHash, query);\n      this.notify({\n        type: \"added\",\n        query\n      });\n    }\n  }\n  remove(query) {\n    const queryInMap = this.#queries.get(query.queryHash);\n    if (queryInMap) {\n      query.destroy();\n      if (queryInMap === query) {\n        this.#queries.delete(query.queryHash);\n      }\n      this.notify({ type: \"removed\", query });\n    }\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        this.remove(query);\n      });\n    });\n  }\n  get(queryHash) {\n    return this.#queries.get(queryHash);\n  }\n  getAll() {\n    return [...this.#queries.values()];\n  }\n  find(filters) {\n    const defaultedFilters = { exact: true, ...filters };\n    return this.getAll().find(\n      (query) => matchQuery(defaultedFilters, query)\n    );\n  }\n  findAll(filters = {}) {\n    const queries = this.getAll();\n    return Object.keys(filters).length > 0 ? queries.filter((query) => matchQuery(filters, query)) : queries;\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event);\n      });\n    });\n  }\n  onFocus() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onFocus();\n      });\n    });\n  }\n  onOnline() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onOnline();\n      });\n    });\n  }\n};\nexport {\n  QueryCache\n};\n//# sourceMappingURL=queryCache.js.map","// src/queryClient.ts\nimport {\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  noop,\n  partialMatchKey,\n  resolveStaleTime,\n  skipToken\n} from \"./utils.js\";\nimport { QueryCache } from \"./queryCache.js\";\nimport { MutationCache } from \"./mutationCache.js\";\nimport { focusManager } from \"./focusManager.js\";\nimport { onlineManager } from \"./onlineManager.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { infiniteQueryBehavior } from \"./infiniteQueryBehavior.js\";\nvar QueryClient = class {\n  #queryCache;\n  #mutationCache;\n  #defaultOptions;\n  #queryDefaults;\n  #mutationDefaults;\n  #mountCount;\n  #unsubscribeFocus;\n  #unsubscribeOnline;\n  constructor(config = {}) {\n    this.#queryCache = config.queryCache || new QueryCache();\n    this.#mutationCache = config.mutationCache || new MutationCache();\n    this.#defaultOptions = config.defaultOptions || {};\n    this.#queryDefaults = /* @__PURE__ */ new Map();\n    this.#mutationDefaults = /* @__PURE__ */ new Map();\n    this.#mountCount = 0;\n  }\n  mount() {\n    this.#mountCount++;\n    if (this.#mountCount !== 1) return;\n    this.#unsubscribeFocus = focusManager.subscribe(async (focused) => {\n      if (focused) {\n        await this.resumePausedMutations();\n        this.#queryCache.onFocus();\n      }\n    });\n    this.#unsubscribeOnline = onlineManager.subscribe(async (online) => {\n      if (online) {\n        await this.resumePausedMutations();\n        this.#queryCache.onOnline();\n      }\n    });\n  }\n  unmount() {\n    this.#mountCount--;\n    if (this.#mountCount !== 0) return;\n    this.#unsubscribeFocus?.();\n    this.#unsubscribeFocus = void 0;\n    this.#unsubscribeOnline?.();\n    this.#unsubscribeOnline = void 0;\n  }\n  isFetching(filters) {\n    return this.#queryCache.findAll({ ...filters, fetchStatus: \"fetching\" }).length;\n  }\n  isMutating(filters) {\n    return this.#mutationCache.findAll({ ...filters, status: \"pending\" }).length;\n  }\n  /**\n   * Imperative (non-reactive) way to retrieve data for a QueryKey.\n   * Should only be used in callbacks or functions where reading the latest data is necessary, e.g. for optimistic updates.\n   *\n   * Hint: Do not use this function inside a component, because it won't receive updates.\n   * Use `useQuery` to create a `QueryObserver` that subscribes to changes.\n   */\n  getQueryData(queryKey) {\n    const options = this.defaultQueryOptions({ queryKey });\n    return this.#queryCache.get(options.queryHash)?.state.data;\n  }\n  ensureQueryData(options) {\n    const defaultedOptions = this.defaultQueryOptions(options);\n    const query = this.#queryCache.build(this, defaultedOptions);\n    const cachedData = query.state.data;\n    if (cachedData === void 0) {\n      return this.fetchQuery(options);\n    }\n    if (options.revalidateIfStale && query.isStaleByTime(resolveStaleTime(defaultedOptions.staleTime, query))) {\n      void this.prefetchQuery(defaultedOptions);\n    }\n    return Promise.resolve(cachedData);\n  }\n  getQueriesData(filters) {\n    return this.#queryCache.findAll(filters).map(({ queryKey, state }) => {\n      const data = state.data;\n      return [queryKey, data];\n    });\n  }\n  setQueryData(queryKey, updater, options) {\n    const defaultedOptions = this.defaultQueryOptions({ queryKey });\n    const query = this.#queryCache.get(\n      defaultedOptions.queryHash\n    );\n    const prevData = query?.state.data;\n    const data = functionalUpdate(updater, prevData);\n    if (data === void 0) {\n      return void 0;\n    }\n    return this.#queryCache.build(this, defaultedOptions).setData(data, { ...options, manual: true });\n  }\n  setQueriesData(filters, updater, options) {\n    return notifyManager.batch(\n      () => this.#queryCache.findAll(filters).map(({ queryKey }) => [\n        queryKey,\n        this.setQueryData(queryKey, updater, options)\n      ])\n    );\n  }\n  getQueryState(queryKey) {\n    const options = this.defaultQueryOptions({ queryKey });\n    return this.#queryCache.get(\n      options.queryHash\n    )?.state;\n  }\n  removeQueries(filters) {\n    const queryCache = this.#queryCache;\n    notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        queryCache.remove(query);\n      });\n    });\n  }\n  resetQueries(filters, options) {\n    const queryCache = this.#queryCache;\n    return notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        query.reset();\n      });\n      return this.refetchQueries(\n        {\n          type: \"active\",\n          ...filters\n        },\n        options\n      );\n    });\n  }\n  cancelQueries(filters, cancelOptions = {}) {\n    const defaultedCancelOptions = { revert: true, ...cancelOptions };\n    const promises = notifyManager.batch(\n      () => this.#queryCache.findAll(filters).map((query) => query.cancel(defaultedCancelOptions))\n    );\n    return Promise.all(promises).then(noop).catch(noop);\n  }\n  invalidateQueries(filters, options = {}) {\n    return notifyManager.batch(() => {\n      this.#queryCache.findAll(filters).forEach((query) => {\n        query.invalidate();\n      });\n      if (filters?.refetchType === \"none\") {\n        return Promise.resolve();\n      }\n      return this.refetchQueries(\n        {\n          ...filters,\n          type: filters?.refetchType ?? filters?.type ?? \"active\"\n        },\n        options\n      );\n    });\n  }\n  refetchQueries(filters, options = {}) {\n    const fetchOptions = {\n      ...options,\n      cancelRefetch: options.cancelRefetch ?? true\n    };\n    const promises = notifyManager.batch(\n      () => this.#queryCache.findAll(filters).filter((query) => !query.isDisabled() && !query.isStatic()).map((query) => {\n        let promise = query.fetch(void 0, fetchOptions);\n        if (!fetchOptions.throwOnError) {\n          promise = promise.catch(noop);\n        }\n        return query.state.fetchStatus === \"paused\" ? Promise.resolve() : promise;\n      })\n    );\n    return Promise.all(promises).then(noop);\n  }\n  fetchQuery(options) {\n    const defaultedOptions = this.defaultQueryOptions(options);\n    if (defaultedOptions.retry === void 0) {\n      defaultedOptions.retry = false;\n    }\n    const query = this.#queryCache.build(this, defaultedOptions);\n    return query.isStaleByTime(\n      resolveStaleTime(defaultedOptions.staleTime, query)\n    ) ? query.fetch(defaultedOptions) : Promise.resolve(query.state.data);\n  }\n  prefetchQuery(options) {\n    return this.fetchQuery(options).then(noop).catch(noop);\n  }\n  fetchInfiniteQuery(options) {\n    options.behavior = infiniteQueryBehavior(options.pages);\n    return this.fetchQuery(options);\n  }\n  prefetchInfiniteQuery(options) {\n    return this.fetchInfiniteQuery(options).then(noop).catch(noop);\n  }\n  ensureInfiniteQueryData(options) {\n    options.behavior = infiniteQueryBehavior(options.pages);\n    return this.ensureQueryData(options);\n  }\n  resumePausedMutations() {\n    if (onlineManager.isOnline()) {\n      return this.#mutationCache.resumePausedMutations();\n    }\n    return Promise.resolve();\n  }\n  getQueryCache() {\n    return this.#queryCache;\n  }\n  getMutationCache() {\n    return this.#mutationCache;\n  }\n  getDefaultOptions() {\n    return this.#defaultOptions;\n  }\n  setDefaultOptions(options) {\n    this.#defaultOptions = options;\n  }\n  setQueryDefaults(queryKey, options) {\n    this.#queryDefaults.set(hashKey(queryKey), {\n      queryKey,\n      defaultOptions: options\n    });\n  }\n  getQueryDefaults(queryKey) {\n    const defaults = [...this.#queryDefaults.values()];\n    const result = {};\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(queryKey, queryDefault.queryKey)) {\n        Object.assign(result, queryDefault.defaultOptions);\n      }\n    });\n    return result;\n  }\n  setMutationDefaults(mutationKey, options) {\n    this.#mutationDefaults.set(hashKey(mutationKey), {\n      mutationKey,\n      defaultOptions: options\n    });\n  }\n  getMutationDefaults(mutationKey) {\n    const defaults = [...this.#mutationDefaults.values()];\n    const result = {};\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(mutationKey, queryDefault.mutationKey)) {\n        Object.assign(result, queryDefault.defaultOptions);\n      }\n    });\n    return result;\n  }\n  defaultQueryOptions(options) {\n    if (options._defaulted) {\n      return options;\n    }\n    const defaultedOptions = {\n      ...this.#defaultOptions.queries,\n      ...this.getQueryDefaults(options.queryKey),\n      ...options,\n      _defaulted: true\n    };\n    if (!defaultedOptions.queryHash) {\n      defaultedOptions.queryHash = hashQueryKeyByOptions(\n        defaultedOptions.queryKey,\n        defaultedOptions\n      );\n    }\n    if (defaultedOptions.refetchOnReconnect === void 0) {\n      defaultedOptions.refetchOnReconnect = defaultedOptions.networkMode !== \"always\";\n    }\n    if (defaultedOptions.throwOnError === void 0) {\n      defaultedOptions.throwOnError = !!defaultedOptions.suspense;\n    }\n    if (!defaultedOptions.networkMode && defaultedOptions.persister) {\n      defaultedOptions.networkMode = \"offlineFirst\";\n    }\n    if (defaultedOptions.queryFn === skipToken) {\n      defaultedOptions.enabled = false;\n    }\n    return defaultedOptions;\n  }\n  defaultMutationOptions(options) {\n    if (options?._defaulted) {\n      return options;\n    }\n    return {\n      ...this.#defaultOptions.mutations,\n      ...options?.mutationKey && this.getMutationDefaults(options.mutationKey),\n      ...options,\n      _defaulted: true\n    };\n  }\n  clear() {\n    this.#queryCache.clear();\n    this.#mutationCache.clear();\n  }\n};\nexport {\n  QueryClient\n};\n//# sourceMappingURL=queryClient.js.map","\"use client\";\n\n// src/QueryClientProvider.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nvar QueryClientContext = React.createContext(\n  void 0\n);\nvar useQueryClient = (queryClient) => {\n  const client = React.useContext(QueryClientContext);\n  if (queryClient) {\n    return queryClient;\n  }\n  if (!client) {\n    throw new Error(\"No QueryClient set, use QueryClientProvider to set one\");\n  }\n  return client;\n};\nvar QueryClientProvider = ({\n  client,\n  children\n}) => {\n  React.useEffect(() => {\n    client.mount();\n    return () => {\n      client.unmount();\n    };\n  }, [client]);\n  return /* @__PURE__ */ jsx(QueryClientContext.Provider, { value: client, children });\n};\nexport {\n  QueryClientContext,\n  QueryClientProvider,\n  useQueryClient\n};\n//# sourceMappingURL=QueryClientProvider.js.map","\"use client\";\n\n// src/IsRestoringProvider.ts\nimport * as React from \"react\";\nvar IsRestoringContext = React.createContext(false);\nvar useIsRestoring = () => React.useContext(IsRestoringContext);\nvar IsRestoringProvider = IsRestoringContext.Provider;\nexport {\n  IsRestoringProvider,\n  useIsRestoring\n};\n//# sourceMappingURL=IsRestoringProvider.js.map","\"use client\";\n\n// src/QueryErrorResetBoundary.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nfunction createValue() {\n  let isReset = false;\n  return {\n    clearReset: () => {\n      isReset = false;\n    },\n    reset: () => {\n      isReset = true;\n    },\n    isReset: () => {\n      return isReset;\n    }\n  };\n}\nvar QueryErrorResetBoundaryContext = React.createContext(createValue());\nvar useQueryErrorResetBoundary = () => React.useContext(QueryErrorResetBoundaryContext);\nvar QueryErrorResetBoundary = ({\n  children\n}) => {\n  const [value] = React.useState(() => createValue());\n  return /* @__PURE__ */ jsx(QueryErrorResetBoundaryContext.Provider, { value, children: typeof children === \"function\" ? children(value) : children });\n};\nexport {\n  QueryErrorResetBoundary,\n  useQueryErrorResetBoundary\n};\n//# sourceMappingURL=QueryErrorResetBoundary.js.map","\"use client\";\n\n// src/errorBoundaryUtils.ts\nimport * as React from \"react\";\nimport { shouldThrowError } from \"@tanstack/query-core\";\nvar ensurePreventErrorBoundaryRetry = (options, errorResetBoundary) => {\n  if (options.suspense || options.throwOnError || options.experimental_prefetchInRender) {\n    if (!errorResetBoundary.isReset()) {\n      options.retryOnMount = false;\n    }\n  }\n};\nvar useClearResetErrorBoundary = (errorResetBoundary) => {\n  React.useEffect(() => {\n    errorResetBoundary.clearReset();\n  }, [errorResetBoundary]);\n};\nvar getHasError = ({\n  result,\n  errorResetBoundary,\n  throwOnError,\n  query,\n  suspense\n}) => {\n  return result.isError && !errorResetBoundary.isReset() && !result.isFetching && query && (suspense && result.data === void 0 || shouldThrowError(throwOnError, [result.error, query]));\n};\nexport {\n  ensurePreventErrorBoundaryRetry,\n  getHasError,\n  useClearResetErrorBoundary\n};\n//# sourceMappingURL=errorBoundaryUtils.js.map","// src/suspense.ts\nvar defaultThrowOnError = (_error, query) => query.state.data === void 0;\nvar ensureSuspenseTimers = (defaultedOptions) => {\n  if (defaultedOptions.suspense) {\n    const MIN_SUSPENSE_TIME_MS = 1e3;\n    const clamp = (value) => value === \"static\" ? value : Math.max(value ?? MIN_SUSPENSE_TIME_MS, MIN_SUSPENSE_TIME_MS);\n    const originalStaleTime = defaultedOptions.staleTime;\n    defaultedOptions.staleTime = typeof originalStaleTime === \"function\" ? (...args) => clamp(originalStaleTime(...args)) : clamp(originalStaleTime);\n    if (typeof defaultedOptions.gcTime === \"number\") {\n      defaultedOptions.gcTime = Math.max(\n        defaultedOptions.gcTime,\n        MIN_SUSPENSE_TIME_MS\n      );\n    }\n  }\n};\nvar willFetch = (result, isRestoring) => result.isLoading && result.isFetching && !isRestoring;\nvar shouldSuspend = (defaultedOptions, result) => defaultedOptions?.suspense && result.isPending;\nvar fetchOptimistic = (defaultedOptions, observer, errorResetBoundary) => observer.fetchOptimistic(defaultedOptions).catch(() => {\n  errorResetBoundary.clearReset();\n});\nexport {\n  defaultThrowOnError,\n  ensureSuspenseTimers,\n  fetchOptimistic,\n  shouldSuspend,\n  willFetch\n};\n//# sourceMappingURL=suspense.js.map","\"use client\";\n\n// src/useBaseQuery.ts\nimport * as React from \"react\";\nimport { isServer, noop, notifyManager } from \"@tanstack/query-core\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\nimport { useQueryErrorResetBoundary } from \"./QueryErrorResetBoundary.js\";\nimport {\n  ensurePreventErrorBoundaryRetry,\n  getHasError,\n  useClearResetErrorBoundary\n} from \"./errorBoundaryUtils.js\";\nimport { useIsRestoring } from \"./IsRestoringProvider.js\";\nimport {\n  ensureSuspenseTimers,\n  fetchOptimistic,\n  shouldSuspend,\n  willFetch\n} from \"./suspense.js\";\nfunction useBaseQuery(options, Observer, queryClient) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (typeof options !== \"object\" || Array.isArray(options)) {\n      throw new Error(\n        'Bad argument type. Starting with v5, only the \"Object\" form is allowed when calling query related functions. Please use the error stack to find the culprit call. More info here: https://tanstack.com/query/latest/docs/react/guides/migrating-to-v5#supports-a-single-signature-one-object'\n      );\n    }\n  }\n  const isRestoring = useIsRestoring();\n  const errorResetBoundary = useQueryErrorResetBoundary();\n  const client = useQueryClient(queryClient);\n  const defaultedOptions = client.defaultQueryOptions(options);\n  client.getDefaultOptions().queries?._experimental_beforeQuery?.(\n    defaultedOptions\n  );\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!defaultedOptions.queryFn) {\n      console.error(\n        `[${defaultedOptions.queryHash}]: No queryFn was passed as an option, and no default queryFn was found. The queryFn parameter is only optional when using a default queryFn. More info here: https://tanstack.com/query/latest/docs/framework/react/guides/default-query-function`\n      );\n    }\n  }\n  defaultedOptions._optimisticResults = isRestoring ? \"isRestoring\" : \"optimistic\";\n  ensureSuspenseTimers(defaultedOptions);\n  ensurePreventErrorBoundaryRetry(defaultedOptions, errorResetBoundary);\n  useClearResetErrorBoundary(errorResetBoundary);\n  const isNewCacheEntry = !client.getQueryCache().get(defaultedOptions.queryHash);\n  const [observer] = React.useState(\n    () => new Observer(\n      client,\n      defaultedOptions\n    )\n  );\n  const result = observer.getOptimisticResult(defaultedOptions);\n  const shouldSubscribe = !isRestoring && options.subscribed !== false;\n  React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) => {\n        const unsubscribe = shouldSubscribe ? observer.subscribe(notifyManager.batchCalls(onStoreChange)) : noop;\n        observer.updateResult();\n        return unsubscribe;\n      },\n      [observer, shouldSubscribe]\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult()\n  );\n  React.useEffect(() => {\n    observer.setOptions(defaultedOptions);\n  }, [defaultedOptions, observer]);\n  if (shouldSuspend(defaultedOptions, result)) {\n    throw fetchOptimistic(defaultedOptions, observer, errorResetBoundary);\n  }\n  if (getHasError({\n    result,\n    errorResetBoundary,\n    throwOnError: defaultedOptions.throwOnError,\n    query: client.getQueryCache().get(defaultedOptions.queryHash),\n    suspense: defaultedOptions.suspense\n  })) {\n    throw result.error;\n  }\n  ;\n  client.getDefaultOptions().queries?._experimental_afterQuery?.(\n    defaultedOptions,\n    result\n  );\n  if (defaultedOptions.experimental_prefetchInRender && !isServer && willFetch(result, isRestoring)) {\n    const promise = isNewCacheEntry ? (\n      // Fetch immediately on render in order to ensure `.promise` is resolved even if the component is unmounted\n      fetchOptimistic(defaultedOptions, observer, errorResetBoundary)\n    ) : (\n      // subscribe to the \"cache promise\" so that we can finalize the currentThenable once data comes in\n      client.getQueryCache().get(defaultedOptions.queryHash)?.promise\n    );\n    promise?.catch(noop).finally(() => {\n      observer.updateResult();\n    });\n  }\n  return !defaultedOptions.notifyOnChangeProps ? observer.trackResult(result) : result;\n}\nexport {\n  useBaseQuery\n};\n//# sourceMappingURL=useBaseQuery.js.map","\"use client\";\n\n// src/useQuery.ts\nimport { QueryObserver } from \"@tanstack/query-core\";\nimport { useBaseQuery } from \"./useBaseQuery.js\";\nfunction useQuery(options, queryClient) {\n  return useBaseQuery(options, QueryObserver, queryClient);\n}\nexport {\n  useQuery\n};\n//# sourceMappingURL=useQuery.js.map","import axios from \"axios\";\n\n// Get API configuration - exported for ServiceHealth\nexport const getApiConfig = () => {\n  // Dynamic API URL resolution: runtime > build-time > infer from location > fallback\n  let runtimeApiUrl =\n    typeof window !== \"undefined\" &&\n    window.__CONFIG__ &&\n    window.__CONFIG__.API_URL\n      ? window.__CONFIG__.API_URL\n      : null;\n\n  let apiUrl = runtimeApiUrl || (import.meta.env && import.meta.env.VITE_API_URL);\n\n  // In development mode, use relative paths so Vite proxy handles it\n  const isDev = import.meta.env && import.meta.env.DEV;\n\n  if (!apiUrl && isDev) {\n    // Use relative path in development - Vite proxy will forward to localhost:3001\n    apiUrl = \"/\";\n  } else if (!apiUrl && typeof window !== \"undefined\") {\n    const { hostname, origin, port, protocol } = window.location;\n    if (hostname === \"localhost\" || hostname === \"127.0.0.1\") {\n      apiUrl = \"http://localhost:3001\";\n    } else {\n      // AWS or production - construct API URL with port 3001\n      // Handle both explicit ports (replace) and default ports (append)\n      const protocolHost = `${protocol}//${hostname}`;\n      apiUrl = `${protocolHost}:3001`;\n    }\n  }\n\n  // Final fallback (shouldn't reach here)\n  if (!apiUrl) {\n    apiUrl = \"/\";\n  }\n\n  // Only log in development, not in tests\n  if (typeof process === \"undefined\" || process.env.NODE_ENV !== \"test\") {\n    console.log(\" [API CONFIG] URL Resolution:\", {\n      runtimeApiUrl,\n      envApiUrl: import.meta.env && import.meta.env.VITE_API_URL,\n      finalApiUrl: apiUrl,\n      windowConfig:\n        typeof window !== \"undefined\" ? window.__CONFIG__ : \"undefined\",\n      allEnvVars: import.meta.env || {},\n    });\n  }\n\n  // Detect environment properly for both runtime and test contexts\n  const isTestEnv =\n    typeof process !== \"undefined\" && process.env.NODE_ENV === \"test\";\n  const environment = isTestEnv\n    ? \"test\"\n    : (import.meta.env && import.meta.env.MODE) || \"development\";\n  const isDevelopment = isTestEnv\n    ? true\n    : !!(import.meta.env && import.meta.env.DEV);\n  const isProduction = isTestEnv\n    ? false\n    : !!(import.meta.env && import.meta.env.PROD);\n\n  return {\n    baseURL: apiUrl,\n    isServerless: !!apiUrl && !apiUrl.includes(\"localhost\"),\n    apiUrl: apiUrl,\n    isConfigured: !!apiUrl && !apiUrl.includes(\"localhost\"),\n    environment: environment,\n    isDevelopment: isDevelopment,\n    isProduction: isProduction,\n    baseUrl: import.meta.env && import.meta.env.BASE_URL,\n    allEnvVars: import.meta.env || {},\n  };\n};\n\n// Create API instance that can be updated\nlet currentConfig = getApiConfig();\n\n// API health check state\nlet apiHealthy = true;\nlet lastHealthCheck = 0;\nconst HEALTH_CHECK_INTERVAL = 30000; // 30 seconds\n\n// Simple health check function\nconst _checkApiHealth = async () => {\n  const now = Date.now();\n  if (now - lastHealthCheck < HEALTH_CHECK_INTERVAL) {\n    return apiHealthy;\n  }\n\n  try {\n    const response = await fetch(`${currentConfig.baseURL}/health`, {\n      method: \"GET\",\n      timeout: 3000,\n      signal: AbortSignal.timeout(3000),\n    });\n    apiHealthy = response?.ok;\n    lastHealthCheck = now;\n  } catch (error) {\n    apiHealthy = false;\n    lastHealthCheck = now;\n  }\n\n  return apiHealthy;\n};\n\n// Warn if API URL is fallback (localhost) - skip in tests\nif (typeof process === \"undefined\" || process.env.NODE_ENV !== \"test\") {\n  if (!currentConfig.apiUrl || currentConfig.apiUrl.includes(\"localhost\")) {\n    console.warn(\n      \"[API CONFIG] Using fallback API URL:\",\n      currentConfig.baseURL +\n        \"\\nSet window.__CONFIG__.API_URL at runtime or VITE_API_URL at build time to override.\"\n    );\n  }\n}\n\n// Create API instance - test-safe\n// IMPORTANT: Always use absolute URL to backend for reliable proxying\nlet api = axios.create({\n  baseURL: currentConfig.baseURL, // Always use absolute URL to backend (http://localhost:3001 or production URL)\n  timeout: currentConfig.isServerless ? 45000 : 30000, // Longer timeout for Lambda cold starts\n  headers: {\n    \"Content-Type\": \"application/json\",\n    Authorization: \"Bearer dev-bypass-token\", // Development authentication\n  },\n});\n\n// Add request interceptor to track ongoing requests - test-safe\ntry {\n  if (api && api.interceptors) {\n    api.interceptors.request.use(\n      (config) => {\n        // Add timestamp for request duration tracking\n        config.metadata = { startTime: new Date() };\n        return config;\n      },\n      (error) => {\n        return Promise.reject(error);\n      }\n    );\n  }\n} catch (error) {\n  // Ignore interceptor errors in test environment\n  if (typeof process !== \"undefined\" && process.env.NODE_ENV === \"test\") {\n    console.warn(\"[API] Interceptor setup skipped in test environment\");\n  }\n}\n\n// Add response interceptor for better error handling - test-safe\ntry {\n  if (api && api.interceptors) {\n    api.interceptors.response.use(\n      (response) => {\n        // Track request duration for performance monitoring\n        if (response.config.metadata) {\n          const duration = new Date() - response.config.metadata.startTime;\n          if (duration > 10000) {\n            // Log slow requests (>10s)\n            console.warn(` Slow API request detected:`, {\n              url: response.config.url,\n              method: response.config.method,\n              duration: `${duration}ms`,\n            });\n          }\n        }\n        return response;\n      },\n      (error) => {\n        // Enhanced error handling with user-friendly messages\n        let userMessage = \"An unexpected error occurred\";\n\n        if (error.code === \"ECONNABORTED\") {\n          userMessage =\n            \"Request timed out. The server may be experiencing high load. Please try again.\";\n        } else if (error.code === \"ERR_NETWORK\") {\n          userMessage =\n            \"Network connection failed. Please check your internet connection.\";\n        } else if (error.code === \"ENOTFOUND\") {\n          userMessage = \"Server could not be reached. Please try again later.\";\n        } else if (error.code === \"CERT_UNTRUSTED\") {\n          userMessage = \"Security certificate error. Please contact support.\";\n        } else if (error.response?.status === 401) {\n          userMessage = \"Authentication failed. Please sign in again.\";\n        } else if (error.response?.status === 403) {\n          userMessage =\n            \"Access denied. You do not have permission for this resource.\";\n        } else if (error.response?.status === 404) {\n          userMessage =\n            \"The requested resource was not found. Please check your request and try again.\";\n        } else if (error.response?.status === 429) {\n          userMessage =\n            \"Too many requests. Please wait a moment and try again.\";\n        } else if (error.response?.status === 500) {\n          userMessage =\n            \"Server error occurred. Our team has been notified. Please try again later.\";\n        } else if (error.response?.status === 502) {\n          userMessage =\n            \"Bad gateway error. The service may be temporarily unavailable.\";\n        } else if (error.response?.status === 503) {\n          userMessage =\n            \"Service temporarily unavailable. Please try again in a few minutes.\";\n        } else if (!navigator.onLine) {\n          userMessage =\n            \"No internet connection. Please check your network and try again.\";\n        }\n\n        // Add user-friendly message to error object\n        error.userMessage = userMessage;\n\n        // Enhanced error logging with more context\n        const logData = {\n          url: error.config?.url,\n          method: error.config?.method,\n          status: error.response?.status,\n          statusText: error.response?.statusText,\n          message: error.message,\n          code: error.code,\n          userMessage,\n          stack: error.stack?.split(\"\\n\")[0], // Just first line of stack\n        };\n\n        // Log different error types with appropriate console methods\n        if (error.response?.status >= 500) {\n          console.error(\" Server Error:\", logData);\n        } else if (error.response?.status >= 400) {\n          console.warn(\" Client Error:\", logData);\n        } else if (error.code) {\n          console.error(\" Network Error:\", logData);\n        } else {\n          console.error(\" Unknown Error:\", logData);\n        }\n\n        return Promise.reject(error);\n      }\n    );\n  }\n} catch (error) {\n  // Ignore interceptor errors in test environment\n  if (typeof process !== \"undefined\" && process.env.NODE_ENV === \"test\") {\n    console.warn(\n      \"[API] Response interceptor setup skipped in test environment\"\n    );\n  }\n}\n\n// Export the api instance for direct use\nexport { api };\n\n// Helper function to standardize API response parsing\n// Handles various response formats: {data: ...}, {items: ...}, {history: ...}, raw array, etc.\nexport const extractDataFromResponse = (response, fallbackArray = []) => {\n  if (!response) return fallbackArray;\n\n  const data = response.data || response;\n\n  // Try to extract array-like data in order of precedence\n  if (Array.isArray(data)) return data;\n  if (Array.isArray(data?.data)) return data.data;\n  if (Array.isArray(data?.items)) return data.items;\n  if (Array.isArray(data?.history)) return data.history;\n  if (Array.isArray(data?.stocks)) return data.stocks;\n  if (Array.isArray(data?.rows)) return data.rows;\n  if (Array.isArray(data?.results)) return data.results;\n\n  // If no array found, return fallback\n  return fallbackArray;\n};\n\n// Portfolio API functions\nexport const getPortfolioHoldings = async (userId) => {\n  try {\n    // Validate user ID\n    if (!userId || typeof userId !== \"string\" || userId.trim() === \"\") {\n      console.warn(\" Invalid user ID provided\");\n      return {\n        data: null,\n        success: false,\n        error: 'Invalid user ID provided'\n      };\n    }\n\n    const response = await api.get(`/api/portfolio/holdings?userId=${userId}`);\n    return {\n      data: extractResponseData(response) || null,\n      success: true\n    };\n  } catch (error) {\n    console.error(\" Portfolio holdings fetch error:\", error);\n    return {\n      data: null,\n      success: false,\n      error: error?.response?.data?.error || error?.message || 'Failed to fetch portfolio holdings'\n    };\n  }\n};\n\nexport const getFactorAnalysis = async (userId) => {\n  try {\n    const response = await api.get(`/api/portfolio/factors?userId=${userId}`);\n    const responseData = extractResponseData(response);\n    return {\n      data: responseData || null,\n      success: true\n    };\n  } catch (error) {\n    console.error(\" Factor analysis fetch error:\", error);\n    return {\n      data: null,\n      success: false,\n      error: error?.response?.data?.error || error?.message || 'Failed to fetch factor analysis'\n    };\n  }\n};\n\nexport const addHolding = async (holding) => {\n  try {\n    const response = await api.post(\"/api/portfolio/holdings\", holding);\n    const responseData = extractResponseData(response);\n    return {\n      data: responseData || null,\n      success: true\n    };\n  } catch (error) {\n    console.error(\" Add holding error:\", error);\n    return {\n      data: null,\n      success: false,\n      error: error?.response?.data?.error || error?.message || 'Failed to add holding'\n    };\n  }\n};\n\nexport const updateHolding = async (holdingId, holding) => {\n  try {\n    const response = await api.put(\n      `/api/portfolio/holdings/${holdingId}`,\n      holding\n    );\n    const responseData = extractResponseData(response);\n    return {\n      data: responseData || null,\n      success: true\n    };\n  } catch (error) {\n    console.error(\" Update holding error:\", error);\n    return {\n      data: null,\n      success: false,\n      error: error?.response?.data?.error || error?.message || 'Failed to update holding'\n    };\n  }\n};\n\nexport const deleteHolding = async (holdingId) => {\n  try {\n    const response = await api.delete(`/api/portfolio/holdings/${holdingId}`);\n    const responseData = extractResponseData(response);\n    return {\n      data: responseData || null,\n      success: true\n    };\n  } catch (error) {\n    console.error(\" Delete holding error:\", error);\n    return {\n      data: null,\n      success: false,\n      error: error?.response?.data?.error || error?.message || 'Failed to delete holding'\n    };\n  }\n};\n\nexport const importPortfolioFromBroker = async (broker) => {\n  try {\n    const response = await api.post(`/api/portfolio/import/${broker}`);\n    const responseData = extractResponseData(response);\n    return {\n      data: responseData || null,\n      success: true\n    };\n  } catch (error) {\n    console.error(\" Import portfolio error:\", error);\n    return {\n      data: null,\n      success: false,\n      error: error?.response?.data?.error || error?.message || 'Failed to import portfolio'\n    };\n  }\n};\n\nexport const getPortfolioPerformance = async (timeframe = \"1Y\") => {\n  try {\n    const response = await api.get(\n      `/api/portfolio/performance?timeframe=${timeframe}`\n    );\n    const responseData = extractResponseData(response);\n    return {\n      data: responseData || null,\n      success: true\n    };\n  } catch (error) {\n    console.error(\" Portfolio performance fetch error:\", error);\n    return {\n      data: null,\n      success: false,\n      error: error?.response?.data?.error || error?.message || 'Failed to fetch portfolio performance'\n    };\n  }\n};\n\nexport const getBenchmarkData = async (timeframe = \"1Y\") => {\n  try {\n    const response = await api.get(\n      `/api/portfolio/benchmark?timeframe=${timeframe}`\n    );\n    const responseData = extractResponseData(response);\n    return {\n      data: responseData || null,\n      success: true\n    };\n  } catch (error) {\n    console.error(\" Benchmark data fetch error:\", error);\n    return {\n      data: null,\n      success: false,\n      error: error?.response?.data?.error || error?.message || 'Failed to fetch benchmark data'\n    };\n  }\n};\n\n// Helper function to calculate metrics from daily returns\nconst calculateMetricsFromReturns = (dailyReturns) => {\n  if (!dailyReturns || dailyReturns.length === 0) {\n    return null; // Return null instead of fabricated 0 values\n  }\n\n  // Extract return percentages\n  const returns = dailyReturns\n    .map(d => {\n      const ret = d.daily_pnl_percent !== undefined && d.daily_pnl_percent !== null\n        ? d.daily_pnl_percent\n        : d.dailyReturn !== undefined && d.dailyReturn !== null\n          ? d.dailyReturn\n          : null;\n      if (ret === null) return null;\n      const parsed = parseFloat(ret);\n      return isNaN(parsed) ? null : (parsed / 100); // Convert to decimal\n    })\n    .filter(r => r !== null);\n\n  if (returns.length === 0) {\n    return null; // Return null instead of fabricated 0 values\n  }\n\n  // Calculate volatility (annualized)\n  const mean = returns.reduce((a, b) => a + b, 0) / returns.length;\n  const variance = returns.reduce((a, b) => a + Math.pow(b - mean, 2), 0) / returns.length;\n  const volatility = Math.sqrt(variance * 252); // Annualized\n\n  // Calculate Sharpe Ratio (annualized)\n  const annualizedReturn = (1 + mean) ** 252 - 1;\n  const riskFreeRate = 0.02; // 2% assumed risk-free rate\n  const sharpeRatio = volatility > 0 ? (annualizedReturn - riskFreeRate) / volatility : null;\n\n  // Calculate max drawdown\n  let peak = returns[0];\n  let maxDrawdown = 0;\n  let cumulative = 1;\n  for (let i = 0; i < returns.length; i++) {\n    cumulative *= 1 + returns[i];\n    const drawdown = (peak - cumulative) / peak;\n    if (drawdown > maxDrawdown) maxDrawdown = drawdown;\n    if (cumulative > peak) peak = cumulative;\n  }\n\n  return {\n    volatility: Math.min(volatility * 100, 100), // Cap at 100%\n    sharpeRatio: Math.max(sharpeRatio, 0),\n    maxDrawdown: Math.min(maxDrawdown * 100, 100),\n  };\n};\n\n/**\n * GET /portfolio/data - CONSOLIDATED ENDPOINT\n * Returns ALL portfolio data in ONE call:\n * - Account info (cash, buying power, portfolio value)\n * - Holdings with metrics\n * - Performance metrics (returns, Sharpe ratio, max drawdown)\n * - Risk metrics (volatility, beta, VaR)\n * - Allocation breakdown (by sector, symbol, concentration)\n * - Analysis (factor exposure, diversification score, risk assessment)\n * - Chart data (value history, returns history)\n *\n * Both PortfolioDashboard and PortfolioOptimizerNew consume from this single endpoint\n */\nexport const getPortfolioData = async () => {\n  try {\n    // Use metrics endpoint which returns: {summary, positions, daily_returns, metadata}\n    const response = await api.get(\"/api/portfolio/metrics\");\n\n    // Response format: { success: true, data: { summary, positions, daily_returns, metadata } }\n    const backendData = extractResponseData(response);\n\n    console.log(\" Portfolio Data Loaded:\", backendData);\n\n    // Return null if no data (per data integrity rule - no fallback defaults)\n    if (!backendData) {\n      return {\n        data: null,\n        success: false,\n        error: 'No portfolio data available'\n      };\n    }\n\n    return {\n      data: backendData,\n      success: response.data?.success ?? true\n    };\n  } catch (error) {\n    console.error(\"Error fetching portfolio data:\", error);\n    return {\n      data: null,\n      success: false,\n      error: error?.response?.data?.error || error?.message || 'Failed to fetch portfolio data'\n    };\n  }\n};\n\nexport const getProfessionalMetrics = async (timeframe = \"1Y\") => {\n  try {\n    // Use SINGLE consolidated endpoint for all portfolio metrics\n    const response = await api.get(`/api/portfolio/metrics?timeframe=${timeframe}`);\n\n    // Backend returns: {success: true, data: {summary, positions}}\n    // We extract the inner data object directly\n    const backendData = extractResponseData(response);\n\n    console.log(\"Professional Metrics (Consolidated):\", backendData);\n\n    // Return null if no data available (per data integrity rule)\n    if (!backendData) {\n      return {\n        data: null,\n        success: false,\n        error: 'No metrics data available'\n      };\n    }\n\n    // Return with data at root level so dashboard gets: metricsData.data.summary\n    return {\n      data: backendData,\n      success: response.data?.success ?? true\n    };\n  } catch (error) {\n    console.error(\"Error fetching professional metrics:\", error);\n    // Return null on error instead of fabricated empty structures\n    return {\n      data: null,\n      success: false,\n      error: error?.response?.data?.error || error?.message || 'Failed to fetch professional metrics'\n    };\n  }\n};\n\n// API Keys management\nexport const getApiKeys = async () => {\n  try {\n    const response = await api.get(\"/api/portfolio/api-keys\");\n\n    // Convert array format to object format expected by frontend\n    const apiKeysArray = extractResponseData(response) ?? [];\n    const apiKeysObject = apiKeysArray.reduce((acc, apiKey) => {\n      acc[apiKey.brokerName] = {\n        ...apiKey,\n        lastValidated: apiKey.lastUsed || apiKey.createdAt\n      };\n      return acc;\n    }, {});\n\n    // Return standardized format\n    return {\n      data: apiKeysObject,\n      success: true\n    };\n  } catch (error) {\n    console.error(\" Get API keys error:\", error);\n    return {\n      data: {},\n      success: false,\n      error: error?.response?.data?.error || error?.message || 'Failed to fetch API keys'\n    };\n  }\n};\n\nexport const addApiKey = async (apiKeyData) => {\n  try {\n    const response = await api.post(\"/api/portfolio/api-keys\", apiKeyData);\n    const responseData = extractResponseData(response);\n    return {\n      data: responseData || null,\n      success: true\n    };\n  } catch (error) {\n    console.error(\" Add API key error:\", error);\n    return {\n      data: null,\n      success: false,\n      error: error?.response?.data?.error || error?.message || 'Failed to add API key'\n    };\n  }\n};\n\nexport const updateApiKey = async (keyId, apiKeyData) => {\n  try {\n    const response = await api.put(`/api/portfolio/api-keys/${keyId}`, apiKeyData);\n    const responseData = extractResponseData(response);\n    return {\n      data: responseData || null,\n      success: true\n    };\n  } catch (error) {\n    console.error(\" Update API key error:\", error);\n    return {\n      data: null,\n      success: false,\n      error: error?.response?.data?.error || error?.message || 'Failed to update API key'\n    };\n  }\n};\n\nexport const deleteApiKey = async (keyId) => {\n  try {\n    const response = await api.delete(`/api/portfolio/api-keys/${keyId}`);\n    const responseData = extractResponseData(response);\n    return {\n      data: responseData || null,\n      success: true\n    };\n  } catch (error) {\n    console.error(\" Delete API key error:\", error);\n    return {\n      data: null,\n      success: false,\n      error: error?.response?.data?.error || error?.message || 'Failed to delete API key'\n    };\n  }\n};\n\n// Alias for tests - saveApiKey is equivalent to addApiKey\nexport const saveApiKey = async (apiKeyData) => {\n  try {\n    const response = await api.post(\"/api/portfolio/api-keys\", apiKeyData);\n    const responseData = extractResponseData(response);\n    return {\n      data: responseData || null,\n      success: true\n    };\n  } catch (error) {\n    console.error(\" Save API key error:\", error);\n    return {\n      data: null,\n      success: false,\n      error: error?.response?.data?.error || error?.message || 'Failed to save API key'\n    };\n  }\n};\n\n// Test API key functionality\nexport const testApiKey = async (apiKeyData) => {\n  try {\n    const response = await api.post(\"/api/portfolio/test-api-key\", apiKeyData);\n    const responseData = extractResponseData(response);\n    const isValid = responseData?.isValid ?? response?.data?.isValid ?? false;\n    return {\n      data: responseData || null,\n      success: true,\n      isValid\n    };\n  } catch (error) {\n    console.error(\" Test API key error:\", error);\n    return {\n      data: null,\n      success: false,\n      isValid: false,\n      error: error?.response?.data?.error || error?.message || 'Failed to test API key'\n    };\n  }\n};\n\n// User settings functions\nexport const getSettings = async () => {\n  try {\n    const response = await api.get(\"/api/user/settings\");\n    const responseData = extractResponseData(response);\n    return {\n      data: responseData || null,\n      success: true\n    };\n  } catch (error) {\n    console.error(\" Get settings error:\", error);\n    return {\n      data: null,\n      success: false,\n      error: error?.response?.data?.error || error?.message || 'Failed to fetch settings'\n    };\n  }\n};\n\nexport const updateSettings = async (settings) => {\n  try {\n    const response = await api.put(\"/api/user/settings\", settings);\n    const responseData = extractResponseData(response);\n    return {\n      data: responseData || null,\n      success: true\n    };\n  } catch (error) {\n    console.error(\" Update settings error:\", error);\n    return {\n      data: null,\n      success: false,\n      error: error?.response?.data?.error || error?.message || 'Failed to update settings'\n    };\n  }\n};\n\n// Function to get current base URL\nexport const getCurrentBaseURL = () => {\n  return currentConfig.baseURL;\n};\n\n// Function to update API base URL dynamically\nexport const updateApiBaseUrl = (newUrl) => {\n  currentConfig = { ...currentConfig, baseURL: newUrl, apiUrl: newUrl };\n  api.defaults.baseURL = newUrl;\n};\n\n// Retry configuration for Lambda cold starts\nconst _retryHandler = async (error) => {\n  const { config: requestConfig } = error;\n\n  if (!requestConfig || requestConfig.retryCount >= 3) {\n    return Promise.reject(error);\n  }\n\n  requestConfig.retryCount = requestConfig.retryCount || 0;\n  requestConfig.retryCount += 1;\n  // Only retry on timeout or 5xx errors (common with Lambda cold starts)\n  if (\n    error.code === \"ECONNABORTED\" ||\n    (error.response && error.response.status >= 500)\n  ) {\n    const delay = Math.pow(2, requestConfig.retryCount) * 1000; // Exponential backoff\n    await new Promise((resolve) => setTimeout(resolve, delay));\n    return api(requestConfig);\n  }\n\n  return Promise.reject(error);\n};\n\n// Request interceptor for logging and Lambda optimization - test-safe\ntry {\n  api.interceptors.request.use(\n    (config) => {\n      // DEVELOPMENT MODE: Only block API calls if no API server is configured\n      const isDevelopment =\n        window.location.hostname === \"localhost\" ||\n        window.location.hostname === \"127.0.0.1\" ||\n        window.location.port === \"5173\";\n\n      // Only block API calls in development if we don't have a configured API server\n      const hasValidApiServer =\n        currentConfig &&\n        currentConfig.baseURL &&\n        (currentConfig.baseURL.startsWith(\"http://localhost:\") ||\n          currentConfig.baseURL.startsWith(\"https://\"));\n\n      if (isDevelopment && !hasValidApiServer) {\n        console.log(\" [API] Blocking API call - no server configured:\", {\n          baseURL: currentConfig.baseURL,\n          hasValidApiServer,\n        });\n        const error = new Error(\"API calls disabled - no server configured\");\n        error.code = \"NO_SERVER_CONFIGURED\";\n        return Promise.reject(error);\n      }\n\n      console.log(\" [API] Allowing API call:\", {\n        isDevelopment,\n        hasValidApiServer,\n        baseURL: currentConfig.baseURL,\n        url: config.url,\n      });\n      // Remove any double /api/api\n      if (config.url && config.url.startsWith(\"/api/api\")) {\n        config.url = config.url.replace(\"/api/api\", \"/api\");\n      }\n\n      // Add authentication token if available\n      try {\n        // Try to get auth token from localStorage or sessionStorage\n        let authToken = null;\n\n        // Check if we're in browser context\n        if (typeof window !== \"undefined\") {\n          // Try various storage locations for auth token\n          authToken =\n            localStorage.getItem(\"authToken\") ||\n            sessionStorage.getItem(\"authToken\") ||\n            localStorage.getItem(\"accessToken\") ||\n            sessionStorage.getItem(\"accessToken\");\n        }\n\n        // Development mode: Use dev-bypass-token for localhost or when dev auth is forced\n        if (\n          import.meta.env.DEV &&\n          (currentConfig.baseURL.includes(\"localhost:3001\") ||\n            import.meta.env.VITE_FORCE_DEV_AUTH === \"true\")\n        ) {\n          // If we have a dev token from devAuth service, replace it with bypass token\n          if (!authToken || (authToken && authToken.startsWith(\"dev-\"))) {\n            console.log(\n              \" Development mode: Using dev-bypass-token for API calls\"\n            );\n            authToken = \"dev-bypass-token\";\n          }\n        }\n\n        if (authToken) {\n          config.headers[\"Authorization\"] = `Bearer ${authToken}`;\n        }\n      } catch (error) {\n        console.log(\"Could not retrieve auth token:\", error.message);\n      }\n\n      const fullUrl = `${config.baseURL || api.defaults.baseURL}${config.url}`;\n      console.log(\"[API REQUEST FINAL URL]\", fullUrl, config);\n      if (config.isServerless) {\n        config.headers[\"X-Lambda-Request\"] = \"true\";\n        config.headers[\"X-Request-Time\"] = new Date().toISOString();\n      }\n      return config;\n    },\n    (error) => {\n      console.error(\"API Request Error:\", {\n        message: error?.message || \"Unknown error\",\n        status: error.response?.status,\n        statusText: error.response?.statusText,\n      });\n      return Promise.reject(error);\n    }\n  );\n} catch (error) {\n  // Ignore interceptor errors in test environment\n  if (typeof process !== \"undefined\" && process.env.NODE_ENV === \"test\") {\n    console.warn(\"[API] Request interceptor setup skipped in test environment\");\n  }\n}\n\n// Enhanced diagnostics: Use our robust error logging system - test-safe\ntry {\n  api.interceptors.response.use(\n    (response) => {\n      const fullUrl = `${response.config.baseURL || api.defaults.baseURL}${response.config.url}`;\n      console.log(\n        \"[API SUCCESS]\",\n        response.config.method?.toUpperCase(),\n        fullUrl,\n        {\n          status: response?.status,\n          statusText: response?.statusText,\n          dataSize: response?.data\n            ? Array.isArray(response?.data)\n              ? response.data?.length || 0\n              : Object.keys(response?.data).length\n            : 0,\n        }\n      );\n      return response;\n    },\n    async (error) => {\n      // Suppress all error logging in development mode to avoid console spam\n      // Components should handle API errors gracefully with fallback data\n\n      // Especially suppress development mode blocked requests\n      if (error?.code === \"DEV_MODE_BLOCKED\") {\n        return Promise.reject(error);\n      }\n\n      return Promise.reject(error);\n    }\n  );\n} catch (error) {\n  // Ignore interceptor errors in test environment\n  if (typeof process !== \"undefined\" && process.env.NODE_ENV === \"test\") {\n    console.warn(\n      \"[API] Response interceptor (diagnostics) setup skipped in test environment\"\n    );\n  }\n}\n\n// --- Add this utility for consistent error handling ---\nfunction handleApiError(error, context = \"\") {\n  let message = \"An unexpected error occurred\";\n  if (error?.response?.data?.error) {\n    message = error.response?.data.error;\n  } else if (error?.response?.data?.message) {\n    message = error.response?.data.message;\n  } else if (error?.message) {\n    message = error.message;\n  }\n  if (context) {\n    return `${context}: ${message}`;\n  }\n  return message;\n}\n\n// Helper function to normalize API responses per RULES.md standardized format\n// Handles multiple response patterns:\n// 1. {data: {...}, success: true}  returns data object\n// 2. {items: [...], pagination: {...}, success: true}  returns {items, pagination}\n// 3. {success: true}  returns response.data\nfunction normalizeResponse(response, expectArray = false) {\n  if (!response || response.data === undefined) {\n    return expectArray ? [] : null;\n  }\n\n  const data = response.data;\n\n  // If response has 'items' and 'pagination', return as-is (already normalized)\n  if (data && typeof data === 'object') {\n    if (data.items && data.pagination) {\n      return data; // Already has items/pagination structure\n    }\n    // If it has 'data' field, extract it (for {data: {...}, success: true} format)\n    if (data.data !== undefined && data.success !== undefined) {\n      return data.data;\n    }\n  }\n\n  // Otherwise return data as-is\n  return data;\n}\n\n// Helper to safely extract data from API response, handling all RULES.md formats\nfunction extractResponseData(response) {\n  if (!response || !response.data) return null;\n  const data = response.data;\n\n  // Paginated list response: {items: [...], pagination: {...}, success: true}\n  if (data.items !== undefined && data.pagination !== undefined) {\n    return { items: data.items, pagination: data.pagination };\n  }\n\n  // Nested data response: {data: {...}, success: true}\n  if (data.data !== undefined && data.success !== undefined) {\n    return data.data;\n  }\n\n  // Direct data response: {..., success: true}\n  if (data.success !== undefined) {\n    return data;\n  }\n\n  // Fallback: return data as-is\n  return data;\n}\n\n// NOTE: Removed duplicate normalizeApiResponse - using exported version from top of file\n\n// Keep this function for internal use if needed (not exported)\nfunction normalizeApiResponseOld(response, expectArray = true) {\n  console.log(\" normalizeApiResponse input:\", {\n    hasResponse: !!response,\n    responseType: typeof response,\n    hasData: !!(response && response?.data !== undefined),\n    dataType: response?.data ? typeof response?.data : \"undefined\",\n    isArray: Array.isArray(response?.data),\n    expectArray,\n  });\n\n  // Handle axios response wrapper first\n  if (response && response?.data !== undefined) {\n    // Check if axios wrapped data\n    const potentialData = response.data;\n    // Only extract if the inner data is not another wrapper\n    if (\n      typeof potentialData === \"object\" &&\n      (potentialData?.success !== undefined || Array.isArray(potentialData))\n    ) {\n      response = potentialData;\n    }\n  }\n\n  // Handle backend API response format\n  if (response && typeof response === \"object\") {\n    // If response has 'success' property, check if it's successful\n    if (response?.success === false) {\n      console.error(\" API request failed:\", response?.error);\n      return null;\n    }\n\n    // If response contains an error, return null\n    if (response?.error) {\n      console.error(\" API error:\", response?.error);\n      return null;\n    }\n\n    // If response has a 'data' property AND it's not already extracted, use that\n    if (response?.data !== undefined && typeof response.data === \"object\") {\n      response = response.data;\n    }\n  }\n\n  // Ensure we return an array if expected\n  if (expectArray && !Array.isArray(response)) {\n    if (response && typeof response === \"object\") {\n      // Try to extract array from common response structures\n      if (Array.isArray(response?.data)) {\n        response = response?.data;\n      } else if (Array.isArray(response?.items)) {\n        response = response?.items;\n      } else if (Array.isArray(response?.results)) {\n        response = response?.results;\n      } else {\n        // Convert object to array if it has numeric keys\n        const keys = Object.keys(response);\n        if (keys.length > 0 && keys.every((key) => !isNaN(key))) {\n          response = Object.values(response);\n        } else {\n          // Single item, wrap in array\n          response = [response];\n        }\n      }\n    } else {\n      response = [];\n    }\n  }\n\n  console.log(\" normalizeApiResponse output:\", {\n    resultType: typeof response,\n    isArray: Array.isArray(response),\n    length: Array.isArray(response) ? response?.length || 0 : \"N/A\",\n    sample:\n      Array.isArray(response) && response.length > 0 ? response[0] : response,\n  });\n  return response;\n}\n\n// --- PATCH: Log API config at startup ---\nconsole.log(\" [API STARTUP] Initializing API configuration...\");\nconsole.log(\" [API CONFIG]\", getApiConfig());\nconsole.log(\n  \" [AXIOS DEFAULT BASE URL]\",\n  api?.defaults?.baseURL || \"undefined\"\n);\n\n// DISABLED: Test connection on startup (was causing maximum call stack exceeded)\n// setTimeout(async () => {\n//   try {\n//     console.log(\" [API STARTUP] Testing connection...\");\n//     const testResponse = await api.get(\"/health\", { timeout: 5000 });\n//     console.log(\n//       \" [API STARTUP] Connection test successful:\",\n//       testResponse.status\n//     );\n//   } catch (error) {\n//     console.warn(\" [API STARTUP] Connection test failed:\", error.message);\n//   }\n// }, 1000);\n\n// --- PATCH: Wrap all API methods with normalizeApiResponse ---\n// Market overview\nexport const getMarketOverview = async () => {\n  console.log(\" [API] Fetching market overview...\");\n  console.log(\" [API] Current config:\", getApiConfig());\n  console.log(\" [API] Axios baseURL:\", api.defaults.baseURL);\n\n  try {\n    const response = await api.get(\"/api/market/overview\");\n    console.log(\" [API] Market overview raw response:\", response);\n    // Return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    console.log(\" [API] Market overview normalized result:\", result);\n    return result;\n  } catch (error) {\n    // Use console.warn for expected errors (503 = backend offline), console.error for unexpected\n    const isExpectedError =\n      error.response?.status === 503 ||\n      error.response?.status === 502 ||\n      error.message === \"Network Error\" ||\n      error.code === \"ERR_NETWORK\";\n    const logLevel = isExpectedError ? \"warn\" : \"error\";\n    const logPrefix = isExpectedError\n      ? \" [API] Market overview unavailable\"\n      : \" [API] Market overview error\";\n\n    console[logLevel](`${logPrefix}:`, error?.message || \"Unknown error\");\n\n    // Only log full details for unexpected errors\n    if (!isExpectedError) {\n      console.error(\"Full error details:\", {\n        status: error.response?.status,\n        statusText: error.response?.statusText,\n        url: error.config?.url,\n        method: error.config?.method,\n      });\n    }\n\n    return { data: null };\n  }\n};\n\nexport const getTopStocks = async (params = {}) => {\n  console.log(\" [API] Fetching top stocks...\", params);\n  console.log(\" [API] Current config:\", getApiConfig());\n\n  try {\n    const queryParams = new URLSearchParams({\n      limit: params.limit || 10,\n      sortBy: params.sortBy || \"composite_score\",\n      sortOrder: params.sortOrder || \"desc\",\n      ...params,\n    }).toString();\n\n    // Use the new dedicated stock scores endpoint\n    const endpoints = [`/api/scores/stockscores?${queryParams}`];\n    let response = null;\n    let lastError = null;\n\n    for (const endpoint of endpoints) {\n      try {\n        console.log(` [API] Trying endpoint: ${endpoint}`);\n        response = await api.get(endpoint);\n        console.log(` [API] SUCCESS with endpoint: ${endpoint}`, response);\n        break;\n      } catch (err) {\n        console.log(` [API] FAILED endpoint: ${endpoint}`, err.message);\n        lastError = err;\n        continue;\n      }\n    }\n\n    if (!response) {\n      // Use console.warn for expected backend offline errors\n      const isExpectedError =\n        lastError?.message === \"Network Error\" ||\n        lastError?.code === \"ERR_NETWORK\" ||\n        lastError?.response?.status === 503;\n      if (isExpectedError) {\n        console.warn(\n          \" [API] Top stocks endpoints unavailable:\",\n          lastError?.message || \"Unknown error\"\n        );\n      } else {\n        console.error(\" [API] All top stocks endpoints failed:\", lastError);\n      }\n      throw lastError;\n    }\n\n    console.log(\" [API] Top stocks raw response:\", response);\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    console.log(\" [API] Top stocks normalized result:\", result);\n    return result;\n  } catch (error) {\n    // Use console.warn for expected errors (503 = backend offline), console.error for unexpected\n    const isExpectedError =\n      error.response?.status === 503 ||\n      error.response?.status === 502 ||\n      error.message === \"Network Error\" ||\n      error.code === \"ERR_NETWORK\";\n    const logLevel = isExpectedError ? \"warn\" : \"error\";\n    const logPrefix = isExpectedError\n      ? \" [API] Top stocks unavailable\"\n      : \" [API] Top stocks error\";\n\n    console[logLevel](`${logPrefix}:`, error?.message || \"Unknown error\");\n\n    // Only log full details for unexpected errors\n    if (!isExpectedError) {\n      console.error(\"Full error details:\", {\n        status: error.response?.status,\n        statusText: error.response?.statusText,\n        url: error.config?.url,\n        method: error.config?.method,\n      });\n    }\n    return { data: null };\n  }\n};\n\nexport const getStockScores = async (symbol, params = {}) => {\n  console.log(` [API] Fetching scores for ${symbol}...`, params);\n  console.log(\" [API] Current config:\", getApiConfig());\n\n  try {\n    const queryParams = new URLSearchParams({\n      search: symbol,\n      limit: 1,\n      ...params,\n    }).toString();\n\n    const endpoint = `/api/scores/stockscores?${queryParams}`;\n\n    console.log(` [API] Trying scores endpoint: ${endpoint}`);\n    const response = await api.get(endpoint);\n    console.log(` [API] SUCCESS with scores endpoint: ${endpoint}`, response?.data);\n\n    // Backend returns: { success, items: [...], pagination: {...} }\n    // Extract the first stock from items array\n    const stocks = response?.data?.items ?? response?.data?.data ?? [];\n    const stockData = stocks.length > 0 ? stocks[0] : null;\n\n    if (!stockData) {\n      console.warn(` [API] No stock data found for ${symbol}`);\n      return { data: null, success: false };\n    }\n\n    // Return properly formatted response - MUST wrap in { data: ... } per RULES.md\n    return { data: stockData, success: true };\n  } catch (error) {\n    console.error(` [API] Error fetching scores for ${symbol}:`, error.message);\n\n    const isExpectedError =\n      error?.message === \"Network Error\" ||\n      error?.code === \"ERR_NETWORK\" ||\n      error?.response?.status === 503;\n\n    if (!isExpectedError) {\n      console.error(\"Full error details:\", {\n        status: error.response?.status,\n        statusText: error.response?.statusText,\n        url: error.config?.url,\n        method: error.config?.method,\n      });\n    }\n    return { data: null };\n  }\n};\n\nexport const getMarketSentimentHistory = async (days = 30) => {\n  console.log(` [API] Fetching market sentiment history for ${days} days...`);\n\n  try {\n    const response = await api.get(\n      `/api/sentiment/history?days=${days}`\n    );\n    console.log(` [API] Fetched sentiment history:`, response.data);\n\n    // Always return { data: ... } structure for consistency\n    if (response?.data && typeof response?.data === \"object\") {\n      console.log(\n        \" [API] Returning sentiment data structure:\",\n        response?.data\n      );\n      return response?.data; // Backend already returns { data: ..., metadata: ... }\n    }\n\n    // Fallback to normalized response\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    console.log(\" [API] Sentiment fallback normalized result:\", result);\n    return result;\n  } catch (error) {\n    console.error(\" [API] Sentiment history error details:\", {\n      message: error.message,\n      status: error.response?.status,\n      url: error.config?.url,\n      method: error.config?.method,\n    });\n    const errorMessage = handleApiError(error, \"get market sentiment history\");\n    return { data: null };\n  }\n};\n\nexport const getMarketSectorPerformance = async () => {\n  console.log(` [API] Fetching market sector performance...`);\n\n  try {\n    const response = await api.get(`/api/sectors/sectors-with-history/performance`);\n    console.log(` [API] Fetched sector performance:`, response.data);\n\n    // Always return { data: ... } structure for consistency\n    if (response?.data && typeof response?.data === \"object\") {\n      console.log(\" [API] Returning sector data structure:\", response?.data);\n      return response?.data;\n    }\n\n    // Fallback to normalized response\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    console.log(\" [API] Sector fallback normalized result:\", result);\n    return result;\n  } catch (error) {\n    console.error(\" [API] Sector performance error details:\", {\n      message: error.message,\n      status: error.response?.status,\n      url: error.config?.url,\n      method: error.config?.method,\n    });\n    const errorMessage = handleApiError(error, \"get market sector performance\");\n    return { data: null };\n  }\n};\n\nexport const getMarketBreadth = async () => {\n  console.log(` [API] Fetching market breadth...`);\n\n  try {\n    const response = await api.get(`/api/market/breadth`);\n    console.log(` [API] Fetched market breadth:`, response.data);\n\n    // Use normalized response handler - handles all response format variations\n    const breadthData = extractResponseData(response);\n    if (!breadthData) {\n      console.error(\" [API] Market breadth returned no data\");\n      return { data: null, success: false };\n    }\n    console.log(\" [API] Returning breadth data:\", breadthData);\n    return breadthData;\n  } catch (error) {\n    console.error(\" [API] Market breadth error details:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n      url: error.config?.url,\n      method: error.config?.method,\n    });\n    const errorMessage = handleApiError(error, \"get market breadth\");\n    return { data: null };\n  }\n};\n\nexport const getMarketInternals = async () => {\n  console.log(` [API] Fetching market internals...`);\n\n  try {\n    const response = await api.get(`/api/market/internals`);\n    console.log(` [API] Fetched market internals:`, response.data);\n\n    // Always return response as-is for internals\n    if (response?.data && typeof response?.data === \"object\") {\n      console.log(\" [API] Returning internals data structure:\", response?.data);\n      return response?.data;\n    }\n\n    // Fallback to normalized response\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    console.log(\" [API] Internals fallback normalized result:\", result);\n    return result;\n  } catch (error) {\n    console.error(\" [API] Market internals error details:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n      url: error.config?.url,\n      method: error.config?.method,\n    });\n    const errorMessage = handleApiError(error, \"get market internals\");\n    return { data: null };\n  }\n};\n\nexport const getDistributionDays = async () => {\n  console.log(` [API] Fetching distribution days...`);\n\n  try {\n    console.log(` [API] Calling /api/market/distribution-days`);\n    const response = await api.get(`/api/market/distribution-days`);\n    console.log(` [API] Distribution days response:`, response);\n\n    // Use normalized response handler - handles all response format variations\n    const distData = extractResponseData(response);\n    if (!distData) {\n      console.error(\" [API] Distribution days returned no data\");\n      return { data: null, success: false };\n    }\n    console.log(\" [API] Returning distribution days data:\", distData);\n    return distData;\n  } catch (error) {\n    console.error(\" [API] Distribution days error details:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n      url: error.config?.url,\n      method: error.config?.method,\n    });\n    const errorMessage = handleApiError(error, \"get distribution days\");\n    return { data: null };\n  }\n};\n\nexport const getEconomicIndicators = async (days = 90) => {\n  console.log(` [API] Fetching economic indicators for ${days} days...`);\n\n  try {\n    const response = await api.get(`/api/market/economic?days=${days}`);\n    console.log(` [API] Fetched economic indicators:`, response.data);\n\n    // Always return { data: ... } structure for consistency\n    if (response?.data && typeof response?.data === \"object\") {\n      console.log(\" [API] Returning economic data structure:\", response?.data);\n      return response?.data;\n    }\n\n    // Fallback to normalized response\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    console.log(\" [API] Economic fallback normalized result:\", result);\n    return result;\n  } catch (error) {\n    console.error(\" [API] Economic indicators error details:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n      url: error.config?.url,\n      method: error.config?.method,\n    });\n    const errorMessage = handleApiError(error, \"get economic indicators\");\n    return {\n      data: [],\n      error: errorMessage,\n      period_days: days,\n      total_data_points: 0,\n      timestamp: new Date().toISOString(),\n    };\n  }\n};\n\nexport const getMarketCorrelation = async (symbols = null, period = \"1y\") => {\n  console.log(\n    ` [API] Fetching market correlation analysis for period: ${period}...`\n  );\n\n  try {\n    const params = new URLSearchParams();\n    if (symbols) params.append(\"symbols\", symbols);\n    if (period) params.append(\"period\", period);\n\n    const queryString = params.toString();\n    const endpoint = `/api/market/correlation${queryString ? \"?\" + queryString : \"\"}`;\n\n    const response = await api.get(endpoint);\n\n    console.log(\" [API] Market correlation response:\", {\n      success: response?.success,\n      hasData: !!response.data,\n      hasCorrelationMatrix: !!response.data?.correlation_matrix,\n    });\n\n    return response;\n  } catch (error) {\n    console.error(\" [API] Market correlation error:\", error);\n    const errorMessage = handleApiError(error, \"get market correlation\");\n    return {\n      success: false,\n      data: {},\n      error: errorMessage,\n      timestamp: new Date().toISOString(),\n    };\n  }\n};\n\nexport const getSeasonalityData = async () => {\n  console.log(\" [API] Fetching seasonality data...\");\n\n  try {\n    // Try multiple endpoint variations\n    const endpoints = [\"/api/market/seasonality\"];\n\n    let response = null;\n    let lastError = null;\n\n    for (const endpoint of endpoints) {\n      try {\n        console.log(` [API] Trying seasonality endpoint: ${endpoint}`);\n        response = await api.get(endpoint);\n        console.log(\n          ` [API] SUCCESS with seasonality endpoint: ${endpoint}`,\n          response\n        );\n        break;\n      } catch (err) {\n        console.log(\n          ` [API] FAILED seasonality endpoint: ${endpoint}`,\n          err.message\n        );\n        lastError = err;\n        continue;\n      }\n    }\n\n    if (!response) {\n      console.error(\" [API] All seasonality endpoints failed:\", {\n        message: lastError?.message || \"Unknown error\",\n        status: lastError.response?.status,\n        url: lastError.config?.url,\n      });\n      throw lastError;\n    }\n\n    // Always return { data: ... } structure for consistency\n    if (response?.data && typeof response?.data === \"object\") {\n      console.log(\n        \" [API] Returning seasonality data structure:\",\n        response?.data\n      );\n      return response?.data; // Backend already returns { data: ..., success: ... }\n    }\n\n    // Fallback to normalized response\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    console.log(\" [API] Seasonality fallback normalized result:\", result);\n    return result;\n  } catch (error) {\n    console.error(\" [API] Seasonality error details:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n      url: error.config?.url,\n      method: error.config?.method,\n    });\n    const errorMessage = handleApiError(error, \"get seasonality data\");\n    return {\n      data: null,\n      error: errorMessage,\n      timestamp: new Date().toISOString(),\n    };\n  }\n};\n\n// Yield Curve Spread endpoint\nexport const getYieldCurveData = async () => {\n  console.log(\" [API] Fetching yield curve data...\");\n\n  try {\n    const response = await api.get(\"/api/market/overview\");\n\n    if (response?.data?.yield_curve) {\n      console.log(\" [API] Fetched yield curve data:\", response?.data?.yield_curve);\n      return {\n        success: true,\n        data: response?.data?.yield_curve,\n        timestamp: new Date().toISOString()\n      };\n    }\n\n    return null;\n  } catch (error) {\n    console.error(\" [API] Yield curve error:\", error?.message);\n    return {\n      success: false,\n      data: null,\n      error: error?.message || \"Failed to fetch yield curve data\",\n      timestamp: new Date().toISOString()\n    };\n  }\n};\n\n// McClellan Oscillator endpoint\nexport const getMcClellanOscillator = async () => {\n  console.log(\" [API] Fetching McClellan Oscillator...\");\n\n  try {\n    const response = await api.get(\"/api/market/mcclellan-oscillator\");\n    console.log(\" [API] Fetched McClellan Oscillator:\", response.data);\n    return extractResponseData(response);\n  } catch (error) {\n    console.error(\" [API] McClellan Oscillator error:\", error?.message);\n    return {\n      success: false,\n      data: null,\n      error: error?.message || \"Failed to fetch McClellan Oscillator\",\n      timestamp: new Date().toISOString()\n    };\n  }\n};\n\n// Sentiment Divergence endpoint\nexport const getSentimentDivergence = async () => {\n  console.log(\" [API] Fetching sentiment divergence...\");\n\n  try {\n    const response = await api.get(\"/api/sentiment/divergence\");\n    console.log(\" [API] Fetched sentiment divergence:\", response.data);\n    return extractResponseData(response);\n  } catch (error) {\n    console.error(\" [API] Sentiment divergence error:\", error?.message);\n    return {\n      success: false,\n      data: null,\n      error: error?.message || \"Failed to fetch sentiment divergence\",\n      timestamp: new Date().toISOString()\n    };\n  }\n};\n\nexport const getMarketResearchIndicators = async () => {\n  console.log(\" [API] Fetching market research indicators...\");\n\n  try {\n    // Use the correct endpoint for our API\n    const endpoints = [\"/api/market/research-indicators\"];\n\n    let response = null;\n    let lastError = null;\n\n    for (const endpoint of endpoints) {\n      try {\n        console.log(\n          ` [API] Trying research indicators endpoint: ${endpoint}`\n        );\n        response = await api.get(endpoint);\n        console.log(\n          ` [API] SUCCESS with research indicators endpoint: ${endpoint}`,\n          response\n        );\n        break;\n      } catch (err) {\n        console.log(\n          ` [API] FAILED research indicators endpoint: ${endpoint}`,\n          err.message\n        );\n        lastError = err;\n        continue;\n      }\n    }\n\n    if (!response) {\n      console.error(\n        \" [API] All research indicators endpoints failed:\",\n        lastError\n      );\n      throw lastError;\n    }\n\n    // Always return { data: ... } structure for consistency\n    if (response?.data && typeof response?.data === \"object\") {\n      console.log(\n        \" [API] Returning research indicators data structure:\",\n        response?.data\n      );\n      return response?.data; // Backend already returns { data: ..., success: ... }\n    }\n\n    // Fallback to normalized response\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    console.log(\n      \" [API] Research indicators fallback normalized result:\",\n      result\n    );\n    return result;\n  } catch (error) {\n    console.error(\" [API] Research indicators error details:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n      url: error.config?.url,\n      method: error.config?.method,\n    });\n    const errorMessage = handleApiError(\n      error,\n      \"get market research indicators\"\n    );\n    return {\n      data: null,\n      error: errorMessage,\n      timestamp: new Date().toISOString(),\n    };\n  }\n};\n\nexport const getPortfolioAnalytics = async (timeframe = \"1y\") => {\n  console.log(\" [API] Fetching portfolio analytics...\");\n\n  try {\n    const endpoints = [`/api/portfolio/analysis?timeframe=${timeframe}`];\n\n    let response = null;\n    let lastError = null;\n\n    for (const endpoint of endpoints) {\n      try {\n        console.log(\n          ` [API] Trying portfolio analytics endpoint: ${endpoint}`\n        );\n        response = await api.get(endpoint);\n        console.log(\n          ` [API] SUCCESS with portfolio analytics endpoint: ${endpoint}`,\n          response\n        );\n        break;\n      } catch (err) {\n        console.log(\n          ` [API] FAILED portfolio analytics endpoint: ${endpoint}`,\n          err.message\n        );\n        lastError = err;\n        continue;\n      }\n    }\n\n    if (!response) {\n      console.error(\n        \" [API] All portfolio analytics endpoints failed:\",\n        lastError\n      );\n      throw lastError;\n    }\n\n    return response?.data;\n  } catch (error) {\n    console.error(\" [API] Portfolio analytics error details:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n      url: error.config?.url,\n      method: error.config?.method,\n      stack: error?.stack?.substring(0, 500) + \"...\",\n    });\n    const errorMessage = handleApiError(error, \"get portfolio analytics\");\n    return {\n      data: null,\n      error: errorMessage,\n      timestamp: new Date().toISOString(),\n    };\n  }\n};\n\nexport const getPortfolioOptimization = async (params = {}) => {\n  console.log(\" [API] Fetching portfolio optimization...\");\n\n  try {\n    // Use the new unified portfolio optimization endpoint\n    const queryParams = new URLSearchParams();\n    if (params.market_exposure) queryParams.append('market_exposure', params.market_exposure);\n    if (params.min_fit_score) queryParams.append('min_fit_score', params.min_fit_score);\n    if (params.limit) queryParams.append('limit', params.limit);\n\n    const endpoint = `/api/optimization/analysis${queryParams.toString() ? '?' + queryParams.toString() : ''}`;\n\n    console.log(` [API] Calling portfolio optimization endpoint: ${endpoint}`);\n    const response = await api.get(endpoint);\n\n    console.log(\n      ` [API] SUCCESS portfolio optimization endpoint`,\n      response\n    );\n\n    return response?.data;\n  } catch (error) {\n    console.error(\" [API] Portfolio optimization error details:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n      url: error.config?.url,\n      method: error.config?.method,\n      stack: error?.stack?.substring(0, 500) + \"...\",\n    });\n    const errorMessage = handleApiError(error, \"get portfolio optimization\");\n    return {\n      data: null,\n      error: errorMessage,\n      timestamp: new Date().toISOString(),\n    };\n  }\n};\n\nexport const applyPortfolioOptimization = async (optimizationId, trades) => {\n  console.log(\" [API] Applying portfolio optimization...\");\n\n  try {\n    const response = await api.post('/api/optimization/execute', {\n      optimization_id: optimizationId,\n      trades_to_execute: trades\n    });\n\n    console.log(\n      ` [API] SUCCESS applying portfolio optimization`,\n      response\n    );\n\n    return response?.data;\n  } catch (error) {\n    console.error(\" [API] Apply portfolio optimization error details:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n      url: error.config?.url,\n      method: error.config?.method,\n      stack: error?.stack?.substring(0, 500) + \"...\",\n    });\n    const errorMessage = handleApiError(error, \"apply portfolio optimization\");\n    return {\n      success: false,\n      data: null,\n      error: errorMessage,\n      timestamp: new Date().toISOString(),\n    };\n  }\n};\n\n\nexport const getStocks = async (params = {}) => {\n  console.log(\" getStocks: Starting API call with params:\", params);\n\n  try {\n    const queryParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && value !== \"\") {\n        queryParams.append(key, value);\n      }\n    });\n\n    // Use the correct endpoint for our API\n    const endpoints = [`/api/stocks?${queryParams.toString()}`];\n\n    let response = null;\n    let lastError = null;\n\n    for (const endpoint of endpoints) {\n      try {\n        console.log(` getStocks: Trying endpoint: ${endpoint}`);\n        response = await api.get(endpoint, {\n          baseURL: currentConfig.baseURL,\n        });\n        console.log(\n          ` getStocks: SUCCESS with endpoint: ${endpoint}`,\n          response\n        );\n        break;\n      } catch (err) {\n        console.log(` getStocks: FAILED endpoint: ${endpoint}`, err.message);\n        lastError = err;\n        continue;\n      }\n    }\n\n    if (!response) {\n      console.error(\" getStocks: All endpoints failed:\", lastError);\n      throw lastError;\n    }\n\n    console.log(\" getStocks: Raw response:\", {\n      status: response?.status,\n      hasData: !!response?.data,\n      dataType: typeof response?.data,\n      dataKeys: response?.data ? Object.keys(response?.data) : [],\n    });\n\n    // Use normalized response handler\n    const normalizedData = extractResponseData(response);\n    if (normalizedData) {\n      console.log(\" getStocks: returning normalized data:\", normalizedData);\n      return normalizedData;\n    }\n\n    // Return empty structure if no data\n    return { stocks: [], viewType: \"list\" };\n  } catch (error) {\n    console.error(\" Error fetching stocks:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n      url: error.config?.url,\n      method: error.config?.method,\n      stack: error?.stack?.substring(0, 500) + \"...\",\n    });\n    const errorMessage = handleApiError(error, \"get stocks\");\n    return { data: null };\n  }\n};\n\n// Quick stocks overview for initial page load\nexport const getStocksQuick = async (params = {}) => {\n  try {\n    const queryParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && value !== \"\") {\n        queryParams.append(key, value);\n      }\n    });\n    const response = await api.get(\n      `/api/stocks/quick/overview?${queryParams.toString()}`\n    );\n    const responseData = extractResponseData(response);\n    return {\n      data: responseData || null,\n      success: true\n    };\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get stocks quick\");\n    return { data: null };\n  }\n};\n\n// Chunked stocks loading\nexport const getStocksChunk = async (chunkIndex = 0) => {\n  try {\n    const response = await api.get(`/api/stocks/chunk/${chunkIndex}`);\n    const responseData = extractResponseData(response);\n    return {\n      data: responseData || null,\n      success: true\n    };\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get stocks chunk\");\n    return { data: null };\n  }\n};\n\n// Full stocks data (use with caution)\nexport const getStocksFull = async (params = {}) => {\n  try {\n    const queryParams = new URLSearchParams();\n    // Force small limit for safety\n    if (!params.limit || params.limit > 10) {\n      params.limit = 5;\n      console.warn(\"Stocks limit reduced to 5 for performance\");\n    }\n    Object.entries(params).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && value !== \"\") {\n        queryParams.append(key, value);\n      }\n    });\n    const response = await api.get(\n      `/api/stocks/full/data?${queryParams.toString()}`\n    );\n    const responseData = extractResponseData(response);\n    return {\n      data: responseData || null,\n      success: true\n    };\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get stocks full\");\n    return { data: null };\n  }\n};\n\nexport const getStock = async (ticker) => {\n  console.log(\" getStock: Starting API call for ticker:\", ticker);\n  try {\n    const response = await api.get(`/api/stocks/${ticker}`);\n    console.log(\" getStock: Raw response:\", {\n      status: response?.status,\n      hasData: !!response?.data,\n      dataType: typeof response?.data,\n      dataKeys: response?.data ? Object.keys(response?.data) : [],\n    });\n\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    }; // Single stock is an object\n    console.log(\" getStock: returning result:\", result);\n    return result;\n  } catch (error) {\n    console.error(\" Error fetching stock:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n      url: error.config?.url,\n      method: error.config?.method,\n      stack: error?.stack?.substring(0, 500) + \"...\",\n    });\n    const errorMessage = handleApiError(error, \"get stock\");\n    return { data: null };\n  }\n};\n\n// New methods for StockDetail page\n// UNIFIED RESPONSE FORMAT: All return { data: ... } for consistency\n\n/**\n * Consolidated price data fetching function\n * Replaces three redundant functions: getStockProfile, getStockPricesRecent, getStockPrice\n * All were calling the same /api/price/:ticker endpoint\n */\nexport const getStockProfile = async (ticker) => {\n  try {\n    // Fetch price data for current price and charts\n    const response = await api.get(`/api/price/${ticker}`);\n    const normalized = normalizeResponse(response, false);\n    return {\n      data: normalized && Array.isArray(normalized) ? normalized[0] : normalized\n    };\n  } catch (error) {\n    console.error(`Stock profile error for ${ticker}:`, error);\n    return { data: null };\n  }\n};\n\nexport const getStockMetrics = async (ticker) => {\n  try {\n    // Use /api/scores/stockscores with search parameter for metrics and scores data\n    const response = await api.get(`/api/scores/stockscores?search=${ticker}&limit=1`);\n    const stocks = response.data?.items ?? extractResponseData(response) ?? [];\n    const stock = stocks.length > 0 ? stocks[0] : null;\n\n    if (!stock) {\n      return { data: null, success: false };\n    }\n\n    const result = {\n      data: stock,\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return {\n      data: result || {},\n      success: true\n    };\n  } catch (error) {\n    console.error(`Stock metrics error for ${ticker}:`, error);\n    return { data: null };\n  }\n};\n\nexport const getStockFinancials = async (ticker, type = \"income\") => {\n  console.log(\n    \" getStockFinancials: Starting API call for ticker:\",\n    ticker,\n    \"type:\",\n    type\n  );\n  try {\n    const response = await api.get(`/api/financials/${ticker}/${type}`);\n\n    console.log(\" getStockFinancials: Raw response:\", {\n      status: response?.status,\n      hasData: !!response?.data,\n      dataType: typeof response?.data,\n      dataKeys: response?.data ? Object.keys(response?.data) : [],\n    });\n\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    console.log(\" getStockFinancials: returning result:\", result);\n    return result;\n  } catch (error) {\n    console.error(\" Error fetching stock financials:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n      url: error.config?.url,\n      method: error.config?.method,\n      stack: error?.stack?.substring(0, 500) + \"...\",\n    });\n    const errorMessage = handleApiError(error, \"get stock financials\");\n    return { data: null };\n  }\n};\n\nexport const getAnalystRecommendations = async (ticker) => {\n  try {\n    const response = await api.get(`/api/analysts/${ticker}/recommendations`);\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get analyst recommendations\");\n    return { data: null };\n  }\n};\n\nexport const getStockPrices = async (\n  ticker,\n  timeframe = \"daily\",\n  limit = 100\n) => {\n  try {\n    // Use /api/price endpoint instead (exists at /price/:symbol/history/:timeframe)\n    const response = await api.get(\n      `/api/price/history/${timeframe}?symbol=${ticker}&limit=${limit}`\n    );\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get stock prices\");\n    return { data: null };\n  }\n};\n\n// Alias for backward compatibility with tests/mocks\nexport const getStockPricesRecent = getStockProfile;\n\nexport const getStockRecommendations = async (ticker) => {\n  try {\n    const response = await api.get(`/api/stocks/${ticker}/recommendations`);\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get stock recommendations\");\n    return { data: null };\n  }\n};\n\nexport const getSectors = async () => {\n  try {\n    const response = await api.get(\"/api/stocks/sectors\");\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get sectors\");\n    return { data: null };\n  }\n};\n\nexport const getValuationMetrics = async (params = {}) => {\n  try {\n    const queryParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && value !== \"\") {\n        queryParams.append(key, value);\n      }\n    });\n    const response = await api.get(\n      `/api/metrics/valuation?${queryParams.toString()}`\n    );\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get valuation metrics\");\n    return { data: null };\n  }\n};\n\nexport const getGrowthMetrics = async (params = {}) => {\n  try {\n    const queryParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && value !== \"\") {\n        queryParams.append(key, value);\n      }\n    });\n    const response = await api.get(\n      `/api/metrics/growth?${queryParams.toString()}`\n    );\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get growth metrics\");\n    return { data: null };\n  }\n};\n\nexport const getDividendMetrics = async (params = {}) => {\n  try {\n    const queryParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && value !== \"\") {\n        queryParams.append(key, value);\n      }\n    });\n    const response = await api.get(\n      `/api/metrics/dividends?${queryParams.toString()}`\n    );\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get dividend metrics\");\n    return { data: null };\n  }\n};\n\nexport const getFinancialStrengthMetrics = async (params = {}) => {\n  try {\n    const queryParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && value !== \"\") {\n        queryParams.append(key, value);\n      }\n    });\n    const response = await api.get(\n      `/api/metrics/financial-strength?${queryParams.toString()}`\n    );\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(\n      error,\n      \"get financial strength metrics\"\n    );\n    return { data: null };\n  }\n};\n\n\n// Earnings and analyst endpoints\nexport const getEarningsEstimates = async (params = {}) => {\n  try {\n    const queryParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && value !== \"\") {\n        queryParams.append(key, value);\n      }\n    });\n    const response = await api.get(\n      `/api/earnings/info?${queryParams.toString()}`,\n      {\n        baseURL: currentConfig.baseURL,\n      }\n    );\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: response.data?.data?.estimates || [],\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get earnings estimates\");\n    return { data: null };\n  }\n};\n\nexport const getRevenueEstimates = async (params = {}) => {\n  try {\n    const queryParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && value !== \"\") {\n        queryParams.append(key, value);\n      }\n    });\n    const response = await api.get(\n      `/api/earnings/revenue-estimates?${queryParams.toString()}`,\n      {\n        baseURL: currentConfig.baseURL,\n      }\n    );\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get revenue estimates\");\n    return { data: null };\n  }\n};\n\nexport const getEarningsHistory = async (params = {}) => {\n  try {\n    const queryParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && value !== \"\") {\n        queryParams.append(key, value);\n      }\n    });\n    const response = await api.get(\n      `/api/earnings/history?${queryParams.toString()}`,\n      {\n        baseURL: currentConfig.baseURL,\n      }\n    );\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get earnings history\");\n    return { data: null };\n  }\n};\n\n// Ticker-based endpoints (wrap Axios promise for consistency)\nexport const getTickerEarningsEstimates = async (ticker) => {\n  try {\n    const response = await api.get(\n      `/api/analysts/${ticker}/earnings-estimates`\n    );\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get ticker earnings estimates\");\n    return { data: null };\n  }\n};\n\nexport const getTickerEarningsHistory = async (ticker) => {\n  try {\n    const response = await api.get(`/api/analysts/${ticker}/earnings-history`);\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get ticker earnings history\");\n    return { data: null };\n  }\n};\n\nexport const getTickerRevenueEstimates = async (ticker) => {\n  try {\n    const response = await api.get(`/api/analysts/${ticker}/revenue-estimates`);\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get ticker revenue estimates\");\n    return { data: null };\n  }\n};\n\nexport const getTickerEpsRevisions = async (ticker) => {\n  try {\n    const response = await api.get(`/api/analysts/${ticker}/eps-revisions`);\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get ticker eps revisions\");\n    return { data: null };\n  }\n};\n\nexport const getTickerEpsTrend = async (ticker) => {\n  try {\n    const response = await api.get(`/api/analysts/${ticker}/eps-trend`);\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get ticker eps trend\");\n    return { data: null };\n  }\n};\n\nexport const getTickerGrowthEstimates = async (ticker) => {\n  try {\n    const response = await api.get(`/api/analysts/${ticker}/growth-estimates`);\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get ticker growth estimates\");\n    return { data: null };\n  }\n};\n\nexport const getTickerAnalystRecommendations = async (ticker) => {\n  try {\n    const response = await api.get(`/api/analysts/${ticker}/recommendations`);\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(\n      error,\n      \"get ticker analyst recommendations\"\n    );\n    return { data: null };\n  }\n};\n\nexport const getAnalystOverview = async (ticker) => {\n  console.log(` [API] Fetching analyst overview for ${ticker}...`);\n  try {\n    // Fetch ONLY from endpoints that have REAL data - NO FAKE FALLBACKS for financial data\n    const infoResponse = await api.get(`/api/earnings/info?symbol=${ticker}`).catch(() => ({ data: { data: { history: [], estimates: [] } } }));\n\n    // Extract real data from responses\n    const earningsHistory = Array.isArray(infoResponse.data?.data?.history)\n      ? infoResponse.data.data.history\n      : [];\n\n    const earningsEstimates = Array.isArray(infoResponse.data?.data?.estimates)\n      ? infoResponse.data.data.estimates\n      : [];\n\n    // Return ONLY real data - no placeholder data for missing endpoints\n    const result = {\n      data: {\n        earnings_history: earningsHistory,\n        earnings_estimates: earningsEstimates\n      },\n      success: true,\n      timestamp: new Date().toISOString()\n    };\n\n    console.log(` [API] Analyst overview for ${ticker}:`, result);\n    return result;\n  } catch (error) {\n    console.error(` [API] Analyst overview error for ${ticker}:`, error);\n    // Return null on error - never fake data for financial information\n    return { data: null };\n  }\n};\n\nexport const getFinancialStatements = async (ticker, period = \"annual\") => {\n  try {\n    const response = await api.get(\n      `/api/financials/${ticker}/statements?period=${period}`\n    );\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get financial statements\");\n    return { data: null };\n  }\n};\n\nexport const getIncomeStatement = async (ticker, period = \"annual\") => {\n  try {\n    const response = await api.get(\n      `/api/financials/${ticker}/income-statement?period=${period}`\n    );\n    // Extract data array from API response: { success, data: { financialData: [...], ... } }\n    const wrappedData = response.data?.data || {};\n    const result = wrappedData.financialData || wrappedData.data || [];\n\n    // Transform data to match frontend expectations (add items property)\n    const transformedData = Array.isArray(result)\n      ? result.map(period => ({\n          ...period,\n          items: Object.fromEntries(\n            Object.entries(period).filter(([key]) =>\n              !['symbol', 'date', 'raw'].includes(key)\n            )\n          )\n        }))\n      : result;\n\n    return transformedData;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get income statement\");\n    return { data: null };\n  }\n};\n\nexport const getCashFlowStatement = async (ticker, period = \"annual\") => {\n  try {\n    const response = await api.get(\n      `/api/financials/${ticker}/cash-flow?period=${period}`\n    );\n    // Extract data array from API response: { success, data: { financialData: [...], ... } }\n    const wrappedData = response.data?.data || {};\n    const result = wrappedData.financialData || wrappedData.data || [];\n\n    // Transform data to match frontend expectations (add items property)\n    const transformedData = Array.isArray(result)\n      ? result.map(period => ({\n          ...period,\n          items: Object.fromEntries(\n            Object.entries(period).filter(([key]) =>\n              !['symbol', 'date', 'raw'].includes(key)\n            )\n          )\n        }))\n      : result;\n\n    return transformedData;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get cash flow statement\");\n    return { data: null };\n  }\n};\n\nexport const getBalanceSheet = async (ticker, period = \"annual\") => {\n  try {\n    const response = await api.get(\n      `/api/financials/${ticker}/balance-sheet?period=${period}`\n    );\n    // Extract data array from API response: { success, data: { financialData: [...], ... } }\n    const wrappedData = response.data?.data || {};\n    const result = wrappedData.financialData || wrappedData.data || [];\n\n    // Transform data to match frontend expectations (add items property)\n    const transformedData = Array.isArray(result)\n      ? result.map(period => ({\n          ...period,\n          items: Object.fromEntries(\n            Object.entries(period).filter(([key]) =>\n              !['symbol', 'date', 'raw'].includes(key)\n            )\n          )\n        }))\n      : result;\n\n    return transformedData;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get balance sheet\");\n    return { data: null };\n  }\n};\n\nexport const getKeyMetrics = async (ticker) => {\n  try {\n    const url = `/api/financials/${ticker}/key-metrics`;\n    const response = await api.get(url, {\n      baseURL: currentConfig.baseURL,\n    });\n    // Extract data from API response: { success, data: { metricsData: {...}, ... } }\n    // Key metrics returns an object, not array\n    const wrappedData = response.data?.data || {};\n    const result = wrappedData.metricsData || wrappedData.data;\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, `get key metrics for ${ticker}`);\n    return { data: null };\n  }\n};\n\nexport const getAllFinancialData = async (params = {}) => {\n  try {\n    const queryParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && value !== \"\") {\n        queryParams.append(key, value);\n      }\n    });\n    const response = await api.get(\n      `/api/financials/all?${queryParams.toString()}`\n    );\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get all financial data\");\n    return { data: null };\n  }\n};\n\nexport const getFinancialMetrics = async (params = {}) => {\n  try {\n    const queryParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && value !== \"\") {\n        queryParams.append(key, value);\n      }\n    });\n    const response = await api.get(\n      `/api/financials/metrics?${queryParams.toString()}`\n    );\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get financial metrics\");\n    return { data: null };\n  }\n};\n\nexport const getEpsRevisions = async (params = {}) => {\n  try {\n    const queryParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && value !== \"\") {\n        queryParams.append(key, value);\n      }\n    });\n    const response = await api.get(\n      `/api/analysts/eps-revisions?${queryParams.toString()}`\n    );\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get EPS revisions\");\n    return { data: null };\n  }\n};\n\nexport const getEpsTrend = async (params = {}) => {\n  try {\n    const queryParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && value !== \"\") {\n        queryParams.append(key, value);\n      }\n    });\n    const response = await api.get(\n      `/api/analysts/eps-trend?${queryParams.toString()}`\n    );\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get EPS trend\");\n    return { data: null };\n  }\n};\n\nexport const getGrowthEstimates = async (params = {}) => {\n  try {\n    const queryParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && value !== \"\") {\n        queryParams.append(key, value);\n      }\n    });\n    const response = await api.get(\n      `/api/analysts/growth-estimates?${queryParams.toString()}`\n    );\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get growth estimates\");\n    return { data: null };\n  }\n};\n\nexport const getEconomicData = async (params = {}) => {\n  try {\n    const queryParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && value !== \"\") {\n        queryParams.append(key, value);\n      }\n    });\n    const response = await api.get(\n      `/api/economic/data?${queryParams.toString()}`\n    );\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get economic data\");\n    return { data: null };\n  }\n};\n\n// --- STOCK API FUNCTIONS ---\nexport const getStockInfo = async (symbol) => {\n  console.log(` [API] Fetching stock info for ${symbol}...`);\n  try {\n    const response = await api.get(`/stocks/info/${symbol}`);\n    console.log(` [API] Stock info response for ${symbol}:`, response);\n    return normalizeResponse(response, false);\n  } catch (error) {\n    console.error(` [API] Stock info error for ${symbol}:`, {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    return { data: null };\n  }\n};\n\n// Alias for backward compatibility - uses correct /api/price/{symbol} endpoint\n// (Previous implementation incorrectly used /stocks/price/{symbol})\nexport const getStockPrice = getStockProfile;\n\nexport const getStockHistory = async (symbol) => {\n  console.log(` [API] Fetching stock history for ${symbol}...`);\n  try {\n    const response = await api.get(`/stocks/history/${symbol}`);\n    console.log(` [API] Stock history response for ${symbol}:`, response);\n    return normalizeResponse(response, true);\n  } catch (error) {\n    console.error(` [API] Stock history error for ${symbol}:`, {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    return { data: null };\n  }\n};\n\nexport const searchStocks = async (query) => {\n  console.log(` [API] Searching stocks with query: ${query}...`);\n  try {\n    const response = await api.get(\n      `/stocks/search?q=${encodeURIComponent(query)}`\n    );\n    console.log(` [API] Stock search response:`, response);\n    return normalizeResponse(response, true);\n  } catch (error) {\n    console.error(` [API] Stock search error:`, {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    return { data: null };\n  }\n};\n\n// --- HEALTH CHECK ---\nexport const getHealth = async () => {\n  console.log(\" [API] Checking API health...\");\n  try {\n    const response = await api.get(\"/api/health\");\n    console.log(\" [API] Health check response:\", response);\n    return normalizeResponse(response, false);\n  } catch (error) {\n    console.error(\" [API] Health check error:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    return { data: null };\n  }\n};\n\n// Add missing functions that are referenced in export default\nexport const getNaaimData = async (params = {}) => {\n  try {\n    const queryParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && value !== \"\") {\n        queryParams.append(key, value);\n      }\n    });\n    const response = await api.get(\n      `/api/market/naaim?${queryParams.toString()}`\n    );\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    }; // Array of NAAIM data\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get NAAIM data\");\n    return { data: null };\n  }\n};\n\nexport const getFearGreedData = async (params = {}) => {\n  try {\n    const queryParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && value !== \"\") {\n        queryParams.append(key, value);\n      }\n    });\n    const response = await api.get(\n      `/api/market/fear-greed?${queryParams.toString()}`\n    );\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    }; // Array of fear/greed data\n    return result;\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get fear & greed data\");\n    return { data: null };\n  }\n};\n\n// Get price history data from price_daily/weekly/monthly tables\n// NOTE: getPriceHistory() and getTechnicalData() have been removed\n// Use sector or stock endpoint for price data\n\n// Test API Connection\nexport const initializeApi = async () => {\n  try {\n    console.log(\" [API] Initializing API connection...\");\n    const healthResponse = await fetch(`${getCurrentBaseURL()}/health`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n\n    if (!healthResponse?.ok) {\n      return null;\n    }\n\n    const healthData = await healthResponse.json();\n    console.log(\" [API] API initialized successfully:\", healthData);\n    return healthData;\n  } catch (error) {\n    console.error(\" [API] API initialization failed:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    return { data: null };\n  }\n};\n\nexport const testApiConnection = async (customUrl = null) => {\n  try {\n    console.log(\"Testing API connection...\");\n    console.log(\"Current API URL:\", currentConfig.baseURL);\n    console.log(\"Custom URL:\", customUrl);\n    console.log(\"Environment:\", import.meta.env.MODE);\n    console.log(\"VITE_API_URL:\", import.meta.env.VITE_API_URL);\n    const testUrl = customUrl || currentConfig.baseURL;\n    const response = await api.get(\"/api/health?quick=true\", {\n      baseURL: testUrl,\n      timeout: 7000,\n    });\n    return {\n      success: true,\n      apiUrl: testUrl,\n      status: response?.status,\n      data: response?.data,\n      message: \"API connection successful\",\n    };\n  } catch (error) {\n    console.error(\"API connection test failed:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    return {\n      success: false,\n      apiUrl: customUrl || currentConfig.baseURL,\n      error: error.message,\n      details: {\n        hasResponse: !!error.response,\n        status: error.response?.status,\n        statusText: error.response?.statusText,\n        responseData: error.response?.data,\n        code: error.code,\n        isNetworkError: !error.response,\n        configUrl: error.config?.url,\n        fullUrl:\n          (customUrl || currentConfig.baseURL) + \"/api/health?quick=true\",\n      },\n    };\n  }\n};\n\n// Diagnostic function for ServiceHealth\nexport const getDiagnosticInfo = () => {\n  return {\n    currentApiUrl: currentConfig.baseURL,\n    axiosDefaultBaseUrl: api.defaults.baseURL,\n    viteApiUrl: import.meta.env.VITE_API_URL,\n    isConfigured: currentConfig.isConfigured,\n    environment: import.meta.env.MODE,\n    urlsMatch: currentConfig.baseURL === api.defaults.baseURL,\n    timestamp: new Date().toISOString(),\n  };\n};\n\n// Database health (full details)\nexport const getDatabaseHealthFull = async () => {\n  try {\n    const response = await api.get(\"/api/health/database\", {\n      baseURL: currentConfig.baseURL,\n    });\n    // Return the full response (healthSummary, tables, etc.)\n    return { data: response?.data };\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get database health\");\n    return { data: null };\n  }\n};\n\n// Health check (robust: tries /health, then /)\nexport const healthCheck = async (queryParams = \"\") => {\n  let triedRoot = false;\n  let healthUrl = `/api/health${queryParams}`;\n  let rootUrl = `/${queryParams}`;\n  try {\n    const response = await api.get(healthUrl, {\n      baseURL: currentConfig.baseURL,\n    });\n    console.log(\"Health check response:\", response?.data);\n    return {\n      data: response?.data,\n      healthy: true,\n      endpoint: healthUrl,\n      fallback: false,\n      timestamp: new Date().toISOString(),\n    };\n  } catch (error) {\n    // If 404 or network error, try root endpoint\n    console.warn(\n      \"Health check failed for /api/health, trying root / endpoint...\"\n    );\n    triedRoot = true;\n    try {\n      const response = await api.get(rootUrl, {\n        baseURL: currentConfig.baseURL,\n      });\n      console.log(\"Root endpoint health check response:\", response?.data);\n      return {\n        data: response?.data,\n        healthy: true,\n        endpoint: rootUrl,\n        fallback: true,\n        timestamp: new Date().toISOString(),\n      };\n    } catch (rootError) {\n      console.error(\n        \"Error in health check (both endpoints failed):\",\n        rootError\n      );\n      const errorMessage = handleApiError(\n        rootError,\n        \"health check (both endpoints)\"\n      );\n      return {\n        data: null,\n        error: errorMessage,\n        healthy: false,\n        endpoint: triedRoot ? rootUrl : healthUrl,\n        fallback: triedRoot,\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n};\n\n// Data validation functions\nexport const getDataValidationSummary = async () => {\n  const response = await api.get(\"/api/health/full\");\n  // Always return { data: ... } structure for consistency\n  const result = normalizeResponse(response, false);\n  return result;\n};\n\n\nexport const getRecentAnalystActions = async (limit = 10) => {\n  try {\n    const response = await api.get(\n      `/api/analysts/recent-actions?limit=${limit}`\n    );\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    }; // Expect array of analyst actions\n    return {\n      data: result,\n      summary: { date: null, total_actions: 0, upgrades: 0, downgrades: 0 },\n    };\n  } catch (error) {\n    const errorMessage = handleApiError(error, \"get recent analyst actions\");\n    return {\n      data: [],\n      summary: { date: null, total_actions: 0, upgrades: 0, downgrades: 0 },\n      error: errorMessage,\n    };\n  }\n};\n\n// Simple API test function\nexport const testApiEndpoints = async () => {\n  const results = {};\n\n  try {\n    // Test basic health check\n    const healthResponse = await api.get(\"/api/health\");\n    results.health = { success: true, data: healthResponse?.data };\n  } catch (error) {\n    results.health = { success: false, error: error.message };\n  }\n\n  try {\n    // Test stocks endpoint\n    const stocksResponse = await api.get(\"/api/stocks?limit=5\");\n    results.stocks = { success: true, data: stocksResponse?.data };\n  } catch (error) {\n    results.stocks = { success: false, error: error.message };\n  }\n\n  try {\n    // Test sectors endpoint (technical data endpoint removed)\n    const sectorsResponse = await api.get(\"/api/sectors\");\n    results.sectors = { success: true, data: sectorsResponse?.data };\n  } catch (error) {\n    results.sectors = { success: false, error: error.message };\n  }\n\n  try {\n    // Test market overview endpoint\n    const marketResponse = await api.get(\"/api/market/overview\");\n    results.market = { success: true, data: marketResponse?.data };\n  } catch (error) {\n    results.market = { success: false, error: error.message };\n  }\n\n  console.log(\"API Test Results:\", results);\n  return results;\n};\n\n// Market indices\nexport const getMarketIndices = async () => {\n  console.log(\" getMarketIndices: Starting API call...\");\n  try {\n    const response = await api.get(\"/api/market/indices\");\n\n    console.log(\" getMarketIndices: Raw response:\", {\n      status: response?.status,\n      hasData: !!response?.data,\n      dataType: typeof response?.data,\n      dataKeys: response?.data ? Object.keys(response?.data) : [],\n    });\n\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    console.log(\" getMarketIndices: returning result:\", result);\n    return result;\n  } catch (error) {\n    console.error(\" Error fetching market indices:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      url: error.config?.url,\n    });\n    const errorMessage = handleApiError(error, \"get market indices\");\n    return { data: null };\n  }\n};\n\n// Market volatility\nexport const getMarketVolatility = async () => {\n  console.log(\" getMarketVolatility: Starting API call...\");\n  try {\n    const response = await api.get(\"/api/market/volatility\");\n\n    console.log(\" getMarketVolatility: Raw response:\", {\n      status: response?.status,\n      hasData: !!response?.data,\n      dataType: typeof response?.data,\n      dataKeys: response?.data ? Object.keys(response?.data) : [],\n    });\n\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    console.log(\" getMarketVolatility: returning result:\", result);\n    return result;\n  } catch (error) {\n    console.error(\" Error fetching market volatility:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    const errorMessage = handleApiError(error, \"get market volatility\");\n    return { data: null };\n  }\n};\n\n// Economic calendar\nexport const getEconomicCalendar = async () => {\n  console.log(\" getEconomicCalendar: Starting API call...\");\n  try {\n    const response = await api.get(\"/api/economic/calendar\");\n\n    console.log(\" getEconomicCalendar: Raw response:\", {\n      status: response?.status,\n      hasData: !!response?.data,\n      dataType: typeof response?.data,\n      dataKeys: response?.data ? Object.keys(response?.data) : [],\n    });\n\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    console.log(\" getEconomicCalendar: returning result:\", result);\n    return result;\n  } catch (error) {\n    console.error(\" Error fetching economic calendar:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    const errorMessage = handleApiError(error, \"get economic calendar\");\n    return { data: null };\n  }\n};\n\n// Market cap categories\nexport const getMarketCapCategories = async () => {\n  console.log(\" getMarketCapCategories: Starting API call...\");\n  try {\n    const response = await api.get(\"/api/stocks/market-cap-categories\");\n\n    console.log(\" getMarketCapCategories: Raw response:\", {\n      status: response?.status,\n      hasData: !!response?.data,\n      dataType: typeof response?.data,\n      dataKeys: response?.data ? Object.keys(response?.data) : [],\n    });\n\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    console.log(\" getMarketCapCategories: returning result:\", result);\n    return result;\n  } catch (error) {\n    console.error(\" Error fetching market cap categories:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    const errorMessage = handleApiError(error, \"get market cap categories\");\n    return { data: null };\n  }\n};\n\n// Technical indicators\n// Volume data\nexport const getVolumeData = async (symbol, timeframe) => {\n  console.log(\" getVolumeData: Starting API call...\", { symbol, timeframe });\n  try {\n    const response = await api.get(`/api/stocks/${symbol}/volume`, {\n      params: { timeframe },\n    });\n\n    console.log(\" getVolumeData: Raw response:\", {\n      status: response?.status,\n      hasData: !!response?.data,\n      dataType: typeof response?.data,\n      dataKeys: response?.data ? Object.keys(response?.data) : [],\n    });\n\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    console.log(\" getVolumeData: returning result:\", result);\n    return result;\n  } catch (error) {\n    console.error(\" Error fetching volume data:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    const errorMessage = handleApiError(error, \"get volume data\");\n    return { data: null };\n  }\n};\n\n// Support resistance levels - DEPRECATED\n// Removed: /api/technical endpoint no longer exists\n// export const getSupportResistanceLevels = async (symbol) => { ... }\n\n// --- DASHBOARD API FUNCTIONS ---\nexport const getDashboardSummary = async () => {\n  console.log(\" [API] Fetching dashboard summary...\");\n  try {\n    const response = await api.get(\"/api/dashboard/summary\");\n    console.log(\" [API] Dashboard summary response:\", response);\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    console.error(\" [API] Dashboard summary error:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    return { data: null };\n  }\n};\n\nexport const getDashboardPerformance = async () => {\n  console.log(\" [API] Fetching dashboard performance...\");\n  try {\n    const response = await api.get(\"/api/dashboard/performance\");\n    console.log(\" [API] Dashboard performance response:\", response);\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    console.error(\" [API] Dashboard performance error:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    return { data: null };\n  }\n};\n\nexport const getDashboardAlerts = async () => {\n  console.log(\" [API] Fetching dashboard alerts...\");\n  try {\n    const response = await api.get(\"/api/dashboard/alerts\");\n    console.log(\" [API] Dashboard alerts response:\", response);\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    console.error(\" [API] Dashboard alerts error:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    return { data: null };\n  }\n};\n\nexport const getDashboardDebug = async () => {\n  console.log(\" [API] Fetching dashboard debug info...\");\n  try {\n    const response = await api.get(\"/api/dashboard/debug\");\n    console.log(\" [API] Dashboard debug response:\", response);\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    console.error(\" [API] Dashboard debug error:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    return { data: null };\n  }\n};\n\n// --- MARKET API FUNCTIONS ---\nexport const getMarketIndicators = async () => {\n  console.log(\" [API] Fetching market indicators...\");\n  try {\n    const response = await api.get(\"/api/market/indicators\");\n    console.log(\" [API] Market indicators response:\", response);\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    console.error(\" [API] Market indicators error:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      url: error.config?.url,\n    });\n    return { data: null };\n  }\n};\n\nexport const getMarketSentiment = async () => {\n  console.log(\" [API] Fetching market sentiment...\");\n  try {\n    const response = await api.get('/api/sentiment/current');\n    return extractResponseData(response);\n  } catch (error) {\n    console.error(\" [API] Market sentiment error:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      url: error.config?.url,\n    });\n    return { data: null };\n  }\n};\n\n// --- FINANCIAL DATA API FUNCTIONS ---\nexport const getFinancialData = async (symbol) => {\n  console.log(` [API] Fetching financial data for ${symbol}...`);\n  try {\n    const response = await api.get(`/financials/data/${symbol}`);\n    console.log(` [API] Financial data response for ${symbol}:`, response);\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    console.error(` [API] Financial data error for ${symbol}:`, {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      url: error.config?.url,\n      symbol,\n    });\n    return { data: null };\n  }\n};\n\nexport const getEarningsData = async (symbol) => {\n  console.log(` [API] Fetching earnings data for ${symbol}...`);\n  try {\n    const response = await api.get(`/financials/earnings/${symbol}`);\n    console.log(` [API] Earnings data response for ${symbol}:`, response);\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    console.error(` [API] Earnings data error for ${symbol}:`, {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    return { data: null };\n  }\n};\n\nexport const getCashFlow = async (symbol) => {\n  console.log(` [API] Fetching cash flow for ${symbol}...`);\n  try {\n    const response = await api.get(`/financials/cash-flow/${symbol}`);\n    console.log(` [API] Cash flow response for ${symbol}:`, response);\n    // Always return { data: ... } structure for consistency\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    return result;\n  } catch (error) {\n    console.error(` [API] Cash flow error for ${symbol}:`, {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    return { data: null };\n  }\n};\n\n// --- MISSING DASHBOARD API FUNCTIONS ---\nexport const getDashboardUser = async () => {\n  console.log(\" [API] Fetching dashboard user...\");\n  try {\n    const response = await api.get('/api/user/profile');\n    return extractResponseData(response);\n  } catch (error) {\n    console.error(\" [API] Dashboard user error:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    return { data: null };\n  }\n};\n\nexport const getDashboardPortfolio = async () => {\n  console.log(\" [API] Fetching dashboard portfolio...\");\n  try {\n    // Call real API endpoint\n    const response = await api.get('/api/portfolio/dashboard');\n    console.log(\" [API] Dashboard portfolio response:\", response.data);\n    return extractResponseData(response);\n  } catch (error) {\n    console.error(\" [API] Dashboard portfolio error:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    // Return empty data instead of mock fallback\n    return { data: null };\n  }\n};\n\nexport const getDashboardPortfolioMetrics = async () => {\n  console.log(\" [API] Fetching dashboard portfolio metrics...\");\n  try {\n    const response = await api.get('/api/portfolio/metrics');\n    const data = extractResponseData(response);\n    return data || {};\n  } catch (error) {\n    console.error(\" [API] Dashboard portfolio metrics error:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    return { data: null };\n  }\n};\n\nexport const getDashboardHoldings = async () => {\n  console.log(\" [API] Fetching dashboard holdings...\");\n  try {\n    const response = await api.get('/api/portfolio/holdings');\n    return extractResponseData(response);\n  } catch (error) {\n    console.error(\" [API] Dashboard holdings error:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    return { data: null };\n  }\n};\n\nexport const getDashboardUserSettings = async () => {\n  console.log(\" [API] Fetching dashboard user settings...\");\n  try {\n    const response = await api.get('/api/user/settings');\n    return extractResponseData(response);\n  } catch (error) {\n    console.error(\" [API] Dashboard user settings error:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    return { data: null };\n  }\n};\n\nexport const getDashboardMarketSummary = async () => {\n  console.log(\" [API] Fetching dashboard market summary...\");\n  try {\n    const response = await api.get('/api/market/summary');\n    return extractResponseData(response);\n  } catch (error) {\n    console.error(\" [API] Dashboard market summary error:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    return { data: null };\n  }\n};\n\nexport const getDashboardEarningsCalendar = async () => {\n  console.log(\" [API] Fetching dashboard earnings calendar...\");\n  try {\n    const response = await api.get(\"/api/earnings/calendar\");\n    console.log(\" [API] Earnings calendar response:\", response.data);\n    // Backend returns: { items: [...calendar items], pagination: {...}, success: true }\n    return response.data?.items || [];\n  } catch (error) {\n    console.error(\" [API] Dashboard earnings calendar error:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    return [];\n  }\n};\n\nexport const getDashboardFinancialHighlights = async () => {\n  console.log(\" [API] Fetching dashboard financial highlights...\");\n  try {\n    const response = await api.get(\"/api/financials/highlights\");\n    console.log(\" [API] Financial highlights response:\", response.data);\n    return extractResponseData(response);\n  } catch (error) {\n    console.error(\" [API] Dashboard financial highlights error:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    return { data: null };\n  }\n};\n\nexport const getDashboardSymbols = async () => {\n  console.log(\" [API] Fetching dashboard symbols...\");\n  try {\n    const response = await api.get(\"/api/dashboard/symbols\");\n    console.log(\" [API] Dashboard symbols response:\", response.data);\n    return extractResponseData(response);\n  } catch (error) {\n    console.error(\" [API] Dashboard symbols error:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    return { data: null };\n  }\n};\n\nexport const getTradingSignalsDaily = async (params = {}) => {\n  console.log(\" [API] Fetching daily trading signals...\", params);\n\n  try {\n    const queryParams = new URLSearchParams({\n      limit: params.limit || 10,\n      timeframe: 'daily',\n      ...params,\n    }).toString();\n\n    const endpoint = `/api/signals/list?${queryParams}`;\n    console.log(` [API] Using endpoint: ${endpoint}`);\n    const response = await api.get(endpoint);\n    console.log(` [API] SUCCESS with endpoint: ${endpoint}`, response);\n\n    console.log(\" [API] Trading signals daily raw response:\", response);\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    console.log(\" [API] Trading signals daily normalized result:\", result);\n    return result;\n  } catch (error) {\n    console.error(\" [API] Trading signals daily error details:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n      url: error.config?.url,\n      method: error.config?.method,\n      stack: error?.stack?.substring(0, 500) + \"...\",\n    });\n    return { data: null };\n  }\n};\n\nexport const getCurrentUser = async () => {\n  console.log(\" [API] Fetching current user info...\");\n\n  try {\n    // Try multiple endpoint variations\n    const endpoints = [\"/api/auth/me\"];\n    let response = null;\n    let lastError = null;\n\n    for (const endpoint of endpoints) {\n      try {\n        console.log(` [API] Trying endpoint: ${endpoint}`);\n        response = await api.get(endpoint);\n        console.log(` [API] SUCCESS with endpoint: ${endpoint}`, response);\n        break;\n      } catch (err) {\n        console.log(` [API] FAILED endpoint: ${endpoint}`, err.message);\n        lastError = err;\n        continue;\n      }\n    }\n\n    if (!response) {\n      console.error(\n        \" [API] All endpoints failed, throwing last error:\",\n        lastError\n      );\n      throw lastError;\n    }\n\n    console.log(\" [API] Current user raw response:\", response);\n    const result = {\n      data: extractResponseData(response),\n      success: response.data?.success ?? true,\n      timestamp: response.data?.timestamp\n    };\n    console.log(\" [API] Current user normalized result:\", result);\n    return result;\n  } catch (error) {\n    console.error(\" [API] Current user error details:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n      url: error.config?.url,\n      method: error.config?.method,\n      stack: error?.stack?.substring(0, 500) + \"...\",\n    });\n    return { data: null };\n  }\n};\n\nexport const getDashboardTechnicalSignals = async () => {\n  console.log(\" [API] Fetching dashboard technical signals...\");\n  try {\n    const response = await api.get('/api/signals/dashboard');\n    return extractResponseData(response);\n  } catch (error) {\n    console.error(\" [API] Dashboard technical signals error:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    return { data: null };\n  }\n};\n\n// Missing API functions that tests expect\nexport const getQuote = async (symbol) => {\n  try {\n    console.log(` [API] Fetching quote for ${symbol}...`);\n    const response = await api.get(`/api/market/quote/${symbol}`);\n\n    const result = {\n      symbol: symbol,\n      price: response?.data?.price || 0,\n      change: response?.data?.change || 0,\n      changePercent: response?.data?.changePercent || 0,\n      volume: response?.data?.volume || 0,\n      timestamp: response?.data?.timestamp || new Date().toISOString(),\n    };\n\n    console.log(` [API] Quote for ${symbol}:`, result);\n    return result;\n  } catch (error) {\n    console.error(` [API] Quote error for ${symbol}:`, {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    return { data: null };\n  }\n};\n\nexport const placeOrder = async (orderRequest) => {\n  try {\n    console.log(\" [API] Placing order:\", orderRequest);\n    const response = await api.post(\"/api/orders\", orderRequest);\n\n    const result = {\n      orderId: response?.data?.orderId || `order-${Date.now()}`,\n      status: response?.data?.status || \"pending\",\n      symbol: orderRequest.symbol,\n      quantity: orderRequest.quantity,\n      side: orderRequest.side,\n      type: orderRequest.type || \"market\",\n      timestamp: new Date().toISOString(),\n    };\n\n    console.log(\" [API] Order placed:\", result);\n    return result;\n  } catch (error) {\n    console.error(\" [API] Order placement error:\", {\n      message: error?.message || \"Unknown error\",\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n    });\n    return { data: null };\n  }\n};\n\n\n// Export all methods as a default object for easier importing\n\n// Add aliases for test compatibility - fetchXxx functions expected by tests\nexport const fetchPortfolioHoldings = getPortfolioHoldings;\n// fetchMarketOverview is exported from api.js, not apiPart2.js\nexport const fetchStockData = getStock;\nexport const fetchPortfolioPerformance = getPortfolioPerformance;\nexport const fetchMarketData = getMarketIndicators;\nexport const fetchEarningsData = getEarningsData;\nexport const fetchHistoricalData = getStockHistory;\n\n// Portfolio Sector & Industry Analysis\nexport const getPortfolioSectorIndustryAnalysis = async () => {\n  try {\n    const response = await api.get(\"/api/portfolio/sector-industry-analysis\");\n    return extractResponseData(response);\n  } catch (error) {\n    return { data: null };\n  }\n};\n\n// Check if Alpaca is configured (using environment variables)\nexport const checkAlpacaConfiguration = async () => {\n  try {\n    const response = await api.get(\"/api/portfolio/import/alpaca/status\");\n    return extractResponseData(response);\n  } catch (error) {\n    console.error(\"Error checking Alpaca configuration:\", error);\n    return { data: null };\n  }\n};\n\n// Import portfolio from Alpaca (uses environment variables, no user input needed)\nexport const importPortfolioFromAlpaca = async () => {\n  try {\n    const response = await api.post(\"/api/portfolio/import/alpaca\");\n    return extractResponseData(response);\n  } catch (error) {\n    return { data: null };\n  }\n};\n\n// Market Commentary functions\nexport const getMarketCommentary = async (\n  category = \"all\",\n  period = \"week\"\n) => {\n  try {\n    const response = await api.get(\"/api/research/commentary\", {\n      params: { category, period },\n    });\n    return extractResponseData(response);\n  } catch (error) {\n    return { data: null };\n  }\n};\n\nexport const getMarketTrends = async (period = \"week\") => {\n  try {\n    const response = await api.get(\"/api/research/trends\", {\n      params: { period },\n    });\n    return extractResponseData(response);\n  } catch (error) {\n    return { data: null };\n  }\n};\n\nexport const getAnalystOpinions = async () => {\n  try {\n    const response = await api.get(\"/api/research/analysts\");\n    return extractResponseData(response);\n  } catch (error) {\n    return { data: null };\n  }\n};\n\nexport const subscribeToCommentary = async (category = \"all\") => {\n  try {\n    const response = await api.post(\"/api/research/commentary/subscribe\", {\n      category,\n    });\n    return extractResponseData(response);\n  } catch (error) {\n    console.error(\"Error subscribing to commentary:\", error);\n    return { data: null };\n  }\n};\n\nexport const getOrderBook = async (symbol) => {\n  try {\n    const response = await api.get(`/api/trading/orderbook/${symbol}`);\n    return extractResponseData(response);\n  } catch (error) {\n    return { data: null };\n  }\n};\n\nexport const getTradingPositions = async () => {\n  try {\n    const response = await api.get(\"/api/trading/positions\");\n    return extractResponseData(response);\n  } catch (error) {\n    return { data: null };\n  }\n};\n\n// ============================================\n// Positioning API Methods\n// ============================================\n\nexport const getPositioningData = async (symbol, params = {}) => {\n  try {\n    const response = await api.get(`/api/positioning/stocks`, {\n      params: { symbol, ...params },\n    });\n    return extractResponseData(response);\n  } catch (error) {\n    console.error(`Error fetching positioning data for ${symbol}:`, error);\n    return { data: null };\n  }\n};\n\nexport const getPositioningSummary = async () => {\n  try {\n    const response = await api.get(\"/api/positioning/summary\");\n    return extractResponseData(response);\n  } catch (error) {\n    return { data: null };\n  }\n};\n\nexport const getTopPositioningMovers = async (limit = 20) => {\n  try {\n    const response = await api.get(\"/api/positioning/data\", {\n      params: { limit },\n    });\n    return extractResponseData(response);\n  } catch (error) {\n    return { data: null };\n  }\n};\n\n// Trade endpoints consolidated:\n// GET /api/trades - Get all trades with filtering/pagination (symbol, type, source, page, limit, sort)\n// GET /api/trades/summary - Get trade summary statistics\n// See TradeHistory.jsx which calls these endpoints directly\n\n// ==============================================================\n// All functions are exported via named exports above.\n// This split was necessary because the monolithic 4367-line file\n// was causing memory issues during build. By splitting at line 1637,\n// we reduced each file to ~2000-2700 lines, which resolves the issue.\n// All 29 files that import from this module continue to work unchanged.\n// ==============================================================\n\n// Export api as default for backwards compatibility\nexport default api;\n","import { useState, useEffect } from \"react\";\nimport api from \"../services/api.js\";\nimport {\n  Alert,\n  Box,\n  Card,\n  CardContent,\n  Chip,\n  CircularProgress,\n  Container,\n  FormControl,\n  Grid,\n  IconButton,\n  InputLabel,\n  LinearProgress,\n  MenuItem,\n  Paper,\n  Select,\n  Tab,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Tabs,\n  TextField,\n  Tooltip,\n  Typography,\n} from \"@mui/material\";\nimport {\n  TrendingUp,\n  TrendingDown,\n  Info,\n  Assessment,\n  AttachMoney,\n  AccountBalance,\n} from \"@mui/icons-material\";\n\nconst MetricsDashboard = () => {\n  const [activeTab, setActiveTab] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Data states\n  const [stocks, setStocks] = useState([]);\n  const [sectors, setSectors] = useState([]);\n  const [topStocks, setTopStocks] = useState({});\n  const [bottomStocks, setBottomStocks] = useState({});\n\n  // Filter states\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [selectedSector, setSelectedSector] = useState(\"\");\n  const [minMetric, setMinMetric] = useState(0);\n  const [maxMetric, setMaxMetric] = useState(1);\n  const [sortBy, setSortBy] = useState(\"composite_metric\");\n  const [sortOrder, _setSortOrder] = useState(\"desc\");\n\n  // Pagination\n  const [page, _setPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n\n  useEffect(() => {\n    fetchData();\n    \n  }, [\n    page,\n    searchTerm,\n    selectedSector,\n    minMetric,\n    maxMetric,\n    sortBy,\n    sortOrder,\n  ]);\n\n  useEffect(() => {\n    if (activeTab === 0) {\n      fetchTopStocks();\n      fetchBottomStocks();\n    }\n  }, [activeTab]);\n\n  const fetchData = async () => {\n    try {\n      setLoading(true);\n\n      const params = new URLSearchParams({\n        limit: \"50\",\n        offset: \"0\",\n        search: searchTerm,\n        sortBy,\n        sortOrder,\n      });\n\n      // Use scores endpoint which provides stock metrics\n      const response = await api.get(`/api/scores/stockscores?${params}`);\n\n      if (!response || !response.data) {\n        throw new Error('No data received from scores API');\n      }\n\n      // Response structure: { items: [...], pagination: {...}, success: true }\n      const stocksArray = response.data?.items || [];\n\n      setStocks(stocksArray);\n      setTotalPages(Math.ceil((response.data?.pagination?.total || stocksArray.length) / 50) || 1);\n      setError(null);\n    } catch (err) {\n      if (import.meta.env && import.meta.env.DEV)\n        console.error(\"Error fetching metrics:\", err);\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n\n  const fetchTopStocks = async () => {\n    try {\n      // Fetch all stocks sorted by composite score to build all three rankings\n      const response = await api.get(`/api/scores/stockscores?limit=50&sortBy=composite_score`);\n\n      if (!response || !response.data) {\n        throw new Error('No data received from top stocks API');\n      }\n\n      // Response structure: { items: [...], pagination: {...}, success: true }\n      const stocks = response.data?.items || [];\n\n      // Create mappings for each category with proper API field names\n      const topStocksData = {\n        composite: stocks\n          .filter(s => s.composite_score !== null && s.composite_score !== undefined)\n          .sort((a, b) => b.composite_score - a.composite_score)\n          .slice(0, 10)\n          .map(stock => ({\n            ...stock,\n            companyName: stock.company_name,\n            categoryMetric: stock.composite_score,\n            sector: stock.sector || \"N/A\"\n          })),\n        quality: stocks\n          .filter(s => s.quality_score !== null && s.quality_score !== undefined)\n          .sort((a, b) => b.quality_score - a.quality_score)\n          .slice(0, 10)\n          .map(stock => ({\n            ...stock,\n            companyName: stock.company_name,\n            categoryMetric: stock.quality_score,\n            sector: stock.sector || \"N/A\"\n          })),\n        value: stocks\n          .filter(s => s.value_score !== null && s.value_score !== undefined)\n          .sort((a, b) => b.value_score - a.value_score)\n          .slice(0, 10)\n          .map(stock => ({\n            ...stock,\n            companyName: stock.company_name,\n            categoryMetric: stock.value_score,\n            sector: stock.sector || \"N/A\"\n          })),\n      };\n\n      setTopStocks(topStocksData);\n    } catch (err) {\n      if (import.meta.env && import.meta.env.DEV)\n        console.error(\"Error fetching top stocks:\", err);\n      setError(err.message);\n    }\n  };\n\n  const fetchBottomStocks = async () => {\n    try {\n      // Fetch large dataset to ensure we get enough bottom performers\n      // Note: We fetch a large limit and sort client-side to get bottom performers\n      const response = await api.get(`/api/scores/stockscores?limit=500&sortBy=composite_score`);\n\n      if (!response || !response.data) {\n        throw new Error('No data received from bottom stocks API');\n      }\n\n      // Response structure: { items: [...], pagination: {...}, success: true }\n      const stocks = response.data?.items || [];\n\n      if (!stocks || stocks.length === 0) {\n        console.warn(\"No stocks returned from API\");\n        setBottomStocks({});\n        return;\n      }\n\n      // Create mappings for each category with proper API field names (ASCENDING order for worst performers)\n      const bottomStocksData = {\n        composite: stocks\n          .filter(s => s.composite_score !== null && s.composite_score !== undefined)\n          .sort((a, b) => a.composite_score - b.composite_score)\n          .slice(0, 10)\n          .map(stock => ({\n            ...stock,\n            companyName: stock.company_name || \"N/A\",\n            categoryMetric: stock.composite_score,\n            sector: stock.sector || \"N/A\"\n          })),\n        quality: stocks\n          .filter(s => s.quality_score !== null && s.quality_score !== undefined)\n          .sort((a, b) => a.quality_score - b.quality_score)\n          .slice(0, 10)\n          .map(stock => ({\n            ...stock,\n            companyName: stock.company_name || \"N/A\",\n            categoryMetric: stock.quality_score,\n            sector: stock.sector || \"N/A\"\n          })),\n        value: stocks\n          .filter(s => s.value_score !== null && s.value_score !== undefined)\n          .sort((a, b) => a.value_score - b.value_score)\n          .slice(0, 10)\n          .map(stock => ({\n            ...stock,\n            companyName: stock.company_name || \"N/A\",\n            categoryMetric: stock.value_score,\n            sector: stock.sector || \"N/A\"\n          })),\n        growth: stocks\n          .filter(s => s.growth_score !== null && s.growth_score !== undefined)\n          .sort((a, b) => a.growth_score - b.growth_score)\n          .slice(0, 10)\n          .map(stock => ({\n            ...stock,\n            companyName: stock.company_name || \"N/A\",\n            categoryMetric: stock.growth_score,\n            sector: stock.sector || \"N/A\"\n          })),\n        momentum: stocks\n          .filter(s => s.momentum_score !== null && s.momentum_score !== undefined)\n          .sort((a, b) => a.momentum_score - b.momentum_score)\n          .slice(0, 10)\n          .map(stock => ({\n            ...stock,\n            companyName: stock.company_name || \"N/A\",\n            categoryMetric: stock.momentum_score,\n            sector: stock.sector || \"N/A\"\n          })),\n      };\n\n      setBottomStocks(bottomStocksData);\n    } catch (err) {\n      console.error(\"Error fetching bottom stocks:\", err);\n      setError(err.message);\n      setBottomStocks({});\n    }\n  };\n\n  const getMetricColor = (metric) => {\n    if (metric === null || metric === undefined) return \"#9e9e9e\"; // Gray for N/A\n    if (metric >= 0.8) return \"#4caf50\"; // Green\n    if (metric >= 0.7) return \"#8bc34a\"; // Light green\n    if (metric >= 0.6) return \"#ffeb3b\"; // Yellow\n    if (metric >= 0.5) return \"#ff9800\"; // Orange\n    return \"#f44336\"; // Red\n  };\n\n  const safeMetricDisplay = (value) => {\n    return value !== null && value !== undefined ? value.toFixed(3) : \"N/A\";\n  };\n\n  const getMetricChip = (metric, label) => (\n    <Chip\n      label={`${label}: ${metric.toFixed(3)}`}\n      size=\"small\"\n      style={{\n        backgroundColor: getMetricColor(metric),\n        color: metric >= 0.6 ? \"#000\" : \"#fff\",\n        fontWeight: \"bold\",\n        margin: \"2px\",\n      }}\n    />\n  );\n\n  const MetricProgressBar = ({ metric, label, icon }) => (\n    <Box sx={{ mb: 2 }}>\n      <Box sx={{ display: \"flex\", alignItems: \"center\", mb: 1 }}>\n        {icon}\n        <Typography variant=\"body2\" sx={{ ml: 1, flex: 1 }}>\n          {label}\n        </Typography>\n        <Typography variant=\"body2\" sx={{ fontWeight: \"bold\" }}>\n          {metric.toFixed(3)}\n        </Typography>\n      </Box>\n      <LinearProgress\n        variant=\"determinate\"\n        value={metric * 100}\n        sx={{\n          height: 8,\n          borderRadius: 4,\n          \"& .MuiLinearProgress-bar\": {\n            backgroundColor: getMetricColor(metric),\n            borderRadius: 4,\n          },\n        }}\n      />\n    </Box>\n  );\n\n  const MainMetricsTable = () => (\n    <TableContainer component={Paper} sx={{ mt: 3 }}>\n      <Table>\n        <TableHead>\n          <TableRow>\n            <TableCell>\n              <strong>Symbol</strong>\n            </TableCell>\n            <TableCell>\n              <strong>Company</strong>\n            </TableCell>\n            <TableCell>\n              <strong>Sector</strong>\n            </TableCell>\n            <TableCell align=\"center\">\n              <strong>Composite Metric</strong>\n            </TableCell>\n            <TableCell align=\"center\">\n              <strong>Quality</strong>\n            </TableCell>\n            <TableCell align=\"center\">\n              <strong>Value</strong>\n            </TableCell>\n            <TableCell align=\"center\">\n              <strong>Growth</strong>\n            </TableCell>\n            <TableCell>\n              <strong>Price</strong>\n            </TableCell>\n            <TableCell>\n              <strong>Market Cap</strong>\n            </TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {(stocks || []).map((stock, _index) => (\n            <TableRow key={stock.symbol} hover>\n              <TableCell>\n                <Typography\n                  variant=\"subtitle2\"\n                  sx={{ fontWeight: \"bold\", color: \"#1976d2\" }}\n                >\n                  {stock.symbol}\n                </Typography>\n              </TableCell>\n              <TableCell>\n                <Typography variant=\"body2\">\n                  {stock.companyName?.substring(0, 30)}\n                  {stock.companyName?.length > 30 ? \"...\" : \"\"}\n                </Typography>\n              </TableCell>\n              <TableCell>\n                <Chip label={stock.sector} size=\"small\" variant=\"outlined\" />\n              </TableCell>\n              <TableCell align=\"center\">\n                <Box\n                  sx={{\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    justifyContent: \"center\",\n                  }}\n                >\n                  <Typography\n                    variant=\"h6\"\n                    sx={{\n                      color: getMetricColor(stock.returnOnEquity),\n                      fontWeight: \"bold\",\n                    }}\n                  >\n                    {safeMetricDisplay(stock.returnOnEquity)}\n                  </Typography>\n                  <Tooltip\n                    title={`PE: ${stock.pe || 'N/A'}`}\n                  >\n                    <IconButton size=\"small\">\n                      <Info fontSize=\"small\" />\n                    </IconButton>\n                  </Tooltip>\n                </Box>\n              </TableCell>\n              <TableCell align=\"center\">\n                <Typography\n                  sx={{ color: getMetricColor(stock.profitMargin) }}\n                >\n                  {safeMetricDisplay(stock.profitMargin)}\n                </Typography>\n              </TableCell>\n              <TableCell align=\"center\">\n                <Typography sx={{ color: getMetricColor(stock.debtToEquity) }}>\n                  {safeMetricDisplay(stock.debtToEquity)}\n                </Typography>\n              </TableCell>\n              <TableCell align=\"center\">\n                <Typography\n                  sx={{ color: getMetricColor(stock.returnOnAssets) }}\n                >\n                  {safeMetricDisplay(stock.returnOnAssets)}\n                </Typography>\n              </TableCell>\n              <TableCell>${stock.currentPrice?.toFixed(2) || \"N/A\"}</TableCell>\n              <TableCell>\n                {stock.marketCap\n                  ? `$${(stock.marketCap / 1e9).toFixed(1)}B`\n                  : \"N/A\"}\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n\n  const SectorAnalysis = () => (\n    <Grid container spacing={3} sx={{ mt: 2 }}>\n      {(sectors || []).map((sector) => (\n        <Grid item xs={12} md={6} lg={4} key={sector.sector}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                {sector.sector}\n              </Typography>\n              <Typography variant=\"body2\" color=\"textSecondary\" gutterBottom>\n                {sector.stockCount} stocks\n              </Typography>\n\n              <MetricProgressBar\n                metric={parseFloat(sector.averageMetrics.composite)}\n                label=\"Composite\"\n                icon={<Assessment />}\n              />\n              <MetricProgressBar\n                metric={parseFloat(sector.averageMetrics.quality)}\n                label=\"Quality\"\n                icon={<AccountBalance />}\n              />\n              <MetricProgressBar\n                metric={parseFloat(sector.averageMetrics.value)}\n                label=\"Value\"\n                icon={<AttachMoney />}\n              />\n              <MetricProgressBar\n                metric={parseFloat(sector.averageMetrics.growth ?? 0)}\n                label=\"Growth\"\n                icon={<TrendingUp />}\n              />\n\n              <Box\n                sx={{ mt: 2, display: \"flex\", justifyContent: \"space-between\" }}\n              >\n                <Typography variant=\"caption\">\n                  Range: {sector.metricRange.min} - {sector.metricRange.max}\n                </Typography>\n                <Typography variant=\"caption\">\n                  Vol: {sector.metricRange.volatility}\n                </Typography>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n      ))}\n    </Grid>\n  );\n\n  const TopStocks = () => (\n    <Grid container spacing={3} sx={{ mt: 2 }}>\n      {Object.entries(topStocks).map(([category, stocks]) => (\n        <Grid item xs={12} md={6} key={category}>\n          <Card>\n            <CardContent>\n              <Typography\n                variant=\"h6\"\n                gutterBottom\n                sx={{ textTransform: \"capitalize\" }}\n              >\n                Top {category === \"composite\" ? \"Overall\" : category} Stocks\n              </Typography>\n              <Box sx={{ maxHeight: 400, overflow: \"auto\" }}>\n                {stocks.slice(0, 10).map((stock, index) => (\n                  <Box\n                    key={stock.symbol}\n                    sx={{\n                      display: \"flex\",\n                      justifyContent: \"space-between\",\n                      alignItems: \"center\",\n                      py: 1,\n                      borderBottom: index < 9 ? \"1px solid #eee\" : \"none\",\n                    }}\n                  >\n                    <Box>\n                      <Typography\n                        variant=\"subtitle2\"\n                        sx={{ fontWeight: \"bold\" }}\n                      >\n                        {index + 1}. {stock.symbol}\n                      </Typography>\n                      <Typography variant=\"caption\" color=\"textSecondary\">\n                        {stock.companyName?.substring(0, 25)}\n                        {stock.companyName?.length > 25 ? \"...\" : \"\"}\n                      </Typography>\n                    </Box>\n                    <Box sx={{ textAlign: \"right\" }}>\n                      <Typography\n                        variant=\"body2\"\n                        sx={{\n                          color: getMetricColor(stock.categoryMetric),\n                          fontWeight: \"bold\",\n                        }}\n                      >\n                        {stock.categoryMetric.toFixed(3)}\n                      </Typography>\n                      <Typography variant=\"caption\" color=\"textSecondary\">\n                        {stock.sector}\n                      </Typography>\n                    </Box>\n                  </Box>\n                ))}\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n      ))}\n    </Grid>\n  );\n\n  const BottomStocks = () => {\n    const hasData = bottomStocks && Object.keys(bottomStocks).length > 0;\n\n    return (\n      <Grid container spacing={3} sx={{ mt: 2 }}>\n        {hasData ? (\n          Object.entries(bottomStocks).map(([category, stocks]) => (\n            stocks && stocks.length > 0 && (\n              <Grid item xs={12} md={6} key={`bottom-${category}`}>\n                <Card>\n                  <CardContent>\n                    <Typography\n                      variant=\"h6\"\n                      gutterBottom\n                      sx={{ textTransform: \"capitalize\" }}\n                    >\n                      Bottom {category === \"composite\" ? \"Overall\" : category} Stocks\n                    </Typography>\n                    <Box sx={{ maxHeight: 400, overflow: \"auto\" }}>\n                      {stocks.map((stock, index) => (\n                        <Box\n                          key={`${stock.symbol}-${index}`}\n                          sx={{\n                            display: \"flex\",\n                            justifyContent: \"space-between\",\n                            alignItems: \"center\",\n                            py: 1,\n                            borderBottom: index < stocks.length - 1 ? \"1px solid #eee\" : \"none\",\n                          }}\n                        >\n                          <Box>\n                            <Typography\n                              variant=\"subtitle2\"\n                              sx={{ fontWeight: \"bold\" }}\n                            >\n                              {index + 1}. {stock.symbol}\n                            </Typography>\n                            <Typography variant=\"caption\" color=\"textSecondary\">\n                              {stock.companyName?.substring(0, 25)}\n                              {stock.companyName?.length > 25 ? \"...\" : \"\"}\n                            </Typography>\n                          </Box>\n                          <Box sx={{ textAlign: \"right\" }}>\n                            <Typography\n                              variant=\"body2\"\n                              sx={{\n                                color: getMetricColor(stock.categoryMetric),\n                                fontWeight: \"bold\",\n                              }}\n                            >\n                              {stock.categoryMetric.toFixed(3)}\n                            </Typography>\n                            <Typography variant=\"caption\" color=\"textSecondary\">\n                              {stock.sector}\n                            </Typography>\n                          </Box>\n                        </Box>\n                      ))}\n                    </Box>\n                  </CardContent>\n                </Card>\n              </Grid>\n            )\n          ))\n        ) : (\n          <Grid item xs={12}>\n            <Card>\n              <CardContent>\n                <Typography color=\"textSecondary\">\n                  Loading bottom performers...\n                </Typography>\n              </CardContent>\n            </Card>\n          </Grid>\n        )}\n      </Grid>\n    );\n  };\n\n  if (error) {\n    return (\n      <Container maxWidth=\"lg\" sx={{ mt: 4 }}>\n        <Alert severity=\"error\">Error loading metrics: {error}</Alert>\n      </Container>\n    );\n  }\n\n  return (\n    <Container maxWidth=\"lg\" sx={{ mt: 4 }}>\n      {/* Header */}\n      <Box sx={{ mb: 4 }}>\n        <Typography variant=\"h3\" component=\"h1\" gutterBottom>\n          Institutional-Grade Stock Metrics\n        </Typography>\n        <Typography variant=\"subtitle1\" color=\"textSecondary\">\n          Advanced multi-factor analysis based on academic research and\n          institutional methodology\n        </Typography>\n      </Box>\n\n      {/* Navigation Tabs */}\n      <Box sx={{ borderBottom: 1, borderColor: \"divider\", mb: 3 }}>\n        <Tabs\n          value={activeTab}\n          onChange={(e, newValue) => setActiveTab(newValue)}\n        >\n          <Tab value={0} label=\"Stock Metrics\" />\n        </Tabs>\n      </Box>\n\n      {/* Filters for Stock Metrics Tab */}\n      {activeTab === 0 && (\n        <Paper sx={{ p: 3, mb: 3 }}>\n          <Grid container spacing={2} alignItems=\"center\">\n            <Grid item xs={12} sm={3}>\n              <TextField\n                fullWidth\n                label=\"Search Symbol/Company\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                size=\"small\"\n              />\n            </Grid>\n            <Grid item xs={12} sm={2}>\n              <FormControl fullWidth size=\"small\">\n                <InputLabel>Sector</InputLabel>\n                <Select\n                  value={selectedSector}\n                  label=\"Sector\"\n                  onChange={(e) => setSelectedSector(e.target.value)}\n                >\n                  <MenuItem value=\"\">All Sectors</MenuItem>\n                  <MenuItem value=\"Technology\">Technology</MenuItem>\n                  <MenuItem value=\"Healthcare\">Healthcare</MenuItem>\n                  <MenuItem value=\"Financial Services\">\n                    Financial Services\n                  </MenuItem>\n                  <MenuItem value=\"Consumer Cyclical\">\n                    Consumer Cyclical\n                  </MenuItem>\n                  <MenuItem value=\"Industrials\">Industrials</MenuItem>\n                  <MenuItem value=\"Communication Services\">\n                    Communication Services\n                  </MenuItem>\n                  <MenuItem value=\"Consumer Defensive\">\n                    Consumer Defensive\n                  </MenuItem>\n                  <MenuItem value=\"Energy\">Energy</MenuItem>\n                  <MenuItem value=\"Utilities\">Utilities</MenuItem>\n                  <MenuItem value=\"Real Estate\">Real Estate</MenuItem>\n                  <MenuItem value=\"Basic Materials\">Basic Materials</MenuItem>\n                </Select>\n              </FormControl>\n            </Grid>\n            <Grid item xs={12} sm={2}>\n              <TextField\n                fullWidth\n                label=\"Min Metric\"\n                type=\"number\"\n                value={minMetric}\n                onChange={(e) => setMinMetric(Number(e.target.value))}\n                size=\"small\"\n                inputProps={{ min: 0, max: 1, step: 0.01 }}\n              />\n            </Grid>\n            <Grid item xs={12} sm={2}>\n              <TextField\n                fullWidth\n                label=\"Max Metric\"\n                type=\"number\"\n                value={maxMetric}\n                onChange={(e) => setMaxMetric(Number(e.target.value))}\n                size=\"small\"\n                inputProps={{ min: 0, max: 1, step: 0.01 }}\n              />\n            </Grid>\n            <Grid item xs={12} sm={2}>\n              <FormControl fullWidth size=\"small\">\n                <InputLabel>Sort By</InputLabel>\n                <Select\n                  value={sortBy}\n                  label=\"Sort By\"\n                  onChange={(e) => setSortBy(e.target.value)}\n                >\n                  <MenuItem value=\"composite_metric\">Composite Metric</MenuItem>\n                  <MenuItem value=\"quality_metric\">Quality Metric</MenuItem>\n                  <MenuItem value=\"value_metric\">Value Metric</MenuItem>\n                  <MenuItem value=\"market_cap\">Market Cap</MenuItem>\n                  <MenuItem value=\"symbol\">Symbol</MenuItem>\n                </Select>\n              </FormControl>\n            </Grid>\n          </Grid>\n        </Paper>\n      )}\n\n      {/* Content based on active tab */}\n      {loading ? (\n        <Box sx={{ display: \"flex\", justifyContent: \"center\", mt: 4 }}>\n          <CircularProgress />\n        </Box>\n      ) : (\n        <>\n          {activeTab === 0 && (\n            <>\n              <MainMetricsTable />\n              <Typography variant=\"h5\" sx={{ fontWeight: 700, mb: 3, mt: 6 }}>Top Performers by Category</Typography>\n              <TopStocks />\n              <Typography variant=\"h5\" sx={{ fontWeight: 700, mb: 3, mt: 6 }}>Bottom Performers by Category</Typography>\n              <BottomStocks />\n            </>\n          )}\n        </>\n      )}\n\n      {/* Pagination for Stock Metrics */}\n      {activeTab === 0 && totalPages > 1 && (\n        <Box sx={{ display: \"flex\", justifyContent: \"center\", mt: 3 }}>\n          <Typography variant=\"body2\" sx={{ mt: 1 }}>\n            Page {page} of {totalPages}\n          </Typography>\n          {/* Add pagination controls here if needed */}\n        </Box>\n      )}\n\n      {/* Legend */}\n      <Paper sx={{ p: 2, mt: 4, backgroundColor: \"#f5f5f5\" }}>\n        <Typography variant=\"h6\" gutterBottom>\n          Metrics Methodology\n        </Typography>\n        <Grid container spacing={2}>\n          <Grid item xs={12} sm={6} md={6}>\n            <Typography variant=\"subtitle2\">Quality Metric</Typography>\n            <Typography variant=\"caption\">\n              Financial statement quality, balance sheet strength,\n              profitability, management effectiveness using Piotroski F-Score,\n              Altman Z-Score analysis\n            </Typography>\n          </Grid>\n          <Grid item xs={12} sm={6} md={6}>\n            <Typography variant=\"subtitle2\">Value Metric</Typography>\n            <Typography variant=\"caption\">\n              Traditional multiples (P/E, P/B, EV/EBITDA), DCF intrinsic value,\n              dividend discount model, and peer comparison analysis\n            </Typography>\n          </Grid>\n          <Grid item xs={12} sm={6} md={6}>\n            <Typography variant=\"subtitle2\">Growth Metric</Typography>\n            <Typography variant=\"caption\">\n              Revenue growth analysis, earnings growth quality, fundamental\n              growth drivers, and market expansion potential based on academic\n              research\n            </Typography>\n          </Grid>\n        </Grid>\n\n        <Box sx={{ mt: 2 }}>\n          <Typography variant=\"subtitle2\" gutterBottom>\n            Metric Ranges (0-1 Scale):\n          </Typography>\n          <Box sx={{ display: \"flex\", flexWrap: \"wrap\", gap: 1 }}>\n            {getMetricChip(0.9, \"Excellent (0.8-1.0)\")}\n            {getMetricChip(0.75, \"Good (0.7-0.79)\")}\n            {getMetricChip(0.65, \"Fair (0.6-0.69)\")}\n            {getMetricChip(0.55, \"Below Average (0.5-0.59)\")}\n            {getMetricChip(0.4, \"Poor (0.0-0.49)\")}\n          </Box>\n        </Box>\n      </Paper>\n    </Container>\n  );\n};\n\nexport default MetricsDashboard;\n","import React, { useState, useEffect, useCallback, useMemo } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport {\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n  Alert,\n  Box,\n  Button,\n  Card,\n  CardContent,\n  Chip,\n  CircularProgress,\n  Container,\n  Grid,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Tooltip,\n  Typography,\n} from \"@mui/material\";\nimport {\n  ExpandMore,\n  CheckCircle,\n  Error as ErrorIcon,\n  Warning,\n  Info,\n  Refresh,\n  Storage,\n  Api,\n  Cloud,\n  Speed,\n} from \"@mui/icons-material\";\n\n// Import API functions\nimport {\n  healthCheck,\n  testApiConnection,\n  getNaaimData,\n  getFearGreedData,\n  getApiConfig,\n  getDiagnosticInfo,\n  getCurrentBaseURL,\n  api,\n} from \"../services/api\";\n\nfunction isObject(val) {\n  return val && typeof val === \"object\" && !Array.isArray(val);\n}\n\nfunction ServiceHealth() {\n  const [environmentInfo, setEnvironmentInfo] = useState({});\n  const [testResults, setTestResults] = useState({});\n  const [testingInProgress, setTestingInProgress] = useState(false);\n  const [componentError, setComponentError] = useState(null);\n  const [refreshing, setRefreshing] = useState(false);\n\n  // Memoize diagnosticInfo to prevent infinite re-renders\n  const diagnosticInfo = useMemo(() => {\n    try {\n      return getDiagnosticInfo();\n    } catch (error) {\n      console.error(\"Error getting diagnostic info:\", error);\n      return {};\n    }\n  }, []);\n\n  // Memoize other API config calls to prevent infinite re-renders\n  const _apiConfig = useMemo(() => {\n    try {\n      return getApiConfig();\n    } catch (error) {\n      console.error(\"Error getting API config:\", error);\n      return {};\n    }\n  }, []);\n  const _currentBaseURL = useMemo(() => {\n    try {\n      return getCurrentBaseURL();\n    } catch (error) {\n      console.error(\"Error getting current base URL:\", error);\n      return \"\";\n    }\n  }, []);\n\n  // Component error handler\n  useEffect(() => {\n    const handleError = (event) => {\n      console.error(\"ServiceHealth component error:\", event.error);\n      setComponentError(event.error.message);\n    };\n\n    window.addEventListener(\"error\", handleError);\n    return () => window.removeEventListener(\"error\", handleError);\n  }, []);\n\n  // ECS task monitoring - check status of scheduled tasks\n  // Always fetch from AWS production to get real task status\n  const {\n    data: ecsTasks,\n    isLoading: ecsLoading,\n    error: ecsError,\n    refetch: refetchEcs,\n  } = useQuery({\n    queryKey: [\"ecsTasks\"],\n    queryFn: async () => {\n      try {\n        // Always use AWS production URL for ECS tasks monitoring\n        const awsApiUrl = \"https://qda42av7je.execute-api.us-east-1.amazonaws.com/dev\";\n        const controller = new AbortController();\n        const timeoutId = setTimeout(() => controller.abort(), 5000); // 5 second timeout\n\n        const response = await fetch(`${awsApiUrl}/api/health/ecs-tasks`, {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          signal: controller.signal,\n        });\n        clearTimeout(timeoutId);\n\n        if (!response.ok) {\n          return {\n            error: true,\n            message: `HTTP ${response.status}: ${response.statusText}`,\n            timestamp: new Date().toISOString(),\n          };\n        }\n\n        const data = await response.json();\n        return data?.success ? data : data;\n      } catch (error) {\n        console.warn(\"ECS tasks check failed (non-critical):\", error?.message);\n        return {\n          error: true,\n          message: error?.message || \"ECS tasks endpoint unavailable\",\n          timestamp: new Date().toISOString(),\n          isOptional: true,\n        };\n      }\n    },\n    refetchInterval: 60000, // Refresh every minute\n    retry: 0, // Don't retry on external endpoint\n    staleTime: 30000,\n    enabled: true,\n    onError: (error) => {\n      console.error(\"React Query ECS tasks error:\", error);\n    },\n  });\n\n  // Cached database health check - uses the backend's cached health_status table\n  const {\n    data: dbHealth,\n    isLoading: dbLoading,\n    error: dbError,\n    refetch: refetchDb,\n  } = useQuery({\n    queryKey: [\"databaseHealth\"],\n    queryFn: async () => {\n      try {\n        if (import.meta.env && import.meta.env.DEV)\n          console.log(\"Starting cached database health check...\");\n\n        // Use the standard api instance but with better error handling\n        // Note: Must use /api/* paths to work with Vite proxy in development\n        const response = await api.get(\"/api/health/database\", {\n          timeout: 60000, // 60 second timeout (matches Lambda timeout)\n          validateStatus: (status) => status < 500, // Don't throw on 4xx errors\n        });\n\n        if (import.meta.env && import.meta.env.DEV)\n          console.log(\"Database health response:\", response?.data);\n\n        // Extract the actual data from the Axios response wrapper\n        // Axios wraps the server response in response.data\n        // responseFormatter returns: { success, data: { database, api, ... }, timestamp }\n        // We need to extract the inner 'data' property to get the actual health info\n        const rawResponse = response?.data;\n        const healthData = rawResponse?.data || rawResponse; // Try unwrapping, fall back to raw\n\n        if (import.meta.env && import.meta.env.DEV)\n          console.log(\"Response structure:\", {\n            hasData: !!healthData,\n            hasDatabase: !!healthData?.database,\n            hasTables: !!healthData?.database?.tables,\n            hasSummary: !!healthData?.database?.summary,\n            tableCount: healthData?.database?.tables\n              ? Object.keys(healthData.database.tables).length\n              : 0,\n          });\n\n        // Ensure we return a proper object structure\n        if (healthData && typeof healthData === \"object\") {\n          return healthData;\n        } else {\n          throw new Error(\n            \"Invalid response structure from database health endpoint\"\n          );\n        }\n      } catch (error) {\n        console.error(\"Database health check failed:\", error);\n        console.error(\"Error details:\", {\n          message: error.message,\n          response: error.response?.data,\n          status: error.response?.status,\n        });\n\n        // Return a structured error object instead of throwing\n        return {\n          error: true,\n          message: error.message || \"Unknown database health error\",\n          details:\n            error.response?.data ||\n            error.response?.status ||\n            \"No additional details\",\n          timestamp: new Date().toISOString(),\n          // Provide fallback data structure that matches the expected format\n          database: {\n            status: \"error\",\n            currentTime: new Date().toISOString(),\n            postgresVersion: \"unknown\",\n            tables: {},\n            summary: {\n              total_tables: 0,\n              healthy_tables: 0,\n              stale_tables: 0,\n              empty_tables: 0,\n              error_tables: 1,\n              missing_tables: 0,\n              total_records: 0,\n              total_missing_data: 0,\n            },\n          },\n        };\n      }\n    },\n    refetchInterval: false,\n    retry: 1,\n    staleTime: 30000,\n    enabled: true, // Auto-run on mount\n    // Add error handling to prevent React Query from throwing\n    onError: (error) => {\n      console.error(\"React Query database health error:\", error);\n    },\n  });\n\n  // Simplified endpoint tests - only test essential endpoints\n  const endpoints = useMemo(\n    () => [\n      { name: \"Health Check\", fn: () => healthCheck() },\n      { name: \"API Connection\", fn: () => testApiConnection() },\n      {\n        name: \"NAAIM Data\",\n        fn: () => getNaaimData({ limit: 5 }),\n      },\n      {\n        name: \"Fear & Greed\",\n        fn: () => getFearGreedData({ limit: 5 }),\n      },\n    ],\n    []\n  );\n\n  // Test all endpoints\n  const testAllEndpoints = useCallback(async () => {\n    // Skip API calls in test environment to prevent hanging\n    if (typeof process !== \"undefined\" && process.env.NODE_ENV === \"test\") {\n      setTestingInProgress(false);\n      return;\n    }\n\n    setTestingInProgress(true);\n    const results = {};\n\n    if (import.meta.env && import.meta.env.DEV)\n      console.log(\"Starting endpoint tests...\");\n\n    // Test each endpoint with timeout and error handling\n    for (const endpoint of endpoints) {\n      try {\n        const startTime = Date.now();\n        if (import.meta.env && import.meta.env.DEV)\n          console.log(`Testing ${endpoint.name}...`);\n\n        await Promise.race([\n          endpoint.fn(),\n          new Promise((_, reject) =>\n            setTimeout(() => reject(new Error(\"Timeout\")), 10000)\n          ),\n        ]);\n\n        const endTime = Date.now();\n        results[endpoint.name] = {\n          status: \"success\",\n          response: \"OK\",\n          responseTime: endTime - startTime,\n          critical: endpoint.critical,\n        };\n        if (import.meta.env && import.meta.env.DEV)\n          console.log(` ${endpoint.name} passed (${endTime - startTime}ms)`);\n      } catch (error) {\n        console.error(` ${endpoint.name} failed:`, error);\n        results[endpoint.name] = {\n          status: \"error\",\n          error: error.message || \"Unknown error\",\n          responseTime: 0,\n          critical: endpoint.critical,\n        };\n      }\n    }\n\n    setTestResults(results);\n    setTestingInProgress(false);\n    if (import.meta.env && import.meta.env.DEV)\n      console.log(\"Endpoint tests completed:\", results);\n  }, [endpoints]);\n\n  // Service health query\n  const {\n    data: healthData,\n    isLoading: healthLoading,\n    error: healthError,\n    refetch: refetchHealth,\n  } = useQuery({\n    queryKey: [\"serviceHealth\"],\n    queryFn: async () => {\n      if (import.meta.env && import.meta.env.DEV)\n        console.log(\"Fetching service health...\");\n      try {\n        const response = await api.get(\"/api/health\");\n        if (import.meta.env && import.meta.env.DEV)\n          console.log(\"Service health response:\", response?.data);\n        return response?.data;\n      } catch (error) {\n        console.error(\"Service health error:\", error);\n        throw error;\n      }\n    },\n    refetchInterval: false,\n    retry: 1,\n    staleTime: 30000,\n    enabled: true,\n  });\n\n  useEffect(() => {\n    // Run API tests automatically when component mounts\n    testAllEndpoints();\n  }, [testAllEndpoints]);\n\n  useEffect(() => {\n    const env = {\n      Frontend: {\n        API_URL: process.env.REACT_APP_API_URL || \"Not set\",\n        Environment: process.env.NODE_ENV || \"development\",\n        Build_Time: process.env.REACT_APP_BUILD_TIME || \"Unknown\",\n        Version: process.env.REACT_APP_VERSION || \"1.0.0\",\n      },\n      Browser: {\n        User_Agent: navigator.userAgent,\n        Language: navigator.language,\n        Platform: navigator.platform,\n        Online: navigator.onLine,\n        Cookies_Enabled: navigator.cookieEnabled,\n      },\n      Runtime: {\n        React_Version: React.version,\n        Timestamp: new Date().toISOString(),\n        Timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n      },\n    };\n\n    setEnvironmentInfo(env);\n  }, []);\n\n  // Safe data extraction\n  const safeHealthData = isObject(healthData) ? healthData : {};\n  const safeDbHealth = isObject(dbHealth) ? dbHealth : {};\n  const safeTestResults = isObject(testResults) ? testResults : {};\n  const safeEnvironmentInfo = isObject(environmentInfo) ? environmentInfo : {};\n  const safeDiagnosticInfo = isObject(diagnosticInfo) ? diagnosticInfo : {};\n\n  const getStatusIcon = (status) => {\n    switch (status) {\n      case \"success\":\n        return <CheckCircle color=\"success\" />;\n      case \"error\":\n        return <ErrorIcon color=\"error\" />;\n      case \"warning\":\n        return <Warning color=\"warning\" />;\n      default:\n        return <Refresh />;\n    }\n  };\n\n  const _handleRefresh = async () => {\n    setRefreshing(true);\n    try {\n      await Promise.all([refetchDb(), refetchHealth(), testAllEndpoints()]);\n    } catch (error) {\n      console.error(\"Failed to refresh service health:\", error);\n      // Don't throw - just log the error\n    } finally {\n      setRefreshing(false);\n    }\n  };\n\n  const _formatTimestamp = (timestamp) => {\n    if (!timestamp) return \"Unknown\";\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffMs = now - date;\n    const diffMinutes = Math.floor(diffMs / (1000 * 60));\n\n    if (diffMinutes < 1) {\n      return \"Just now\";\n    } else if (diffMinutes < 60) {\n      return `${diffMinutes} minute${diffMinutes > 1 ? \"s\" : \"\"} ago`;\n    }\n  };\n\n  // Early return if component has error\n  if (componentError) {\n    return (\n      <Container maxWidth=\"lg\" sx={{ py: 4 }}>\n        <Alert severity=\"error\">\n          <Typography variant=\"h6\">Service Health Error</Typography>\n          <Typography variant=\"body2\">{componentError}</Typography>\n          <Button onClick={() => window.location.reload()} sx={{ mt: 2 }}>\n            Reload Page\n          </Button>\n        </Alert>\n      </Container>\n    );\n  }\n\n  // Refresh health status background job\n  const refreshHealthStatus = async () => {\n    try {\n      setRefreshing(true);\n\n      // Just refetch the health data since there's no update-status endpoint\n      // The health endpoint already provides comprehensive status\n      await refetchDb();\n    } catch (error) {\n      console.error(\"Failed to refresh health status:\", error);\n      // Don't throw - just log the error\n    } finally {\n      setRefreshing(false);\n    }\n  };\n\n  // Safe data extraction (all safe variables already defined above)\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case \"success\":\n      case \"healthy\":\n      case \"connected\":\n        return \"success\";\n      case \"error\":\n      case \"failed\":\n      case \"disconnected\":\n        return \"error\";\n      case \"warning\":\n      case \"stale\":\n      case \"incomplete\":\n        return \"warning\";\n      case \"empty\":\n        return \"info\";\n      default:\n        return \"default\";\n    }\n  };\n\n  const formatNumber = (num) => {\n    if (num === null || num === undefined) return \"N/A\";\n    return new Intl.NumberFormat().format(num);\n  };\n\n  const formatDate = (dateString) => {\n    if (!dateString) return \"N/A\";\n    return new Date(dateString).toLocaleString();\n  };\n\n  const formatTimeAgo = (dateString) => {\n    if (!dateString) return \"N/A\";\n    const now = new Date();\n    const date = new Date(dateString);\n    const diffMs = now - date;\n    const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\n    const diffDays = Math.floor(diffHours / 24);\n\n    if (diffDays > 0) {\n      return `${diffDays} day${diffDays > 1 ? \"s\" : \"\"} ago`;\n    } else if (diffHours > 0) {\n      return `${diffHours} hour${diffHours > 1 ? \"s\" : \"\"} ago`;\n    } else {\n      const diffMinutes = Math.floor(diffMs / (1000 * 60));\n      return `${diffMinutes} minute${diffMinutes > 1 ? \"s\" : \"\"} ago`;\n    }\n  };\n\n  return (\n    <Container maxWidth=\"xl\" sx={{ py: 3 }}>\n      <Box sx={{ mb: 3 }}>\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom>\n          Service Health Dashboard\n        </Typography>\n        <Typography variant=\"subtitle1\" color=\"textSecondary\">\n          Monitor system status, API health, and data integrity\n        </Typography>\n      </Box>\n\n      {/* Overall Status */}\n      <Grid container spacing={3} sx={{ mb: 3 }}>\n        <Grid item xs={12} md={3}>\n          <Card>\n            <CardContent sx={{ textAlign: \"center\" }}>\n              {healthLoading ? (\n                <CircularProgress />\n              ) : healthError ? (\n                <>\n                  <ErrorIcon color=\"error\" sx={{ fontSize: 40, mb: 1 }} />\n                  <Typography variant=\"h6\" color=\"error\">\n                    Service Down\n                  </Typography>\n                </>\n              ) : (\n                <>\n                  <CheckCircle color=\"success\" sx={{ fontSize: 40, mb: 1 }} />\n                  <Typography variant=\"h6\" color=\"success.main\">\n                    Service Healthy\n                  </Typography>\n                </>\n              )}\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                startIcon={<Refresh />}\n                onClick={refetchHealth}\n                sx={{ mt: 1 }}\n                disabled={refreshing}\n              >\n                {refreshing ? \"Refreshing...\" : \"Refresh Health Status\"}\n              </Button>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} md={3}>\n          <Card>\n            <CardContent sx={{ textAlign: \"center\" }}>\n              <Api sx={{ fontSize: 40, mb: 1, color: \"primary.main\" }} />\n              <Typography variant=\"h6\">API Gateway</Typography>\n              <Typography variant=\"body2\" color=\"textSecondary\">\n                {safeDiagnosticInfo?.isConfigured\n                  ? \"Configured\"\n                  : \"Not Configured\"}\n              </Typography>\n              <Typography variant=\"caption\" display=\"block\" sx={{ mt: 1 }}>\n                {safeDiagnosticInfo?.urlsMatch ? \"URLs Match\" : \"URL Mismatch\"}\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} md={3}>\n          <Card>\n            <CardContent sx={{ textAlign: \"center\" }}>\n              <Storage sx={{ fontSize: 40, mb: 1, color: \"primary.main\" }} />\n              <Typography variant=\"h6\">Database</Typography>\n              <Typography variant=\"body2\" color=\"textSecondary\">\n                {dbLoading\n                  ? \"Checking...\"\n                  : dbError\n                    ? \"Error\"\n                    : safeDbHealth?.database?.status === \"connected\"\n                      ? \"Connected\"\n                      : safeDbHealth?.database?.status === \"disconnected\"\n                        ? \"Disconnected\"\n                        : safeDbHealth?.error\n                          ? \"Error\"\n                          : \"Unknown\"}\n              </Typography>\n              {dbError && (\n                <Alert severity=\"error\" sx={{ mt: 2 }}>\n                  <Typography variant=\"subtitle2\">\n                    Failed to load database health:\n                  </Typography>\n                  <Typography variant=\"body2\" sx={{ wordBreak: \"break-all\" }}>\n                    {typeof dbError === \"string\"\n                      ? dbError\n                      : dbError?.message || \"Unknown error\"}\n                  </Typography>\n                </Alert>\n              )}\n              {safeDbHealth?.error && (\n                <Alert severity=\"error\" sx={{ mt: 2 }}>\n                  <Typography variant=\"subtitle2\">Database Error:</Typography>\n                  <Typography variant=\"body2\" sx={{ wordBreak: \"break-all\" }}>\n                    {safeDbHealth.message || \"Unknown error\"}\n                  </Typography>\n                </Alert>\n              )}\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} md={3}>\n          <Card>\n            <CardContent sx={{ textAlign: \"center\" }}>\n              <Cloud sx={{ fontSize: 40, mb: 1, color: \"primary.main\" }} />\n              <Typography variant=\"h6\">Environment</Typography>\n              <Typography variant=\"body2\" color=\"textSecondary\">\n                {(() => {\n                  const env =\n                    (import.meta.env && import.meta.env.VITE_ENV) ||\n                    (import.meta.env && import.meta.env.MODE) ||\n                    \"\";\n                  if (env.toLowerCase().startsWith(\"prod\")) return \"Production\";\n                  if (env.toLowerCase().startsWith(\"stag\")) return \"Staging\";\n                  if (env.toLowerCase().startsWith(\"dev\")) return \"Development\";\n                  if (env) return env.charAt(0).toUpperCase() + env.slice(1);\n                  return \"Production\";\n                })()}\n              </Typography>\n              <Typography\n                variant=\"caption\"\n                display=\"block\"\n                sx={{ mt: 1 }}\n                title={(import.meta.env && import.meta.env.VITE_API_URL) || \"\"}\n              >\n                {import.meta.env && import.meta.env.VITE_API_URL\n                  ? `API: ${import.meta.env.VITE_API_URL}`\n                  : \"\"}\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      {/* Detailed Health Information */}\n      <Grid container spacing={3}>\n        {/* API Health */}\n        <Grid item xs={12}>\n          <Accordion defaultExpanded>\n            <AccordionSummary expandIcon={<ExpandMore />}>\n              <Typography variant=\"h6\">\n                <Api sx={{ mr: 1, verticalAlign: \"middle\" }} />\n                API Health\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails>\n              {safeHealthData && (\n                <Box>\n                  <Typography variant=\"subtitle2\" gutterBottom>\n                    Status: {safeHealthData.status}\n                  </Typography>\n                  <Typography\n                    variant=\"body2\"\n                    color=\"textSecondary\"\n                    gutterBottom\n                  >\n                    Last Updated:{\" \"}\n                    {new Date(safeHealthData.timestamp).toLocaleString()}\n                  </Typography>\n\n                  {safeHealthData.api && (\n                    <Box sx={{ mt: 2 }}>\n                      <Typography variant=\"subtitle2\">\n                        API Information:\n                      </Typography>\n                      <Typography variant=\"body2\">\n                        Version: {safeHealthData.api.version}\n                      </Typography>\n                      <Typography variant=\"body2\">\n                        Environment: {safeHealthData.api.environment}\n                      </Typography>\n                    </Box>\n                  )}\n                </Box>\n              )}\n\n              <Box sx={{ mt: 2 }}>\n                <Button\n                  variant=\"outlined\"\n                  size=\"small\"\n                  startIcon={<Speed />}\n                  onClick={testAllEndpoints}\n                  disabled={testingInProgress}\n                >\n                  {testingInProgress ? \"Testing...\" : \"Test All Endpoints\"}\n                </Button>\n              </Box>\n\n              {Object.keys(safeTestResults).length > 0 && (\n                <TableContainer component={Paper} sx={{ mt: 2 }}>\n                  <Table size=\"small\">\n                    <TableHead>\n                      <TableRow>\n                        <TableCell>Endpoint</TableCell>\n                        <TableCell>Status</TableCell>\n                        <TableCell>Response Time</TableCell>\n                        <TableCell>Error</TableCell>\n                      </TableRow>\n                    </TableHead>\n                    <TableBody>\n                      {Object.entries(safeTestResults).map(([name, result]) => (\n                        <TableRow key={name}>\n                          <TableCell>{name}</TableCell>\n                          <TableCell>\n                            <Chip\n                              icon={getStatusIcon(result?.status)}\n                              label={result?.status || \"Unknown\"}\n                              color={getStatusColor(result?.status)}\n                              size=\"small\"\n                            />\n                          </TableCell>\n                          <TableCell>\n                            {result.responseTime\n                              ? `${result.responseTime}ms`\n                              : \"-\"}\n                          </TableCell>\n                          <TableCell>{result.error || \"-\"}</TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                </TableContainer>\n              )}\n            </AccordionDetails>\n          </Accordion>\n        </Grid>\n\n        {/* ECS Scheduled Tasks Status */}\n        <Grid item xs={12}>\n          <Accordion defaultExpanded>\n            <AccordionSummary expandIcon={<ExpandMore />}>\n              <Typography variant=\"h6\">\n                <Cloud sx={{ mr: 1, verticalAlign: \"middle\" }} />\n                Scheduled Tasks Status\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails>\n              <Box sx={{ display: \"flex\", justifyContent: \"flex-end\", mb: 2 }}>\n                <Button\n                  variant=\"outlined\"\n                  size=\"small\"\n                  startIcon={<Refresh />}\n                  onClick={() => refetchEcs()}\n                >\n                  Refresh\n                </Button>\n              </Box>\n\n              {ecsLoading && (\n                <Box sx={{ display: \"flex\", justifyContent: \"center\", p: 2 }}>\n                  <CircularProgress size={24} />\n                  <Typography sx={{ ml: 2 }}>\n                    Loading scheduled tasks status...\n                  </Typography>\n                </Box>\n              )}\n\n              {ecsError && (\n                <Alert severity=\"error\" sx={{ mb: 2 }}>\n                  <Typography variant=\"subtitle2\">\n                    Failed to load ECS tasks status:\n                  </Typography>\n                  <Typography variant=\"body2\" sx={{ wordBreak: \"break-all\" }}>\n                    {typeof ecsError === \"string\"\n                      ? ecsError\n                      : ecsError?.message || \"Unknown error\"}\n                  </Typography>\n                </Alert>\n              )}\n\n              {!ecsLoading && !ecsError && ecsTasks && ecsTasks.tasks && (\n                <TableContainer component={Paper}>\n                  <Table size=\"small\">\n                    <TableHead>\n                      <TableRow>\n                        <TableCell>Task Name</TableCell>\n                        <TableCell>Status</TableCell>\n                        <TableCell>Last Run</TableCell>\n                        <TableCell>Freshness</TableCell>\n                        <TableCell>Details</TableCell>\n                      </TableRow>\n                    </TableHead>\n                    <TableBody>\n                      {Object.entries(ecsTasks.tasks).map(([taskName, taskData]) => (\n                        <TableRow key={taskName}>\n                          <TableCell>\n                            <Typography variant=\"body2\" fontWeight=\"bold\">\n                              {taskName}\n                            </Typography>\n                          </TableCell>\n                          <TableCell>\n                            <Chip\n                              icon={\n                                taskData.status === \"success\" ? (\n                                  <CheckCircle />\n                                ) : taskData.status === \"failure\" ? (\n                                  <ErrorIcon />\n                                ) : taskData.status === \"never_run\" ? (\n                                  <Info />\n                                ) : (\n                                  <Warning />\n                                )\n                              }\n                              label={taskData.status || \"unknown\"}\n                              color={\n                                taskData.status === \"success\"\n                                  ? \"success\"\n                                  : taskData.status === \"failure\"\n                                  ? \"error\"\n                                  : taskData.status === \"never_run\"\n                                  ? \"default\"\n                                  : \"warning\"\n                              }\n                              size=\"small\"\n                            />\n                          </TableCell>\n                          <TableCell>\n                            {taskData.last_run ? (\n                              <Tooltip title={new Date(taskData.last_run).toLocaleString()}>\n                                <Typography variant=\"body2\">\n                                  {taskData.hours_since_run !== undefined\n                                    ? `${taskData.hours_since_run}h ago`\n                                    : new Date(taskData.last_run).toLocaleDateString()}\n                                </Typography>\n                              </Tooltip>\n                            ) : (\n                              <Typography variant=\"body2\" color=\"text.secondary\">\n                                Never\n                              </Typography>\n                            )}\n                          </TableCell>\n                          <TableCell>\n                            {taskData.freshness && (\n                              <Chip\n                                label={taskData.freshness}\n                                color={\n                                  taskData.freshness === \"current\"\n                                    ? \"success\"\n                                    : taskData.freshness === \"warning\"\n                                    ? \"warning\"\n                                    : \"error\"\n                                }\n                                size=\"small\"\n                              />\n                            )}\n                          </TableCell>\n                          <TableCell>\n                            {taskData.error_message ? (\n                              <Tooltip title={taskData.error_message}>\n                                <Typography variant=\"body2\" color=\"error\" noWrap>\n                                  {taskData.error_message.substring(0, 50)}...\n                                </Typography>\n                              </Tooltip>\n                            ) : taskData.message ? (\n                              <Typography variant=\"body2\" color=\"text.secondary\">\n                                {taskData.message}\n                              </Typography>\n                            ) : taskData.exit_code !== null && taskData.exit_code !== undefined ? (\n                              <Typography variant=\"body2\">\n                                Exit code: {taskData.exit_code}\n                              </Typography>\n                            ) : (\n                              \"-\"\n                            )}\n                          </TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                </TableContainer>\n              )}\n\n              {!ecsLoading && !ecsError && (!ecsTasks || !ecsTasks.tasks || Object.keys(ecsTasks.tasks).length === 0) && (\n                <Alert severity=\"info\">\n                  <Typography variant=\"subtitle2\">No scheduled tasks configured</Typography>\n                  <Typography variant=\"body2\">\n                    Configure scheduled tasks in GitHub Actions workflows or AWS EventBridge.\n                  </Typography>\n                </Alert>\n              )}\n            </AccordionDetails>\n          </Accordion>\n        </Grid>\n\n        {/* Database Health */}\n        <Grid item xs={12}>\n          <Accordion defaultExpanded>\n            <AccordionSummary expandIcon={<ExpandMore />}>\n              <Typography variant=\"h6\">\n                <Storage sx={{ mr: 1, verticalAlign: \"middle\" }} />\n                Database Health\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails>\n              <Box sx={{ display: \"flex\", justifyContent: \"flex-end\", mb: 2 }}>\n                <Button\n                  variant=\"outlined\"\n                  size=\"small\"\n                  startIcon={<Refresh />}\n                  onClick={refreshHealthStatus}\n                  disabled={refreshing}\n                >\n                  {refreshing ? \"Updating...\" : \"Update All Tables\"}\n                </Button>\n              </Box>\n\n              {dbLoading && (\n                <Box sx={{ display: \"flex\", justifyContent: \"center\", p: 2 }}>\n                  <CircularProgress size={24} />\n                  <Typography sx={{ ml: 2 }}>\n                    Loading database health...\n                  </Typography>\n                </Box>\n              )}\n\n              {dbError && (\n                <Alert severity=\"error\" sx={{ mb: 2 }}>\n                  <Typography variant=\"subtitle2\">\n                    Failed to load database health:\n                  </Typography>\n                  <Typography variant=\"body2\" sx={{ wordBreak: \"break-all\" }}>\n                    {typeof dbError === \"string\"\n                      ? dbError\n                      : dbError?.message || \"Unknown error\"}\n                  </Typography>\n                </Alert>\n              )}\n\n              {safeDbHealth && (\n                <Box>\n                  <Box sx={{ mb: 2 }}>\n                    <Typography variant=\"subtitle2\" gutterBottom>\n                      Database Status:\n                    </Typography>\n                    <Typography variant=\"body2\">\n                      Status: {safeDbHealth.database?.status || \"Unknown\"}\n                    </Typography>\n                    {safeDbHealth.database?.currentTime && (\n                      <Typography variant=\"body2\">\n                        Current Time:{\" \"}\n                        {new Date(\n                          safeDbHealth.database.currentTime\n                        ).toLocaleString()}\n                      </Typography>\n                    )}\n                    {safeDbHealth.database?.postgresVersion && (\n                      <Typography variant=\"body2\">\n                        PostgreSQL Version:{\" \"}\n                        {safeDbHealth.database.postgresVersion}\n                      </Typography>\n                    )}\n                  </Box>\n\n                  {/* Backend error/message display */}\n                  {safeDbHealth.error ||\n                  safeDbHealth.message ||\n                  safeDbHealth.details ? (\n                    <Alert severity=\"error\" sx={{ mb: 2 }}>\n                      <Typography variant=\"subtitle2\">\n                        Backend Error:\n                      </Typography>\n                      {safeDbHealth.error && (\n                        <Typography\n                          variant=\"body2\"\n                          sx={{ wordBreak: \"break-all\" }}\n                        >\n                          <b>Error:</b> {safeDbHealth.error}\n                        </Typography>\n                      )}\n                      {safeDbHealth.message && (\n                        <Typography\n                          variant=\"body2\"\n                          sx={{ wordBreak: \"break-all\" }}\n                        >\n                          <b>Message:</b> {safeDbHealth.message}\n                        </Typography>\n                      )}\n                      {safeDbHealth.details && (\n                        <Typography\n                          variant=\"body2\"\n                          sx={{ wordBreak: \"break-all\" }}\n                        >\n                          <b>Details:</b> {safeDbHealth.details}\n                        </Typography>\n                      )}\n                    </Alert>\n                  ) : null}\n\n                  {/* Summary Statistics */}\n                  {safeDbHealth.database?.summary && (\n                    <Box sx={{ mb: 2 }}>\n                      <Typography variant=\"subtitle2\" gutterBottom>\n                        Summary:\n                      </Typography>\n                      <Grid container spacing={1}>\n                        <Grid item xs={6} sm={3}>\n                          <Typography variant=\"body2\" color=\"text.secondary\">\n                            Total Tables:{\" \"}\n                            {safeDbHealth.database.summary.total_tables}\n                          </Typography>\n                        </Grid>\n                        <Grid item xs={6} sm={3}>\n                          <Typography variant=\"body2\" color=\"success.main\">\n                            Healthy:{\" \"}\n                            {safeDbHealth.database.summary.healthy_tables}\n                          </Typography>\n                        </Grid>\n                        <Grid item xs={6} sm={3}>\n                          <Typography variant=\"body2\" color=\"text.secondary\">\n                            Stale: {safeDbHealth.database.summary.stale_tables}\n                          </Typography>\n                        </Grid>\n                        <Grid item xs={6} sm={3}>\n                          <Typography variant=\"body2\" color=\"error.main\">\n                            Errors: {safeDbHealth.database.summary.error_tables}\n                          </Typography>\n                        </Grid>\n                        <Grid item xs={6} sm={3}>\n                          <Typography variant=\"body2\" color=\"info.dark\">\n                            Empty: {safeDbHealth.database.summary.empty_tables}\n                          </Typography>\n                        </Grid>\n                        <Grid item xs={6} sm={3}>\n                          <Typography variant=\"body2\" color=\"text.secondary\">\n                            Missing:{\" \"}\n                            {safeDbHealth.database.summary.missing_tables}\n                          </Typography>\n                        </Grid>\n                        <Grid item xs={6} sm={3}>\n                          <Typography variant=\"body2\" color=\"text.secondary\">\n                            Total Records:{\" \"}\n                            {formatNumber(\n                              safeDbHealth.database.summary.total_records\n                            )}\n                          </Typography>\n                        </Grid>\n                        <Grid item xs={6} sm={3}>\n                          <Typography variant=\"body2\" color=\"text.secondary\">\n                            Missing Data:{\" \"}\n                            {formatNumber(\n                              safeDbHealth.database.summary.total_missing_data\n                            )}\n                          </Typography>\n                        </Grid>\n                      </Grid>\n                    </Box>\n                  )}\n\n                  {/* Detailed Table List */}\n                  {safeDbHealth.database?.tables &&\n                    Object.keys(safeDbHealth.database.tables).length > 0 && (\n                      <Box sx={{ mt: 2 }}>\n                        <Typography variant=\"subtitle2\" gutterBottom>\n                          Table Details (\n                          {Object.keys(safeDbHealth.database.tables).length}{\" \"}\n                          tables monitored):\n                        </Typography>\n                        <TableContainer\n                          component={Paper}\n                          sx={{ maxHeight: 600 }}\n                        >\n                          <Table size=\"small\" stickyHeader>\n                            <TableHead>\n                              <TableRow>\n                                <TableCell>Table</TableCell>\n                                <TableCell align=\"right\">Records</TableCell>\n                                <TableCell>Status</TableCell>\n                                <TableCell>Last Updated</TableCell>\n                                <TableCell>Missing Data</TableCell>\n                                <TableCell>Last Checked</TableCell>\n                                <TableCell>Error</TableCell>\n                              </TableRow>\n                            </TableHead>\n                            <TableBody>\n                              {Object.entries(safeDbHealth.database.tables)\n                                .sort(([a], [b]) => a.localeCompare(b))\n                                .map(([tableName, tableData]) => (\n                                  <TableRow\n                                    key={tableName}\n                                    sx={{\n                                      \"&:hover\": {\n                                        backgroundColor: \"rgba(0, 0, 0, 0.04)\",\n                                      },\n                                    }}\n                                  >\n                                    <TableCell component=\"th\" scope=\"row\">\n                                      <Typography\n                                        variant=\"body2\"\n                                        fontFamily=\"monospace\"\n                                        fontWeight={600}\n                                      >\n                                        {tableName}\n                                      </Typography>\n                                    </TableCell>\n                                    <TableCell align=\"right\">\n                                      <Typography\n                                        variant=\"body2\"\n                                        fontWeight={600}\n                                      >\n                                        {formatNumber(tableData.record_count)}\n                                      </Typography>\n                                    </TableCell>\n                                    <TableCell>\n                                      <Box\n                                        sx={{\n                                          display: \"flex\",\n                                          gap: 0.5,\n                                          alignItems: \"center\",\n                                        }}\n                                      >\n                                        <Chip\n                                          icon={getStatusIcon(tableData.status)}\n                                          label={tableData.status}\n                                          color={getStatusColor(\n                                            tableData.status\n                                          )}\n                                          size=\"small\"\n                                          sx={{ minWidth: 80 }}\n                                        />\n                                        {tableData.is_stale && (\n                                          <Chip\n                                            label=\"Stale\"\n                                            color=\"warning\"\n                                            size=\"small\"\n                                          />\n                                        )}\n                                      </Box>\n                                    </TableCell>\n                                    <TableCell>\n                                      <Box>\n                                        <Typography variant=\"body2\">\n                                          {formatDate(tableData.last_updated)}\n                                        </Typography>\n                                        <Typography\n                                          variant=\"caption\"\n                                          color=\"text.secondary\"\n                                        >\n                                          {formatTimeAgo(\n                                            tableData.last_updated\n                                          )}\n                                        </Typography>\n                                      </Box>\n                                    </TableCell>\n                                    <TableCell align=\"right\">\n                                      {tableData.missing_data_count > 0 ? (\n                                        <Typography\n                                          variant=\"body2\"\n                                          color=\"text.secondary\"\n                                          fontWeight={600}\n                                        >\n                                          {formatNumber(\n                                            tableData.missing_data_count\n                                          )}\n                                        </Typography>\n                                      ) : (\n                                        <Typography\n                                          variant=\"body2\"\n                                          color=\"success.main\"\n                                        >\n                                          0\n                                        </Typography>\n                                      )}\n                                    </TableCell>\n                                    <TableCell>\n                                      <Typography variant=\"body2\">\n                                        {formatDate(tableData.last_checked)}\n                                      </Typography>\n                                    </TableCell>\n                                    <TableCell>\n                                      {tableData.error && (\n                                        <Tooltip title={tableData.error}>\n                                          <Typography\n                                            variant=\"body2\"\n                                            color=\"error\"\n                                            sx={{\n                                              maxWidth: 200,\n                                              overflow: \"hidden\",\n                                              textOverflow: \"ellipsis\",\n                                              cursor: \"help\",\n                                            }}\n                                          >\n                                            {tableData.error.length > 30\n                                              ? `${tableData.error.substring(0, 30)}...`\n                                              : tableData.error}\n                                          </Typography>\n                                        </Tooltip>\n                                      )}\n                                    </TableCell>\n                                  </TableRow>\n                                ))}\n                            </TableBody>\n                          </Table>\n                        </TableContainer>\n                      </Box>\n                    )}\n\n                  {/* Show if no tables found */}\n                  {(!safeDbHealth.database?.tables ||\n                    Object.keys(safeDbHealth.database.tables).length === 0) && (\n                    <Alert severity=\"warning\" sx={{ mt: 2 }}>\n                      <Typography variant=\"subtitle2\">\n                        No table data found\n                      </Typography>\n                      <Typography variant=\"body2\">\n                        The database health check did not return any table\n                        information. This could mean the health_status table is\n                        empty or the backend is not properly configured.\n                      </Typography>\n                    </Alert>\n                  )}\n\n                  {safeDbHealth.database?.note && (\n                    <Alert severity=\"info\" sx={{ mt: 2 }}>\n                      {safeDbHealth.database.note}\n                    </Alert>\n                  )}\n                </Box>\n              )}\n            </AccordionDetails>\n          </Accordion>\n        </Grid>\n\n      </Grid>\n    </Container>\n  );\n}\n\nexport default ServiceHealth;\n","/**\n * AWS Amplify Auth Mock\n */\n\nexport const signIn = async () => {\n  throw new Error('AWS Amplify Auth is not configured');\n};\n\nexport const signOut = async () => {\n  throw new Error('AWS Amplify Auth is not configured');\n};\n\nexport const signUp = async () => {\n  throw new Error('AWS Amplify Auth is not configured');\n};\n\nexport const confirmSignUp = async () => {\n  throw new Error('AWS Amplify Auth is not configured');\n};\n\nexport const getCurrentUser = async () => {\n  throw new Error('AWS Amplify Auth is not configured');\n};\n\nexport const fetchAuthSession = async () => {\n  throw new Error('AWS Amplify Auth is not configured');\n};\n\nexport const fetchUserAttributes = async () => {\n  throw new Error('AWS Amplify Auth is not configured');\n};\n\nexport const updateUserAttributes = async () => {\n  throw new Error('AWS Amplify Auth is not configured');\n};\n\nexport const resetPassword = async () => {\n  throw new Error('AWS Amplify Auth is not configured');\n};\n\nexport const confirmResetPassword = async () => {\n  throw new Error('AWS Amplify Auth is not configured');\n};\n\nexport const resendSignUpCode = async () => {\n  throw new Error('AWS Amplify Auth is not configured');\n};\n\nexport const autoSignIn = async () => {\n  throw new Error('AWS Amplify Auth is not configured');\n};\n\nexport const deleteUser = async () => {\n  throw new Error('AWS Amplify Auth is not configured');\n};\n\nexport const updatePassword = async () => {\n  throw new Error('AWS Amplify Auth is not configured');\n};\n\nexport default {\n  signIn,\n  signOut,\n  signUp,\n  confirmSignUp,\n  getCurrentUser,\n  fetchAuthSession,\n  fetchUserAttributes,\n  updateUserAttributes,\n  resetPassword,\n  confirmResetPassword,\n  resendSignUpCode,\n  autoSignIn,\n  deleteUser,\n  updatePassword,\n};\n","/**\n * AWS Amplify Mock - Root export\n */\n\n// Mock Amplify object\nexport const Amplify = {\n  configure: () => {},\n  getConfig: () => ({}),\n};\n\n// Re-export auth functions\nexport * from './auth/index.js';\n\nexport default {\n  Amplify,\n};\n","import { Amplify } from \"aws-amplify\";\n\n// Get runtime configuration values\nconst getRuntimeConfig = () => {\n  return typeof window !== \"undefined\" && window.__CONFIG__\n    ? window.__CONFIG__\n    : {};\n};\n\n// Check if Cognito is configured\nconst isCognitoConfigured = () => {\n  const runtimeConfig = getRuntimeConfig();\n  const userPoolId =\n    runtimeConfig.USER_POOL_ID || import.meta.env.VITE_COGNITO_USER_POOL_ID;\n  const clientId =\n    runtimeConfig.USER_POOL_CLIENT_ID || import.meta.env.VITE_COGNITO_CLIENT_ID;\n\n  // Check if we have real values (not dummy values)\n  return !!(\n    userPoolId &&\n    clientId &&\n    userPoolId !== \"\" &&\n    clientId !== \"\" &&\n    userPoolId !== \"us-east-1_DUMMY\" &&\n    clientId !== \"dummy-client-id\"\n  );\n};\n\n// Amplify configuration with runtime config support\nconst getAmplifyConfig = () => {\n  const runtimeConfig = getRuntimeConfig();\n\n  return {\n    Auth: {\n      Cognito: {\n        userPoolId:\n          runtimeConfig.USER_POOL_ID ||\n          import.meta.env.VITE_COGNITO_USER_POOL_ID ||\n          \"us-east-1_DUMMY\",\n        userPoolClientId:\n          runtimeConfig.USER_POOL_CLIENT_ID ||\n          import.meta.env.VITE_COGNITO_CLIENT_ID ||\n          \"dummy-client-id\",\n        region: import.meta.env.VITE_AWS_REGION || \"us-east-1\",\n        signUpVerificationMethod: \"code\",\n        loginWith: {\n          oauth: {\n            domain:\n              runtimeConfig.USER_POOL_DOMAIN ||\n              import.meta.env.VITE_COGNITO_DOMAIN ||\n              \"dummy-domain\",\n            scopes: [\"email\", \"profile\", \"openid\"],\n            redirectSignIn:\n              import.meta.env.VITE_COGNITO_REDIRECT_SIGN_IN ||\n              (typeof window !== \"undefined\" ? window.location.origin : \"\"),\n            redirectSignOut:\n              import.meta.env.VITE_COGNITO_REDIRECT_SIGN_OUT ||\n              (typeof window !== \"undefined\" ? window.location.origin : \"\"),\n            responseType: \"code\",\n          },\n          username: true,\n          email: true,\n        },\n      },\n    },\n  };\n};\n\n// Configure Amplify\nexport function configureAmplify() {\n  try {\n    const config = getAmplifyConfig();\n    const runtimeConfig = getRuntimeConfig();\n\n    console.log(\" [AMPLIFY CONFIG] Configuration details:\", {\n      userPoolId: config.Auth.Cognito.userPoolId,\n      clientId: config.Auth.Cognito.userPoolClientId,\n      domain: config.Auth.Cognito.loginWith.oauth.domain,\n      runtimeConfigAvailable: !!Object.keys(runtimeConfig).length,\n      isCognitoConfigured: isCognitoConfigured(),\n    });\n\n    if (!isCognitoConfigured()) {\n      console.warn(\n        \"  Cognito not configured - using dummy values for development\"\n      );\n      console.log(\"Environment variables needed:\");\n      console.log(\"- VITE_COGNITO_USER_POOL_ID\");\n      console.log(\"- VITE_COGNITO_CLIENT_ID\");\n      console.log(\"- VITE_COGNITO_DOMAIN\");\n      console.log(\"Or set runtime config in window.__CONFIG__\");\n    }\n\n    Amplify.configure(config);\n    console.log(\" Amplify configured successfully\");\n  } catch (error) {\n    console.error(\" Failed to configure Amplify:\", error);\n  }\n}\n\nexport { isCognitoConfigured, getAmplifyConfig };\nexport default getAmplifyConfig;\n","// Development authentication service\n// Simulates AWS Cognito functionality for development environment\n\nconst DEV_USERS_KEY = \"dev_users\";\nconst DEV_SESSION_KEY = \"dev_session\";\nconst DEV_PENDING_KEY = \"dev_pending\";\n\nclass DevAuthService {\n  constructor() {\n    this.users = this.loadUsers();\n    this.session = this.loadSession();\n    this.pendingVerifications = this.loadPendingVerifications();\n\n    // Create default dev user if none exist\n    this.ensureDevUser();\n  }\n\n  loadUsers() {\n    if (typeof localStorage === \"undefined\") {\n      return {}; // Return empty object in test environment\n    }\n    const stored = localStorage.getItem(DEV_USERS_KEY);\n    return stored ? JSON.parse(stored) : {};\n  }\n\n  saveUsers() {\n    if (typeof localStorage !== \"undefined\") {\n      localStorage.setItem(DEV_USERS_KEY, JSON.stringify(this.users));\n    }\n  }\n\n  loadSession() {\n    if (typeof localStorage === \"undefined\") {\n      return null; // Return null in test environment\n    }\n    const stored = localStorage.getItem(DEV_SESSION_KEY);\n    return stored ? JSON.parse(stored) : null;\n  }\n\n  saveSession(session) {\n    this.session = session;\n    if (typeof localStorage !== \"undefined\") {\n      localStorage.setItem(DEV_SESSION_KEY, JSON.stringify(session));\n    }\n  }\n\n  clearSession() {\n    this.session = null;\n    if (typeof localStorage !== \"undefined\") {\n      localStorage.removeItem(DEV_SESSION_KEY);\n    }\n  }\n\n  loadPendingVerifications() {\n    if (typeof localStorage === \"undefined\") {\n      return {}; // Return empty object in test environment\n    }\n    const stored = localStorage.getItem(DEV_PENDING_KEY);\n    return stored ? JSON.parse(stored) : {};\n  }\n\n  savePendingVerifications() {\n    if (typeof localStorage !== \"undefined\") {\n      localStorage.setItem(\n        DEV_PENDING_KEY,\n        JSON.stringify(this.pendingVerifications)\n      );\n    }\n  }\n\n  ensureDevUser() {\n    // Always ensure the default user exists with consistent credentials\n    const defaultUser = {\n      username: \"devuser\",\n      email: \"argeropolos@gmail.com\",\n      firstName: \"Dev\",\n      lastName: \"User\",\n      password: \"password123\",\n      confirmed: true,\n      createdAt: Date.now(),\n    };\n\n    // Always set/update the default user to ensure consistency\n    this.users[\"devuser\"] = defaultUser;\n    this.users[\"argeropolos@gmail.com\"] = defaultUser; // Allow email login too\n    this.saveUsers();\n\n    if (typeof console !== \"undefined\") {\n      console.log(\" DEV: Ensured default dev user exists\");\n      console.log(\" Email: argeropolos@gmail.com\");\n      console.log(\" Username: devuser\");\n      console.log(\" Password: password123\");\n      console.log(\" User can sign in with either email or username\");\n    }\n  }\n\n  generateVerificationCode() {\n    return Math.floor(100000 + Math.random() * 900000).toString();\n  }\n\n  generateDevTokens(_username) {\n    // Use the token that the backend auth middleware recognizes for dev bypass\n    return {\n      accessToken: \"dev-bypass-token\",\n      idToken: \"dev-bypass-token\",\n      refreshToken: \"dev-bypass-token\",\n    };\n  }\n\n  async signUp(username, password, email, firstName, lastName) {\n    // DEV: Simulating sign up\n\n    // Check if user already exists in confirmed users\n    if (this.users[username]) {\n      throw new Error(\"UsernameExistsException: Username already exists\");\n    }\n\n    // Check if user already exists in pending verifications\n    if (this.pendingVerifications[username]) {\n      throw new Error(\"UsernameExistsException: Username already exists\");\n    }\n\n    // Check if email is already used in confirmed users\n    const existingUser = Object.values(this.users).find(\n      (user) => user.email === email\n    );\n    if (existingUser) {\n      throw new Error(\"UsernameExistsException: Email already exists\");\n    }\n\n    // Check if email is already used in pending verifications\n    const existingPending = Object.values(this.pendingVerifications).find(\n      (pending) => pending.email === email\n    );\n    if (existingPending) {\n      throw new Error(\"UsernameExistsException: Email already exists\");\n    }\n\n    // Generate verification code\n    const verificationCode = this.generateVerificationCode();\n\n    // Store pending verification\n    this.pendingVerifications[username] = {\n      username,\n      password,\n      email,\n      firstName,\n      lastName,\n      verificationCode,\n      createdAt: Date.now(),\n    };\n    this.savePendingVerifications();\n\n    // Simulate email being sent\n    if (typeof console !== \"undefined\") {\n      console.log(\" DEV: Email verification code sent to\", email);\n      console.log(\" DEV: Verification code:\", verificationCode);\n      console.log(\n        \" DEV AUTH: Verification code for\",\n        email,\n        \":\",\n        verificationCode\n      );\n      console.log(\" DEV AUTH: Copy this code to complete registration\");\n    }\n\n    // Store dev code for debugging (non-production only)\n    if (typeof window !== \"undefined\" && window.DEV_AUTH_DEBUG !== false) {\n      window.lastDevCode = verificationCode;\n      if (typeof console !== \"undefined\") {\n        console.log(\" DEV AUTH: Access code via window.lastDevCode\");\n      }\n    }\n\n    // Show verification code in browser alert for easy access in development\n    // Skip alert in test environment to prevent JSDOM errors\n    if (\n      typeof window !== \"undefined\" &&\n      window.location &&\n      (window.location.hostname === \"localhost\" ||\n        window.location.hostname === \"127.0.0.1\") &&\n      typeof window.alert === \"function\" &&\n      process.env.NODE_ENV !== \"test\"\n    ) {\n      setTimeout(() => {\n        alert(\n          ` DEV AUTH VERIFICATION CODE\\n\\nFor: ${email}\\nCode: ${verificationCode}\\n\\nCopy this code to complete your registration.`\n        );\n      }, 100);\n    }\n\n    return {\n      isSignUpComplete: false,\n      nextStep: {\n        signUpStep: \"CONFIRM_SIGN_UP\",\n        codeDeliveryDetails: {\n          deliveryMedium: \"EMAIL\",\n          destination: email,\n        },\n      },\n    };\n  }\n\n  async confirmSignUp(username, confirmationCode) {\n    if (typeof console !== \"undefined\") {\n      console.log(\" DEV: Confirming sign up for\", username);\n    }\n\n    const pending = this.pendingVerifications[username];\n    if (!pending) {\n      throw new Error(\"UserNotFoundException: User not found\");\n    }\n\n    if (pending.verificationCode !== confirmationCode) {\n      throw new Error(\"CodeMismatchException: Invalid verification code\");\n    }\n\n    // Check if code is expired (5 minutes)\n    if (Date.now() - pending.createdAt > 5 * 60 * 1000) {\n      throw new Error(\"ExpiredCodeException: Verification code has expired\");\n    }\n\n    // Create user account\n    this.users[username] = {\n      username,\n      email: pending.email,\n      firstName: pending.firstName,\n      lastName: pending.lastName,\n      password: pending.password, // In real app, this would be hashed\n      confirmed: true,\n      createdAt: Date.now(),\n    };\n    this.saveUsers();\n\n    // Remove from pending\n    delete this.pendingVerifications[username];\n    this.savePendingVerifications();\n\n    if (typeof console !== \"undefined\") {\n      console.log(\" DEV: User confirmed successfully\");\n    }\n\n    return {\n      isSignUpComplete: true,\n    };\n  }\n\n  async signIn(usernameOrEmail, password) {\n    if (typeof console !== \"undefined\") {\n      console.log(\" DEV: Signing in user\", usernameOrEmail);\n    }\n\n    // Try to find user by username first\n    let user = this.users[usernameOrEmail];\n    let actualUsername = usernameOrEmail;\n\n    // If not found by username, try to find by email\n    if (!user) {\n      const userEntry = Object.entries(this.users).find(\n        ([, userData]) => userData.email === usernameOrEmail\n      );\n      if (userEntry) {\n        actualUsername = userEntry[0];\n        user = userEntry[1];\n        if (typeof console !== \"undefined\") {\n          console.log(\n            \" DEV: Found user by email, username is\",\n            actualUsername\n          );\n        }\n      }\n    }\n\n    if (!user) {\n      // Check if user exists in pending verifications\n      const pendingUser = this.pendingVerifications[usernameOrEmail];\n      if (pendingUser) {\n        throw new Error(\"UserNotConfirmedException: User not confirmed\");\n      }\n\n      // Check if user exists by email in pending verifications\n      const pendingByEmail = Object.values(this.pendingVerifications).find(\n        (pending) => pending.email === usernameOrEmail\n      );\n      if (pendingByEmail) {\n        throw new Error(\"UserNotConfirmedException: User not confirmed\");\n      }\n\n      throw new Error(\"UserNotFoundException: User not found\");\n    }\n\n    if (!user.confirmed) {\n      throw new Error(\"UserNotConfirmedException: User not confirmed\");\n    }\n\n    if (user.password !== password) {\n      throw new Error(\"NotAuthorizedException: Invalid password\");\n    }\n\n    // Generate session\n    const tokens = this.generateDevTokens(actualUsername);\n    const session = {\n      user: {\n        username: user.username,\n        userId: `dev-${user.username}`,\n        email: user.email,\n        firstName: user.firstName,\n        lastName: user.lastName,\n      },\n      tokens,\n      expiresAt: Date.now() + 3600000, // 1 hour\n    };\n\n    this.saveSession(session);\n    if (typeof console !== \"undefined\") {\n      console.log(\" DEV: User signed in successfully\");\n    }\n\n    return {\n      isSignedIn: true,\n      user: session.user,\n      tokens: session.tokens,\n    };\n  }\n\n  async signOut() {\n    if (typeof console !== \"undefined\") {\n      console.log(\" DEV: Signing out user\");\n    }\n    this.clearSession();\n    return true;\n  }\n\n  async getCurrentUser() {\n    // Check for E2E test override first\n    if (typeof window !== 'undefined' && window.__DEV_AUTH_OVERRIDE__) {\n      return window.__DEV_AUTH_OVERRIDE__.user;\n    }\n\n    if (!this.session || Date.now() > this.session.expiresAt) {\n      throw new Error(\"No authenticated user\");\n    }\n    return this.session.user;\n  }\n\n  async fetchAuthSession() {\n    // Check for E2E test override first\n    if (typeof window !== 'undefined' && window.__DEV_AUTH_OVERRIDE__) {\n      return {\n        tokens: window.__DEV_AUTH_OVERRIDE__.tokens,\n      };\n    }\n\n    if (!this.session || Date.now() > this.session.expiresAt) {\n      throw new Error(\"No valid session\");\n    }\n    return {\n      tokens: this.session.tokens,\n    };\n  }\n\n  async resetPassword(username) {\n    if (typeof console !== \"undefined\") {\n      console.log(\" DEV: Initiating password reset for\", username);\n    }\n\n    const user = this.users[username];\n    if (!user) {\n      throw new Error(\"UserNotFoundException: User not found\");\n    }\n\n    const resetCode = this.generateVerificationCode();\n\n    // Store reset code\n    this.pendingVerifications[`reset_${username}`] = {\n      username,\n      resetCode,\n      createdAt: Date.now(),\n    };\n    this.savePendingVerifications();\n\n    if (typeof console !== \"undefined\") {\n      console.log(\" DEV: Password reset code sent to\", user.email);\n      console.log(\" DEV: Reset code:\", resetCode);\n      console.log(\n        \" DEV AUTH: Password reset code for\",\n        user.email,\n        \":\",\n        resetCode\n      );\n      console.log(\" DEV AUTH: Copy this code to reset your password\");\n    }\n\n    // Store dev code for debugging (non-production only)\n    if (typeof window !== \"undefined\" && window.DEV_AUTH_DEBUG !== false) {\n      window.lastDevResetCode = resetCode;\n      if (typeof console !== \"undefined\") {\n        console.log(\" DEV AUTH: Access code via window.lastDevResetCode\");\n      }\n    }\n\n    // Show reset code in browser alert for easy access in development\n    // Skip alert in test environment to prevent JSDOM errors\n    if (\n      typeof window !== \"undefined\" &&\n      window.location &&\n      (window.location.hostname === \"localhost\" ||\n        window.location.hostname === \"127.0.0.1\") &&\n      typeof window.alert === \"function\" &&\n      process.env.NODE_ENV !== \"test\"\n    ) {\n      setTimeout(() => {\n        alert(\n          ` DEV AUTH PASSWORD RESET CODE\\n\\nFor: ${user.email}\\nReset Code: ${resetCode}\\n\\nCopy this code to reset your password.`\n        );\n      }, 100);\n    }\n\n    return {\n      nextStep: {\n        resetPasswordStep: \"CONFIRM_RESET_PASSWORD_WITH_CODE\",\n        codeDeliveryDetails: {\n          deliveryMedium: \"EMAIL\",\n          destination: user.email,\n        },\n      },\n    };\n  }\n\n  async confirmResetPassword(username, confirmationCode, newPassword) {\n    if (typeof console !== \"undefined\") {\n      console.log(\" DEV: Confirming password reset for\", username);\n    }\n\n    const resetKey = `reset_${username}`;\n    const pending = this.pendingVerifications[resetKey];\n\n    if (!pending) {\n      throw new Error(\"Invalid reset request\");\n    }\n\n    if (pending.resetCode !== confirmationCode) {\n      throw new Error(\"CodeMismatchException: Invalid verification code\");\n    }\n\n    // Check if code is expired (5 minutes)\n    if (Date.now() - pending.createdAt > 5 * 60 * 1000) {\n      throw new Error(\"ExpiredCodeException: Verification code has expired\");\n    }\n\n    // Update password\n    this.users[username].password = newPassword;\n    this.saveUsers();\n\n    // Remove from pending\n    delete this.pendingVerifications[resetKey];\n    this.savePendingVerifications();\n\n    if (typeof console !== \"undefined\") {\n      console.log(\" DEV: Password reset successfully\");\n    }\n\n    return true;\n  }\n\n  // Helper method to check if user is logged in\n  isAuthenticated() {\n    return !!(this.session && Date.now() < this.session.expiresAt);\n  }\n\n  // Helper method to get current user info\n  getCurrentUserInfo() {\n    if (this.isAuthenticated()) {\n      return this.session.user;\n    }\n    return null;\n  }\n\n  // Wrapper method for tests - matches expected API\n  async signUpWrapper(userData) {\n    try {\n      const { username, password, email, firstName, lastName } = userData;\n\n      // Check if user already exists in confirmed users\n      if (this.users[username]) {\n        return {\n          success: false,\n          error: {\n            code: \"UsernameExistsException\",\n            message: \"Username already exists\",\n          },\n        };\n      }\n\n      // Check if user already exists in pending verifications\n      if (this.pendingVerifications[username]) {\n        return {\n          success: false,\n          error: {\n            code: \"UsernameExistsException\",\n            message: \"Username already exists\",\n          },\n        };\n      }\n\n      // Check if email is already used in confirmed users\n      const existingUser = Object.values(this.users).find(\n        (user) => user.email === email\n      );\n      if (existingUser) {\n        return {\n          success: false,\n          error: {\n            code: \"UsernameExistsException\",\n            message: \"Email already exists\",\n          },\n        };\n      }\n\n      // Check if email is already used in pending verifications\n      const existingPending = Object.values(this.pendingVerifications).find(\n        (pending) => pending.email === email\n      );\n      if (existingPending) {\n        return {\n          success: false,\n          error: {\n            code: \"UsernameExistsException\",\n            message: \"Email already exists\",\n          },\n        };\n      }\n\n      // Call the original signUp method directly to avoid circular reference\n      const result = await DevAuthService.prototype.signUp.call(\n        this,\n        username,\n        password,\n        email,\n        firstName || \"Dev\",\n        lastName || \"User\"\n      );\n\n      return {\n        success: true,\n        user: {\n          username,\n          email,\n        },\n        userConfirmed: false,\n        isSignUpComplete: result.isSignUpComplete,\n        nextStep: result.nextStep,\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: {\n          code: error.message.split(\":\")[0],\n          message: error.message.split(\":\")[1] || error.message,\n        },\n      };\n    }\n  }\n\n  // Wrapper method for tests - matches expected API\n  async signInWrapper(username, password) {\n    try {\n      const result = await DevAuthService.prototype.signIn.call(\n        this,\n        username,\n        password\n      );\n      return {\n        success: true,\n        user: result.user,\n        tokens: result.tokens,\n        isSignedIn: result.isSignedIn,\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: {\n          code: error.message.split(\":\")[0],\n          message: error.message.split(\":\")[1] || error.message,\n        },\n      };\n    }\n  }\n\n  // Password validation method\n  validatePassword(password) {\n    const errors = [];\n\n    if (password.length < 8) {\n      errors.push(\"Password must be at least 8 characters long\");\n    }\n\n    if (!/[a-z]/.test(password)) {\n      errors.push(\"Password must contain at least one lowercase letter\");\n    }\n\n    if (!/[A-Z]/.test(password)) {\n      errors.push(\"Password must contain at least one uppercase letter\");\n    }\n\n    if (!/\\d/.test(password)) {\n      errors.push(\"Password must contain at least one digit\");\n    }\n\n    if (!/[!@#$%^&*(),.?\":{}|<>]/.test(password)) {\n      errors.push(\"Password must contain at least one special character\");\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n    };\n  }\n\n  // Wrapper for getCurrentUser that matches test expectations\n  async getCurrentUserWrapper() {\n    try {\n      const user = await DevAuthService.prototype.getCurrentUser.call(this);\n      return {\n        success: true,\n        user,\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: {\n          code: \"NotAuthorizedException\",\n          message: error.message,\n        },\n      };\n    }\n  }\n\n  // Get JWT token method for tests\n  async getJwtToken() {\n    try {\n      const session = await this.fetchAuthSession();\n      return session.tokens.accessToken;\n    } catch (error) {\n      return null;\n    }\n  }\n\n  // Sign out wrapper for tests\n  async signOutWrapper() {\n    try {\n      await DevAuthService.prototype.signOut.call(this);\n      return {\n        success: true,\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: {\n          code: \"SignOutError\",\n          message: error.message,\n        },\n      };\n    }\n  }\n\n  // Password reset wrapper for tests\n  async forgotPasswordWrapper(username) {\n    try {\n      await DevAuthService.prototype.resetPassword.call(this, username);\n      return {\n        success: true,\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: {\n          code: error.message.split(\":\")[0],\n          message: error.message.split(\":\")[1] || error.message,\n        },\n      };\n    }\n  }\n\n  // Confirm password reset wrapper for tests\n  async confirmResetPasswordWrapper(username, code, newPassword) {\n    try {\n      await DevAuthService.prototype.confirmResetPassword.call(\n        this,\n        username,\n        code,\n        newPassword\n      );\n      return {\n        success: true,\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: {\n          code: error.message.split(\":\")[0],\n          message: error.message.split(\":\")[1] || error.message,\n        },\n      };\n    }\n  }\n\n  // JWT token validation methods\n  validateJwtToken(token) {\n    // Simple validation for dev environment\n    return !!(token && typeof token === \"string\" && token.length > 0);\n  }\n\n  isTokenExpired(_token) {\n    // In dev environment, tokens don't really expire\n    return false;\n  }\n\n  // MFA confirmation wrapper\n  async confirmMFA(user, _code) {\n    // Dev environment doesn't have real MFA, so just return success\n    return {\n      success: true,\n      user: user || { username: \"testuser\" },\n    };\n  }\n\n  // Update user attributes wrapper\n  async updateUserAttributes(user, attributes) {\n    try {\n      // In dev environment, just update the local user\n      if (this.users[user.username]) {\n        Object.assign(this.users[user.username], attributes);\n        this.saveUsers();\n      }\n      return {\n        success: true,\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: {\n          code: \"UpdateAttributesError\",\n          message: error.message,\n        },\n      };\n    }\n  }\n}\n\n// Create service instance\nconst devAuthService = new DevAuthService();\n\n// Override methods directly for test compatibility - use arrow functions to preserve 'this'\ndevAuthService.signUp = (...args) => {\n  // Handle both object and individual parameter formats for backward compatibility\n  if (args.length === 1 && typeof args[0] === 'object') {\n    return devAuthService.signUpWrapper(args[0]);\n  } else {\n    // Convert individual parameters to object format\n    const [username, password, email, firstName, lastName] = args;\n    return devAuthService.signUpWrapper({ username, password, email, firstName, lastName });\n  }\n};\ndevAuthService.signIn = (...args) => devAuthService.signInWrapper(...args);\ndevAuthService.getCurrentUser = (...args) => devAuthService.getCurrentUserWrapper(...args);\ndevAuthService.signOut = (...args) => devAuthService.signOutWrapper(...args);\ndevAuthService.forgotPassword = (...args) => devAuthService.forgotPasswordWrapper(...args);\ndevAuthService.forgotPasswordSubmit = (...args) => devAuthService.confirmResetPasswordWrapper(...args);\ndevAuthService.changePassword = (...args) => devAuthService.confirmResetPasswordWrapper(...args);\n\n// Ensure all methods are available on the instance - use arrow functions to preserve 'this'\ndevAuthService.generateVerificationCode = (...args) => DevAuthService.prototype.generateVerificationCode.call(devAuthService, ...args);\ndevAuthService.generateDevTokens = (...args) => DevAuthService.prototype.generateDevTokens.call(devAuthService, ...args);\ndevAuthService.loadUsers = (...args) => DevAuthService.prototype.loadUsers.call(devAuthService, ...args);\ndevAuthService.saveUsers = (...args) => DevAuthService.prototype.saveUsers.call(devAuthService, ...args);\ndevAuthService.loadSession = (...args) => DevAuthService.prototype.loadSession.call(devAuthService, ...args);\ndevAuthService.saveSession = (...args) => DevAuthService.prototype.saveSession.call(devAuthService, ...args);\ndevAuthService.loadPendingVerifications = (...args) => DevAuthService.prototype.loadPendingVerifications.call(devAuthService, ...args);\ndevAuthService.savePendingVerifications = (...args) => DevAuthService.prototype.savePendingVerifications.call(devAuthService, ...args);\ndevAuthService.confirmSignUp = (...args) => DevAuthService.prototype.confirmSignUp.call(devAuthService, ...args);\ndevAuthService.validateJwtToken = (...args) => DevAuthService.prototype.validateJwtToken.call(devAuthService, ...args);\ndevAuthService.isTokenExpired = (...args) => DevAuthService.prototype.isTokenExpired.call(devAuthService, ...args);\ndevAuthService.confirmMFA = (...args) => DevAuthService.prototype.confirmMFA.call(devAuthService, ...args);\ndevAuthService.updateUserAttributes = (...args) => DevAuthService.prototype.updateUserAttributes.call(devAuthService, ...args);\ndevAuthService.validatePassword = (...args) => DevAuthService.prototype.validatePassword.call(devAuthService, ...args);\ndevAuthService.ensureDevUser = (...args) => DevAuthService.prototype.ensureDevUser.call(devAuthService, ...args);\n\nexport default devAuthService;\n","/**\n * Session Management Service\n * Handles token refresh, session timeout, and automatic logout\n */\n\nclass SessionManager {\n  constructor() {\n    this.refreshTimer = null;\n    this.warningTimer = null;\n    this.sessionTimeoutTimer = null;\n    this.isRefreshing = false;\n\n    // Configuration\n    this.config = {\n      tokenRefreshInterval: 45 * 60 * 1000, // 45 minutes\n      sessionTimeout: 8 * 60 * 60 * 1000, // 8 hours\n      warningTime: 10 * 60 * 1000, // 10 minutes before timeout\n      maxRefreshAttempts: 3,\n      rememberMeDuration: 30 * 24 * 60 * 60 * 1000, // 30 days\n    };\n\n    this.callbacks = {\n      onTokenRefresh: null,\n      onSessionWarning: null,\n      onSessionExpired: null,\n      onRefreshError: null,\n    };\n\n    this.sessionData = {\n      lastActivity: Date.now(),\n      loginTime: null,\n      refreshAttempts: 0,\n      rememberMe: false,\n    };\n  }\n\n  /**\n   * Initialize session management\n   */\n  initialize(authContext) {\n    this.authContext = authContext;\n    this.setupEventListeners();\n    this.startSessionTracking();\n    this.scheduleTokenRefresh();\n\n    console.log(\" Session manager initialized\");\n  }\n\n  /**\n   * Set callback functions\n   */\n  setCallbacks(callbacks) {\n    this.callbacks = { ...this.callbacks, ...callbacks };\n  }\n\n  /**\n   * Start a new session\n   */\n  startSession(rememberMe = false) {\n    const now = Date.now();\n    this.sessionData = {\n      lastActivity: now,\n      loginTime: now,\n      refreshAttempts: 0,\n      rememberMe,\n    };\n\n    // Store session info\n    const storage = rememberMe ? localStorage : sessionStorage;\n    storage.setItem(\"sessionStart\", now.toString());\n    storage.setItem(\"rememberMe\", rememberMe.toString());\n\n    this.startSessionTracking();\n    this.scheduleTokenRefresh();\n\n    console.log(` Session started (remember me: ${rememberMe})`);\n  }\n\n  /**\n   * End the current session\n   */\n  endSession() {\n    this.clearAllTimers();\n    this.clearSessionStorage();\n\n    console.log(\" Session ended\");\n  }\n\n  /**\n   * Update last activity timestamp\n   */\n  updateActivity() {\n    this.sessionData.lastActivity = Date.now();\n\n    // Reset session timeout if user is active\n    if (this.sessionTimeoutTimer) {\n      clearTimeout(this.sessionTimeoutTimer);\n      this.startSessionTimeout();\n    }\n  }\n\n  /**\n   * Schedule automatic token refresh\n   */\n  scheduleTokenRefresh() {\n    if (this.refreshTimer) {\n      clearInterval(this.refreshTimer);\n    }\n\n    this.refreshTimer = setInterval(async () => {\n      await this.refreshTokens();\n    }, this.config.tokenRefreshInterval);\n\n    console.log(\" Token refresh scheduled\");\n  }\n\n  /**\n   * Refresh authentication tokens\n   */\n  async refreshTokens() {\n    if (this.isRefreshing || !this.authContext) {\n      return;\n    }\n\n    this.isRefreshing = true;\n\n    try {\n      // Refreshing tokens\n\n      const result = await this.authContext.refreshSession();\n\n      if (result.success) {\n        this.sessionData.refreshAttempts = 0;\n        console.log(\" Tokens refreshed successfully\");\n\n        if (this.callbacks.onTokenRefresh) {\n          this.callbacks.onTokenRefresh(result);\n        }\n      } else {\n        throw new Error(result.error || \"Token refresh failed\");\n      }\n    } catch (error) {\n      console.error(\" Token refresh failed:\", error);\n      this.sessionData.refreshAttempts++;\n\n      if (this.callbacks.onRefreshError) {\n        this.callbacks.onRefreshError(error, this.sessionData.refreshAttempts);\n      }\n\n      // If max attempts reached, logout user\n      if (this.sessionData.refreshAttempts >= this.config.maxRefreshAttempts) {\n        console.error(\" Max refresh attempts reached, logging out\");\n        await this.handleSessionExpired();\n      }\n    } finally {\n      this.isRefreshing = false;\n    }\n  }\n\n  /**\n   * Start session timeout tracking\n   */\n  startSessionTracking() {\n    this.startSessionTimeout();\n    this.startWarningTimer();\n  }\n\n  /**\n   * Start session timeout timer\n   */\n  startSessionTimeout() {\n    if (this.sessionTimeoutTimer) {\n      clearTimeout(this.sessionTimeoutTimer);\n    }\n\n    const timeoutDuration = this.sessionData.rememberMe\n      ? this.config.rememberMeDuration\n      : this.config.sessionTimeout;\n\n    this.sessionTimeoutTimer = setTimeout(async () => {\n      await this.handleSessionExpired();\n    }, timeoutDuration);\n  }\n\n  /**\n   * Start warning timer\n   */\n  startWarningTimer() {\n    if (this.warningTimer) {\n      clearTimeout(this.warningTimer);\n    }\n\n    const timeoutDuration = this.sessionData.rememberMe\n      ? this.config.rememberMeDuration\n      : this.config.sessionTimeout;\n\n    const warningTime = timeoutDuration - this.config.warningTime;\n\n    this.warningTimer = setTimeout(() => {\n      this.handleSessionWarning();\n    }, warningTime);\n  }\n\n  /**\n   * Handle session warning\n   */\n  handleSessionWarning() {\n    console.log(\" Session expiring soon\");\n\n    if (this.callbacks.onSessionWarning) {\n      this.callbacks.onSessionWarning({\n        timeRemaining: this.config.warningTime,\n        canExtend: true,\n      });\n    }\n  }\n\n  /**\n   * Handle session expired\n   */\n  async handleSessionExpired() {\n    console.log(\" Session expired\");\n\n    if (this.callbacks.onSessionExpired) {\n      this.callbacks.onSessionExpired();\n    }\n\n    // Logout user\n    if (this.authContext) {\n      await this.authContext.logout();\n    }\n\n    this.endSession();\n  }\n\n  /**\n   * Extend session when user is active\n   */\n  extendSession() {\n    console.log(\" Extending session\");\n    this.updateActivity();\n\n    // Restart timers\n    this.startSessionTimeout();\n    this.startWarningTimer();\n  }\n\n  /**\n   * Setup event listeners for user activity\n   */\n  setupEventListeners() {\n    const events = [\n      \"mousedown\",\n      \"mousemove\",\n      \"keypress\",\n      \"scroll\",\n      \"touchstart\",\n      \"click\",\n    ];\n\n    const activityHandler = () => {\n      this.updateActivity();\n    };\n\n    events.forEach((event) => {\n      document.addEventListener(event, activityHandler, true);\n    });\n\n    // Listen for page visibility changes\n    document.addEventListener(\"visibilitychange\", () => {\n      if (!document.hidden) {\n        this.updateActivity();\n      }\n    });\n  }\n\n  /**\n   * Clear all timers\n   */\n  clearAllTimers() {\n    if (this.refreshTimer) {\n      clearInterval(this.refreshTimer);\n      this.refreshTimer = null;\n    }\n\n    if (this.warningTimer) {\n      clearTimeout(this.warningTimer);\n      this.warningTimer = null;\n    }\n\n    if (this.sessionTimeoutTimer) {\n      clearTimeout(this.sessionTimeoutTimer);\n      this.sessionTimeoutTimer = null;\n    }\n  }\n\n  /**\n   * Clear session storage\n   */\n  clearSessionStorage() {\n    localStorage.removeItem(\"sessionStart\");\n    localStorage.removeItem(\"rememberMe\");\n    sessionStorage.removeItem(\"sessionStart\");\n    sessionStorage.removeItem(\"rememberMe\");\n  }\n\n  /**\n   * Get session info\n   */\n  getSessionInfo() {\n    const now = Date.now();\n    const sessionDuration = now - (this.sessionData.loginTime || now);\n    const timeoutDuration = this.sessionData.rememberMe\n      ? this.config.rememberMeDuration\n      : this.config.sessionTimeout;\n\n    return {\n      isActive: true,\n      sessionDuration,\n      timeRemaining: timeoutDuration - sessionDuration,\n      lastActivity: this.sessionData.lastActivity,\n      rememberMe: this.sessionData.rememberMe,\n      refreshAttempts: this.sessionData.refreshAttempts,\n    };\n  }\n\n  /**\n   * Check if session is valid\n   */\n  isSessionValid() {\n    const now = Date.now();\n    const sessionAge = now - (this.sessionData.loginTime || now);\n    const maxAge = this.sessionData.rememberMe\n      ? this.config.rememberMeDuration\n      : this.config.sessionTimeout;\n\n    return sessionAge < maxAge;\n  }\n}\n\n// Create singleton instance\nconst sessionManager = new SessionManager();\n\nexport default sessionManager;\n","import { useState, useEffect, useRef } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  Typography,\n  Box,\n  LinearProgress,\n  Alert,\n  CircularProgress,\n} from \"@mui/material\";\nimport { Warning, AccessTime } from \"@mui/icons-material\";\n\nconst SessionWarningDialog = ({\n  open,\n  timeRemaining,\n  onExtend,\n  onLogout,\n  onClose,\n}) => {\n  const [countdown, setCountdown] = useState(timeRemaining);\n  const [extending, setExtending] = useState(false);\n  const isMountedRef = useRef(true);\n\n  useEffect(() => {\n    setCountdown(timeRemaining);\n  }, [timeRemaining]);\n\n  useEffect(() => {\n    if (!open) return;\n\n    const timer = setInterval(() => {\n      if (!isMountedRef.current) {\n        clearInterval(timer);\n        return;\n      }\n\n      setCountdown((prev) => {\n        const newTime = prev - 1000;\n        if (newTime <= 0) {\n          // Clear timer before calling onLogout to prevent further updates\n          clearInterval(timer);\n          // Auto logout when time expires\n          if (isMountedRef.current) {\n            onLogout();\n          }\n          return 0;\n        }\n        return newTime;\n      });\n    }, 1000);\n\n    return () => {\n      clearInterval(timer);\n    };\n  }, [open, onLogout]);\n\n  useEffect(() => {\n    return () => {\n      isMountedRef.current = false;\n    };\n  }, []);\n\n  const handleExtend = async () => {\n    setExtending(true);\n    try {\n      await onExtend();\n      onClose();\n    } catch (error) {\n      console.error(\"Failed to extend session:\", error);\n    } finally {\n      setExtending(false);\n    }\n  };\n\n  const formatTime = (milliseconds) => {\n    const totalSeconds = Math.max(0, Math.floor(milliseconds / 1000));\n    const minutes = Math.floor(totalSeconds / 60);\n    const seconds = totalSeconds % 60;\n    return `${minutes}:${seconds.toString().padStart(2, \"0\")}`;\n  };\n\n  const progressValue = ((timeRemaining - countdown) / timeRemaining) * 100;\n\n  return (\n    <Dialog\n      open={open}\n      onClose={onClose}\n      maxWidth=\"sm\"\n      fullWidth\n      disableEscapeKeyDown\n      PaperProps={{\n        sx: {\n          borderRadius: 2,\n          border: \"2px solid\",\n          borderColor: \"warning.main\",\n        },\n      }}\n    >\n      <DialogTitle>\n        <Box display=\"flex\" alignItems=\"center\" gap={1}>\n          <Warning color=\"warning\" />\n          <Typography variant=\"h6\">Session Expiring Soon</Typography>\n        </Box>\n      </DialogTitle>\n\n      <DialogContent>\n        <Alert severity=\"warning\" sx={{ mb: 2 }}>\n          Your session will expire in <strong>{formatTime(countdown)}</strong>\n        </Alert>\n\n        <Box sx={{ mb: 2 }}>\n          <Box display=\"flex\" alignItems=\"center\" gap={1} mb={1}>\n            <AccessTime fontSize=\"small\" />\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Time Remaining\n            </Typography>\n          </Box>\n          <LinearProgress\n            variant=\"determinate\"\n            value={100 - progressValue}\n            color={countdown < 60000 ? \"error\" : \"warning\"}\n            sx={{ height: 8, borderRadius: 4 }}\n          />\n        </Box>\n\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          You will be automatically logged out when the timer reaches zero.\n          Click &quot;Stay Signed In&quot; to extend your session.\n        </Typography>\n      </DialogContent>\n\n      <DialogActions sx={{ p: 2, gap: 1 }}>\n        <Button\n          onClick={onLogout}\n          color=\"error\"\n          variant=\"outlined\"\n          disabled={extending}\n        >\n          Sign Out Now\n        </Button>\n\n        <Button\n          onClick={handleExtend}\n          color=\"primary\"\n          variant=\"contained\"\n          disabled={extending}\n          startIcon={extending ? <CircularProgress size={16} /> : null}\n        >\n          {extending ? \"Extending...\" : \"Stay Signed In\"}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default SessionWarningDialog;\n","import {\n  createContext,\n  useContext,\n  useReducer,\n  useEffect,\n  useState,\n  useCallback,\n} from \"react\";\nimport {\n  fetchAuthSession,\n  signIn,\n  signUp,\n  confirmSignUp,\n  resendSignUpCode,\n  signOut,\n  resetPassword,\n  confirmResetPassword,\n  getCurrentUser,\n} from \"aws-amplify/auth\";\nimport { isCognitoConfigured } from \"../config/amplify\";\nimport devAuth from \"../services/devAuth\";\nimport sessionManager from \"../services/sessionManager\";\nimport SessionWarningDialog from \"../components/auth/SessionWarningDialog\";\n\n// Initial auth state\nconst initialState = {\n  user: null,\n  isAuthenticated: false,\n  isLoading: true,\n  error: null,\n  tokens: null,\n};\n\n// Auth actions\nconst AUTH_ACTIONS = {\n  LOADING: \"LOADING\",\n  LOGIN_SUCCESS: \"LOGIN_SUCCESS\",\n  LOGIN_FAILURE: \"LOGIN_FAILURE\",\n  LOGOUT: \"LOGOUT\",\n  SET_ERROR: \"SET_ERROR\",\n  CLEAR_ERROR: \"CLEAR_ERROR\",\n  UPDATE_TOKENS: \"UPDATE_TOKENS\",\n};\n\n// Auth reducer\nfunction authReducer(state, action) {\n  switch (action.type) {\n    case AUTH_ACTIONS.LOADING:\n      return {\n        ...state,\n        isLoading: action.payload,\n      };\n    case AUTH_ACTIONS.LOGIN_SUCCESS:\n      return {\n        ...state,\n        user: action.payload.user,\n        tokens: action.payload.tokens,\n        isAuthenticated: true,\n        isLoading: false,\n        error: null,\n      };\n    case AUTH_ACTIONS.LOGIN_FAILURE:\n      return {\n        ...state,\n        user: null,\n        tokens: null,\n        isAuthenticated: false,\n        isLoading: false,\n        error: action.payload,\n      };\n    case AUTH_ACTIONS.LOGOUT:\n      // Clear stored tokens\n      localStorage.removeItem(\"accessToken\");\n      localStorage.removeItem(\"authToken\");\n      sessionStorage.removeItem(\"accessToken\");\n      sessionStorage.removeItem(\"authToken\");\n\n      return {\n        ...state,\n        user: null,\n        tokens: null,\n        isAuthenticated: false,\n        isLoading: false,\n        error: null,\n      };\n    case AUTH_ACTIONS.SET_ERROR:\n      return {\n        ...state,\n        error: action.payload,\n        isLoading: false,\n      };\n    case AUTH_ACTIONS.CLEAR_ERROR:\n      return {\n        ...state,\n        error: null,\n      };\n    case AUTH_ACTIONS.UPDATE_TOKENS:\n      return {\n        ...state,\n        tokens: action.payload,\n      };\n    default:\n      return state;\n  }\n}\n\n// Create auth context with explicit undefined check and defaults\nconst AuthContext = createContext(null);\n\n// Create a safe default context value to prevent undefined errors\nconst defaultContextValue = {\n  user: null,\n  isAuthenticated: false,\n  isLoading: true,\n  error: null,\n  tokens: null,\n  login: async () => {},\n  signup: async () => {},\n  confirmAccount: async () => {},\n  forgotPassword: async () => {},\n  resetPassword: async () => {},\n};\n\n// Auth provider component\nexport function AuthProvider({ children }) {\n  const [state, dispatch] = useReducer(authReducer, initialState);\n  const [sessionWarning, setSessionWarning] = useState({\n    show: false,\n    timeRemaining: 0,\n  });\n\n  const refreshSession = useCallback(async () => {\n    try {\n      const session = await fetchAuthSession({ forceRefresh: true });\n\n      if (session.tokens) {\n        dispatch({\n          type: AUTH_ACTIONS.UPDATE_TOKENS,\n          payload: {\n            accessToken: session.tokens.accessToken.toString(),\n            idToken: session.tokens.idToken?.toString(),\n            refreshToken: session.tokens.refreshToken?.toString(),\n          },\n        });\n        return { success: true };\n      }\n\n      return { success: false, error: \"No valid tokens\" };\n    } catch (error) {\n      console.error(\"Session refresh error:\", error);\n      return { success: false, error: getErrorMessage(error) };\n    }\n  }, []);\n\n  const logout = useCallback(async () => {\n    try {\n      // Clear stored auth token\n      localStorage.removeItem(\"accessToken\");\n      localStorage.removeItem(\"authToken\");\n      sessionStorage.removeItem(\"accessToken\");\n      sessionStorage.removeItem(\"authToken\");\n\n      // If Cognito is not configured, use dev auth\n      if (!isCognitoConfigured()) {\n        console.log(\n          \"Cognito not configured - using development authentication\"\n        );\n        await devAuth.signOut();\n        dispatch({ type: AUTH_ACTIONS.LOGOUT });\n        return { success: true };\n      }\n\n      await signOut();\n      dispatch({ type: AUTH_ACTIONS.LOGOUT });\n      return { success: true };\n    } catch (error) {\n      console.error(\"Logout error:\", error);\n      // Even if logout fails, clear local state\n      dispatch({ type: AUTH_ACTIONS.LOGOUT });\n      return { success: false, error: getErrorMessage(error) };\n    }\n  }, []);\n\n  const checkAuthState = useCallback(async () => {\n    try {\n      dispatch({ type: AUTH_ACTIONS.LOADING, payload: true });\n\n      // In unit test environment, don't attempt authentication checks that might hang\n      // But allow E2E tests (Playwright) to use dev auth\n      const isUnitTestEnv = (\n        // Check for vitest testing environment\n        (typeof globalThis !== 'undefined' && globalThis.__vitest_worker__) ||\n        (typeof window !== 'undefined' && window.__vitest_worker__) ||\n        import.meta.env?.MODE === 'test' ||\n        (typeof process !== 'undefined' && process.env.NODE_ENV === 'test') ||\n        // Check if we're in jsdom environment\n        (typeof window !== 'undefined' && window.navigator?.userAgent?.includes('jsdom')) ||\n        // Check for vitest globals\n        (typeof globalThis !== 'undefined' &&\n         (globalThis.vi || globalThis.vitest || globalThis.__vitest__))\n      ) &&\n      // Exclude Playwright tests (they have window.playwright object)\n      !(typeof window !== 'undefined' && window.playwright);\n\n      if (isUnitTestEnv) {\n        console.log(\"Unit test environment detected - skipping auth check\");\n        dispatch({ type: AUTH_ACTIONS.LOADING, payload: false });\n        dispatch({ type: AUTH_ACTIONS.LOGOUT });\n        return;\n      }\n\n      // Check if we're in a real production environment\n      const isProductionBuild = import.meta.env.PROD;\n      const cognitoConfigured = isCognitoConfigured();\n      const forceDevAuth = import.meta.env.VITE_FORCE_DEV_AUTH === \"true\";\n\n      // Use Cognito in production or when properly configured (unless dev auth is forced)\n      if (isProductionBuild && cognitoConfigured && !forceDevAuth) {\n        console.log(\" PRODUCTION MODE - Using AWS Cognito authentication\");\n\n        try {\n          // Get current authenticated user\n          const user = await getCurrentUser();\n\n          // Get current session with tokens\n          const session = await fetchAuthSession();\n\n          if (user && session.tokens) {\n            const tokens = {\n              accessToken: session.tokens.accessToken.toString(),\n              idToken: session.tokens.idToken?.toString(),\n              refreshToken: session.tokens.refreshToken?.toString(),\n            };\n\n            // Store access token for API requests\n            localStorage.setItem(\"accessToken\", tokens.accessToken);\n\n            dispatch({\n              type: AUTH_ACTIONS.LOGIN_SUCCESS,\n              payload: {\n                user: {\n                  username: user.username,\n                  userId: user.userId,\n                  email: user.signInDetails?.loginId || user.username,\n                  firstName: user.userAttributes?.given_name || \"\",\n                  lastName: user.userAttributes?.family_name || \"\",\n                  signInDetails: user.signInDetails,\n                },\n                tokens,\n              },\n            });\n            console.log(\" User authenticated with Cognito\");\n            return;\n          }\n        } catch (error) {\n          console.log(\"No Cognito session found:\", error);\n        }\n      }\n\n      // Development fallback when Cognito is not configured OR dev auth is forced OR in DEV mode\n      // Use dev auth if Cognito isn't configured OR in DEV mode OR dev auth is forced\n      if (!cognitoConfigured || forceDevAuth || import.meta.env.DEV) {\n        console.log(\n          forceDevAuth\n            ? \" DEVELOPMENT MODE - Dev auth forced via VITE_FORCE_DEV_AUTH=true\"\n            : !cognitoConfigured\n              ? \" DEVELOPMENT MODE - Cognito not configured, using dev auth fallback\"\n              : \" DEVELOPMENT MODE - Using dev auth in DEV environment\"\n        );\n\n        try {\n          const user = await devAuth.getCurrentUser();\n          const session = await devAuth.fetchAuthSession();\n\n          if (user && session.tokens) {\n            // Store access token for API requests\n            localStorage.setItem(\"accessToken\", session.tokens.accessToken);\n\n            dispatch({\n              type: AUTH_ACTIONS.LOGIN_SUCCESS,\n              payload: {\n                user,\n                tokens: session.tokens,\n              },\n            });\n            console.log(\" Development user authenticated\");\n            return;\n          }\n        } catch (error) {\n          console.log(\"No dev auth session found:\", error.message);\n          // Fall through to logout - ensure loading state is cleared\n        }\n      }\n\n      // No valid session found\n      dispatch({ type: AUTH_ACTIONS.LOGOUT });\n    } catch (error) {\n      console.log(\"Authentication check failed:\", error);\n      dispatch({ type: AUTH_ACTIONS.LOGOUT });\n    }\n  }, []); // Empty dependency array since dispatch is stable\n\n  // Check if user is authenticated on app start\n  useEffect(() => {\n    checkAuthState();\n  }, [checkAuthState]);\n\n  // Initialize session manager when authenticated\n  useEffect(() => {\n    if (state.isAuthenticated && state.user) {\n      try {\n        // Initialize session manager with proper authContext object\n        const authContextObj = {\n          refreshSession,\n          logout,\n        };\n        sessionManager.initialize(authContextObj);\n\n        // Set session manager callbacks\n        sessionManager.setCallbacks({\n          onTokenRefresh: (_result) => {\n            console.log(\" Tokens refreshed automatically\");\n          },\n          onSessionWarning: (warningData) => {\n            setSessionWarning({\n              show: true,\n              timeRemaining: warningData.timeRemaining,\n            });\n          },\n          onSessionExpired: async () => {\n            console.log(\" Session expired, logging out\");\n            await logout();\n          },\n          onRefreshError: (error, attempts) => {\n            console.error(\n              ` Token refresh failed (attempt ${attempts}):`,\n              error\n            );\n          },\n        });\n\n        // Start session\n        const rememberMe = localStorage.getItem(\"rememberMe\") === \"true\";\n        sessionManager.startSession(rememberMe);\n      } catch (error) {\n        console.error(\" Failed to initialize session manager:\", error);\n        // Don't throw error to prevent app crash\n      }\n    } else if (!state.isAuthenticated) {\n      // End session when logged out\n      sessionManager.endSession();\n      setSessionWarning({ show: false, timeRemaining: 0 });\n    }\n\n    // Cleanup function for component unmount\n    return () => {\n      sessionManager.clearAllTimers();\n    };\n  }, [\n    state.isAuthenticated,\n    state.user,\n    refreshSession,\n    logout,\n    setSessionWarning,\n  ]);\n\n  const login = async (username, password) => {\n    try {\n      dispatch({ type: AUTH_ACTIONS.LOADING, payload: true });\n      dispatch({ type: AUTH_ACTIONS.CLEAR_ERROR });\n\n      const isProductionBuild = import.meta.env.PROD;\n      const cognitoConfigured = isCognitoConfigured();\n      const forceDevAuth = import.meta.env.VITE_FORCE_DEV_AUTH === \"true\";\n\n      // Try Cognito in production or when properly configured (unless dev auth is forced)\n      if (isProductionBuild && cognitoConfigured && !forceDevAuth) {\n        try {\n          console.log(\" PRODUCTION LOGIN - Attempting AWS Cognito\");\n\n          const { isSignedIn, nextStep } = await signIn({\n            username,\n            password,\n          });\n\n          if (isSignedIn) {\n            // Get user and session after successful sign in\n            const user = await getCurrentUser();\n            const session = await fetchAuthSession();\n\n            const tokens = {\n              accessToken: session.tokens.accessToken.toString(),\n              idToken: session.tokens.idToken?.toString(),\n              refreshToken: session.tokens.refreshToken?.toString(),\n            };\n\n            // Store access token for API requests\n            localStorage.setItem(\"accessToken\", tokens.accessToken);\n\n            dispatch({\n              type: AUTH_ACTIONS.LOGIN_SUCCESS,\n              payload: {\n                user: {\n                  username: user.username,\n                  userId: user.userId,\n                  email: user.signInDetails?.loginId || user.username,\n                  firstName: user.userAttributes?.given_name || \"\",\n                  lastName: user.userAttributes?.family_name || \"\",\n                  signInDetails: user.signInDetails,\n                },\n                tokens,\n              },\n            });\n\n            console.log(\" Production login successful\");\n            return { success: true };\n          } else {\n            // Handle additional steps (MFA, password change, etc.)\n            return {\n              success: false,\n              nextStep: nextStep,\n              message: \"Additional authentication step required\",\n            };\n          }\n        } catch (cognitoError) {\n          console.warn(\" Cognito authentication failed, trying dev auth fallback:\", cognitoError);\n          // Don't return here - fall through to dev auth\n        }\n      }\n\n      // Development auth fallback - use when:\n      // 1. Cognito not configured in dev mode\n      // 2. Dev auth is explicitly forced\n      // 3. In development mode (even if Cognito is configured)\n      const shouldUseDevAuth = !cognitoConfigured ||\n                               forceDevAuth ||\n                               import.meta.env.DEV;\n\n      if (shouldUseDevAuth) {\n        console.log(\n          forceDevAuth\n            ? \" DEVELOPMENT LOGIN - Dev auth forced via VITE_FORCE_DEV_AUTH=true\"\n            : \" DEVELOPMENT LOGIN - Using dev auth fallback\"\n        );\n\n        try {\n          const result = await devAuth.signIn(username, password);\n\n          // Check if login was successful and has tokens\n          if (!result || !result.success || !result.tokens) {\n            const errorMsg =\n              result.error?.message || \"Login failed - no tokens received\";\n            console.error(\"Dev auth login failed:\", errorMsg);\n            dispatch({ type: AUTH_ACTIONS.LOGIN_FAILURE, payload: errorMsg });\n            return { success: false, error: errorMsg };\n          }\n\n          // Store access token for API requests\n          localStorage.setItem(\"accessToken\", result.tokens.accessToken);\n\n          dispatch({\n            type: AUTH_ACTIONS.LOGIN_SUCCESS,\n            payload: {\n              user: result.user,\n              tokens: result.tokens,\n            },\n          });\n\n          console.log(\" Development login successful\");\n          return { success: true };\n        } catch (error) {\n          console.error(\"Dev auth login error:\", error);\n          const errorMessage = getErrorMessage(error);\n          dispatch({ type: AUTH_ACTIONS.LOGIN_FAILURE, payload: errorMessage });\n          return { success: false, error: errorMessage };\n        }\n      }\n\n      // If we get here, neither production nor development auth is available\n      // This should not happen in normal circumstances\n      console.error(\" CRITICAL: Both Cognito and dev auth paths were skipped or failed\");\n      console.error(\"Debug info:\", {\n        isProductionBuild,\n        cognitoConfigured,\n        forceDevAuth,\n        isDev: import.meta.env.DEV,\n        shouldUseDevAuth: !cognitoConfigured || forceDevAuth || import.meta.env.DEV\n      });\n\n      // Force use dev auth as last resort if we're in development\n      if (import.meta.env.DEV) {\n        console.log(\" FALLBACK: Forcing dev auth as last resort\");\n        try {\n          const result = await devAuth.signIn(username, password);\n          if (result && result.success && result.tokens) {\n            sessionStorage.setItem(\"authToken\", result.tokens.accessToken);\n            dispatch({\n              type: AUTH_ACTIONS.LOGIN_SUCCESS,\n              payload: { user: result.user, tokens: result.tokens },\n            });\n            return { success: true, user: result.user };\n          }\n        } catch (fallbackError) {\n          console.error(\"Even fallback dev auth failed:\", fallbackError);\n        }\n      }\n\n      const errorMessage = cognitoConfigured\n        ? \"Authentication service is temporarily unavailable. Please try again later.\"\n        : \"Authentication is not configured. Please contact support or use development mode.\";\n\n      throw new Error(errorMessage);\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      const errorMessage = getErrorMessage(error);\n      dispatch({ type: AUTH_ACTIONS.LOGIN_FAILURE, payload: errorMessage });\n      return { success: false, error: errorMessage };\n    }\n  };\n\n  const register = async (username, password, email, firstName, lastName) => {\n    try {\n      dispatch({ type: AUTH_ACTIONS.LOADING, payload: true });\n      dispatch({ type: AUTH_ACTIONS.CLEAR_ERROR });\n\n      // If Cognito is not configured, use dev auth\n      if (!isCognitoConfigured()) {\n        console.log(\n          \"Cognito not configured - using development authentication\"\n        );\n        try {\n          const result = await devAuth.signUp(\n            username,\n            password,\n            email,\n            firstName,\n            lastName\n          );\n\n          dispatch({ type: AUTH_ACTIONS.LOADING, payload: false });\n\n          return {\n            success: true,\n            isComplete: result.isSignUpComplete,\n            nextStep: result.nextStep,\n            message: result.isSignUpComplete\n              ? \"Registration completed successfully\"\n              : \"Please check your email for verification code\",\n          };\n        } catch (error) {\n          console.error(\"Dev auth registration error:\", error);\n          const errorMessage = getErrorMessage(error);\n          dispatch({ type: AUTH_ACTIONS.SET_ERROR, payload: errorMessage });\n          return { success: false, error: errorMessage };\n        }\n      }\n\n      const { isSignUpComplete, nextStep } = await signUp({\n        username,\n        password,\n        options: {\n          userAttributes: {\n            email,\n            given_name: firstName,\n            family_name: lastName,\n          },\n        },\n      });\n\n      dispatch({ type: AUTH_ACTIONS.LOADING, payload: false });\n\n      return {\n        success: true,\n        isComplete: isSignUpComplete,\n        nextStep: nextStep,\n        message: isSignUpComplete\n          ? \"Registration completed successfully\"\n          : \"Please check your email for verification code\",\n      };\n    } catch (error) {\n      console.error(\"Registration error:\", error);\n      const errorMessage = getErrorMessage(error);\n      dispatch({ type: AUTH_ACTIONS.SET_ERROR, payload: errorMessage });\n      return { success: false, error: errorMessage };\n    }\n  };\n\n  const confirmRegistration = async (username, confirmationCode) => {\n    try {\n      dispatch({ type: AUTH_ACTIONS.LOADING, payload: true });\n      dispatch({ type: AUTH_ACTIONS.CLEAR_ERROR });\n\n      // If Cognito is not configured, use dev auth\n      if (!isCognitoConfigured()) {\n        console.log(\n          \"Cognito not configured - using development authentication\"\n        );\n        try {\n          const result = await devAuth.confirmSignUp(\n            username,\n            confirmationCode\n          );\n\n          dispatch({ type: AUTH_ACTIONS.LOADING, payload: false });\n\n          return {\n            success: true,\n            isComplete: result.isSignUpComplete,\n            message: \"Account confirmed successfully. You can now sign in.\",\n          };\n        } catch (error) {\n          console.error(\"Dev auth confirmation error:\", error);\n          const errorMessage = getErrorMessage(error);\n          dispatch({ type: AUTH_ACTIONS.SET_ERROR, payload: errorMessage });\n          return { success: false, error: errorMessage };\n        }\n      }\n\n      const { isSignUpComplete } = await confirmSignUp({\n        username,\n        confirmationCode,\n      });\n\n      dispatch({ type: AUTH_ACTIONS.LOADING, payload: false });\n\n      return {\n        success: true,\n        isComplete: isSignUpComplete,\n        message: \"Account confirmed successfully. You can now sign in.\",\n      };\n    } catch (error) {\n      console.error(\"Confirmation error:\", error);\n      const errorMessage = getErrorMessage(error);\n      dispatch({ type: AUTH_ACTIONS.SET_ERROR, payload: errorMessage });\n      return { success: false, error: errorMessage };\n    }\n  };\n\n  const resendConfirmationCode = async (username) => {\n    try {\n      dispatch({ type: AUTH_ACTIONS.LOADING, payload: true });\n      dispatch({ type: AUTH_ACTIONS.CLEAR_ERROR });\n\n      // If Cognito is not configured, use dev auth\n      if (!isCognitoConfigured()) {\n        console.log(\n          \"Cognito not configured - using development authentication\"\n        );\n        try {\n          // For dev auth, we simulate sending a new code\n          await new Promise((resolve) => setTimeout(resolve, 1000));\n\n          dispatch({ type: AUTH_ACTIONS.LOADING, payload: false });\n\n          return {\n            success: true,\n            message:\n              \"New verification code sent to your email (development mode)\",\n          };\n        } catch (error) {\n          console.error(\"Dev auth resend error:\", error);\n          const errorMessage = getErrorMessage(error);\n          dispatch({ type: AUTH_ACTIONS.SET_ERROR, payload: errorMessage });\n          return { success: false, error: errorMessage };\n        }\n      }\n\n      await resendSignUpCode({ username });\n\n      dispatch({ type: AUTH_ACTIONS.LOADING, payload: false });\n\n      return {\n        success: true,\n        message: \"New verification code sent to your email\",\n      };\n    } catch (error) {\n      console.error(\"Resend confirmation error:\", error);\n      const errorMessage = getErrorMessage(error);\n      dispatch({ type: AUTH_ACTIONS.SET_ERROR, payload: errorMessage });\n      return { success: false, error: errorMessage };\n    }\n  };\n\n  const forgotPassword = async (username) => {\n    try {\n      dispatch({ type: AUTH_ACTIONS.LOADING, payload: true });\n      dispatch({ type: AUTH_ACTIONS.CLEAR_ERROR });\n\n      // If Cognito is not configured, use dev auth\n      if (!isCognitoConfigured()) {\n        console.log(\n          \"Cognito not configured - using development authentication\"\n        );\n        try {\n          const result = await devAuth.resetPassword(username);\n\n          dispatch({ type: AUTH_ACTIONS.LOADING, payload: false });\n\n          return {\n            success: true,\n            nextStep: result.nextStep,\n            message: \"Password reset code sent to your email\",\n          };\n        } catch (error) {\n          console.error(\"Dev auth password reset error:\", error);\n          const errorMessage = getErrorMessage(error);\n          dispatch({ type: AUTH_ACTIONS.SET_ERROR, payload: errorMessage });\n          return { success: false, error: errorMessage };\n        }\n      }\n\n      const output = await resetPassword({ username });\n\n      dispatch({ type: AUTH_ACTIONS.LOADING, payload: false });\n\n      return {\n        success: true,\n        nextStep: output.nextStep,\n        message: \"Password reset code sent to your email\",\n      };\n    } catch (error) {\n      console.error(\"Forgot password error:\", error);\n      const errorMessage = getErrorMessage(error);\n      dispatch({ type: AUTH_ACTIONS.SET_ERROR, payload: errorMessage });\n      return { success: false, error: errorMessage };\n    }\n  };\n\n  const confirmForgotPassword = async (\n    username,\n    confirmationCode,\n    newPassword\n  ) => {\n    try {\n      dispatch({ type: AUTH_ACTIONS.LOADING, payload: true });\n      dispatch({ type: AUTH_ACTIONS.CLEAR_ERROR });\n\n      // If Cognito is not configured, use dev auth\n      if (!isCognitoConfigured()) {\n        console.log(\n          \"Cognito not configured - using development authentication\"\n        );\n        try {\n          await devAuth.confirmResetPassword(\n            username,\n            confirmationCode,\n            newPassword\n          );\n\n          dispatch({ type: AUTH_ACTIONS.LOADING, payload: false });\n\n          return {\n            success: true,\n            message:\n              \"Password reset successfully. You can now sign in with your new password.\",\n          };\n        } catch (error) {\n          console.error(\"Dev auth confirm password reset error:\", error);\n          const errorMessage = getErrorMessage(error);\n          dispatch({ type: AUTH_ACTIONS.SET_ERROR, payload: errorMessage });\n          return { success: false, error: errorMessage };\n        }\n      }\n\n      await confirmResetPassword({\n        username,\n        confirmationCode,\n        newPassword,\n      });\n\n      dispatch({ type: AUTH_ACTIONS.LOADING, payload: false });\n\n      return {\n        success: true,\n        message:\n          \"Password reset successfully. You can now sign in with your new password.\",\n      };\n    } catch (error) {\n      console.error(\"Confirm password reset error:\", error);\n      const errorMessage = getErrorMessage(error);\n      dispatch({ type: AUTH_ACTIONS.SET_ERROR, payload: errorMessage });\n      return { success: false, error: errorMessage };\n    }\n  };\n\n  const clearError = () => {\n    dispatch({ type: AUTH_ACTIONS.CLEAR_ERROR });\n  };\n\n  // Session warning handlers\n  const handleExtendSession = async () => {\n    sessionManager.extendSession();\n    setSessionWarning({ show: false, timeRemaining: 0 });\n  };\n\n  const handleSessionLogout = async () => {\n    setSessionWarning({ show: false, timeRemaining: 0 });\n    await logout();\n  };\n\n  const handleCloseWarning = () => {\n    setSessionWarning({ show: false, timeRemaining: 0 });\n  };\n\n  // Helper function to get user-friendly error messages\n  const getErrorMessage = (error) => {\n    if (error.name === \"NotAuthorizedException\") {\n      return \"Invalid username or password\";\n    }\n    if (error.name === \"UserNotConfirmedException\") {\n      return \"Please confirm your account before signing in\";\n    }\n    if (error.name === \"UsernameExistsException\") {\n      return \"Username already exists\";\n    }\n    if (error.name === \"CodeMismatchException\") {\n      return \"Invalid verification code\";\n    }\n    if (error.name === \"ExpiredCodeException\") {\n      return \"Verification code has expired\";\n    }\n    return error.message || \"An unexpected error occurred\";\n  };\n\n  const value = {\n    ...state,\n    login,\n    register,\n    confirmRegistration,\n    resendConfirmationCode,\n    logout,\n    forgotPassword,\n    confirmForgotPassword,\n    refreshSession,\n    clearError,\n    checkAuthState,\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n\n      {/* Session Warning Dialog */}\n      <SessionWarningDialog\n        open={sessionWarning.show}\n        timeRemaining={sessionWarning.timeRemaining}\n        onExtend={handleExtendSession}\n        onLogout={handleSessionLogout}\n        onClose={handleCloseWarning}\n      />\n    </AuthContext.Provider>\n  );\n}\n\n// Hook to use auth context with safe fallback\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === null) {\n    // In production, this might be called before provider is ready\n    console.warn(\"useAuth called outside AuthProvider - using defaults\");\n    return defaultContextValue;\n  }\n  if (context === undefined) {\n    throw new Error(\"useAuth must be used within an AuthProvider\");\n  }\n  return context;\n}\n\n// Export AuthContext for advanced usage\nexport { AuthContext };\n\n// Make AuthProvider the default export for Fast Refresh compatibility\nexport default AuthProvider;\n","import { useEffect } from \"react\";\n\n/**\n * Custom hook to set document title for accessibility and SEO\n * @param {string} title - The page title\n * @param {string} suffix - Optional suffix (defaults to \"Financial Dashboard\")\n */\nexport const useDocumentTitle = (title, suffix = \"Financial Dashboard\") => {\n  useEffect(() => {\n    const previousTitle = document.title;\n\n    if (title) {\n      document.title = `${title} | ${suffix}`;\n    }\n\n    // Cleanup function to restore previous title or default\n    return () => {\n      // Ensure we always have a valid title, fallback to the suffix if previous title is empty\n      document.title =\n        previousTitle && previousTitle.trim() ? previousTitle : suffix;\n    };\n  }, [title, suffix]);\n};\n\nexport default useDocumentTitle;\n","\"use strict\";\n'use client';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function () {\n    return _utils.createSvgIcon;\n  }\n});\nvar _utils = require(\"@mui/material/utils\");","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z\"\n}), 'Delete');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z\"\n}), 'Edit');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z\"\n}), 'Add');","import React, { useState, useEffect } from 'react';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  TextField,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  IconButton,\n  Box,\n  Alert,\n  Select,\n  MenuItem,\n  FormControl,\n  InputLabel,\n} from '@mui/material';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport EditIcon from '@mui/icons-material/Edit';\nimport AddIcon from '@mui/icons-material/Add';\n\nconst BROKERS = [\n  'Interactive Brokers',\n  'Fidelity',\n  'Charles Schwab',\n  'E*TRADE',\n  'TD Ameritrade',\n  'Webull',\n  'Robinhood',\n  'Other',\n];\n\nexport default function ManualPositionsDialog() {\n  const [open, setOpen] = useState(false);\n  const [positions, setPositions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [isFormOpen, setIsFormOpen] = useState(false);\n  const [editingId, setEditingId] = useState(null);\n  const [formData, setFormData] = useState({\n    symbol: '',\n    quantity: '',\n    average_cost: '',\n    current_price: '',\n    broker: '',\n    broker_account_id: '',\n    purchase_date: '',\n    notes: '',\n  });\n\n  // Fetch manual positions on mount\n  useEffect(() => {\n    if (open) {\n      fetchPositions();\n    }\n  }, [open]);\n\n  const fetchPositions = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await fetch('/api/portfolio/manual-positions');\n      const data = await response.json();\n      if (data.success) {\n        // Handle different response structures\n        const positionsData = data.data || [];\n        setPositions(Array.isArray(positionsData) ? positionsData : []);\n      } else {\n        setError(data.error || 'Failed to fetch positions');\n      }\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddPosition = () => {\n    setEditingId(null);\n    setFormData({\n      symbol: '',\n      quantity: '',\n      average_cost: '',\n      current_price: '',\n      broker: '',\n      broker_account_id: '',\n      purchase_date: '',\n      notes: '',\n    });\n    setIsFormOpen(true);\n  };\n\n  const handleEditPosition = (position) => {\n    setEditingId(position.id);\n    setFormData({\n      symbol: position.symbol,\n      quantity: position.quantity.toString(),\n      average_cost: position.average_cost.toString(),\n      current_price: position.current_price ? position.current_price.toString() : '',\n      broker: position.broker || '',\n      broker_account_id: position.broker_account_id || '',\n      purchase_date: position.purchase_date ? position.purchase_date.split('T')[0] : '',\n      notes: position.notes || '',\n    });\n    setIsFormOpen(true);\n  };\n\n  const handleDeletePosition = async (id) => {\n    if (window.confirm('Are you sure you want to delete this position?')) {\n      try {\n        const response = await fetch(`/api/portfolio/manual-positions/${id}`, {\n          method: 'DELETE',\n        });\n        const data = await response.json();\n        if (data.success) {\n          setPositions(positions.filter(p => p.id !== id));\n          setError(null);\n        } else {\n          setError(data.error || 'Failed to delete position');\n        }\n      } catch (err) {\n        setError(err.message);\n      }\n    }\n  };\n\n  const handleSavePosition = async () => {\n    setError(null);\n    try {\n      const url = editingId\n        ? `/api/portfolio/manual-positions/${editingId}`\n        : '/api/portfolio/manual-positions';\n      const method = editingId ? 'PATCH' : 'POST';\n\n      const payload = {\n        ...formData,\n        quantity: parseFloat(formData.quantity),\n        average_cost: parseFloat(formData.average_cost),\n        current_price: formData.current_price ? parseFloat(formData.current_price) : null,\n      };\n\n      const response = await fetch(url, {\n        method,\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      });\n\n      const data = await response.json();\n      if (data.success) {\n        setIsFormOpen(false);\n        fetchPositions();\n      } else {\n        setError(data.error || 'Failed to save position');\n      }\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  const handleFormChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n  };\n\n  const calculateMetrics = (position) => {\n    const costBasis = position.quantity * position.average_cost;\n    const marketValue = position.quantity * (position.current_price || position.average_cost);\n    const unrealizedGain = marketValue - costBasis;\n    const unrealizedGainPct = costBasis > 0 ? (unrealizedGain / costBasis) * 100 : 0;\n    return { costBasis, marketValue, unrealizedGain, unrealizedGainPct };\n  };\n\n  return (\n    <>\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        startIcon={<AddIcon />}\n        onClick={() => setOpen(true)}\n        sx={{ mb: 2 }}\n      >\n        Manage Manual Positions\n      </Button>\n\n      <Dialog open={open} onClose={() => setOpen(false)} maxWidth=\"lg\" fullWidth>\n        <DialogTitle>Manual Positions Management</DialogTitle>\n        <DialogContent>\n          {error && (\n            <Alert severity=\"error\" sx={{ mb: 2 }}>\n              {error}\n            </Alert>\n          )}\n\n          {isFormOpen ? (\n            <Box sx={{ mt: 2, display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 2 }}>\n              <TextField\n                label=\"Symbol\"\n                name=\"symbol\"\n                value={formData.symbol}\n                onChange={handleFormChange}\n                placeholder=\"e.g., AAPL\"\n                required\n              />\n              <TextField\n                label=\"Quantity\"\n                name=\"quantity\"\n                type=\"number\"\n                value={formData.quantity}\n                onChange={handleFormChange}\n                inputProps={{ step: '0.001' }}\n                required\n              />\n              <TextField\n                label=\"Average Cost\"\n                name=\"average_cost\"\n                type=\"number\"\n                value={formData.average_cost}\n                onChange={handleFormChange}\n                inputProps={{ step: '0.01' }}\n                required\n              />\n              <TextField\n                label=\"Current Price\"\n                name=\"current_price\"\n                type=\"number\"\n                value={formData.current_price}\n                onChange={handleFormChange}\n                inputProps={{ step: '0.01' }}\n              />\n              <FormControl fullWidth>\n                <InputLabel>Broker</InputLabel>\n                <Select\n                  name=\"broker\"\n                  value={formData.broker}\n                  onChange={handleFormChange}\n                  label=\"Broker\"\n                >\n                  {BROKERS.map(broker => (\n                    <MenuItem key={broker} value={broker}>{broker}</MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n              <TextField\n                label=\"Broker Account ID\"\n                name=\"broker_account_id\"\n                value={formData.broker_account_id}\n                onChange={handleFormChange}\n              />\n              <TextField\n                label=\"Purchase Date\"\n                name=\"purchase_date\"\n                type=\"date\"\n                value={formData.purchase_date}\n                onChange={handleFormChange}\n                InputLabelProps={{ shrink: true }}\n              />\n              <TextField\n                label=\"Notes\"\n                name=\"notes\"\n                value={formData.notes}\n                onChange={handleFormChange}\n                multiline\n                rows={2}\n                sx={{ gridColumn: '1 / -1' }}\n              />\n              <Box sx={{ gridColumn: '1 / -1', display: 'flex', gap: 1, justifyContent: 'flex-end' }}>\n                <Button onClick={() => setIsFormOpen(false)}>Cancel</Button>\n                <Button\n                  onClick={handleSavePosition}\n                  variant=\"contained\"\n                  color=\"primary\"\n                >\n                  {editingId ? 'Update' : 'Add'} Position\n                </Button>\n              </Box>\n            </Box>\n          ) : (\n            <>\n              <Button\n                variant=\"contained\"\n                startIcon={<AddIcon />}\n                onClick={handleAddPosition}\n                sx={{ mb: 2 }}\n              >\n                Add Position\n              </Button>\n\n              {loading ? (\n                <p>Loading positions...</p>\n              ) : positions.length === 0 ? (\n                <Alert severity=\"info\">No manual positions added yet.</Alert>\n              ) : (\n                <TableContainer component={Paper}>\n                  <Table size=\"small\">\n                    <TableHead>\n                      <TableRow sx={{ backgroundColor: '#f5f5f5' }}>\n                        <TableCell>Symbol</TableCell>\n                        <TableCell align=\"right\">Quantity</TableCell>\n                        <TableCell align=\"right\">Avg Cost</TableCell>\n                        <TableCell align=\"right\">Current Price</TableCell>\n                        <TableCell align=\"right\">Market Value</TableCell>\n                        <TableCell align=\"right\">Gain/Loss</TableCell>\n                        <TableCell align=\"right\">Gain/Loss %</TableCell>\n                        <TableCell align=\"center\">Broker</TableCell>\n                        <TableCell align=\"center\">Actions</TableCell>\n                      </TableRow>\n                    </TableHead>\n                    <TableBody>\n                      {positions.map(position => {\n                        const metrics = calculateMetrics(position);\n                        return (\n                          <TableRow key={position.id}>\n                            <TableCell><strong>{position.symbol}</strong></TableCell>\n                            <TableCell align=\"right\">{position.quantity.toFixed(4)}</TableCell>\n                            <TableCell align=\"right\">${position.average_cost.toFixed(2)}</TableCell>\n                            <TableCell align=\"right\">\n                              ${(position.current_price || position.average_cost).toFixed(2)}\n                            </TableCell>\n                            <TableCell align=\"right\">\n                              ${metrics.marketValue.toFixed(2)}\n                            </TableCell>\n                            <TableCell\n                              align=\"right\"\n                              sx={{\n                                color: metrics.unrealizedGain >= 0 ? 'green' : 'red',\n                                fontWeight: 'bold',\n                              }}\n                            >\n                              ${metrics.unrealizedGain.toFixed(2)}\n                            </TableCell>\n                            <TableCell\n                              align=\"right\"\n                              sx={{\n                                color: metrics.unrealizedGainPct >= 0 ? 'green' : 'red',\n                                fontWeight: 'bold',\n                              }}\n                            >\n                              {metrics.unrealizedGainPct.toFixed(2)}%\n                            </TableCell>\n                            <TableCell align=\"center\">{position.broker || ''}</TableCell>\n                            <TableCell align=\"center\">\n                              <IconButton\n                                size=\"small\"\n                                onClick={() => handleEditPosition(position)}\n                                title=\"Edit\"\n                              >\n                                <EditIcon fontSize=\"small\" />\n                              </IconButton>\n                              <IconButton\n                                size=\"small\"\n                                color=\"error\"\n                                onClick={() => handleDeletePosition(position.id)}\n                                title=\"Delete\"\n                              >\n                                <DeleteIcon fontSize=\"small\" />\n                              </IconButton>\n                            </TableCell>\n                          </TableRow>\n                        );\n                      })}\n                    </TableBody>\n                  </Table>\n                </TableContainer>\n              )}\n            </>\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setOpen(false)}>Close</Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  TextField,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  IconButton,\n  Box,\n  Alert,\n  Select,\n  MenuItem,\n  FormControl,\n  InputLabel,\n} from '@mui/material';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport EditIcon from '@mui/icons-material/Edit';\nimport AddIcon from '@mui/icons-material/Add';\n\nconst TRADE_TYPES = ['buy', 'sell'];\nconst STATUSES = ['filled', 'pending', 'cancelled'];\n\nexport default function ManualTradesDialog() {\n  const [open, setOpen] = useState(false);\n  const [trades, setTrades] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [isFormOpen, setIsFormOpen] = useState(false);\n  const [editingId, setEditingId] = useState(null);\n  const [formData, setFormData] = useState({\n    symbol: '',\n    trade_type: 'buy',\n    quantity: '',\n    price: '',\n    execution_date: '',\n    status: 'filled',\n  });\n\n  // Fetch manual trades on mount\n  useEffect(() => {\n    if (open) {\n      fetchTrades();\n    }\n  }, [open]);\n\n  const fetchTrades = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await fetch('/api/trades/manual');\n      const data = await response.json();\n      if (data.success) {\n        // Handle different response structures\n        const tradesData = data.data || [];\n        setTrades(Array.isArray(tradesData) ? tradesData : []);\n      } else {\n        setError(data.error || 'Failed to fetch trades');\n      }\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddTrade = () => {\n    setEditingId(null);\n    setFormData({\n      symbol: '',\n      trade_type: 'buy',\n      quantity: '',\n      price: '',\n      execution_date: new Date().toISOString().split('T')[0],\n      status: 'filled',\n    });\n    setIsFormOpen(true);\n  };\n\n  const handleEditTrade = (trade) => {\n    setEditingId(trade.id);\n    setFormData({\n      symbol: trade.symbol,\n      trade_type: trade.trade_type,\n      quantity: trade.quantity.toString(),\n      price: trade.price.toString(),\n      execution_date: trade.execution_date.split('T')[0],\n      status: trade.status,\n    });\n    setIsFormOpen(true);\n  };\n\n  const handleDeleteTrade = async (id) => {\n    if (window.confirm('Are you sure you want to delete this trade?')) {\n      try {\n        const response = await fetch(`/api/trades/manual/${id}`, {\n          method: 'DELETE',\n        });\n        const data = await response.json();\n        if (data.success) {\n          setTrades(trades.filter(t => t.id !== id));\n          setError(null);\n        } else {\n          setError(data.error || 'Failed to delete trade');\n        }\n      } catch (err) {\n        setError(err.message);\n      }\n    }\n  };\n\n  const handleSaveTrade = async () => {\n    setError(null);\n    try {\n      const url = editingId\n        ? `/api/trades/manual/${editingId}`\n        : '/api/trades/manual';\n      const method = editingId ? 'PATCH' : 'POST';\n\n      const payload = {\n        ...formData,\n        quantity: parseFloat(formData.quantity),\n        price: parseFloat(formData.price),\n      };\n\n      const response = await fetch(url, {\n        method,\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      });\n\n      const data = await response.json();\n      if (data.success) {\n        setIsFormOpen(false);\n        fetchTrades();\n      } else {\n        setError(data.error || 'Failed to save trade');\n      }\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  const handleFormChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n  };\n\n  const calculateTradeValue = (quantity, price) => {\n    return quantity * price;\n  };\n\n  return (\n    <>\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        startIcon={<AddIcon />}\n        onClick={() => setOpen(true)}\n        sx={{ mb: 2, ml: 1 }}\n      >\n        Record Manual Trade\n      </Button>\n\n      <Dialog open={open} onClose={() => setOpen(false)} maxWidth=\"lg\" fullWidth>\n        <DialogTitle>Manual Trade Entry</DialogTitle>\n        <DialogContent>\n          {error && (\n            <Alert severity=\"error\" sx={{ mb: 2 }}>\n              {error}\n            </Alert>\n          )}\n\n          {isFormOpen ? (\n            <Box sx={{ mt: 2, display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 2 }}>\n              <TextField\n                label=\"Symbol\"\n                name=\"symbol\"\n                value={formData.symbol}\n                onChange={handleFormChange}\n                placeholder=\"e.g., TSLA\"\n                required\n              />\n              <FormControl fullWidth required>\n                <InputLabel>Trade Type</InputLabel>\n                <Select\n                  name=\"trade_type\"\n                  value={formData.trade_type}\n                  onChange={handleFormChange}\n                  label=\"Trade Type\"\n                >\n                  {TRADE_TYPES.map(type => (\n                    <MenuItem key={type} value={type}>{type.toUpperCase()}</MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n              <TextField\n                label=\"Quantity\"\n                name=\"quantity\"\n                type=\"number\"\n                value={formData.quantity}\n                onChange={handleFormChange}\n                inputProps={{ step: '0.001' }}\n                required\n              />\n              <TextField\n                label=\"Price\"\n                name=\"price\"\n                type=\"number\"\n                value={formData.price}\n                onChange={handleFormChange}\n                inputProps={{ step: '0.01' }}\n                required\n              />\n              <TextField\n                label=\"Execution Date\"\n                name=\"execution_date\"\n                type=\"date\"\n                value={formData.execution_date}\n                onChange={handleFormChange}\n                InputLabelProps={{ shrink: true }}\n                required\n              />\n              <FormControl fullWidth>\n                <InputLabel>Status</InputLabel>\n                <Select\n                  name=\"status\"\n                  value={formData.status}\n                  onChange={handleFormChange}\n                  label=\"Status\"\n                >\n                  {STATUSES.map(status => (\n                    <MenuItem key={status} value={status}>{status.toUpperCase()}</MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n              <Box sx={{ gridColumn: '1 / -1', display: 'flex', gap: 1, justifyContent: 'flex-end' }}>\n                <Button onClick={() => setIsFormOpen(false)}>Cancel</Button>\n                <Button\n                  onClick={handleSaveTrade}\n                  variant=\"contained\"\n                  color=\"primary\"\n                >\n                  {editingId ? 'Update' : 'Add'} Trade\n                </Button>\n              </Box>\n            </Box>\n          ) : (\n            <>\n              <Button\n                variant=\"contained\"\n                startIcon={<AddIcon />}\n                onClick={handleAddTrade}\n                sx={{ mb: 2 }}\n              >\n                Add Trade\n              </Button>\n\n              {loading ? (\n                <p>Loading trades...</p>\n              ) : trades.length === 0 ? (\n                <Alert severity=\"info\">No manual trades recorded yet.</Alert>\n              ) : (\n                <TableContainer component={Paper}>\n                  <Table size=\"small\">\n                    <TableHead>\n                      <TableRow sx={{ backgroundColor: '#f5f5f5' }}>\n                        <TableCell>Date</TableCell>\n                        <TableCell>Symbol</TableCell>\n                        <TableCell>Type</TableCell>\n                        <TableCell align=\"right\">Qty</TableCell>\n                        <TableCell align=\"right\">Price</TableCell>\n                        <TableCell align=\"right\">Total Value</TableCell>\n                        <TableCell>Status</TableCell>\n                        <TableCell align=\"center\">Actions</TableCell>\n                      </TableRow>\n                    </TableHead>\n                    <TableBody>\n                      {trades.map(trade => {\n                        const quantity = parseFloat(trade.quantity);\n                        const price = parseFloat(trade.price);\n                        const totalValue = calculateTradeValue(quantity, price);\n                        return (\n                          <TableRow key={trade.id}>\n                            <TableCell>{trade.execution_date}</TableCell>\n                            <TableCell><strong>{trade.symbol}</strong></TableCell>\n                            <TableCell>{trade.trade_type.toUpperCase()}</TableCell>\n                            <TableCell align=\"right\">{quantity.toFixed(4)}</TableCell>\n                            <TableCell align=\"right\">${price.toFixed(2)}</TableCell>\n                            <TableCell align=\"right\">${totalValue.toFixed(2)}</TableCell>\n                            <TableCell>{trade.status}</TableCell>\n                            <TableCell align=\"center\">\n                              <IconButton\n                                size=\"small\"\n                                onClick={() => handleEditTrade(trade)}\n                                title=\"Edit\"\n                              >\n                                <EditIcon fontSize=\"small\" />\n                              </IconButton>\n                              <IconButton\n                                size=\"small\"\n                                color=\"error\"\n                                onClick={() => handleDeleteTrade(trade.id)}\n                                title=\"Delete\"\n                              >\n                                <DeleteIcon fontSize=\"small\" />\n                              </IconButton>\n                            </TableCell>\n                          </TableRow>\n                        );\n                      })}\n                    </TableBody>\n                  </Table>\n                </TableContainer>\n              )}\n            </>\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setOpen(false)}>Close</Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n}\n","import { useMemo, useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { useDocumentTitle } from \"../hooks/useDocumentTitle\";\nimport {\n  Box,\n  Button,\n  Card,\n  CardContent,\n  CardHeader,\n  CircularProgress,\n  Container,\n  Grid,\n  Typography,\n  useTheme,\n  useMediaQuery,\n} from \"@mui/material\";\nimport {\n  LineChart,\n  Line,\n  AreaChart,\n  Area,\n  BarChart,\n  Bar,\n  PieChart,\n  Pie,\n  Cell,\n  ResponsiveContainer,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip as RechartsTooltip,\n  Legend,\n  ComposedChart,\n  ScatterChart,\n  Scatter,\n  RadarChart,\n  PolarGrid,\n  PolarAngleAxis,\n  PolarRadiusAxis,\n  Radar,\n} from \"recharts\";\nimport {\n  TrendingUp,\n  TrendingDown,\n  ShowChart,\n  Assessment,\n  AccountBalance,\n  Warning,\n  CheckCircle,\n  Info,\n  Refresh,\n  ArrowUpward,\n  ArrowDownward,\n} from \"@mui/icons-material\";\nimport {\n  getPortfolioData,\n} from \"../services/api\";\nimport ManualPositionsDialog from \"../components/ManualPositionsDialog\";\nimport ManualTradesDialog from \"../components/ManualTradesDialog\";\n\n// ============ STAT CARD COMPONENT ============\nconst StatCard = ({ icon: Icon, label, value, unit = \"\", color = \"primary\", interpretation = \"\" }) => {\n  const theme = useTheme();\n\n  return (\n    <Card\n      sx={{\n        height: \"100%\",\n        background: theme.palette.mode === \"dark\"\n          ? `linear-gradient(135deg, ${theme.palette.background.paper} 0%, ${theme.palette.background.default} 100%)`\n          : `linear-gradient(135deg, #ffffff 0%, ${theme.palette.grey[50]} 100%)`,\n        borderLeft: `4px solid ${theme.palette[color]?.main || theme.palette.primary.main}`,\n        boxShadow: theme.palette.mode === \"dark\" ? \"0 2px 8px rgba(0,0,0,0.3)\" : \"0 2px 4px rgba(0,0,0,0.05)\",\n        transition: \"all 0.3s ease\",\n        \"&:hover\": {\n          boxShadow: theme.palette.mode === \"dark\" ? \"0 4px 12px rgba(0,0,0,0.4)\" : \"0 4px 8px rgba(0,0,0,0.1)\",\n          transform: \"translateY(-2px)\",\n        },\n      }}\n    >\n      <CardContent>\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"flex-start\" mb={1}>\n          <Icon sx={{ color: `${theme.palette[color]?.main || theme.palette.primary.main}`, fontSize: 28 }} />\n        </Box>\n        <Typography variant=\"h4\" sx={{ fontWeight: 700, mb: 0.5 }}>\n          {value}\n          {unit && <span style={{ fontSize: \"0.6em\", marginLeft: \"4px\" }}>{unit}</span>}\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 1 }}>\n          {label}\n        </Typography>\n        {interpretation && (\n          <Typography variant=\"caption\" sx={{ color: theme.palette.text.secondary, display: \"block\", fontStyle: \"italic\" }}>\n            {interpretation}\n          </Typography>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\n// ============ SANITIZATION HELPERS ============\n// Filter out unreasonable metric values that indicate data issues\nconst isSaneMetricValue = (value) => {\n  if (value === null || value === undefined) return true;\n  // Unreasonably high returns (>10000%) indicate calculation errors\n  if (Math.abs(value) > 10000) return false;\n  return true;\n};\n\nconst sanitizeMetricValue = (value, unit = \"%\") => {\n  if (value === null || value === undefined) return \"N/A\";\n  if (!isSaneMetricValue(value)) return \"N/A\";\n  return value;\n};\n\n// ============ METRIC BOX COMPONENT ============\nconst MetricBox = ({ label, value, unit = \"\" }) => {\n  const theme = useTheme();\n  return (\n    <Box sx={{ p: 2, backgroundColor: theme.palette.background.default, borderRadius: 1 }}>\n      <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: \"block\", mb: 0.5 }}>\n        {label}\n      </Typography>\n      <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\n        {value}\n        {unit && <span style={{ fontSize: \"0.7em\", marginLeft: \"4px\" }}>{unit}</span>}\n      </Typography>\n    </Box>\n  );\n};\n\n// ============ MAIN PORTFOLIO DASHBOARD ============\nexport default function PortfolioDashboard() {\n  useDocumentTitle(\"Portfolio Dashboard\");\n  const { user } = useAuth();\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down(\"md\"));\n\n  // Fetch comprehensive portfolio data from CONSOLIDATED endpoint\n  // Returns: account, holdings, metrics (performance, risk, allocation, analysis), charts\n  const { data: portfolioData, isLoading: isLoading, refetch: refetchPortfolio } = useQuery({\n    queryKey: [\"portfolioData\"],\n    queryFn: () => getPortfolioData(),\n    staleTime: 60000,\n  });\n\n  // Map portfolio response to expected data structure\n  // ENDPOINT FORMAT: { summary, positions, daily_returns, metadata }\n  const summary = portfolioData?.data?.summary || {};\n  const positions = portfolioData?.data?.positions || [];\n  const dailyReturns = portfolioData?.data?.daily_returns || [];\n  const metadata = portfolioData?.data?.metadata || {};\n\n  // Diagnostic logging for metrics flow\n  console.log(' Portfolio Summary Data:', {\n    portfolio_value: summary.portfolio_value,\n    total_pnl: summary.total_pnl,\n    total_return: summary.total_return,\n    return_1m: summary.return_1m,\n    return_1y: summary.return_1y,\n    volatility: summary.volatility_annualized,\n    sharpe_ratio: summary.sharpe_ratio,\n    holdings_count: summary.holdings_count\n  });\n  console.log(' Positions:', positions.length, 'holdings');\n\n  // Wrap in metricsData structure for consistency with rest of component\n  const metricsData = {\n    data: {\n      summary: {\n        // Portfolio value metrics\n        portfolio_value: summary.portfolio_value,\n        total_cost: summary.total_cost,\n        total_pnl: summary.total_pnl || null,\n        total_pnl_percent: summary.total_pnl_percent || null,\n        total_return: summary.total_return || null,\n        holdings_count: summary.holdings_count || 0,\n\n        // Risk metrics\n        volatility_annualized: summary.volatility_annualized,\n        sharpe_ratio: summary.sharpe_ratio,\n        sortino_ratio: summary.sortino_ratio,\n        calmar_ratio: summary.calmar_ratio,\n        max_drawdown: summary.max_drawdown,\n        beta: summary.beta,\n\n        // Return periods\n        return_1m: summary.return_1m,\n        return_3m: summary.return_3m,\n        return_6m: summary.return_6m,\n        return_1y: summary.return_1y,\n        return_3y: summary.return_3y,\n        return_rolling_1y: summary.return_rolling_1y,\n        ytd_return: summary.ytd_return,\n\n        // Daily performance\n        win_rate: summary.win_rate,\n        best_day_gain: summary.best_day_gain,\n        worst_day_loss: summary.worst_day_loss,\n        avg_daily_return: summary.avg_daily_return,\n\n        // Concentration\n        herfindahl_index: summary.herfindahl_index,\n        effective_n: summary.effective_n,\n        diversification_ratio: summary.diversification_ratio,\n        top_1_weight: summary.top_1_weight,\n        top_5_weight: summary.top_5_weight,\n        top_10_weight: summary.top_10_weight,\n      },\n      positions: positions,\n      daily_returns: dailyReturns,\n      benchmark_metrics: summary,\n      metadata: metadata\n    }\n  };\n\n  const metricsLoading = isLoading;\n  const refetchMetrics = refetchPortfolio;\n\n  // Alpaca sync state\n  const [isSyncing, setIsSyncing] = useState(false);\n  const [syncStatus, setSyncStatus] = useState(null);\n\n\n  // Handle unified portfolio sync (Alpaca + Manual + Trades)\n  const handleAlpacaSync = async () => {\n    setIsSyncing(true);\n    setSyncStatus(null);\n    try {\n      // First import from Alpaca\n      console.log(\" Step 1: Importing from Alpaca...\");\n      const alpacaResponse = await fetch(\"/api/portfolio/import/alpaca\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": \"Bearer dev-bypass-token\"\n        },\n      });\n\n      const alpacaResult = await alpacaResponse.json();\n      console.log(\" Alpaca import complete:\", alpacaResult);\n\n      // Then consolidate all data sources (Alpaca + Manual + Trades)\n      console.log(\" Step 2: Consolidating from all sources...\");\n      const consolidateResponse = await fetch(\"/api/portfolio/sync\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": \"Bearer dev-bypass-token\"\n        },\n      });\n\n      const consolidateResult = await consolidateResponse.json();\n      console.log(\" Portfolio consolidated:\", consolidateResult);\n\n      if (consolidateResult.success) {\n        const { consolidated_holdings, total_value, sources_synced } = consolidateResult.data;\n        const message = ` Portfolio synced! ${consolidated_holdings} holdings from Alpaca (${sources_synced.alpaca_positions}), Manual (${sources_synced.manual_positions}), and Trades (${sources_synced.from_trades}) | Total Value: $${total_value.toLocaleString()}`;\n        setSyncStatus({ type: \"success\", message });\n        // Refetch all queries to show updated data\n        refetchMetrics();\n      } else {\n        setSyncStatus({ type: \"error\", message: ` Sync failed: ${consolidateResult.error}` });\n      }\n    } catch (error) {\n      setSyncStatus({ type: \"error\", message: ` Sync error: ${error.message}` });\n    } finally {\n      setIsSyncing(false);\n    }\n  };\n\n  // Signals (if available)\n  const signals = portfolioData?.data?.signals || [];\n  const performanceChartData = useMemo(() => {\n    return metricsData?.data?.daily_returns?.slice(-252).map((val, idx) => ({\n      date: idx,\n      return: val,\n      cumulative: val,\n    })) || [];\n  }, [metricsData]);\n\n  // Compute sector data from positions\n  const sectorData = useMemo(() => {\n    if (!positions || positions.length === 0) {\n      return [];\n    }\n\n    const sectorMap = {};\n    let totalValue = 0;\n\n    // Aggregate positions by sector\n    positions.forEach((pos) => {\n      const sector = pos.sector || 'Other';\n      const value = pos.market_value_dollars != null ? Math.abs(pos.market_value_dollars) : null;\n      const return_pct = pos.return_percent != null ? pos.return_percent : null;\n\n      if (!sectorMap[sector]) {\n        sectorMap[sector] = { weight: 0, return: 0, count: 0 };\n      }\n      // Only accumulate if values are not null (per RULES.md - no fake data)\n      if (value != null) {\n        sectorMap[sector].weight += value;\n        totalValue += value;\n      }\n      if (return_pct != null) {\n        sectorMap[sector].return += return_pct;\n        sectorMap[sector].count += 1;\n      } else {\n        sectorMap[sector].count += 1; // Still count the position even if return is missing\n      }\n    });\n\n    // Convert to chart data\n    return Object.entries(sectorMap)\n      .map(([sector, data]) => ({\n        sector,\n        weight: totalValue > 0 ? (data.weight / totalValue) * 100 : 0,\n        return: data.count > 0 ? data.return / data.count : 0,\n      }))\n      .sort((a, b) => b.weight - a.weight);\n  }, [positions]);\n\n  // Extract SPY benchmark metrics from real performance data\n  const benchmarkData = useMemo(() => {\n    const metrics = metricsData?.data?.benchmark_metrics;\n    if (!metrics) {\n      return { return: null, risk: null };\n    }\n    return {\n      // Use annual return (1Y) as primary, fallback to shorter periods\n      return: metrics.return_1y || metrics.return_6m || metrics.return_3m || metrics.return_1m || null,\n      risk: metrics.volatility || null,\n      volatility: metrics.volatility,\n      sharpeRatio: metrics.sharpe_ratio,\n      alpha: metrics.alpha,\n      outperformance: metrics.outperformance,\n      correlation: metrics.correlation_with_spy,\n    };\n  }, [metricsData]);\n\n  // ============ MAIN RENDER ============\n  if (metricsLoading) {\n    return (\n      <Container maxWidth=\"lg\" sx={{ py: 4 }}>\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"400px\">\n          <CircularProgress />\n        </Box>\n      </Container>\n    );\n  }\n\n  const hasData = (Object.values(summary).some(v => v !== 0 && v !== undefined)) || (positions && positions.length > 0);\n\n  return (\n    <Container maxWidth=\"lg\" sx={{ py: 4 }}>\n      {/* Header */}\n      <Box sx={{ mb: 4 }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', mb: 2 }}>\n          <Box>\n            <Typography variant=\"h4\" sx={{ fontWeight: 700, mb: 1 }}>\n              Portfolio Dashboard\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Professional-grade portfolio analytics - All metrics on one page\n            </Typography>\n          </Box>\n          <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap', justifyContent: 'flex-end' }}>\n            <Button\n              variant=\"contained\"\n              startIcon={<Refresh />}\n              onClick={handleAlpacaSync}\n              disabled={isSyncing}\n              sx={{\n                backgroundColor: (theme) => theme.palette.primary.main,\n                '&:hover': { backgroundColor: (theme) => theme.palette.primary.dark },\n                '&:disabled': { opacity: 0.6 }\n              }}\n            >\n              {isSyncing ? 'Syncing...' : 'Sync with Alpaca'}\n            </Button>\n            <ManualPositionsDialog />\n            <ManualTradesDialog />\n          </Box>\n        </Box>\n\n        {/* Sync Status Message */}\n        {syncStatus && (\n          <Card sx={{\n            p: 2,\n            mb: 2,\n            backgroundColor: syncStatus.type === 'success'\n              ? (theme) => theme.palette.success.light\n              : (theme) => theme.palette.error.light,\n            border: `1px solid ${syncStatus.type === 'success' ? '#4caf50' : '#f44336'}`\n          }}>\n            <Typography variant=\"body2\" sx={{ color: syncStatus.type === 'success' ? '#2e7d32' : '#c62828' }}>\n              {syncStatus.message}\n            </Typography>\n          </Card>\n        )}\n      </Box>\n\n      {/* No Data State */}\n      {!hasData && (\n        <Card sx={{ p: 4, mb: 4 }}>\n          <Typography align=\"center\" color=\"text.secondary\">\n            No portfolio data available. Add holdings to see comprehensive metrics.\n          </Typography>\n        </Card>\n      )}\n\n      {hasData && (\n        <>\n          {/* ============ SECTION 1: EXECUTIVE SUMMARY & TOP HOLDINGS ============ */}\n          <Box sx={{ mb: 4 }}>\n            <Typography variant=\"h5\" sx={{ fontWeight: 700, mb: 3, display: 'flex', alignItems: 'center', gap: 1 }}>\n              <Assessment sx={{ color: 'primary.main' }} /> Executive Summary & Top Holdings\n            </Typography>\n\n            {/* KPI Cards - Show only metrics with real data */}\n            <Grid container spacing={3} sx={{ mb: 4 }}>\n              {/* Portfolio Value - Real data from Alpaca */}\n              <Grid item xs={12} sm={6} md={3}>\n                <StatCard\n                  icon={TrendingUp}\n                  label=\"Portfolio Value\"\n                  value={summary.portfolio_value != null ? `$${summary.portfolio_value.toLocaleString(undefined, {maximumFractionDigits: 2})}` : \"N/A\"}\n                  unit=\"\"\n                  color=\"success\"\n                />\n              </Grid>\n\n              {/* Total P&L - Real data from calculations */}\n              <Grid item xs={12} sm={6} md={3}>\n                <StatCard\n                  icon={Assessment}\n                  label=\"Total P&L\"\n                  value={summary.total_pnl != null ? `$${summary.total_pnl.toLocaleString(undefined, {maximumFractionDigits: 2})}` : \"N/A\"}\n                  unit=\"\"\n                  color={summary.total_pnl >= 0 ? \"success\" : \"error\"}\n                />\n              </Grid>\n\n              {/* P&L % - Real data (return %) */}\n              <Grid item xs={12} sm={6} md={3}>\n                <StatCard\n                  icon={ShowChart}\n                  label=\"Return %\"\n                  value={summary.total_pnl_percent != null ? summary.total_pnl_percent.toFixed(2) : \"N/A\"}\n                  unit=\"%\"\n                  color={summary.total_pnl_percent >= 0 ? \"success\" : \"error\"}\n                />\n              </Grid>\n\n              {/* Holdings Count - Real data (position count) */}\n              <Grid item xs={12} sm={6} md={3}>\n                <StatCard\n                  icon={Warning}\n                  label=\"Holdings\"\n                  value={summary.holdings_count != null ? summary.holdings_count : \"N/A\"}\n                  unit=\"positions\"\n                  color=\"info\"\n                />\n              </Grid>\n            </Grid>\n\n            {/* All Holdings Pie Chart */}\n            <Card sx={{ mb: 4 }}>\n              <CardHeader title=\"Portfolio Holdings Distribution (All Positions)\" />\n              <CardContent>\n                <ResponsiveContainer width=\"100%\" height={400}>\n                  <PieChart>\n                    <Pie\n                      data={positions\n                        .filter(p => p.weight_percent !== null && p.weight_percent !== undefined && parseFloat(p.weight_percent) > 0)\n                        .map(p => ({\n                          name: p.symbol,\n                          value: parseFloat(p.weight_percent),\n                        }))}\n                      cx=\"50%\"\n                      cy=\"50%\"\n                      labelLine={false}\n                      label={({ name, value }) => value > 1 ? `${name}: ${value.toFixed(1)}%` : name}\n                      outerRadius={110}\n                      fill=\"#8884d8\"\n                      dataKey=\"value\"\n                    >\n                      {/* Dynamic color palette for all positions */}\n                      {positions.map((p, idx) => {\n                        const colors = ['#1976d2', '#43a047', '#ffb300', '#8e24aa', '#e53935', '#00acc1', '#6a1b9a', '#0277bd', '#ef6c00', '#d32f2f', '#1e88e5', '#43a047', '#fb8c00', '#5e35b1', '#00838f'];\n                        return <Cell key={`cell-${idx}`} fill={colors[idx % colors.length]} />;\n                      })}\n                    </Pie>\n                    <RechartsTooltip formatter={(value) => `${value != null ? value.toFixed(2) : '0.00'}%`} />\n                  </PieChart>\n                </ResponsiveContainer>\n                {positions.length > 5 && (\n                  <div style={{ marginTop: 16, fontSize: '0.875rem', color: '#666' }}>\n                    <p>Showing all {positions.length} positions  Positions &lt; 1% shown by symbol only</p>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            {/* Holdings Performance & Gains/Losses */}\n            <Card sx={{ mb: 4 }}>\n              <CardHeader\n                title=\"Holdings Performance & Gains/Losses\"\n                subheader=\"Current P&L by position\"\n              />\n              <CardContent>\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <BarChart data={positions.slice(0, 15).map((pos, idx) => ({\n                    name: pos.symbol,\n                    gain: pos.gain_loss_dollars !== null && pos.gain_loss_dollars !== undefined ? parseFloat(pos.gain_loss_dollars) : null,\n                    value: pos.market_value_dollars !== null && pos.market_value_dollars !== undefined ? parseFloat(pos.market_value_dollars) : null,\n                  }))} layout=\"vertical\" margin={{ top: 5, right: 30, left: 80, bottom: 5 }}>\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis type=\"number\" />\n                    <YAxis dataKey=\"name\" type=\"category\" width={75} />\n                    <RechartsTooltip\n                      formatter={(value) => `$${value?.toFixed(2) || '0.00'}`}\n                      contentStyle={{ backgroundColor: '#fff', border: '1px solid #ccc' }}\n                    />\n                    <Legend />\n                    <Bar dataKey=\"gain\" fill=\"#43a047\" name=\"Gain/Loss ($)\" radius={[0, 8, 8, 0]} />\n                    <Bar dataKey=\"value\" fill=\"#1976d2\" name=\"Position Value ($)\" radius={[0, 8, 8, 0]} />\n                  </BarChart>\n                </ResponsiveContainer>\n              </CardContent>\n            </Card>\n          </Box>\n\n          {/* Trading Signals Section */}\n          {signals && signals.length > 0 && (\n            <Card sx={{ mb: 4 }}>\n              <CardHeader\n                title=\"Trading Signals\"\n                subheader={`Latest signal recommendations - ${signals.length} signals`}\n              />\n              <CardContent>\n                <Grid container spacing={2}>\n                  {signals.slice(0, 10).map((signal, idx) => (\n                    <Grid item xs={12} sm={6} md={4} lg={3} key={idx}>\n                      <Box sx={{\n                        p: 2,\n                        backgroundColor: (theme) => theme.palette.mode === 'dark' ? '#1e1e1e' : '#f5f5f5',\n                        borderRadius: 1,\n                        border: '1px solid',\n                        borderColor: (theme) => theme.palette.mode === 'dark' ? '#333' : '#ddd',\n                      }}>\n                        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 1 }}>\n                          <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\n                            {signal.symbol || signal.ticker}\n                          </Typography>\n                        </Box>\n                        {signal.score && (\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            Score: {(signal.score * 100).toFixed(1)}%\n                          </Typography>\n                        )}\n                        {signal.timestamp && (\n                          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'block', mt: 0.5 }}>\n                            {new Date(signal.timestamp).toLocaleDateString()}\n                          </Typography>\n                        )}\n                      </Box>\n                    </Grid>\n                  ))}\n                </Grid>\n                {signals.length === 0 && (\n                  <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\" sx={{ py: 2 }}>\n                    No trading signals available at this time.\n                  </Typography>\n                )}\n              </CardContent>\n            </Card>\n          )}\n\n          {/* ============ SECTION 2: RETURNS OVERVIEW ============ */}\n          <Box sx={{ mb: 4, mt: 6 }}>\n            <Typography variant=\"h5\" sx={{ fontWeight: 700, mb: 3, display: 'flex', alignItems: 'center', gap: 1 }}>\n              <TrendingUp sx={{ color: 'success.main' }} /> Performance Metrics & Analysis\n            </Typography>\n\n            {/* Performance Metrics KPI Cards - Core Returns */}\n            <Card sx={{ mb: 4 }}>\n              <CardHeader title=\"Core Performance Metrics\" subheader=\"Total returns across different timeframes\" />\n              <CardContent>\n                <Grid container spacing={2}>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Total Return\" value={summary.total_return != null ? summary.total_return.toFixed(2) : \"N/A\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"1Y Return\" value={summary.return_1y != null ? summary.return_1y.toFixed(2) : \"N/A\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"3Y Return\" value={summary.return_3y != null ? summary.return_3y.toFixed(2) : \"N/A\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"YTD Return\" value={summary.ytd_return != null ? summary.ytd_return.toFixed(2) : \"N/A\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Portfolio Value\" value={summary.portfolio_value != null ? `$${(summary.portfolio_value / 1000).toFixed(1)}` : \"N/A\"} unit=\"K\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Holdings Count\" value={positions.length || \"0\"} unit=\"\" /></Grid>\n                </Grid>\n              </CardContent>\n            </Card>\n\n            {/* Rolling Period Returns - Metrics + Chart Together */}\n            <Card sx={{ mb: 4 }}>\n              <CardHeader title=\"Rolling Period Returns\" subheader=\"Returns across multiple time horizons\" />\n              <CardContent>\n                {/* Metrics */}\n                <Grid container spacing={2} sx={{ mb: 3 }}>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"1M\" value={summary.return_1m != null ? summary.return_1m.toFixed(2) : \"N/A\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"3M\" value={summary.return_3m != null ? summary.return_3m.toFixed(2) : \"N/A\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"6M\" value={summary.return_6m != null ? summary.return_6m.toFixed(2) : \"N/A\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"1Y Rolling\" value={summary.return_rolling_1y != null ? summary.return_rolling_1y.toFixed(2) : \"N/A\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"YTD\" value={summary.ytd_return != null ? summary.ytd_return.toFixed(2) : \"N/A\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Daily Volatility\" value={summary.volatility_annualized != null ? (summary.volatility_annualized / Math.sqrt(252)).toFixed(3) : \"N/A\"} unit=\"%\" /></Grid>\n                </Grid>\n\n                {/* Rolling Period Chart */}\n                <ResponsiveContainer width=\"100%\" height={320}>\n                  <LineChart data={[\n                    { period: '1M', return: summary.return_1m },\n                    { period: '3M', return: summary.return_3m },\n                    { period: '6M', return: summary.return_6m },\n                    { period: '1Y', return: summary.return_rolling_1y },\n                    { period: 'YTD', return: summary.ytd_return },\n                  ]}>\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"period\" />\n                    <YAxis label={{ value: 'Return (%)', angle: -90, position: 'insideLeft' }} />\n                    <RechartsTooltip formatter={(value) => `${value?.toFixed(2)}%`} />\n                    <Legend />\n                    <Line type=\"monotone\" dataKey=\"return\" stroke=\"#1976d2\" strokeWidth={2.5} dot={{ fill: '#1976d2', r: 6 }} name=\"Period Return\" />\n                  </LineChart>\n                </ResponsiveContainer>\n              </CardContent>\n            </Card>\n\n            {/* Cumulative Performance vs Benchmark */}\n            <Card sx={{ mb: 4 }}>\n              <CardHeader\n                title=\"Cumulative Performance vs SPY\"\n                subheader=\"Portfolio growth compared to S&P 500 benchmark\"\n              />\n              <CardContent>\n                <ResponsiveContainer width=\"100%\" height={350}>\n                  <LineChart\n                    data={performanceChartData.length > 0 ? performanceChartData : [\n                      { date: 0, portfolio: 10000, spy: 10000 },\n                      { date: 252, portfolio: 12000, spy: 11500 },\n                    ]}\n                  >\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"date\" label={{ value: 'Trading Days', position: 'insideBottomRight', offset: -10 }} />\n                    <YAxis label={{ value: 'Value ($)', angle: -90, position: 'insideLeft' }} />\n                    <RechartsTooltip\n                      formatter={(value) => `$${value?.toFixed(0) || '0'}`}\n                      labelFormatter={(label) => `Day ${label}`}\n                    />\n                    <Legend />\n                    <Line\n                      type=\"monotone\"\n                      dataKey=\"portfolio\"\n                      stroke=\"#1976d2\"\n                      strokeWidth={2.5}\n                      dot={false}\n                      name=\"Portfolio\"\n                      isAnimationActive={false}\n                    />\n                    <Line\n                      type=\"monotone\"\n                      dataKey=\"spy\"\n                      stroke=\"#43a047\"\n                      strokeWidth={2}\n                      dot={false}\n                      name=\"SPY Benchmark\"\n                      strokeDasharray=\"5 5\"\n                      isAnimationActive={false}\n                    />\n                  </LineChart>\n                </ResponsiveContainer>\n              </CardContent>\n            </Card>\n\n            {/* SPY BENCHMARK COMPARISON - Metrics + Chart */}\n            <Card sx={{ mb: 4 }}>\n              <CardHeader\n                title=\"SPY Benchmark Comparison\"\n                subheader=\"How your portfolio compares to the S&P 500\"\n              />\n              <CardContent>\n                {/* Comparison Metrics */}\n                <Grid container spacing={3} sx={{ mb: 3 }}>\n                  <Grid item xs={12} sm={6} md={3}>\n                    <Box sx={{ p: 2, backgroundColor: (theme) => theme.palette.background.default, borderRadius: 1 }}>\n                      <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: \"block\", mb: 0.5 }}>\n                        Portfolio Return\n                      </Typography>\n                      <Typography variant=\"h6\" sx={{ fontWeight: 600, color: summary.total_return !== null && summary.total_return !== undefined ? (summary.total_return >= 0 ? 'success.main' : 'error.main') : 'text.secondary' }}>\n                        {summary.total_return !== null && summary.total_return !== undefined ? `${summary.total_return.toFixed(2)}%` : \"N/A\"}\n                      </Typography>\n                    </Box>\n                  </Grid>\n                  <Grid item xs={12} sm={6} md={3}>\n                    <Box sx={{ p: 2, backgroundColor: (theme) => theme.palette.background.default, borderRadius: 1 }}>\n                      <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: \"block\", mb: 0.5 }}>\n                        SPY Return\n                      </Typography>\n                      <Typography variant=\"h6\" sx={{ fontWeight: 600, color: 'info.main' }}>\n                        {benchmarkData.return !== null && benchmarkData.return !== undefined ? `${benchmarkData.return.toFixed(2)}%` : \"N/A\"}\n                      </Typography>\n                    </Box>\n                  </Grid>\n                  <Grid item xs={12} sm={6} md={3}>\n                    <Box sx={{ p: 2, backgroundColor: (theme) => theme.palette.background.default, borderRadius: 1 }}>\n                      <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: \"block\", mb: 0.5 }}>\n                        Outperformance\n                      </Typography>\n                      {summary.total_return !== null && summary.total_return !== undefined && benchmarkData?.return !== null && benchmarkData?.return !== undefined ? (\n                        <Typography variant=\"h6\" sx={{ fontWeight: 600, color: (summary.total_return - benchmarkData.return) >= 0 ? 'success.main' : 'error.main' }}>\n                          {(summary.total_return - benchmarkData.return).toFixed(2)}%\n                        </Typography>\n                      ) : (\n                        <Typography variant=\"h6\" sx={{ fontWeight: 600, color: 'text.secondary' }}>\n                          N/A\n                        </Typography>\n                      )}\n                    </Box>\n                  </Grid>\n                  <Grid item xs={12} sm={6} md={3}>\n                    <Box sx={{ p: 2, backgroundColor: (theme) => theme.palette.background.default, borderRadius: 1 }}>\n                      <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: \"block\", mb: 0.5 }}>\n                        Correlation\n                      </Typography>\n                      <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\n                        {summary.correlation_with_spy !== null && summary.correlation_with_spy !== undefined ? summary.correlation_with_spy.toFixed(2) : \"\"}\n                      </Typography>\n                    </Box>\n                  </Grid>\n                </Grid>\n\n                {/* Risk vs Return Comparison Chart */}\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <BarChart\n                    data={[\n                      {\n                        name: 'Portfolio',\n                        return: summary.total_return,\n                        risk: summary.volatility_annualized\n                      },\n                      {\n                        name: 'SPY',\n                        return: benchmarkData?.return,\n                        risk: benchmarkData?.risk\n                      },\n                    ]}\n                  >\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"name\" />\n                    <YAxis yAxisId=\"left\" label={{ value: 'Return (%)', angle: -90, position: 'insideLeft' }} />\n                    <YAxis yAxisId=\"right\" orientation=\"right\" label={{ value: 'Volatility (%)', angle: 90, position: 'insideRight' }} />\n                    <RechartsTooltip />\n                    <Legend />\n                    <Bar yAxisId=\"left\" dataKey=\"return\" fill=\"#1976d2\" name=\"Total Return %\" radius={[8, 8, 0, 0]} />\n                    <Bar yAxisId=\"right\" dataKey=\"risk\" fill=\"#ff9800\" name=\"Volatility %\" radius={[8, 8, 0, 0]} />\n                  </BarChart>\n                </ResponsiveContainer>\n\n                <Typography variant=\"body2\" sx={{ mt: 3, p: 2, backgroundColor: (theme) => theme.palette.mode === 'dark' ? 'rgba(25, 118, 210, 0.1)' : 'rgba(25, 118, 210, 0.05)', borderRadius: 1 }}>\n                  <strong>Analysis:</strong> {\n                    summary.correlation_with_spy > 0.8 ? ' Your portfolio moves closely with the market (High correlation)' :\n                    summary.correlation_with_spy > 0.5 ? ' Moderate correlation with the market' :\n                    ' Low correlation - Good diversification from the broad market'\n                  }. Your beta of {summary.beta?.toFixed(2) || '1.0'} means {\n                    summary.beta > 1.2 ? 'your portfolio is MORE volatile than the market.' :\n                    summary.beta < 0.8 ? 'your portfolio is LESS volatile than the market.' :\n                    'your portfolio moves roughly with the market.'\n                  }\n                </Typography>\n              </CardContent>\n            </Card>\n\n            {/* Return Attribution & Daily Performance - Metrics + Chart */}\n            <Card sx={{ mb: 4 }}>\n              <CardHeader title=\"Daily Performance Impact\" subheader=\"Win rate, best/worst days, and daily volatility\" />\n              <CardContent>\n                {/* Metrics */}\n                <Grid container spacing={2} sx={{ mb: 3 }}>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Win Rate\" value={summary.win_rate !== null && summary.win_rate !== undefined ? summary.win_rate.toFixed(1) : 'N/A'} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Best Day\" value={summary.best_day_gain !== null && summary.best_day_gain !== undefined ? summary.best_day_gain.toFixed(2) : 'N/A'} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Worst Day\" value={summary.worst_day_loss !== null && summary.worst_day_loss !== undefined ? summary.worst_day_loss.toFixed(2) : 'N/A'} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Top 5 Days Impact\" value={summary.top_5_days_contribution !== null && summary.top_5_days_contribution !== undefined ? summary.top_5_days_contribution.toFixed(2) : 'N/A'} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Positive Days\" value={summary.win_rate !== null && summary.win_rate !== undefined ? summary.win_rate.toFixed(1) : 'N/A'} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Avg Daily Vol\" value={summary.volatility_annualized !== null && summary.volatility_annualized !== undefined ? (summary.volatility_annualized / Math.sqrt(252)).toFixed(3) : 'N/A'} unit=\"%\" /></Grid>\n                </Grid>\n\n                {/* Daily Performance Chart */}\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <BarChart data={[\n                    ...(summary.win_rate !== null && summary.win_rate !== undefined ? [{ metric: 'Win Rate', value: summary.win_rate }] : []),\n                    ...(summary.best_day_gain !== null && summary.best_day_gain !== undefined ? [{ metric: 'Best Day', value: summary.best_day_gain }] : []),\n                    ...(summary.worst_day_loss !== null && summary.worst_day_loss !== undefined ? [{ metric: 'Worst Day', value: Math.abs(summary.worst_day_loss) }] : []),\n                    ...(summary.top_5_days_contribution !== null && summary.top_5_days_contribution !== undefined ? [{ metric: 'Top 5 Days', value: summary.top_5_days_contribution }] : []),\n                  ]}>\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"metric\" />\n                    <YAxis label={{ value: 'Return (%)', angle: -90, position: 'insideLeft' }} />\n                    <RechartsTooltip formatter={(value) => `${value?.toFixed(2)}%`} />\n                    <Bar dataKey=\"value\" fill=\"#43a047\" name=\"Value\" radius={[8, 8, 0, 0]} />\n                  </BarChart>\n                </ResponsiveContainer>\n              </CardContent>\n            </Card>\n\n            {/* Relative Performance vs Benchmark - Alpha, Beta, Information Ratio */}\n            <Card sx={{ mb: 4 }}>\n              <CardHeader title=\"Relative Performance Metrics\" subheader=\"How you're tracking against SPY in detail\" />\n              <CardContent>\n                <Grid container spacing={2}>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Tracking Error\" value={summary.tracking_error !== null && summary.tracking_error !== undefined ? summary.tracking_error.toFixed(4) : 'N/A'} unit=\"\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Active Return\" value={summary.active_return !== null && summary.active_return !== undefined ? summary.active_return.toFixed(2) : 'N/A'} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Information Ratio\" value={summary.information_ratio !== null && summary.information_ratio !== undefined ? summary.information_ratio.toFixed(2) : 'N/A'} unit=\"\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Rel Volatility\" value={summary.relative_volatility !== null && summary.relative_volatility !== undefined ? summary.relative_volatility.toFixed(2) : 'N/A'} unit=\"\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Beta vs SPY\" value={summary.beta !== null && summary.beta !== undefined ? summary.beta.toFixed(2) : 'N/A'} unit=\"\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Alpha\" value={summary.alpha !== null && summary.alpha !== undefined ? summary.alpha.toFixed(2) : 'N/A'} unit=\"%\" /></Grid>\n                </Grid>\n              </CardContent>\n            </Card>\n          </Box>\n\n          {/* ============ SECTION 3: RISK METRICS & ANALYSIS ============ */}\n          <Box sx={{ mb: 4, mt: 6 }}>\n            <Typography variant=\"h5\" sx={{ fontWeight: 700, mb: 3, display: 'flex', alignItems: 'center', gap: 1 }}>\n              <Warning sx={{ color: 'error.main' }} /> Risk Metrics & Quality Indicators\n            </Typography>\n\n            {/* Volatility & Risk KPIs */}\n            <Card sx={{ mb: 4 }}>\n              <CardHeader title=\"Volatility & Risk Metrics\" subheader=\"Core risk indicators for your portfolio\" />\n              <CardContent>\n                <Grid container spacing={2} sx={{ mb: 3 }}>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Volatility\" value={summary.volatility_annualized?.toFixed(2) || \"\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Downside Dev\" value={summary.downside_deviation?.toFixed(2) || \"\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Beta vs SPY\" value={summary.beta?.toFixed(2) || \"\"} unit=\"\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Max Drawdown\" value={summary.max_drawdown?.toFixed(2) || \"\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Return/Risk\" value={summary.return_risk_ratio?.toFixed(2) || \"\"} unit=\"\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Correlation SPY\" value={summary.correlation_with_spy !== null && summary.correlation_with_spy !== undefined ? summary.correlation_with_spy.toFixed(2) : \"\"} unit=\"\" /></Grid>\n                </Grid>\n              </CardContent>\n            </Card>\n\n            {/* Risk-Adjusted Return Ratios - Metrics + Chart */}\n            <Card sx={{ mb: 4 }}>\n              <CardHeader title=\"Risk-Adjusted Return Ratios\" subheader=\"Sharpe, Sortino, Calmar & Information ratios\" />\n              <CardContent>\n                {/* Metrics */}\n                <Grid container spacing={2} sx={{ mb: 3 }}>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Sharpe Ratio\" value={summary.sharpe_ratio?.toFixed(3) || \"\"} unit=\"\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Sortino Ratio\" value={summary.sortino_ratio?.toFixed(3) || \"\"} unit=\"\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Calmar Ratio\" value={summary.calmar_ratio?.toFixed(3) || \"\"} unit=\"\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Treynor Ratio\" value={summary.treynor_ratio?.toFixed(3) || \"\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Information Ratio\" value={summary.information_ratio?.toFixed(2) || \"\"} unit=\"\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Alpha\" value={summary.alpha?.toFixed(2) || \"\"} unit=\"%\" /></Grid>\n                </Grid>\n\n                {/* Risk-Adjusted Ratios Chart */}\n                <ResponsiveContainer width=\"100%\" height={320}>\n                  <BarChart data={[\n                    { metric: 'Sharpe', value: (summary.sharpe_ratio || 0) * 2 },\n                    { metric: 'Sortino', value: (summary.sortino_ratio || 0) * 2 },\n                    { metric: 'Calmar', value: (summary.calmar_ratio || 0) * 10 },\n                    { metric: 'Info', value: (summary.information_ratio || 0) * 5 },\n                  ]}>\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"metric\" />\n                    <YAxis label={{ value: 'Ratio Value (normalized)', angle: -90, position: 'insideLeft' }} />\n                    <RechartsTooltip formatter={(value) => `${value?.toFixed(3)}`} />\n                    <Bar dataKey=\"value\" fill=\"#1976d2\" name=\"Ratio\" radius={[8, 8, 0, 0]} />\n                  </BarChart>\n                </ResponsiveContainer>\n              </CardContent>\n            </Card>\n\n            {/* Drawdown Analysis - Metrics + Chart */}\n            <Card sx={{ mb: 4 }}>\n              <CardHeader title=\"Drawdown & Recovery\" subheader=\"Portfolio drawdown depth and recovery time\" />\n              <CardContent>\n                {/* Metrics */}\n                <Grid container spacing={2} sx={{ mb: 3 }}>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Max Drawdown\" value={summary.max_drawdown?.toFixed(2) || \"0.00\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Current DD\" value={summary.current_drawdown?.toFixed(2) || \"0.00\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Avg Drawdown\" value={summary.avg_drawdown?.toFixed(2) || \"0.00\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"DD Duration\" value={summary.drawdown_duration_days || \"0\"} unit=\"days\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Recovery Time\" value={summary.max_recovery_days || \"0\"} unit=\"days\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Calmar Ratio\" value={summary.calmar_ratio?.toFixed(3) || \"0.000\"} unit=\"\" /></Grid>\n                </Grid>\n\n                {/* Drawdown Chart */}\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <AreaChart data={[\n                    { date: 'Current', drawdown: summary.current_drawdown || 0, maxDD: summary.max_drawdown || 0 },\n                    { date: 'Avg DD', drawdown: summary.avg_drawdown || 0, maxDD: summary.max_drawdown || 0 },\n                  ]}>\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"date\" />\n                    <YAxis label={{ value: 'Drawdown (%)', angle: -90, position: 'insideLeft' }} />\n                    <RechartsTooltip formatter={(value) => `${value?.toFixed(2)}%`} />\n                    <Legend />\n                    <Area type=\"monotone\" dataKey=\"drawdown\" stackId=\"1\" stroke=\"#ff9800\" fill=\"#ff9800\" opacity={0.6} name=\"Current Drawdown\" />\n                    <Area type=\"monotone\" dataKey=\"maxDD\" stackId=\"1\" stroke=\"#f44336\" fill=\"#f44336\" opacity={0.6} name=\"Max Drawdown\" />\n                  </AreaChart>\n                </ResponsiveContainer>\n              </CardContent>\n            </Card>\n\n            {/* Tail Risk & Distribution Analysis - Metrics + Chart */}\n            <Card sx={{ mb: 4 }}>\n              <CardHeader title=\"Tail Risk Analysis\" subheader=\"VaR, CVaR, Skewness, and Kurtosis\" />\n              <CardContent>\n                {/* Metrics */}\n                <Grid container spacing={2} sx={{ mb: 3 }}>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"VaR 95%\" value={summary.var_95?.toFixed(2) || \"0.00\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"VaR 99%\" value={summary.var_99?.toFixed(2) || \"0.00\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"CVaR 95%\" value={summary.cvar_95?.toFixed(2) || \"0.00\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Skewness\" value={summary.skewness?.toFixed(3) || \"0.000\"} unit=\"\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Kurtosis\" value={summary.kurtosis?.toFixed(3) || \"0.000\"} unit=\"\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Semi-Skew\" value={summary.semi_skewness?.toFixed(3) || \"0.000\"} unit=\"\" /></Grid>\n                </Grid>\n\n                {/* Tail Risk Chart */}\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <BarChart data={[\n                    { metric: 'Skewness', value: summary.skewness || 0 },\n                    { metric: 'Kurtosis', value: (summary.kurtosis || 0) / 3 },\n                    { metric: 'VaR 95%', value: summary.var_95 || 0 },\n                    { metric: 'CVaR 95%', value: summary.cvar_95 || 0 },\n                  ]}>\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"metric\" />\n                    <YAxis label={{ value: 'Value', angle: -90, position: 'insideLeft' }} />\n                    <RechartsTooltip formatter={(value) => `${value?.toFixed(3)}`} />\n                    <Bar dataKey=\"value\" fill=\"#e53935\" name=\"Value\" radius={[8, 8, 0, 0]} />\n                  </BarChart>\n                </ResponsiveContainer>\n              </CardContent>\n            </Card>\n\n            {/* Portfolio Risk Profile Radar */}\n            <Card sx={{ mb: 4 }}>\n              <CardHeader title=\"Portfolio Risk Profile (Holistic View)\" subheader=\"Visual snapshot of all risk dimensions\" />\n              <CardContent>\n                <ResponsiveContainer width=\"100%\" height={350}>\n                  <RadarChart data={[\n                    ...(summary.volatility_annualized !== null && summary.volatility_annualized !== undefined ? [{ metric: 'Volatility', value: Math.min(summary.volatility_annualized, 100) }] : []),\n                    ...(summary.max_drawdown !== null && summary.max_drawdown !== undefined ? [{ metric: 'Drawdown', value: Math.min(Math.abs(summary.max_drawdown), 100) }] : []),\n                    ...(summary.skewness !== null && summary.skewness !== undefined ? [{ metric: 'Skewness', value: Math.min(Math.abs(summary.skewness * 20), 100) }] : []),\n                    ...(summary.kurtosis !== null && summary.kurtosis !== undefined ? [{ metric: 'Kurtosis', value: Math.min(summary.kurtosis * 5, 100) }] : []),\n                    ...(summary.portfolio_beta !== null && summary.portfolio_beta !== undefined ? [{ metric: 'Beta', value: Math.min(summary.portfolio_beta * 50, 100) }] : []),\n                    ...(summary.diversification_score !== null && summary.diversification_score !== undefined ? [{ metric: 'Diversification', value: Math.min(summary.diversification_score / 10, 100) }] : []),\n                  ]}>\n                    <PolarGrid />\n                    <PolarAngleAxis dataKey=\"metric\" />\n                    <PolarRadiusAxis angle={90} domain={[0, 100]} />\n                    <Radar name=\"Risk Profile\" dataKey=\"value\" stroke=\"#ff9800\" fill=\"#ff9800\" fillOpacity={0.6} />\n                    <RechartsTooltip formatter={(value) => `${value?.toFixed(1)}`} />\n                  </RadarChart>\n                </ResponsiveContainer>\n              </CardContent>\n            </Card>\n          </Box>\n\n          {/* ============ SECTION 4: ALLOCATION & DIVERSIFICATION ============ */}\n          <Box sx={{ mb: 4, mt: 6 }}>\n            <Typography variant=\"h5\" sx={{ fontWeight: 700, mb: 3, display: 'flex', alignItems: 'center', gap: 1 }}>\n              <AccountBalance sx={{ color: 'primary.main' }} /> Allocation & Diversification\n            </Typography>\n\n            {/* ---- Core Allocation Metrics ---- */}\n            <Typography variant=\"h6\" sx={{ fontWeight: 600, mb: 3, color: 'text.secondary' }}>\n              Core Allocation Metrics\n            </Typography>\n\n            {/* Concentration & Diversification Metrics */}\n            <Card sx={{ mb: 4 }}>\n              <CardHeader title=\"Concentration & Diversification Metrics\" />\n              <CardContent>\n                <Grid container spacing={2} sx={{ mb: 3 }}>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Top 1 Position\" value={summary.top_1_weight != null ? summary.top_1_weight.toFixed(2) : \"N/A\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Top 5 Positions\" value={summary.top_5_weight != null ? summary.top_5_weight.toFixed(2) : \"N/A\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Top 10 Positions\" value={summary.top_10_weight != null ? summary.top_10_weight.toFixed(2) : \"N/A\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Herfindahl Index\" value={summary.herfindahl_index != null ? summary.herfindahl_index.toFixed(4) : \"N/A\"} unit=\"\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Effective N\" value={summary.effective_n != null ? summary.effective_n.toFixed(2) : \"N/A\"} unit=\"\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Diversification Ratio\" value={summary.diversification_ratio != null ? summary.diversification_ratio.toFixed(2) : \"N/A\"} unit=\"\" /></Grid>\n                </Grid>\n              </CardContent>\n            </Card>\n\n            {/* ---- Holdings Distribution & Performance ---- */}\n            <Typography variant=\"h6\" sx={{ fontWeight: 600, mt: 4, mb: 3, color: 'text.secondary' }}>\n              Holdings Distribution & Performance\n            </Typography>\n\n            {/* Holdings by Weight Distribution */}\n            <Card sx={{ mb: 4 }}>\n              <CardHeader title=\"Holdings by Weight Distribution\" />\n              <CardContent>\n                <ResponsiveContainer width=\"100%\" height={350}>\n                  <BarChart\n                    data={positions.map(p => ({\n                      symbol: p.symbol,\n                      weight: p.weight_percent !== null && p.weight_percent !== undefined ? parseFloat(p.weight_percent) : null,\n                      value: p.market_value_dollars !== null && p.market_value_dollars !== undefined ? parseFloat(p.market_value_dollars) : null,\n                    }))}\n                    layout=\"vertical\"\n                    margin={{ top: 5, right: 30, left: 80, bottom: 5 }}\n                  >\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis type=\"number\" />\n                    <YAxis dataKey=\"symbol\" type=\"category\" width={70} />\n                    <RechartsTooltip formatter={(value) => value?.toFixed(2)} />\n                    <Legend />\n                    <Bar dataKey=\"weight\" fill=\"#1976d2\" name=\"Weight %\" radius={[0, 8, 8, 0]} />\n                  </BarChart>\n                </ResponsiveContainer>\n              </CardContent>\n            </Card>\n\n            {/* Market Value Heatmap */}\n            <Card sx={{ mb: 4 }}>\n              <CardHeader title=\"Position Market Values & Gains\" />\n              <CardContent>\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <BarChart\n                    data={positions.map(p => ({\n                      symbol: p.symbol,\n                      value: p.market_value_dollars !== null && p.market_value_dollars !== undefined ? parseFloat(p.market_value_dollars) : null,\n                      gain: p.gain_loss_dollars !== null && p.gain_loss_dollars !== undefined ? parseFloat(p.gain_loss_dollars) : null,\n                    }))}\n                  >\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"symbol\" />\n                    <YAxis yAxisId=\"left\" label={{ value: 'Market Value ($)', angle: -90, position: 'insideLeft' }} />\n                    <YAxis yAxisId=\"right\" orientation=\"right\" label={{ value: 'Gain/Loss ($)', angle: 90, position: 'insideRight' }} />\n                    <RechartsTooltip formatter={(value) => `$${value?.toFixed(0)}`} />\n                    <Legend />\n                    <Bar yAxisId=\"left\" dataKey=\"value\" fill=\"#1976d2\" name=\"Position Value ($)\" radius={[8, 8, 0, 0]} />\n                    <Bar yAxisId=\"right\" dataKey=\"gain\" fill=\"#43a047\" name=\"Unrealized Gain/Loss ($)\" radius={[8, 8, 0, 0]} />\n                  </BarChart>\n                </ResponsiveContainer>\n              </CardContent>\n            </Card>\n\n            {/* Sector & Diversification */}\n            <Card sx={{ mb: 4 }}>\n              <CardHeader title=\"Sector & Industry Diversification\" />\n              <CardContent>\n                <Grid container spacing={2} sx={{ mb: 3 }}>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Num Sectors\" value={summary.num_sectors || \"0\"} unit=\"\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Num Industries\" value={summary.num_industries || \"0\"} unit=\"\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Sector Concentration\" value={summary.sector_concentration?.toFixed(2) || \"0.00\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Avg Correlation\" value={summary.avg_correlation?.toFixed(2) || \"0.50\"} unit=\"\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Top Sector\" value={summary.top_sector || \"N/A\"} unit=\"\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Best Performer\" value={summary.best_performer_sector || \"N/A\"} unit=\"\" /></Grid>\n                </Grid>\n\n                {/* Sector Performance Analysis */}\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <BarChart\n                    data={sectorData.length > 0 ? sectorData : [{ sector: 'No Data', weight: 0, return: 0 }]}\n                  >\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"sector\" />\n                    <YAxis yAxisId=\"left\" label={{ value: 'Weight (%)', angle: -90, position: 'insideLeft' }} />\n                    <YAxis yAxisId=\"right\" orientation=\"right\" label={{ value: 'Avg Return (%)', angle: 90, position: 'insideRight' }} />\n                    <RechartsTooltip />\n                    <Legend />\n                    <Bar yAxisId=\"left\" dataKey=\"weight\" fill=\"#1976d2\" name=\"Portfolio Weight %\" radius={[8, 8, 0, 0]} />\n                    <Bar yAxisId=\"right\" dataKey=\"return\" fill=\"#43a047\" name=\"Avg Sector Return %\" radius={[8, 8, 0, 0]} />\n                  </BarChart>\n                </ResponsiveContainer>\n              </CardContent>\n            </Card>\n\n            {/* ---- Position-Level Analysis ---- */}\n            <Typography variant=\"h6\" sx={{ fontWeight: 600, mt: 4, mb: 3, color: 'text.secondary' }}>\n              Position-Level Analysis\n            </Typography>\n\n            {/* Volatility & Risk Contribution */}\n            <Card sx={{ mb: 4 }}>\n              <CardHeader title=\"Volatility & Risk Contribution by Position\" />\n              <CardContent>\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <ComposedChart\n                    data={positions.map(p => ({\n                      symbol: p.symbol,\n                      volatility: parseFloat(p.volatility_percent) || 0,\n                      risk: parseFloat(p.risk_contribution_percent) || 0,\n                      weight: parseFloat(p.weight_percent) || 0,\n                    }))}\n                  >\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"symbol\" />\n                    <YAxis yAxisId=\"left\" label={{ value: 'Volatility (%)', angle: -90, position: 'insideLeft' }} />\n                    <YAxis yAxisId=\"right\" orientation=\"right\" label={{ value: 'Risk Contrib (%) / Weight', angle: 90, position: 'insideRight' }} />\n                    <RechartsTooltip />\n                    <Legend />\n                    <Bar yAxisId=\"left\" dataKey=\"volatility\" fill=\"#ff9800\" name=\"Volatility %\" radius={[8, 8, 0, 0]} />\n                    <Bar yAxisId=\"right\" dataKey=\"risk\" fill=\"#e53935\" name=\"Risk Contribution %\" radius={[8, 8, 0, 0]} />\n                  </ComposedChart>\n                </ResponsiveContainer>\n              </CardContent>\n            </Card>\n\n            {/* Return Contribution Analysis */}\n            <Card sx={{ mb: 4 }}>\n              <CardHeader title=\"Return Contribution by Holding\" />\n              <CardContent>\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <BarChart\n                    data={positions.map(p => ({\n                      symbol: p.symbol,\n                      return: parseFloat(p.return_contribution_percent) || 0,\n                      beta: parseFloat(p.beta) || 0,\n                    }))}\n                  >\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"symbol\" />\n                    <YAxis yAxisId=\"left\" label={{ value: 'Return Contrib (%)', angle: -90, position: 'insideLeft' }} />\n                    <YAxis yAxisId=\"right\" orientation=\"right\" label={{ value: 'Beta', angle: 90, position: 'insideRight' }} />\n                    <RechartsTooltip />\n                    <Legend />\n                    <Bar yAxisId=\"left\" dataKey=\"return\" fill=\"#43a047\" name=\"Return Contribution %\" radius={[8, 8, 0, 0]} />\n                    <Bar yAxisId=\"right\" dataKey=\"beta\" fill=\"#1976d2\" name=\"Beta\" radius={[8, 8, 0, 0]} />\n                  </BarChart>\n                </ResponsiveContainer>\n              </CardContent>\n            </Card>\n\n            {/* Position Correlation with Portfolio */}\n            <Card sx={{ mb: 4 }}>\n              <CardHeader title=\"Position Correlation with Portfolio\" />\n              <CardContent>\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <BarChart\n                    data={positions\n                      .filter(p => p.correlation_with_portfolio !== null && p.correlation_with_portfolio !== undefined &&\n                                   p.weight_percent !== null && p.weight_percent !== undefined)\n                      .map(p => ({\n                        symbol: p.symbol,\n                        correlation: parseFloat(p.correlation_with_portfolio),\n                        weight: parseFloat(p.weight_percent),\n                      }))}\n                  >\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"symbol\" />\n                    <YAxis label={{ value: 'Correlation / Weight (%)', angle: -90, position: 'insideLeft' }} />\n                    <RechartsTooltip formatter={(value) => value?.toFixed(2)} />\n                    <Legend />\n                    <Bar dataKey=\"correlation\" fill=\"#9c27b0\" name=\"Correlation with Portfolio\" radius={[8, 8, 0, 0]} />\n                  </BarChart>\n                </ResponsiveContainer>\n                <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 2, display: 'block' }}>\n                  Correlation &gt; 0.7: Strong positive correlation with portfolio movements | Correlation &lt; 0.5: Good diversifier\n                </Typography>\n              </CardContent>\n            </Card>\n\n            {/* Top Holdings Correlation Matrix */}\n            <Card sx={{ mb: 4 }}>\n              <CardHeader\n                title=\"Top Holdings Correlation Matrix\"\n                subheader=\"Asset correlation structure (top 8 positions)\"\n              />\n              <CardContent>\n                <ResponsiveContainer width=\"100%\" height={350}>\n                  <ComposedChart\n                    data={positions.slice(0, 8)\n                      .filter(pos => pos.correlation_with_portfolio !== null && pos.correlation_with_portfolio !== undefined &&\n                                     pos.volatility_percent !== null && pos.volatility_percent !== undefined &&\n                                     pos.weight_percent !== null && pos.weight_percent !== undefined)\n                      .map((pos, idx) => ({\n                        symbol: pos.symbol,\n                        correlation_market: parseFloat(pos.correlation_with_portfolio),\n                        volatility: parseFloat(pos.volatility_percent),\n                        weight: parseFloat(pos.weight_percent),\n                      }))}\n                    layout=\"vertical\"\n                    margin={{ top: 5, right: 30, left: 100, bottom: 5 }}\n                  >\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis type=\"number\" />\n                    <YAxis dataKey=\"symbol\" type=\"category\" width={90} />\n                    <RechartsTooltip\n                      contentStyle={{ backgroundColor: '#fff', border: '1px solid #ccc' }}\n                      formatter={(value) => value?.toFixed(2) || '0'}\n                    />\n                    <Legend />\n                    <Bar dataKey=\"correlation_market\" fill=\"#1976d2\" name=\"Market Correlation\" radius={[0, 8, 8, 0]} />\n                    <Bar dataKey=\"volatility\" fill=\"#ff6f00\" name=\"Volatility (Annualized %)\" radius={[0, 8, 8, 0]} />\n                  </ComposedChart>\n                </ResponsiveContainer>\n                <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 2, display: 'block' }}>\n                  Shows how each holding correlates with the broader market and its individual volatility. Higher correlation = moves with market; Higher volatility = more price swings.\n                </Typography>\n              </CardContent>\n            </Card>\n          </Box>\n\n          {/* ============ SECTION 5: PORTFOLIO EFFICIENCY & DETAILED BREAKDOWN ============ */}\n          <Box sx={{ mb: 4, mt: 6 }}>\n            <Typography variant=\"h5\" sx={{ fontWeight: 700, mb: 3, display: 'flex', alignItems: 'center', gap: 1 }}>\n              <ShowChart sx={{ color: 'primary.main' }} /> Portfolio Efficiency\n            </Typography>\n\n            {/* Portfolio Efficiency Metrics */}\n            <Card sx={{ mb: 4 }}>\n              <CardHeader title=\"Portfolio Efficiency Metrics\" />\n              <CardContent>\n                <Grid container spacing={2}>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Return/Risk Ratio\" value={summary.return_risk_ratio != null ? summary.return_risk_ratio.toFixed(2) : \"N/A\"} unit=\"\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Cash Drag\" value={summary.cash_drag != null ? summary.cash_drag.toFixed(2) : \"N/A\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Turnover Ratio\" value={summary.turnover_ratio != null ? summary.turnover_ratio.toFixed(2) : \"N/A\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Transaction Costs\" value={summary.transaction_costs != null ? summary.transaction_costs.toFixed(2) : \"N/A\"} unit=\"bps\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Sector Momentum\" value={summary.sector_momentum != null ? summary.sector_momentum.toFixed(2) : \"N/A\"} unit=\"%\" /></Grid>\n                  <Grid item xs={12} sm={6} md={3} lg={2}><MetricBox label=\"Risk-Free Rate\" value={metadata.risk_free_rate != null ? metadata.risk_free_rate : \"N/A\"} unit=\"%\" /></Grid>\n                </Grid>\n              </CardContent>\n            </Card>\n\n            {/* Holdings Table */}\n            <Card sx={{ mb: 4 }}>\n              <CardHeader\n                title=\"Top Holdings Attribution\"\n                action={\n                  <Button size=\"small\" startIcon={<Refresh />} onClick={() => refetchMetrics()}>\n                    Refresh\n                  </Button>\n                }\n              />\n              <CardContent sx={{ overflowX: \"auto\" }}>\n                {positions.length === 0 ? (\n                  <Typography color=\"text.secondary\" align=\"center\" sx={{ py: 4 }}>\n                    No holdings data available.\n                  </Typography>\n                ) : (\n                  <table style={{ width: \"100%\", borderCollapse: \"collapse\", minWidth: \"700px\" }}>\n                    <thead>\n                      <tr style={{ borderBottom: `2px solid ${theme.palette.divider}`, backgroundColor: theme.palette.background.default }}>\n                        <th style={{ textAlign: \"left\", padding: \"12px\", fontWeight: 700 }}>Symbol</th>\n                        <th style={{ textAlign: \"right\", padding: \"12px\", fontWeight: 700 }}>Weight %</th>\n                        <th style={{ textAlign: \"right\", padding: \"12px\", fontWeight: 700 }}>Value $</th>\n                        <th style={{ textAlign: \"right\", padding: \"12px\", fontWeight: 700 }}>Gain/Loss $</th>\n                        <th style={{ textAlign: \"right\", padding: \"12px\", fontWeight: 700 }}>Return %</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {positions.map((pos, idx) => {\n                        const weight = pos.weight_percent !== null && pos.weight_percent !== undefined ? parseFloat(pos.weight_percent).toFixed(2) : \"N/A\";\n                        const value = pos.market_value_dollars !== null && pos.market_value_dollars !== undefined\n                          ? `$${parseFloat(pos.market_value_dollars).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`\n                          : \"N/A\";\n                        const gainLoss = pos.gain_loss_dollars !== null && pos.gain_loss_dollars !== undefined\n                          ? `$${parseFloat(pos.gain_loss_dollars).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`\n                          : \"N/A\";\n                        const gainLossColor = pos.gain_loss_dollars !== null && pos.gain_loss_dollars !== undefined\n                          ? (parseFloat(pos.gain_loss_dollars) >= 0 ? theme.palette.success.main : theme.palette.error.main)\n                          : \"inherit\";\n                        const returnPct = pos.return_percent !== null && pos.return_percent !== undefined ? parseFloat(pos.return_percent).toFixed(2) : \"N/A\";\n                        const returnColor = pos.return_percent !== null && pos.return_percent !== undefined\n                          ? (parseFloat(pos.return_percent) >= 0 ? theme.palette.success.main : theme.palette.error.main)\n                          : \"inherit\";\n                        return (\n                          <tr key={idx} style={{ borderBottom: `1px solid ${theme.palette.divider}` }}>\n                            <td style={{ padding: \"12px\", fontWeight: 500 }}>{pos.symbol}</td>\n                            <td style={{ textAlign: \"right\", padding: \"12px\" }}>{weight}%</td>\n                            <td style={{ textAlign: \"right\", padding: \"12px\" }}>{value}</td>\n                            <td style={{ textAlign: \"right\", padding: \"12px\", color: gainLossColor }}>\n                              {gainLoss}\n                            </td>\n                            <td style={{ textAlign: \"right\", padding: \"12px\", color: returnColor, fontWeight: 600 }}>\n                              {returnPct}%\n                            </td>\n                          </tr>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                )}\n              </CardContent>\n            </Card>\n          </Box>\n\n          {/* ============ METADATA FOOTER ============ */}\n          <Card sx={{ backgroundColor: theme.palette.background.default }}>\n            <CardContent>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                <strong>Calculation Basis:</strong> {metadata.calculation_basis ?? 'N/A'} \n                <strong> Benchmark:</strong> {metadata.benchmark ?? 'N/A'} \n                <strong> Risk-Free Rate:</strong> {metadata.risk_free_rate ?? 'N/A'} \n                <strong> Data Points:</strong> {metadata.data_points ?? 'N/A'} \n                <strong> Portfolio Value:</strong> {metadata.portfolio_value !== null && metadata.portfolio_value !== undefined ? `$${metadata.portfolio_value.toLocaleString()}` : 'N/A'}\n              </Typography>\n            </CardContent>\n          </Card>\n        </>\n      )}\n    </Container>\n  );\n}\n","/**\n * Portfolio Optimizer Dashboard\n * Real-time analysis, recommendations, and trade execution\n */\n\nimport React, { useState, useEffect } from 'react';\nimport {\n  Box, Container, Paper, Grid, Card, CardContent, Button, Table,\n  TableBody, TableCell, TableContainer, TableHead, TableRow, CircularProgress,\n  Alert, Dialog, DialogTitle, DialogContent, DialogActions, Chip, Typography,\n  LinearProgress, Divider\n} from '@mui/material';\nimport {\n  TrendingUp, TrendingDown, Warning, CheckCircle\n} from '@mui/icons-material';\nimport { LineChart, Line, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, PieChart, Pie, Cell } from 'recharts';\nimport { api as axios } from '../services/api';\n\nexport default function PortfolioOptimizerNew() {\n  const [loading, setLoading] = useState(false);\n  const [analysis, setAnalysis] = useState(null);\n  const [error, setError] = useState(null);\n\n  // Color palette for pie chart\n  const COLORS = ['#8884d8', '#82ca9d', '#ffc658', '#ff7c7c', '#8dd1e1', '#d084d0', '#a4de6c', '#ffb347'];\n\n  // Fetch optimization analysis\n  const fetchAnalysis = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await axios.get('/api/optimization/analysis');\n      console.log('[PortfolioOptimizerNew] API Response:', response.data);\n      // Extract analysis data from unified response format {success: true, data: {analysis: {...}}}\n      // Handle both response.data.analysis and response.data.data.analysis formats\n      const analysisData = response.data?.data?.analysis || response.data?.analysis || response.data;\n      console.log('[PortfolioOptimizerNew] Analysis Data:', analysisData);\n      if (!analysisData) {\n        setError('No analysis data returned from server');\n        setAnalysis(null);\n      } else {\n        setAnalysis(analysisData);\n      }\n    } catch (err) {\n      console.error('[PortfolioOptimizerNew] Fetch Error:', err);\n      setError(err.response?.data?.error || err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n\n  useEffect(() => {\n    fetchAnalysis();\n  }, []);\n\n  if (loading && !analysis) {\n    return (\n      <Container maxWidth=\"lg\" sx={{ py: 4, textAlign: 'center' }}>\n        <CircularProgress />\n      </Container>\n    );\n  }\n\n  if (!analysis) {\n    return (\n      <Container maxWidth=\"lg\" sx={{ py: 4 }}>\n        {error ? (\n          <Alert severity=\"error\">\n            <Typography variant=\"h6\" sx={{ mb: 1 }}>Unable to load optimization data</Typography>\n            <Typography variant=\"body2\">{error}</Typography>\n            <Button\n              variant=\"outlined\"\n              onClick={fetchAnalysis}\n              sx={{ mt: 2 }}\n            >\n              Try Again\n            </Button>\n          </Alert>\n        ) : (\n          <Alert severity=\"info\">No portfolio data available - please add holdings to get optimization recommendations</Alert>\n        )}\n      </Container>\n    );\n  }\n\n  // Extract metrics from the correct structure in the backend response\n  const currentMetrics = analysis.portfolioMetrics?.current || {};\n  const optimizedMetrics = analysis.portfolioMetrics?.optimized || {};\n\n  // Current portfolio metrics\n  const metrics = {\n    beta: currentMetrics.beta,\n    sharpeRatio: currentMetrics.sharpeRatio,\n    volatility: currentMetrics.volatility,\n    concentration: analysis.concentration || '',\n    avgQuality: analysis.avgQuality !== null && analysis.avgQuality !== undefined ? analysis.avgQuality : null,\n  };\n\n  // Expected improvements comparing current to optimized\n  const improvements = {\n    beta: {\n      expected: optimizedMetrics.beta,\n      improved: optimizedMetrics.beta !== undefined && currentMetrics.beta !== undefined && optimizedMetrics.beta < currentMetrics.beta,\n    },\n    sharpeRatio: {\n      expected: optimizedMetrics.sharpeRatio,\n      improved: optimizedMetrics.sharpeRatio !== undefined && currentMetrics.sharpeRatio !== undefined && optimizedMetrics.sharpeRatio > currentMetrics.sharpeRatio,\n    },\n    volatility: {\n      expected: optimizedMetrics.volatility,\n      improved: optimizedMetrics.volatility !== undefined && currentMetrics.volatility !== undefined && optimizedMetrics.volatility < currentMetrics.volatility,\n    },\n    concentration: {\n      expected: analysis.targetConcentration || '',\n      improved: false,\n    },\n    quality: {\n      expected: analysis.expectedQuality !== null && analysis.expectedQuality !== undefined ? analysis.expectedQuality : null,\n      improved: false,\n    },\n  };\n\n  const issues = analysis.issues || [];\n  const recommendations = analysis.recommendations || [];\n\n  // Map recommendations to portfolio stocks for display (single source of truth) - NO fake defaults\n  const portfolio = {\n    stocks: recommendations.map((rec, idx) => {\n      return {\n        symbol: rec.symbol,\n        weight: rec.targetWeight ? parseFloat(rec.targetWeight.replace('%', '')) : null,\n        action: rec.action,\n        priority: rec.priority,\n        reason: rec.reason,\n      };\n    }),\n    total_value: analysis.portfolioValue !== null && analysis.portfolioValue !== undefined ? analysis.portfolioValue :\n                 analysis.totalValue !== null && analysis.totalValue !== undefined ? analysis.totalValue : null,\n  };\n\n  // Handle null improvements (when optimized metrics unavailable due to data integrity)\n  const metricsData = improvements ? [\n    { name: 'Beta', current: metrics?.beta, expected: improvements.beta?.expected },\n    { name: 'Sharpe', current: metrics?.sharpeRatio, expected: improvements.sharpeRatio?.expected },\n    { name: 'Concentration %', current: metrics?.concentration ? parseFloat(metrics.concentration.replace('%', '')) : 0, expected: improvements.concentration?.expected ? parseFloat(improvements.concentration.expected.replace('%', '')) : 0 },\n  ] : [];\n\n  const issueColors = { high: '#d32f2f', medium: '#f57c00', low: '#388e3c' };\n\n  return (\n    <Container maxWidth=\"lg\" sx={{ py: 4 }}>\n      <Box sx={{ mb: 3, display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n        <Typography variant=\"h4\">Portfolio Optimizer</Typography>\n        <Box sx={{ display: 'flex', gap: 1 }}>\n          <Button variant=\"contained\" onClick={fetchAnalysis} disabled={loading}>\n            {loading ? <CircularProgress size={24} /> : 'Refresh Analysis'}\n          </Button>\n        </Box>\n      </Box>\n\n      {error && <Alert severity=\"error\" sx={{ mb: 2 }}>{error}</Alert>}\n\n      {/* ANALYSIS SECTION */}\n      {(\n        <>\n          {/* Key Metrics */}\n          <Grid container spacing={2} sx={{ mb: 3 }}>\n            <Grid item xs={12} sm={6} md={3}>\n              <Card>\n                <CardContent>\n                  <Typography color=\"textSecondary\" gutterBottom>Beta</Typography>\n                  <Typography variant=\"h5\">{metrics?.beta || \"\"}</Typography>\n                  <Typography variant=\"body2\" color={improvements?.beta?.improved ? 'success.main' : 'error.main'}>\n                    {improvements?.beta?.improved ? '' : ''} {(typeof improvements?.beta?.expected === 'number' && !isNaN(improvements.beta.expected)) ? improvements.beta.expected.toFixed(2) : \"\"}\n                  </Typography>\n                </CardContent>\n              </Card>\n            </Grid>\n            <Grid item xs={12} sm={6} md={3}>\n              <Card>\n                <CardContent>\n                  <Typography color=\"textSecondary\" gutterBottom>Sharpe Ratio</Typography>\n                  <Typography variant=\"h5\">{(typeof metrics?.sharpeRatio === 'number' && !isNaN(metrics.sharpeRatio)) ? metrics.sharpeRatio.toFixed(2) : \"\"}</Typography>\n                  <Typography variant=\"body2\" color={improvements?.sharpeRatio?.improved ? 'success.main' : 'error.main'}>\n                    {improvements?.sharpeRatio?.improved ? '' : ''} {(typeof improvements?.sharpeRatio?.expected === 'number' && !isNaN(improvements?.sharpeRatio?.expected)) ? improvements.sharpeRatio.expected.toFixed(2) : \"\"}\n                  </Typography>\n                </CardContent>\n              </Card>\n            </Grid>\n            <Grid item xs={12} sm={6} md={3}>\n              <Card>\n                <CardContent>\n                  <Typography color=\"textSecondary\" gutterBottom>Concentration</Typography>\n                  <Typography variant=\"h5\">{metrics?.concentration || \"\"}</Typography>\n                  <Typography variant=\"body2\" color={improvements?.concentration?.improved ? 'success.main' : 'error.main'}>\n                    {improvements?.concentration?.improved ? '' : ''} {improvements?.concentration?.expected || \"\"}\n                  </Typography>\n                </CardContent>\n              </Card>\n            </Grid>\n            <Grid item xs={12} sm={6} md={3}>\n              <Card>\n                <CardContent>\n                  <Typography color=\"textSecondary\" gutterBottom>Quality</Typography>\n                  <Typography variant=\"h5\">{(typeof metrics.avgQuality === 'number' && !isNaN(metrics.avgQuality)) ? metrics.avgQuality.toFixed(1) : \"\"}</Typography>\n                  <Typography variant=\"body2\" color={improvements?.quality?.improved ? 'success.main' : 'error.main'}>\n                    {improvements?.quality?.improved ? '' : ''} {(typeof improvements?.quality?.expected === 'number' && !isNaN(improvements?.quality?.expected)) ? improvements.quality.expected.toFixed(1) : \"\"}\n                  </Typography>\n                </CardContent>\n              </Card>\n            </Grid>\n          </Grid>\n\n          {/* Recommendations */}\n          <Paper sx={{ mb: 3, p: 2 }}>\n            <Typography variant=\"h6\" sx={{ mb: 2 }}>Recommendations ({recommendations.length})</Typography>\n            <TableContainer>\n              <Table>\n                <TableHead>\n                  <TableRow sx={{ bgcolor: '#f5f5f5' }}>\n                    <TableCell><strong>#</strong></TableCell>\n                    <TableCell><strong>Action</strong></TableCell>\n                    <TableCell><strong>Symbol</strong></TableCell>\n                    <TableCell><strong>Reason</strong></TableCell>\n                    <TableCell><strong>Target Weight</strong></TableCell>\n                    <TableCell><strong>Priority</strong></TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {recommendations.map((rec) => (\n                    <TableRow key={rec.id}>\n                      <TableCell>{rec.id}</TableCell>\n                      <TableCell>\n                        <Chip\n                          label={rec.action}\n                          color={rec.action === 'BUY' ? 'success' : 'error'}\n                          size=\"small\"\n                          variant=\"outlined\"\n                        />\n                      </TableCell>\n                      <TableCell><strong>{rec.symbol}</strong></TableCell>\n                      <TableCell>{rec.reason}</TableCell>\n                      <TableCell>{rec.targetWeight || '-'}</TableCell>\n                      <TableCell>\n                        <Chip\n                          label={rec.priority}\n                          size=\"small\"\n                          sx={{ bgcolor: issueColors[rec.priority], color: 'white' }}\n                        />\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          </Paper>\n\n          {/* Metrics Comparison Chart & Improvements */}\n          <Paper sx={{ p: 3, mb: 3 }}>\n            <Typography variant=\"h6\" sx={{ mb: 2, fontWeight: 'bold' }}> Expected Improvements</Typography>\n            <Typography variant=\"caption\" sx={{ color: '#888', mb: 2, display: 'block' }}>Quantified improvements from current to optimized portfolio</Typography>\n\n            {metricsData.length === 0 || (metricsData.every(d => d.current === null && d.expected === null)) ? (\n              <Alert severity=\"info\" sx={{ mb: 2 }}>\n                Portfolio metrics unavailable - requires at least 2 days of historical performance data. Once you have sufficient portfolio history, metrics like Beta, Sharpe Ratio, and Volatility will be calculated and displayed here.\n              </Alert>\n            ) : null}\n\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <BarChart data={metricsData}>\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis dataKey=\"name\" />\n                <YAxis />\n                <Tooltip formatter={(value) => value?.toFixed ? value.toFixed(2) : value} />\n                <Legend />\n                <Bar dataKey=\"current\" fill=\"#8884d8\" name=\"Current Portfolio\" />\n                <Bar dataKey=\"expected\" fill=\"#82ca9d\" name=\"Optimized Portfolio\" />\n              </BarChart>\n            </ResponsiveContainer>\n\n            {/* Improvement Details */}\n            <Box sx={{ mt: 3, p: 2, bgcolor: '#f5f5f5', borderRadius: 1 }}>\n              <Grid container spacing={2}>\n                {/* Beta Improvement */}\n                <Grid item xs={12} sm={6} md={3}>\n                  <Card sx={{ bgcolor: 'white', boxShadow: 'none', border: '1px solid #eee', height: '100%' }}>\n                    <CardContent sx={{ p: 2 }}>\n                      <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 1 }}>\n                        <Typography variant=\"caption\" sx={{ color: '#666', fontWeight: 'bold', textTransform: 'uppercase' }}>Beta</Typography>\n                        {improvements?.beta?.improved ? (\n                          <Box sx={{ color: '#4caf50', fontWeight: 'bold' }}></Box>\n                        ) : (\n                          <Box sx={{ color: '#999' }}></Box>\n                        )}\n                      </Box>\n                      <Typography sx={{ color: '#333', fontWeight: 'bold', mb: 0.5 }}>\n                        {metrics?.beta || ''}  {improvements?.beta?.expected ? (typeof improvements.beta.expected === 'number' ? improvements.beta.expected.toFixed(2) : improvements.beta.expected) : ''}\n                      </Typography>\n                      <Typography variant=\"caption\" sx={{ color: improvements?.beta?.improved ? '#4caf50' : '#999' }}>\n                        {improvements?.beta?.improved ? ` Lower is better` : ''}\n                      </Typography>\n                    </CardContent>\n                  </Card>\n                </Grid>\n\n                {/* Sharpe Ratio Improvement */}\n                <Grid item xs={12} sm={6} md={3}>\n                  <Card sx={{ bgcolor: 'white', boxShadow: 'none', border: '1px solid #eee', height: '100%' }}>\n                    <CardContent sx={{ p: 2 }}>\n                      <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 1 }}>\n                        <Typography variant=\"caption\" sx={{ color: '#666', fontWeight: 'bold', textTransform: 'uppercase' }}>Sharpe Ratio</Typography>\n                        {improvements?.sharpeRatio?.improved ? (\n                          <Box sx={{ color: '#4caf50', fontWeight: 'bold' }}></Box>\n                        ) : (\n                          <Box sx={{ color: '#999' }}></Box>\n                        )}\n                      </Box>\n                      <Typography sx={{ color: '#333', fontWeight: 'bold', mb: 0.5 }}>\n                        {(typeof metrics?.sharpeRatio === 'number' ? metrics.sharpeRatio.toFixed(2) : '')}  {improvements?.sharpeRatio?.expected ? (typeof improvements.sharpeRatio.expected === 'number' ? improvements.sharpeRatio.expected.toFixed(2) : improvements.sharpeRatio.expected) : ''}\n                      </Typography>\n                      <Typography variant=\"caption\" sx={{ color: improvements?.sharpeRatio?.improved ? '#4caf50' : '#999' }}>\n                        {improvements?.sharpeRatio?.improved ? ` Higher is better` : ''}\n                      </Typography>\n                    </CardContent>\n                  </Card>\n                </Grid>\n\n                {/* Volatility Improvement */}\n                <Grid item xs={12} sm={6} md={3}>\n                  <Card sx={{ bgcolor: 'white', boxShadow: 'none', border: '1px solid #eee', height: '100%' }}>\n                    <CardContent sx={{ p: 2 }}>\n                      <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 1 }}>\n                        <Typography variant=\"caption\" sx={{ color: '#666', fontWeight: 'bold', textTransform: 'uppercase' }}>Volatility</Typography>\n                        {improvements?.volatility?.improved ? (\n                          <Box sx={{ color: '#4caf50', fontWeight: 'bold' }}></Box>\n                        ) : (\n                          <Box sx={{ color: '#999' }}></Box>\n                        )}\n                      </Box>\n                      <Typography sx={{ color: '#333', fontWeight: 'bold', mb: 0.5 }}>\n                        {metrics?.volatility ? `${metrics.volatility}%` : ''}  {improvements?.volatility?.expected ? (typeof improvements.volatility.expected === 'number' ? `${improvements.volatility.expected.toFixed(2)}%` : improvements.volatility.expected) : ''}\n                      </Typography>\n                      <Typography variant=\"caption\" sx={{ color: improvements?.volatility?.improved ? '#4caf50' : '#999' }}>\n                        {improvements?.volatility?.improved ? ` Lower is better` : ''}\n                      </Typography>\n                    </CardContent>\n                  </Card>\n                </Grid>\n\n                {/* Concentration Improvement */}\n                <Grid item xs={12} sm={6} md={3}>\n                  <Card sx={{ bgcolor: 'white', boxShadow: 'none', border: '1px solid #eee', height: '100%' }}>\n                    <CardContent sx={{ p: 2 }}>\n                      <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 1 }}>\n                        <Typography variant=\"caption\" sx={{ color: '#666', fontWeight: 'bold', textTransform: 'uppercase' }}>Concentration</Typography>\n                        {improvements?.concentration?.improved ? (\n                          <Box sx={{ color: '#4caf50', fontWeight: 'bold' }}></Box>\n                        ) : (\n                          <Box sx={{ color: '#999' }}></Box>\n                        )}\n                      </Box>\n                      <Typography sx={{ color: '#333', fontWeight: 'bold', mb: 0.5 }}>\n                        {metrics?.concentration || ''}  {improvements?.concentration?.expected || ''}\n                      </Typography>\n                      <Typography variant=\"caption\" sx={{ color: improvements?.concentration?.improved ? '#4caf50' : '#999' }}>\n                        {improvements?.concentration?.improved ? ` Better diversified` : ''}\n                      </Typography>\n                    </CardContent>\n                  </Card>\n                </Grid>\n              </Grid>\n            </Box>\n          </Paper>\n        </>\n      )}\n\n      <Divider sx={{ my: 4 }} />\n\n      {/* PORTFOLIO CORRELATION ANALYSIS - BEFORE & AFTER */}\n      {analysis?.portfolioMetrics && (analysis.portfolioMetrics.current || analysis.portfolioMetrics.optimized) && (\n        <Paper sx={{ p: 3, mb: 3, bgcolor: '#fafafa' }}>\n          <Typography variant=\"h5\" sx={{ mb: 1, fontWeight: 'bold', color: '#1a1a1a' }}> Correlation Analysis</Typography>\n          <Typography variant=\"caption\" sx={{ color: '#888', mb: 3, display: 'block' }}>Risk metrics comparison | Better = Lower correlation risk</Typography>\n\n          <Grid container spacing={2} sx={{ mb: 3 }}>\n            {/* CURRENT PORTFOLIO METRICS */}\n            <Grid item xs={12} sm={6}>\n              <Card sx={{ height: '100%', bgcolor: 'white', border: '2px solid #fff3e0', boxShadow: '0 2px 8px rgba(0,0,0,0.05)' }}>\n                <CardContent sx={{ p: 2.5 }}>\n                  <Box sx={{ display: 'flex', alignItems: 'center', mb: 2.5 }}>\n                    <Box sx={{ width: 10, height: 10, borderRadius: '50%', bgcolor: '#ff9800', mr: 1 }}></Box>\n                    <Typography variant=\"subtitle1\" sx={{ fontWeight: '600', color: '#333' }}>Current Portfolio</Typography>\n                  </Box>\n                  {analysis.portfolioMetrics.current && (\n                    <Grid container spacing={1.5}>\n                      <Grid item xs={6}>\n                        <Box sx={{ bgcolor: '#fff9f0', p: 1.5, borderRadius: 1 }}>\n                          <Typography variant=\"caption\" sx={{ color: '#888', fontSize: '0.7rem', fontWeight: '600', textTransform: 'uppercase' }}>Beta</Typography>\n                          <Typography variant=\"h6\" sx={{ fontWeight: '700', color: '#ff6f00', mt: 0.5 }}>{(typeof analysis.portfolioMetrics.current.beta === 'number' && !isNaN(analysis.portfolioMetrics.current.beta)) ? analysis.portfolioMetrics.current.beta.toFixed(2) : ''}</Typography>\n                        </Box>\n                      </Grid>\n                      <Grid item xs={6}>\n                        <Box sx={{ bgcolor: '#fff9f0', p: 1.5, borderRadius: 1 }}>\n                          <Typography variant=\"caption\" sx={{ color: '#888', fontSize: '0.7rem', fontWeight: '600', textTransform: 'uppercase' }}>Volatility</Typography>\n                          <Typography variant=\"h6\" sx={{ fontWeight: '700', color: '#ff6f00', mt: 0.5 }}>{(typeof analysis.portfolioMetrics.current.volatility === 'number' && !isNaN(analysis.portfolioMetrics.current.volatility)) ? analysis.portfolioMetrics.current.volatility.toFixed(1) + '%' : ''}</Typography>\n                        </Box>\n                      </Grid>\n                      <Grid item xs={6}>\n                        <Box sx={{ bgcolor: '#fff9f0', p: 1.5, borderRadius: 1 }}>\n                          <Typography variant=\"caption\" sx={{ color: '#888', fontSize: '0.7rem', fontWeight: '600', textTransform: 'uppercase' }}>Sharpe</Typography>\n                          <Typography variant=\"h6\" sx={{ fontWeight: '700', color: '#ff6f00', mt: 0.5 }}>{(typeof analysis.portfolioMetrics.current.sharpeRatio === 'number' && !isNaN(analysis.portfolioMetrics.current.sharpeRatio)) ? analysis.portfolioMetrics.current.sharpeRatio.toFixed(2) : ''}</Typography>\n                        </Box>\n                      </Grid>\n                      <Grid item xs={6}>\n                        <Box sx={{ bgcolor: '#fff9f0', p: 1.5, borderRadius: 1 }}>\n                          <Typography variant=\"caption\" sx={{ color: '#888', fontSize: '0.7rem', fontWeight: '600', textTransform: 'uppercase' }}>Diversif.</Typography>\n                          <Typography variant=\"h6\" sx={{ fontWeight: '700', color: '#ff6f00', mt: 0.5 }}>{(typeof analysis.portfolioMetrics.current.diversificationScore === 'number' && !isNaN(analysis.portfolioMetrics.current.diversificationScore)) ? (analysis.portfolioMetrics.current.diversificationScore * 100).toFixed(0) + '%' : ''}</Typography>\n                        </Box>\n                      </Grid>\n                      <Grid item xs={12}>\n                        <Box sx={{ bgcolor: '#fff9f0', p: 1.5, borderRadius: 1 }}>\n                          <Typography variant=\"caption\" sx={{ color: '#888', fontSize: '0.7rem', fontWeight: '600', textTransform: 'uppercase' }}>Concentration Risk</Typography>\n                          <Typography variant=\"h6\" sx={{ fontWeight: '700', color: '#ff6f00', mt: 0.5 }}>{(typeof analysis.portfolioMetrics.current.concentrationRatio === 'number' && !isNaN(analysis.portfolioMetrics.current.concentrationRatio)) ? analysis.portfolioMetrics.current.concentrationRatio.toFixed(1) + '%' : ''}</Typography>\n                        </Box>\n                      </Grid>\n                    </Grid>\n                  )}\n                </CardContent>\n              </Card>\n            </Grid>\n\n            {/* OPTIMIZED PORTFOLIO METRICS */}\n            <Grid item xs={12} sm={6}>\n              <Card sx={{ height: '100%', bgcolor: 'white', border: '2px solid #e8f5e9', boxShadow: '0 2px 8px rgba(0,0,0,0.05)' }}>\n                <CardContent sx={{ p: 2.5 }}>\n                  <Box sx={{ display: 'flex', alignItems: 'center', mb: 2.5 }}>\n                    <Box sx={{ width: 10, height: 10, borderRadius: '50%', bgcolor: '#4caf50', mr: 1 }}></Box>\n                    <Typography variant=\"subtitle1\" sx={{ fontWeight: '600', color: '#333' }}>Optimized</Typography>\n                  </Box>\n                  {analysis.portfolioMetrics.optimized && (\n                    <Grid container spacing={1.5}>\n                      <Grid item xs={6}>\n                        <Box sx={{ bgcolor: '#f1f8f5', p: 1.5, borderRadius: 1 }}>\n                          <Typography variant=\"caption\" sx={{ color: '#888', fontSize: '0.7rem', fontWeight: '600', textTransform: 'uppercase' }}>Beta</Typography>\n                          <Typography variant=\"h6\" sx={{ fontWeight: '700', color: '#2e7d32', mt: 0.5 }}>{(typeof analysis.portfolioMetrics.optimized.beta === 'number' && !isNaN(analysis.portfolioMetrics.optimized.beta)) ? analysis.portfolioMetrics.optimized.beta.toFixed(2) : ''}</Typography>\n                        </Box>\n                      </Grid>\n                      <Grid item xs={6}>\n                        <Box sx={{ bgcolor: '#f1f8f5', p: 1.5, borderRadius: 1 }}>\n                          <Typography variant=\"caption\" sx={{ color: '#888', fontSize: '0.7rem', fontWeight: '600', textTransform: 'uppercase' }}>Volatility</Typography>\n                          <Typography variant=\"h6\" sx={{ fontWeight: '700', color: '#2e7d32', mt: 0.5 }}>{(typeof analysis.portfolioMetrics.optimized.volatility === 'number' && !isNaN(analysis.portfolioMetrics.optimized.volatility)) ? analysis.portfolioMetrics.optimized.volatility.toFixed(1) + '%' : ''}</Typography>\n                        </Box>\n                      </Grid>\n                      <Grid item xs={6}>\n                        <Box sx={{ bgcolor: '#f1f8f5', p: 1.5, borderRadius: 1 }}>\n                          <Typography variant=\"caption\" sx={{ color: '#888', fontSize: '0.7rem', fontWeight: '600', textTransform: 'uppercase' }}>Sharpe</Typography>\n                          <Typography variant=\"h6\" sx={{ fontWeight: '700', color: '#2e7d32', mt: 0.5 }}>{(typeof analysis.portfolioMetrics.optimized.sharpeRatio === 'number' && !isNaN(analysis.portfolioMetrics.optimized.sharpeRatio)) ? analysis.portfolioMetrics.optimized.sharpeRatio.toFixed(2) : ''}</Typography>\n                        </Box>\n                      </Grid>\n                      <Grid item xs={6}>\n                        <Box sx={{ bgcolor: '#f1f8f5', p: 1.5, borderRadius: 1 }}>\n                          <Typography variant=\"caption\" sx={{ color: '#888', fontSize: '0.7rem', fontWeight: '600', textTransform: 'uppercase' }}>Diversif.</Typography>\n                          <Typography variant=\"h6\" sx={{ fontWeight: '700', color: '#2e7d32', mt: 0.5 }}>{(typeof analysis.portfolioMetrics.optimized.diversificationScore === 'number' && !isNaN(analysis.portfolioMetrics.optimized.diversificationScore)) ? (analysis.portfolioMetrics.optimized.diversificationScore * 100).toFixed(0) + '%' : ''}</Typography>\n                        </Box>\n                      </Grid>\n                      <Grid item xs={12}>\n                        <Box sx={{ bgcolor: '#f1f8f5', p: 1.5, borderRadius: 1 }}>\n                          <Typography variant=\"caption\" sx={{ color: '#888', fontSize: '0.7rem', fontWeight: '600', textTransform: 'uppercase' }}>Concentration Risk</Typography>\n                          <Typography variant=\"h6\" sx={{ fontWeight: '700', color: '#2e7d32', mt: 0.5 }}>{(typeof analysis.portfolioMetrics.optimized.concentrationRatio === 'number' && !isNaN(analysis.portfolioMetrics.optimized.concentrationRatio)) ? analysis.portfolioMetrics.optimized.concentrationRatio.toFixed(1) + '%' : ''}</Typography>\n                        </Box>\n                      </Grid>\n                    </Grid>\n                  )}\n                </CardContent>\n              </Card>\n            </Grid>\n          </Grid>\n\n          {/* IMPROVEMENTS SUMMARY */}\n          {analysis.portfolioMetrics.improvements && (\n            <Grid container spacing={1.5}>\n              <Grid item xs={6} sm={3}>\n                <Card sx={{ bgcolor: 'white', boxShadow: 'none', border: '1px solid #eee' }}>\n                  <CardContent sx={{ p: 1.5, textAlign: 'center' }}>\n                    <Typography variant=\"caption\" sx={{ color: '#999', fontSize: '0.65rem', fontWeight: '600', textTransform: 'uppercase' }}>Beta </Typography>\n                    <Typography variant=\"body2\" sx={{ fontWeight: '700', color: analysis.portfolioMetrics.improvements.betaReduction?.includes('-') ? '#f44336' : '#4caf50', mt: 0.5 }}>\n                      {analysis.portfolioMetrics.improvements.betaReduction}\n                    </Typography>\n                  </CardContent>\n                </Card>\n              </Grid>\n              <Grid item xs={6} sm={3}>\n                <Card sx={{ bgcolor: 'white', boxShadow: 'none', border: '1px solid #eee' }}>\n                  <CardContent sx={{ p: 1.5, textAlign: 'center' }}>\n                    <Typography variant=\"caption\" sx={{ color: '#999', fontSize: '0.65rem', fontWeight: '600', textTransform: 'uppercase' }}>Risk </Typography>\n                    <Typography variant=\"body2\" sx={{ fontWeight: '700', color: '#4caf50', mt: 0.5 }}>\n                      {analysis.portfolioMetrics.improvements.riskReduction}\n                    </Typography>\n                  </CardContent>\n                </Card>\n              </Grid>\n              <Grid item xs={6} sm={3}>\n                <Card sx={{ bgcolor: 'white', boxShadow: 'none', border: '1px solid #eee' }}>\n                  <CardContent sx={{ p: 1.5, textAlign: 'center' }}>\n                    <Typography variant=\"caption\" sx={{ color: '#999', fontSize: '0.65rem', fontWeight: '600', textTransform: 'uppercase' }}>Sharpe </Typography>\n                    <Typography variant=\"body2\" sx={{ fontWeight: '700', color: analysis.portfolioMetrics.improvements.sharpeImprovement?.includes('-') ? '#f44336' : '#4caf50', mt: 0.5 }}>\n                      {analysis.portfolioMetrics.improvements.sharpeImprovement}\n                    </Typography>\n                  </CardContent>\n                </Card>\n              </Grid>\n              <Grid item xs={6} sm={3}>\n                <Card sx={{ bgcolor: 'white', boxShadow: 'none', border: '1px solid #eee' }}>\n                  <CardContent sx={{ p: 1.5, textAlign: 'center' }}>\n                    <Typography variant=\"caption\" sx={{ color: '#999', fontSize: '0.65rem', fontWeight: '600', textTransform: 'uppercase' }}>Diversif. </Typography>\n                    <Typography variant=\"body2\" sx={{ fontWeight: '700', color: analysis.portfolioMetrics.improvements.diversificationGain?.includes('-') ? '#f44336' : '#4caf50', mt: 0.5 }}>\n                      {analysis.portfolioMetrics.improvements.diversificationGain}\n                    </Typography>\n                  </CardContent>\n                </Card>\n              </Grid>\n            </Grid>\n          )}\n\n        </Paper>\n      )}\n\n\n\n      {/* SECTOR ALLOCATION - BEFORE & AFTER REBALANCE */}\n      {analysis?.sectorRebalance && (analysis.sectorRebalance.before?.length > 0 || analysis.sectorRebalance.after?.length > 0) && (\n        <Paper sx={{ p: 3, mb: 3, bgcolor: '#fafafa' }}>\n          <Typography variant=\"h5\" sx={{ mb: 1, fontWeight: 'bold', color: '#1a1a1a' }}> Sector Allocation</Typography>\n          <Typography variant=\"caption\" sx={{ color: '#888', mb: 3, display: 'block' }}>Diversification impact | More sectors = Lower correlation risk</Typography>\n\n          <Grid container spacing={2}>\n            {/* BEFORE */}\n            <Grid item xs={12} sm={6}>\n              <Card sx={{ height: '100%', bgcolor: 'white', border: '2px solid #fff3e0', boxShadow: '0 2px 8px rgba(0,0,0,0.05)' }}>\n                <CardContent sx={{ p: 2.5 }}>\n                  <Box sx={{ display: 'flex', alignItems: 'center', mb: 2.5 }}>\n                    <Box sx={{ width: 10, height: 10, borderRadius: '50%', bgcolor: '#ff9800', mr: 1 }}></Box>\n                    <Typography variant=\"subtitle1\" sx={{ fontWeight: '600', color: '#333' }}>Current Sectors</Typography>\n                  </Box>\n                  <Box>\n                    {analysis.sectorRebalance.before.map((sector, idx) => (\n                      <Box key={idx} sx={{ mb: 1.5 }}>\n                        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 0.5 }}>\n                          <Typography variant=\"body2\" sx={{ fontWeight: '600', color: '#333', flex: 1 }}>{sector.sector}</Typography>\n                          <Typography variant=\"body2\" sx={{ fontWeight: '700', color: '#ff6f00', minWidth: '50px', textAlign: 'right' }}>{sector.weight}</Typography>\n                          <Typography variant=\"caption\" sx={{ color: '#999', ml: 1 }}>{sector.count}p</Typography>\n                        </Box>\n                        <Box sx={{ height: 6, bgcolor: '#ffe0b2', borderRadius: '3px', overflow: 'hidden' }}>\n                          <Box sx={{ height: '100%', bgcolor: '#ff9800', width: sector.weight, transition: 'width 0.3s' }} />\n                        </Box>\n                      </Box>\n                    ))}\n                  </Box>\n                  <Box sx={{ mt: 2, pt: 1.5, borderTop: '1px solid #f0f0f0', textAlign: 'center' }}>\n                    <Typography variant=\"caption\" sx={{ color: '#ff6f00', fontWeight: '700', fontSize: '0.75rem', textTransform: 'uppercase' }}>\n                      {analysis.sectorRebalance.before.length} Sectors\n                    </Typography>\n                  </Box>\n                </CardContent>\n              </Card>\n            </Grid>\n\n            {/* AFTER */}\n            <Grid item xs={12} sm={6}>\n              <Card sx={{ height: '100%', bgcolor: 'white', border: '2px solid #e8f5e9', boxShadow: '0 2px 8px rgba(0,0,0,0.05)' }}>\n                <CardContent sx={{ p: 2.5 }}>\n                  <Box sx={{ display: 'flex', alignItems: 'center', mb: 2.5 }}>\n                    <Box sx={{ width: 10, height: 10, borderRadius: '50%', bgcolor: '#4caf50', mr: 1 }}></Box>\n                    <Typography variant=\"subtitle1\" sx={{ fontWeight: '600', color: '#333' }}>Target Sectors</Typography>\n                    {analysis.sectorRebalance.after.length > analysis.sectorRebalance.before.length && (\n                      <Chip label={`+${analysis.sectorRebalance.after.length - analysis.sectorRebalance.before.length}`} size=\"small\" sx={{ ml: 'auto', bgcolor: '#c8e6c9', color: '#2e7d32', fontWeight: '600', height: '22px' }} />\n                    )}\n                  </Box>\n                  <Box>\n                    {analysis.sectorRebalance.after.map((sector, idx) => (\n                      <Box key={idx} sx={{ mb: 1.5 }}>\n                        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 0.5 }}>\n                          <Typography variant=\"body2\" sx={{ fontWeight: '600', color: '#333', flex: 1 }}>{sector.sector}</Typography>\n                          <Typography variant=\"body2\" sx={{ fontWeight: '700', color: '#2e7d32', minWidth: '50px', textAlign: 'right' }}>{sector.weight}</Typography>\n                          <Typography variant=\"caption\" sx={{ color: '#999', ml: 1 }}>{sector.count}p</Typography>\n                        </Box>\n                        <Box sx={{ height: 6, bgcolor: '#c8e6c9', borderRadius: '3px', overflow: 'hidden' }}>\n                          <Box sx={{ height: '100%', bgcolor: '#4caf50', width: sector.weight, transition: 'width 0.3s' }} />\n                        </Box>\n                      </Box>\n                    ))}\n                  </Box>\n                  <Box sx={{ mt: 2, pt: 1.5, borderTop: '1px solid #f0f0f0', textAlign: 'center' }}>\n                    <Typography variant=\"caption\" sx={{ color: '#2e7d32', fontWeight: '700', fontSize: '0.75rem', textTransform: 'uppercase' }}>\n                      {analysis.sectorRebalance.after.length} Sectors\n                    </Typography>\n                  </Box>\n                </CardContent>\n              </Card>\n            </Grid>\n          </Grid>\n\n        </Paper>\n      )}\n\n      {/* EFFICIENT FRONTIER ANALYSIS */}\n      {analysis?.efficientFrontier && analysis.efficientFrontier.length > 0 && (\n        <Paper sx={{ p: 3, mb: 3, bgcolor: '#fafafa' }}>\n          <Typography variant=\"h5\" sx={{ mb: 1, fontWeight: 'bold', color: '#1a1a1a' }}> Efficient Frontier</Typography>\n          <Typography variant=\"caption\" sx={{ color: '#888', mb: 3, display: 'block' }}>Risk vs Return trade-offs | Current portfolio vs optimized strategies</Typography>\n\n          <ResponsiveContainer width=\"100%\" height={350}>\n            <LineChart data={analysis.efficientFrontier}>\n              <CartesianGrid strokeDasharray=\"3 3\" />\n              <XAxis\n                dataKey=\"riskProfile\"\n                label={{ value: 'Risk Profile', position: 'insideBottomRight', offset: -5 }}\n              />\n              <YAxis\n                yAxisId=\"left\"\n                label={{ value: 'Return %', angle: -90, position: 'insideLeft' }}\n              />\n              <YAxis\n                yAxisId=\"right\"\n                orientation=\"right\"\n                label={{ value: 'Sharpe Ratio', angle: 90, position: 'insideRight' }}\n              />\n              <Tooltip\n                formatter={(value) => typeof value === 'number' ? value.toFixed(2) : value}\n                labelFormatter={(label) => `Risk Profile: ${label}`}\n              />\n              <Legend />\n              <Line\n                yAxisId=\"left\"\n                type=\"monotone\"\n                dataKey=\"return\"\n                stroke=\"#82ca9d\"\n                name=\"Expected Return\"\n                dot={{ r: 5 }}\n              />\n              <Line\n                yAxisId=\"right\"\n                type=\"monotone\"\n                dataKey=\"sharpeRatio\"\n                stroke=\"#8884d8\"\n                name=\"Sharpe Ratio\"\n                dot={{ r: 5 }}\n              />\n            </LineChart>\n          </ResponsiveContainer>\n\n          <Box sx={{ mt: 3, p: 2, bgcolor: '#f5f5f5', borderRadius: 1 }}>\n            <Grid container spacing={2}>\n              <Grid item xs={12} sm={6} md={3}>\n                <Typography variant=\"caption\" color=\"textSecondary\">Frontier Points</Typography>\n                <Typography variant=\"body2\" sx={{ fontWeight: 'bold', color: '#1976d2' }}>\n                  {analysis.efficientFrontier.length}\n                </Typography>\n              </Grid>\n              <Grid item xs={12} sm={6} md={3}>\n                <Typography variant=\"caption\" color=\"textSecondary\">Risk Range</Typography>\n                <Typography variant=\"body2\" sx={{ fontWeight: 'bold', color: '#f57c00' }}>\n                  {Math.min(...analysis.efficientFrontier.map(e => e.risk || 0)).toFixed(1)}% - {Math.max(...analysis.efficientFrontier.map(e => e.risk || 0)).toFixed(1)}%\n                </Typography>\n              </Grid>\n              <Grid item xs={12} sm={6} md={3}>\n                <Typography variant=\"caption\" color=\"textSecondary\">Return Range</Typography>\n                <Typography variant=\"body2\" sx={{ fontWeight: 'bold', color: '#4caf50' }}>\n                  {Math.min(...analysis.efficientFrontier.map(e => e.return || 0)).toFixed(1)}% - {Math.max(...analysis.efficientFrontier.map(e => e.return || 0)).toFixed(1)}%\n                </Typography>\n              </Grid>\n              <Grid item xs={12} sm={6} md={3}>\n                <Typography variant=\"caption\" color=\"textSecondary\">Max Sharpe Ratio</Typography>\n                <Typography variant=\"body2\" sx={{ fontWeight: 'bold', color: '#2196f3' }}>\n                  {Math.max(...analysis.efficientFrontier.map(e => e.sharpeRatio || 0)).toFixed(2)}\n                </Typography>\n              </Grid>\n            </Grid>\n          </Box>\n        </Paper>\n      )}\n\n      {/* TARGET ALLOCATION DETAILS */}\n      {analysis?.targetAllocation && analysis.targetAllocation.length > 0 && (\n        <Paper sx={{ p: 3, mb: 3, bgcolor: '#fafafa' }}>\n          <Typography variant=\"h5\" sx={{ mb: 1, fontWeight: 'bold', color: '#1a1a1a' }}> Target Allocation Breakdown</Typography>\n          <Typography variant=\"caption\" sx={{ color: '#888', mb: 3, display: 'block' }}>Recommended portfolio weights for optimal risk-adjusted returns</Typography>\n\n          <Grid container spacing={2}>\n            {/* Pie Chart */}\n            <Grid item xs={12} md={6}>\n              <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: 350 }}>\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                  <PieChart>\n                    <Pie\n                      data={analysis.targetAllocation\n                        .filter(a => a.weight !== null && a.weight !== undefined)\n                        .map(a => ({\n                          name: a.symbol,\n                          value: parseFloat(a.weight.replace('%', ''))\n                        }))}\n                      cx=\"50%\"\n                      cy=\"50%\"\n                      labelLine={false}\n                      label={({ name, value }) => `${name}: ${value.toFixed(1)}%`}\n                      outerRadius={100}\n                      fill=\"#8884d8\"\n                      dataKey=\"value\"\n                    >\n                      {analysis.targetAllocation.map((entry, index) => (\n                        <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                      ))}\n                    </Pie>\n                    <Tooltip formatter={(value) => `${value.toFixed(2)}%`} />\n                  </PieChart>\n                </ResponsiveContainer>\n              </Box>\n            </Grid>\n\n            {/* Table */}\n            <Grid item xs={12} md={6}>\n              <TableContainer sx={{ maxHeight: 350, overflow: 'auto' }}>\n                <Table size=\"small\">\n                  <TableHead>\n                    <TableRow sx={{ bgcolor: '#e8f5e9', position: 'sticky', top: 0 }}>\n                      <TableCell sx={{ fontWeight: 'bold', width: '30%' }}>Symbol</TableCell>\n                      <TableCell align=\"right\" sx={{ fontWeight: 'bold', width: '35%' }}>Target Weight</TableCell>\n                      <TableCell align=\"right\" sx={{ fontWeight: 'bold', width: '35%' }}>Expected Impact</TableCell>\n                    </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {analysis.targetAllocation\n                      .filter(a => a.weight !== null && a.weight !== undefined)\n                      .map((allocation, idx) => {\n                      const weight = parseFloat(allocation.weight.replace('%', ''));\n                      const impact = weight > 15 ? 'High' : weight > 5 ? 'Medium' : 'Low';\n                      const impactColor = impact === 'High' ? '#2e7d32' : impact === 'Medium' ? '#f57c00' : '#666';\n                      return (\n                        <TableRow key={idx} sx={{ '&:hover': { bgcolor: '#f1f8f5' } }}>\n                          <TableCell sx={{ fontWeight: 'bold', color: '#333' }}>{allocation.symbol}</TableCell>\n                          <TableCell align=\"right\" sx={{ fontWeight: '700', color: '#2e7d32', fontSize: '1rem' }}>\n                            {weight.toFixed(2)}%\n                          </TableCell>\n                          <TableCell align=\"right\" sx={{ color: impactColor, fontWeight: 'bold' }}>\n                            {impact}\n                          </TableCell>\n                        </TableRow>\n                      );\n                    })}\n                  </TableBody>\n                </Table>\n              </TableContainer>\n\n              <Box sx={{ mt: 2, p: 2, bgcolor: '#f1f8f5', borderRadius: 1, borderLeft: '3px solid #4caf50' }}>\n                <Typography variant=\"caption\" sx={{ color: '#2e7d32', fontWeight: 'bold' }}>\n                  Total Portfolio: {analysis.targetAllocation\n                    .filter(a => a.weight !== null && a.weight !== undefined)\n                    .reduce((sum, a) => sum + parseFloat(a.weight.replace('%', '')), 0).toFixed(2)}% | {analysis.targetAllocation.filter(a => a.weight !== null && a.weight !== undefined).length} positions\n                </Typography>\n              </Box>\n            </Grid>\n          </Grid>\n        </Paper>\n      )}\n\n      {/* PORTFOLIO HOLDINGS - BEFORE & AFTER REBALANCE */}\n      {analysis?.allocationComparison && analysis.allocationComparison.before && analysis.allocationComparison.after && (\n        <Paper sx={{ p: 2, mb: 3 }}>\n          <Typography variant=\"h6\" sx={{ mb: 3, fontWeight: 'bold' }}> Portfolio Holdings: Before & After Rebalance</Typography>\n          <Typography variant=\"body2\" color=\"textSecondary\" sx={{ mb: 2 }}>\n            Individual position changes | Compare current weights vs target weights | Green = Improvement expected\n          </Typography>\n\n          <Box sx={{ display: 'flex', gap: 3, flexWrap: 'wrap' }}>\n            {/* BEFORE HOLDINGS */}\n            <Box sx={{ flex: '1 1 400px', minWidth: 400 }}>\n              <Typography variant=\"subtitle2\" sx={{ mb: 2, fontWeight: 'bold', color: '#ff6f00', display: 'flex', alignItems: 'center', gap: 1 }}>\n                 Current Holdings\n              </Typography>\n\n              <TableContainer>\n                <Table size=\"small\">\n                  <TableHead>\n                    <TableRow sx={{ bgcolor: '#fff3e0' }}>\n                      <TableCell sx={{ fontWeight: 'bold', width: '40%' }}>Symbol</TableCell>\n                      <TableCell align=\"right\" sx={{ fontWeight: 'bold', width: '30%' }}>Weight</TableCell>\n                      <TableCell align=\"right\" sx={{ fontWeight: 'bold', width: '30%' }}>Sector</TableCell>\n                    </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {analysis.allocationComparison.before && analysis.allocationComparison.before.length > 0 ? (\n                      analysis.allocationComparison.before.map((holding, idx) => (\n                        <TableRow key={idx} sx={{ '&:hover': { bgcolor: '#fff8f0' } }}>\n                          <TableCell sx={{ fontWeight: 'bold', color: '#333' }}>{holding.symbol}</TableCell>\n                          <TableCell align=\"right\" sx={{ color: '#ff9800', fontWeight: 'bold' }}>{holding.weight}</TableCell>\n                          <TableCell align=\"right\" sx={{ fontSize: '0.875rem', color: '#666' }}>{holding.sector || 'N/A'}</TableCell>\n                        </TableRow>\n                      ))\n                    ) : (\n                      <TableRow>\n                        <TableCell colSpan={3} align=\"center\" sx={{ color: '#999', py: 2 }}>No current holdings</TableCell>\n                      </TableRow>\n                    )}\n                  </TableBody>\n                </Table>\n              </TableContainer>\n\n              <Box sx={{ mt: 2, p: 1.5, bgcolor: '#fff9e6', borderRadius: 1, borderLeft: '3px solid #ff9800' }}>\n                <Typography variant=\"caption\" sx={{ color: '#ff6f00', fontWeight: 'bold' }}>\n                  {analysis.allocationComparison.before ? analysis.allocationComparison.before.length : 0} positions | Total: 100%\n                </Typography>\n              </Box>\n            </Box>\n\n            {/* AFTER HOLDINGS */}\n            <Box sx={{ flex: '1 1 400px', minWidth: 400 }}>\n              <Typography variant=\"subtitle2\" sx={{ mb: 2, fontWeight: 'bold', color: '#2e7d32', display: 'flex', alignItems: 'center', gap: 1 }}>\n                 Target Holdings\n              </Typography>\n\n              <TableContainer>\n                <Table size=\"small\">\n                  <TableHead>\n                    <TableRow sx={{ bgcolor: '#e8f5e9' }}>\n                      <TableCell sx={{ fontWeight: 'bold', width: '40%' }}>Symbol</TableCell>\n                      <TableCell align=\"right\" sx={{ fontWeight: 'bold', width: '30%' }}>Weight</TableCell>\n                      <TableCell align=\"right\" sx={{ fontWeight: 'bold', width: '30%' }}>Sector</TableCell>\n                    </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {analysis.allocationComparison.after && analysis.allocationComparison.after.length > 0 ? (\n                      analysis.allocationComparison.after.map((holding, idx) => {\n                        try {\n                          const beforeHolding = analysis.allocationComparison.before?.find(h => h.symbol === holding.symbol);\n                          const beforeWeightStr = beforeHolding?.weight?.toString() || '0%';\n                          const afterWeightStr = holding.weight?.toString() || '0%';\n                          const beforeWeightNum = parseFloat(beforeWeightStr.replace('%', ''));\n                          const afterWeightNum = parseFloat(afterWeightStr.replace('%', ''));\n                          const weightChanged = beforeHolding && beforeWeightNum !== afterWeightNum;\n                          const isNewPosition = !beforeHolding;\n\n                          return (\n                            <TableRow key={idx} sx={{\n                              bgcolor: isNewPosition ? '#c8e6c9' : weightChanged ? '#fff8e1' : 'transparent',\n                              '&:hover': { bgcolor: isNewPosition ? '#b5ddb5' : '#f5f5f5' }\n                            }}>\n                              <TableCell sx={{ fontWeight: 'bold', color: '#333' }}>\n                                {holding.symbol}\n                                {isNewPosition && <Chip label=\"NEW\" size=\"small\" sx={{ ml: 1, bgcolor: '#4caf50', color: 'white', height: '20px' }} />}\n                              </TableCell>\n                              <TableCell align=\"right\">\n                                <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'flex-end', gap: 0.5 }}>\n                                  <Typography sx={{ color: '#4caf50', fontWeight: 'bold' }}>\n                                    {holding.weight}\n                                  </Typography>\n                                  {weightChanged && !isNaN(beforeWeightNum) && !isNaN(afterWeightNum) && (\n                                    <Typography variant=\"caption\" sx={{\n                                      color: afterWeightNum > beforeWeightNum ? '#4caf50' : '#f44336',\n                                      fontWeight: 'bold'\n                                    }}>\n                                      {afterWeightNum > beforeWeightNum ? '' : ''} {Math.abs((afterWeightNum - beforeWeightNum).toFixed(2))}%\n                                    </Typography>\n                                  )}\n                                </Box>\n                              </TableCell>\n                              <TableCell align=\"right\" sx={{ fontSize: '0.875rem', color: '#666' }}>\n                                {holding.sector || 'N/A'}\n                              </TableCell>\n                            </TableRow>\n                          );\n                        } catch (e) {\n                          console.error('Error rendering holding:', e, holding);\n                          return null;\n                        }\n                      })\n                    ) : (\n                      <TableRow>\n                        <TableCell colSpan={3} align=\"center\" sx={{ color: '#999', py: 2 }}>No target holdings</TableCell>\n                      </TableRow>\n                    )}\n                  </TableBody>\n                </Table>\n              </TableContainer>\n\n              <Box sx={{ mt: 2, p: 1.5, bgcolor: '#f1f8e9', borderRadius: 1, borderLeft: '3px solid #4caf50' }}>\n                <Typography variant=\"caption\" sx={{ color: '#2e7d32', fontWeight: 'bold' }}>\n                  {analysis.allocationComparison.after ? analysis.allocationComparison.after.length : 0} positions | +{((analysis.allocationComparison.after?.length || 0) - (analysis.allocationComparison.before?.length || 0))} new\n                </Typography>\n              </Box>\n            </Box>\n          </Box>\n\n          {/* Change Summary */}\n          <Box sx={{ mt: 3, p: 2, bgcolor: '#f5f5f5', borderRadius: 1, borderLeft: '4px solid #1976d2' }}>\n            <Grid container spacing={2}>\n              <Grid item xs={12} sm={6} md={3}>\n                <Typography variant=\"caption\" color=\"textSecondary\">Current Holdings</Typography>\n                <Typography variant=\"body2\" sx={{ fontWeight: 'bold', color: '#ff9800' }}>\n                  {analysis.allocationComparison.before?.length || 0}\n                </Typography>\n              </Grid>\n              <Grid item xs={12} sm={6} md={3}>\n                <Typography variant=\"caption\" color=\"textSecondary\">Target Holdings</Typography>\n                <Typography variant=\"body2\" sx={{ fontWeight: 'bold', color: '#4caf50' }}>\n                  {analysis.allocationComparison.after?.length || 0}\n                </Typography>\n              </Grid>\n              <Grid item xs={12} sm={6} md={3}>\n                <Typography variant=\"caption\" color=\"textSecondary\">New Positions</Typography>\n                <Typography variant=\"body2\" sx={{ fontWeight: 'bold', color: '#2196f3' }}>\n                  +{((analysis.allocationComparison.after?.length || 0) - (analysis.allocationComparison.before?.length || 0))}\n                </Typography>\n              </Grid>\n              <Grid item xs={12} sm={6} md={3}>\n                <Typography variant=\"caption\" color=\"textSecondary\">Positions Exited</Typography>\n                <Typography variant=\"body2\" sx={{ fontWeight: 'bold', color: '#f44336' }}>\n                  {analysis.allocationComparison.before ? analysis.allocationComparison.before.filter(b => !analysis.allocationComparison.after?.find(a => a.symbol === b.symbol)).length : 0}\n                </Typography>\n              </Grid>\n            </Grid>\n          </Box>\n        </Paper>\n      )}\n\n    </Container>\n  );\n}\n","/**\n * Determines if a given element is a DOM element name (i.e. not a React component).\n */\nexport function isHostComponent(element) {\n  return typeof element === 'string';\n}","import { isHostComponent } from './isHostComponent';\n\n/**\n * Type of the ownerState based on the type of an element it applies to.\n * This resolves to the provided OwnerState for React components and `undefined` for host components.\n * Falls back to `OwnerState | undefined` when the exact type can't be determined in development time.\n */\n\n/**\n * Appends the ownerState object to the props, merging with the existing one if necessary.\n *\n * @param elementType Type of the element that owns the `existingProps`. If the element is a DOM node or undefined, `ownerState` is not applied.\n * @param otherProps Props of the element.\n * @param ownerState\n */\nexport function appendOwnerState(elementType, otherProps, ownerState) {\n  if (elementType === undefined || isHostComponent(elementType)) {\n    return otherProps;\n  }\n  return {\n    ...otherProps,\n    ownerState: {\n      ...otherProps.ownerState,\n      ...ownerState\n    }\n  };\n}","/**\n * Extracts event handlers from a given object.\n * A prop is considered an event handler if it is a function and its name starts with `on`.\n *\n * @param object An object to extract event handlers from.\n * @param excludeKeys An array of keys to exclude from the returned object.\n */\nexport function extractEventHandlers(object, excludeKeys = []) {\n  if (object === undefined) {\n    return {};\n  }\n  const result = {};\n  Object.keys(object).filter(prop => prop.match(/^on[A-Z]/) && typeof object[prop] === 'function' && !excludeKeys.includes(prop)).forEach(prop => {\n    result[prop] = object[prop];\n  });\n  return result;\n}","/**\n * If `componentProps` is a function, calls it with the provided `ownerState`.\n * Otherwise, just returns `componentProps`.\n */\nexport function resolveComponentProps(componentProps, ownerState, slotState) {\n  if (typeof componentProps === 'function') {\n    return componentProps(ownerState, slotState);\n  }\n  return componentProps;\n}","'use client';\n\nimport * as React from 'react';\n\n/**\n * Merges refs into a single memoized callback ref or `null`.\n *\n * ```tsx\n * const rootRef = React.useRef<Instance>(null);\n * const refFork = useForkRef(rootRef, props.ref);\n *\n * return (\n *   <Root {...props} ref={refFork} />\n * );\n * ```\n *\n * @param {Array<React.Ref<Instance> | undefined>} refs The ref array.\n * @returns {React.RefCallback<Instance> | null} The new ref callback.\n */\nexport default function useForkRef(...refs) {\n  const cleanupRef = React.useRef(undefined);\n  const refEffect = React.useCallback(instance => {\n    const cleanups = refs.map(ref => {\n      if (ref == null) {\n        return null;\n      }\n      if (typeof ref === 'function') {\n        const refCallback = ref;\n        const refCleanup = refCallback(instance);\n        return typeof refCleanup === 'function' ? refCleanup : () => {\n          refCallback(null);\n        };\n      }\n      ref.current = instance;\n      return () => {\n        ref.current = null;\n      };\n    });\n    return () => {\n      cleanups.forEach(refCleanup => refCleanup?.());\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, refs);\n  return React.useMemo(() => {\n    if (refs.every(ref => ref == null)) {\n      return null;\n    }\n    return value => {\n      if (cleanupRef.current) {\n        cleanupRef.current();\n        cleanupRef.current = undefined;\n      }\n      if (value != null) {\n        cleanupRef.current = refEffect(value);\n      }\n    };\n    // TODO: uncomment once we enable eslint-plugin-react-compiler // eslint-disable-next-line react-compiler/react-compiler -- intentionally ignoring that the dependency array must be an array literal\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, refs);\n}","/**\n * Removes event handlers from the given object.\n * A field is considered an event handler if it is a function with a name beginning with `on`.\n *\n * @param object Object to remove event handlers from.\n * @returns Object with event handlers removed.\n */\nexport function omitEventHandlers(object) {\n  if (object === undefined) {\n    return {};\n  }\n  const result = {};\n  Object.keys(object).filter(prop => !(prop.match(/^on[A-Z]/) && typeof object[prop] === 'function')).forEach(prop => {\n    result[prop] = object[prop];\n  });\n  return result;\n}","import clsx from 'clsx';\nimport { extractEventHandlers } from './extractEventHandlers';\nimport { omitEventHandlers } from './omitEventHandlers';\n/**\n * Merges the slot component internal props (usually coming from a hook)\n * with the externally provided ones.\n *\n * The merge order is (the latter overrides the former):\n * 1. The internal props (specified as a getter function to work with get*Props hook result)\n * 2. Additional props (specified internally on a Base UI component)\n * 3. External props specified on the owner component. These should only be used on a root slot.\n * 4. External props specified in the `slotProps.*` prop.\n * 5. The `className` prop - combined from all the above.\n * @param parameters\n * @returns\n */\nexport function mergeSlotProps(parameters) {\n  const {\n    getSlotProps,\n    additionalProps,\n    externalSlotProps,\n    externalForwardedProps,\n    className\n  } = parameters;\n  if (!getSlotProps) {\n    // The simpler case - getSlotProps is not defined, so no internal event handlers are defined,\n    // so we can simply merge all the props without having to worry about extracting event handlers.\n    const joinedClasses = clsx(additionalProps?.className, className, externalForwardedProps?.className, externalSlotProps?.className);\n    const mergedStyle = {\n      ...additionalProps?.style,\n      ...externalForwardedProps?.style,\n      ...externalSlotProps?.style\n    };\n    const props = {\n      ...additionalProps,\n      ...externalForwardedProps,\n      ...externalSlotProps\n    };\n    if (joinedClasses.length > 0) {\n      props.className = joinedClasses;\n    }\n    if (Object.keys(mergedStyle).length > 0) {\n      props.style = mergedStyle;\n    }\n    return {\n      props,\n      internalRef: undefined\n    };\n  }\n\n  // In this case, getSlotProps is responsible for calling the external event handlers.\n  // We don't need to include them in the merged props because of this.\n\n  const eventHandlers = extractEventHandlers({\n    ...externalForwardedProps,\n    ...externalSlotProps\n  });\n  const componentsPropsWithoutEventHandlers = omitEventHandlers(externalSlotProps);\n  const otherPropsWithoutEventHandlers = omitEventHandlers(externalForwardedProps);\n  const internalSlotProps = getSlotProps(eventHandlers);\n\n  // The order of classes is important here.\n  // Emotion (that we use in libraries consuming Base UI) depends on this order\n  // to properly override style. It requires the most important classes to be last\n  // (see https://github.com/mui/material-ui/pull/33205) for the related discussion.\n  const joinedClasses = clsx(internalSlotProps?.className, additionalProps?.className, className, externalForwardedProps?.className, externalSlotProps?.className);\n  const mergedStyle = {\n    ...internalSlotProps?.style,\n    ...additionalProps?.style,\n    ...externalForwardedProps?.style,\n    ...externalSlotProps?.style\n  };\n  const props = {\n    ...internalSlotProps,\n    ...additionalProps,\n    ...otherPropsWithoutEventHandlers,\n    ...componentsPropsWithoutEventHandlers\n  };\n  if (joinedClasses.length > 0) {\n    props.className = joinedClasses;\n  }\n  if (Object.keys(mergedStyle).length > 0) {\n    props.style = mergedStyle;\n  }\n  return {\n    props,\n    internalRef: internalSlotProps.ref\n  };\n}","'use client';\n\nimport { unstable_useForkRef as useForkRef } from '@mui/utils';\nimport { appendOwnerState } from './appendOwnerState';\nimport { mergeSlotProps } from './mergeSlotProps';\nimport { resolveComponentProps } from './resolveComponentProps';\n/**\n * @ignore - do not document.\n * Builds the props to be passed into the slot of an unstyled component.\n * It merges the internal props of the component with the ones supplied by the user, allowing to customize the behavior.\n * If the slot component is not a host component, it also merges in the `ownerState`.\n *\n * @param parameters.getSlotProps - A function that returns the props to be passed to the slot component.\n */\nexport function useSlotProps(parameters) {\n  const {\n    elementType,\n    externalSlotProps,\n    ownerState,\n    skipResolvingSlotProps = false,\n    ...rest\n  } = parameters;\n  const resolvedComponentsProps = skipResolvingSlotProps ? {} : resolveComponentProps(externalSlotProps, ownerState);\n  const {\n    props: mergedProps,\n    internalRef\n  } = mergeSlotProps({\n    ...rest,\n    externalSlotProps: resolvedComponentsProps\n  });\n  const ref = useForkRef(internalRef, resolvedComponentsProps?.ref, parameters.additionalProps?.ref);\n  const props = appendOwnerState(elementType, {\n    ...mergedProps,\n    ref\n  }, ownerState);\n  return props;\n}","export const areViewsEqual = (views, expectedViews) => {\n  if (views.length !== expectedViews.length) {\n    return false;\n  }\n  return expectedViews.every(expectedView => views.includes(expectedView));\n};\nexport const applyDefaultViewProps = ({\n  openTo,\n  defaultOpenTo,\n  views,\n  defaultViews\n}) => {\n  const viewsWithDefault = views != null ? views : defaultViews;\n  let openToWithDefault;\n  if (openTo != null) {\n    openToWithDefault = openTo;\n  } else if (viewsWithDefault.includes(defaultOpenTo)) {\n    openToWithDefault = defaultOpenTo;\n  } else if (viewsWithDefault.length > 0) {\n    openToWithDefault = viewsWithDefault[0];\n  } else {\n    throw new Error('MUI: The `views` prop must contain at least one view');\n  }\n  return {\n    views: viewsWithDefault,\n    openTo: openToWithDefault\n  };\n};","import { areViewsEqual } from './views';\nexport const mergeDateAndTime = (utils, dateParam, timeParam) => {\n  let mergedDate = dateParam;\n  mergedDate = utils.setHours(mergedDate, utils.getHours(timeParam));\n  mergedDate = utils.setMinutes(mergedDate, utils.getMinutes(timeParam));\n  mergedDate = utils.setSeconds(mergedDate, utils.getSeconds(timeParam));\n  return mergedDate;\n};\nexport const findClosestEnabledDate = ({\n  date,\n  disableFuture,\n  disablePast,\n  maxDate,\n  minDate,\n  isDateDisabled,\n  utils,\n  timezone\n}) => {\n  const today = mergeDateAndTime(utils, utils.dateWithTimezone(undefined, timezone), date);\n  if (disablePast && utils.isBefore(minDate, today)) {\n    minDate = today;\n  }\n  if (disableFuture && utils.isAfter(maxDate, today)) {\n    maxDate = today;\n  }\n  let forward = date;\n  let backward = date;\n  if (utils.isBefore(date, minDate)) {\n    forward = minDate;\n    backward = null;\n  }\n  if (utils.isAfter(date, maxDate)) {\n    if (backward) {\n      backward = maxDate;\n    }\n    forward = null;\n  }\n  while (forward || backward) {\n    if (forward && utils.isAfter(forward, maxDate)) {\n      forward = null;\n    }\n    if (backward && utils.isBefore(backward, minDate)) {\n      backward = null;\n    }\n    if (forward) {\n      if (!isDateDisabled(forward)) {\n        return forward;\n      }\n      forward = utils.addDays(forward, 1);\n    }\n    if (backward) {\n      if (!isDateDisabled(backward)) {\n        return backward;\n      }\n      backward = utils.addDays(backward, -1);\n    }\n  }\n  return null;\n};\nexport const replaceInvalidDateByNull = (utils, value) => value == null || !utils.isValid(value) ? null : value;\nexport const applyDefaultDate = (utils, value, defaultValue) => {\n  if (value == null || !utils.isValid(value)) {\n    return defaultValue;\n  }\n  return value;\n};\nexport const areDatesEqual = (utils, a, b) => {\n  if (!utils.isValid(a) && a != null && !utils.isValid(b) && b != null) {\n    return true;\n  }\n  return utils.isEqual(a, b);\n};\nexport const getMonthsInYear = (utils, year) => {\n  const firstMonth = utils.startOfYear(year);\n  const months = [firstMonth];\n  while (months.length < 12) {\n    const prevMonth = months[months.length - 1];\n    months.push(utils.addMonths(prevMonth, 1));\n  }\n  return months;\n};\nexport const getTodayDate = (utils, timezone, valueType) => valueType === 'date' ? utils.startOfDay(utils.dateWithTimezone(undefined, timezone)) : utils.dateWithTimezone(undefined, timezone);\nexport const formatMeridiem = (utils, meridiem) => {\n  const date = utils.setHours(utils.date(), meridiem === 'am' ? 2 : 14);\n  return utils.format(date, 'meridiem');\n};\nconst dateViews = ['year', 'month', 'day'];\nexport const isDatePickerView = view => dateViews.includes(view);\nexport const resolveDateFormat = (utils, {\n  format,\n  views\n}, isInToolbar) => {\n  if (format != null) {\n    return format;\n  }\n  const formats = utils.formats;\n  if (areViewsEqual(views, ['year'])) {\n    return formats.year;\n  }\n  if (areViewsEqual(views, ['month'])) {\n    return formats.month;\n  }\n  if (areViewsEqual(views, ['day'])) {\n    return formats.dayOfMonth;\n  }\n  if (areViewsEqual(views, ['month', 'year'])) {\n    return `${formats.month} ${formats.year}`;\n  }\n  if (areViewsEqual(views, ['day', 'month'])) {\n    return `${formats.month} ${formats.dayOfMonth}`;\n  }\n  if (isInToolbar) {\n    // Little localization hack (Google is doing the same for android native pickers):\n    // For english localization it is convenient to include weekday into the date \"Mon, Jun 1\".\n    // For other locales using strings like \"June 1\", without weekday.\n    return /en/.test(utils.getCurrentLocaleCode()) ? formats.normalDateWithWeekday : formats.normalDate;\n  }\n  return formats.keyboardDate;\n};\nexport const getWeekdays = (utils, date) => {\n  const start = utils.startOfWeek(date);\n  return [0, 1, 2, 3, 4, 5, 6].map(diff => utils.addDays(start, diff));\n};","import { areViewsEqual } from './views';\nconst timeViews = ['hours', 'minutes', 'seconds'];\nexport const isTimeView = view => timeViews.includes(view);\nexport const isInternalTimeView = view => timeViews.includes(view) || view === 'meridiem';\nexport const getMeridiem = (date, utils) => {\n  if (!date) {\n    return null;\n  }\n  return utils.getHours(date) >= 12 ? 'pm' : 'am';\n};\nexport const convertValueToMeridiem = (value, meridiem, ampm) => {\n  if (ampm) {\n    const currentMeridiem = value >= 12 ? 'pm' : 'am';\n    if (currentMeridiem !== meridiem) {\n      return meridiem === 'am' ? value - 12 : value + 12;\n    }\n  }\n  return value;\n};\nexport const convertToMeridiem = (time, meridiem, ampm, utils) => {\n  const newHoursAmount = convertValueToMeridiem(utils.getHours(time), meridiem, ampm);\n  return utils.setHours(time, newHoursAmount);\n};\nexport const getSecondsInDay = (date, utils) => {\n  return utils.getHours(date) * 3600 + utils.getMinutes(date) * 60 + utils.getSeconds(date);\n};\nexport const createIsAfterIgnoreDatePart = (disableIgnoringDatePartForTimeValidation, utils) => (dateLeft, dateRight) => {\n  if (disableIgnoringDatePartForTimeValidation) {\n    return utils.isAfter(dateLeft, dateRight);\n  }\n  return getSecondsInDay(dateLeft, utils) > getSecondsInDay(dateRight, utils);\n};\nexport const resolveTimeFormat = (utils, {\n  format,\n  views,\n  ampm\n}) => {\n  if (format != null) {\n    return format;\n  }\n  const formats = utils.formats;\n  if (areViewsEqual(views, ['hours'])) {\n    return ampm ? `${formats.hours12h} ${formats.meridiem}` : formats.hours24h;\n  }\n  if (areViewsEqual(views, ['minutes'])) {\n    return formats.minutes;\n  }\n  if (areViewsEqual(views, ['seconds'])) {\n    return formats.seconds;\n  }\n  if (areViewsEqual(views, ['minutes', 'seconds'])) {\n    return `${formats.minutes}:${formats.seconds}`;\n  }\n  if (areViewsEqual(views, ['hours', 'minutes', 'seconds'])) {\n    return ampm ? `${formats.hours12h}:${formats.minutes}:${formats.seconds} ${formats.meridiem}` : `${formats.hours24h}:${formats.minutes}:${formats.seconds}`;\n  }\n  return ampm ? `${formats.hours12h}:${formats.minutes} ${formats.meridiem}` : `${formats.hours24h}:${formats.minutes}`;\n};","import { createIsAfterIgnoreDatePart } from './time-utils';\nimport { mergeDateAndTime, getTodayDate } from './date-utils';\nexport const SECTION_TYPE_GRANULARITY = {\n  year: 1,\n  month: 2,\n  day: 3,\n  hours: 4,\n  minutes: 5,\n  seconds: 6,\n  milliseconds: 7\n};\nexport const getSectionTypeGranularity = sections => Math.max(...sections.map(section => {\n  var _SECTION_TYPE_GRANULA;\n  return (_SECTION_TYPE_GRANULA = SECTION_TYPE_GRANULARITY[section.type]) != null ? _SECTION_TYPE_GRANULA : 1;\n}));\nexport const getViewsGranularity = views => Math.max(...views.map(view => {\n  var _SECTION_TYPE_GRANULA2;\n  return (_SECTION_TYPE_GRANULA2 = SECTION_TYPE_GRANULARITY[view]) != null ? _SECTION_TYPE_GRANULA2 : 1;\n}));\nconst roundDate = (utils, granularity, date) => {\n  if (granularity === SECTION_TYPE_GRANULARITY.year) {\n    return utils.startOfYear(date);\n  }\n  if (granularity === SECTION_TYPE_GRANULARITY.month) {\n    return utils.startOfMonth(date);\n  }\n  if (granularity === SECTION_TYPE_GRANULARITY.day) {\n    return utils.startOfDay(date);\n  }\n\n  // We don't have startOfHour / startOfMinute / startOfSecond\n  let roundedDate = date;\n  if (granularity < SECTION_TYPE_GRANULARITY.minutes) {\n    roundedDate = utils.setMinutes(roundedDate, 0);\n  }\n  if (granularity < SECTION_TYPE_GRANULARITY.seconds) {\n    roundedDate = utils.setSeconds(roundedDate, 0);\n  }\n  if (granularity < SECTION_TYPE_GRANULARITY.milliseconds) {\n    roundedDate = utils.setMilliseconds(roundedDate, 0);\n  }\n  return roundedDate;\n};\nexport const getDefaultReferenceDate = ({\n  props,\n  utils,\n  granularity,\n  timezone,\n  getTodayDate: inGetTodayDate\n}) => {\n  var _props$disableIgnorin;\n  let referenceDate = inGetTodayDate ? inGetTodayDate() : roundDate(utils, granularity, getTodayDate(utils, timezone));\n  if (props.minDate != null && utils.isAfterDay(props.minDate, referenceDate)) {\n    referenceDate = roundDate(utils, granularity, props.minDate);\n  }\n  if (props.maxDate != null && utils.isBeforeDay(props.maxDate, referenceDate)) {\n    referenceDate = roundDate(utils, granularity, props.maxDate);\n  }\n  const isAfter = createIsAfterIgnoreDatePart((_props$disableIgnorin = props.disableIgnoringDatePartForTimeValidation) != null ? _props$disableIgnorin : false, utils);\n  if (props.minTime != null && isAfter(props.minTime, referenceDate)) {\n    referenceDate = roundDate(utils, granularity, props.disableIgnoringDatePartForTimeValidation ? props.minTime : mergeDateAndTime(utils, referenceDate, props.minTime));\n  }\n  if (props.maxTime != null && isAfter(referenceDate, props.maxTime)) {\n    referenceDate = roundDate(utils, granularity, props.disableIgnoringDatePartForTimeValidation ? props.maxTime : mergeDateAndTime(utils, referenceDate, props.maxTime));\n  }\n  return referenceDate;\n};","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { getMonthsInYear } from '../../utils/date-utils';\nexport const getDateSectionConfigFromFormatToken = (utils, formatToken) => {\n  const config = utils.formatTokenMap[formatToken];\n  if (config == null) {\n    throw new Error([`MUI: The token \"${formatToken}\" is not supported by the Date and Time Pickers.`, 'Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported.'].join('\\n'));\n  }\n  if (typeof config === 'string') {\n    return {\n      type: config,\n      contentType: config === 'meridiem' ? 'letter' : 'digit',\n      maxLength: undefined\n    };\n  }\n  return {\n    type: config.sectionType,\n    contentType: config.contentType,\n    maxLength: config.maxLength\n  };\n};\nconst getDeltaFromKeyCode = keyCode => {\n  switch (keyCode) {\n    case 'ArrowUp':\n      return 1;\n    case 'ArrowDown':\n      return -1;\n    case 'PageUp':\n      return 5;\n    case 'PageDown':\n      return -5;\n    default:\n      return 0;\n  }\n};\nexport const getDaysInWeekStr = (utils, timezone, format) => {\n  const elements = [];\n  const now = utils.dateWithTimezone(undefined, timezone);\n  const startDate = utils.startOfWeek(now);\n  const endDate = utils.endOfWeek(now);\n  let current = startDate;\n  while (utils.isBefore(current, endDate)) {\n    elements.push(current);\n    current = utils.addDays(current, 1);\n  }\n  return elements.map(weekDay => utils.formatByString(weekDay, format));\n};\nexport const getLetterEditingOptions = (utils, timezone, sectionType, format) => {\n  switch (sectionType) {\n    case 'month':\n      {\n        return getMonthsInYear(utils, utils.dateWithTimezone(undefined, timezone)).map(month => utils.formatByString(month, format));\n      }\n    case 'weekDay':\n      {\n        return getDaysInWeekStr(utils, timezone, format);\n      }\n    case 'meridiem':\n      {\n        const now = utils.dateWithTimezone(undefined, timezone);\n        return [utils.startOfDay(now), utils.endOfDay(now)].map(date => utils.formatByString(date, format));\n      }\n    default:\n      {\n        return [];\n      }\n  }\n};\nexport const cleanLeadingZeros = (utils, valueStr, size) => {\n  let cleanValueStr = valueStr;\n\n  // Remove the leading zeros\n  cleanValueStr = Number(cleanValueStr).toString();\n\n  // Add enough leading zeros to fill the section\n  while (cleanValueStr.length < size) {\n    cleanValueStr = `0${cleanValueStr}`;\n  }\n  return cleanValueStr;\n};\nexport const cleanDigitSectionValue = (utils, timezone, value, sectionBoundaries, section) => {\n  if (process.env.NODE_ENV !== 'production') {\n    if (section.type !== 'day' && section.contentType === 'digit-with-letter') {\n      throw new Error([`MUI: The token \"${section.format}\" is a digit format with letter in it.'\n             This type of format is only supported for 'day' sections`].join('\\n'));\n    }\n  }\n  if (section.type === 'day' && section.contentType === 'digit-with-letter') {\n    const date = utils.setDate(sectionBoundaries.longestMonth, value);\n    return utils.formatByString(date, section.format);\n  }\n\n  // queryValue without leading `0` (`01` => `1`)\n  const valueStr = value.toString();\n  if (section.hasLeadingZerosInInput) {\n    return cleanLeadingZeros(utils, valueStr, section.maxLength);\n  }\n  return valueStr;\n};\nexport const adjustSectionValue = (utils, timezone, section, keyCode, sectionsValueBoundaries, activeDate, stepsAttributes) => {\n  const delta = getDeltaFromKeyCode(keyCode);\n  const isStart = keyCode === 'Home';\n  const isEnd = keyCode === 'End';\n  const shouldSetAbsolute = section.value === '' || isStart || isEnd;\n  const adjustDigitSection = () => {\n    const sectionBoundaries = sectionsValueBoundaries[section.type]({\n      currentDate: activeDate,\n      format: section.format,\n      contentType: section.contentType\n    });\n    const getCleanValue = value => cleanDigitSectionValue(utils, timezone, value, sectionBoundaries, section);\n    const step = section.type === 'minutes' && stepsAttributes != null && stepsAttributes.minutesStep ? stepsAttributes.minutesStep : 1;\n    const currentSectionValue = parseInt(section.value, 10);\n    let newSectionValueNumber = currentSectionValue + delta * step;\n    if (shouldSetAbsolute) {\n      if (section.type === 'year' && !isEnd && !isStart) {\n        return utils.formatByString(utils.dateWithTimezone(undefined, timezone), section.format);\n      }\n      if (delta > 0 || isStart) {\n        newSectionValueNumber = sectionBoundaries.minimum;\n      } else {\n        newSectionValueNumber = sectionBoundaries.maximum;\n      }\n    }\n    if (newSectionValueNumber % step !== 0) {\n      if (delta < 0 || isStart) {\n        newSectionValueNumber += step - (step + newSectionValueNumber) % step; // for JS -3 % 5 = -3 (should be 2)\n      }\n      if (delta > 0 || isEnd) {\n        newSectionValueNumber -= newSectionValueNumber % step;\n      }\n    }\n    if (newSectionValueNumber > sectionBoundaries.maximum) {\n      return getCleanValue(sectionBoundaries.minimum + (newSectionValueNumber - sectionBoundaries.maximum - 1) % (sectionBoundaries.maximum - sectionBoundaries.minimum + 1));\n    }\n    if (newSectionValueNumber < sectionBoundaries.minimum) {\n      return getCleanValue(sectionBoundaries.maximum - (sectionBoundaries.minimum - newSectionValueNumber - 1) % (sectionBoundaries.maximum - sectionBoundaries.minimum + 1));\n    }\n    return getCleanValue(newSectionValueNumber);\n  };\n  const adjustLetterSection = () => {\n    const options = getLetterEditingOptions(utils, timezone, section.type, section.format);\n    if (options.length === 0) {\n      return section.value;\n    }\n    if (shouldSetAbsolute) {\n      if (delta > 0 || isStart) {\n        return options[0];\n      }\n      return options[options.length - 1];\n    }\n    const currentOptionIndex = options.indexOf(section.value);\n    const newOptionIndex = (currentOptionIndex + options.length + delta) % options.length;\n    return options[newOptionIndex];\n  };\n  if (section.contentType === 'digit' || section.contentType === 'digit-with-letter') {\n    return adjustDigitSection();\n  }\n  return adjustLetterSection();\n};\nexport const getSectionVisibleValue = (section, target) => {\n  let value = section.value || section.placeholder;\n  const hasLeadingZeros = target === 'non-input' ? section.hasLeadingZerosInFormat : section.hasLeadingZerosInInput;\n  if (target === 'non-input' && section.hasLeadingZerosInInput && !section.hasLeadingZerosInFormat) {\n    value = Number(value).toString();\n  }\n\n  // In the input, we add an empty character at the end of each section without leading zeros.\n  // This makes sure that `onChange` will always be fired.\n  // Otherwise, when your input value equals `1/dd/yyyy` (format `M/DD/YYYY` on DayJs),\n  // If you press `1`, on the first section, the new value is also `1/dd/yyyy`,\n  // So the browser will not fire the input `onChange`.\n  const shouldAddInvisibleSpace = ['input-rtl', 'input-ltr'].includes(target) && section.contentType === 'digit' && !hasLeadingZeros && value.length === 1;\n  if (shouldAddInvisibleSpace) {\n    value = `${value}\\u200e`;\n  }\n  if (target === 'input-rtl') {\n    value = `\\u2068${value}\\u2069`;\n  }\n  return value;\n};\nexport const cleanString = dirtyString => dirtyString.replace(/[\\u2066\\u2067\\u2068\\u2069]/g, '');\nexport const addPositionPropertiesToSections = (sections, isRTL) => {\n  let position = 0;\n  let positionInInput = isRTL ? 1 : 0;\n  const newSections = [];\n  for (let i = 0; i < sections.length; i += 1) {\n    const section = sections[i];\n    const renderedValue = getSectionVisibleValue(section, isRTL ? 'input-rtl' : 'input-ltr');\n    const sectionStr = `${section.startSeparator}${renderedValue}${section.endSeparator}`;\n    const sectionLength = cleanString(sectionStr).length;\n    const sectionLengthInInput = sectionStr.length;\n\n    // The ...InInput values consider the unicode characters but do include them in their indexes\n    const cleanedValue = cleanString(renderedValue);\n    const startInInput = positionInInput + renderedValue.indexOf(cleanedValue[0]) + section.startSeparator.length;\n    const endInInput = startInInput + cleanedValue.length;\n    newSections.push(_extends({}, section, {\n      start: position,\n      end: position + sectionLength,\n      startInInput,\n      endInInput\n    }));\n    position += sectionLength;\n    // Move position to the end of string associated to the current section\n    positionInInput += sectionLengthInInput;\n  }\n  return newSections;\n};\nconst getSectionPlaceholder = (utils, timezone, localeText, sectionConfig, sectionFormat) => {\n  switch (sectionConfig.type) {\n    case 'year':\n      {\n        return localeText.fieldYearPlaceholder({\n          digitAmount: utils.formatByString(utils.dateWithTimezone(undefined, timezone), sectionFormat).length,\n          format: sectionFormat\n        });\n      }\n    case 'month':\n      {\n        return localeText.fieldMonthPlaceholder({\n          contentType: sectionConfig.contentType,\n          format: sectionFormat\n        });\n      }\n    case 'day':\n      {\n        return localeText.fieldDayPlaceholder({\n          format: sectionFormat\n        });\n      }\n    case 'weekDay':\n      {\n        return localeText.fieldWeekDayPlaceholder({\n          contentType: sectionConfig.contentType,\n          format: sectionFormat\n        });\n      }\n    case 'hours':\n      {\n        return localeText.fieldHoursPlaceholder({\n          format: sectionFormat\n        });\n      }\n    case 'minutes':\n      {\n        return localeText.fieldMinutesPlaceholder({\n          format: sectionFormat\n        });\n      }\n    case 'seconds':\n      {\n        return localeText.fieldSecondsPlaceholder({\n          format: sectionFormat\n        });\n      }\n    case 'meridiem':\n      {\n        return localeText.fieldMeridiemPlaceholder({\n          format: sectionFormat\n        });\n      }\n    default:\n      {\n        return sectionFormat;\n      }\n  }\n};\nexport const changeSectionValueFormat = (utils, valueStr, currentFormat, newFormat) => {\n  if (process.env.NODE_ENV !== 'production') {\n    if (getDateSectionConfigFromFormatToken(utils, currentFormat).type === 'weekDay') {\n      throw new Error(\"changeSectionValueFormat doesn't support week day formats\");\n    }\n  }\n  return utils.formatByString(utils.parse(valueStr, currentFormat), newFormat);\n};\nconst isFourDigitYearFormat = (utils, timezone, format) => utils.formatByString(utils.dateWithTimezone(undefined, timezone), format).length === 4;\nexport const doesSectionFormatHaveLeadingZeros = (utils, timezone, contentType, sectionType, format) => {\n  if (contentType !== 'digit') {\n    return false;\n  }\n  const now = utils.dateWithTimezone(undefined, timezone);\n  switch (sectionType) {\n    // We can't use `changeSectionValueFormat`, because  `utils.parse('1', 'YYYY')` returns `1971` instead of `1`.\n    case 'year':\n      {\n        if (isFourDigitYearFormat(utils, timezone, format)) {\n          const formatted0001 = utils.formatByString(utils.setYear(now, 1), format);\n          return formatted0001 === '0001';\n        }\n        const formatted2001 = utils.formatByString(utils.setYear(now, 2001), format);\n        return formatted2001 === '01';\n      }\n    case 'month':\n      {\n        return utils.formatByString(utils.startOfYear(now), format).length > 1;\n      }\n    case 'day':\n      {\n        return utils.formatByString(utils.startOfMonth(now), format).length > 1;\n      }\n    case 'weekDay':\n      {\n        return utils.formatByString(utils.startOfWeek(now), format).length > 1;\n      }\n    case 'hours':\n      {\n        return utils.formatByString(utils.setHours(now, 1), format).length > 1;\n      }\n    case 'minutes':\n      {\n        return utils.formatByString(utils.setMinutes(now, 1), format).length > 1;\n      }\n    case 'seconds':\n      {\n        return utils.formatByString(utils.setSeconds(now, 1), format).length > 1;\n      }\n    default:\n      {\n        throw new Error('Invalid section type');\n      }\n  }\n};\nconst getEscapedPartsFromFormat = (utils, format) => {\n  const escapedParts = [];\n  const {\n    start: startChar,\n    end: endChar\n  } = utils.escapedCharacters;\n  const regExp = new RegExp(`(\\\\${startChar}[^\\\\${endChar}]*\\\\${endChar})+`, 'g');\n  let match = null;\n  // eslint-disable-next-line no-cond-assign\n  while (match = regExp.exec(format)) {\n    escapedParts.push({\n      start: match.index,\n      end: regExp.lastIndex - 1\n    });\n  }\n  return escapedParts;\n};\nexport const splitFormatIntoSections = (utils, timezone, localeText, format, date, formatDensity, shouldRespectLeadingZeros, isRTL) => {\n  let startSeparator = '';\n  const sections = [];\n  const now = utils.date();\n  const commitToken = token => {\n    if (token === '') {\n      return null;\n    }\n    const sectionConfig = getDateSectionConfigFromFormatToken(utils, token);\n    const hasLeadingZerosInFormat = doesSectionFormatHaveLeadingZeros(utils, timezone, sectionConfig.contentType, sectionConfig.type, token);\n    const hasLeadingZerosInInput = shouldRespectLeadingZeros ? hasLeadingZerosInFormat : sectionConfig.contentType === 'digit';\n    const isValidDate = date != null && utils.isValid(date);\n    let sectionValue = isValidDate ? utils.formatByString(date, token) : '';\n    let maxLength = null;\n    if (hasLeadingZerosInInput) {\n      if (hasLeadingZerosInFormat) {\n        maxLength = sectionValue === '' ? utils.formatByString(now, token).length : sectionValue.length;\n      } else {\n        if (sectionConfig.maxLength == null) {\n          throw new Error(`MUI: The token ${token} should have a 'maxDigitNumber' property on it's adapter`);\n        }\n        maxLength = sectionConfig.maxLength;\n        if (isValidDate) {\n          sectionValue = cleanLeadingZeros(utils, sectionValue, maxLength);\n        }\n      }\n    }\n    sections.push(_extends({}, sectionConfig, {\n      format: token,\n      maxLength,\n      value: sectionValue,\n      placeholder: getSectionPlaceholder(utils, timezone, localeText, sectionConfig, token),\n      hasLeadingZeros: hasLeadingZerosInFormat,\n      hasLeadingZerosInFormat,\n      hasLeadingZerosInInput,\n      startSeparator: sections.length === 0 ? startSeparator : '',\n      endSeparator: '',\n      modified: false\n    }));\n    return null;\n  };\n\n  // Expand the provided format\n  let formatExpansionOverflow = 10;\n  let prevFormat = format;\n  let nextFormat = utils.expandFormat(format);\n  while (nextFormat !== prevFormat) {\n    prevFormat = nextFormat;\n    nextFormat = utils.expandFormat(prevFormat);\n    formatExpansionOverflow -= 1;\n    if (formatExpansionOverflow < 0) {\n      throw new Error('MUI: The format expansion seems to be  enter in an infinite loop. Please open an issue with the format passed to the picker component');\n    }\n  }\n  const expandedFormat = nextFormat;\n\n  // Get start/end indexes of escaped sections\n  const escapedParts = getEscapedPartsFromFormat(utils, expandedFormat);\n\n  // This RegExp test if the beginning of a string correspond to a supported token\n  const isTokenStartRegExp = new RegExp(`^(${Object.keys(utils.formatTokenMap).sort((a, b) => b.length - a.length) // Sort to put longest word first\n  .join('|')})`, 'g') // used to get access to lastIndex state\n  ;\n  let currentTokenValue = '';\n  for (let i = 0; i < expandedFormat.length; i += 1) {\n    const escapedPartOfCurrentChar = escapedParts.find(escapeIndex => escapeIndex.start <= i && escapeIndex.end >= i);\n    const char = expandedFormat[i];\n    const isEscapedChar = escapedPartOfCurrentChar != null;\n    const potentialToken = `${currentTokenValue}${expandedFormat.slice(i)}`;\n    const regExpMatch = isTokenStartRegExp.test(potentialToken);\n    if (!isEscapedChar && char.match(/([A-Za-z]+)/) && regExpMatch) {\n      currentTokenValue = potentialToken.slice(0, isTokenStartRegExp.lastIndex);\n      i += isTokenStartRegExp.lastIndex - 1;\n    } else {\n      // If we are on the opening or closing character of an escaped part of the format,\n      // Then we ignore this character.\n      const isEscapeBoundary = isEscapedChar && (escapedPartOfCurrentChar == null ? void 0 : escapedPartOfCurrentChar.start) === i || (escapedPartOfCurrentChar == null ? void 0 : escapedPartOfCurrentChar.end) === i;\n      if (!isEscapeBoundary) {\n        commitToken(currentTokenValue);\n        currentTokenValue = '';\n        if (sections.length === 0) {\n          startSeparator += char;\n        } else {\n          sections[sections.length - 1].endSeparator += char;\n        }\n      }\n    }\n  }\n  commitToken(currentTokenValue);\n  return sections.map(section => {\n    const cleanSeparator = separator => {\n      let cleanedSeparator = separator;\n      if (isRTL && cleanedSeparator !== null && cleanedSeparator.includes(' ')) {\n        cleanedSeparator = `\\u2069${cleanedSeparator}\\u2066`;\n      }\n      if (formatDensity === 'spacious' && ['/', '.', '-'].includes(cleanedSeparator)) {\n        cleanedSeparator = ` ${cleanedSeparator} `;\n      }\n      return cleanedSeparator;\n    };\n    section.startSeparator = cleanSeparator(section.startSeparator);\n    section.endSeparator = cleanSeparator(section.endSeparator);\n    return section;\n  });\n};\n\n/**\n * Some date libraries like `dayjs` don't support parsing from date with escaped characters.\n * To make sure that the parsing works, we are building a format and a date without any separator.\n */\nexport const getDateFromDateSections = (utils, sections) => {\n  // If we have both a day and a weekDay section,\n  // Then we skip the weekDay in the parsing because libraries like dayjs can't parse complicated formats containing a weekDay.\n  // dayjs(dayjs().format('dddd MMMM D YYYY'), 'dddd MMMM D YYYY')) // returns `Invalid Date` even if the format is valid.\n  const shouldSkipWeekDays = sections.some(section => section.type === 'day');\n  const sectionFormats = [];\n  const sectionValues = [];\n  for (let i = 0; i < sections.length; i += 1) {\n    const section = sections[i];\n    const shouldSkip = shouldSkipWeekDays && section.type === 'weekDay';\n    if (!shouldSkip) {\n      sectionFormats.push(section.format);\n      sectionValues.push(getSectionVisibleValue(section, 'non-input'));\n    }\n  }\n  const formatWithoutSeparator = sectionFormats.join(' ');\n  const dateWithoutSeparatorStr = sectionValues.join(' ');\n  return utils.parse(dateWithoutSeparatorStr, formatWithoutSeparator);\n};\nexport const createDateStrForInputFromSections = (sections, isRTL) => {\n  const formattedSections = sections.map(section => {\n    const dateValue = getSectionVisibleValue(section, isRTL ? 'input-rtl' : 'input-ltr');\n    return `${section.startSeparator}${dateValue}${section.endSeparator}`;\n  });\n  const dateStr = formattedSections.join('');\n  if (!isRTL) {\n    return dateStr;\n  }\n\n  // \\u2066: start left-to-right isolation\n  // \\u2067: start right-to-left isolation\n  // \\u2068: start first strong character isolation\n  // \\u2069: pop isolation\n  // wrap into an isolated group such that separators can split the string in smaller ones by adding \\u2069\\u2068\n  return `\\u2066${dateStr}\\u2069`;\n};\nexport const getSectionsBoundaries = (utils, timezone) => {\n  const today = utils.dateWithTimezone(undefined, timezone);\n  const endOfYear = utils.endOfYear(today);\n  const endOfDay = utils.endOfDay(today);\n  const {\n    maxDaysInMonth,\n    longestMonth\n  } = getMonthsInYear(utils, today).reduce((acc, month) => {\n    const daysInMonth = utils.getDaysInMonth(month);\n    if (daysInMonth > acc.maxDaysInMonth) {\n      return {\n        maxDaysInMonth: daysInMonth,\n        longestMonth: month\n      };\n    }\n    return acc;\n  }, {\n    maxDaysInMonth: 0,\n    longestMonth: null\n  });\n  return {\n    year: ({\n      format\n    }) => ({\n      minimum: 0,\n      maximum: isFourDigitYearFormat(utils, timezone, format) ? 9999 : 99\n    }),\n    month: () => ({\n      minimum: 1,\n      // Assumption: All years have the same amount of months\n      maximum: utils.getMonth(endOfYear) + 1\n    }),\n    day: ({\n      currentDate\n    }) => ({\n      minimum: 1,\n      maximum: currentDate != null && utils.isValid(currentDate) ? utils.getDaysInMonth(currentDate) : maxDaysInMonth,\n      longestMonth: longestMonth\n    }),\n    weekDay: ({\n      format,\n      contentType\n    }) => {\n      if (contentType === 'digit') {\n        const daysInWeek = getDaysInWeekStr(utils, timezone, format).map(Number);\n        return {\n          minimum: Math.min(...daysInWeek),\n          maximum: Math.max(...daysInWeek)\n        };\n      }\n      return {\n        minimum: 1,\n        maximum: 7\n      };\n    },\n    hours: ({\n      format\n    }) => {\n      const lastHourInDay = utils.getHours(endOfDay);\n      const hasMeridiem = utils.formatByString(utils.endOfDay(today), format) !== lastHourInDay.toString();\n      if (hasMeridiem) {\n        return {\n          minimum: 1,\n          maximum: Number(utils.formatByString(utils.startOfDay(today), format))\n        };\n      }\n      return {\n        minimum: 0,\n        maximum: lastHourInDay\n      };\n    },\n    minutes: () => ({\n      minimum: 0,\n      // Assumption: All years have the same amount of minutes\n      maximum: utils.getMinutes(endOfDay)\n    }),\n    seconds: () => ({\n      minimum: 0,\n      // Assumption: All years have the same amount of seconds\n      maximum: utils.getSeconds(endOfDay)\n    }),\n    meridiem: () => ({\n      minimum: 0,\n      maximum: 0\n    })\n  };\n};\nlet warnedOnceInvalidSection = false;\nexport const validateSections = (sections, valueType) => {\n  if (process.env.NODE_ENV !== 'production') {\n    if (!warnedOnceInvalidSection) {\n      const supportedSections = [];\n      if (['date', 'date-time'].includes(valueType)) {\n        supportedSections.push('weekDay', 'day', 'month', 'year');\n      }\n      if (['time', 'date-time'].includes(valueType)) {\n        supportedSections.push('hours', 'minutes', 'seconds', 'meridiem');\n      }\n      const invalidSection = sections.find(section => !supportedSections.includes(section.type));\n      if (invalidSection) {\n        console.warn(`MUI: The field component you are using is not compatible with the \"${invalidSection.type} date section.`, `The supported date sections are [\"${supportedSections.join('\", \"')}\"]\\`.`);\n        warnedOnceInvalidSection = true;\n      }\n    }\n  }\n};\nconst transferDateSectionValue = (utils, timezone, section, dateToTransferFrom, dateToTransferTo) => {\n  switch (section.type) {\n    case 'year':\n      {\n        return utils.setYear(dateToTransferTo, utils.getYear(dateToTransferFrom));\n      }\n    case 'month':\n      {\n        return utils.setMonth(dateToTransferTo, utils.getMonth(dateToTransferFrom));\n      }\n    case 'weekDay':\n      {\n        const formattedDaysInWeek = getDaysInWeekStr(utils, timezone, section.format);\n        const dayInWeekStrOfActiveDate = utils.formatByString(dateToTransferFrom, section.format);\n        const dayInWeekOfActiveDate = formattedDaysInWeek.indexOf(dayInWeekStrOfActiveDate);\n        const dayInWeekOfNewSectionValue = formattedDaysInWeek.indexOf(section.value);\n        const diff = dayInWeekOfNewSectionValue - dayInWeekOfActiveDate;\n        return utils.addDays(dateToTransferFrom, diff);\n      }\n    case 'day':\n      {\n        return utils.setDate(dateToTransferTo, utils.getDate(dateToTransferFrom));\n      }\n    case 'meridiem':\n      {\n        const isAM = utils.getHours(dateToTransferFrom) < 12;\n        const mergedDateHours = utils.getHours(dateToTransferTo);\n        if (isAM && mergedDateHours >= 12) {\n          return utils.addHours(dateToTransferTo, -12);\n        }\n        if (!isAM && mergedDateHours < 12) {\n          return utils.addHours(dateToTransferTo, 12);\n        }\n        return dateToTransferTo;\n      }\n    case 'hours':\n      {\n        return utils.setHours(dateToTransferTo, utils.getHours(dateToTransferFrom));\n      }\n    case 'minutes':\n      {\n        return utils.setMinutes(dateToTransferTo, utils.getMinutes(dateToTransferFrom));\n      }\n    case 'seconds':\n      {\n        return utils.setSeconds(dateToTransferTo, utils.getSeconds(dateToTransferFrom));\n      }\n    default:\n      {\n        return dateToTransferTo;\n      }\n  }\n};\nconst reliableSectionModificationOrder = {\n  year: 1,\n  month: 2,\n  day: 3,\n  weekDay: 4,\n  hours: 5,\n  minutes: 6,\n  seconds: 7,\n  meridiem: 8\n};\nexport const mergeDateIntoReferenceDate = (utils, timezone, dateToTransferFrom, sections, referenceDate, shouldLimitToEditedSections) =>\n// cloning sections before sort to avoid mutating it\n[...sections].sort((a, b) => reliableSectionModificationOrder[a.type] - reliableSectionModificationOrder[b.type]).reduce((mergedDate, section) => {\n  if (!shouldLimitToEditedSections || section.modified) {\n    return transferDateSectionValue(utils, timezone, section, dateToTransferFrom, mergedDate);\n  }\n  return mergedDate;\n}, referenceDate);\nexport const isAndroid = () => navigator.userAgent.toLowerCase().indexOf('android') > -1;\nexport const getSectionOrder = (sections, isRTL) => {\n  const neighbors = {};\n  if (!isRTL) {\n    sections.forEach((_, index) => {\n      const leftIndex = index === 0 ? null : index - 1;\n      const rightIndex = index === sections.length - 1 ? null : index + 1;\n      neighbors[index] = {\n        leftIndex,\n        rightIndex\n      };\n    });\n    return {\n      neighbors,\n      startIndex: 0,\n      endIndex: sections.length - 1\n    };\n  }\n  const rtl2ltr = {};\n  const ltr2rtl = {};\n  let groupedSectionsStart = 0;\n  let groupedSectionsEnd = 0;\n  let RTLIndex = sections.length - 1;\n  while (RTLIndex >= 0) {\n    groupedSectionsEnd = sections.findIndex(\n    // eslint-disable-next-line @typescript-eslint/no-loop-func\n    (section, index) => {\n      var _section$endSeparator;\n      return index >= groupedSectionsStart && ((_section$endSeparator = section.endSeparator) == null ? void 0 : _section$endSeparator.includes(' ')) &&\n      // Special case where the spaces were not there in the initial input\n      section.endSeparator !== ' / ';\n    });\n    if (groupedSectionsEnd === -1) {\n      groupedSectionsEnd = sections.length - 1;\n    }\n    for (let i = groupedSectionsEnd; i >= groupedSectionsStart; i -= 1) {\n      ltr2rtl[i] = RTLIndex;\n      rtl2ltr[RTLIndex] = i;\n      RTLIndex -= 1;\n    }\n    groupedSectionsStart = groupedSectionsEnd + 1;\n  }\n  sections.forEach((_, index) => {\n    const rtlIndex = ltr2rtl[index];\n    const leftIndex = rtlIndex === 0 ? null : rtl2ltr[rtlIndex - 1];\n    const rightIndex = rtlIndex === sections.length - 1 ? null : rtl2ltr[rtlIndex + 1];\n    neighbors[index] = {\n      leftIndex,\n      rightIndex\n    };\n  });\n  return {\n    neighbors,\n    startIndex: rtl2ltr[0],\n    endIndex: rtl2ltr[sections.length - 1]\n  };\n};","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"value\", \"referenceDate\"];\nimport { areDatesEqual, getTodayDate, replaceInvalidDateByNull } from './date-utils';\nimport { getDefaultReferenceDate } from './getDefaultReferenceDate';\nimport { addPositionPropertiesToSections, createDateStrForInputFromSections } from '../hooks/useField/useField.utils';\nexport const singleItemValueManager = {\n  emptyValue: null,\n  getTodayValue: getTodayDate,\n  getInitialReferenceValue: _ref => {\n    let {\n        value,\n        referenceDate\n      } = _ref,\n      params = _objectWithoutPropertiesLoose(_ref, _excluded);\n    if (value != null && params.utils.isValid(value)) {\n      return value;\n    }\n    if (referenceDate != null) {\n      return referenceDate;\n    }\n    return getDefaultReferenceDate(params);\n  },\n  cleanValue: replaceInvalidDateByNull,\n  areValuesEqual: areDatesEqual,\n  isSameError: (a, b) => a === b,\n  hasError: error => error != null,\n  defaultErrorState: null,\n  getTimezone: (utils, value) => value == null || !utils.isValid(value) ? null : utils.getTimezone(value),\n  setTimezone: (utils, timezone, value) => value == null ? null : utils.setTimezone(value, timezone)\n};\nexport const singleItemFieldValueManager = {\n  updateReferenceValue: (utils, value, prevReferenceValue) => value == null || !utils.isValid(value) ? prevReferenceValue : value,\n  getSectionsFromValue: (utils, date, prevSections, isRTL, getSectionsFromDate) => {\n    const shouldReUsePrevDateSections = !utils.isValid(date) && !!prevSections;\n    if (shouldReUsePrevDateSections) {\n      return prevSections;\n    }\n    return addPositionPropertiesToSections(getSectionsFromDate(date), isRTL);\n  },\n  getValueStrFromSections: createDateStrForInputFromSections,\n  getActiveDateManager: (utils, state) => ({\n    date: state.value,\n    referenceDate: state.referenceValue,\n    getSections: sections => sections,\n    getNewValuesFromNewActiveDate: newActiveDate => ({\n      value: newActiveDate,\n      referenceValue: newActiveDate == null || !utils.isValid(newActiveDate) ? state.referenceValue : newActiveDate\n    })\n  }),\n  parseValueStr: (valueStr, referenceValue, parseDate) => parseDate(valueStr.trim(), referenceValue)\n};","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"localeText\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { useThemeProps } from '@mui/material/styles';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const MuiPickersAdapterContext = /*#__PURE__*/React.createContext(null);\nif (process.env.NODE_ENV !== 'production') {\n  MuiPickersAdapterContext.displayName = 'MuiPickersAdapterContext';\n}\n/**\n * Demos:\n *\n * - [Date format and localization](https://mui.com/x/react-date-pickers/adapters-locale/)\n * - [Calendar systems](https://mui.com/x/react-date-pickers/calendar-systems/)\n * - [Translated components](https://mui.com/x/react-date-pickers/localization/)\n * - [UTC and timezones](https://mui.com/x/react-date-pickers/timezone/)\n *\n * API:\n *\n * - [LocalizationProvider API](https://mui.com/x/api/date-pickers/localization-provider/)\n */\nexport const LocalizationProvider = function LocalizationProvider(inProps) {\n  var _React$useContext;\n  const {\n      localeText: inLocaleText\n    } = inProps,\n    otherInProps = _objectWithoutPropertiesLoose(inProps, _excluded);\n  const {\n    utils: parentUtils,\n    localeText: parentLocaleText\n  } = (_React$useContext = React.useContext(MuiPickersAdapterContext)) != null ? _React$useContext : {\n    utils: undefined,\n    localeText: undefined\n  };\n  const props = useThemeProps({\n    // We don't want to pass the `localeText` prop to the theme, that way it will always return the theme value,\n    // We will then merge this theme value with our value manually\n    props: otherInProps,\n    name: 'MuiLocalizationProvider'\n  });\n  const {\n    children,\n    dateAdapter: DateAdapter,\n    dateFormats,\n    dateLibInstance,\n    adapterLocale,\n    localeText: themeLocaleText\n  } = props;\n  const localeText = React.useMemo(() => _extends({}, themeLocaleText, parentLocaleText, inLocaleText), [themeLocaleText, parentLocaleText, inLocaleText]);\n  const utils = React.useMemo(() => {\n    if (!DateAdapter) {\n      if (parentUtils) {\n        return parentUtils;\n      }\n      return null;\n    }\n    const adapter = new DateAdapter({\n      locale: adapterLocale,\n      formats: dateFormats,\n      instance: dateLibInstance\n    });\n    if (!adapter.isMUIAdapter) {\n      throw new Error(['MUI: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`', \"For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`\", 'More information on the installation documentation: https://mui.com/x/react-date-pickers/getting-started/#installation'].join(`\\n`));\n    }\n    return adapter;\n  }, [DateAdapter, adapterLocale, dateFormats, dateLibInstance, parentUtils]);\n  const defaultDates = React.useMemo(() => {\n    if (!utils) {\n      return null;\n    }\n    return {\n      minDate: utils.date('1900-01-01T00:00:00.000'),\n      maxDate: utils.date('2099-12-31T00:00:00.000')\n    };\n  }, [utils]);\n  const contextValue = React.useMemo(() => {\n    return {\n      utils,\n      defaultDates,\n      localeText\n    };\n  }, [defaultDates, utils, localeText]);\n  return /*#__PURE__*/_jsx(MuiPickersAdapterContext.Provider, {\n    value: contextValue,\n    children: children\n  });\n};\nprocess.env.NODE_ENV !== \"production\" ? LocalizationProvider.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // | To update them edit the TypeScript types and run \"yarn proptypes\"  |\n  // ----------------------------------------------------------------------\n  /**\n   * Locale for the date library you are using\n   */\n  adapterLocale: PropTypes.any,\n  children: PropTypes.node,\n  /**\n   * Date library adapter class function.\n   * @see See the localization provider {@link https://mui.com/x/react-date-pickers/getting-started/#setup-your-date-library-adapter date adapter setup section} for more details.\n   */\n  dateAdapter: PropTypes.func,\n  /**\n   * Formats that are used for any child pickers\n   */\n  dateFormats: PropTypes.shape({\n    dayOfMonth: PropTypes.string,\n    fullDate: PropTypes.string,\n    fullDateTime: PropTypes.string,\n    fullDateTime12h: PropTypes.string,\n    fullDateTime24h: PropTypes.string,\n    fullDateWithWeekday: PropTypes.string,\n    fullTime: PropTypes.string,\n    fullTime12h: PropTypes.string,\n    fullTime24h: PropTypes.string,\n    hours12h: PropTypes.string,\n    hours24h: PropTypes.string,\n    keyboardDate: PropTypes.string,\n    keyboardDateTime: PropTypes.string,\n    keyboardDateTime12h: PropTypes.string,\n    keyboardDateTime24h: PropTypes.string,\n    meridiem: PropTypes.string,\n    minutes: PropTypes.string,\n    month: PropTypes.string,\n    monthAndDate: PropTypes.string,\n    monthAndYear: PropTypes.string,\n    monthShort: PropTypes.string,\n    normalDate: PropTypes.string,\n    normalDateWithWeekday: PropTypes.string,\n    seconds: PropTypes.string,\n    shortDate: PropTypes.string,\n    weekday: PropTypes.string,\n    weekdayShort: PropTypes.string,\n    year: PropTypes.string\n  }),\n  /**\n   * Date library instance you are using, if it has some global overrides\n   * ```jsx\n   * dateLibInstance={momentTimeZone}\n   * ```\n   */\n  dateLibInstance: PropTypes.any,\n  /**\n   * Locale for components texts\n   */\n  localeText: PropTypes.object\n} : void 0;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nexport const getPickersLocalization = pickersTranslations => {\n  return {\n    components: {\n      MuiLocalizationProvider: {\n        defaultProps: {\n          localeText: _extends({}, pickersTranslations)\n        }\n      }\n    }\n  };\n};","import { getPickersLocalization } from './utils/getPickersLocalization';\n\n// This object is not Partial<PickersLocaleText> because it is the default values\n\nconst enUSPickers = {\n  // Calendar navigation\n  previousMonth: 'Previous month',\n  nextMonth: 'Next month',\n  // View navigation\n  openPreviousView: 'open previous view',\n  openNextView: 'open next view',\n  calendarViewSwitchingButtonAriaLabel: view => view === 'year' ? 'year view is open, switch to calendar view' : 'calendar view is open, switch to year view',\n  // DateRange placeholders\n  start: 'Start',\n  end: 'End',\n  // Action bar\n  cancelButtonLabel: 'Cancel',\n  clearButtonLabel: 'Clear',\n  okButtonLabel: 'OK',\n  todayButtonLabel: 'Today',\n  // Toolbar titles\n  datePickerToolbarTitle: 'Select date',\n  dateTimePickerToolbarTitle: 'Select date & time',\n  timePickerToolbarTitle: 'Select time',\n  dateRangePickerToolbarTitle: 'Select date range',\n  // Clock labels\n  clockLabelText: (view, time, adapter) => `Select ${view}. ${time === null ? 'No time selected' : `Selected time is ${adapter.format(time, 'fullTime')}`}`,\n  hoursClockNumberText: hours => `${hours} hours`,\n  minutesClockNumberText: minutes => `${minutes} minutes`,\n  secondsClockNumberText: seconds => `${seconds} seconds`,\n  // Digital clock labels\n  selectViewText: view => `Select ${view}`,\n  // Calendar labels\n  calendarWeekNumberHeaderLabel: 'Week number',\n  calendarWeekNumberHeaderText: '#',\n  calendarWeekNumberAriaLabelText: weekNumber => `Week ${weekNumber}`,\n  calendarWeekNumberText: weekNumber => `${weekNumber}`,\n  // Open picker labels\n  openDatePickerDialogue: (value, utils) => value !== null && utils.isValid(value) ? `Choose date, selected date is ${utils.format(value, 'fullDate')}` : 'Choose date',\n  openTimePickerDialogue: (value, utils) => value !== null && utils.isValid(value) ? `Choose time, selected time is ${utils.format(value, 'fullTime')}` : 'Choose time',\n  fieldClearLabel: 'Clear value',\n  // Table labels\n  timeTableLabel: 'pick time',\n  dateTableLabel: 'pick date',\n  // Field section placeholders\n  fieldYearPlaceholder: params => 'Y'.repeat(params.digitAmount),\n  fieldMonthPlaceholder: params => params.contentType === 'letter' ? 'MMMM' : 'MM',\n  fieldDayPlaceholder: () => 'DD',\n  fieldWeekDayPlaceholder: params => params.contentType === 'letter' ? 'EEEE' : 'EE',\n  fieldHoursPlaceholder: () => 'hh',\n  fieldMinutesPlaceholder: () => 'mm',\n  fieldSecondsPlaceholder: () => 'ss',\n  fieldMeridiemPlaceholder: () => 'aa'\n};\nexport const DEFAULT_LOCALE = enUSPickers;\nexport const enUS = getPickersLocalization(enUSPickers);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { MuiPickersAdapterContext } from '../../LocalizationProvider/LocalizationProvider';\nimport { DEFAULT_LOCALE } from '../../locales/enUS';\nexport const useLocalizationContext = () => {\n  const localization = React.useContext(MuiPickersAdapterContext);\n  if (localization === null) {\n    throw new Error(['MUI: Can not find the date and time pickers localization context.', 'It looks like you forgot to wrap your component in LocalizationProvider.', 'This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package'].join('\\n'));\n  }\n  if (localization.utils === null) {\n    throw new Error(['MUI: Can not find the date and time pickers adapter from its localization context.', 'It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider.'].join('\\n'));\n  }\n  const localeText = React.useMemo(() => _extends({}, DEFAULT_LOCALE, localization.localeText), [localization.localeText]);\n  return React.useMemo(() => _extends({}, localization, {\n    localeText\n  }), [localization, localeText]);\n};\nexport const useUtils = () => useLocalizationContext().utils;\nexport const useDefaultDates = () => useLocalizationContext().defaultDates;\nexport const useLocaleText = () => useLocalizationContext().localeText;\nexport const useNow = timezone => {\n  const utils = useUtils();\n  const now = React.useRef();\n  if (now.current === undefined) {\n    now.current = utils.dateWithTimezone(undefined, timezone);\n  }\n  return now.current;\n};","import { unstable_generateUtilityClass as generateUtilityClass, unstable_generateUtilityClasses as generateUtilityClasses } from '@mui/utils';\nexport function getPickersToolbarUtilityClass(slot) {\n  return generateUtilityClass('MuiPickersToolbar', slot);\n}\nexport const pickersToolbarClasses = generateUtilityClasses('MuiPickersToolbar', ['root', 'content']);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport Typography from '@mui/material/Typography';\nimport { styled, useThemeProps } from '@mui/material/styles';\nimport { unstable_composeClasses as composeClasses } from '@mui/utils';\nimport { getPickersToolbarUtilityClass } from './pickersToolbarClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes,\n    isLandscape\n  } = ownerState;\n  const slots = {\n    root: ['root'],\n    content: ['content'],\n    penIconButton: ['penIconButton', isLandscape && 'penIconButtonLandscape']\n  };\n  return composeClasses(slots, getPickersToolbarUtilityClass, classes);\n};\nconst PickersToolbarRoot = styled('div', {\n  name: 'MuiPickersToolbar',\n  slot: 'Root',\n  overridesResolver: (props, styles) => styles.root\n})(({\n  theme,\n  ownerState\n}) => _extends({\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'flex-start',\n  justifyContent: 'space-between',\n  padding: theme.spacing(2, 3)\n}, ownerState.isLandscape && {\n  height: 'auto',\n  maxWidth: 160,\n  padding: 16,\n  justifyContent: 'flex-start',\n  flexWrap: 'wrap'\n}));\nconst PickersToolbarContent = styled('div', {\n  name: 'MuiPickersToolbar',\n  slot: 'Content',\n  overridesResolver: (props, styles) => styles.content\n})(({\n  ownerState\n}) => {\n  var _ownerState$landscape;\n  return {\n    display: 'flex',\n    flexWrap: 'wrap',\n    width: '100%',\n    justifyContent: ownerState.isLandscape ? 'flex-start' : 'space-between',\n    flexDirection: ownerState.isLandscape ? (_ownerState$landscape = ownerState.landscapeDirection) != null ? _ownerState$landscape : 'column' : 'row',\n    flex: 1,\n    alignItems: ownerState.isLandscape ? 'flex-start' : 'center'\n  };\n});\nexport const PickersToolbar = /*#__PURE__*/React.forwardRef(function PickersToolbar(inProps, ref) {\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiPickersToolbar'\n  });\n  const {\n    children,\n    className,\n    toolbarTitle,\n    hidden,\n    titleId\n  } = props;\n  const ownerState = props;\n  const classes = useUtilityClasses(ownerState);\n  if (hidden) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxs(PickersToolbarRoot, {\n    ref: ref,\n    className: clsx(classes.root, className),\n    ownerState: ownerState,\n    children: [/*#__PURE__*/_jsx(Typography, {\n      color: \"text.secondary\",\n      variant: \"overline\",\n      id: titleId,\n      children: toolbarTitle\n    }), /*#__PURE__*/_jsx(PickersToolbarContent, {\n      className: classes.content,\n      ownerState: ownerState,\n      children: children\n    })]\n  });\n});","import { unstable_generateUtilityClass as generateUtilityClass, unstable_generateUtilityClasses as generateUtilityClasses } from '@mui/utils';\nexport function getDatePickerToolbarUtilityClass(slot) {\n  return generateUtilityClass('MuiDatePickerToolbar', slot);\n}\nexport const datePickerToolbarClasses = generateUtilityClasses('MuiDatePickerToolbar', ['root', 'title']);","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"value\", \"isLandscape\", \"onChange\", \"toolbarFormat\", \"toolbarPlaceholder\", \"views\", \"className\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport Typography from '@mui/material/Typography';\nimport { styled, useThemeProps } from '@mui/material/styles';\nimport { unstable_composeClasses as composeClasses } from '@mui/utils';\nimport { PickersToolbar } from '../internals/components/PickersToolbar';\nimport { useLocaleText, useUtils } from '../internals/hooks/useUtils';\nimport { getDatePickerToolbarUtilityClass } from './datePickerToolbarClasses';\nimport { resolveDateFormat } from '../internals/utils/date-utils';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root'],\n    title: ['title']\n  };\n  return composeClasses(slots, getDatePickerToolbarUtilityClass, classes);\n};\nconst DatePickerToolbarRoot = styled(PickersToolbar, {\n  name: 'MuiDatePickerToolbar',\n  slot: 'Root',\n  overridesResolver: (_, styles) => styles.root\n})({});\nconst DatePickerToolbarTitle = styled(Typography, {\n  name: 'MuiDatePickerToolbar',\n  slot: 'Title',\n  overridesResolver: (_, styles) => styles.title\n})(({\n  ownerState\n}) => _extends({}, ownerState.isLandscape && {\n  margin: 'auto 16px auto auto'\n}));\n/**\n * Demos:\n *\n * - [DatePicker](https://mui.com/x/react-date-pickers/date-picker/)\n * - [Custom components](https://mui.com/x/react-date-pickers/custom-components/)\n *\n * API:\n *\n * - [DatePickerToolbar API](https://mui.com/x/api/date-pickers/date-picker-toolbar/)\n */\nexport const DatePickerToolbar = /*#__PURE__*/React.forwardRef(function DatePickerToolbar(inProps, ref) {\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiDatePickerToolbar'\n  });\n  const {\n      value,\n      isLandscape,\n      toolbarFormat,\n      toolbarPlaceholder = '',\n      views,\n      className\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const utils = useUtils();\n  const localeText = useLocaleText();\n  const classes = useUtilityClasses(props);\n  const dateText = React.useMemo(() => {\n    if (!value) {\n      return toolbarPlaceholder;\n    }\n    const formatFromViews = resolveDateFormat(utils, {\n      format: toolbarFormat,\n      views\n    }, true);\n    return utils.formatByString(value, formatFromViews);\n  }, [value, toolbarFormat, toolbarPlaceholder, utils, views]);\n  const ownerState = props;\n  return /*#__PURE__*/_jsx(DatePickerToolbarRoot, _extends({\n    ref: ref,\n    toolbarTitle: localeText.datePickerToolbarTitle,\n    isLandscape: isLandscape,\n    className: clsx(classes.root, className)\n  }, other, {\n    children: /*#__PURE__*/_jsx(DatePickerToolbarTitle, {\n      variant: \"h4\",\n      align: isLandscape ? 'left' : 'center',\n      ownerState: ownerState,\n      className: classes.title,\n      children: dateText\n    })\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? DatePickerToolbar.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // | To update them edit the TypeScript types and run \"yarn proptypes\"  |\n  // ----------------------------------------------------------------------\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * className applied to the root component.\n   */\n  className: PropTypes.string,\n  disabled: PropTypes.bool,\n  /**\n   * If `true`, show the toolbar even in desktop mode.\n   * @default `true` for Desktop, `false` for Mobile.\n   */\n  hidden: PropTypes.bool,\n  isLandscape: PropTypes.bool.isRequired,\n  onChange: PropTypes.func.isRequired,\n  /**\n   * Callback called when a toolbar is clicked\n   * @template TView\n   * @param {TView} view The view to open\n   */\n  onViewChange: PropTypes.func.isRequired,\n  readOnly: PropTypes.bool,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  titleId: PropTypes.string,\n  /**\n   * Toolbar date format.\n   */\n  toolbarFormat: PropTypes.string,\n  /**\n   * Toolbar value placeholderit is displayed when the value is empty.\n   * @default \"\"\n   */\n  toolbarPlaceholder: PropTypes.node,\n  value: PropTypes.any,\n  /**\n   * Currently visible picker view.\n   */\n  view: PropTypes.oneOf(['day', 'month', 'year']).isRequired,\n  views: PropTypes.arrayOf(PropTypes.oneOf(['day', 'month', 'year']).isRequired).isRequired\n} : void 0;","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// TODO v7: This file exist only to simplify typing between\n// components/componentsProps and slots/slotProps\n// Should be deleted when components/componentsProps are removed\n\nexport const uncapitalizeObjectKeys = capitalizedObject => {\n  if (capitalizedObject === undefined) {\n    return undefined;\n  }\n  return Object.keys(capitalizedObject).reduce((acc, key) => _extends({}, acc, {\n    [`${key.slice(0, 1).toLowerCase()}${key.slice(1)}`]: capitalizedObject[key]\n  }), {});\n};","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { useThemeProps } from '@mui/material/styles';\nimport { useDefaultDates, useUtils } from '../internals/hooks/useUtils';\nimport { applyDefaultViewProps } from '../internals/utils/views';\nimport { applyDefaultDate } from '../internals/utils/date-utils';\nimport { DatePickerToolbar } from './DatePickerToolbar';\nimport { uncapitalizeObjectKeys } from '../internals/utils/slots-migration';\nexport function useDatePickerDefaultizedProps(props, name) {\n  var _themeProps$slots, _themeProps$disableFu, _themeProps$disablePa, _themeProps$slotProps;\n  const utils = useUtils();\n  const defaultDates = useDefaultDates();\n  const themeProps = useThemeProps({\n    props,\n    name\n  });\n  const localeText = React.useMemo(() => {\n    var _themeProps$localeTex;\n    if (((_themeProps$localeTex = themeProps.localeText) == null ? void 0 : _themeProps$localeTex.toolbarTitle) == null) {\n      return themeProps.localeText;\n    }\n    return _extends({}, themeProps.localeText, {\n      datePickerToolbarTitle: themeProps.localeText.toolbarTitle\n    });\n  }, [themeProps.localeText]);\n  const slots = (_themeProps$slots = themeProps.slots) != null ? _themeProps$slots : uncapitalizeObjectKeys(themeProps.components);\n  return _extends({}, themeProps, {\n    localeText\n  }, applyDefaultViewProps({\n    views: themeProps.views,\n    openTo: themeProps.openTo,\n    defaultViews: ['year', 'day'],\n    defaultOpenTo: 'day'\n  }), {\n    disableFuture: (_themeProps$disableFu = themeProps.disableFuture) != null ? _themeProps$disableFu : false,\n    disablePast: (_themeProps$disablePa = themeProps.disablePast) != null ? _themeProps$disablePa : false,\n    minDate: applyDefaultDate(utils, themeProps.minDate, defaultDates.minDate),\n    maxDate: applyDefaultDate(utils, themeProps.maxDate, defaultDates.maxDate),\n    slots: _extends({\n      toolbar: DatePickerToolbar\n    }, slots),\n    slotProps: (_themeProps$slotProps = themeProps.slotProps) != null ? _themeProps$slotProps : themeProps.componentsProps\n  });\n}","import { createSvgIcon } from '@mui/material/utils';\nimport * as React from 'react';\n\n/**\n * @ignore - internal component.\n */\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport const ArrowDropDownIcon = createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M7 10l5 5 5-5z\"\n}), 'ArrowDropDown');\n\n/**\n * @ignore - internal component.\n */\nexport const ArrowLeftIcon = createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z\"\n}), 'ArrowLeft');\n\n/**\n * @ignore - internal component.\n */\nexport const ArrowRightIcon = createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\"\n}), 'ArrowRight');\n\n/**\n * @ignore - internal component.\n */\nexport const CalendarIcon = createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z\"\n}), 'Calendar');\n\n/**\n * @ignore - internal component.\n */\nexport const ClockIcon = createSvgIcon( /*#__PURE__*/_jsxs(React.Fragment, {\n  children: [/*#__PURE__*/_jsx(\"path\", {\n    d: \"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n  }), /*#__PURE__*/_jsx(\"path\", {\n    d: \"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z\"\n  })]\n}), 'Clock');\n\n/**\n * @ignore - internal component.\n */\nexport const DateRangeIcon = createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z\"\n}), 'DateRange');\n\n/**\n * @ignore - internal component.\n */\nexport const TimeIcon = createSvgIcon( /*#__PURE__*/_jsxs(React.Fragment, {\n  children: [/*#__PURE__*/_jsx(\"path\", {\n    d: \"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n  }), /*#__PURE__*/_jsx(\"path\", {\n    d: \"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z\"\n  })]\n}), 'Time');\n\n/**\n * @ignore - internal component.\n */\nexport const ClearIcon = createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}), 'Clear');","import { unstable_generateUtilityClass as generateUtilityClass, unstable_generateUtilityClasses as generateUtilityClasses } from '@mui/utils';\nexport function getPickersArrowSwitcherUtilityClass(slot) {\n  return generateUtilityClass('MuiPickersArrowSwitcher', slot);\n}\nexport const pickersArrowSwitcherClasses = generateUtilityClasses('MuiPickersArrowSwitcher', ['root', 'spacer', 'button']);","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"children\", \"className\", \"slots\", \"slotProps\", \"isNextDisabled\", \"isNextHidden\", \"onGoToNext\", \"nextLabel\", \"isPreviousDisabled\", \"isPreviousHidden\", \"onGoToPrevious\", \"previousLabel\"],\n  _excluded2 = [\"ownerState\"],\n  _excluded3 = [\"ownerState\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport Typography from '@mui/material/Typography';\nimport { useTheme, styled, useThemeProps } from '@mui/material/styles';\nimport { unstable_composeClasses as composeClasses } from '@mui/utils';\nimport { useSlotProps } from '@mui/base/utils';\nimport IconButton from '@mui/material/IconButton';\nimport { ArrowLeftIcon, ArrowRightIcon } from '../../../icons';\nimport { getPickersArrowSwitcherUtilityClass } from './pickersArrowSwitcherClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst PickersArrowSwitcherRoot = styled('div', {\n  name: 'MuiPickersArrowSwitcher',\n  slot: 'Root',\n  overridesResolver: (props, styles) => styles.root\n})({\n  display: 'flex'\n});\nconst PickersArrowSwitcherSpacer = styled('div', {\n  name: 'MuiPickersArrowSwitcher',\n  slot: 'Spacer',\n  overridesResolver: (props, styles) => styles.spacer\n})(({\n  theme\n}) => ({\n  width: theme.spacing(3)\n}));\nconst PickersArrowSwitcherButton = styled(IconButton, {\n  name: 'MuiPickersArrowSwitcher',\n  slot: 'Button',\n  overridesResolver: (props, styles) => styles.button\n})(({\n  ownerState\n}) => _extends({}, ownerState.hidden && {\n  visibility: 'hidden'\n}));\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root'],\n    spacer: ['spacer'],\n    button: ['button']\n  };\n  return composeClasses(slots, getPickersArrowSwitcherUtilityClass, classes);\n};\nexport const PickersArrowSwitcher = /*#__PURE__*/React.forwardRef(function PickersArrowSwitcher(inProps, ref) {\n  var _slots$previousIconBu, _slots$nextIconButton, _slots$leftArrowIcon, _slots$rightArrowIcon;\n  const theme = useTheme();\n  const isRTL = theme.direction === 'rtl';\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiPickersArrowSwitcher'\n  });\n  const {\n      children,\n      className,\n      slots,\n      slotProps,\n      isNextDisabled,\n      isNextHidden,\n      onGoToNext,\n      nextLabel,\n      isPreviousDisabled,\n      isPreviousHidden,\n      onGoToPrevious,\n      previousLabel\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const ownerState = props;\n  const classes = useUtilityClasses(ownerState);\n  const nextProps = {\n    isDisabled: isNextDisabled,\n    isHidden: isNextHidden,\n    goTo: onGoToNext,\n    label: nextLabel\n  };\n  const previousProps = {\n    isDisabled: isPreviousDisabled,\n    isHidden: isPreviousHidden,\n    goTo: onGoToPrevious,\n    label: previousLabel\n  };\n  const PreviousIconButton = (_slots$previousIconBu = slots == null ? void 0 : slots.previousIconButton) != null ? _slots$previousIconBu : PickersArrowSwitcherButton;\n  const previousIconButtonProps = useSlotProps({\n    elementType: PreviousIconButton,\n    externalSlotProps: slotProps == null ? void 0 : slotProps.previousIconButton,\n    additionalProps: {\n      size: 'medium',\n      title: previousProps.label,\n      'aria-label': previousProps.label,\n      disabled: previousProps.isDisabled,\n      edge: 'end',\n      onClick: previousProps.goTo\n    },\n    ownerState: _extends({}, ownerState, {\n      hidden: previousProps.isHidden\n    }),\n    className: classes.button\n  });\n  const NextIconButton = (_slots$nextIconButton = slots == null ? void 0 : slots.nextIconButton) != null ? _slots$nextIconButton : PickersArrowSwitcherButton;\n  const nextIconButtonProps = useSlotProps({\n    elementType: NextIconButton,\n    externalSlotProps: slotProps == null ? void 0 : slotProps.nextIconButton,\n    additionalProps: {\n      size: 'medium',\n      title: nextProps.label,\n      'aria-label': nextProps.label,\n      disabled: nextProps.isDisabled,\n      edge: 'start',\n      onClick: nextProps.goTo\n    },\n    ownerState: _extends({}, ownerState, {\n      hidden: nextProps.isHidden\n    }),\n    className: classes.button\n  });\n  const LeftArrowIcon = (_slots$leftArrowIcon = slots == null ? void 0 : slots.leftArrowIcon) != null ? _slots$leftArrowIcon : ArrowLeftIcon;\n  // The spread is here to avoid this bug mui/material-ui#34056\n  const _useSlotProps = useSlotProps({\n      elementType: LeftArrowIcon,\n      externalSlotProps: slotProps == null ? void 0 : slotProps.leftArrowIcon,\n      additionalProps: {\n        fontSize: 'inherit'\n      },\n      ownerState: undefined\n    }),\n    leftArrowIconProps = _objectWithoutPropertiesLoose(_useSlotProps, _excluded2);\n  const RightArrowIcon = (_slots$rightArrowIcon = slots == null ? void 0 : slots.rightArrowIcon) != null ? _slots$rightArrowIcon : ArrowRightIcon;\n  // The spread is here to avoid this bug mui/material-ui#34056\n  const _useSlotProps2 = useSlotProps({\n      elementType: RightArrowIcon,\n      externalSlotProps: slotProps == null ? void 0 : slotProps.rightArrowIcon,\n      additionalProps: {\n        fontSize: 'inherit'\n      },\n      ownerState: undefined\n    }),\n    rightArrowIconProps = _objectWithoutPropertiesLoose(_useSlotProps2, _excluded3);\n  return /*#__PURE__*/_jsxs(PickersArrowSwitcherRoot, _extends({\n    ref: ref,\n    className: clsx(classes.root, className),\n    ownerState: ownerState\n  }, other, {\n    children: [/*#__PURE__*/_jsx(PreviousIconButton, _extends({}, previousIconButtonProps, {\n      children: isRTL ? /*#__PURE__*/_jsx(RightArrowIcon, _extends({}, rightArrowIconProps)) : /*#__PURE__*/_jsx(LeftArrowIcon, _extends({}, leftArrowIconProps))\n    })), children ? /*#__PURE__*/_jsx(Typography, {\n      variant: \"subtitle1\",\n      component: \"span\",\n      children: children\n    }) : /*#__PURE__*/_jsx(PickersArrowSwitcherSpacer, {\n      className: classes.spacer,\n      ownerState: ownerState\n    }), /*#__PURE__*/_jsx(NextIconButton, _extends({}, nextIconButtonProps, {\n      children: isRTL ? /*#__PURE__*/_jsx(LeftArrowIcon, _extends({}, leftArrowIconProps)) : /*#__PURE__*/_jsx(RightArrowIcon, _extends({}, rightArrowIconProps))\n    }))]\n  }));\n});","export const DAY_SIZE = 36;\nexport const DAY_MARGIN = 2;\nexport const DIALOG_WIDTH = 320;\nexport const MAX_CALENDAR_HEIGHT = 280;\nexport const VIEW_HEIGHT = 334;\nexport const DIGITAL_CLOCK_VIEW_HEIGHT = 232;\nexport const MULTI_SECTION_CLOCK_SECTION_WIDTH = 48;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport DialogContent from '@mui/material/DialogContent';\nimport Fade from '@mui/material/Fade';\nimport MuiDialog, { dialogClasses } from '@mui/material/Dialog';\nimport { styled } from '@mui/material/styles';\nimport { DIALOG_WIDTH } from '../constants/dimensions';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst PickersModalDialogRoot = styled(MuiDialog)({\n  [`& .${dialogClasses.container}`]: {\n    outline: 0\n  },\n  [`& .${dialogClasses.paper}`]: {\n    outline: 0,\n    minWidth: DIALOG_WIDTH\n  }\n});\nconst PickersModalDialogContent = styled(DialogContent)({\n  '&:first-of-type': {\n    padding: 0\n  }\n});\nexport function PickersModalDialog(props) {\n  var _slots$dialog, _slots$mobileTransiti;\n  const {\n    children,\n    onDismiss,\n    open,\n    slots,\n    slotProps\n  } = props;\n  const Dialog = (_slots$dialog = slots == null ? void 0 : slots.dialog) != null ? _slots$dialog : PickersModalDialogRoot;\n  const Transition = (_slots$mobileTransiti = slots == null ? void 0 : slots.mobileTransition) != null ? _slots$mobileTransiti : Fade;\n  return /*#__PURE__*/_jsx(Dialog, _extends({\n    open: open,\n    onClose: onDismiss\n  }, slotProps == null ? void 0 : slotProps.dialog, {\n    TransitionComponent: Transition,\n    TransitionProps: slotProps == null ? void 0 : slotProps.mobileTransition,\n    PaperComponent: slots == null ? void 0 : slots.mobilePaper,\n    PaperProps: slotProps == null ? void 0 : slotProps.mobilePaper,\n    children: /*#__PURE__*/_jsx(PickersModalDialogContent, {\n      children: children\n    })\n  }));\n}","import { unstable_generateUtilityClass as generateUtilityClass, unstable_generateUtilityClasses as generateUtilityClasses } from '@mui/utils';\nexport function getPickersPopperUtilityClass(slot) {\n  return generateUtilityClass('MuiPickersPopper', slot);\n}\nexport const pickersPopperClasses = generateUtilityClasses('MuiPickersPopper', ['root', 'paper']);","/* Use it instead of .includes method for IE support */\nexport function arrayIncludes(array, itemOrItems) {\n  if (Array.isArray(itemOrItems)) {\n    return itemOrItems.every(item => array.indexOf(item) !== -1);\n  }\n  return array.indexOf(itemOrItems) !== -1;\n}\nexport const onSpaceOrEnter = (innerFn, externalEvent) => event => {\n  if (event.key === 'Enter' || event.key === ' ') {\n    innerFn(event);\n\n    // prevent any side effects\n    event.preventDefault();\n    event.stopPropagation();\n  }\n  if (externalEvent) {\n    externalEvent(event);\n  }\n};\nexport const executeInTheNextEventLoopTick = fn => {\n  setTimeout(fn, 0);\n};\n\n// https://www.abeautifulsite.net/posts/finding-the-active-element-in-a-shadow-root/\nexport const getActiveElement = (root = document) => {\n  const activeEl = root.activeElement;\n  if (!activeEl) {\n    return null;\n  }\n  if (activeEl.shadowRoot) {\n    return getActiveElement(activeEl.shadowRoot);\n  }\n  return activeEl;\n};\nexport const DEFAULT_DESKTOP_MODE_MEDIA_QUERY = '@media (pointer: fine)';","import useMediaQuery from '@mui/material/useMediaQuery';\nconst PREFERS_REDUCED_MOTION = '@media (prefers-reduced-motion: reduce)';\n\n// detect if user agent has Android version < 10 or iOS version < 13\nconst mobileVersionMatches = typeof navigator !== 'undefined' && navigator.userAgent.match(/android\\s(\\d+)|OS\\s(\\d+)/i);\nconst androidVersion = mobileVersionMatches && mobileVersionMatches[1] ? parseInt(mobileVersionMatches[1], 10) : null;\nconst iOSVersion = mobileVersionMatches && mobileVersionMatches[2] ? parseInt(mobileVersionMatches[2], 10) : null;\nexport const slowAnimationDevices = androidVersion && androidVersion < 10 || iOSVersion && iOSVersion < 13 || false;\nexport const useDefaultReduceAnimations = () => {\n  const prefersReduced = useMediaQuery(PREFERS_REDUCED_MOTION, {\n    defaultMatches: false\n  });\n  return prefersReduced || slowAnimationDevices;\n};","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"PaperComponent\", \"popperPlacement\", \"ownerState\", \"children\", \"paperSlotProps\", \"paperClasses\", \"onPaperClick\", \"onPaperTouchStart\"];\nimport * as React from 'react';\nimport { useSlotProps } from '@mui/base/utils';\nimport Grow from '@mui/material/Grow';\nimport Fade from '@mui/material/Fade';\nimport MuiPaper from '@mui/material/Paper';\nimport MuiPopper from '@mui/material/Popper';\nimport BaseFocusTrap from '@mui/material/Unstable_TrapFocus';\nimport { unstable_useForkRef as useForkRef, unstable_useEventCallback as useEventCallback, unstable_ownerDocument as ownerDocument, unstable_composeClasses as composeClasses } from '@mui/utils';\nimport { styled, useThemeProps } from '@mui/material/styles';\nimport { getPickersPopperUtilityClass } from './pickersPopperClasses';\nimport { getActiveElement } from '../utils/utils';\nimport { useDefaultReduceAnimations } from '../hooks/useDefaultReduceAnimations';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root'],\n    paper: ['paper']\n  };\n  return composeClasses(slots, getPickersPopperUtilityClass, classes);\n};\nconst PickersPopperRoot = styled(MuiPopper, {\n  name: 'MuiPickersPopper',\n  slot: 'Root',\n  overridesResolver: (_, styles) => styles.root\n})(({\n  theme\n}) => ({\n  zIndex: theme.zIndex.modal\n}));\nconst PickersPopperPaper = styled(MuiPaper, {\n  name: 'MuiPickersPopper',\n  slot: 'Paper',\n  overridesResolver: (_, styles) => styles.paper\n})(({\n  ownerState\n}) => _extends({\n  outline: 0,\n  transformOrigin: 'top center'\n}, ownerState.placement.includes('top') && {\n  transformOrigin: 'bottom center'\n}));\nfunction clickedRootScrollbar(event, doc) {\n  return doc.documentElement.clientWidth < event.clientX || doc.documentElement.clientHeight < event.clientY;\n}\n/**\n * Based on @mui/material/ClickAwayListener without the customization.\n * We can probably strip away even more since children won't be portaled.\n * @param {boolean} active Only listen to clicks when the popper is opened.\n * @param {(event: MouseEvent | TouchEvent) => void} onClickAway The callback to call when clicking outside the popper.\n * @returns {Array} The ref and event handler to listen to the outside clicks.\n */\nfunction useClickAwayListener(active, onClickAway) {\n  const movedRef = React.useRef(false);\n  const syntheticEventRef = React.useRef(false);\n  const nodeRef = React.useRef(null);\n  const activatedRef = React.useRef(false);\n  React.useEffect(() => {\n    if (!active) {\n      return undefined;\n    }\n\n    // Ensure that this hook is not \"activated\" synchronously.\n    // https://github.com/facebook/react/issues/20074\n    function armClickAwayListener() {\n      activatedRef.current = true;\n    }\n    document.addEventListener('mousedown', armClickAwayListener, true);\n    document.addEventListener('touchstart', armClickAwayListener, true);\n    return () => {\n      document.removeEventListener('mousedown', armClickAwayListener, true);\n      document.removeEventListener('touchstart', armClickAwayListener, true);\n      activatedRef.current = false;\n    };\n  }, [active]);\n\n  // The handler doesn't take event.defaultPrevented into account:\n  //\n  // event.preventDefault() is meant to stop default behaviors like\n  // clicking a checkbox to check it, hitting a button to submit a form,\n  // and hitting left arrow to move the cursor in a text input etc.\n  // Only special HTML elements have these default behaviors.\n  const handleClickAway = useEventCallback(event => {\n    if (!activatedRef.current) {\n      return;\n    }\n\n    // Given developers can stop the propagation of the synthetic event,\n    // we can only be confident with a positive value.\n    const insideReactTree = syntheticEventRef.current;\n    syntheticEventRef.current = false;\n    const doc = ownerDocument(nodeRef.current);\n\n    // 1. IE11 support, which trigger the handleClickAway even after the unbind\n    // 2. The child might render null.\n    // 3. Behave like a blur listener.\n    if (!nodeRef.current ||\n    // is a TouchEvent?\n    'clientX' in event && clickedRootScrollbar(event, doc)) {\n      return;\n    }\n\n    // Do not act if user performed touchmove\n    if (movedRef.current) {\n      movedRef.current = false;\n      return;\n    }\n    let insideDOM;\n\n    // If not enough, can use https://github.com/DieterHolvoet/event-propagation-path/blob/master/propagationPath.js\n    if (event.composedPath) {\n      insideDOM = event.composedPath().indexOf(nodeRef.current) > -1;\n    } else {\n      insideDOM = !doc.documentElement.contains(event.target) || nodeRef.current.contains(event.target);\n    }\n    if (!insideDOM && !insideReactTree) {\n      onClickAway(event);\n    }\n  });\n\n  // Keep track of mouse/touch events that bubbled up through the portal.\n  const handleSynthetic = () => {\n    syntheticEventRef.current = true;\n  };\n  React.useEffect(() => {\n    if (active) {\n      const doc = ownerDocument(nodeRef.current);\n      const handleTouchMove = () => {\n        movedRef.current = true;\n      };\n      doc.addEventListener('touchstart', handleClickAway);\n      doc.addEventListener('touchmove', handleTouchMove);\n      return () => {\n        doc.removeEventListener('touchstart', handleClickAway);\n        doc.removeEventListener('touchmove', handleTouchMove);\n      };\n    }\n    return undefined;\n  }, [active, handleClickAway]);\n  React.useEffect(() => {\n    // TODO This behavior is not tested automatically\n    // It's unclear whether this is due to different update semantics in test (batched in act() vs discrete on click).\n    // Or if this is a timing related issues due to different Transition components\n    // Once we get rid of all the manual scheduling (e.g. setTimeout(update, 0)) we can revisit this code+test.\n    if (active) {\n      const doc = ownerDocument(nodeRef.current);\n      doc.addEventListener('click', handleClickAway);\n      return () => {\n        doc.removeEventListener('click', handleClickAway);\n        // cleanup `handleClickAway`\n        syntheticEventRef.current = false;\n      };\n    }\n    return undefined;\n  }, [active, handleClickAway]);\n  return [nodeRef, handleSynthetic, handleSynthetic];\n}\nconst PickersPopperPaperWrapper = /*#__PURE__*/React.forwardRef((props, ref) => {\n  const {\n      PaperComponent,\n      popperPlacement,\n      ownerState: inOwnerState,\n      children,\n      paperSlotProps,\n      paperClasses,\n      onPaperClick,\n      onPaperTouchStart\n      // picks up the style props provided by `Transition`\n      // https://mui.com/material-ui/transitions/#child-requirement\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const ownerState = _extends({}, inOwnerState, {\n    placement: popperPlacement\n  });\n  const paperProps = useSlotProps({\n    elementType: PaperComponent,\n    externalSlotProps: paperSlotProps,\n    additionalProps: {\n      tabIndex: -1,\n      elevation: 8,\n      ref\n    },\n    className: paperClasses,\n    ownerState\n  });\n  return /*#__PURE__*/_jsx(PaperComponent, _extends({}, other, paperProps, {\n    onClick: event => {\n      var _paperProps$onClick;\n      onPaperClick(event);\n      (_paperProps$onClick = paperProps.onClick) == null || _paperProps$onClick.call(paperProps, event);\n    },\n    onTouchStart: event => {\n      var _paperProps$onTouchSt;\n      onPaperTouchStart(event);\n      (_paperProps$onTouchSt = paperProps.onTouchStart) == null || _paperProps$onTouchSt.call(paperProps, event);\n    },\n    ownerState: ownerState,\n    children: children\n  }));\n});\nexport function PickersPopper(inProps) {\n  var _slots$desktopTransit, _slots$desktopTrapFoc, _slots$desktopPaper, _slots$popper;\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiPickersPopper'\n  });\n  const {\n    anchorEl,\n    children,\n    containerRef = null,\n    shouldRestoreFocus,\n    onBlur,\n    onDismiss,\n    open,\n    role,\n    placement,\n    slots,\n    slotProps,\n    reduceAnimations: inReduceAnimations\n  } = props;\n  React.useEffect(() => {\n    function handleKeyDown(nativeEvent) {\n      // IE11, Edge (prior to using Blink?) use 'Esc'\n      if (open && (nativeEvent.key === 'Escape' || nativeEvent.key === 'Esc')) {\n        onDismiss();\n      }\n    }\n    document.addEventListener('keydown', handleKeyDown);\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [onDismiss, open]);\n  const lastFocusedElementRef = React.useRef(null);\n  React.useEffect(() => {\n    if (role === 'tooltip' || shouldRestoreFocus && !shouldRestoreFocus()) {\n      return;\n    }\n    if (open) {\n      lastFocusedElementRef.current = getActiveElement(document);\n    } else if (lastFocusedElementRef.current && lastFocusedElementRef.current instanceof HTMLElement) {\n      // make sure the button is flushed with updated label, before returning focus to it\n      // avoids issue, where screen reader could fail to announce selected date after selection\n      setTimeout(() => {\n        if (lastFocusedElementRef.current instanceof HTMLElement) {\n          lastFocusedElementRef.current.focus();\n        }\n      });\n    }\n  }, [open, role, shouldRestoreFocus]);\n  const [clickAwayRef, onPaperClick, onPaperTouchStart] = useClickAwayListener(open, onBlur != null ? onBlur : onDismiss);\n  const paperRef = React.useRef(null);\n  const handleRef = useForkRef(paperRef, containerRef);\n  const handlePaperRef = useForkRef(handleRef, clickAwayRef);\n  const ownerState = props;\n  const classes = useUtilityClasses(ownerState);\n  const defaultReduceAnimations = useDefaultReduceAnimations();\n  const reduceAnimations = inReduceAnimations != null ? inReduceAnimations : defaultReduceAnimations;\n  const handleKeyDown = event => {\n    if (event.key === 'Escape') {\n      // stop the propagation to avoid closing parent modal\n      event.stopPropagation();\n      onDismiss();\n    }\n  };\n  const Transition = ((_slots$desktopTransit = slots == null ? void 0 : slots.desktopTransition) != null ? _slots$desktopTransit : reduceAnimations) ? Fade : Grow;\n  const FocusTrap = (_slots$desktopTrapFoc = slots == null ? void 0 : slots.desktopTrapFocus) != null ? _slots$desktopTrapFoc : BaseFocusTrap;\n  const Paper = (_slots$desktopPaper = slots == null ? void 0 : slots.desktopPaper) != null ? _slots$desktopPaper : PickersPopperPaper;\n  const Popper = (_slots$popper = slots == null ? void 0 : slots.popper) != null ? _slots$popper : PickersPopperRoot;\n  const popperProps = useSlotProps({\n    elementType: Popper,\n    externalSlotProps: slotProps == null ? void 0 : slotProps.popper,\n    additionalProps: {\n      transition: true,\n      role,\n      open,\n      anchorEl,\n      placement,\n      onKeyDown: handleKeyDown\n    },\n    className: classes.root,\n    ownerState: props\n  });\n  return /*#__PURE__*/_jsx(Popper, _extends({}, popperProps, {\n    children: ({\n      TransitionProps,\n      placement: popperPlacement\n    }) => /*#__PURE__*/_jsx(FocusTrap, _extends({\n      open: open,\n      disableAutoFocus: true\n      // pickers are managing focus position manually\n      // without this prop the focus is returned to the button before `aria-label` is updated\n      // which would force screen readers to read too old label\n      ,\n      disableRestoreFocus: true,\n      disableEnforceFocus: role === 'tooltip',\n      isEnabled: () => true\n    }, slotProps == null ? void 0 : slotProps.desktopTrapFocus, {\n      children: /*#__PURE__*/_jsx(Transition, _extends({}, TransitionProps, slotProps == null ? void 0 : slotProps.desktopTransition, {\n        children: /*#__PURE__*/_jsx(PickersPopperPaperWrapper, {\n          PaperComponent: Paper,\n          ownerState: ownerState,\n          popperPlacement: popperPlacement,\n          ref: handlePaperRef,\n          onPaperClick: onPaperClick,\n          onPaperTouchStart: onPaperTouchStart,\n          paperClasses: classes.paper,\n          paperSlotProps: slotProps == null ? void 0 : slotProps.desktopPaper,\n          children: children\n        })\n      }))\n    }))\n  }));\n}","import * as React from 'react';\nimport useEventCallback from '@mui/utils/useEventCallback';\nimport useControlled from '@mui/utils/useControlled';\nimport { useUtils } from './useUtils';\n/**\n * Hooks making sure that:\n * - The value returned by `onChange` always have the timezone of `props.value` or `props.defaultValue` if defined\n * - The value rendered is always the one from `props.timezone` if defined\n */\nexport const useValueWithTimezone = ({\n  timezone: timezoneProp,\n  value: valueProp,\n  defaultValue,\n  onChange,\n  valueManager\n}) => {\n  var _ref, _ref2;\n  const utils = useUtils();\n  const firstDefaultValue = React.useRef(defaultValue);\n  const inputValue = (_ref = valueProp != null ? valueProp : firstDefaultValue.current) != null ? _ref : valueManager.emptyValue;\n  const inputTimezone = React.useMemo(() => valueManager.getTimezone(utils, inputValue), [utils, valueManager, inputValue]);\n  const setInputTimezone = useEventCallback(newValue => {\n    if (inputTimezone == null) {\n      return newValue;\n    }\n    return valueManager.setTimezone(utils, inputTimezone, newValue);\n  });\n  const timezoneToRender = (_ref2 = timezoneProp != null ? timezoneProp : inputTimezone) != null ? _ref2 : 'default';\n  const valueWithTimezoneToRender = React.useMemo(() => valueManager.setTimezone(utils, timezoneToRender, inputValue), [valueManager, utils, timezoneToRender, inputValue]);\n  const handleValueChange = useEventCallback((newValue, ...otherParams) => {\n    const newValueWithInputTimezone = setInputTimezone(newValue);\n    onChange == null || onChange(newValueWithInputTimezone, ...otherParams);\n  });\n  return {\n    value: valueWithTimezoneToRender,\n    handleValueChange,\n    timezone: timezoneToRender\n  };\n};\n\n/**\n * Wrapper around `useControlled` and `useValueWithTimezone`\n */\nexport const useControlledValueWithTimezone = ({\n  name,\n  timezone: timezoneProp,\n  value: valueProp,\n  defaultValue,\n  onChange: onChangeProp,\n  valueManager\n}) => {\n  const [valueWithInputTimezone, setValue] = useControlled({\n    name,\n    state: 'value',\n    controlled: valueProp,\n    default: defaultValue != null ? defaultValue : valueManager.emptyValue\n  });\n  const onChange = useEventCallback((newValue, ...otherParams) => {\n    setValue(newValue);\n    onChangeProp == null || onChangeProp(newValue, ...otherParams);\n  });\n  return useValueWithTimezone({\n    timezone: timezoneProp,\n    value: valueWithInputTimezone,\n    defaultValue: undefined,\n    onChange,\n    valueManager\n  });\n};","import * as React from 'react';\nimport { useLocalizationContext } from './useUtils';\nexport function useValidation(props, validate, isSameError, defaultErrorState) {\n  const {\n    value,\n    onError\n  } = props;\n  const adapter = useLocalizationContext();\n  const previousValidationErrorRef = React.useRef(defaultErrorState);\n  const validationError = validate({\n    adapter,\n    value,\n    props\n  });\n  React.useEffect(() => {\n    if (onError && !isSameError(validationError, previousValidationErrorRef.current)) {\n      onError(validationError, value);\n    }\n    previousValidationErrorRef.current = validationError;\n  }, [isSameError, onError, previousValidationErrorRef, validationError, value]);\n  return validationError;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport useControlled from '@mui/utils/useControlled';\nimport { useTheme } from '@mui/material/styles';\nimport { useUtils, useLocaleText, useLocalizationContext } from '../useUtils';\nimport { addPositionPropertiesToSections, splitFormatIntoSections, mergeDateIntoReferenceDate, getSectionsBoundaries, validateSections, getDateFromDateSections } from './useField.utils';\nimport { useValueWithTimezone } from '../useValueWithTimezone';\nimport { getSectionTypeGranularity } from '../../utils/getDefaultReferenceDate';\nexport const useFieldState = params => {\n  const utils = useUtils();\n  const localeText = useLocaleText();\n  const adapter = useLocalizationContext();\n  const theme = useTheme();\n  const isRTL = theme.direction === 'rtl';\n  const {\n    valueManager,\n    fieldValueManager,\n    valueType,\n    validator,\n    internalProps,\n    internalProps: {\n      value: valueProp,\n      defaultValue,\n      referenceDate: referenceDateProp,\n      onChange,\n      format,\n      formatDensity = 'dense',\n      selectedSections: selectedSectionsProp,\n      onSelectedSectionsChange,\n      shouldRespectLeadingZeros = false,\n      timezone: timezoneProp\n    }\n  } = params;\n  const {\n    timezone,\n    value: valueFromTheOutside,\n    handleValueChange\n  } = useValueWithTimezone({\n    timezone: timezoneProp,\n    value: valueProp,\n    defaultValue,\n    onChange,\n    valueManager\n  });\n  const sectionsValueBoundaries = React.useMemo(() => getSectionsBoundaries(utils, timezone), [utils, timezone]);\n  const getSectionsFromValue = React.useCallback((value, fallbackSections = null) => fieldValueManager.getSectionsFromValue(utils, value, fallbackSections, isRTL, date => splitFormatIntoSections(utils, timezone, localeText, format, date, formatDensity, shouldRespectLeadingZeros, isRTL)), [fieldValueManager, format, localeText, isRTL, shouldRespectLeadingZeros, utils, formatDensity, timezone]);\n  const placeholder = React.useMemo(() => fieldValueManager.getValueStrFromSections(getSectionsFromValue(valueManager.emptyValue), isRTL), [fieldValueManager, getSectionsFromValue, valueManager.emptyValue, isRTL]);\n  const [state, setState] = React.useState(() => {\n    const sections = getSectionsFromValue(valueFromTheOutside);\n    validateSections(sections, valueType);\n    const stateWithoutReferenceDate = {\n      sections,\n      value: valueFromTheOutside,\n      referenceValue: valueManager.emptyValue,\n      tempValueStrAndroid: null\n    };\n    const granularity = getSectionTypeGranularity(sections);\n    const referenceValue = valueManager.getInitialReferenceValue({\n      referenceDate: referenceDateProp,\n      value: valueFromTheOutside,\n      utils,\n      props: internalProps,\n      granularity,\n      timezone\n    });\n    return _extends({}, stateWithoutReferenceDate, {\n      referenceValue\n    });\n  });\n  const [selectedSections, innerSetSelectedSections] = useControlled({\n    controlled: selectedSectionsProp,\n    default: null,\n    name: 'useField',\n    state: 'selectedSectionIndexes'\n  });\n  const setSelectedSections = newSelectedSections => {\n    innerSetSelectedSections(newSelectedSections);\n    onSelectedSectionsChange == null || onSelectedSectionsChange(newSelectedSections);\n    setState(prevState => _extends({}, prevState, {\n      selectedSectionQuery: null\n    }));\n  };\n  const selectedSectionIndexes = React.useMemo(() => {\n    if (selectedSections == null) {\n      return null;\n    }\n    if (selectedSections === 'all') {\n      return {\n        startIndex: 0,\n        endIndex: state.sections.length - 1,\n        shouldSelectBoundarySelectors: true\n      };\n    }\n    if (typeof selectedSections === 'number') {\n      return {\n        startIndex: selectedSections,\n        endIndex: selectedSections\n      };\n    }\n    if (typeof selectedSections === 'string') {\n      const selectedSectionIndex = state.sections.findIndex(section => section.type === selectedSections);\n      return {\n        startIndex: selectedSectionIndex,\n        endIndex: selectedSectionIndex\n      };\n    }\n    return selectedSections;\n  }, [selectedSections, state.sections]);\n  const publishValue = ({\n    value,\n    referenceValue,\n    sections\n  }) => {\n    setState(prevState => _extends({}, prevState, {\n      sections,\n      value,\n      referenceValue,\n      tempValueStrAndroid: null\n    }));\n    if (valueManager.areValuesEqual(utils, state.value, value)) {\n      return;\n    }\n    const context = {\n      validationError: validator({\n        adapter,\n        value,\n        props: _extends({}, internalProps, {\n          value,\n          timezone\n        })\n      })\n    };\n    handleValueChange(value, context);\n  };\n  const setSectionValue = (sectionIndex, newSectionValue) => {\n    const newSections = [...state.sections];\n    newSections[sectionIndex] = _extends({}, newSections[sectionIndex], {\n      value: newSectionValue,\n      modified: true\n    });\n    return addPositionPropertiesToSections(newSections, isRTL);\n  };\n  const clearValue = () => {\n    publishValue({\n      value: valueManager.emptyValue,\n      referenceValue: state.referenceValue,\n      sections: getSectionsFromValue(valueManager.emptyValue)\n    });\n  };\n  const clearActiveSection = () => {\n    if (selectedSectionIndexes == null) {\n      return;\n    }\n    const activeSection = state.sections[selectedSectionIndexes.startIndex];\n    const activeDateManager = fieldValueManager.getActiveDateManager(utils, state, activeSection);\n    const nonEmptySectionCountBefore = activeDateManager.getSections(state.sections).filter(section => section.value !== '').length;\n    const hasNoOtherNonEmptySections = nonEmptySectionCountBefore === (activeSection.value === '' ? 0 : 1);\n    const newSections = setSectionValue(selectedSectionIndexes.startIndex, '');\n    const newActiveDate = hasNoOtherNonEmptySections ? null : utils.date(new Date(''));\n    const newValues = activeDateManager.getNewValuesFromNewActiveDate(newActiveDate);\n    if ((newActiveDate != null && !utils.isValid(newActiveDate)) !== (activeDateManager.date != null && !utils.isValid(activeDateManager.date))) {\n      publishValue(_extends({}, newValues, {\n        sections: newSections\n      }));\n    } else {\n      setState(prevState => _extends({}, prevState, newValues, {\n        sections: newSections,\n        tempValueStrAndroid: null\n      }));\n    }\n  };\n  const updateValueFromValueStr = valueStr => {\n    const parseDateStr = (dateStr, referenceDate) => {\n      const date = utils.parse(dateStr, format);\n      if (date == null || !utils.isValid(date)) {\n        return null;\n      }\n      const sections = splitFormatIntoSections(utils, timezone, localeText, format, date, formatDensity, shouldRespectLeadingZeros, isRTL);\n      return mergeDateIntoReferenceDate(utils, timezone, date, sections, referenceDate, false);\n    };\n    const newValue = fieldValueManager.parseValueStr(valueStr, state.referenceValue, parseDateStr);\n    const newReferenceValue = fieldValueManager.updateReferenceValue(utils, newValue, state.referenceValue);\n    publishValue({\n      value: newValue,\n      referenceValue: newReferenceValue,\n      sections: getSectionsFromValue(newValue, state.sections)\n    });\n  };\n  const updateSectionValue = ({\n    activeSection,\n    newSectionValue,\n    shouldGoToNextSection\n  }) => {\n    /**\n     * 1. Decide which section should be focused\n     */\n    if (shouldGoToNextSection && selectedSectionIndexes && selectedSectionIndexes.startIndex < state.sections.length - 1) {\n      setSelectedSections(selectedSectionIndexes.startIndex + 1);\n    } else if (selectedSectionIndexes && selectedSectionIndexes.startIndex !== selectedSectionIndexes.endIndex) {\n      setSelectedSections(selectedSectionIndexes.startIndex);\n    }\n\n    /**\n     * 2. Try to build a valid date from the new section value\n     */\n    const activeDateManager = fieldValueManager.getActiveDateManager(utils, state, activeSection);\n    const newSections = setSectionValue(selectedSectionIndexes.startIndex, newSectionValue);\n    const newActiveDateSections = activeDateManager.getSections(newSections);\n    const newActiveDate = getDateFromDateSections(utils, newActiveDateSections);\n    let values;\n    let shouldPublish;\n\n    /**\n     * If the new date is valid,\n     * Then we merge the value of the modified sections into the reference date.\n     * This makes sure that we don't lose some information of the initial date (like the time on a date field).\n     */\n    if (newActiveDate != null && utils.isValid(newActiveDate)) {\n      const mergedDate = mergeDateIntoReferenceDate(utils, timezone, newActiveDate, newActiveDateSections, activeDateManager.referenceDate, true);\n      values = activeDateManager.getNewValuesFromNewActiveDate(mergedDate);\n      shouldPublish = true;\n    } else {\n      values = activeDateManager.getNewValuesFromNewActiveDate(newActiveDate);\n      shouldPublish = (newActiveDate != null && !utils.isValid(newActiveDate)) !== (activeDateManager.date != null && !utils.isValid(activeDateManager.date));\n    }\n\n    /**\n     * Publish or update the internal state with the new value and sections.\n     */\n    if (shouldPublish) {\n      return publishValue(_extends({}, values, {\n        sections: newSections\n      }));\n    }\n    return setState(prevState => _extends({}, prevState, values, {\n      sections: newSections,\n      tempValueStrAndroid: null\n    }));\n  };\n  const setTempAndroidValueStr = tempValueStrAndroid => setState(prev => _extends({}, prev, {\n    tempValueStrAndroid\n  }));\n  React.useEffect(() => {\n    const sections = getSectionsFromValue(state.value);\n    validateSections(sections, valueType);\n    setState(prevState => _extends({}, prevState, {\n      sections\n    }));\n  }, [format, utils.locale]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  React.useEffect(() => {\n    let shouldUpdate = false;\n    if (!valueManager.areValuesEqual(utils, state.value, valueFromTheOutside)) {\n      shouldUpdate = true;\n    } else {\n      shouldUpdate = valueManager.getTimezone(utils, state.value) !== valueManager.getTimezone(utils, valueFromTheOutside);\n    }\n    if (shouldUpdate) {\n      setState(prevState => _extends({}, prevState, {\n        value: valueFromTheOutside,\n        referenceValue: fieldValueManager.updateReferenceValue(utils, valueFromTheOutside, prevState.referenceValue),\n        sections: getSectionsFromValue(valueFromTheOutside)\n      }));\n    }\n  }, [valueFromTheOutside]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return {\n    state,\n    selectedSectionIndexes,\n    setSelectedSections,\n    clearValue,\n    clearActiveSection,\n    updateSectionValue,\n    updateValueFromValueStr,\n    setTempAndroidValueStr,\n    sectionsValueBoundaries,\n    placeholder,\n    timezone\n  };\n};","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport useEventCallback from '@mui/utils/useEventCallback';\nimport { useUtils } from '../useUtils';\nimport { changeSectionValueFormat, cleanDigitSectionValue, doesSectionFormatHaveLeadingZeros, getDateSectionConfigFromFormatToken, getDaysInWeekStr, getLetterEditingOptions } from './useField.utils';\n\n/**\n * The letter editing and the numeric editing each define a `CharacterEditingApplier`.\n * This function decides what the new section value should be and if the focus should switch to the next section.\n *\n * If it returns `null`, then the section value is not updated and the focus does not move.\n */\n\n/**\n * Function called by `applyQuery` which decides:\n * - what is the new section value ?\n * - should the query used to get this value be stored for the next key press ?\n *\n * If it returns `{ sectionValue: string; shouldGoToNextSection: boolean }`,\n * Then we store the query and update the section with the new value.\n *\n * If it returns `{ saveQuery: true` },\n * Then we store the query and don't update the section.\n *\n * If it returns `{ saveQuery: false },\n * Then we do nothing.\n */\n\nconst QUERY_LIFE_DURATION_MS = 5000;\nconst isQueryResponseWithoutValue = response => response.saveQuery != null;\n\n/**\n * Update the active section value when the user pressed a key that is not a navigation key (arrow key for example).\n * This hook has two main editing behaviors\n *\n * 1. The numeric editing when the user presses a digit\n * 2. The letter editing when the user presses another key\n */\nexport const useFieldCharacterEditing = ({\n  sections,\n  updateSectionValue,\n  sectionsValueBoundaries,\n  setTempAndroidValueStr,\n  timezone\n}) => {\n  const utils = useUtils();\n  const [query, setQuery] = React.useState(null);\n  const resetQuery = useEventCallback(() => setQuery(null));\n  React.useEffect(() => {\n    var _sections$query$secti;\n    if (query != null && ((_sections$query$secti = sections[query.sectionIndex]) == null ? void 0 : _sections$query$secti.type) !== query.sectionType) {\n      resetQuery();\n    }\n  }, [sections, query, resetQuery]);\n  React.useEffect(() => {\n    if (query != null) {\n      const timeout = setTimeout(() => resetQuery(), QUERY_LIFE_DURATION_MS);\n      return () => {\n        window.clearTimeout(timeout);\n      };\n    }\n    return () => {};\n  }, [query, resetQuery]);\n  const applyQuery = ({\n    keyPressed,\n    sectionIndex\n  }, getFirstSectionValueMatchingWithQuery, isValidQueryValue) => {\n    const cleanKeyPressed = keyPressed.toLowerCase();\n    const activeSection = sections[sectionIndex];\n\n    // The current query targets the section being editing\n    // We can try to concatenated value\n    if (query != null && (!isValidQueryValue || isValidQueryValue(query.value)) && query.sectionIndex === sectionIndex) {\n      const concatenatedQueryValue = `${query.value}${cleanKeyPressed}`;\n      const queryResponse = getFirstSectionValueMatchingWithQuery(concatenatedQueryValue, activeSection);\n      if (!isQueryResponseWithoutValue(queryResponse)) {\n        setQuery({\n          sectionIndex,\n          value: concatenatedQueryValue,\n          sectionType: activeSection.type\n        });\n        return queryResponse;\n      }\n    }\n    const queryResponse = getFirstSectionValueMatchingWithQuery(cleanKeyPressed, activeSection);\n    if (isQueryResponseWithoutValue(queryResponse) && !queryResponse.saveQuery) {\n      resetQuery();\n      return null;\n    }\n    setQuery({\n      sectionIndex,\n      value: cleanKeyPressed,\n      sectionType: activeSection.type\n    });\n    if (isQueryResponseWithoutValue(queryResponse)) {\n      return null;\n    }\n    return queryResponse;\n  };\n  const applyLetterEditing = params => {\n    const findMatchingOptions = (format, options, queryValue) => {\n      const matchingValues = options.filter(option => option.toLowerCase().startsWith(queryValue));\n      if (matchingValues.length === 0) {\n        return {\n          saveQuery: false\n        };\n      }\n      return {\n        sectionValue: matchingValues[0],\n        shouldGoToNextSection: matchingValues.length === 1\n      };\n    };\n    const testQueryOnFormatAndFallbackFormat = (queryValue, activeSection, fallbackFormat, formatFallbackValue) => {\n      const getOptions = format => getLetterEditingOptions(utils, timezone, activeSection.type, format);\n      if (activeSection.contentType === 'letter') {\n        return findMatchingOptions(activeSection.format, getOptions(activeSection.format), queryValue);\n      }\n\n      // When editing a digit-format month / weekDay and the user presses a letter,\n      // We can support the letter editing by using the letter-format month / weekDay and re-formatting the result.\n      // We just have to make sure that the default month / weekDay format is a letter format,\n      if (fallbackFormat && formatFallbackValue != null && getDateSectionConfigFromFormatToken(utils, fallbackFormat).contentType === 'letter') {\n        const fallbackOptions = getOptions(fallbackFormat);\n        const response = findMatchingOptions(fallbackFormat, fallbackOptions, queryValue);\n        if (isQueryResponseWithoutValue(response)) {\n          return {\n            saveQuery: false\n          };\n        }\n        return _extends({}, response, {\n          sectionValue: formatFallbackValue(response.sectionValue, fallbackOptions)\n        });\n      }\n      return {\n        saveQuery: false\n      };\n    };\n    const getFirstSectionValueMatchingWithQuery = (queryValue, activeSection) => {\n      switch (activeSection.type) {\n        case 'month':\n          {\n            const formatFallbackValue = fallbackValue => changeSectionValueFormat(utils, fallbackValue, utils.formats.month, activeSection.format);\n            return testQueryOnFormatAndFallbackFormat(queryValue, activeSection, utils.formats.month, formatFallbackValue);\n          }\n        case 'weekDay':\n          {\n            const formatFallbackValue = (fallbackValue, fallbackOptions) => fallbackOptions.indexOf(fallbackValue).toString();\n            return testQueryOnFormatAndFallbackFormat(queryValue, activeSection, utils.formats.weekday, formatFallbackValue);\n          }\n        case 'meridiem':\n          {\n            return testQueryOnFormatAndFallbackFormat(queryValue, activeSection);\n          }\n        default:\n          {\n            return {\n              saveQuery: false\n            };\n          }\n      }\n    };\n    return applyQuery(params, getFirstSectionValueMatchingWithQuery);\n  };\n  const applyNumericEditing = params => {\n    const getNewSectionValue = (queryValue, section) => {\n      const queryValueNumber = Number(`${queryValue}`);\n      const sectionBoundaries = sectionsValueBoundaries[section.type]({\n        currentDate: null,\n        format: section.format,\n        contentType: section.contentType\n      });\n      if (queryValueNumber > sectionBoundaries.maximum) {\n        return {\n          saveQuery: false\n        };\n      }\n\n      // If the user types `0` on a month section,\n      // It is below the minimum, but we want to store the `0` in the query,\n      // So that when he pressed `1`, it will store `01` and move to the next section.\n      if (queryValueNumber < sectionBoundaries.minimum) {\n        return {\n          saveQuery: true\n        };\n      }\n      const shouldGoToNextSection = Number(`${queryValue}0`) > sectionBoundaries.maximum || queryValue.length === sectionBoundaries.maximum.toString().length;\n      const newSectionValue = cleanDigitSectionValue(utils, timezone, queryValueNumber, sectionBoundaries, section);\n      return {\n        sectionValue: newSectionValue,\n        shouldGoToNextSection\n      };\n    };\n    const getFirstSectionValueMatchingWithQuery = (queryValue, activeSection) => {\n      if (activeSection.contentType === 'digit' || activeSection.contentType === 'digit-with-letter') {\n        return getNewSectionValue(queryValue, activeSection);\n      }\n\n      // When editing a letter-format month and the user presses a digit,\n      // We can support the numeric editing by using the digit-format month and re-formatting the result.\n      if (activeSection.type === 'month') {\n        const hasLeadingZerosInFormat = doesSectionFormatHaveLeadingZeros(utils, timezone, 'digit', 'month', 'MM');\n        const response = getNewSectionValue(queryValue, {\n          type: activeSection.type,\n          format: 'MM',\n          hasLeadingZerosInFormat,\n          hasLeadingZerosInInput: true,\n          contentType: 'digit',\n          maxLength: 2\n        });\n        if (isQueryResponseWithoutValue(response)) {\n          return response;\n        }\n        const formattedValue = changeSectionValueFormat(utils, response.sectionValue, 'MM', activeSection.format);\n        return _extends({}, response, {\n          sectionValue: formattedValue\n        });\n      }\n\n      // When editing a letter-format weekDay and the user presses a digit,\n      // We can support the numeric editing by returning the nth day in the week day array.\n      if (activeSection.type === 'weekDay') {\n        const response = getNewSectionValue(queryValue, activeSection);\n        if (isQueryResponseWithoutValue(response)) {\n          return response;\n        }\n        const formattedValue = getDaysInWeekStr(utils, timezone, activeSection.format)[Number(response.sectionValue) - 1];\n        return _extends({}, response, {\n          sectionValue: formattedValue\n        });\n      }\n      return {\n        saveQuery: false\n      };\n    };\n    return applyQuery(params, getFirstSectionValueMatchingWithQuery, queryValue => !Number.isNaN(Number(queryValue)));\n  };\n  const applyCharacterEditing = useEventCallback(params => {\n    const activeSection = sections[params.sectionIndex];\n    const isNumericEditing = params.keyPressed !== ' ' && !Number.isNaN(Number(params.keyPressed));\n    const response = isNumericEditing ? applyNumericEditing(params) : applyLetterEditing(params);\n    if (response == null) {\n      setTempAndroidValueStr(null);\n    } else {\n      updateSectionValue({\n        activeSection,\n        newSectionValue: response.sectionValue,\n        shouldGoToNextSection: response.shouldGoToNextSection\n      });\n    }\n  });\n  return {\n    applyCharacterEditing,\n    resetCharacterQuery: resetQuery\n  };\n};","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"onClick\", \"onKeyDown\", \"onFocus\", \"onBlur\", \"onMouseUp\", \"onPaste\", \"error\", \"clearable\", \"onClear\", \"disabled\"];\nimport * as React from 'react';\nimport useEnhancedEffect from '@mui/utils/useEnhancedEffect';\nimport useEventCallback from '@mui/utils/useEventCallback';\nimport useForkRef from '@mui/utils/useForkRef';\nimport { useTheme } from '@mui/material/styles';\nimport { useValidation } from '../useValidation';\nimport { useUtils } from '../useUtils';\nimport { adjustSectionValue, isAndroid, cleanString, getSectionOrder } from './useField.utils';\nimport { useFieldState } from './useFieldState';\nimport { useFieldCharacterEditing } from './useFieldCharacterEditing';\nimport { getActiveElement } from '../../utils/utils';\nexport const useField = params => {\n  const utils = useUtils();\n  const {\n    state,\n    selectedSectionIndexes,\n    setSelectedSections,\n    clearValue,\n    clearActiveSection,\n    updateSectionValue,\n    updateValueFromValueStr,\n    setTempAndroidValueStr,\n    sectionsValueBoundaries,\n    placeholder,\n    timezone\n  } = useFieldState(params);\n  const {\n      inputRef: inputRefProp,\n      internalProps,\n      internalProps: {\n        readOnly = false,\n        unstableFieldRef,\n        minutesStep\n      },\n      forwardedProps: {\n        onClick,\n        onKeyDown,\n        onFocus,\n        onBlur,\n        onMouseUp,\n        onPaste,\n        error,\n        clearable,\n        onClear,\n        disabled\n      },\n      fieldValueManager,\n      valueManager,\n      validator\n    } = params,\n    otherForwardedProps = _objectWithoutPropertiesLoose(params.forwardedProps, _excluded);\n  const {\n    applyCharacterEditing,\n    resetCharacterQuery\n  } = useFieldCharacterEditing({\n    sections: state.sections,\n    updateSectionValue,\n    sectionsValueBoundaries,\n    setTempAndroidValueStr,\n    timezone\n  });\n  const inputRef = React.useRef(null);\n  const handleRef = useForkRef(inputRefProp, inputRef);\n  const focusTimeoutRef = React.useRef(undefined);\n  const theme = useTheme();\n  const isRTL = theme.direction === 'rtl';\n  const sectionOrder = React.useMemo(() => getSectionOrder(state.sections, isRTL), [state.sections, isRTL]);\n  const syncSelectionFromDOM = () => {\n    var _selectionStart;\n    if (readOnly) {\n      setSelectedSections(null);\n      return;\n    }\n    const browserStartIndex = (_selectionStart = inputRef.current.selectionStart) != null ? _selectionStart : 0;\n    let nextSectionIndex;\n    if (browserStartIndex <= state.sections[0].startInInput) {\n      // Special case if browser index is in invisible characters at the beginning\n      nextSectionIndex = 1;\n    } else if (browserStartIndex >= state.sections[state.sections.length - 1].endInInput) {\n      // If the click is after the last character of the input, then we want to select the 1st section.\n      nextSectionIndex = 1;\n    } else {\n      nextSectionIndex = state.sections.findIndex(section => section.startInInput - section.startSeparator.length > browserStartIndex);\n    }\n    const sectionIndex = nextSectionIndex === -1 ? state.sections.length - 1 : nextSectionIndex - 1;\n    setSelectedSections(sectionIndex);\n  };\n  const handleInputClick = useEventCallback((event, ...args) => {\n    // The click event on the clear button would propagate to the input, trigger this handler and result in a wrong section selection.\n    // We avoid this by checking if the call of `handleInputClick` is actually intended, or a side effect.\n    if (event.isDefaultPrevented()) {\n      return;\n    }\n    onClick == null || onClick(event, ...args);\n    syncSelectionFromDOM();\n  });\n  const handleInputMouseUp = useEventCallback(event => {\n    onMouseUp == null || onMouseUp(event);\n\n    // Without this, the browser will remove the selected when clicking inside an already-selected section.\n    event.preventDefault();\n  });\n  const handleInputFocus = useEventCallback((...args) => {\n    onFocus == null || onFocus(...args);\n    // The ref is guaranteed to be resolved at this point.\n    const input = inputRef.current;\n    window.clearTimeout(focusTimeoutRef.current);\n    focusTimeoutRef.current = setTimeout(() => {\n      // The ref changed, the component got remounted, the focus event is no longer relevant.\n      if (!input || input !== inputRef.current) {\n        return;\n      }\n      if (selectedSectionIndexes != null || readOnly) {\n        return;\n      }\n      if (\n      // avoid selecting all sections when focusing empty field without value\n      input.value.length && Number(input.selectionEnd) - Number(input.selectionStart) === input.value.length) {\n        setSelectedSections('all');\n      } else {\n        syncSelectionFromDOM();\n      }\n    });\n  });\n  const handleInputBlur = useEventCallback((...args) => {\n    onBlur == null || onBlur(...args);\n    setSelectedSections(null);\n  });\n  const handleInputPaste = useEventCallback(event => {\n    onPaste == null || onPaste(event);\n    if (readOnly) {\n      event.preventDefault();\n      return;\n    }\n    const pastedValue = event.clipboardData.getData('text');\n    if (selectedSectionIndexes && selectedSectionIndexes.startIndex === selectedSectionIndexes.endIndex) {\n      const activeSection = state.sections[selectedSectionIndexes.startIndex];\n      const lettersOnly = /^[a-zA-Z]+$/.test(pastedValue);\n      const digitsOnly = /^[0-9]+$/.test(pastedValue);\n      const digitsAndLetterOnly = /^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(pastedValue);\n      const isValidPastedValue = activeSection.contentType === 'letter' && lettersOnly || activeSection.contentType === 'digit' && digitsOnly || activeSection.contentType === 'digit-with-letter' && digitsAndLetterOnly;\n      if (isValidPastedValue) {\n        resetCharacterQuery();\n        updateSectionValue({\n          activeSection,\n          newSectionValue: pastedValue,\n          shouldGoToNextSection: true\n        });\n        // prevent default to avoid the input change handler being called\n        event.preventDefault();\n        return;\n      }\n      if (lettersOnly || digitsOnly) {\n        // The pasted value correspond to a single section but not the expected type\n        // skip the modification\n        event.preventDefault();\n        return;\n      }\n    }\n    event.preventDefault();\n    resetCharacterQuery();\n    updateValueFromValueStr(pastedValue);\n  });\n  const handleInputChange = useEventCallback(event => {\n    if (readOnly) {\n      return;\n    }\n    const targetValue = event.target.value;\n    if (targetValue === '') {\n      resetCharacterQuery();\n      clearValue();\n      return;\n    }\n    const eventData = event.nativeEvent.data;\n    // Calling `.fill(04/11/2022)` in playwright will trigger a change event with the requested content to insert in `event.nativeEvent.data`\n    // usual changes have only the currently typed character in the `event.nativeEvent.data`\n    const shouldUseEventData = eventData && eventData.length > 1;\n    const valueStr = shouldUseEventData ? eventData : targetValue;\n    const cleanValueStr = cleanString(valueStr);\n\n    // If no section is selected or eventData should be used, we just try to parse the new value\n    // This line is mostly triggered by imperative code / application tests.\n    if (selectedSectionIndexes == null || shouldUseEventData) {\n      updateValueFromValueStr(shouldUseEventData ? eventData : cleanValueStr);\n      return;\n    }\n    let keyPressed;\n    if (selectedSectionIndexes.startIndex === 0 && selectedSectionIndexes.endIndex === state.sections.length - 1 && cleanValueStr.length === 1) {\n      keyPressed = cleanValueStr;\n    } else {\n      const prevValueStr = cleanString(fieldValueManager.getValueStrFromSections(state.sections, isRTL));\n      let startOfDiffIndex = -1;\n      let endOfDiffIndex = -1;\n      for (let i = 0; i < prevValueStr.length; i += 1) {\n        if (startOfDiffIndex === -1 && prevValueStr[i] !== cleanValueStr[i]) {\n          startOfDiffIndex = i;\n        }\n        if (endOfDiffIndex === -1 && prevValueStr[prevValueStr.length - i - 1] !== cleanValueStr[cleanValueStr.length - i - 1]) {\n          endOfDiffIndex = i;\n        }\n      }\n      const activeSection = state.sections[selectedSectionIndexes.startIndex];\n      const hasDiffOutsideOfActiveSection = startOfDiffIndex < activeSection.start || prevValueStr.length - endOfDiffIndex - 1 > activeSection.end;\n      if (hasDiffOutsideOfActiveSection) {\n        // TODO: Support if the new date is valid\n        return;\n      }\n\n      // The active section being selected, the browser has replaced its value with the key pressed by the user.\n      const activeSectionEndRelativeToNewValue = cleanValueStr.length - prevValueStr.length + activeSection.end - cleanString(activeSection.endSeparator || '').length;\n      keyPressed = cleanValueStr.slice(activeSection.start + cleanString(activeSection.startSeparator || '').length, activeSectionEndRelativeToNewValue);\n    }\n    if (keyPressed.length === 0) {\n      if (isAndroid()) {\n        setTempAndroidValueStr(valueStr);\n      } else {\n        resetCharacterQuery();\n        clearActiveSection();\n      }\n      return;\n    }\n    applyCharacterEditing({\n      keyPressed,\n      sectionIndex: selectedSectionIndexes.startIndex\n    });\n  });\n  const handleInputKeyDown = useEventCallback(event => {\n    onKeyDown == null || onKeyDown(event);\n\n    // eslint-disable-next-line default-case\n    switch (true) {\n      // Select all\n      case event.key === 'a' && (event.ctrlKey || event.metaKey):\n        {\n          // prevent default to make sure that the next line \"select all\" while updating\n          // the internal state at the same time.\n          event.preventDefault();\n          setSelectedSections('all');\n          break;\n        }\n\n      // Move selection to next section\n      case event.key === 'ArrowRight':\n        {\n          event.preventDefault();\n          if (selectedSectionIndexes == null) {\n            setSelectedSections(sectionOrder.startIndex);\n          } else if (selectedSectionIndexes.startIndex !== selectedSectionIndexes.endIndex) {\n            setSelectedSections(selectedSectionIndexes.endIndex);\n          } else {\n            const nextSectionIndex = sectionOrder.neighbors[selectedSectionIndexes.startIndex].rightIndex;\n            if (nextSectionIndex !== null) {\n              setSelectedSections(nextSectionIndex);\n            }\n          }\n          break;\n        }\n\n      // Move selection to previous section\n      case event.key === 'ArrowLeft':\n        {\n          event.preventDefault();\n          if (selectedSectionIndexes == null) {\n            setSelectedSections(sectionOrder.endIndex);\n          } else if (selectedSectionIndexes.startIndex !== selectedSectionIndexes.endIndex) {\n            setSelectedSections(selectedSectionIndexes.startIndex);\n          } else {\n            const nextSectionIndex = sectionOrder.neighbors[selectedSectionIndexes.startIndex].leftIndex;\n            if (nextSectionIndex !== null) {\n              setSelectedSections(nextSectionIndex);\n            }\n          }\n          break;\n        }\n\n      // Reset the value of the selected section\n      case event.key === 'Delete':\n        {\n          event.preventDefault();\n          if (readOnly) {\n            break;\n          }\n          if (selectedSectionIndexes == null || selectedSectionIndexes.startIndex === 0 && selectedSectionIndexes.endIndex === state.sections.length - 1) {\n            clearValue();\n          } else {\n            clearActiveSection();\n          }\n          resetCharacterQuery();\n          break;\n        }\n\n      // Increment / decrement the selected section value\n      case ['ArrowUp', 'ArrowDown', 'Home', 'End', 'PageUp', 'PageDown'].includes(event.key):\n        {\n          event.preventDefault();\n          if (readOnly || selectedSectionIndexes == null) {\n            break;\n          }\n          const activeSection = state.sections[selectedSectionIndexes.startIndex];\n          const activeDateManager = fieldValueManager.getActiveDateManager(utils, state, activeSection);\n          const newSectionValue = adjustSectionValue(utils, timezone, activeSection, event.key, sectionsValueBoundaries, activeDateManager.date, {\n            minutesStep\n          });\n          updateSectionValue({\n            activeSection,\n            newSectionValue,\n            shouldGoToNextSection: false\n          });\n          break;\n        }\n    }\n  });\n  useEnhancedEffect(() => {\n    if (!inputRef.current) {\n      return;\n    }\n    if (selectedSectionIndexes == null) {\n      if (inputRef.current.scrollLeft) {\n        // Ensure that input content is not marked as selected.\n        // setting selection range to 0 causes issues in Safari.\n        // https://bugs.webkit.org/show_bug.cgi?id=224425\n        inputRef.current.scrollLeft = 0;\n      }\n      return;\n    }\n    const firstSelectedSection = state.sections[selectedSectionIndexes.startIndex];\n    const lastSelectedSection = state.sections[selectedSectionIndexes.endIndex];\n    let selectionStart = firstSelectedSection.startInInput;\n    let selectionEnd = lastSelectedSection.endInInput;\n    if (selectedSectionIndexes.shouldSelectBoundarySelectors) {\n      selectionStart -= firstSelectedSection.startSeparator.length;\n      selectionEnd += lastSelectedSection.endSeparator.length;\n    }\n    if (selectionStart !== inputRef.current.selectionStart || selectionEnd !== inputRef.current.selectionEnd) {\n      // Fix scroll jumping on iOS browser: https://github.com/mui/mui-x/issues/8321\n      const currentScrollTop = inputRef.current.scrollTop;\n      // On multi input range pickers we want to update selection range only for the active input\n      // This helps to avoid the focus jumping on Safari https://github.com/mui/mui-x/issues/9003\n      // because WebKit implements the `setSelectionRange` based on the spec: https://bugs.webkit.org/show_bug.cgi?id=224425\n      if (inputRef.current === getActiveElement(document)) {\n        inputRef.current.setSelectionRange(selectionStart, selectionEnd);\n      }\n      // Even reading this variable seems to do the trick, but also setting it just to make use of it\n      inputRef.current.scrollTop = currentScrollTop;\n    }\n  });\n  const validationError = useValidation(_extends({}, internalProps, {\n    value: state.value,\n    timezone\n  }), validator, valueManager.isSameError, valueManager.defaultErrorState);\n  const inputError = React.useMemo(() => {\n    // only override when `error` is undefined.\n    // in case of multi input fields, the `error` value is provided externally and will always be defined.\n    if (error !== undefined) {\n      return error;\n    }\n    return valueManager.hasError(validationError);\n  }, [valueManager, validationError, error]);\n  React.useEffect(() => {\n    if (!inputError && !selectedSectionIndexes) {\n      resetCharacterQuery();\n    }\n  }, [state.referenceValue, selectedSectionIndexes, inputError]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  React.useEffect(() => {\n    // Select the right section when focused on mount (`autoFocus = true` on the input)\n    if (inputRef.current && inputRef.current === document.activeElement) {\n      setSelectedSections('all');\n    }\n    return () => window.clearTimeout(focusTimeoutRef.current);\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  // If `state.tempValueStrAndroid` is still defined when running `useEffect`,\n  // Then `onChange` has only been called once, which means the user pressed `Backspace` to reset the section.\n  // This causes a small flickering on Android,\n  // But we can't use `useEnhancedEffect` which is always called before the second `onChange` call and then would cause false positives.\n  React.useEffect(() => {\n    if (state.tempValueStrAndroid != null && selectedSectionIndexes != null) {\n      resetCharacterQuery();\n      clearActiveSection();\n    }\n  }, [state.tempValueStrAndroid]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const valueStr = React.useMemo(() => {\n    var _state$tempValueStrAn;\n    return (_state$tempValueStrAn = state.tempValueStrAndroid) != null ? _state$tempValueStrAn : fieldValueManager.getValueStrFromSections(state.sections, isRTL);\n  }, [state.sections, fieldValueManager, state.tempValueStrAndroid, isRTL]);\n  const inputMode = React.useMemo(() => {\n    if (selectedSectionIndexes == null) {\n      return 'text';\n    }\n    if (state.sections[selectedSectionIndexes.startIndex].contentType === 'letter') {\n      return 'text';\n    }\n    return 'numeric';\n  }, [selectedSectionIndexes, state.sections]);\n  const inputHasFocus = inputRef.current && inputRef.current === getActiveElement(document);\n  const areAllSectionsEmpty = valueManager.areValuesEqual(utils, state.value, valueManager.emptyValue);\n  const shouldShowPlaceholder = !inputHasFocus && areAllSectionsEmpty;\n  React.useImperativeHandle(unstableFieldRef, () => ({\n    getSections: () => state.sections,\n    getActiveSectionIndex: () => {\n      var _selectionStart2, _selectionEnd, _inputRef$current;\n      const browserStartIndex = (_selectionStart2 = inputRef.current.selectionStart) != null ? _selectionStart2 : 0;\n      const browserEndIndex = (_selectionEnd = inputRef.current.selectionEnd) != null ? _selectionEnd : 0;\n      const isInputReadOnly = !!((_inputRef$current = inputRef.current) != null && _inputRef$current.readOnly);\n      if (browserStartIndex === 0 && browserEndIndex === 0 || isInputReadOnly) {\n        return null;\n      }\n      const nextSectionIndex = browserStartIndex <= state.sections[0].startInInput ? 1 // Special case if browser index is in invisible characters at the beginning.\n      : state.sections.findIndex(section => section.startInInput - section.startSeparator.length > browserStartIndex);\n      return nextSectionIndex === -1 ? state.sections.length - 1 : nextSectionIndex - 1;\n    },\n    setSelectedSections: activeSectionIndex => setSelectedSections(activeSectionIndex)\n  }));\n  const handleClearValue = useEventCallback((event, ...args) => {\n    var _inputRef$current2;\n    event.preventDefault();\n    onClear == null || onClear(event, ...args);\n    clearValue();\n    inputRef == null || (_inputRef$current2 = inputRef.current) == null || _inputRef$current2.focus();\n    setSelectedSections(0);\n  });\n  return _extends({\n    placeholder,\n    autoComplete: 'off',\n    disabled: Boolean(disabled)\n  }, otherForwardedProps, {\n    value: shouldShowPlaceholder ? '' : valueStr,\n    inputMode,\n    readOnly,\n    onClick: handleInputClick,\n    onFocus: handleInputFocus,\n    onBlur: handleInputBlur,\n    onPaste: handleInputPaste,\n    onChange: handleInputChange,\n    onKeyDown: handleInputKeyDown,\n    onMouseUp: handleInputMouseUp,\n    onClear: handleClearValue,\n    error: inputError,\n    ref: handleRef,\n    clearable: Boolean(clearable && !areAllSectionsEmpty && !readOnly && !disabled)\n  });\n};","import * as React from 'react';\nexport const useOpenState = ({\n  open,\n  onOpen,\n  onClose\n}) => {\n  const isControllingOpenProp = React.useRef(typeof open === 'boolean').current;\n  const [openState, setIsOpenState] = React.useState(false);\n\n  // It is required to update inner state in useEffect in order to avoid situation when\n  // Our component is not mounted yet, but `open` state is set to `true` (e.g. initially opened)\n  React.useEffect(() => {\n    if (isControllingOpenProp) {\n      if (typeof open !== 'boolean') {\n        throw new Error('You must not mix controlling and uncontrolled mode for `open` prop');\n      }\n      setIsOpenState(open);\n    }\n  }, [isControllingOpenProp, open]);\n  const setIsOpen = React.useCallback(newIsOpen => {\n    if (!isControllingOpenProp) {\n      setIsOpenState(newIsOpen);\n    }\n    if (newIsOpen && onOpen) {\n      onOpen();\n    }\n    if (!newIsOpen && onClose) {\n      onClose();\n    }\n  }, [isControllingOpenProp, onOpen, onClose]);\n  return {\n    isOpen: openState,\n    setIsOpen\n  };\n};","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { unstable_useControlled as useControlled } from '@mui/utils';\nimport useEventCallback from '@mui/utils/useEventCallback';\nimport { useOpenState } from '../useOpenState';\nimport { useLocalizationContext, useUtils } from '../useUtils';\nimport { useValidation } from '../useValidation';\nimport { useValueWithTimezone } from '../useValueWithTimezone';\n\n/**\n * Decide if the new value should be published\n * The published value will be passed to `onChange` if defined.\n */\nconst shouldPublishValue = params => {\n  const {\n    action,\n    hasChanged,\n    dateState,\n    isControlled\n  } = params;\n  const isCurrentValueTheDefaultValue = !isControlled && !dateState.hasBeenModifiedSinceMount;\n\n  // The field is responsible for only calling `onChange` when needed.\n  if (action.name === 'setValueFromField') {\n    return true;\n  }\n  if (action.name === 'setValueFromAction') {\n    // If the component is not controlled, and the value has not been modified since the mount,\n    // Then we want to publish the default value whenever the user pressed the \"Accept\", \"Today\" or \"Clear\" button.\n    if (isCurrentValueTheDefaultValue && ['accept', 'today', 'clear'].includes(action.pickerAction)) {\n      return true;\n    }\n    return hasChanged(dateState.lastPublishedValue);\n  }\n  if (action.name === 'setValueFromView' && action.selectionState !== 'shallow') {\n    // On the first view,\n    // If the value is not controlled, then clicking on any value (including the one equal to `defaultValue`) should call `onChange`\n    if (isCurrentValueTheDefaultValue) {\n      return true;\n    }\n    return hasChanged(dateState.lastPublishedValue);\n  }\n  if (action.name === 'setValueFromShortcut') {\n    // On the first view,\n    // If the value is not controlled, then clicking on any value (including the one equal to `defaultValue`) should call `onChange`\n    if (isCurrentValueTheDefaultValue) {\n      return true;\n    }\n    return hasChanged(dateState.lastPublishedValue);\n  }\n  return false;\n};\n\n/**\n * Decide if the new value should be committed.\n * The committed value will be passed to `onAccept` if defined.\n * It will also be used as a reset target when calling the `cancel` picker action (when clicking on the \"Cancel\" button).\n */\nconst shouldCommitValue = params => {\n  const {\n    action,\n    hasChanged,\n    dateState,\n    isControlled,\n    closeOnSelect\n  } = params;\n  const isCurrentValueTheDefaultValue = !isControlled && !dateState.hasBeenModifiedSinceMount;\n  if (action.name === 'setValueFromAction') {\n    // If the component is not controlled, and the value has not been modified since the mount,\n    // Then we want to commit the default value whenever the user pressed the \"Accept\", \"Today\" or \"Clear\" button.\n    if (isCurrentValueTheDefaultValue && ['accept', 'today', 'clear'].includes(action.pickerAction)) {\n      return true;\n    }\n    return hasChanged(dateState.lastCommittedValue);\n  }\n  if (action.name === 'setValueFromView' && action.selectionState === 'finish' && closeOnSelect) {\n    // On picker where the 1st view is also the last view,\n    // If the value is not controlled, then clicking on any value (including the one equal to `defaultValue`) should call `onAccept`\n    if (isCurrentValueTheDefaultValue) {\n      return true;\n    }\n    return hasChanged(dateState.lastCommittedValue);\n  }\n  if (action.name === 'setValueFromShortcut') {\n    return action.changeImportance === 'accept' && hasChanged(dateState.lastCommittedValue);\n  }\n  return false;\n};\n\n/**\n * Decide if the picker should be closed after the value is updated.\n */\nconst shouldClosePicker = params => {\n  const {\n    action,\n    closeOnSelect\n  } = params;\n  if (action.name === 'setValueFromAction') {\n    return true;\n  }\n  if (action.name === 'setValueFromView') {\n    return action.selectionState === 'finish' && closeOnSelect;\n  }\n  if (action.name === 'setValueFromShortcut') {\n    return action.changeImportance === 'accept';\n  }\n  return false;\n};\n\n/**\n * Manage the value lifecycle of all the pickers.\n */\nexport const usePickerValue = ({\n  props,\n  valueManager,\n  valueType,\n  wrapperVariant,\n  validator\n}) => {\n  const {\n    onAccept,\n    onChange,\n    value: inValue,\n    defaultValue: inDefaultValue,\n    closeOnSelect = wrapperVariant === 'desktop',\n    selectedSections: selectedSectionsProp,\n    onSelectedSectionsChange,\n    timezone: timezoneProp\n  } = props;\n  const {\n    current: defaultValue\n  } = React.useRef(inDefaultValue);\n  const {\n    current: isControlled\n  } = React.useRef(inValue !== undefined);\n\n  /* eslint-disable react-hooks/rules-of-hooks, react-hooks/exhaustive-deps */\n  if (process.env.NODE_ENV !== 'production') {\n    React.useEffect(() => {\n      if (isControlled !== (inValue !== undefined)) {\n        console.error([`MUI: A component is changing the ${isControlled ? '' : 'un'}controlled value of a picker to be ${isControlled ? 'un' : ''}controlled.`, 'Elements should not switch from uncontrolled to controlled (or vice versa).', `Decide between using a controlled or uncontrolled value` + 'for the lifetime of the component.', \"The nature of the state is determined during the first render. It's considered controlled if the value is not `undefined`.\", 'More info: https://fb.me/react-controlled-components'].join('\\n'));\n      }\n    }, [inValue]);\n    React.useEffect(() => {\n      if (!isControlled && defaultValue !== inDefaultValue) {\n        console.error([`MUI: A component is changing the defaultValue of an uncontrolled picker after being initialized. ` + `To suppress this warning opt to use a controlled value.`].join('\\n'));\n      }\n    }, [JSON.stringify(defaultValue)]);\n  }\n  /* eslint-enable react-hooks/rules-of-hooks, react-hooks/exhaustive-deps */\n\n  const utils = useUtils();\n  const adapter = useLocalizationContext();\n  const [selectedSections, setSelectedSections] = useControlled({\n    controlled: selectedSectionsProp,\n    default: null,\n    name: 'usePickerValue',\n    state: 'selectedSections'\n  });\n  const {\n    isOpen,\n    setIsOpen\n  } = useOpenState(props);\n  const [dateState, setDateState] = React.useState(() => {\n    let initialValue;\n    if (inValue !== undefined) {\n      initialValue = inValue;\n    } else if (defaultValue !== undefined) {\n      initialValue = defaultValue;\n    } else {\n      initialValue = valueManager.emptyValue;\n    }\n    return {\n      draft: initialValue,\n      lastPublishedValue: initialValue,\n      lastCommittedValue: initialValue,\n      lastControlledValue: inValue,\n      hasBeenModifiedSinceMount: false\n    };\n  });\n  const {\n    timezone,\n    handleValueChange\n  } = useValueWithTimezone({\n    timezone: timezoneProp,\n    value: inValue,\n    defaultValue,\n    onChange,\n    valueManager\n  });\n  useValidation(_extends({}, props, {\n    value: dateState.draft,\n    timezone\n  }), validator, valueManager.isSameError, valueManager.defaultErrorState);\n  const updateDate = useEventCallback(action => {\n    const updaterParams = {\n      action,\n      dateState,\n      hasChanged: comparison => !valueManager.areValuesEqual(utils, action.value, comparison),\n      isControlled,\n      closeOnSelect\n    };\n    const shouldPublish = shouldPublishValue(updaterParams);\n    const shouldCommit = shouldCommitValue(updaterParams);\n    const shouldClose = shouldClosePicker(updaterParams);\n    setDateState(prev => _extends({}, prev, {\n      draft: action.value,\n      lastPublishedValue: shouldPublish ? action.value : prev.lastPublishedValue,\n      lastCommittedValue: shouldCommit ? action.value : prev.lastCommittedValue,\n      hasBeenModifiedSinceMount: true\n    }));\n    if (shouldPublish) {\n      const validationError = action.name === 'setValueFromField' ? action.context.validationError : validator({\n        adapter,\n        value: action.value,\n        props: _extends({}, props, {\n          value: action.value,\n          timezone\n        })\n      });\n      const context = {\n        validationError\n      };\n\n      // TODO v7: Remove 2nd condition\n      if (action.name === 'setValueFromShortcut' && action.shortcut != null) {\n        context.shortcut = action.shortcut;\n      }\n      handleValueChange(action.value, context);\n    }\n    if (shouldCommit && onAccept) {\n      onAccept(action.value);\n    }\n    if (shouldClose) {\n      setIsOpen(false);\n    }\n  });\n  if (inValue !== undefined && (dateState.lastControlledValue === undefined || !valueManager.areValuesEqual(utils, dateState.lastControlledValue, inValue))) {\n    const isUpdateComingFromPicker = valueManager.areValuesEqual(utils, dateState.draft, inValue);\n    setDateState(prev => _extends({}, prev, {\n      lastControlledValue: inValue\n    }, isUpdateComingFromPicker ? {} : {\n      lastCommittedValue: inValue,\n      lastPublishedValue: inValue,\n      draft: inValue,\n      hasBeenModifiedSinceMount: true\n    }));\n  }\n  const handleClear = useEventCallback(() => {\n    updateDate({\n      value: valueManager.emptyValue,\n      name: 'setValueFromAction',\n      pickerAction: 'clear'\n    });\n  });\n  const handleAccept = useEventCallback(() => {\n    updateDate({\n      value: dateState.lastPublishedValue,\n      name: 'setValueFromAction',\n      pickerAction: 'accept'\n    });\n  });\n  const handleDismiss = useEventCallback(() => {\n    updateDate({\n      value: dateState.lastPublishedValue,\n      name: 'setValueFromAction',\n      pickerAction: 'dismiss'\n    });\n  });\n  const handleCancel = useEventCallback(() => {\n    updateDate({\n      value: dateState.lastCommittedValue,\n      name: 'setValueFromAction',\n      pickerAction: 'cancel'\n    });\n  });\n  const handleSetToday = useEventCallback(() => {\n    updateDate({\n      value: valueManager.getTodayValue(utils, timezone, valueType),\n      name: 'setValueFromAction',\n      pickerAction: 'today'\n    });\n  });\n  const handleOpen = useEventCallback(() => setIsOpen(true));\n  const handleClose = useEventCallback(() => setIsOpen(false));\n  const handleChange = useEventCallback((newValue, selectionState = 'partial') => updateDate({\n    name: 'setValueFromView',\n    value: newValue,\n    selectionState\n  }));\n\n  // TODO v7: Make changeImportance and label mandatory.\n  const handleSelectShortcut = useEventCallback((newValue, changeImportance, shortcut) => updateDate({\n    name: 'setValueFromShortcut',\n    value: newValue,\n    changeImportance: changeImportance != null ? changeImportance : 'accept',\n    shortcut\n  }));\n  const handleChangeFromField = useEventCallback((newValue, context) => updateDate({\n    name: 'setValueFromField',\n    value: newValue,\n    context\n  }));\n  const handleFieldSelectedSectionsChange = useEventCallback(newSelectedSections => {\n    setSelectedSections(newSelectedSections);\n    onSelectedSectionsChange == null || onSelectedSectionsChange(newSelectedSections);\n  });\n  const actions = {\n    onClear: handleClear,\n    onAccept: handleAccept,\n    onDismiss: handleDismiss,\n    onCancel: handleCancel,\n    onSetToday: handleSetToday,\n    onOpen: handleOpen,\n    onClose: handleClose\n  };\n  const fieldResponse = {\n    value: dateState.draft,\n    onChange: handleChangeFromField,\n    selectedSections,\n    onSelectedSectionsChange: handleFieldSelectedSectionsChange\n  };\n  const viewValue = React.useMemo(() => valueManager.cleanValue(utils, dateState.draft), [utils, valueManager, dateState.draft]);\n  const viewResponse = {\n    value: viewValue,\n    onChange: handleChange,\n    onClose: handleClose,\n    open: isOpen,\n    onSelectedSectionsChange: handleFieldSelectedSectionsChange\n  };\n  const isValid = testedValue => {\n    const error = validator({\n      adapter,\n      value: testedValue,\n      props: _extends({}, props, {\n        value: testedValue,\n        timezone\n      })\n    });\n    return !valueManager.hasError(error);\n  };\n  const layoutResponse = _extends({}, actions, {\n    value: viewValue,\n    onChange: handleChange,\n    onSelectShortcut: handleSelectShortcut,\n    isValid\n  });\n  return {\n    open: isOpen,\n    fieldProps: fieldResponse,\n    viewProps: viewResponse,\n    layoutProps: layoutResponse,\n    actions\n  };\n};","import * as React from 'react';\nimport useEventCallback from '@mui/utils/useEventCallback';\nimport { unstable_useControlled as useControlled } from '@mui/utils';\nlet warnedOnceNotValidView = false;\nexport function useViews({\n  onChange,\n  onViewChange,\n  openTo,\n  view: inView,\n  views,\n  autoFocus,\n  focusedView: inFocusedView,\n  onFocusedViewChange\n}) {\n  var _views, _views2;\n  if (process.env.NODE_ENV !== 'production') {\n    if (!warnedOnceNotValidView) {\n      if (inView != null && !views.includes(inView)) {\n        console.warn(`MUI: \\`view=\"${inView}\"\\` is not a valid prop.`, `It must be an element of \\`views=[\"${views.join('\", \"')}\"]\\`.`);\n        warnedOnceNotValidView = true;\n      }\n      if (inView == null && openTo != null && !views.includes(openTo)) {\n        console.warn(`MUI: \\`openTo=\"${openTo}\"\\` is not a valid prop.`, `It must be an element of \\`views=[\"${views.join('\", \"')}\"]\\`.`);\n        warnedOnceNotValidView = true;\n      }\n    }\n  }\n  const previousOpenTo = React.useRef(openTo);\n  const previousViews = React.useRef(views);\n  const defaultView = React.useRef(views.includes(openTo) ? openTo : views[0]);\n  const [view, setView] = useControlled({\n    name: 'useViews',\n    state: 'view',\n    controlled: inView,\n    default: defaultView.current\n  });\n  const defaultFocusedView = React.useRef(autoFocus ? view : null);\n  const [focusedView, setFocusedView] = useControlled({\n    name: 'useViews',\n    state: 'focusedView',\n    controlled: inFocusedView,\n    default: defaultFocusedView.current\n  });\n  React.useEffect(() => {\n    // Update the current view when `openTo` or `views` props change\n    if (previousOpenTo.current && previousOpenTo.current !== openTo || previousViews.current && previousViews.current.some(previousView => !views.includes(previousView))) {\n      setView(views.includes(openTo) ? openTo : views[0]);\n      previousViews.current = views;\n      previousOpenTo.current = openTo;\n    }\n  }, [openTo, setView, view, views]);\n  const viewIndex = views.indexOf(view);\n  const previousView = (_views = views[viewIndex - 1]) != null ? _views : null;\n  const nextView = (_views2 = views[viewIndex + 1]) != null ? _views2 : null;\n  const handleFocusedViewChange = useEventCallback((viewToFocus, hasFocus) => {\n    if (hasFocus) {\n      // Focus event\n      setFocusedView(viewToFocus);\n    } else {\n      // Blur event\n      setFocusedView(prevFocusedView => viewToFocus === prevFocusedView ? null : prevFocusedView // If false the blur is due to view switching\n      );\n    }\n    onFocusedViewChange == null || onFocusedViewChange(viewToFocus, hasFocus);\n  });\n  const handleChangeView = useEventCallback(newView => {\n    // always keep the focused view in sync\n    handleFocusedViewChange(newView, true);\n    if (newView === view) {\n      return;\n    }\n    setView(newView);\n    if (onViewChange) {\n      onViewChange(newView);\n    }\n  });\n  const goToNextView = useEventCallback(() => {\n    if (nextView) {\n      handleChangeView(nextView);\n    }\n  });\n  const setValueAndGoToNextView = useEventCallback((value, currentViewSelectionState, selectedView) => {\n    const isSelectionFinishedOnCurrentView = currentViewSelectionState === 'finish';\n    const hasMoreViews = selectedView ?\n    // handles case like `DateTimePicker`, where a view might return a `finish` selection state\n    // but we it's not the final view given all `views` -> overall selection state should be `partial`.\n    views.indexOf(selectedView) < views.length - 1 : Boolean(nextView);\n    const globalSelectionState = isSelectionFinishedOnCurrentView && hasMoreViews ? 'partial' : currentViewSelectionState;\n    onChange(value, globalSelectionState, selectedView);\n    // Detects if the selected view is not the active one.\n    // Can happen if multiple views are displayed, like in `DesktopDateTimePicker` or `MultiSectionDigitalClock`.\n    if (selectedView && selectedView !== view) {\n      const nextViewAfterSelected = views[views.indexOf(selectedView) + 1];\n      if (nextViewAfterSelected) {\n        // move to next view after the selected one\n        handleChangeView(nextViewAfterSelected);\n      }\n    } else if (isSelectionFinishedOnCurrentView) {\n      goToNextView();\n    }\n  });\n  return {\n    view,\n    setView: handleChangeView,\n    focusedView,\n    setFocusedView: handleFocusedViewChange,\n    nextView,\n    previousView,\n    // Always return up to date default view instead of the initial one (i.e. defaultView.current)\n    defaultView: views.includes(openTo) ? openTo : views[0],\n    goToNextView,\n    setValueAndGoToNextView\n  };\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"className\", \"sx\"];\nimport * as React from 'react';\nimport useEnhancedEffect from '@mui/utils/useEnhancedEffect';\nimport useEventCallback from '@mui/utils/useEventCallback';\nimport { useViews } from '../useViews';\nimport { isTimeView } from '../../utils/time-utils';\n\n/**\n * Props used to handle the views that are common to all pickers.\n */\n\n/**\n * Props used to handle the views of the pickers.\n */\n\n/**\n * Props used to handle the value of the pickers.\n */\n\n/**\n * Manage the views of all the pickers:\n * - Handles the view switch\n * - Handles the switch between UI views and field views\n * - Handles the focus management when switching views\n */\nexport const usePickerViews = ({\n  props,\n  propsFromPickerValue,\n  additionalViewProps,\n  inputRef,\n  autoFocusView\n}) => {\n  const {\n    onChange,\n    open,\n    onSelectedSectionsChange,\n    onClose\n  } = propsFromPickerValue;\n  const {\n    view: inView,\n    views,\n    openTo,\n    onViewChange,\n    viewRenderers,\n    timezone\n  } = props;\n  const propsToForwardToView = _objectWithoutPropertiesLoose(props, _excluded);\n  const {\n    view,\n    setView,\n    defaultView,\n    focusedView,\n    setFocusedView,\n    setValueAndGoToNextView\n  } = useViews({\n    view: inView,\n    views,\n    openTo,\n    onChange,\n    onViewChange,\n    autoFocus: autoFocusView\n  });\n  const {\n    hasUIView,\n    viewModeLookup\n  } = React.useMemo(() => views.reduce((acc, viewForReduce) => {\n    let viewMode;\n    if (viewRenderers[viewForReduce] != null) {\n      viewMode = 'UI';\n    } else {\n      viewMode = 'field';\n    }\n    acc.viewModeLookup[viewForReduce] = viewMode;\n    if (viewMode === 'UI') {\n      acc.hasUIView = true;\n    }\n    return acc;\n  }, {\n    hasUIView: false,\n    viewModeLookup: {}\n  }), [viewRenderers, views]);\n  const timeViewsCount = React.useMemo(() => views.reduce((acc, viewForReduce) => {\n    if (viewRenderers[viewForReduce] != null && isTimeView(viewForReduce)) {\n      return acc + 1;\n    }\n    return acc;\n  }, 0), [viewRenderers, views]);\n  const currentViewMode = viewModeLookup[view];\n  const shouldRestoreFocus = useEventCallback(() => currentViewMode === 'UI');\n  const [popperView, setPopperView] = React.useState(currentViewMode === 'UI' ? view : null);\n  if (popperView !== view && viewModeLookup[view] === 'UI') {\n    setPopperView(view);\n  }\n  useEnhancedEffect(() => {\n    // Handle case of `DateTimePicker` without time renderers\n    if (currentViewMode === 'field' && open) {\n      onClose();\n      setTimeout(() => {\n        // focusing the input before the range selection is done\n        // calling `onSelectedSectionsChange` outside of timeout results in an inconsistent behavior between Safari And Chrome\n        inputRef == null || inputRef.current.focus();\n        onSelectedSectionsChange(view);\n      });\n    }\n  }, [view]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEnhancedEffect(() => {\n    if (!open) {\n      return;\n    }\n    let newView = view;\n\n    // If the current view is a field view, go to the last popper view\n    if (currentViewMode === 'field' && popperView != null) {\n      newView = popperView;\n    }\n\n    // If the current view is not the default view and both are UI views\n    if (newView !== defaultView && viewModeLookup[newView] === 'UI' && viewModeLookup[defaultView] === 'UI') {\n      newView = defaultView;\n    }\n    if (newView !== view) {\n      setView(newView);\n    }\n    setFocusedView(newView, true);\n  }, [open]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const layoutProps = {\n    views,\n    view: popperView,\n    onViewChange: setView\n  };\n  return {\n    hasUIView,\n    shouldRestoreFocus,\n    layoutProps,\n    renderCurrentView: () => {\n      if (popperView == null) {\n        return null;\n      }\n      const renderer = viewRenderers[popperView];\n      if (renderer == null) {\n        return null;\n      }\n      return renderer(_extends({}, propsToForwardToView, additionalViewProps, propsFromPickerValue, {\n        views,\n        timezone,\n        onChange: setValueAndGoToNextView,\n        view: popperView,\n        onViewChange: setView,\n        focusedView,\n        onFocusedViewChange: setFocusedView,\n        showViewSwitcher: timeViewsCount > 1,\n        timeViewsCount\n      }));\n    }\n  };\n};","import * as React from 'react';\nimport { unstable_useEnhancedEffect as useEnhancedEffect } from '@mui/utils';\nimport { arrayIncludes } from '../utils/utils';\nfunction getOrientation() {\n  if (typeof window === 'undefined') {\n    return 'portrait';\n  }\n  if (window.screen && window.screen.orientation && window.screen.orientation.angle) {\n    return Math.abs(window.screen.orientation.angle) === 90 ? 'landscape' : 'portrait';\n  }\n\n  // Support IOS safari\n  if (window.orientation) {\n    return Math.abs(Number(window.orientation)) === 90 ? 'landscape' : 'portrait';\n  }\n  return 'portrait';\n}\nexport const useIsLandscape = (views, customOrientation) => {\n  const [orientation, setOrientation] = React.useState(getOrientation);\n  useEnhancedEffect(() => {\n    const eventHandler = () => {\n      setOrientation(getOrientation());\n    };\n    window.addEventListener('orientationchange', eventHandler);\n    return () => {\n      window.removeEventListener('orientationchange', eventHandler);\n    };\n  }, []);\n  if (arrayIncludes(views, ['hours', 'minutes', 'seconds'])) {\n    // could not display 13:34:44 in landscape mode\n    return false;\n  }\n  const orientationToUse = customOrientation || orientation;\n  return orientationToUse === 'landscape';\n};","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { useIsLandscape } from '../useIsLandscape';\n\n/**\n * Props used to create the layout of the views.\n * Those props are exposed on all the pickers.\n */\n\n/**\n * Prepare the props for the view layout (managed by `PickersLayout`)\n */\nexport const usePickerLayoutProps = ({\n  props,\n  propsFromPickerValue,\n  propsFromPickerViews,\n  wrapperVariant\n}) => {\n  const {\n    orientation\n  } = props;\n  const isLandscape = useIsLandscape(propsFromPickerViews.views, orientation);\n  const layoutProps = _extends({}, propsFromPickerViews, propsFromPickerValue, {\n    isLandscape,\n    wrapperVariant,\n    disabled: props.disabled,\n    readOnly: props.readOnly\n  });\n  return {\n    layoutProps\n  };\n};","import { usePickerValue } from './usePickerValue';\nimport { usePickerViews } from './usePickerViews';\nimport { usePickerLayoutProps } from './usePickerLayoutProps';\nimport { buildWarning } from '../../utils/warning';\nconst warnRenderInputIsDefined = buildWarning(['The `renderInput` prop has been removed in version 6.0 of the Date and Time Pickers.', 'You can replace it with the `textField` component slot in most cases.', 'For more information, please have a look at the migration guide (https://mui.com/x/migration/migration-pickers-v5/#input-renderer-required-in-v5).']);\nexport const usePicker = ({\n  props,\n  valueManager,\n  valueType,\n  wrapperVariant,\n  inputRef,\n  additionalViewProps,\n  validator,\n  autoFocusView\n}) => {\n  if (process.env.NODE_ENV !== 'production') {\n    if (props.renderInput != null) {\n      warnRenderInputIsDefined();\n    }\n  }\n  const pickerValueResponse = usePickerValue({\n    props,\n    valueManager,\n    valueType,\n    wrapperVariant,\n    validator\n  });\n  const pickerViewsResponse = usePickerViews({\n    props,\n    inputRef,\n    additionalViewProps,\n    autoFocusView,\n    propsFromPickerValue: pickerValueResponse.viewProps\n  });\n  const pickerLayoutResponse = usePickerLayoutProps({\n    props,\n    wrapperVariant,\n    propsFromPickerValue: pickerValueResponse.layoutProps,\n    propsFromPickerViews: pickerViewsResponse.layoutProps\n  });\n  return {\n    // Picker value\n    open: pickerValueResponse.open,\n    actions: pickerValueResponse.actions,\n    fieldProps: pickerValueResponse.fieldProps,\n    // Picker views\n    renderCurrentView: pickerViewsResponse.renderCurrentView,\n    hasUIView: pickerViewsResponse.hasUIView,\n    shouldRestoreFocus: pickerViewsResponse.shouldRestoreFocus,\n    // Picker layout\n    layoutProps: pickerLayoutResponse.layoutProps\n  };\n};","import generateUtilityClass from '@mui/utils/generateUtilityClass';\nimport generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nexport function getPickersLayoutUtilityClass(slot) {\n  return generateUtilityClass('MuiPickersLayout', slot);\n}\nexport const pickersLayoutClasses = generateUtilityClasses('MuiPickersLayout', ['root', 'landscape', 'contentWrapper', 'toolbar', 'actionBar', 'tabs', 'shortcuts']);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"onAccept\", \"onClear\", \"onCancel\", \"onSetToday\", \"actions\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport Button from '@mui/material/Button';\nimport DialogActions from '@mui/material/DialogActions';\nimport { useLocaleText } from '../internals/hooks/useUtils';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n/**\n * Demos:\n *\n * - [Custom slots and subcomponents](https://mui.com/x/react-date-pickers/custom-components/)\n * - [Custom layout](https://mui.com/x/react-date-pickers/custom-layout/)\n *\n * API:\n *\n * - [PickersActionBar API](https://mui.com/x/api/date-pickers/pickers-action-bar/)\n */\nfunction PickersActionBar(props) {\n  const {\n      onAccept,\n      onClear,\n      onCancel,\n      onSetToday,\n      actions\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const localeText = useLocaleText();\n  if (actions == null || actions.length === 0) {\n    return null;\n  }\n  const buttons = actions == null ? void 0 : actions.map(actionType => {\n    switch (actionType) {\n      case 'clear':\n        return /*#__PURE__*/_jsx(Button, {\n          onClick: onClear,\n          children: localeText.clearButtonLabel\n        }, actionType);\n      case 'cancel':\n        return /*#__PURE__*/_jsx(Button, {\n          onClick: onCancel,\n          children: localeText.cancelButtonLabel\n        }, actionType);\n      case 'accept':\n        return /*#__PURE__*/_jsx(Button, {\n          onClick: onAccept,\n          children: localeText.okButtonLabel\n        }, actionType);\n      case 'today':\n        return /*#__PURE__*/_jsx(Button, {\n          onClick: onSetToday,\n          children: localeText.todayButtonLabel\n        }, actionType);\n      default:\n        return null;\n    }\n  });\n  return /*#__PURE__*/_jsx(DialogActions, _extends({}, other, {\n    children: buttons\n  }));\n}\nprocess.env.NODE_ENV !== \"production\" ? PickersActionBar.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // | To update them edit the TypeScript types and run \"yarn proptypes\"  |\n  // ----------------------------------------------------------------------\n  /**\n   * Ordered array of actions to display.\n   * If empty, does not display that action bar.\n   * @default `['cancel', 'accept']` for mobile and `[]` for desktop\n   */\n  actions: PropTypes.arrayOf(PropTypes.oneOf(['accept', 'cancel', 'clear', 'today']).isRequired),\n  /**\n   * If `true`, the actions do not have additional margin.\n   * @default false\n   */\n  disableSpacing: PropTypes.bool,\n  onAccept: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n  onClear: PropTypes.func.isRequired,\n  onSetToday: PropTypes.func.isRequired,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport { PickersActionBar };","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"items\", \"changeImportance\", \"isLandscape\", \"onChange\", \"isValid\"],\n  _excluded2 = [\"getValue\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport Chip from '@mui/material/Chip';\nimport { VIEW_HEIGHT } from '../internals/constants/dimensions';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n/**\n * Demos:\n *\n * - [Shortcuts](https://mui.com/x/react-date-pickers/shortcuts/)\n *\n * API:\n *\n * - [PickersShortcuts API](https://mui.com/x/api/date-pickers/pickers-shortcuts/)\n */\nfunction PickersShortcuts(props) {\n  const {\n      items,\n      changeImportance,\n      onChange,\n      isValid\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  if (items == null || items.length === 0) {\n    return null;\n  }\n  const resolvedItems = items.map(_ref => {\n    let {\n        getValue\n      } = _ref,\n      item = _objectWithoutPropertiesLoose(_ref, _excluded2);\n    const newValue = getValue({\n      isValid\n    });\n    return {\n      label: item.label,\n      onClick: () => {\n        onChange(newValue, changeImportance, item);\n      },\n      disabled: !isValid(newValue)\n    };\n  });\n  return /*#__PURE__*/_jsx(List, _extends({\n    dense: true,\n    sx: [{\n      maxHeight: VIEW_HEIGHT,\n      maxWidth: 200,\n      overflow: 'auto'\n    }, ...(Array.isArray(other.sx) ? other.sx : [other.sx])]\n  }, other, {\n    children: resolvedItems.map(item => {\n      return /*#__PURE__*/_jsx(ListItem, {\n        children: /*#__PURE__*/_jsx(Chip, _extends({}, item))\n      }, item.label);\n    })\n  }));\n}\nprocess.env.NODE_ENV !== \"production\" ? PickersShortcuts.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // | To update them edit the TypeScript types and run \"yarn proptypes\"  |\n  // ----------------------------------------------------------------------\n  /**\n   * Importance of the change when picking a shortcut:\n   * - \"accept\": fires `onChange`, fires `onAccept` and closes the picker.\n   * - \"set\": fires `onChange` but do not fire `onAccept` and does not close the picker.\n   * @default \"accept\"\n   */\n  changeImportance: PropTypes.oneOf(['accept', 'set']),\n  className: PropTypes.string,\n  component: PropTypes.elementType,\n  /**\n   * If `true`, compact vertical padding designed for keyboard and mouse input is used for\n   * the list and list items.\n   * The prop is available to descendant components as the `dense` context.\n   * @default false\n   */\n  dense: PropTypes.bool,\n  /**\n   * If `true`, vertical padding is removed from the list.\n   * @default false\n   */\n  disablePadding: PropTypes.bool,\n  isLandscape: PropTypes.bool.isRequired,\n  isValid: PropTypes.func.isRequired,\n  /**\n   * Ordered array of shortcuts to display.\n   * If empty, does not display the shortcuts.\n   * @default `[]`\n   */\n  items: PropTypes.arrayOf(PropTypes.shape({\n    getValue: PropTypes.func.isRequired,\n    label: PropTypes.string.isRequired\n  })),\n  onChange: PropTypes.func.isRequired,\n  style: PropTypes.object,\n  /**\n   * The content of the subheader, normally `ListSubheader`.\n   */\n  subheader: PropTypes.node,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport { PickersShortcuts };","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { useSlotProps } from '@mui/base/utils';\nimport { unstable_composeClasses as composeClasses } from '@mui/utils';\nimport { PickersActionBar } from '../PickersActionBar';\nimport { getPickersLayoutUtilityClass } from './pickersLayoutClasses';\nimport { PickersShortcuts } from '../PickersShortcuts';\nimport { uncapitalizeObjectKeys } from '../internals/utils/slots-migration';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nfunction toolbarHasView(toolbarProps) {\n  return toolbarProps.view !== null;\n}\nconst useUtilityClasses = ownerState => {\n  const {\n    classes,\n    isLandscape\n  } = ownerState;\n  const slots = {\n    root: ['root', isLandscape && 'landscape'],\n    contentWrapper: ['contentWrapper'],\n    toolbar: ['toolbar'],\n    actionBar: ['actionBar'],\n    tabs: ['tabs'],\n    landscape: ['landscape'],\n    shortcuts: ['shortcuts']\n  };\n  return composeClasses(slots, getPickersLayoutUtilityClass, classes);\n};\nconst usePickerLayout = props => {\n  var _slots$actionBar, _slots$shortcuts;\n  const {\n    wrapperVariant,\n    onAccept,\n    onClear,\n    onCancel,\n    onSetToday,\n    view,\n    views,\n    onViewChange,\n    value,\n    onChange,\n    onSelectShortcut,\n    isValid,\n    isLandscape,\n    disabled,\n    readOnly,\n    children,\n    components,\n    componentsProps,\n    slots: innerSlots,\n    slotProps: innerSlotProps\n    // TODO: Remove this \"as\" hack. It get introduced to mark `value` prop in PickersLayoutProps as not required.\n    // The true type should be\n    // - For pickers value: TDate | null\n    // - For range pickers value: [TDate | null, TDate | null]\n  } = props;\n  const slots = innerSlots != null ? innerSlots : uncapitalizeObjectKeys(components);\n  const slotProps = innerSlotProps != null ? innerSlotProps : componentsProps;\n  const classes = useUtilityClasses(props);\n\n  // Action bar\n\n  const ActionBar = (_slots$actionBar = slots == null ? void 0 : slots.actionBar) != null ? _slots$actionBar : PickersActionBar;\n  const actionBarProps = useSlotProps({\n    elementType: ActionBar,\n    externalSlotProps: slotProps == null ? void 0 : slotProps.actionBar,\n    additionalProps: {\n      onAccept,\n      onClear,\n      onCancel,\n      onSetToday,\n      actions: wrapperVariant === 'desktop' ? [] : ['cancel', 'accept'],\n      className: classes.actionBar\n    },\n    ownerState: _extends({}, props, {\n      wrapperVariant\n    })\n  });\n  const actionBar = /*#__PURE__*/_jsx(ActionBar, _extends({}, actionBarProps));\n\n  // Toolbar\n\n  const Toolbar = slots == null ? void 0 : slots.toolbar;\n  const toolbarProps = useSlotProps({\n    elementType: Toolbar,\n    externalSlotProps: slotProps == null ? void 0 : slotProps.toolbar,\n    additionalProps: {\n      isLandscape,\n      onChange,\n      value,\n      view,\n      onViewChange,\n      views,\n      disabled,\n      readOnly,\n      className: classes.toolbar\n    },\n    ownerState: _extends({}, props, {\n      wrapperVariant\n    })\n  });\n  const toolbar = toolbarHasView(toolbarProps) && !!Toolbar ? /*#__PURE__*/_jsx(Toolbar, _extends({}, toolbarProps)) : null;\n\n  // Content\n\n  const content = children;\n\n  // Tabs\n\n  const Tabs = slots == null ? void 0 : slots.tabs;\n  const tabs = view && Tabs ? /*#__PURE__*/_jsx(Tabs, _extends({\n    view: view,\n    onViewChange: onViewChange,\n    className: classes.tabs\n  }, slotProps == null ? void 0 : slotProps.tabs)) : null;\n\n  // Shortcuts\n\n  const Shortcuts = (_slots$shortcuts = slots == null ? void 0 : slots.shortcuts) != null ? _slots$shortcuts : PickersShortcuts;\n  const shortcutsProps = useSlotProps({\n    elementType: Shortcuts,\n    externalSlotProps: slotProps == null ? void 0 : slotProps.shortcuts,\n    additionalProps: {\n      isValid,\n      isLandscape,\n      onChange: onSelectShortcut,\n      className: classes.shortcuts\n    },\n    ownerState: {\n      isValid,\n      isLandscape,\n      onChange: onSelectShortcut,\n      className: classes.shortcuts,\n      wrapperVariant\n    }\n  });\n  const shortcuts = view && !!Shortcuts ? /*#__PURE__*/_jsx(Shortcuts, _extends({}, shortcutsProps)) : null;\n  return {\n    toolbar,\n    content,\n    tabs,\n    actionBar,\n    shortcuts\n  };\n};\nexport default usePickerLayout;","import * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { styled, useThemeProps } from '@mui/material/styles';\nimport { unstable_composeClasses as composeClasses } from '@mui/utils';\nimport { pickersLayoutClasses, getPickersLayoutUtilityClass } from './pickersLayoutClasses';\nimport usePickerLayout from './usePickerLayout';\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    isLandscape,\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root', isLandscape && 'landscape'],\n    contentWrapper: ['contentWrapper']\n  };\n  return composeClasses(slots, getPickersLayoutUtilityClass, classes);\n};\nconst PickersLayoutRoot = styled('div', {\n  name: 'MuiPickersLayout',\n  slot: 'Root',\n  overridesResolver: (props, styles) => styles.root\n})(({\n  theme,\n  ownerState\n}) => ({\n  display: 'grid',\n  gridAutoColumns: 'max-content auto max-content',\n  gridAutoRows: 'max-content auto max-content',\n  [`& .${pickersLayoutClasses.toolbar}`]: ownerState.isLandscape ? {\n    gridColumn: theme.direction === 'rtl' ? 3 : 1,\n    gridRow: '2 / 3'\n  } : {\n    gridColumn: '2 / 4',\n    gridRow: 1\n  },\n  [`.${pickersLayoutClasses.shortcuts}`]: ownerState.isLandscape ? {\n    gridColumn: '2 / 4',\n    gridRow: 1\n  } : {\n    gridColumn: theme.direction === 'rtl' ? 3 : 1,\n    gridRow: '2 / 3'\n  },\n  [`& .${pickersLayoutClasses.actionBar}`]: {\n    gridColumn: '1 / 4',\n    gridRow: 3\n  }\n}));\nPickersLayoutRoot.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // | To update them edit the TypeScript types and run \"yarn proptypes\"  |\n  // ----------------------------------------------------------------------\n  as: PropTypes.elementType,\n  ownerState: PropTypes.shape({\n    isLandscape: PropTypes.bool.isRequired\n  }).isRequired,\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n};\nexport { PickersLayoutRoot };\nexport const PickersLayoutContentWrapper = styled('div', {\n  name: 'MuiPickersLayout',\n  slot: 'ContentWrapper',\n  overridesResolver: (props, styles) => styles.contentWrapper\n})({\n  gridColumn: 2,\n  gridRow: 2,\n  display: 'flex',\n  flexDirection: 'column'\n});\n\n/**\n * Demos:\n *\n * - [Custom layout](https://mui.com/x/react-date-pickers/custom-layout/)\n *\n * API:\n *\n * - [PickersLayout API](https://mui.com/x/api/date-pickers/pickers-layout/)\n */\nconst PickersLayout = function PickersLayout(inProps) {\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiPickersLayout'\n  });\n  const {\n    toolbar,\n    content,\n    tabs,\n    actionBar,\n    shortcuts\n  } = usePickerLayout(props);\n  const {\n    sx,\n    className,\n    isLandscape,\n    ref,\n    wrapperVariant\n  } = props;\n  const ownerState = props;\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsxs(PickersLayoutRoot, {\n    ref: ref,\n    sx: sx,\n    className: clsx(className, classes.root),\n    ownerState: ownerState,\n    children: [isLandscape ? shortcuts : toolbar, isLandscape ? toolbar : shortcuts, /*#__PURE__*/_jsx(PickersLayoutContentWrapper, {\n      className: classes.contentWrapper,\n      children: wrapperVariant === 'desktop' ? /*#__PURE__*/_jsxs(React.Fragment, {\n        children: [content, tabs]\n      }) : /*#__PURE__*/_jsxs(React.Fragment, {\n        children: [tabs, content]\n      })\n    }), actionBar]\n  });\n};\nprocess.env.NODE_ENV !== \"production\" ? PickersLayout.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // | To update them edit the TypeScript types and run \"yarn proptypes\"  |\n  // ----------------------------------------------------------------------\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  className: PropTypes.string,\n  /**\n   * Overridable components.\n   * @default {}\n   * @deprecated Please use `slots`.\n   */\n  components: PropTypes.object,\n  /**\n   * The props used for each component slot.\n   * @default {}\n   * @deprecated Please use `slotProps`.\n   */\n  componentsProps: PropTypes.object,\n  disabled: PropTypes.bool,\n  isLandscape: PropTypes.bool.isRequired,\n  isValid: PropTypes.func.isRequired,\n  onAccept: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onClear: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onDismiss: PropTypes.func.isRequired,\n  onOpen: PropTypes.func.isRequired,\n  onSelectShortcut: PropTypes.func.isRequired,\n  onSetToday: PropTypes.func.isRequired,\n  onViewChange: PropTypes.func.isRequired,\n  /**\n   * Force rendering in particular orientation.\n   */\n  orientation: PropTypes.oneOf(['landscape', 'portrait']),\n  readOnly: PropTypes.bool,\n  /**\n   * The props used for each component slot.\n   * @default {}\n   */\n  slotProps: PropTypes.object,\n  /**\n   * Overridable component slots.\n   * @default {}\n   */\n  slots: PropTypes.object,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  value: PropTypes.any,\n  view: PropTypes.oneOf(['day', 'hours', 'meridiem', 'minutes', 'month', 'seconds', 'year']),\n  views: PropTypes.arrayOf(PropTypes.oneOf(['day', 'hours', 'meridiem', 'minutes', 'month', 'seconds', 'year']).isRequired).isRequired,\n  wrapperVariant: PropTypes.oneOf(['desktop', 'mobile'])\n} : void 0;\nexport { PickersLayout };","import * as React from 'react';\nimport { useUtils } from './useUtils';\nimport { getMeridiem, convertToMeridiem } from '../utils/time-utils';\nexport function useNextMonthDisabled(month, {\n  disableFuture,\n  maxDate,\n  timezone\n}) {\n  const utils = useUtils();\n  return React.useMemo(() => {\n    const now = utils.dateWithTimezone(undefined, timezone);\n    const lastEnabledMonth = utils.startOfMonth(disableFuture && utils.isBefore(now, maxDate) ? now : maxDate);\n    return !utils.isAfter(lastEnabledMonth, month);\n  }, [disableFuture, maxDate, month, utils, timezone]);\n}\nexport function usePreviousMonthDisabled(month, {\n  disablePast,\n  minDate,\n  timezone\n}) {\n  const utils = useUtils();\n  return React.useMemo(() => {\n    const now = utils.dateWithTimezone(undefined, timezone);\n    const firstEnabledMonth = utils.startOfMonth(disablePast && utils.isAfter(now, minDate) ? now : minDate);\n    return !utils.isBefore(firstEnabledMonth, month);\n  }, [disablePast, minDate, month, utils, timezone]);\n}\nexport function useMeridiemMode(date, ampm, onChange, selectionState) {\n  const utils = useUtils();\n  const meridiemMode = getMeridiem(date, utils);\n  const handleMeridiemChange = React.useCallback(mode => {\n    const timeWithMeridiem = date == null ? null : convertToMeridiem(date, mode, Boolean(ampm), utils);\n    onChange(timeWithMeridiem, selectionState != null ? selectionState : 'partial');\n  }, [ampm, date, onChange, selectionState, utils]);\n  return {\n    meridiemMode,\n    handleMeridiemChange\n  };\n}","export const DATE_VALIDATION_PROP_NAMES = ['disablePast', 'disableFuture', 'minDate', 'maxDate', 'shouldDisableDate', 'shouldDisableMonth', 'shouldDisableYear'];\nexport const TIME_VALIDATION_PROP_NAMES = ['disablePast', 'disableFuture', 'minTime', 'maxTime', 'shouldDisableClock', 'shouldDisableTime', 'minutesStep', 'ampm', 'disableIgnoringDatePartForTimeValidation'];\nexport const DATE_TIME_VALIDATION_PROP_NAMES = ['minDateTime', 'maxDateTime'];\nconst VALIDATION_PROP_NAMES = [...DATE_VALIDATION_PROP_NAMES, ...TIME_VALIDATION_PROP_NAMES, ...DATE_TIME_VALIDATION_PROP_NAMES];\n/**\n * Extract the validation props for the props received by a component.\n * Limit the risk of forgetting some of them and reduce the bundle size.\n */\nexport const extractValidationProps = props => VALIDATION_PROP_NAMES.reduce((extractedProps, propName) => {\n  if (props.hasOwnProperty(propName)) {\n    extractedProps[propName] = props[propName];\n  }\n  return extractedProps;\n}, {});","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { DATE_TIME_VALIDATION_PROP_NAMES, DATE_VALIDATION_PROP_NAMES, TIME_VALIDATION_PROP_NAMES } from './validation/extractValidationProps';\nconst SHARED_FIELD_INTERNAL_PROP_NAMES = ['value', 'defaultValue', 'referenceDate', 'format', 'formatDensity', 'onChange', 'timezone', 'readOnly', 'onError', 'shouldRespectLeadingZeros', 'selectedSections', 'onSelectedSectionsChange', 'unstableFieldRef'];\nexport const splitFieldInternalAndForwardedProps = (props, valueType) => {\n  const forwardedProps = _extends({}, props);\n  const internalProps = {};\n  const extractProp = propName => {\n    if (forwardedProps.hasOwnProperty(propName)) {\n      // @ts-ignore\n      internalProps[propName] = forwardedProps[propName];\n      delete forwardedProps[propName];\n    }\n  };\n  SHARED_FIELD_INTERNAL_PROP_NAMES.forEach(extractProp);\n  if (valueType === 'date') {\n    DATE_VALIDATION_PROP_NAMES.forEach(extractProp);\n  } else if (valueType === 'time') {\n    TIME_VALIDATION_PROP_NAMES.forEach(extractProp);\n  } else if (valueType === 'date-time') {\n    DATE_VALIDATION_PROP_NAMES.forEach(extractProp);\n    TIME_VALIDATION_PROP_NAMES.forEach(extractProp);\n    DATE_TIME_VALIDATION_PROP_NAMES.forEach(extractProp);\n  }\n  return {\n    forwardedProps,\n    internalProps\n  };\n};","import { applyDefaultDate } from '../date-utils';\nexport const validateDate = ({\n  props,\n  value,\n  adapter\n}) => {\n  if (value === null) {\n    return null;\n  }\n  const {\n    shouldDisableDate,\n    shouldDisableMonth,\n    shouldDisableYear,\n    disablePast,\n    disableFuture,\n    timezone\n  } = props;\n  const now = adapter.utils.dateWithTimezone(undefined, timezone);\n  const minDate = applyDefaultDate(adapter.utils, props.minDate, adapter.defaultDates.minDate);\n  const maxDate = applyDefaultDate(adapter.utils, props.maxDate, adapter.defaultDates.maxDate);\n  switch (true) {\n    case !adapter.utils.isValid(value):\n      return 'invalidDate';\n    case Boolean(shouldDisableDate && shouldDisableDate(value)):\n      return 'shouldDisableDate';\n    case Boolean(shouldDisableMonth && shouldDisableMonth(value)):\n      return 'shouldDisableMonth';\n    case Boolean(shouldDisableYear && shouldDisableYear(value)):\n      return 'shouldDisableYear';\n    case Boolean(disableFuture && adapter.utils.isAfterDay(value, now)):\n      return 'disableFuture';\n    case Boolean(disablePast && adapter.utils.isBeforeDay(value, now)):\n      return 'disablePast';\n    case Boolean(minDate && adapter.utils.isBeforeDay(value, minDate)):\n      return 'minDate';\n    case Boolean(maxDate && adapter.utils.isAfterDay(value, maxDate)):\n      return 'maxDate';\n    default:\n      return null;\n  }\n};","import { unstable_generateUtilityClass as generateUtilityClass, unstable_generateUtilityClasses as generateUtilityClasses } from '@mui/utils';\nexport function getPickersDayUtilityClass(slot) {\n  return generateUtilityClass('MuiPickersDay', slot);\n}\nexport const pickersDayClasses = generateUtilityClasses('MuiPickersDay', ['root', 'dayWithMargin', 'dayOutsideMonth', 'hiddenDaySpacingFiller', 'today', 'selected', 'disabled']);","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"autoFocus\", \"className\", \"day\", \"disabled\", \"disableHighlightToday\", \"disableMargin\", \"hidden\", \"isAnimating\", \"onClick\", \"onDaySelect\", \"onFocus\", \"onBlur\", \"onKeyDown\", \"onMouseDown\", \"onMouseEnter\", \"outsideCurrentMonth\", \"selected\", \"showDaysOutsideCurrentMonth\", \"children\", \"today\", \"isFirstVisibleCell\", \"isLastVisibleCell\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport ButtonBase from '@mui/material/ButtonBase';\nimport { unstable_useEnhancedEffect as useEnhancedEffect, unstable_composeClasses as composeClasses, unstable_useForkRef as useForkRef } from '@mui/utils';\nimport { alpha, styled, useThemeProps } from '@mui/material/styles';\nimport { useUtils } from '../internals/hooks/useUtils';\nimport { DAY_SIZE, DAY_MARGIN } from '../internals/constants/dimensions';\nimport { getPickersDayUtilityClass, pickersDayClasses } from './pickersDayClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    selected,\n    disableMargin,\n    disableHighlightToday,\n    today,\n    disabled,\n    outsideCurrentMonth,\n    showDaysOutsideCurrentMonth,\n    classes\n  } = ownerState;\n  const isHiddenDaySpacingFiller = outsideCurrentMonth && !showDaysOutsideCurrentMonth;\n  const slots = {\n    root: ['root', selected && !isHiddenDaySpacingFiller && 'selected', disabled && 'disabled', !disableMargin && 'dayWithMargin', !disableHighlightToday && today && 'today', outsideCurrentMonth && showDaysOutsideCurrentMonth && 'dayOutsideMonth', isHiddenDaySpacingFiller && 'hiddenDaySpacingFiller'],\n    hiddenDaySpacingFiller: ['hiddenDaySpacingFiller']\n  };\n  return composeClasses(slots, getPickersDayUtilityClass, classes);\n};\nconst styleArg = ({\n  theme,\n  ownerState\n}) => _extends({}, theme.typography.caption, {\n  width: DAY_SIZE,\n  height: DAY_SIZE,\n  borderRadius: '50%',\n  padding: 0,\n  // explicitly setting to `transparent` to avoid potentially getting impacted by change from the overridden component\n  backgroundColor: 'transparent',\n  transition: theme.transitions.create('background-color', {\n    duration: theme.transitions.duration.short\n  }),\n  color: (theme.vars || theme).palette.text.primary,\n  '@media (pointer: fine)': {\n    '&:hover': {\n      backgroundColor: theme.vars ? `rgba(${theme.vars.palette.primary.mainChannel} / ${theme.vars.palette.action.hoverOpacity})` : alpha(theme.palette.primary.main, theme.palette.action.hoverOpacity)\n    }\n  },\n  '&:focus': {\n    backgroundColor: theme.vars ? `rgba(${theme.vars.palette.primary.mainChannel} / ${theme.vars.palette.action.focusOpacity})` : alpha(theme.palette.primary.main, theme.palette.action.focusOpacity),\n    [`&.${pickersDayClasses.selected}`]: {\n      willChange: 'background-color',\n      backgroundColor: (theme.vars || theme).palette.primary.dark\n    }\n  },\n  [`&.${pickersDayClasses.selected}`]: {\n    color: (theme.vars || theme).palette.primary.contrastText,\n    backgroundColor: (theme.vars || theme).palette.primary.main,\n    fontWeight: theme.typography.fontWeightMedium,\n    '&:hover': {\n      willChange: 'background-color',\n      backgroundColor: (theme.vars || theme).palette.primary.dark\n    }\n  },\n  [`&.${pickersDayClasses.disabled}:not(.${pickersDayClasses.selected})`]: {\n    color: (theme.vars || theme).palette.text.disabled\n  },\n  [`&.${pickersDayClasses.disabled}&.${pickersDayClasses.selected}`]: {\n    opacity: 0.6\n  }\n}, !ownerState.disableMargin && {\n  margin: `0 ${DAY_MARGIN}px`\n}, ownerState.outsideCurrentMonth && ownerState.showDaysOutsideCurrentMonth && {\n  color: (theme.vars || theme).palette.text.secondary\n}, !ownerState.disableHighlightToday && ownerState.today && {\n  [`&:not(.${pickersDayClasses.selected})`]: {\n    border: `1px solid ${(theme.vars || theme).palette.text.secondary}`\n  }\n});\nconst overridesResolver = (props, styles) => {\n  const {\n    ownerState\n  } = props;\n  return [styles.root, !ownerState.disableMargin && styles.dayWithMargin, !ownerState.disableHighlightToday && ownerState.today && styles.today, !ownerState.outsideCurrentMonth && ownerState.showDaysOutsideCurrentMonth && styles.dayOutsideMonth, ownerState.outsideCurrentMonth && !ownerState.showDaysOutsideCurrentMonth && styles.hiddenDaySpacingFiller];\n};\nconst PickersDayRoot = styled(ButtonBase, {\n  name: 'MuiPickersDay',\n  slot: 'Root',\n  overridesResolver\n})(styleArg);\nconst PickersDayFiller = styled('div', {\n  name: 'MuiPickersDay',\n  slot: 'Root',\n  overridesResolver\n})(({\n  theme,\n  ownerState\n}) => _extends({}, styleArg({\n  theme,\n  ownerState\n}), {\n  // visibility: 'hidden' does not work here as it hides the element from screen readers as well\n  opacity: 0,\n  pointerEvents: 'none'\n}));\nconst noop = () => {};\nconst PickersDayRaw = /*#__PURE__*/React.forwardRef(function PickersDay(inProps, forwardedRef) {\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiPickersDay'\n  });\n  const {\n      autoFocus = false,\n      className,\n      day,\n      disabled = false,\n      disableHighlightToday = false,\n      disableMargin = false,\n      isAnimating,\n      onClick,\n      onDaySelect,\n      onFocus = noop,\n      onBlur = noop,\n      onKeyDown = noop,\n      onMouseDown = noop,\n      onMouseEnter = noop,\n      outsideCurrentMonth,\n      selected = false,\n      showDaysOutsideCurrentMonth = false,\n      children,\n      today: isToday = false\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const ownerState = _extends({}, props, {\n    autoFocus,\n    disabled,\n    disableHighlightToday,\n    disableMargin,\n    selected,\n    showDaysOutsideCurrentMonth,\n    today: isToday\n  });\n  const classes = useUtilityClasses(ownerState);\n  const utils = useUtils();\n  const ref = React.useRef(null);\n  const handleRef = useForkRef(ref, forwardedRef);\n\n  // Since this is rendered when a Popper is opened we can't use passive effects.\n  // Focusing in passive effects in Popper causes scroll jump.\n  useEnhancedEffect(() => {\n    if (autoFocus && !disabled && !isAnimating && !outsideCurrentMonth) {\n      // ref.current being null would be a bug in MUI\n      ref.current.focus();\n    }\n  }, [autoFocus, disabled, isAnimating, outsideCurrentMonth]);\n\n  // For day outside of current month, move focus from mouseDown to mouseUp\n  // Goal: have the onClick ends before sliding to the new month\n  const handleMouseDown = event => {\n    onMouseDown(event);\n    if (outsideCurrentMonth) {\n      event.preventDefault();\n    }\n  };\n  const handleClick = event => {\n    if (!disabled) {\n      onDaySelect(day);\n    }\n    if (outsideCurrentMonth) {\n      event.currentTarget.focus();\n    }\n    if (onClick) {\n      onClick(event);\n    }\n  };\n  if (outsideCurrentMonth && !showDaysOutsideCurrentMonth) {\n    return /*#__PURE__*/_jsx(PickersDayFiller, {\n      className: clsx(classes.root, classes.hiddenDaySpacingFiller, className),\n      ownerState: ownerState,\n      role: other.role\n    });\n  }\n  return /*#__PURE__*/_jsx(PickersDayRoot, _extends({\n    className: clsx(classes.root, className),\n    ref: handleRef,\n    centerRipple: true,\n    disabled: disabled,\n    tabIndex: selected ? 0 : -1,\n    onKeyDown: event => onKeyDown(event, day),\n    onFocus: event => onFocus(event, day),\n    onBlur: event => onBlur(event, day),\n    onMouseEnter: event => onMouseEnter(event, day),\n    onClick: handleClick,\n    onMouseDown: handleMouseDown\n  }, other, {\n    ownerState: ownerState,\n    children: !children ? utils.format(day, 'dayOfMonth') : children\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? PickersDayRaw.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // | To update them edit the TypeScript types and run \"yarn proptypes\"  |\n  // ----------------------------------------------------------------------\n  /**\n   * A ref for imperative actions.\n   * It currently only supports `focusVisible()` action.\n   */\n  action: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\n    current: PropTypes.shape({\n      focusVisible: PropTypes.func.isRequired\n    })\n  })]),\n  /**\n   * If `true`, the ripples are centered.\n   * They won't start at the cursor interaction position.\n   * @default false\n   */\n  centerRipple: PropTypes.bool,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  className: PropTypes.string,\n  component: PropTypes.elementType,\n  /**\n   * The date to show.\n   */\n  day: PropTypes.any.isRequired,\n  /**\n   * If `true`, renders as disabled.\n   * @default false\n   */\n  disabled: PropTypes.bool,\n  /**\n   * If `true`, today's date is rendering without highlighting with circle.\n   * @default false\n   */\n  disableHighlightToday: PropTypes.bool,\n  /**\n   * If `true`, days are rendering without margin. Useful for displaying linked range of days.\n   * @default false\n   */\n  disableMargin: PropTypes.bool,\n  /**\n   * If `true`, the ripple effect is disabled.\n   *\n   *  Without a ripple there is no styling for :focus-visible by default. Be sure\n   * to highlight the element by applying separate styles with the `.Mui-focusVisible` class.\n   * @default false\n   */\n  disableRipple: PropTypes.bool,\n  /**\n   * If `true`, the touch ripple effect is disabled.\n   * @default false\n   */\n  disableTouchRipple: PropTypes.bool,\n  /**\n   * If `true`, the base button will have a keyboard focus ripple.\n   * @default false\n   */\n  focusRipple: PropTypes.bool,\n  /**\n   * This prop can help identify which element has keyboard focus.\n   * The class name will be applied when the element gains the focus through keyboard interaction.\n   * It's a polyfill for the [CSS :focus-visible selector](https://drafts.csswg.org/selectors-4/#the-focus-visible-pseudo).\n   * The rationale for using this feature [is explained here](https://github.com/WICG/focus-visible/blob/HEAD/explainer.md).\n   * A [polyfill can be used](https://github.com/WICG/focus-visible) to apply a `focus-visible` class to other components\n   * if needed.\n   */\n  focusVisibleClassName: PropTypes.string,\n  isAnimating: PropTypes.bool,\n  /**\n   * If `true`, day is the first visible cell of the month.\n   * Either the first day of the month or the first day of the week depending on `showDaysOutsideCurrentMonth`.\n   */\n  isFirstVisibleCell: PropTypes.bool.isRequired,\n  /**\n   * If `true`, day is the last visible cell of the month.\n   * Either the last day of the month or the last day of the week depending on `showDaysOutsideCurrentMonth`.\n   */\n  isLastVisibleCell: PropTypes.bool.isRequired,\n  onBlur: PropTypes.func,\n  onDaySelect: PropTypes.func.isRequired,\n  onFocus: PropTypes.func,\n  /**\n   * Callback fired when the component is focused with a keyboard.\n   * We trigger a `onFocus` callback too.\n   */\n  onFocusVisible: PropTypes.func,\n  onKeyDown: PropTypes.func,\n  onMouseEnter: PropTypes.func,\n  /**\n   * If `true`, day is outside of month and will be hidden.\n   */\n  outsideCurrentMonth: PropTypes.bool.isRequired,\n  /**\n   * If `true`, renders as selected.\n   * @default false\n   */\n  selected: PropTypes.bool,\n  /**\n   * If `true`, days outside the current month are rendered:\n   *\n   * - if `fixedWeekNumber` is defined, renders days to have the weeks requested.\n   *\n   * - if `fixedWeekNumber` is not defined, renders day to fill the first and last week of the current month.\n   *\n   * - ignored if `calendars` equals more than `1` on range pickers.\n   * @default false\n   */\n  showDaysOutsideCurrentMonth: PropTypes.bool,\n  style: PropTypes.object,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  /**\n   * @default 0\n   */\n  tabIndex: PropTypes.number,\n  /**\n   * If `true`, renders as today date.\n   * @default false\n   */\n  today: PropTypes.bool,\n  /**\n   * Props applied to the `TouchRipple` element.\n   */\n  TouchRippleProps: PropTypes.object,\n  /**\n   * A ref that points to the `TouchRipple` element.\n   */\n  touchRippleRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\n    current: PropTypes.shape({\n      pulsate: PropTypes.func.isRequired,\n      start: PropTypes.func.isRequired,\n      stop: PropTypes.func.isRequired\n    })\n  })])\n} : void 0;\n\n/**\n * Demos:\n *\n * - [DateCalendar](https://mui.com/x/react-date-pickers/date-calendar/)\n * API:\n *\n * - [PickersDay API](https://mui.com/x/api/date-pickers/pickers-day/)\n */\nexport const PickersDay = /*#__PURE__*/React.memo(PickersDayRaw);","import { unstable_generateUtilityClass as generateUtilityClass, unstable_generateUtilityClasses as generateUtilityClasses } from '@mui/utils';\nexport const getPickersSlideTransitionUtilityClass = slot => generateUtilityClass('MuiPickersSlideTransition', slot);\nexport const pickersSlideTransitionClasses = generateUtilityClasses('MuiPickersSlideTransition', ['root', 'slideEnter-left', 'slideEnter-right', 'slideEnterActive', 'slideExit', 'slideExitActiveLeft-left', 'slideExitActiveLeft-right']);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"children\", \"className\", \"reduceAnimations\", \"slideDirection\", \"transKey\", \"classes\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { styled, useTheme, useThemeProps } from '@mui/material/styles';\nimport composeClasses from '@mui/utils/composeClasses';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\nimport { getPickersSlideTransitionUtilityClass, pickersSlideTransitionClasses } from './pickersSlideTransitionClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes,\n    slideDirection\n  } = ownerState;\n  const slots = {\n    root: ['root'],\n    exit: ['slideExit'],\n    enterActive: ['slideEnterActive'],\n    enter: [`slideEnter-${slideDirection}`],\n    exitActive: [`slideExitActiveLeft-${slideDirection}`]\n  };\n  return composeClasses(slots, getPickersSlideTransitionUtilityClass, classes);\n};\nconst PickersSlideTransitionRoot = styled(TransitionGroup, {\n  name: 'MuiPickersSlideTransition',\n  slot: 'Root',\n  overridesResolver: (_, styles) => [styles.root, {\n    [`.${pickersSlideTransitionClasses['slideEnter-left']}`]: styles['slideEnter-left']\n  }, {\n    [`.${pickersSlideTransitionClasses['slideEnter-right']}`]: styles['slideEnter-right']\n  }, {\n    [`.${pickersSlideTransitionClasses.slideEnterActive}`]: styles.slideEnterActive\n  }, {\n    [`.${pickersSlideTransitionClasses.slideExit}`]: styles.slideExit\n  }, {\n    [`.${pickersSlideTransitionClasses['slideExitActiveLeft-left']}`]: styles['slideExitActiveLeft-left']\n  }, {\n    [`.${pickersSlideTransitionClasses['slideExitActiveLeft-right']}`]: styles['slideExitActiveLeft-right']\n  }]\n})(({\n  theme\n}) => {\n  const slideTransition = theme.transitions.create('transform', {\n    duration: theme.transitions.duration.complex,\n    easing: 'cubic-bezier(0.35, 0.8, 0.4, 1)'\n  });\n  return {\n    display: 'block',\n    position: 'relative',\n    overflowX: 'hidden',\n    '& > *': {\n      position: 'absolute',\n      top: 0,\n      right: 0,\n      left: 0\n    },\n    [`& .${pickersSlideTransitionClasses['slideEnter-left']}`]: {\n      willChange: 'transform',\n      transform: 'translate(100%)',\n      zIndex: 1\n    },\n    [`& .${pickersSlideTransitionClasses['slideEnter-right']}`]: {\n      willChange: 'transform',\n      transform: 'translate(-100%)',\n      zIndex: 1\n    },\n    [`& .${pickersSlideTransitionClasses.slideEnterActive}`]: {\n      transform: 'translate(0%)',\n      transition: slideTransition\n    },\n    [`& .${pickersSlideTransitionClasses.slideExit}`]: {\n      transform: 'translate(0%)'\n    },\n    [`& .${pickersSlideTransitionClasses['slideExitActiveLeft-left']}`]: {\n      willChange: 'transform',\n      transform: 'translate(-100%)',\n      transition: slideTransition,\n      zIndex: 0\n    },\n    [`& .${pickersSlideTransitionClasses['slideExitActiveLeft-right']}`]: {\n      willChange: 'transform',\n      transform: 'translate(100%)',\n      transition: slideTransition,\n      zIndex: 0\n    }\n  };\n});\n\n/**\n * @ignore - do not document.\n */\nexport function PickersSlideTransition(inProps) {\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiPickersSlideTransition'\n  });\n  const {\n      children,\n      className,\n      reduceAnimations,\n      transKey\n      // extracting `classes` from `other`\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const classes = useUtilityClasses(props);\n  const theme = useTheme();\n  if (reduceAnimations) {\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: clsx(classes.root, className),\n      children: children\n    });\n  }\n  const transitionClasses = {\n    exit: classes.exit,\n    enterActive: classes.enterActive,\n    enter: classes.enter,\n    exitActive: classes.exitActive\n  };\n  return /*#__PURE__*/_jsx(PickersSlideTransitionRoot, {\n    className: clsx(classes.root, className),\n    childFactory: element => /*#__PURE__*/React.cloneElement(element, {\n      classNames: transitionClasses\n    }),\n    role: \"presentation\",\n    children: /*#__PURE__*/_jsx(CSSTransition, _extends({\n      mountOnEnter: true,\n      unmountOnExit: true,\n      timeout: theme.transitions.duration.complex,\n      classNames: transitionClasses\n    }, other, {\n      children: children\n    }), transKey)\n  });\n}","import * as React from 'react';\nimport { validateDate } from '../internals/utils/validation/validateDate';\nimport { useLocalizationContext } from '../internals/hooks/useUtils';\nexport const useIsDateDisabled = ({\n  shouldDisableDate,\n  shouldDisableMonth,\n  shouldDisableYear,\n  minDate,\n  maxDate,\n  disableFuture,\n  disablePast,\n  timezone\n}) => {\n  const adapter = useLocalizationContext();\n  return React.useCallback(day => validateDate({\n    adapter,\n    value: day,\n    props: {\n      shouldDisableDate,\n      shouldDisableMonth,\n      shouldDisableYear,\n      minDate,\n      maxDate,\n      disableFuture,\n      disablePast,\n      timezone\n    }\n  }) !== null, [adapter, shouldDisableDate, shouldDisableMonth, shouldDisableYear, minDate, maxDate, disableFuture, disablePast, timezone]);\n};","import { unstable_generateUtilityClass as generateUtilityClass, unstable_generateUtilityClasses as generateUtilityClasses } from '@mui/utils';\nexport const getDayCalendarUtilityClass = slot => generateUtilityClass('MuiDayCalendar', slot);\nexport const dayPickerClasses = generateUtilityClasses('MuiDayCalendar', ['root', 'header', 'weekDayLabel', 'loadingContainer', 'slideTransition', 'monthContainer', 'weekContainer', 'weekNumberLabel', 'weekNumber']);","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"parentProps\", \"day\", \"focusableDay\", \"selectedDays\", \"isDateDisabled\", \"currentMonthNumber\", \"isViewFocused\"],\n  _excluded2 = [\"ownerState\"];\nimport * as React from 'react';\nimport useEventCallback from '@mui/utils/useEventCallback';\nimport Typography from '@mui/material/Typography';\nimport { useSlotProps } from '@mui/base/utils';\nimport { styled, useTheme, useThemeProps } from '@mui/material/styles';\nimport { unstable_composeClasses as composeClasses, unstable_useControlled as useControlled } from '@mui/utils';\nimport clsx from 'clsx';\nimport { PickersDay } from '../PickersDay/PickersDay';\nimport { useUtils, useNow, useLocaleText } from '../internals/hooks/useUtils';\nimport { DAY_SIZE, DAY_MARGIN } from '../internals/constants/dimensions';\nimport { PickersSlideTransition } from './PickersSlideTransition';\nimport { useIsDateDisabled } from './useIsDateDisabled';\nimport { findClosestEnabledDate, getWeekdays } from '../internals/utils/date-utils';\nimport { getDayCalendarUtilityClass } from './dayCalendarClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root'],\n    header: ['header'],\n    weekDayLabel: ['weekDayLabel'],\n    loadingContainer: ['loadingContainer'],\n    slideTransition: ['slideTransition'],\n    monthContainer: ['monthContainer'],\n    weekContainer: ['weekContainer'],\n    weekNumberLabel: ['weekNumberLabel'],\n    weekNumber: ['weekNumber']\n  };\n  return composeClasses(slots, getDayCalendarUtilityClass, classes);\n};\nconst weeksContainerHeight = (DAY_SIZE + DAY_MARGIN * 2) * 6;\nconst PickersCalendarDayRoot = styled('div', {\n  name: 'MuiDayCalendar',\n  slot: 'Root',\n  overridesResolver: (_, styles) => styles.root\n})({});\nconst PickersCalendarDayHeader = styled('div', {\n  name: 'MuiDayCalendar',\n  slot: 'Header',\n  overridesResolver: (_, styles) => styles.header\n})({\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center'\n});\nconst PickersCalendarWeekDayLabel = styled(Typography, {\n  name: 'MuiDayCalendar',\n  slot: 'WeekDayLabel',\n  overridesResolver: (_, styles) => styles.weekDayLabel\n})(({\n  theme\n}) => ({\n  width: 36,\n  height: 40,\n  margin: '0 2px',\n  textAlign: 'center',\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  color: (theme.vars || theme).palette.text.secondary\n}));\nconst PickersCalendarWeekNumberLabel = styled(Typography, {\n  name: 'MuiDayCalendar',\n  slot: 'WeekNumberLabel',\n  overridesResolver: (_, styles) => styles.weekNumberLabel\n})(({\n  theme\n}) => ({\n  width: 36,\n  height: 40,\n  margin: '0 2px',\n  textAlign: 'center',\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  color: theme.palette.text.disabled\n}));\nconst PickersCalendarWeekNumber = styled(Typography, {\n  name: 'MuiDayCalendar',\n  slot: 'WeekNumber',\n  overridesResolver: (_, styles) => styles.weekNumber\n})(({\n  theme\n}) => _extends({}, theme.typography.caption, {\n  width: DAY_SIZE,\n  height: DAY_SIZE,\n  padding: 0,\n  margin: `0 ${DAY_MARGIN}px`,\n  color: theme.palette.text.disabled,\n  fontSize: '0.75rem',\n  alignItems: 'center',\n  justifyContent: 'center',\n  display: 'inline-flex'\n}));\nconst PickersCalendarLoadingContainer = styled('div', {\n  name: 'MuiDayCalendar',\n  slot: 'LoadingContainer',\n  overridesResolver: (_, styles) => styles.loadingContainer\n})({\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  minHeight: weeksContainerHeight\n});\nconst PickersCalendarSlideTransition = styled(PickersSlideTransition, {\n  name: 'MuiDayCalendar',\n  slot: 'SlideTransition',\n  overridesResolver: (_, styles) => styles.slideTransition\n})({\n  minHeight: weeksContainerHeight\n});\nconst PickersCalendarWeekContainer = styled('div', {\n  name: 'MuiDayCalendar',\n  slot: 'MonthContainer',\n  overridesResolver: (_, styles) => styles.monthContainer\n})({\n  overflow: 'hidden'\n});\nconst PickersCalendarWeek = styled('div', {\n  name: 'MuiDayCalendar',\n  slot: 'WeekContainer',\n  overridesResolver: (_, styles) => styles.weekContainer\n})({\n  margin: `${DAY_MARGIN}px 0`,\n  display: 'flex',\n  justifyContent: 'center'\n});\nfunction WrappedDay(_ref) {\n  var _ref2, _slots$day, _slotProps$day;\n  let {\n      parentProps,\n      day,\n      focusableDay,\n      selectedDays,\n      isDateDisabled,\n      currentMonthNumber,\n      isViewFocused\n    } = _ref,\n    other = _objectWithoutPropertiesLoose(_ref, _excluded);\n  const {\n    disabled,\n    disableHighlightToday,\n    isMonthSwitchingAnimating,\n    showDaysOutsideCurrentMonth,\n    components,\n    componentsProps,\n    slots,\n    slotProps,\n    timezone\n  } = parentProps;\n  const utils = useUtils();\n  const now = useNow(timezone);\n  const isFocusableDay = focusableDay !== null && utils.isSameDay(day, focusableDay);\n  const isSelected = selectedDays.some(selectedDay => utils.isSameDay(selectedDay, day));\n  const isToday = utils.isSameDay(day, now);\n  const Day = (_ref2 = (_slots$day = slots == null ? void 0 : slots.day) != null ? _slots$day : components == null ? void 0 : components.Day) != null ? _ref2 : PickersDay;\n  // We don't want to pass to ownerState down, to avoid re-rendering all the day whenever a prop changes.\n  const _useSlotProps = useSlotProps({\n      elementType: Day,\n      externalSlotProps: (_slotProps$day = slotProps == null ? void 0 : slotProps.day) != null ? _slotProps$day : componentsProps == null ? void 0 : componentsProps.day,\n      additionalProps: _extends({\n        disableHighlightToday,\n        showDaysOutsideCurrentMonth,\n        role: 'gridcell',\n        isAnimating: isMonthSwitchingAnimating,\n        // it is used in date range dragging logic by accessing `dataset.timestamp`\n        'data-timestamp': utils.toJsDate(day).valueOf()\n      }, other),\n      ownerState: _extends({}, parentProps, {\n        day,\n        selected: isSelected\n      })\n    }),\n    dayProps = _objectWithoutPropertiesLoose(_useSlotProps, _excluded2);\n  const isDisabled = React.useMemo(() => disabled || isDateDisabled(day), [disabled, isDateDisabled, day]);\n  const outsideCurrentMonth = React.useMemo(() => utils.getMonth(day) !== currentMonthNumber, [utils, day, currentMonthNumber]);\n  const isFirstVisibleCell = React.useMemo(() => {\n    const startOfMonth = utils.startOfMonth(utils.setMonth(day, currentMonthNumber));\n    if (!showDaysOutsideCurrentMonth) {\n      return utils.isSameDay(day, startOfMonth);\n    }\n    return utils.isSameDay(day, utils.startOfWeek(startOfMonth));\n  }, [currentMonthNumber, day, showDaysOutsideCurrentMonth, utils]);\n  const isLastVisibleCell = React.useMemo(() => {\n    const endOfMonth = utils.endOfMonth(utils.setMonth(day, currentMonthNumber));\n    if (!showDaysOutsideCurrentMonth) {\n      return utils.isSameDay(day, endOfMonth);\n    }\n    return utils.isSameDay(day, utils.endOfWeek(endOfMonth));\n  }, [currentMonthNumber, day, showDaysOutsideCurrentMonth, utils]);\n  return /*#__PURE__*/_jsx(Day, _extends({}, dayProps, {\n    day: day,\n    disabled: isDisabled,\n    autoFocus: isViewFocused && isFocusableDay,\n    today: isToday,\n    outsideCurrentMonth: outsideCurrentMonth,\n    isFirstVisibleCell: isFirstVisibleCell,\n    isLastVisibleCell: isLastVisibleCell,\n    selected: isSelected,\n    tabIndex: isFocusableDay ? 0 : -1,\n    \"aria-selected\": isSelected,\n    \"aria-current\": isToday ? 'date' : undefined\n  }));\n}\n\n/**\n * @ignore - do not document.\n */\nexport function DayCalendar(inProps) {\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiDayCalendar'\n  });\n  const {\n    onFocusedDayChange,\n    className,\n    currentMonth,\n    selectedDays,\n    focusedDay,\n    loading,\n    onSelectedDaysChange,\n    onMonthSwitchingAnimationEnd,\n    readOnly,\n    reduceAnimations,\n    renderLoading = () => /*#__PURE__*/_jsx(\"span\", {\n      children: \"...\"\n    }),\n    slideDirection,\n    TransitionProps,\n    disablePast,\n    disableFuture,\n    minDate,\n    maxDate,\n    shouldDisableDate,\n    shouldDisableMonth,\n    shouldDisableYear,\n    dayOfWeekFormatter: dayOfWeekFormatterFromProps,\n    hasFocus,\n    onFocusedViewChange,\n    gridLabelId,\n    displayWeekNumber,\n    fixedWeekNumber,\n    autoFocus,\n    timezone\n  } = props;\n  const now = useNow(timezone);\n  const utils = useUtils();\n  const classes = useUtilityClasses(props);\n  const theme = useTheme();\n  const isRTL = theme.direction === 'rtl';\n\n  // before we could define this outside of the component scope, but now we need utils, which is only defined here\n  const dayOfWeekFormatter = dayOfWeekFormatterFromProps || ((_day, date) => utils.format(date, 'weekdayShort').charAt(0).toUpperCase());\n  const isDateDisabled = useIsDateDisabled({\n    shouldDisableDate,\n    shouldDisableMonth,\n    shouldDisableYear,\n    minDate,\n    maxDate,\n    disablePast,\n    disableFuture,\n    timezone\n  });\n  const localeText = useLocaleText();\n  const [internalHasFocus, setInternalHasFocus] = useControlled({\n    name: 'DayCalendar',\n    state: 'hasFocus',\n    controlled: hasFocus,\n    default: autoFocus != null ? autoFocus : false\n  });\n  const [internalFocusedDay, setInternalFocusedDay] = React.useState(() => focusedDay || now);\n  const handleDaySelect = useEventCallback(day => {\n    if (readOnly) {\n      return;\n    }\n    onSelectedDaysChange(day);\n  });\n  const focusDay = day => {\n    if (!isDateDisabled(day)) {\n      onFocusedDayChange(day);\n      setInternalFocusedDay(day);\n      onFocusedViewChange == null || onFocusedViewChange(true);\n      setInternalHasFocus(true);\n    }\n  };\n  const handleKeyDown = useEventCallback((event, day) => {\n    switch (event.key) {\n      case 'ArrowUp':\n        focusDay(utils.addDays(day, -7));\n        event.preventDefault();\n        break;\n      case 'ArrowDown':\n        focusDay(utils.addDays(day, 7));\n        event.preventDefault();\n        break;\n      case 'ArrowLeft':\n        {\n          const newFocusedDayDefault = utils.addDays(day, isRTL ? 1 : -1);\n          const nextAvailableMonth = utils.addMonths(day, isRTL ? 1 : -1);\n          const closestDayToFocus = findClosestEnabledDate({\n            utils,\n            date: newFocusedDayDefault,\n            minDate: isRTL ? newFocusedDayDefault : utils.startOfMonth(nextAvailableMonth),\n            maxDate: isRTL ? utils.endOfMonth(nextAvailableMonth) : newFocusedDayDefault,\n            isDateDisabled,\n            timezone\n          });\n          focusDay(closestDayToFocus || newFocusedDayDefault);\n          event.preventDefault();\n          break;\n        }\n      case 'ArrowRight':\n        {\n          const newFocusedDayDefault = utils.addDays(day, isRTL ? -1 : 1);\n          const nextAvailableMonth = utils.addMonths(day, isRTL ? -1 : 1);\n          const closestDayToFocus = findClosestEnabledDate({\n            utils,\n            date: newFocusedDayDefault,\n            minDate: isRTL ? utils.startOfMonth(nextAvailableMonth) : newFocusedDayDefault,\n            maxDate: isRTL ? newFocusedDayDefault : utils.endOfMonth(nextAvailableMonth),\n            isDateDisabled,\n            timezone\n          });\n          focusDay(closestDayToFocus || newFocusedDayDefault);\n          event.preventDefault();\n          break;\n        }\n      case 'Home':\n        focusDay(utils.startOfWeek(day));\n        event.preventDefault();\n        break;\n      case 'End':\n        focusDay(utils.endOfWeek(day));\n        event.preventDefault();\n        break;\n      case 'PageUp':\n        focusDay(utils.addMonths(day, 1));\n        event.preventDefault();\n        break;\n      case 'PageDown':\n        focusDay(utils.addMonths(day, -1));\n        event.preventDefault();\n        break;\n      default:\n        break;\n    }\n  });\n  const handleFocus = useEventCallback((event, day) => focusDay(day));\n  const handleBlur = useEventCallback((event, day) => {\n    if (internalHasFocus && utils.isSameDay(internalFocusedDay, day)) {\n      onFocusedViewChange == null || onFocusedViewChange(false);\n    }\n  });\n  const currentMonthNumber = utils.getMonth(currentMonth);\n  const validSelectedDays = React.useMemo(() => selectedDays.filter(day => !!day).map(day => utils.startOfDay(day)), [utils, selectedDays]);\n\n  // need a new ref whenever the `key` of the transition changes: http://reactcommunity.org/react-transition-group/transition/#Transition-prop-nodeRef.\n  const transitionKey = currentMonthNumber;\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const slideNodeRef = React.useMemo(() => /*#__PURE__*/React.createRef(), [transitionKey]);\n  const startOfCurrentWeek = utils.startOfWeek(now);\n  const focusableDay = React.useMemo(() => {\n    const startOfMonth = utils.startOfMonth(currentMonth);\n    const endOfMonth = utils.endOfMonth(currentMonth);\n    if (isDateDisabled(internalFocusedDay) || utils.isAfterDay(internalFocusedDay, endOfMonth) || utils.isBeforeDay(internalFocusedDay, startOfMonth)) {\n      return findClosestEnabledDate({\n        utils,\n        date: internalFocusedDay,\n        minDate: startOfMonth,\n        maxDate: endOfMonth,\n        disablePast,\n        disableFuture,\n        isDateDisabled,\n        timezone\n      });\n    }\n    return internalFocusedDay;\n  }, [currentMonth, disableFuture, disablePast, internalFocusedDay, isDateDisabled, utils, timezone]);\n  const weeksToDisplay = React.useMemo(() => {\n    const currentMonthWithTimezone = utils.setTimezone(currentMonth, timezone);\n    const toDisplay = utils.getWeekArray(currentMonthWithTimezone);\n    let nextMonth = utils.addMonths(currentMonthWithTimezone, 1);\n    while (fixedWeekNumber && toDisplay.length < fixedWeekNumber) {\n      const additionalWeeks = utils.getWeekArray(nextMonth);\n      const hasCommonWeek = utils.isSameDay(toDisplay[toDisplay.length - 1][0], additionalWeeks[0][0]);\n      additionalWeeks.slice(hasCommonWeek ? 1 : 0).forEach(week => {\n        if (toDisplay.length < fixedWeekNumber) {\n          toDisplay.push(week);\n        }\n      });\n      nextMonth = utils.addMonths(nextMonth, 1);\n    }\n    return toDisplay;\n  }, [currentMonth, fixedWeekNumber, utils, timezone]);\n  return /*#__PURE__*/_jsxs(PickersCalendarDayRoot, {\n    role: \"grid\",\n    \"aria-labelledby\": gridLabelId,\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxs(PickersCalendarDayHeader, {\n      role: \"row\",\n      className: classes.header,\n      children: [displayWeekNumber && /*#__PURE__*/_jsx(PickersCalendarWeekNumberLabel, {\n        variant: \"caption\",\n        role: \"columnheader\",\n        \"aria-label\": localeText.calendarWeekNumberHeaderLabel,\n        className: classes.weekNumberLabel,\n        children: localeText.calendarWeekNumberHeaderText\n      }), getWeekdays(utils, now).map((weekday, i) => {\n        var _dayOfWeekFormatter;\n        const day = utils.format(weekday, 'weekdayShort');\n        return /*#__PURE__*/_jsx(PickersCalendarWeekDayLabel, {\n          variant: \"caption\",\n          role: \"columnheader\",\n          \"aria-label\": utils.format(utils.addDays(startOfCurrentWeek, i), 'weekday'),\n          className: classes.weekDayLabel,\n          children: (_dayOfWeekFormatter = dayOfWeekFormatter == null ? void 0 : dayOfWeekFormatter(day, weekday)) != null ? _dayOfWeekFormatter : day\n        }, day + i.toString());\n      })]\n    }), loading ? /*#__PURE__*/_jsx(PickersCalendarLoadingContainer, {\n      className: classes.loadingContainer,\n      children: renderLoading()\n    }) : /*#__PURE__*/_jsx(PickersCalendarSlideTransition, _extends({\n      transKey: transitionKey,\n      onExited: onMonthSwitchingAnimationEnd,\n      reduceAnimations: reduceAnimations,\n      slideDirection: slideDirection,\n      className: clsx(className, classes.slideTransition)\n    }, TransitionProps, {\n      nodeRef: slideNodeRef,\n      children: /*#__PURE__*/_jsx(PickersCalendarWeekContainer, {\n        ref: slideNodeRef,\n        role: \"rowgroup\",\n        className: classes.monthContainer,\n        children: weeksToDisplay.map((week, index) => /*#__PURE__*/_jsxs(PickersCalendarWeek, {\n          role: \"row\",\n          className: classes.weekContainer\n          // fix issue of announcing row 1 as row 2\n          // caused by week day labels row\n          ,\n          \"aria-rowindex\": index + 1,\n          children: [displayWeekNumber && /*#__PURE__*/_jsx(PickersCalendarWeekNumber, {\n            className: classes.weekNumber,\n            role: \"rowheader\",\n            \"aria-label\": localeText.calendarWeekNumberAriaLabelText(utils.getWeekNumber(week[0])),\n            children: localeText.calendarWeekNumberText(utils.getWeekNumber(week[0]))\n          }), week.map((day, dayIndex) => /*#__PURE__*/_jsx(WrappedDay, {\n            parentProps: props,\n            day: day,\n            selectedDays: validSelectedDays,\n            focusableDay: focusableDay,\n            onKeyDown: handleKeyDown,\n            onFocus: handleFocus,\n            onBlur: handleBlur,\n            onDaySelect: handleDaySelect,\n            isDateDisabled: isDateDisabled,\n            currentMonthNumber: currentMonthNumber,\n            isViewFocused: internalHasFocus\n            // fix issue of announcing column 1 as column 2 when `displayWeekNumber` is enabled\n            ,\n            \"aria-colindex\": dayIndex + 1\n          }, day.toString()))]\n        }, `week-${week[0]}`))\n      })\n    }))]\n  });\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport useEventCallback from '@mui/utils/useEventCallback';\nimport { useIsDateDisabled } from './useIsDateDisabled';\nimport { useUtils } from '../internals/hooks/useUtils';\nimport { singleItemValueManager } from '../internals/utils/valueManagers';\nimport { SECTION_TYPE_GRANULARITY } from '../internals/utils/getDefaultReferenceDate';\nexport const createCalendarStateReducer = (reduceAnimations, disableSwitchToMonthOnDayFocus, utils) => (state, action) => {\n  switch (action.type) {\n    case 'changeMonth':\n      return _extends({}, state, {\n        slideDirection: action.direction,\n        currentMonth: action.newMonth,\n        isMonthSwitchingAnimating: !reduceAnimations\n      });\n    case 'finishMonthSwitchingAnimation':\n      return _extends({}, state, {\n        isMonthSwitchingAnimating: false\n      });\n    case 'changeFocusedDay':\n      {\n        if (state.focusedDay != null && action.focusedDay != null && utils.isSameDay(action.focusedDay, state.focusedDay)) {\n          return state;\n        }\n        const needMonthSwitch = action.focusedDay != null && !disableSwitchToMonthOnDayFocus && !utils.isSameMonth(state.currentMonth, action.focusedDay);\n        return _extends({}, state, {\n          focusedDay: action.focusedDay,\n          isMonthSwitchingAnimating: needMonthSwitch && !reduceAnimations && !action.withoutMonthSwitchingAnimation,\n          currentMonth: needMonthSwitch ? utils.startOfMonth(action.focusedDay) : state.currentMonth,\n          slideDirection: action.focusedDay != null && utils.isAfterDay(action.focusedDay, state.currentMonth) ? 'left' : 'right'\n        });\n      }\n    default:\n      throw new Error('missing support');\n  }\n};\nexport const useCalendarState = params => {\n  const {\n    value,\n    referenceDate: referenceDateProp,\n    defaultCalendarMonth,\n    disableFuture,\n    disablePast,\n    disableSwitchToMonthOnDayFocus = false,\n    maxDate,\n    minDate,\n    onMonthChange,\n    reduceAnimations,\n    shouldDisableDate,\n    timezone\n  } = params;\n  const utils = useUtils();\n  const reducerFn = React.useRef(createCalendarStateReducer(Boolean(reduceAnimations), disableSwitchToMonthOnDayFocus, utils)).current;\n  const referenceDate = React.useMemo(() => {\n    let externalReferenceDate = null;\n    if (referenceDateProp) {\n      externalReferenceDate = referenceDateProp;\n    } else if (defaultCalendarMonth) {\n      // For `defaultCalendarMonth`, we just want to keep the month and the year to avoid a behavior change.\n      externalReferenceDate = utils.startOfMonth(defaultCalendarMonth);\n    }\n    return singleItemValueManager.getInitialReferenceValue({\n      value,\n      utils,\n      timezone,\n      props: params,\n      referenceDate: externalReferenceDate,\n      granularity: SECTION_TYPE_GRANULARITY.day\n    });\n  }, [] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n  const [calendarState, dispatch] = React.useReducer(reducerFn, {\n    isMonthSwitchingAnimating: false,\n    focusedDay: referenceDate,\n    currentMonth: utils.startOfMonth(referenceDate),\n    slideDirection: 'left'\n  });\n  const handleChangeMonth = React.useCallback(payload => {\n    dispatch(_extends({\n      type: 'changeMonth'\n    }, payload));\n    if (onMonthChange) {\n      onMonthChange(payload.newMonth);\n    }\n  }, [onMonthChange]);\n  const changeMonth = React.useCallback(newDate => {\n    const newDateRequested = newDate;\n    if (utils.isSameMonth(newDateRequested, calendarState.currentMonth)) {\n      return;\n    }\n    handleChangeMonth({\n      newMonth: utils.startOfMonth(newDateRequested),\n      direction: utils.isAfterDay(newDateRequested, calendarState.currentMonth) ? 'left' : 'right'\n    });\n  }, [calendarState.currentMonth, handleChangeMonth, utils]);\n  const isDateDisabled = useIsDateDisabled({\n    shouldDisableDate,\n    minDate,\n    maxDate,\n    disableFuture,\n    disablePast,\n    timezone\n  });\n  const onMonthSwitchingAnimationEnd = React.useCallback(() => {\n    dispatch({\n      type: 'finishMonthSwitchingAnimation'\n    });\n  }, []);\n  const changeFocusedDay = useEventCallback((newFocusedDate, withoutMonthSwitchingAnimation) => {\n    if (!isDateDisabled(newFocusedDate)) {\n      dispatch({\n        type: 'changeFocusedDay',\n        focusedDay: newFocusedDate,\n        withoutMonthSwitchingAnimation\n      });\n    }\n  });\n  return {\n    referenceDate,\n    calendarState,\n    changeMonth,\n    changeFocusedDay,\n    isDateDisabled,\n    onMonthSwitchingAnimationEnd,\n    handleChangeMonth\n  };\n};","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"props\", \"getOpenDialogAriaText\"],\n  _excluded2 = [\"ownerState\"],\n  _excluded3 = [\"ownerState\"];\nimport * as React from 'react';\nimport { useSlotProps } from '@mui/base/utils';\nimport MuiInputAdornment from '@mui/material/InputAdornment';\nimport IconButton from '@mui/material/IconButton';\nimport useForkRef from '@mui/utils/useForkRef';\nimport useId from '@mui/utils/useId';\nimport { PickersPopper } from '../../components/PickersPopper';\nimport { useUtils } from '../useUtils';\nimport { usePicker } from '../usePicker';\nimport { LocalizationProvider } from '../../../LocalizationProvider';\nimport { PickersLayout } from '../../../PickersLayout';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n/**\n * Hook managing all the single-date desktop pickers:\n * - DesktopDatePicker\n * - DesktopDateTimePicker\n * - DesktopTimePicker\n */\nexport const useDesktopPicker = _ref => {\n  var _innerSlotProps$toolb, _innerSlotProps$toolb2, _slots$inputAdornment, _slots$openPickerButt, _slots$layout;\n  let {\n      props,\n      getOpenDialogAriaText\n    } = _ref,\n    pickerParams = _objectWithoutPropertiesLoose(_ref, _excluded);\n  const {\n    slots,\n    slotProps: innerSlotProps,\n    className,\n    sx,\n    format,\n    formatDensity,\n    timezone,\n    name,\n    label,\n    inputRef,\n    readOnly,\n    disabled,\n    autoFocus,\n    localeText,\n    reduceAnimations\n  } = props;\n  const utils = useUtils();\n  const internalInputRef = React.useRef(null);\n  const containerRef = React.useRef(null);\n  const labelId = useId();\n  const isToolbarHidden = (_innerSlotProps$toolb = innerSlotProps == null || (_innerSlotProps$toolb2 = innerSlotProps.toolbar) == null ? void 0 : _innerSlotProps$toolb2.hidden) != null ? _innerSlotProps$toolb : false;\n  const {\n    open,\n    actions,\n    hasUIView,\n    layoutProps,\n    renderCurrentView,\n    shouldRestoreFocus,\n    fieldProps: pickerFieldProps\n  } = usePicker(_extends({}, pickerParams, {\n    props,\n    inputRef: internalInputRef,\n    autoFocusView: true,\n    additionalViewProps: {},\n    wrapperVariant: 'desktop'\n  }));\n  const InputAdornment = (_slots$inputAdornment = slots.inputAdornment) != null ? _slots$inputAdornment : MuiInputAdornment;\n  const _useSlotProps = useSlotProps({\n      elementType: InputAdornment,\n      externalSlotProps: innerSlotProps == null ? void 0 : innerSlotProps.inputAdornment,\n      additionalProps: {\n        position: 'end'\n      },\n      ownerState: props\n    }),\n    inputAdornmentProps = _objectWithoutPropertiesLoose(_useSlotProps, _excluded2);\n  const OpenPickerButton = (_slots$openPickerButt = slots.openPickerButton) != null ? _slots$openPickerButt : IconButton;\n  const _useSlotProps2 = useSlotProps({\n      elementType: OpenPickerButton,\n      externalSlotProps: innerSlotProps == null ? void 0 : innerSlotProps.openPickerButton,\n      additionalProps: {\n        disabled: disabled || readOnly,\n        onClick: open ? actions.onClose : actions.onOpen,\n        'aria-label': getOpenDialogAriaText(pickerFieldProps.value, utils),\n        edge: inputAdornmentProps.position\n      },\n      ownerState: props\n    }),\n    openPickerButtonProps = _objectWithoutPropertiesLoose(_useSlotProps2, _excluded3);\n  const OpenPickerIcon = slots.openPickerIcon;\n  const Field = slots.field;\n  const fieldProps = useSlotProps({\n    elementType: Field,\n    externalSlotProps: innerSlotProps == null ? void 0 : innerSlotProps.field,\n    additionalProps: _extends({}, pickerFieldProps, isToolbarHidden && {\n      id: labelId\n    }, {\n      readOnly,\n      disabled,\n      className,\n      sx,\n      format,\n      formatDensity,\n      timezone,\n      label,\n      name,\n      autoFocus: autoFocus && !props.open,\n      focused: open ? true : undefined\n    }),\n    ownerState: props\n  });\n\n  // TODO: Move to `useSlotProps` when https://github.com/mui/material-ui/pull/35088 will be merged\n  if (hasUIView) {\n    fieldProps.InputProps = _extends({}, fieldProps.InputProps, {\n      ref: containerRef\n    }, !props.disableOpenPicker && {\n      [`${inputAdornmentProps.position}Adornment`]: /*#__PURE__*/_jsx(InputAdornment, _extends({}, inputAdornmentProps, {\n        children: /*#__PURE__*/_jsx(OpenPickerButton, _extends({}, openPickerButtonProps, {\n          children: /*#__PURE__*/_jsx(OpenPickerIcon, _extends({}, innerSlotProps == null ? void 0 : innerSlotProps.openPickerIcon))\n        }))\n      }))\n    });\n  }\n  const slotsForField = _extends({\n    textField: slots.textField,\n    clearIcon: slots.clearIcon,\n    clearButton: slots.clearButton\n  }, fieldProps.slots);\n  const Layout = (_slots$layout = slots.layout) != null ? _slots$layout : PickersLayout;\n  const handleInputRef = useForkRef(internalInputRef, fieldProps.inputRef, inputRef);\n  let labelledById = labelId;\n  if (isToolbarHidden) {\n    if (label) {\n      labelledById = `${labelId}-label`;\n    } else {\n      labelledById = undefined;\n    }\n  }\n  const slotProps = _extends({}, innerSlotProps, {\n    toolbar: _extends({}, innerSlotProps == null ? void 0 : innerSlotProps.toolbar, {\n      titleId: labelId\n    }),\n    popper: _extends({\n      'aria-labelledby': labelledById\n    }, innerSlotProps == null ? void 0 : innerSlotProps.popper)\n  });\n  const renderPicker = () => /*#__PURE__*/_jsxs(LocalizationProvider, {\n    localeText: localeText,\n    children: [/*#__PURE__*/_jsx(Field, _extends({}, fieldProps, {\n      slots: slotsForField,\n      slotProps: slotProps,\n      inputRef: handleInputRef\n    })), /*#__PURE__*/_jsx(PickersPopper, _extends({\n      role: \"dialog\",\n      placement: \"bottom-start\",\n      anchorEl: containerRef.current\n    }, actions, {\n      open: open,\n      slots: slots,\n      slotProps: slotProps,\n      shouldRestoreFocus: shouldRestoreFocus,\n      reduceAnimations: reduceAnimations,\n      children: /*#__PURE__*/_jsx(Layout, _extends({}, layoutProps, slotProps == null ? void 0 : slotProps.layout, {\n        slots: slots,\n        slotProps: slotProps,\n        children: renderCurrentView()\n      }))\n    }))]\n  });\n  return {\n    renderPicker\n  };\n};","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { singleItemFieldValueManager, singleItemValueManager } from '../internals/utils/valueManagers';\nimport { useField } from '../internals/hooks/useField';\nimport { validateDate } from '../internals/utils/validation/validateDate';\nimport { applyDefaultDate } from '../internals/utils/date-utils';\nimport { useUtils, useDefaultDates } from '../internals/hooks/useUtils';\nimport { splitFieldInternalAndForwardedProps } from '../internals/utils/fields';\nconst useDefaultizedDateField = props => {\n  var _props$disablePast, _props$disableFuture, _props$format;\n  const utils = useUtils();\n  const defaultDates = useDefaultDates();\n  return _extends({}, props, {\n    disablePast: (_props$disablePast = props.disablePast) != null ? _props$disablePast : false,\n    disableFuture: (_props$disableFuture = props.disableFuture) != null ? _props$disableFuture : false,\n    format: (_props$format = props.format) != null ? _props$format : utils.formats.keyboardDate,\n    minDate: applyDefaultDate(utils, props.minDate, defaultDates.minDate),\n    maxDate: applyDefaultDate(utils, props.maxDate, defaultDates.maxDate)\n  });\n};\nexport const useDateField = ({\n  props: inProps,\n  inputRef\n}) => {\n  const props = useDefaultizedDateField(inProps);\n  const {\n    forwardedProps,\n    internalProps\n  } = splitFieldInternalAndForwardedProps(props, 'date');\n  return useField({\n    inputRef,\n    forwardedProps,\n    internalProps,\n    valueManager: singleItemValueManager,\n    fieldValueManager: singleItemFieldValueManager,\n    validator: validateDate,\n    valueType: 'date'\n  });\n};","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"ownerState\"];\nimport * as React from 'react';\nimport { useSlotProps } from '@mui/base/utils';\nimport MuiIconButton from '@mui/material/IconButton';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport { ClearIcon } from '../icons';\nimport { useLocaleText } from '../internals';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport const useClearableField = ({\n  clearable,\n  fieldProps: forwardedFieldProps,\n  InputProps: ForwardedInputProps,\n  onClear,\n  slots,\n  slotProps,\n  components,\n  componentsProps\n}) => {\n  var _ref, _slots$clearButton, _slotProps$clearButto, _ref2, _slots$clearIcon, _slotProps$clearIcon;\n  const localeText = useLocaleText();\n  const IconButton = (_ref = (_slots$clearButton = slots == null ? void 0 : slots.clearButton) != null ? _slots$clearButton : components == null ? void 0 : components.ClearButton) != null ? _ref : MuiIconButton;\n  // The spread is here to avoid this bug mui/material-ui#34056\n  const _useSlotProps = useSlotProps({\n      elementType: IconButton,\n      externalSlotProps: (_slotProps$clearButto = slotProps == null ? void 0 : slotProps.clearButton) != null ? _slotProps$clearButto : componentsProps == null ? void 0 : componentsProps.clearButton,\n      ownerState: {},\n      className: 'clearButton',\n      additionalProps: {\n        title: localeText.fieldClearLabel\n      }\n    }),\n    iconButtonProps = _objectWithoutPropertiesLoose(_useSlotProps, _excluded);\n  const EndClearIcon = (_ref2 = (_slots$clearIcon = slots == null ? void 0 : slots.clearIcon) != null ? _slots$clearIcon : components == null ? void 0 : components.ClearIcon) != null ? _ref2 : ClearIcon;\n  const endClearIconProps = useSlotProps({\n    elementType: EndClearIcon,\n    externalSlotProps: (_slotProps$clearIcon = slotProps == null ? void 0 : slotProps.clearIcon) != null ? _slotProps$clearIcon : componentsProps == null ? void 0 : componentsProps.clearIcon,\n    ownerState: {}\n  });\n  const InputProps = _extends({}, ForwardedInputProps, {\n    endAdornment: /*#__PURE__*/_jsxs(React.Fragment, {\n      children: [clearable && /*#__PURE__*/_jsx(InputAdornment, {\n        position: \"end\",\n        sx: {\n          marginRight: ForwardedInputProps != null && ForwardedInputProps.endAdornment ? -1 : -1.5\n        },\n        children: /*#__PURE__*/_jsx(IconButton, _extends({}, iconButtonProps, {\n          onClick: onClear,\n          children: /*#__PURE__*/_jsx(EndClearIcon, _extends({\n            fontSize: \"small\"\n          }, endClearIconProps))\n        }))\n      }), ForwardedInputProps == null ? void 0 : ForwardedInputProps.endAdornment]\n    })\n  });\n  const fieldProps = _extends({}, forwardedFieldProps, {\n    sx: [{\n      '& .clearButton': {\n        opacity: 1\n      },\n      '@media (pointer: fine)': {\n        '& .clearButton': {\n          opacity: 0\n        },\n        '&:hover, &:focus-within': {\n          '.clearButton': {\n            opacity: 1\n          }\n        }\n      }\n    }, ...(Array.isArray(forwardedFieldProps.sx) ? forwardedFieldProps.sx : [forwardedFieldProps.sx])]\n  });\n  return {\n    InputProps,\n    fieldProps\n  };\n};","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"components\", \"componentsProps\", \"slots\", \"slotProps\", \"InputProps\", \"inputProps\"],\n  _excluded2 = [\"inputRef\"],\n  _excluded3 = [\"ref\", \"onPaste\", \"onKeyDown\", \"inputMode\", \"readOnly\", \"clearable\", \"onClear\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport MuiTextField from '@mui/material/TextField';\nimport { useThemeProps } from '@mui/material/styles';\nimport { useSlotProps } from '@mui/base/utils';\nimport { refType } from '@mui/utils';\nimport { useDateField } from './useDateField';\nimport { useClearableField } from '../hooks';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n/**\n * Demos:\n *\n * - [DateField](http://mui.com/x/react-date-pickers/date-field/)\n * - [Fields](https://mui.com/x/react-date-pickers/fields/)\n *\n * API:\n *\n * - [DateField API](https://mui.com/x/api/date-pickers/date-field/)\n */\nconst DateField = /*#__PURE__*/React.forwardRef(function DateField(inProps, ref) {\n  var _ref, _slots$textField, _slotProps$textField;\n  const themeProps = useThemeProps({\n    props: inProps,\n    name: 'MuiDateField'\n  });\n  const {\n      components,\n      componentsProps,\n      slots,\n      slotProps,\n      InputProps,\n      inputProps\n    } = themeProps,\n    other = _objectWithoutPropertiesLoose(themeProps, _excluded);\n  const ownerState = themeProps;\n  const TextField = (_ref = (_slots$textField = slots == null ? void 0 : slots.textField) != null ? _slots$textField : components == null ? void 0 : components.TextField) != null ? _ref : MuiTextField;\n  const _useSlotProps = useSlotProps({\n      elementType: TextField,\n      externalSlotProps: (_slotProps$textField = slotProps == null ? void 0 : slotProps.textField) != null ? _slotProps$textField : componentsProps == null ? void 0 : componentsProps.textField,\n      externalForwardedProps: other,\n      ownerState\n    }),\n    {\n      inputRef: externalInputRef\n    } = _useSlotProps,\n    textFieldProps = _objectWithoutPropertiesLoose(_useSlotProps, _excluded2);\n\n  // TODO: Remove when mui/material-ui#35088 will be merged\n  textFieldProps.inputProps = _extends({}, inputProps, textFieldProps.inputProps);\n  textFieldProps.InputProps = _extends({}, InputProps, textFieldProps.InputProps);\n  const _useDateField = useDateField({\n      props: textFieldProps,\n      inputRef: externalInputRef\n    }),\n    {\n      ref: inputRef,\n      onPaste,\n      onKeyDown,\n      inputMode,\n      readOnly,\n      clearable,\n      onClear\n    } = _useDateField,\n    fieldProps = _objectWithoutPropertiesLoose(_useDateField, _excluded3);\n  const {\n    InputProps: ProcessedInputProps,\n    fieldProps: processedFieldProps\n  } = useClearableField({\n    onClear,\n    clearable,\n    fieldProps,\n    InputProps: fieldProps.InputProps,\n    slots,\n    slotProps,\n    components,\n    componentsProps\n  });\n  return /*#__PURE__*/_jsx(TextField, _extends({\n    ref: ref\n  }, processedFieldProps, {\n    InputProps: _extends({}, ProcessedInputProps, {\n      readOnly\n    }),\n    inputProps: _extends({}, fieldProps.inputProps, {\n      inputMode,\n      onPaste,\n      onKeyDown,\n      ref: inputRef\n    })\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? DateField.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // | To update them edit the TypeScript types and run \"yarn proptypes\"  |\n  // ----------------------------------------------------------------------\n  /**\n   * If `true`, the `input` element is focused during the first mount.\n   * @default false\n   */\n  autoFocus: PropTypes.bool,\n  className: PropTypes.string,\n  /**\n   * If `true`, a clear button will be shown in the field allowing value clearing.\n   * @default false\n   */\n  clearable: PropTypes.bool,\n  /**\n   * The color of the component.\n   * It supports both default and custom theme colors, which can be added as shown in the\n   * [palette customization guide](https://mui.com/material-ui/customization/palette/#custom-colors).\n   * @default 'primary'\n   */\n  color: PropTypes.oneOf(['error', 'info', 'primary', 'secondary', 'success', 'warning']),\n  component: PropTypes.elementType,\n  /**\n   * Overridable components.\n   * @default {}\n   * @deprecated Please use `slots`.\n   */\n  components: PropTypes.object,\n  /**\n   * The props used for each component slot.\n   * @default {}\n   * @deprecated Please use `slotProps`.\n   */\n  componentsProps: PropTypes.object,\n  /**\n   * The default value. Use when the component is not controlled.\n   */\n  defaultValue: PropTypes.any,\n  /**\n   * If `true`, the component is disabled.\n   * @default false\n   */\n  disabled: PropTypes.bool,\n  /**\n   * If `true`, disable values after the current date for date components, time for time components and both for date time components.\n   * @default false\n   */\n  disableFuture: PropTypes.bool,\n  /**\n   * If `true`, disable values before the current date for date components, time for time components and both for date time components.\n   * @default false\n   */\n  disablePast: PropTypes.bool,\n  /**\n   * If `true`, the component is displayed in focused state.\n   */\n  focused: PropTypes.bool,\n  /**\n   * Format of the date when rendered in the input(s).\n   */\n  format: PropTypes.string,\n  /**\n   * Density of the format when rendered in the input.\n   * Setting `formatDensity` to `\"spacious\"` will add a space before and after each `/`, `-` and `.` character.\n   * @default \"dense\"\n   */\n  formatDensity: PropTypes.oneOf(['dense', 'spacious']),\n  /**\n   * Props applied to the [`FormHelperText`](/material-ui/api/form-helper-text/) element.\n   */\n  FormHelperTextProps: PropTypes.object,\n  /**\n   * If `true`, the input will take up the full width of its container.\n   * @default false\n   */\n  fullWidth: PropTypes.bool,\n  /**\n   * The helper text content.\n   */\n  helperText: PropTypes.node,\n  /**\n   * If `true`, the label is hidden.\n   * This is used to increase density for a `FilledInput`.\n   * Be sure to add `aria-label` to the `input` element.\n   * @default false\n   */\n  hiddenLabel: PropTypes.bool,\n  /**\n   * The id of the `input` element.\n   * Use this prop to make `label` and `helperText` accessible for screen readers.\n   */\n  id: PropTypes.string,\n  /**\n   * Props applied to the [`InputLabel`](/material-ui/api/input-label/) element.\n   * Pointer events like `onClick` are enabled if and only if `shrink` is `true`.\n   */\n  InputLabelProps: PropTypes.object,\n  /**\n   * [Attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#Attributes) applied to the `input` element.\n   */\n  inputProps: PropTypes.object,\n  /**\n   * Props applied to the Input element.\n   * It will be a [`FilledInput`](/material-ui/api/filled-input/),\n   * [`OutlinedInput`](/material-ui/api/outlined-input/) or [`Input`](/material-ui/api/input/)\n   * component depending on the `variant` prop value.\n   */\n  InputProps: PropTypes.object,\n  /**\n   * Pass a ref to the `input` element.\n   */\n  inputRef: refType,\n  /**\n   * The label content.\n   */\n  label: PropTypes.node,\n  /**\n   * If `dense` or `normal`, will adjust vertical spacing of this and contained components.\n   * @default 'none'\n   */\n  margin: PropTypes.oneOf(['dense', 'none', 'normal']),\n  /**\n   * Maximal selectable date.\n   */\n  maxDate: PropTypes.any,\n  /**\n   * Minimal selectable date.\n   */\n  minDate: PropTypes.any,\n  /**\n   * Name attribute of the `input` element.\n   */\n  name: PropTypes.string,\n  onBlur: PropTypes.func,\n  /**\n   * Callback fired when the value changes.\n   * @template TValue The value type. Will be either the same type as `value` or `null`. Can be in `[start, end]` format in case of range value.\n   * @template TError The validation error type. Will be either `string` or a `null`. Can be in `[start, end]` format in case of range value.\n   * @param {TValue} value The new value.\n   * @param {FieldChangeHandlerContext<TError>} context The context containing the validation result of the current value.\n   */\n  onChange: PropTypes.func,\n  /**\n   * Callback fired when the clear button is clicked.\n   */\n  onClear: PropTypes.func,\n  /**\n   * Callback fired when the error associated to the current value changes.\n   * @template TValue The value type. Will be either the same type as `value` or `null`. Can be in `[start, end]` format in case of range value.\n   * @template TError The validation error type. Will be either `string` or a `null`. Can be in `[start, end]` format in case of range value.\n   * @param {TError} error The new error.\n   * @param {TValue} value The value associated to the error.\n   */\n  onError: PropTypes.func,\n  onFocus: PropTypes.func,\n  /**\n   * Callback fired when the selected sections change.\n   * @param {FieldSelectedSections} newValue The new selected sections.\n   */\n  onSelectedSectionsChange: PropTypes.func,\n  /**\n   * It prevents the user from changing the value of the field\n   * (not from interacting with the field).\n   * @default false\n   */\n  readOnly: PropTypes.bool,\n  /**\n   * The date used to generate a part of the new value that is not present in the format when both `value` and `defaultValue` are empty.\n   * For example, on time fields it will be used to determine the date to set.\n   * @default The closest valid date using the validation props, except callbacks such as `shouldDisableDate`. Value is rounded to the most granular section used.\n   */\n  referenceDate: PropTypes.any,\n  /**\n   * If `true`, the label is displayed as required and the `input` element is required.\n   * @default false\n   */\n  required: PropTypes.bool,\n  /**\n   * The currently selected sections.\n   * This prop accept four formats:\n   * 1. If a number is provided, the section at this index will be selected.\n   * 2. If an object with a `startIndex` and `endIndex` properties are provided, the sections between those two indexes will be selected.\n   * 3. If a string of type `FieldSectionType` is provided, the first section with that name will be selected.\n   * 4. If `null` is provided, no section will be selected\n   * If not provided, the selected sections will be handled internally.\n   */\n  selectedSections: PropTypes.oneOfType([PropTypes.oneOf(['all', 'day', 'hours', 'meridiem', 'minutes', 'month', 'seconds', 'weekDay', 'year']), PropTypes.number, PropTypes.shape({\n    endIndex: PropTypes.number.isRequired,\n    startIndex: PropTypes.number.isRequired\n  })]),\n  /**\n   * Disable specific date.\n   *\n   * Warning: This function can be called multiple times (e.g. when rendering date calendar, checking if focus can be moved to a certain date, etc.). Expensive computations can impact performance.\n   *\n   * @template TDate\n   * @param {TDate} day The date to test.\n   * @returns {boolean} If `true` the date will be disabled.\n   */\n  shouldDisableDate: PropTypes.func,\n  /**\n   * Disable specific month.\n   * @template TDate\n   * @param {TDate} month The month to test.\n   * @returns {boolean} If `true`, the month will be disabled.\n   */\n  shouldDisableMonth: PropTypes.func,\n  /**\n   * Disable specific year.\n   * @template TDate\n   * @param {TDate} year The year to test.\n   * @returns {boolean} If `true`, the year will be disabled.\n   */\n  shouldDisableYear: PropTypes.func,\n  /**\n   * If `true`, the format will respect the leading zeroes (e.g: on dayjs, the format `M/D/YYYY` will render `8/16/2018`)\n   * If `false`, the format will always add leading zeroes (e.g: on dayjs, the format `M/D/YYYY` will render `08/16/2018`)\n   *\n   * Warning n1: Luxon is not able to respect the leading zeroes when using macro tokens (e.g: \"DD\"), so `shouldRespectLeadingZeros={true}` might lead to inconsistencies when using `AdapterLuxon`.\n   *\n   * Warning n2: When `shouldRespectLeadingZeros={true}`, the field will add an invisible character on the sections containing a single digit to make sure `onChange` is fired.\n   * If you need to get the clean value from the input, you can remove this character using `input.value.replace(/\\u200e/g, '')`.\n   *\n   * Warning n3: When used in strict mode, dayjs and moment require to respect the leading zeros.\n   * This mean that when using `shouldRespectLeadingZeros={false}`, if you retrieve the value directly from the input (not listening to `onChange`) and your format contains tokens without leading zeros, the value will not be parsed by your library.\n   *\n   * @default `false`\n   */\n  shouldRespectLeadingZeros: PropTypes.bool,\n  /**\n   * The size of the component.\n   */\n  size: PropTypes.oneOf(['medium', 'small']),\n  /**\n   * The props used for each component slot.\n   * @default {}\n   */\n  slotProps: PropTypes.object,\n  /**\n   * Overridable component slots.\n   * @default {}\n   */\n  slots: PropTypes.object,\n  style: PropTypes.object,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  /**\n   * Choose which timezone to use for the value.\n   * Example: \"default\", \"system\", \"UTC\", \"America/New_York\".\n   * If you pass values from other timezones to some props, they will be converted to this timezone before being used.\n   * @see See the {@link https://mui.com/x/react-date-pickers/timezone/ timezones documention} for more details.\n   * @default The timezone of the `value` or `defaultValue` prop is defined, 'default' otherwise.\n   */\n  timezone: PropTypes.string,\n  /**\n   * The ref object used to imperatively interact with the field.\n   */\n  unstableFieldRef: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n  /**\n   * The selected value.\n   * Used when the component is controlled.\n   */\n  value: PropTypes.any,\n  /**\n   * The variant to use.\n   * @default 'outlined'\n   */\n  variant: PropTypes.oneOf(['filled', 'outlined', 'standard'])\n} : void 0;\nexport { DateField };","import { unstable_generateUtilityClass as generateUtilityClass, unstable_generateUtilityClasses as generateUtilityClasses } from '@mui/utils';\nexport const getPickersFadeTransitionGroupUtilityClass = slot => generateUtilityClass('MuiPickersFadeTransitionGroup', slot);\nexport const pickersFadeTransitionGroupClasses = generateUtilityClasses('MuiPickersFadeTransitionGroup', ['root']);","import * as React from 'react';\nimport clsx from 'clsx';\nimport { TransitionGroup } from 'react-transition-group';\nimport Fade from '@mui/material/Fade';\nimport { styled, useTheme, useThemeProps } from '@mui/material/styles';\nimport composeClasses from '@mui/utils/composeClasses';\nimport { getPickersFadeTransitionGroupUtilityClass } from './pickersFadeTransitionGroupClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root']\n  };\n  return composeClasses(slots, getPickersFadeTransitionGroupUtilityClass, classes);\n};\nconst PickersFadeTransitionGroupRoot = styled(TransitionGroup, {\n  name: 'MuiPickersFadeTransitionGroup',\n  slot: 'Root',\n  overridesResolver: (_, styles) => styles.root\n})({\n  display: 'block',\n  position: 'relative'\n});\n\n/**\n * @ignore - do not document.\n */\nexport function PickersFadeTransitionGroup(inProps) {\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiPickersFadeTransitionGroup'\n  });\n  const {\n    children,\n    className,\n    reduceAnimations,\n    transKey\n  } = props;\n  const classes = useUtilityClasses(props);\n  const theme = useTheme();\n  if (reduceAnimations) {\n    return children;\n  }\n  return /*#__PURE__*/_jsx(PickersFadeTransitionGroupRoot, {\n    className: clsx(classes.root, className),\n    children: /*#__PURE__*/_jsx(Fade, {\n      appear: false,\n      mountOnEnter: true,\n      unmountOnExit: true,\n      timeout: {\n        appear: theme.transitions.duration.enteringScreen,\n        enter: theme.transitions.duration.enteringScreen,\n        exit: 0\n      },\n      children: children\n    }, transKey)\n  });\n}","import { unstable_generateUtilityClass as generateUtilityClass, unstable_generateUtilityClasses as generateUtilityClasses } from '@mui/utils';\nexport function getPickersMonthUtilityClass(slot) {\n  return generateUtilityClass('MuiPickersMonth', slot);\n}\nexport const pickersMonthClasses = generateUtilityClasses('MuiPickersMonth', ['root', 'monthButton', 'disabled', 'selected']);","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"autoFocus\", \"children\", \"disabled\", \"selected\", \"value\", \"tabIndex\", \"onClick\", \"onKeyDown\", \"onFocus\", \"onBlur\", \"aria-current\", \"aria-label\", \"monthsPerRow\"];\nimport * as React from 'react';\nimport { styled, alpha, useThemeProps } from '@mui/material/styles';\nimport { unstable_composeClasses as composeClasses, unstable_useEnhancedEffect as useEnhancedEffect } from '@mui/utils';\nimport { getPickersMonthUtilityClass, pickersMonthClasses } from './pickersMonthClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    disabled,\n    selected,\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root'],\n    monthButton: ['monthButton', disabled && 'disabled', selected && 'selected']\n  };\n  return composeClasses(slots, getPickersMonthUtilityClass, classes);\n};\nconst PickersMonthRoot = styled('div', {\n  name: 'MuiPickersMonth',\n  slot: 'Root',\n  overridesResolver: (_, styles) => [styles.root]\n})(({\n  ownerState\n}) => ({\n  flexBasis: ownerState.monthsPerRow === 3 ? '33.3%' : '25%',\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center'\n}));\nconst PickersMonthButton = styled('button', {\n  name: 'MuiPickersMonth',\n  slot: 'MonthButton',\n  overridesResolver: (_, styles) => [styles.monthButton, {\n    [`&.${pickersMonthClasses.disabled}`]: styles.disabled\n  }, {\n    [`&.${pickersMonthClasses.selected}`]: styles.selected\n  }]\n})(({\n  theme\n}) => _extends({\n  color: 'unset',\n  backgroundColor: 'transparent',\n  border: 0,\n  outline: 0\n}, theme.typography.subtitle1, {\n  margin: '8px 0',\n  height: 36,\n  width: 72,\n  borderRadius: 18,\n  cursor: 'pointer',\n  '&:focus': {\n    backgroundColor: theme.vars ? `rgba(${theme.vars.palette.action.activeChannel} / ${theme.vars.palette.action.hoverOpacity})` : alpha(theme.palette.action.active, theme.palette.action.hoverOpacity)\n  },\n  '&:hover': {\n    backgroundColor: theme.vars ? `rgba(${theme.vars.palette.action.activeChannel} / ${theme.vars.palette.action.hoverOpacity})` : alpha(theme.palette.action.active, theme.palette.action.hoverOpacity)\n  },\n  '&:disabled': {\n    cursor: 'auto',\n    pointerEvents: 'none'\n  },\n  [`&.${pickersMonthClasses.disabled}`]: {\n    color: (theme.vars || theme).palette.text.secondary\n  },\n  [`&.${pickersMonthClasses.selected}`]: {\n    color: (theme.vars || theme).palette.primary.contrastText,\n    backgroundColor: (theme.vars || theme).palette.primary.main,\n    '&:focus, &:hover': {\n      backgroundColor: (theme.vars || theme).palette.primary.dark\n    }\n  }\n}));\n\n/**\n * @ignore - do not document.\n */\nexport const PickersMonth = /*#__PURE__*/React.memo(function PickersMonth(inProps) {\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiPickersMonth'\n  });\n  const {\n      autoFocus,\n      children,\n      disabled,\n      selected,\n      value,\n      tabIndex,\n      onClick,\n      onKeyDown,\n      onFocus,\n      onBlur,\n      'aria-current': ariaCurrent,\n      'aria-label': ariaLabel\n      // We don't want to forward this prop to the root element\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const ref = React.useRef(null);\n  const classes = useUtilityClasses(props);\n  useEnhancedEffect(() => {\n    if (autoFocus) {\n      var _ref$current;\n      (_ref$current = ref.current) == null || _ref$current.focus();\n    }\n  }, [autoFocus]);\n  return /*#__PURE__*/_jsx(PickersMonthRoot, _extends({\n    className: classes.root,\n    ownerState: props\n  }, other, {\n    children: /*#__PURE__*/_jsx(PickersMonthButton, {\n      ref: ref,\n      disabled: disabled,\n      type: \"button\",\n      role: \"radio\",\n      tabIndex: disabled ? -1 : tabIndex,\n      \"aria-current\": ariaCurrent,\n      \"aria-checked\": selected,\n      \"aria-label\": ariaLabel,\n      onClick: event => onClick(event, value),\n      onKeyDown: event => onKeyDown(event, value),\n      onFocus: event => onFocus(event, value),\n      onBlur: event => onBlur(event, value),\n      className: classes.monthButton,\n      ownerState: props,\n      children: children\n    })\n  }));\n});","import { unstable_generateUtilityClass as generateUtilityClass, unstable_generateUtilityClasses as generateUtilityClasses } from '@mui/utils';\nexport function getMonthCalendarUtilityClass(slot) {\n  return generateUtilityClass('MuiMonthCalendar', slot);\n}\nexport const monthCalendarClasses = generateUtilityClasses('MuiMonthCalendar', ['root']);","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"className\", \"value\", \"defaultValue\", \"referenceDate\", \"disabled\", \"disableFuture\", \"disablePast\", \"maxDate\", \"minDate\", \"onChange\", \"shouldDisableMonth\", \"readOnly\", \"disableHighlightToday\", \"autoFocus\", \"onMonthFocus\", \"hasFocus\", \"onFocusedViewChange\", \"monthsPerRow\", \"timezone\", \"gridLabelId\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { useTheme } from '@mui/system';\nimport { styled, useThemeProps } from '@mui/material/styles';\nimport { unstable_useControlled as useControlled, unstable_composeClasses as composeClasses, unstable_useEventCallback as useEventCallback } from '@mui/utils';\nimport { PickersMonth } from './PickersMonth';\nimport { useUtils, useNow, useDefaultDates } from '../internals/hooks/useUtils';\nimport { getMonthCalendarUtilityClass } from './monthCalendarClasses';\nimport { applyDefaultDate, getMonthsInYear } from '../internals/utils/date-utils';\nimport { singleItemValueManager } from '../internals/utils/valueManagers';\nimport { SECTION_TYPE_GRANULARITY } from '../internals/utils/getDefaultReferenceDate';\nimport { useControlledValueWithTimezone } from '../internals/hooks/useValueWithTimezone';\nimport { DIALOG_WIDTH } from '../internals/constants/dimensions';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root']\n  };\n  return composeClasses(slots, getMonthCalendarUtilityClass, classes);\n};\nexport function useMonthCalendarDefaultizedProps(props, name) {\n  const utils = useUtils();\n  const defaultDates = useDefaultDates();\n  const themeProps = useThemeProps({\n    props,\n    name\n  });\n  return _extends({\n    disableFuture: false,\n    disablePast: false\n  }, themeProps, {\n    minDate: applyDefaultDate(utils, themeProps.minDate, defaultDates.minDate),\n    maxDate: applyDefaultDate(utils, themeProps.maxDate, defaultDates.maxDate)\n  });\n}\nconst MonthCalendarRoot = styled('div', {\n  name: 'MuiMonthCalendar',\n  slot: 'Root',\n  overridesResolver: (props, styles) => styles.root\n})({\n  display: 'flex',\n  flexWrap: 'wrap',\n  alignContent: 'stretch',\n  padding: '0 4px',\n  width: DIALOG_WIDTH,\n  // avoid padding increasing width over defined\n  boxSizing: 'border-box'\n});\n/**\n * Demos:\n *\n * - [DateCalendar](https://mui.com/x/react-date-pickers/date-calendar/)\n *\n * API:\n *\n * - [MonthCalendar API](https://mui.com/x/api/date-pickers/month-calendar/)\n */\nexport const MonthCalendar = /*#__PURE__*/React.forwardRef(function MonthCalendar(inProps, ref) {\n  const props = useMonthCalendarDefaultizedProps(inProps, 'MuiMonthCalendar');\n  const {\n      className,\n      value: valueProp,\n      defaultValue,\n      referenceDate: referenceDateProp,\n      disabled,\n      disableFuture,\n      disablePast,\n      maxDate,\n      minDate,\n      onChange,\n      shouldDisableMonth,\n      readOnly,\n      disableHighlightToday,\n      autoFocus = false,\n      onMonthFocus,\n      hasFocus,\n      onFocusedViewChange,\n      monthsPerRow = 3,\n      timezone: timezoneProp,\n      gridLabelId\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const {\n    value,\n    handleValueChange,\n    timezone\n  } = useControlledValueWithTimezone({\n    name: 'MonthCalendar',\n    timezone: timezoneProp,\n    value: valueProp,\n    defaultValue,\n    onChange: onChange,\n    valueManager: singleItemValueManager\n  });\n  const now = useNow(timezone);\n  const theme = useTheme();\n  const utils = useUtils();\n  const referenceDate = React.useMemo(() => singleItemValueManager.getInitialReferenceValue({\n    value,\n    utils,\n    props,\n    timezone,\n    referenceDate: referenceDateProp,\n    granularity: SECTION_TYPE_GRANULARITY.month\n  }), [] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n  const ownerState = props;\n  const classes = useUtilityClasses(ownerState);\n  const todayMonth = React.useMemo(() => utils.getMonth(now), [utils, now]);\n  const selectedMonth = React.useMemo(() => {\n    if (value != null) {\n      return utils.getMonth(value);\n    }\n    if (disableHighlightToday) {\n      return null;\n    }\n    return utils.getMonth(referenceDate);\n  }, [value, utils, disableHighlightToday, referenceDate]);\n  const [focusedMonth, setFocusedMonth] = React.useState(() => selectedMonth || todayMonth);\n  const [internalHasFocus, setInternalHasFocus] = useControlled({\n    name: 'MonthCalendar',\n    state: 'hasFocus',\n    controlled: hasFocus,\n    default: autoFocus != null ? autoFocus : false\n  });\n  const changeHasFocus = useEventCallback(newHasFocus => {\n    setInternalHasFocus(newHasFocus);\n    if (onFocusedViewChange) {\n      onFocusedViewChange(newHasFocus);\n    }\n  });\n  const isMonthDisabled = React.useCallback(dateToValidate => {\n    const firstEnabledMonth = utils.startOfMonth(disablePast && utils.isAfter(now, minDate) ? now : minDate);\n    const lastEnabledMonth = utils.startOfMonth(disableFuture && utils.isBefore(now, maxDate) ? now : maxDate);\n    const monthToValidate = utils.startOfMonth(dateToValidate);\n    if (utils.isBefore(monthToValidate, firstEnabledMonth)) {\n      return true;\n    }\n    if (utils.isAfter(monthToValidate, lastEnabledMonth)) {\n      return true;\n    }\n    if (!shouldDisableMonth) {\n      return false;\n    }\n    return shouldDisableMonth(monthToValidate);\n  }, [disableFuture, disablePast, maxDate, minDate, now, shouldDisableMonth, utils]);\n  const handleMonthSelection = useEventCallback((event, month) => {\n    if (readOnly) {\n      return;\n    }\n    const newDate = utils.setMonth(value != null ? value : referenceDate, month);\n    handleValueChange(newDate);\n  });\n  const focusMonth = useEventCallback(month => {\n    if (!isMonthDisabled(utils.setMonth(value != null ? value : referenceDate, month))) {\n      setFocusedMonth(month);\n      changeHasFocus(true);\n      if (onMonthFocus) {\n        onMonthFocus(month);\n      }\n    }\n  });\n  React.useEffect(() => {\n    setFocusedMonth(prevFocusedMonth => selectedMonth !== null && prevFocusedMonth !== selectedMonth ? selectedMonth : prevFocusedMonth);\n  }, [selectedMonth]);\n  const handleKeyDown = useEventCallback((event, month) => {\n    const monthsInYear = 12;\n    const monthsInRow = 3;\n    switch (event.key) {\n      case 'ArrowUp':\n        focusMonth((monthsInYear + month - monthsInRow) % monthsInYear);\n        event.preventDefault();\n        break;\n      case 'ArrowDown':\n        focusMonth((monthsInYear + month + monthsInRow) % monthsInYear);\n        event.preventDefault();\n        break;\n      case 'ArrowLeft':\n        focusMonth((monthsInYear + month + (theme.direction === 'ltr' ? -1 : 1)) % monthsInYear);\n        event.preventDefault();\n        break;\n      case 'ArrowRight':\n        focusMonth((monthsInYear + month + (theme.direction === 'ltr' ? 1 : -1)) % monthsInYear);\n        event.preventDefault();\n        break;\n      default:\n        break;\n    }\n  });\n  const handleMonthFocus = useEventCallback((event, month) => {\n    focusMonth(month);\n  });\n  const handleMonthBlur = useEventCallback((event, month) => {\n    if (focusedMonth === month) {\n      changeHasFocus(false);\n    }\n  });\n  return /*#__PURE__*/_jsx(MonthCalendarRoot, _extends({\n    ref: ref,\n    className: clsx(classes.root, className),\n    ownerState: ownerState,\n    role: \"radiogroup\",\n    \"aria-labelledby\": gridLabelId\n  }, other, {\n    children: getMonthsInYear(utils, value != null ? value : referenceDate).map(month => {\n      const monthNumber = utils.getMonth(month);\n      const monthText = utils.format(month, 'monthShort');\n      const monthLabel = utils.format(month, 'month');\n      const isSelected = monthNumber === selectedMonth;\n      const isDisabled = disabled || isMonthDisabled(month);\n      return /*#__PURE__*/_jsx(PickersMonth, {\n        selected: isSelected,\n        value: monthNumber,\n        onClick: handleMonthSelection,\n        onKeyDown: handleKeyDown,\n        autoFocus: internalHasFocus && monthNumber === focusedMonth,\n        disabled: isDisabled,\n        tabIndex: monthNumber === focusedMonth ? 0 : -1,\n        onFocus: handleMonthFocus,\n        onBlur: handleMonthBlur,\n        \"aria-current\": todayMonth === monthNumber ? 'date' : undefined,\n        \"aria-label\": monthLabel,\n        monthsPerRow: monthsPerRow,\n        children: monthText\n      }, monthText);\n    })\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? MonthCalendar.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // | To update them edit the TypeScript types and run \"yarn proptypes\"  |\n  // ----------------------------------------------------------------------\n  autoFocus: PropTypes.bool,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * className applied to the root element.\n   */\n  className: PropTypes.string,\n  /**\n   * The default selected value.\n   * Used when the component is not controlled.\n   */\n  defaultValue: PropTypes.any,\n  /**\n   * If `true` picker is disabled\n   */\n  disabled: PropTypes.bool,\n  /**\n   * If `true`, disable values after the current date for date components, time for time components and both for date time components.\n   * @default false\n   */\n  disableFuture: PropTypes.bool,\n  /**\n   * If `true`, today's date is rendering without highlighting with circle.\n   * @default false\n   */\n  disableHighlightToday: PropTypes.bool,\n  /**\n   * If `true`, disable values before the current date for date components, time for time components and both for date time components.\n   * @default false\n   */\n  disablePast: PropTypes.bool,\n  gridLabelId: PropTypes.string,\n  hasFocus: PropTypes.bool,\n  /**\n   * Maximal selectable date.\n   */\n  maxDate: PropTypes.any,\n  /**\n   * Minimal selectable date.\n   */\n  minDate: PropTypes.any,\n  /**\n   * Months rendered per row.\n   * @default 3\n   */\n  monthsPerRow: PropTypes.oneOf([3, 4]),\n  /**\n   * Callback fired when the value changes.\n   * @template TDate\n   * @param {TDate} value The new value.\n   */\n  onChange: PropTypes.func,\n  onFocusedViewChange: PropTypes.func,\n  onMonthFocus: PropTypes.func,\n  /**\n   * If `true` picker is readonly\n   */\n  readOnly: PropTypes.bool,\n  /**\n   * The date used to generate the new value when both `value` and `defaultValue` are empty.\n   * @default The closest valid month using the validation props, except callbacks such as `shouldDisableMonth`.\n   */\n  referenceDate: PropTypes.any,\n  /**\n   * Disable specific month.\n   * @template TDate\n   * @param {TDate} month The month to test.\n   * @returns {boolean} If `true`, the month will be disabled.\n   */\n  shouldDisableMonth: PropTypes.func,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  /**\n   * Choose which timezone to use for the value.\n   * Example: \"default\", \"system\", \"UTC\", \"America/New_York\".\n   * If you pass values from other timezones to some props, they will be converted to this timezone before being used.\n   * @see See the {@link https://mui.com/x/react-date-pickers/timezone/ timezones documention} for more details.\n   * @default The timezone of the `value` or `defaultValue` prop is defined, 'default' otherwise.\n   */\n  timezone: PropTypes.string,\n  /**\n   * The selected value.\n   * Used when the component is controlled.\n   */\n  value: PropTypes.any\n} : void 0;","import { unstable_generateUtilityClass as generateUtilityClass, unstable_generateUtilityClasses as generateUtilityClasses } from '@mui/utils';\nexport function getPickersYearUtilityClass(slot) {\n  return generateUtilityClass('MuiPickersYear', slot);\n}\nexport const pickersYearClasses = generateUtilityClasses('MuiPickersYear', ['root', 'yearButton', 'selected', 'disabled']);","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"autoFocus\", \"className\", \"children\", \"disabled\", \"selected\", \"value\", \"tabIndex\", \"onClick\", \"onKeyDown\", \"onFocus\", \"onBlur\", \"aria-current\", \"yearsPerRow\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses } from '@mui/utils';\nimport { alpha, styled, useThemeProps } from '@mui/material/styles';\nimport { getPickersYearUtilityClass, pickersYearClasses } from './pickersYearClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    disabled,\n    selected,\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root'],\n    yearButton: ['yearButton', disabled && 'disabled', selected && 'selected']\n  };\n  return composeClasses(slots, getPickersYearUtilityClass, classes);\n};\nconst PickersYearRoot = styled('div', {\n  name: 'MuiPickersYear',\n  slot: 'Root',\n  overridesResolver: (_, styles) => [styles.root]\n})(({\n  ownerState\n}) => ({\n  flexBasis: ownerState.yearsPerRow === 3 ? '33.3%' : '25%',\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center'\n}));\nconst PickersYearButton = styled('button', {\n  name: 'MuiPickersYear',\n  slot: 'YearButton',\n  overridesResolver: (_, styles) => [styles.yearButton, {\n    [`&.${pickersYearClasses.disabled}`]: styles.disabled\n  }, {\n    [`&.${pickersYearClasses.selected}`]: styles.selected\n  }]\n})(({\n  theme\n}) => _extends({\n  color: 'unset',\n  backgroundColor: 'transparent',\n  border: 0,\n  outline: 0\n}, theme.typography.subtitle1, {\n  margin: '6px 0',\n  height: 36,\n  width: 72,\n  borderRadius: 18,\n  cursor: 'pointer',\n  '&:focus': {\n    backgroundColor: theme.vars ? `rgba(${theme.vars.palette.action.activeChannel} / ${theme.vars.palette.action.focusOpacity})` : alpha(theme.palette.action.active, theme.palette.action.focusOpacity)\n  },\n  '&:hover': {\n    backgroundColor: theme.vars ? `rgba(${theme.vars.palette.action.activeChannel} / ${theme.vars.palette.action.hoverOpacity})` : alpha(theme.palette.action.active, theme.palette.action.hoverOpacity)\n  },\n  '&:disabled': {\n    cursor: 'auto',\n    pointerEvents: 'none'\n  },\n  [`&.${pickersYearClasses.disabled}`]: {\n    color: (theme.vars || theme).palette.text.secondary\n  },\n  [`&.${pickersYearClasses.selected}`]: {\n    color: (theme.vars || theme).palette.primary.contrastText,\n    backgroundColor: (theme.vars || theme).palette.primary.main,\n    '&:focus, &:hover': {\n      backgroundColor: (theme.vars || theme).palette.primary.dark\n    }\n  }\n}));\n\n/**\n * @ignore - internal component.\n */\nexport const PickersYear = /*#__PURE__*/React.memo(function PickersYear(inProps) {\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiPickersYear'\n  });\n  const {\n      autoFocus,\n      className,\n      children,\n      disabled,\n      selected,\n      value,\n      tabIndex,\n      onClick,\n      onKeyDown,\n      onFocus,\n      onBlur,\n      'aria-current': ariaCurrent\n      // We don't want to forward this prop to the root element\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const ref = React.useRef(null);\n  const classes = useUtilityClasses(props);\n\n  // We can't forward the `autoFocus` to the button because it is a native button, not a MUI Button\n  React.useEffect(() => {\n    if (autoFocus) {\n      // `ref.current` being `null` would be a bug in MUI.\n      ref.current.focus();\n    }\n  }, [autoFocus]);\n  return /*#__PURE__*/_jsx(PickersYearRoot, _extends({\n    className: clsx(classes.root, className),\n    ownerState: props\n  }, other, {\n    children: /*#__PURE__*/_jsx(PickersYearButton, {\n      ref: ref,\n      disabled: disabled,\n      type: \"button\",\n      role: \"radio\",\n      tabIndex: disabled ? -1 : tabIndex,\n      \"aria-current\": ariaCurrent,\n      \"aria-checked\": selected,\n      onClick: event => onClick(event, value),\n      onKeyDown: event => onKeyDown(event, value),\n      onFocus: event => onFocus(event, value),\n      onBlur: event => onBlur(event, value),\n      className: classes.yearButton,\n      ownerState: props,\n      children: children\n    })\n  }));\n});","import { unstable_generateUtilityClass as generateUtilityClass, unstable_generateUtilityClasses as generateUtilityClasses } from '@mui/utils';\nexport function getYearCalendarUtilityClass(slot) {\n  return generateUtilityClass('MuiYearCalendar', slot);\n}\nexport const yearCalendarClasses = generateUtilityClasses('MuiYearCalendar', ['root']);","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"autoFocus\", \"className\", \"value\", \"defaultValue\", \"referenceDate\", \"disabled\", \"disableFuture\", \"disablePast\", \"maxDate\", \"minDate\", \"onChange\", \"readOnly\", \"shouldDisableYear\", \"disableHighlightToday\", \"onYearFocus\", \"hasFocus\", \"onFocusedViewChange\", \"yearsPerRow\", \"timezone\", \"gridLabelId\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { useTheme } from '@mui/system';\nimport { styled, useThemeProps } from '@mui/material/styles';\nimport { unstable_useForkRef as useForkRef, unstable_composeClasses as composeClasses, unstable_useControlled as useControlled, unstable_useEventCallback as useEventCallback } from '@mui/utils';\nimport { PickersYear } from './PickersYear';\nimport { useUtils, useNow, useDefaultDates } from '../internals/hooks/useUtils';\nimport { getYearCalendarUtilityClass } from './yearCalendarClasses';\nimport { applyDefaultDate } from '../internals/utils/date-utils';\nimport { singleItemValueManager } from '../internals/utils/valueManagers';\nimport { SECTION_TYPE_GRANULARITY } from '../internals/utils/getDefaultReferenceDate';\nimport { useControlledValueWithTimezone } from '../internals/hooks/useValueWithTimezone';\nimport { DIALOG_WIDTH, MAX_CALENDAR_HEIGHT } from '../internals/constants/dimensions';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root']\n  };\n  return composeClasses(slots, getYearCalendarUtilityClass, classes);\n};\nfunction useYearCalendarDefaultizedProps(props, name) {\n  var _themeProps$yearsPerR;\n  const utils = useUtils();\n  const defaultDates = useDefaultDates();\n  const themeProps = useThemeProps({\n    props,\n    name\n  });\n  return _extends({\n    disablePast: false,\n    disableFuture: false\n  }, themeProps, {\n    yearsPerRow: (_themeProps$yearsPerR = themeProps.yearsPerRow) != null ? _themeProps$yearsPerR : 3,\n    minDate: applyDefaultDate(utils, themeProps.minDate, defaultDates.minDate),\n    maxDate: applyDefaultDate(utils, themeProps.maxDate, defaultDates.maxDate)\n  });\n}\nconst YearCalendarRoot = styled('div', {\n  name: 'MuiYearCalendar',\n  slot: 'Root',\n  overridesResolver: (props, styles) => styles.root\n})({\n  display: 'flex',\n  flexDirection: 'row',\n  flexWrap: 'wrap',\n  overflowY: 'auto',\n  height: '100%',\n  padding: '0 4px',\n  width: DIALOG_WIDTH,\n  maxHeight: MAX_CALENDAR_HEIGHT,\n  // avoid padding increasing width over defined\n  boxSizing: 'border-box',\n  position: 'relative'\n});\n/**\n * Demos:\n *\n * - [DateCalendar](https://mui.com/x/react-date-pickers/date-calendar/)\n *\n * API:\n *\n * - [YearCalendar API](https://mui.com/x/api/date-pickers/year-calendar/)\n */\nexport const YearCalendar = /*#__PURE__*/React.forwardRef(function YearCalendar(inProps, ref) {\n  const props = useYearCalendarDefaultizedProps(inProps, 'MuiYearCalendar');\n  const {\n      autoFocus,\n      className,\n      value: valueProp,\n      defaultValue,\n      referenceDate: referenceDateProp,\n      disabled,\n      disableFuture,\n      disablePast,\n      maxDate,\n      minDate,\n      onChange,\n      readOnly,\n      shouldDisableYear,\n      disableHighlightToday,\n      onYearFocus,\n      hasFocus,\n      onFocusedViewChange,\n      yearsPerRow,\n      timezone: timezoneProp,\n      gridLabelId\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const {\n    value,\n    handleValueChange,\n    timezone\n  } = useControlledValueWithTimezone({\n    name: 'YearCalendar',\n    timezone: timezoneProp,\n    value: valueProp,\n    defaultValue,\n    onChange: onChange,\n    valueManager: singleItemValueManager\n  });\n  const now = useNow(timezone);\n  const theme = useTheme();\n  const utils = useUtils();\n  const referenceDate = React.useMemo(() => singleItemValueManager.getInitialReferenceValue({\n    value,\n    utils,\n    props,\n    timezone,\n    referenceDate: referenceDateProp,\n    granularity: SECTION_TYPE_GRANULARITY.year\n  }), [] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n  const ownerState = props;\n  const classes = useUtilityClasses(ownerState);\n  const todayYear = React.useMemo(() => utils.getYear(now), [utils, now]);\n  const selectedYear = React.useMemo(() => {\n    if (value != null) {\n      return utils.getYear(value);\n    }\n    if (disableHighlightToday) {\n      return null;\n    }\n    return utils.getYear(referenceDate);\n  }, [value, utils, disableHighlightToday, referenceDate]);\n  const [focusedYear, setFocusedYear] = React.useState(() => selectedYear || todayYear);\n  const [internalHasFocus, setInternalHasFocus] = useControlled({\n    name: 'YearCalendar',\n    state: 'hasFocus',\n    controlled: hasFocus,\n    default: autoFocus != null ? autoFocus : false\n  });\n  const changeHasFocus = useEventCallback(newHasFocus => {\n    setInternalHasFocus(newHasFocus);\n    if (onFocusedViewChange) {\n      onFocusedViewChange(newHasFocus);\n    }\n  });\n  const isYearDisabled = React.useCallback(dateToValidate => {\n    if (disablePast && utils.isBeforeYear(dateToValidate, now)) {\n      return true;\n    }\n    if (disableFuture && utils.isAfterYear(dateToValidate, now)) {\n      return true;\n    }\n    if (minDate && utils.isBeforeYear(dateToValidate, minDate)) {\n      return true;\n    }\n    if (maxDate && utils.isAfterYear(dateToValidate, maxDate)) {\n      return true;\n    }\n    if (!shouldDisableYear) {\n      return false;\n    }\n    const yearToValidate = utils.startOfYear(dateToValidate);\n    return shouldDisableYear(yearToValidate);\n  }, [disableFuture, disablePast, maxDate, minDate, now, shouldDisableYear, utils]);\n  const handleYearSelection = useEventCallback((event, year) => {\n    if (readOnly) {\n      return;\n    }\n    const newDate = utils.setYear(value != null ? value : referenceDate, year);\n    handleValueChange(newDate);\n  });\n  const focusYear = useEventCallback(year => {\n    if (!isYearDisabled(utils.setYear(value != null ? value : referenceDate, year))) {\n      setFocusedYear(year);\n      changeHasFocus(true);\n      onYearFocus == null || onYearFocus(year);\n    }\n  });\n  React.useEffect(() => {\n    setFocusedYear(prevFocusedYear => selectedYear !== null && prevFocusedYear !== selectedYear ? selectedYear : prevFocusedYear);\n  }, [selectedYear]);\n  const handleKeyDown = useEventCallback((event, year) => {\n    switch (event.key) {\n      case 'ArrowUp':\n        focusYear(year - yearsPerRow);\n        event.preventDefault();\n        break;\n      case 'ArrowDown':\n        focusYear(year + yearsPerRow);\n        event.preventDefault();\n        break;\n      case 'ArrowLeft':\n        focusYear(year + (theme.direction === 'ltr' ? -1 : 1));\n        event.preventDefault();\n        break;\n      case 'ArrowRight':\n        focusYear(year + (theme.direction === 'ltr' ? 1 : -1));\n        event.preventDefault();\n        break;\n      default:\n        break;\n    }\n  });\n  const handleYearFocus = useEventCallback((event, year) => {\n    focusYear(year);\n  });\n  const handleYearBlur = useEventCallback((event, year) => {\n    if (focusedYear === year) {\n      changeHasFocus(false);\n    }\n  });\n  const scrollerRef = React.useRef(null);\n  const handleRef = useForkRef(ref, scrollerRef);\n  React.useEffect(() => {\n    if (autoFocus || scrollerRef.current === null) {\n      return;\n    }\n    const tabbableButton = scrollerRef.current.querySelector('[tabindex=\"0\"]');\n    if (!tabbableButton) {\n      return;\n    }\n\n    // Taken from useScroll in x-data-grid, but vertically centered\n    const offsetHeight = tabbableButton.offsetHeight;\n    const offsetTop = tabbableButton.offsetTop;\n    const clientHeight = scrollerRef.current.clientHeight;\n    const scrollTop = scrollerRef.current.scrollTop;\n    const elementBottom = offsetTop + offsetHeight;\n    if (offsetHeight > clientHeight || offsetTop < scrollTop) {\n      // Button already visible\n      return;\n    }\n    scrollerRef.current.scrollTop = elementBottom - clientHeight / 2 - offsetHeight / 2;\n  }, [autoFocus]);\n  return /*#__PURE__*/_jsx(YearCalendarRoot, _extends({\n    ref: handleRef,\n    className: clsx(classes.root, className),\n    ownerState: ownerState,\n    role: \"radiogroup\",\n    \"aria-labelledby\": gridLabelId\n  }, other, {\n    children: utils.getYearRange(minDate, maxDate).map(year => {\n      const yearNumber = utils.getYear(year);\n      const isSelected = yearNumber === selectedYear;\n      const isDisabled = disabled || isYearDisabled(year);\n      return /*#__PURE__*/_jsx(PickersYear, {\n        selected: isSelected,\n        value: yearNumber,\n        onClick: handleYearSelection,\n        onKeyDown: handleKeyDown,\n        autoFocus: internalHasFocus && yearNumber === focusedYear,\n        disabled: isDisabled,\n        tabIndex: yearNumber === focusedYear ? 0 : -1,\n        onFocus: handleYearFocus,\n        onBlur: handleYearBlur,\n        \"aria-current\": todayYear === yearNumber ? 'date' : undefined,\n        yearsPerRow: yearsPerRow,\n        children: utils.format(year, 'year')\n      }, utils.format(year, 'year'));\n    })\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? YearCalendar.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // | To update them edit the TypeScript types and run \"yarn proptypes\"  |\n  // ----------------------------------------------------------------------\n  autoFocus: PropTypes.bool,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * className applied to the root element.\n   */\n  className: PropTypes.string,\n  /**\n   * The default selected value.\n   * Used when the component is not controlled.\n   */\n  defaultValue: PropTypes.any,\n  /**\n   * If `true` picker is disabled\n   */\n  disabled: PropTypes.bool,\n  /**\n   * If `true`, disable values after the current date for date components, time for time components and both for date time components.\n   * @default false\n   */\n  disableFuture: PropTypes.bool,\n  /**\n   * If `true`, today's date is rendering without highlighting with circle.\n   * @default false\n   */\n  disableHighlightToday: PropTypes.bool,\n  /**\n   * If `true`, disable values before the current date for date components, time for time components and both for date time components.\n   * @default false\n   */\n  disablePast: PropTypes.bool,\n  gridLabelId: PropTypes.string,\n  hasFocus: PropTypes.bool,\n  /**\n   * Maximal selectable date.\n   */\n  maxDate: PropTypes.any,\n  /**\n   * Minimal selectable date.\n   */\n  minDate: PropTypes.any,\n  /**\n   * Callback fired when the value changes.\n   * @template TDate\n   * @param {TDate} value The new value.\n   */\n  onChange: PropTypes.func,\n  onFocusedViewChange: PropTypes.func,\n  onYearFocus: PropTypes.func,\n  /**\n   * If `true` picker is readonly\n   */\n  readOnly: PropTypes.bool,\n  /**\n   * The date used to generate the new value when both `value` and `defaultValue` are empty.\n   * @default The closest valid year using the validation props, except callbacks such as `shouldDisableYear`.\n   */\n  referenceDate: PropTypes.any,\n  /**\n   * Disable specific year.\n   * @template TDate\n   * @param {TDate} year The year to test.\n   * @returns {boolean} If `true`, the year will be disabled.\n   */\n  shouldDisableYear: PropTypes.func,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  /**\n   * Choose which timezone to use for the value.\n   * Example: \"default\", \"system\", \"UTC\", \"America/New_York\".\n   * If you pass values from other timezones to some props, they will be converted to this timezone before being used.\n   * @see See the {@link https://mui.com/x/react-date-pickers/timezone/ timezones documention} for more details.\n   * @default The timezone of the `value` or `defaultValue` prop is defined, 'default' otherwise.\n   */\n  timezone: PropTypes.string,\n  /**\n   * The selected value.\n   * Used when the component is controlled.\n   */\n  value: PropTypes.any,\n  /**\n   * Years rendered per row.\n   * @default 3\n   */\n  yearsPerRow: PropTypes.oneOf([3, 4])\n} : void 0;","import { unstable_generateUtilityClass as generateUtilityClass, unstable_generateUtilityClasses as generateUtilityClasses } from '@mui/utils';\nexport const getPickersCalendarHeaderUtilityClass = slot => generateUtilityClass('MuiPickersCalendarHeader', slot);\nexport const pickersCalendarHeaderClasses = generateUtilityClasses('MuiPickersCalendarHeader', ['root', 'labelContainer', 'label', 'switchViewButton', 'switchViewIcon']);","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"slots\", \"slotProps\", \"components\", \"componentsProps\", \"currentMonth\", \"disabled\", \"disableFuture\", \"disablePast\", \"maxDate\", \"minDate\", \"onMonthChange\", \"onViewChange\", \"view\", \"reduceAnimations\", \"views\", \"labelId\", \"className\", \"timezone\"],\n  _excluded2 = [\"ownerState\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport Fade from '@mui/material/Fade';\nimport { styled, useThemeProps } from '@mui/material/styles';\nimport { useSlotProps } from '@mui/base/utils';\nimport { unstable_composeClasses as composeClasses } from '@mui/utils';\nimport IconButton from '@mui/material/IconButton';\nimport { useLocaleText, useUtils } from '../internals/hooks/useUtils';\nimport { PickersFadeTransitionGroup } from '../DateCalendar/PickersFadeTransitionGroup';\nimport { ArrowDropDownIcon } from '../icons';\nimport { PickersArrowSwitcher } from '../internals/components/PickersArrowSwitcher';\nimport { usePreviousMonthDisabled, useNextMonthDisabled } from '../internals/hooks/date-helpers-hooks';\nimport { getPickersCalendarHeaderUtilityClass, pickersCalendarHeaderClasses } from './pickersCalendarHeaderClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root'],\n    labelContainer: ['labelContainer'],\n    label: ['label'],\n    switchViewButton: ['switchViewButton'],\n    switchViewIcon: ['switchViewIcon']\n  };\n  return composeClasses(slots, getPickersCalendarHeaderUtilityClass, classes);\n};\nconst PickersCalendarHeaderRoot = styled('div', {\n  name: 'MuiPickersCalendarHeader',\n  slot: 'Root',\n  overridesResolver: (_, styles) => styles.root\n})({\n  display: 'flex',\n  alignItems: 'center',\n  marginTop: 16,\n  marginBottom: 8,\n  paddingLeft: 24,\n  paddingRight: 12,\n  // prevent jumping in safari\n  maxHeight: 30,\n  minHeight: 30\n});\nconst PickersCalendarHeaderLabelContainer = styled('div', {\n  name: 'MuiPickersCalendarHeader',\n  slot: 'LabelContainer',\n  overridesResolver: (_, styles) => styles.labelContainer\n})(({\n  theme\n}) => _extends({\n  display: 'flex',\n  overflow: 'hidden',\n  alignItems: 'center',\n  cursor: 'pointer',\n  marginRight: 'auto'\n}, theme.typography.body1, {\n  fontWeight: theme.typography.fontWeightMedium\n}));\nconst PickersCalendarHeaderLabel = styled('div', {\n  name: 'MuiPickersCalendarHeader',\n  slot: 'Label',\n  overridesResolver: (_, styles) => styles.label\n})({\n  marginRight: 6\n});\nconst PickersCalendarHeaderSwitchViewButton = styled(IconButton, {\n  name: 'MuiPickersCalendarHeader',\n  slot: 'SwitchViewButton',\n  overridesResolver: (_, styles) => styles.switchViewButton\n})(({\n  ownerState\n}) => _extends({\n  marginRight: 'auto'\n}, ownerState.view === 'year' && {\n  [`.${pickersCalendarHeaderClasses.switchViewIcon}`]: {\n    transform: 'rotate(180deg)'\n  }\n}));\nconst PickersCalendarHeaderSwitchViewIcon = styled(ArrowDropDownIcon, {\n  name: 'MuiPickersCalendarHeader',\n  slot: 'SwitchViewIcon',\n  overridesResolver: (_, styles) => styles.switchViewIcon\n})(({\n  theme\n}) => ({\n  willChange: 'transform',\n  transition: theme.transitions.create('transform'),\n  transform: 'rotate(0deg)'\n}));\n/**\n * Demos:\n *\n * - [DateCalendar](https://mui.com/x/react-date-pickers/date-calendar/)\n * - [DateRangeCalendar](https://mui.com/x/react-date-pickers/date-range-calendar/)\n * - [Custom slots and subcomponents](https://mui.com/x/react-date-pickers/custom-components/)\n *\n * API:\n *\n * - [PickersCalendarHeader API](https://mui.com/x/api/date-pickers/pickers-calendar-header/)\n */\nconst PickersCalendarHeader = /*#__PURE__*/React.forwardRef(function PickersCalendarHeader(inProps, ref) {\n  var _ref, _slots$switchViewButt, _ref2, _slots$switchViewIcon;\n  const localeText = useLocaleText();\n  const utils = useUtils();\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiPickersCalendarHeader'\n  });\n  const {\n      slots,\n      slotProps,\n      components,\n      currentMonth: month,\n      disabled,\n      disableFuture,\n      disablePast,\n      maxDate,\n      minDate,\n      onMonthChange,\n      onViewChange,\n      view,\n      reduceAnimations,\n      views,\n      labelId,\n      className,\n      timezone\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const ownerState = props;\n  const classes = useUtilityClasses(props);\n  const SwitchViewButton = (_ref = (_slots$switchViewButt = slots == null ? void 0 : slots.switchViewButton) != null ? _slots$switchViewButt : components == null ? void 0 : components.SwitchViewButton) != null ? _ref : PickersCalendarHeaderSwitchViewButton;\n  const switchViewButtonProps = useSlotProps({\n    elementType: SwitchViewButton,\n    externalSlotProps: slotProps == null ? void 0 : slotProps.switchViewButton,\n    additionalProps: {\n      size: 'small',\n      'aria-label': localeText.calendarViewSwitchingButtonAriaLabel(view)\n    },\n    ownerState,\n    className: classes.switchViewButton\n  });\n  const SwitchViewIcon = (_ref2 = (_slots$switchViewIcon = slots == null ? void 0 : slots.switchViewIcon) != null ? _slots$switchViewIcon : components == null ? void 0 : components.SwitchViewIcon) != null ? _ref2 : PickersCalendarHeaderSwitchViewIcon;\n  // The spread is here to avoid this bug mui/material-ui#34056\n  const _useSlotProps = useSlotProps({\n      elementType: SwitchViewIcon,\n      externalSlotProps: slotProps == null ? void 0 : slotProps.switchViewIcon,\n      ownerState: undefined,\n      className: classes.switchViewIcon\n    }),\n    switchViewIconProps = _objectWithoutPropertiesLoose(_useSlotProps, _excluded2);\n  const selectNextMonth = () => onMonthChange(utils.addMonths(month, 1), 'left');\n  const selectPreviousMonth = () => onMonthChange(utils.addMonths(month, -1), 'right');\n  const isNextMonthDisabled = useNextMonthDisabled(month, {\n    disableFuture,\n    maxDate,\n    timezone\n  });\n  const isPreviousMonthDisabled = usePreviousMonthDisabled(month, {\n    disablePast,\n    minDate,\n    timezone\n  });\n  const handleToggleView = () => {\n    if (views.length === 1 || !onViewChange || disabled) {\n      return;\n    }\n    if (views.length === 2) {\n      onViewChange(views.find(el => el !== view) || views[0]);\n    } else {\n      // switching only between first 2\n      const nextIndexToOpen = views.indexOf(view) !== 0 ? 0 : 1;\n      onViewChange(views[nextIndexToOpen]);\n    }\n  };\n\n  // No need to display more information\n  if (views.length === 1 && views[0] === 'year') {\n    return null;\n  }\n  return /*#__PURE__*/_jsxs(PickersCalendarHeaderRoot, _extends({}, other, {\n    ownerState: ownerState,\n    className: clsx(className, classes.root),\n    ref: ref,\n    children: [/*#__PURE__*/_jsxs(PickersCalendarHeaderLabelContainer, {\n      role: \"presentation\",\n      onClick: handleToggleView,\n      ownerState: ownerState\n      // putting this on the label item element below breaks when using transition\n      ,\n      \"aria-live\": \"polite\",\n      className: classes.labelContainer,\n      children: [/*#__PURE__*/_jsx(PickersFadeTransitionGroup, {\n        reduceAnimations: reduceAnimations,\n        transKey: utils.format(month, 'monthAndYear'),\n        children: /*#__PURE__*/_jsx(PickersCalendarHeaderLabel, {\n          id: labelId,\n          ownerState: ownerState,\n          className: classes.label,\n          children: utils.format(month, 'monthAndYear')\n        })\n      }), views.length > 1 && !disabled && /*#__PURE__*/_jsx(SwitchViewButton, _extends({}, switchViewButtonProps, {\n        children: /*#__PURE__*/_jsx(SwitchViewIcon, _extends({}, switchViewIconProps))\n      }))]\n    }), /*#__PURE__*/_jsx(Fade, {\n      in: view === 'day',\n      children: /*#__PURE__*/_jsx(PickersArrowSwitcher, {\n        slots: slots,\n        slotProps: slotProps,\n        onGoToPrevious: selectPreviousMonth,\n        isPreviousDisabled: isPreviousMonthDisabled,\n        previousLabel: localeText.previousMonth,\n        onGoToNext: selectNextMonth,\n        isNextDisabled: isNextMonthDisabled,\n        nextLabel: localeText.nextMonth\n      })\n    })]\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? PickersCalendarHeader.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // | To update them edit the TypeScript types and run \"yarn proptypes\"  |\n  // ----------------------------------------------------------------------\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * className applied to the root element.\n   */\n  className: PropTypes.string,\n  /**\n   * Overridable components.\n   * @default {}\n   * @deprecated Please use `slots`.\n   */\n  components: PropTypes.object,\n  /**\n   * The props used for each component slot.\n   * @default {}\n   * @deprecated Please use `slotProps`.\n   */\n  componentsProps: PropTypes.object,\n  currentMonth: PropTypes.any.isRequired,\n  disabled: PropTypes.bool,\n  disableFuture: PropTypes.bool,\n  disablePast: PropTypes.bool,\n  labelId: PropTypes.string,\n  maxDate: PropTypes.any.isRequired,\n  minDate: PropTypes.any.isRequired,\n  onMonthChange: PropTypes.func.isRequired,\n  onViewChange: PropTypes.func,\n  reduceAnimations: PropTypes.bool.isRequired,\n  /**\n   * The props used for each component slot.\n   * @default {}\n   */\n  slotProps: PropTypes.object,\n  /**\n   * Overridable component slots.\n   * @default {}\n   */\n  slots: PropTypes.object,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  timezone: PropTypes.string.isRequired,\n  view: PropTypes.oneOf(['day', 'month', 'year']).isRequired,\n  views: PropTypes.arrayOf(PropTypes.oneOf(['day', 'month', 'year']).isRequired).isRequired\n} : void 0;\nexport { PickersCalendarHeader };","import { styled } from '@mui/material/styles';\nimport { DIALOG_WIDTH, VIEW_HEIGHT } from '../../constants/dimensions';\nexport const PickerViewRoot = styled('div')({\n  overflow: 'hidden',\n  width: DIALOG_WIDTH,\n  maxHeight: VIEW_HEIGHT,\n  display: 'flex',\n  flexDirection: 'column',\n  margin: '0 auto'\n});","import { unstable_generateUtilityClass as generateUtilityClass, unstable_generateUtilityClasses as generateUtilityClasses } from '@mui/utils';\nexport const getDateCalendarUtilityClass = slot => generateUtilityClass('MuiDateCalendar', slot);\nexport const dateCalendarClasses = generateUtilityClasses('MuiDateCalendar', ['root', 'viewTransitionContainer']);","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"autoFocus\", \"onViewChange\", \"value\", \"defaultValue\", \"referenceDate\", \"disableFuture\", \"disablePast\", \"defaultCalendarMonth\", \"onChange\", \"onYearChange\", \"onMonthChange\", \"reduceAnimations\", \"shouldDisableDate\", \"shouldDisableMonth\", \"shouldDisableYear\", \"view\", \"views\", \"openTo\", \"className\", \"disabled\", \"readOnly\", \"minDate\", \"maxDate\", \"disableHighlightToday\", \"focusedView\", \"onFocusedViewChange\", \"showDaysOutsideCurrentMonth\", \"fixedWeekNumber\", \"dayOfWeekFormatter\", \"components\", \"componentsProps\", \"slots\", \"slotProps\", \"loading\", \"renderLoading\", \"displayWeekNumber\", \"yearsPerRow\", \"monthsPerRow\", \"timezone\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { useSlotProps } from '@mui/base/utils';\nimport { styled, useThemeProps } from '@mui/material/styles';\nimport { unstable_composeClasses as composeClasses, unstable_useId as useId, unstable_useEventCallback as useEventCallback } from '@mui/utils';\nimport { useCalendarState } from './useCalendarState';\nimport { useDefaultDates, useUtils } from '../internals/hooks/useUtils';\nimport { PickersFadeTransitionGroup } from './PickersFadeTransitionGroup';\nimport { DayCalendar } from './DayCalendar';\nimport { MonthCalendar } from '../MonthCalendar';\nimport { YearCalendar } from '../YearCalendar';\nimport { useViews } from '../internals/hooks/useViews';\nimport { PickersCalendarHeader } from '../PickersCalendarHeader';\nimport { findClosestEnabledDate, applyDefaultDate, mergeDateAndTime } from '../internals/utils/date-utils';\nimport { PickerViewRoot } from '../internals/components/PickerViewRoot';\nimport { useDefaultReduceAnimations } from '../internals/hooks/useDefaultReduceAnimations';\nimport { getDateCalendarUtilityClass } from './dateCalendarClasses';\nimport { useControlledValueWithTimezone } from '../internals/hooks/useValueWithTimezone';\nimport { singleItemValueManager } from '../internals/utils/valueManagers';\nimport { VIEW_HEIGHT } from '../internals/constants/dimensions';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root'],\n    viewTransitionContainer: ['viewTransitionContainer']\n  };\n  return composeClasses(slots, getDateCalendarUtilityClass, classes);\n};\nfunction useDateCalendarDefaultizedProps(props, name) {\n  var _themeProps$loading, _themeProps$disablePa, _themeProps$disableFu, _themeProps$openTo, _themeProps$views, _themeProps$reduceAni, _themeProps$renderLoa;\n  const utils = useUtils();\n  const defaultDates = useDefaultDates();\n  const defaultReduceAnimations = useDefaultReduceAnimations();\n  const themeProps = useThemeProps({\n    props,\n    name\n  });\n  return _extends({}, themeProps, {\n    loading: (_themeProps$loading = themeProps.loading) != null ? _themeProps$loading : false,\n    disablePast: (_themeProps$disablePa = themeProps.disablePast) != null ? _themeProps$disablePa : false,\n    disableFuture: (_themeProps$disableFu = themeProps.disableFuture) != null ? _themeProps$disableFu : false,\n    openTo: (_themeProps$openTo = themeProps.openTo) != null ? _themeProps$openTo : 'day',\n    views: (_themeProps$views = themeProps.views) != null ? _themeProps$views : ['year', 'day'],\n    reduceAnimations: (_themeProps$reduceAni = themeProps.reduceAnimations) != null ? _themeProps$reduceAni : defaultReduceAnimations,\n    renderLoading: (_themeProps$renderLoa = themeProps.renderLoading) != null ? _themeProps$renderLoa : () => /*#__PURE__*/_jsx(\"span\", {\n      children: \"...\"\n    }),\n    minDate: applyDefaultDate(utils, themeProps.minDate, defaultDates.minDate),\n    maxDate: applyDefaultDate(utils, themeProps.maxDate, defaultDates.maxDate)\n  });\n}\nconst DateCalendarRoot = styled(PickerViewRoot, {\n  name: 'MuiDateCalendar',\n  slot: 'Root',\n  overridesResolver: (props, styles) => styles.root\n})({\n  display: 'flex',\n  flexDirection: 'column',\n  height: VIEW_HEIGHT\n});\nconst DateCalendarViewTransitionContainer = styled(PickersFadeTransitionGroup, {\n  name: 'MuiDateCalendar',\n  slot: 'ViewTransitionContainer',\n  overridesResolver: (props, styles) => styles.viewTransitionContainer\n})({});\n/**\n * Demos:\n *\n * - [DatePicker](https://mui.com/x/react-date-pickers/date-picker/)\n * - [DateCalendar](https://mui.com/x/react-date-pickers/date-calendar/)\n * - [Validation](https://mui.com/x/react-date-pickers/validation/)\n *\n * API:\n *\n * - [DateCalendar API](https://mui.com/x/api/date-pickers/date-calendar/)\n */\nexport const DateCalendar = /*#__PURE__*/React.forwardRef(function DateCalendar(inProps, ref) {\n  var _ref, _slots$calendarHeader, _slotProps$calendarHe;\n  const utils = useUtils();\n  const id = useId();\n  const props = useDateCalendarDefaultizedProps(inProps, 'MuiDateCalendar');\n  const {\n      autoFocus,\n      onViewChange,\n      value: valueProp,\n      defaultValue,\n      referenceDate: referenceDateProp,\n      disableFuture,\n      disablePast,\n      defaultCalendarMonth,\n      onChange,\n      onYearChange,\n      onMonthChange,\n      reduceAnimations,\n      shouldDisableDate,\n      shouldDisableMonth,\n      shouldDisableYear,\n      view: inView,\n      views,\n      openTo,\n      className,\n      disabled,\n      readOnly,\n      minDate,\n      maxDate,\n      disableHighlightToday,\n      focusedView: inFocusedView,\n      onFocusedViewChange,\n      showDaysOutsideCurrentMonth,\n      fixedWeekNumber,\n      dayOfWeekFormatter,\n      components,\n      componentsProps,\n      slots,\n      slotProps,\n      loading,\n      renderLoading,\n      displayWeekNumber,\n      yearsPerRow,\n      monthsPerRow,\n      timezone: timezoneProp\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const {\n    value,\n    handleValueChange,\n    timezone\n  } = useControlledValueWithTimezone({\n    name: 'DateCalendar',\n    timezone: timezoneProp,\n    value: valueProp,\n    defaultValue,\n    onChange,\n    valueManager: singleItemValueManager\n  });\n  const {\n    view,\n    setView,\n    focusedView,\n    setFocusedView,\n    goToNextView,\n    setValueAndGoToNextView\n  } = useViews({\n    view: inView,\n    views,\n    openTo,\n    onChange: handleValueChange,\n    onViewChange,\n    autoFocus,\n    focusedView: inFocusedView,\n    onFocusedViewChange\n  });\n  const {\n    referenceDate,\n    calendarState,\n    changeFocusedDay,\n    changeMonth,\n    handleChangeMonth,\n    isDateDisabled,\n    onMonthSwitchingAnimationEnd\n  } = useCalendarState({\n    value,\n    defaultCalendarMonth,\n    referenceDate: referenceDateProp,\n    reduceAnimations,\n    onMonthChange,\n    minDate,\n    maxDate,\n    shouldDisableDate,\n    disablePast,\n    disableFuture,\n    timezone\n  });\n\n  // When disabled, limit the view to the selected date\n  const minDateWithDisabled = disabled && value || minDate;\n  const maxDateWithDisabled = disabled && value || maxDate;\n  const gridLabelId = `${id}-grid-label`;\n  const hasFocus = focusedView !== null;\n  const CalendarHeader = (_ref = (_slots$calendarHeader = slots == null ? void 0 : slots.calendarHeader) != null ? _slots$calendarHeader : components == null ? void 0 : components.CalendarHeader) != null ? _ref : PickersCalendarHeader;\n  const calendarHeaderProps = useSlotProps({\n    elementType: CalendarHeader,\n    externalSlotProps: (_slotProps$calendarHe = slotProps == null ? void 0 : slotProps.calendarHeader) != null ? _slotProps$calendarHe : componentsProps == null ? void 0 : componentsProps.calendarHeader,\n    additionalProps: {\n      views,\n      view,\n      currentMonth: calendarState.currentMonth,\n      onViewChange: setView,\n      onMonthChange: (newMonth, direction) => handleChangeMonth({\n        newMonth,\n        direction\n      }),\n      minDate: minDateWithDisabled,\n      maxDate: maxDateWithDisabled,\n      disabled,\n      disablePast,\n      disableFuture,\n      reduceAnimations,\n      timezone,\n      labelId: gridLabelId,\n      slots,\n      slotProps\n    },\n    ownerState: props\n  });\n  const handleDateMonthChange = useEventCallback(newDate => {\n    const startOfMonth = utils.startOfMonth(newDate);\n    const endOfMonth = utils.endOfMonth(newDate);\n    const closestEnabledDate = isDateDisabled(newDate) ? findClosestEnabledDate({\n      utils,\n      date: newDate,\n      minDate: utils.isBefore(minDate, startOfMonth) ? startOfMonth : minDate,\n      maxDate: utils.isAfter(maxDate, endOfMonth) ? endOfMonth : maxDate,\n      disablePast,\n      disableFuture,\n      isDateDisabled,\n      timezone\n    }) : newDate;\n    if (closestEnabledDate) {\n      setValueAndGoToNextView(closestEnabledDate, 'finish');\n      onMonthChange == null || onMonthChange(startOfMonth);\n    } else {\n      goToNextView();\n      changeMonth(startOfMonth);\n    }\n    changeFocusedDay(closestEnabledDate, true);\n  });\n  const handleDateYearChange = useEventCallback(newDate => {\n    const startOfYear = utils.startOfYear(newDate);\n    const endOfYear = utils.endOfYear(newDate);\n    const closestEnabledDate = isDateDisabled(newDate) ? findClosestEnabledDate({\n      utils,\n      date: newDate,\n      minDate: utils.isBefore(minDate, startOfYear) ? startOfYear : minDate,\n      maxDate: utils.isAfter(maxDate, endOfYear) ? endOfYear : maxDate,\n      disablePast,\n      disableFuture,\n      isDateDisabled,\n      timezone\n    }) : newDate;\n    if (closestEnabledDate) {\n      setValueAndGoToNextView(closestEnabledDate, 'finish');\n      onYearChange == null || onYearChange(closestEnabledDate);\n    } else {\n      goToNextView();\n      changeMonth(startOfYear);\n    }\n    changeFocusedDay(closestEnabledDate, true);\n  });\n  const handleSelectedDayChange = useEventCallback(day => {\n    if (day) {\n      // If there is a date already selected, then we want to keep its time\n      return handleValueChange(mergeDateAndTime(utils, day, value != null ? value : referenceDate), 'finish', view);\n    }\n    return handleValueChange(day, 'finish', view);\n  });\n  React.useEffect(() => {\n    if (value != null && utils.isValid(value)) {\n      changeMonth(value);\n    }\n  }, [value]); // eslint-disable-line\n\n  const ownerState = props;\n  const classes = useUtilityClasses(ownerState);\n  const baseDateValidationProps = {\n    disablePast,\n    disableFuture,\n    maxDate,\n    minDate\n  };\n  const commonViewProps = {\n    disableHighlightToday,\n    readOnly,\n    disabled,\n    timezone,\n    gridLabelId\n  };\n  const prevOpenViewRef = React.useRef(view);\n  React.useEffect(() => {\n    // If the view change and the focus was on the previous view\n    // Then we update the focus.\n    if (prevOpenViewRef.current === view) {\n      return;\n    }\n    if (focusedView === prevOpenViewRef.current) {\n      setFocusedView(view, true);\n    }\n    prevOpenViewRef.current = view;\n  }, [focusedView, setFocusedView, view]);\n  const selectedDays = React.useMemo(() => [value], [value]);\n  return /*#__PURE__*/_jsxs(DateCalendarRoot, _extends({\n    ref: ref,\n    className: clsx(classes.root, className),\n    ownerState: ownerState\n  }, other, {\n    children: [/*#__PURE__*/_jsx(CalendarHeader, _extends({}, calendarHeaderProps)), /*#__PURE__*/_jsx(DateCalendarViewTransitionContainer, {\n      reduceAnimations: reduceAnimations,\n      className: classes.viewTransitionContainer,\n      transKey: view,\n      ownerState: ownerState,\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        children: [view === 'year' && /*#__PURE__*/_jsx(YearCalendar, _extends({}, baseDateValidationProps, commonViewProps, {\n          value: value,\n          onChange: handleDateYearChange,\n          shouldDisableYear: shouldDisableYear,\n          hasFocus: hasFocus,\n          onFocusedViewChange: isViewFocused => setFocusedView('year', isViewFocused),\n          yearsPerRow: yearsPerRow,\n          referenceDate: referenceDate\n        })), view === 'month' && /*#__PURE__*/_jsx(MonthCalendar, _extends({}, baseDateValidationProps, commonViewProps, {\n          hasFocus: hasFocus,\n          className: className,\n          value: value,\n          onChange: handleDateMonthChange,\n          shouldDisableMonth: shouldDisableMonth,\n          onFocusedViewChange: isViewFocused => setFocusedView('month', isViewFocused),\n          monthsPerRow: monthsPerRow,\n          referenceDate: referenceDate\n        })), view === 'day' && /*#__PURE__*/_jsx(DayCalendar, _extends({}, calendarState, baseDateValidationProps, commonViewProps, {\n          onMonthSwitchingAnimationEnd: onMonthSwitchingAnimationEnd,\n          onFocusedDayChange: changeFocusedDay,\n          reduceAnimations: reduceAnimations,\n          selectedDays: selectedDays,\n          onSelectedDaysChange: handleSelectedDayChange,\n          shouldDisableDate: shouldDisableDate,\n          shouldDisableMonth: shouldDisableMonth,\n          shouldDisableYear: shouldDisableYear,\n          hasFocus: hasFocus,\n          onFocusedViewChange: isViewFocused => setFocusedView('day', isViewFocused),\n          showDaysOutsideCurrentMonth: showDaysOutsideCurrentMonth,\n          fixedWeekNumber: fixedWeekNumber,\n          dayOfWeekFormatter: dayOfWeekFormatter,\n          displayWeekNumber: displayWeekNumber,\n          components: components,\n          componentsProps: componentsProps,\n          slots: slots,\n          slotProps: slotProps,\n          loading: loading,\n          renderLoading: renderLoading\n        }))]\n      })\n    })]\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? DateCalendar.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // | To update them edit the TypeScript types and run \"yarn proptypes\"  |\n  // ----------------------------------------------------------------------\n  /**\n   * If `true`, the main element is focused during the first mount.\n   * This main element is:\n   * - the element chosen by the visible view if any (i.e: the selected day on the `day` view).\n   * - the `input` element if there is a field rendered.\n   */\n  autoFocus: PropTypes.bool,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  className: PropTypes.string,\n  /**\n   * Overridable components.\n   * @default {}\n   * @deprecated Please use `slots`.\n   */\n  components: PropTypes.object,\n  /**\n   * The props used for each component slot.\n   * @default {}\n   * @deprecated Please use `slotProps`.\n   */\n  componentsProps: PropTypes.object,\n  /**\n   * Formats the day of week displayed in the calendar header.\n   * @param {string} day The day of week provided by the adapter.  Deprecated, will be removed in v7: Use `date` instead.\n   * @param {TDate} date The date of the day of week provided by the adapter.\n   * @returns {string} The name to display.\n   * @default (_day: string, date: TDate) => adapter.format(date, 'weekdayShort').charAt(0).toUpperCase()\n   */\n  dayOfWeekFormatter: PropTypes.func,\n  /**\n   * Default calendar month displayed when `value` and `defaultValue` are empty.\n   * @deprecated Consider using `referenceDate` instead.\n   */\n  defaultCalendarMonth: PropTypes.any,\n  /**\n   * The default selected value.\n   * Used when the component is not controlled.\n   */\n  defaultValue: PropTypes.any,\n  /**\n   * If `true`, the picker and text field are disabled.\n   * @default false\n   */\n  disabled: PropTypes.bool,\n  /**\n   * If `true`, disable values after the current date for date components, time for time components and both for date time components.\n   * @default false\n   */\n  disableFuture: PropTypes.bool,\n  /**\n   * If `true`, today's date is rendering without highlighting with circle.\n   * @default false\n   */\n  disableHighlightToday: PropTypes.bool,\n  /**\n   * If `true`, disable values before the current date for date components, time for time components and both for date time components.\n   * @default false\n   */\n  disablePast: PropTypes.bool,\n  /**\n   * If `true`, the week number will be display in the calendar.\n   */\n  displayWeekNumber: PropTypes.bool,\n  /**\n   * Calendar will show more weeks in order to match this value.\n   * Put it to 6 for having fix number of week in Gregorian calendars\n   * @default undefined\n   */\n  fixedWeekNumber: PropTypes.number,\n  /**\n   * Controlled focused view.\n   */\n  focusedView: PropTypes.oneOf(['day', 'month', 'year']),\n  /**\n   * If `true`, calls `renderLoading` instead of rendering the day calendar.\n   * Can be used to preload information and show it in calendar.\n   * @default false\n   */\n  loading: PropTypes.bool,\n  /**\n   * Maximal selectable date.\n   */\n  maxDate: PropTypes.any,\n  /**\n   * Minimal selectable date.\n   */\n  minDate: PropTypes.any,\n  /**\n   * Months rendered per row.\n   * @default 3\n   */\n  monthsPerRow: PropTypes.oneOf([3, 4]),\n  /**\n   * Callback fired when the value changes.\n   * @template TValue The value type. Will be either the same type as `value` or `null`. Can be in `[start, end]` format in case of range value.\n   * @template TView The view type. Will be one of date or time views.\n   * @param {TValue} value The new value.\n   * @param {PickerSelectionState | undefined} selectionState Indicates if the date selection is complete.\n   * @param {TView | undefined} selectedView Indicates the view in which the selection has been made.\n   */\n  onChange: PropTypes.func,\n  /**\n   * Callback fired on focused view change.\n   * @template TView\n   * @param {TView} view The new view to focus or not.\n   * @param {boolean} hasFocus `true` if the view should be focused.\n   */\n  onFocusedViewChange: PropTypes.func,\n  /**\n   * Callback fired on month change.\n   * @template TDate\n   * @param {TDate} month The new month.\n   */\n  onMonthChange: PropTypes.func,\n  /**\n   * Callback fired on view change.\n   * @template TView\n   * @param {TView} view The new view.\n   */\n  onViewChange: PropTypes.func,\n  /**\n   * Callback fired on year change.\n   * @template TDate\n   * @param {TDate} year The new year.\n   */\n  onYearChange: PropTypes.func,\n  /**\n   * The default visible view.\n   * Used when the component view is not controlled.\n   * Must be a valid option from `views` list.\n   */\n  openTo: PropTypes.oneOf(['day', 'month', 'year']),\n  /**\n   * Make picker read only.\n   * @default false\n   */\n  readOnly: PropTypes.bool,\n  /**\n   * If `true`, disable heavy animations.\n   * @default `@media(prefers-reduced-motion: reduce)` || `navigator.userAgent` matches Android <10 or iOS <13\n   */\n  reduceAnimations: PropTypes.bool,\n  /**\n   * The date used to generate the new value when both `value` and `defaultValue` are empty.\n   * @default The closest valid date using the validation props, except callbacks such as `shouldDisableDate`.\n   */\n  referenceDate: PropTypes.any,\n  /**\n   * Component displaying when passed `loading` true.\n   * @returns {React.ReactNode} The node to render when loading.\n   * @default () => <span data-mui-test=\"loading-progress\">...</span>\n   */\n  renderLoading: PropTypes.func,\n  /**\n   * Disable specific date.\n   *\n   * Warning: This function can be called multiple times (e.g. when rendering date calendar, checking if focus can be moved to a certain date, etc.). Expensive computations can impact performance.\n   *\n   * @template TDate\n   * @param {TDate} day The date to test.\n   * @returns {boolean} If `true` the date will be disabled.\n   */\n  shouldDisableDate: PropTypes.func,\n  /**\n   * Disable specific month.\n   * @template TDate\n   * @param {TDate} month The month to test.\n   * @returns {boolean} If `true`, the month will be disabled.\n   */\n  shouldDisableMonth: PropTypes.func,\n  /**\n   * Disable specific year.\n   * @template TDate\n   * @param {TDate} year The year to test.\n   * @returns {boolean} If `true`, the year will be disabled.\n   */\n  shouldDisableYear: PropTypes.func,\n  /**\n   * If `true`, days outside the current month are rendered:\n   *\n   * - if `fixedWeekNumber` is defined, renders days to have the weeks requested.\n   *\n   * - if `fixedWeekNumber` is not defined, renders day to fill the first and last week of the current month.\n   *\n   * - ignored if `calendars` equals more than `1` on range pickers.\n   * @default false\n   */\n  showDaysOutsideCurrentMonth: PropTypes.bool,\n  /**\n   * The props used for each component slot.\n   * @default {}\n   */\n  slotProps: PropTypes.object,\n  /**\n   * Overridable component slots.\n   * @default {}\n   */\n  slots: PropTypes.object,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  /**\n   * Choose which timezone to use for the value.\n   * Example: \"default\", \"system\", \"UTC\", \"America/New_York\".\n   * If you pass values from other timezones to some props, they will be converted to this timezone before being used.\n   * @see See the {@link https://mui.com/x/react-date-pickers/timezone/ timezones documention} for more details.\n   * @default The timezone of the `value` or `defaultValue` prop is defined, 'default' otherwise.\n   */\n  timezone: PropTypes.string,\n  /**\n   * The selected value.\n   * Used when the component is controlled.\n   */\n  value: PropTypes.any,\n  /**\n   * The visible view.\n   * Used when the component view is controlled.\n   * Must be a valid option from `views` list.\n   */\n  view: PropTypes.oneOf(['day', 'month', 'year']),\n  /**\n   * Available views.\n   */\n  views: PropTypes.arrayOf(PropTypes.oneOf(['day', 'month', 'year']).isRequired),\n  /**\n   * Years rendered per row.\n   * @default 3\n   */\n  yearsPerRow: PropTypes.oneOf([3, 4])\n} : void 0;","import * as React from 'react';\nimport { DateCalendar } from '../DateCalendar';\nimport { isDatePickerView } from '../internals/utils/date-utils';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const renderDateViewCalendar = ({\n  view,\n  onViewChange,\n  views,\n  focusedView,\n  onFocusedViewChange,\n  value,\n  defaultValue,\n  referenceDate,\n  onChange,\n  className,\n  classes,\n  disableFuture,\n  disablePast,\n  minDate,\n  maxDate,\n  shouldDisableDate,\n  shouldDisableMonth,\n  shouldDisableYear,\n  reduceAnimations,\n  onMonthChange,\n  monthsPerRow,\n  onYearChange,\n  yearsPerRow,\n  defaultCalendarMonth,\n  components,\n  componentsProps,\n  slots,\n  slotProps,\n  loading,\n  renderLoading,\n  disableHighlightToday,\n  readOnly,\n  disabled,\n  showDaysOutsideCurrentMonth,\n  dayOfWeekFormatter,\n  sx,\n  autoFocus,\n  fixedWeekNumber,\n  displayWeekNumber,\n  timezone\n}) => /*#__PURE__*/_jsx(DateCalendar, {\n  view: view,\n  onViewChange: onViewChange,\n  views: views.filter(isDatePickerView),\n  focusedView: focusedView && isDatePickerView(focusedView) ? focusedView : null,\n  onFocusedViewChange: onFocusedViewChange,\n  value: value,\n  defaultValue: defaultValue,\n  referenceDate: referenceDate,\n  onChange: onChange,\n  className: className,\n  classes: classes,\n  disableFuture: disableFuture,\n  disablePast: disablePast,\n  minDate: minDate,\n  maxDate: maxDate,\n  shouldDisableDate: shouldDisableDate,\n  shouldDisableMonth: shouldDisableMonth,\n  shouldDisableYear: shouldDisableYear,\n  reduceAnimations: reduceAnimations,\n  onMonthChange: onMonthChange,\n  monthsPerRow: monthsPerRow,\n  onYearChange: onYearChange,\n  yearsPerRow: yearsPerRow,\n  defaultCalendarMonth: defaultCalendarMonth,\n  components: components,\n  componentsProps: componentsProps,\n  slots: slots,\n  slotProps: slotProps,\n  loading: loading,\n  renderLoading: renderLoading,\n  disableHighlightToday: disableHighlightToday,\n  readOnly: readOnly,\n  disabled: disabled,\n  showDaysOutsideCurrentMonth: showDaysOutsideCurrentMonth,\n  dayOfWeekFormatter: dayOfWeekFormatter,\n  sx: sx,\n  autoFocus: autoFocus,\n  fixedWeekNumber: fixedWeekNumber,\n  displayWeekNumber: displayWeekNumber,\n  timezone: timezone\n});","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { resolveComponentProps } from '@mui/base/utils';\nimport { refType } from '@mui/utils';\nimport { singleItemValueManager } from '../internals/utils/valueManagers';\nimport { useDatePickerDefaultizedProps } from '../DatePicker/shared';\nimport { useLocaleText, useUtils, validateDate } from '../internals';\nimport { useDesktopPicker } from '../internals/hooks/useDesktopPicker';\nimport { CalendarIcon } from '../icons';\nimport { DateField } from '../DateField';\nimport { extractValidationProps } from '../internals/utils/validation/extractValidationProps';\nimport { renderDateViewCalendar } from '../dateViewRenderers';\nimport { resolveDateFormat } from '../internals/utils/date-utils';\n/**\n * Demos:\n *\n * - [DatePicker](https://mui.com/x/react-date-pickers/date-picker/)\n * - [Validation](https://mui.com/x/react-date-pickers/validation/)\n *\n * API:\n *\n * - [DesktopDatePicker API](https://mui.com/x/api/date-pickers/desktop-date-picker/)\n */\nconst DesktopDatePicker = /*#__PURE__*/React.forwardRef(function DesktopDatePicker(inProps, ref) {\n  var _defaultizedProps$yea, _defaultizedProps$slo2, _props$localeText$ope, _props$localeText;\n  const localeText = useLocaleText();\n  const utils = useUtils();\n\n  // Props with the default values common to all date pickers\n  const defaultizedProps = useDatePickerDefaultizedProps(inProps, 'MuiDesktopDatePicker');\n  const viewRenderers = _extends({\n    day: renderDateViewCalendar,\n    month: renderDateViewCalendar,\n    year: renderDateViewCalendar\n  }, defaultizedProps.viewRenderers);\n\n  // Props with the default values specific to the desktop variant\n  const props = _extends({}, defaultizedProps, {\n    viewRenderers,\n    format: resolveDateFormat(utils, defaultizedProps, false),\n    yearsPerRow: (_defaultizedProps$yea = defaultizedProps.yearsPerRow) != null ? _defaultizedProps$yea : 4,\n    slots: _extends({\n      openPickerIcon: CalendarIcon,\n      field: DateField\n    }, defaultizedProps.slots),\n    slotProps: _extends({}, defaultizedProps.slotProps, {\n      field: ownerState => {\n        var _defaultizedProps$slo;\n        return _extends({}, resolveComponentProps((_defaultizedProps$slo = defaultizedProps.slotProps) == null ? void 0 : _defaultizedProps$slo.field, ownerState), extractValidationProps(defaultizedProps), {\n          ref\n        });\n      },\n      toolbar: _extends({\n        hidden: true\n      }, (_defaultizedProps$slo2 = defaultizedProps.slotProps) == null ? void 0 : _defaultizedProps$slo2.toolbar)\n    })\n  });\n  const {\n    renderPicker\n  } = useDesktopPicker({\n    props,\n    valueManager: singleItemValueManager,\n    valueType: 'date',\n    getOpenDialogAriaText: (_props$localeText$ope = (_props$localeText = props.localeText) == null ? void 0 : _props$localeText.openDatePickerDialogue) != null ? _props$localeText$ope : localeText.openDatePickerDialogue,\n    validator: validateDate\n  });\n  return renderPicker();\n});\nDesktopDatePicker.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // | To update them edit the TypeScript types and run \"yarn proptypes\"  |\n  // ----------------------------------------------------------------------\n  /**\n   * If `true`, the main element is focused during the first mount.\n   * This main element is:\n   * - the element chosen by the visible view if any (i.e: the selected day on the `day` view).\n   * - the `input` element if there is a field rendered.\n   */\n  autoFocus: PropTypes.bool,\n  /**\n   * Class name applied to the root element.\n   */\n  className: PropTypes.string,\n  /**\n   * If `true`, the popover or modal will close after submitting the full date.\n   * @default `true` for desktop, `false` for mobile (based on the chosen wrapper and `desktopModeMediaQuery` prop).\n   */\n  closeOnSelect: PropTypes.bool,\n  /**\n   * Overridable components.\n   * @default {}\n   * @deprecated Please use `slots`.\n   */\n  components: PropTypes.object,\n  /**\n   * The props used for each component slot.\n   * @default {}\n   * @deprecated Please use `slotProps`.\n   */\n  componentsProps: PropTypes.object,\n  /**\n   * Formats the day of week displayed in the calendar header.\n   * @param {string} day The day of week provided by the adapter.  Deprecated, will be removed in v7: Use `date` instead.\n   * @param {TDate} date The date of the day of week provided by the adapter.\n   * @returns {string} The name to display.\n   * @default (_day: string, date: TDate) => adapter.format(date, 'weekdayShort').charAt(0).toUpperCase()\n   */\n  dayOfWeekFormatter: PropTypes.func,\n  /**\n   * Default calendar month displayed when `value` and `defaultValue` are empty.\n   * @deprecated Consider using `referenceDate` instead.\n   */\n  defaultCalendarMonth: PropTypes.any,\n  /**\n   * The default value.\n   * Used when the component is not controlled.\n   */\n  defaultValue: PropTypes.any,\n  /**\n   * If `true`, the picker and text field are disabled.\n   * @default false\n   */\n  disabled: PropTypes.bool,\n  /**\n   * If `true`, disable values after the current date for date components, time for time components and both for date time components.\n   * @default false\n   */\n  disableFuture: PropTypes.bool,\n  /**\n   * If `true`, today's date is rendering without highlighting with circle.\n   * @default false\n   */\n  disableHighlightToday: PropTypes.bool,\n  /**\n   * If `true`, the open picker button will not be rendered (renders only the field).\n   * @default false\n   */\n  disableOpenPicker: PropTypes.bool,\n  /**\n   * If `true`, disable values before the current date for date components, time for time components and both for date time components.\n   * @default false\n   */\n  disablePast: PropTypes.bool,\n  /**\n   * If `true`, the week number will be display in the calendar.\n   */\n  displayWeekNumber: PropTypes.bool,\n  /**\n   * Calendar will show more weeks in order to match this value.\n   * Put it to 6 for having fix number of week in Gregorian calendars\n   * @default undefined\n   */\n  fixedWeekNumber: PropTypes.number,\n  /**\n   * Format of the date when rendered in the input(s).\n   * Defaults to localized format based on the used `views`.\n   */\n  format: PropTypes.string,\n  /**\n   * Density of the format when rendered in the input.\n   * Setting `formatDensity` to `\"spacious\"` will add a space before and after each `/`, `-` and `.` character.\n   * @default \"dense\"\n   */\n  formatDensity: PropTypes.oneOf(['dense', 'spacious']),\n  /**\n   * Pass a ref to the `input` element.\n   */\n  inputRef: refType,\n  /**\n   * The label content.\n   */\n  label: PropTypes.node,\n  /**\n   * If `true`, calls `renderLoading` instead of rendering the day calendar.\n   * Can be used to preload information and show it in calendar.\n   * @default false\n   */\n  loading: PropTypes.bool,\n  /**\n   * Locale for components texts.\n   * Allows overriding texts coming from `LocalizationProvider` and `theme`.\n   */\n  localeText: PropTypes.object,\n  /**\n   * Maximal selectable date.\n   */\n  maxDate: PropTypes.any,\n  /**\n   * Minimal selectable date.\n   */\n  minDate: PropTypes.any,\n  /**\n   * Months rendered per row.\n   * @default 3\n   */\n  monthsPerRow: PropTypes.oneOf([3, 4]),\n  /**\n   * Name attribute used by the `input` element in the Field.\n   */\n  name: PropTypes.string,\n  /**\n   * Callback fired when the value is accepted.\n   * @template TValue The value type. Will be either the same type as `value` or `null`. Can be in `[start, end]` format in case of range value.\n   * @param {TValue} value The value that was just accepted.\n   */\n  onAccept: PropTypes.func,\n  /**\n   * Callback fired when the value changes.\n   * @template TValue The value type. Will be either the same type as `value` or `null`. Can be in `[start, end]` format in case of range value.\n   * @template TError The validation error type. Will be either `string` or a `null`. Can be in `[start, end]` format in case of range value.\n   * @param {TValue} value The new value.\n   * @param {FieldChangeHandlerContext<TError>} context The context containing the validation result of the current value.\n   */\n  onChange: PropTypes.func,\n  /**\n   * Callback fired when the popup requests to be closed.\n   * Use in controlled mode (see `open`).\n   */\n  onClose: PropTypes.func,\n  /**\n   * Callback fired when the error associated to the current value changes.\n   * If the error has a non-null value, then the `TextField` will be rendered in `error` state.\n   *\n   * @template TValue The value type. Will be either the same type as `value` or `null`. Can be in `[start, end]` format in case of range value.\n   * @template TError The validation error type. Will be either `string` or a `null`. Can be in `[start, end]` format in case of range value.\n   * @param {TError} error The new error describing why the current value is not valid.\n   * @param {TValue} value The value associated to the error.\n   */\n  onError: PropTypes.func,\n  /**\n   * Callback fired on month change.\n   * @template TDate\n   * @param {TDate} month The new month.\n   */\n  onMonthChange: PropTypes.func,\n  /**\n   * Callback fired when the popup requests to be opened.\n   * Use in controlled mode (see `open`).\n   */\n  onOpen: PropTypes.func,\n  /**\n   * Callback fired when the selected sections change.\n   * @param {FieldSelectedSections} newValue The new selected sections.\n   */\n  onSelectedSectionsChange: PropTypes.func,\n  /**\n   * Callback fired on view change.\n   * @template TView\n   * @param {TView} view The new view.\n   */\n  onViewChange: PropTypes.func,\n  /**\n   * Callback fired on year change.\n   * @template TDate\n   * @param {TDate} year The new year.\n   */\n  onYearChange: PropTypes.func,\n  /**\n   * Control the popup or dialog open state.\n   * @default false\n   */\n  open: PropTypes.bool,\n  /**\n   * The default visible view.\n   * Used when the component view is not controlled.\n   * Must be a valid option from `views` list.\n   */\n  openTo: PropTypes.oneOf(['day', 'month', 'year']),\n  /**\n   * Force rendering in particular orientation.\n   */\n  orientation: PropTypes.oneOf(['landscape', 'portrait']),\n  readOnly: PropTypes.bool,\n  /**\n   * If `true`, disable heavy animations.\n   * @default `@media(prefers-reduced-motion: reduce)` || `navigator.userAgent` matches Android <10 or iOS <13\n   */\n  reduceAnimations: PropTypes.bool,\n  /**\n   * The date used to generate the new value when both `value` and `defaultValue` are empty.\n   * @default The closest valid date-time using the validation props, except callbacks like `shouldDisable<...>`.\n   */\n  referenceDate: PropTypes.any,\n  /**\n   * Component displaying when passed `loading` true.\n   * @returns {React.ReactNode} The node to render when loading.\n   * @default () => <span data-mui-test=\"loading-progress\">...</span>\n   */\n  renderLoading: PropTypes.func,\n  /**\n   * The currently selected sections.\n   * This prop accept four formats:\n   * 1. If a number is provided, the section at this index will be selected.\n   * 2. If an object with a `startIndex` and `endIndex` properties are provided, the sections between those two indexes will be selected.\n   * 3. If a string of type `FieldSectionType` is provided, the first section with that name will be selected.\n   * 4. If `null` is provided, no section will be selected\n   * If not provided, the selected sections will be handled internally.\n   */\n  selectedSections: PropTypes.oneOfType([PropTypes.oneOf(['all', 'day', 'hours', 'meridiem', 'minutes', 'month', 'seconds', 'weekDay', 'year']), PropTypes.number, PropTypes.shape({\n    endIndex: PropTypes.number.isRequired,\n    startIndex: PropTypes.number.isRequired\n  })]),\n  /**\n   * Disable specific date.\n   *\n   * Warning: This function can be called multiple times (e.g. when rendering date calendar, checking if focus can be moved to a certain date, etc.). Expensive computations can impact performance.\n   *\n   * @template TDate\n   * @param {TDate} day The date to test.\n   * @returns {boolean} If `true` the date will be disabled.\n   */\n  shouldDisableDate: PropTypes.func,\n  /**\n   * Disable specific month.\n   * @template TDate\n   * @param {TDate} month The month to test.\n   * @returns {boolean} If `true`, the month will be disabled.\n   */\n  shouldDisableMonth: PropTypes.func,\n  /**\n   * Disable specific year.\n   * @template TDate\n   * @param {TDate} year The year to test.\n   * @returns {boolean} If `true`, the year will be disabled.\n   */\n  shouldDisableYear: PropTypes.func,\n  /**\n   * If `true`, days outside the current month are rendered:\n   *\n   * - if `fixedWeekNumber` is defined, renders days to have the weeks requested.\n   *\n   * - if `fixedWeekNumber` is not defined, renders day to fill the first and last week of the current month.\n   *\n   * - ignored if `calendars` equals more than `1` on range pickers.\n   * @default false\n   */\n  showDaysOutsideCurrentMonth: PropTypes.bool,\n  /**\n   * The props used for each component slot.\n   * @default {}\n   */\n  slotProps: PropTypes.object,\n  /**\n   * Overridable component slots.\n   * @default {}\n   */\n  slots: PropTypes.object,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  /**\n   * Choose which timezone to use for the value.\n   * Example: \"default\", \"system\", \"UTC\", \"America/New_York\".\n   * If you pass values from other timezones to some props, they will be converted to this timezone before being used.\n   * @see See the {@link https://mui.com/x/react-date-pickers/timezone/ timezones documention} for more details.\n   * @default The timezone of the `value` or `defaultValue` prop is defined, 'default' otherwise.\n   */\n  timezone: PropTypes.string,\n  /**\n   * The selected value.\n   * Used when the component is controlled.\n   */\n  value: PropTypes.any,\n  /**\n   * The visible view.\n   * Used when the component view is controlled.\n   * Must be a valid option from `views` list.\n   */\n  view: PropTypes.oneOf(['day', 'month', 'year']),\n  /**\n   * Define custom view renderers for each section.\n   * If `null`, the section will only have field editing.\n   * If `undefined`, internally defined view will be the used.\n   */\n  viewRenderers: PropTypes.shape({\n    day: PropTypes.func,\n    month: PropTypes.func,\n    year: PropTypes.func\n  }),\n  /**\n   * Available views.\n   */\n  views: PropTypes.arrayOf(PropTypes.oneOf(['day', 'month', 'year']).isRequired),\n  /**\n   * Years rendered per row.\n   * @default 4\n   */\n  yearsPerRow: PropTypes.oneOf([3, 4])\n};\nexport { DesktopDatePicker };","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"props\", \"getOpenDialogAriaText\"];\nimport * as React from 'react';\nimport { useSlotProps } from '@mui/base/utils';\nimport useForkRef from '@mui/utils/useForkRef';\nimport useId from '@mui/utils/useId';\nimport { PickersModalDialog } from '../../components/PickersModalDialog';\nimport { usePicker } from '../usePicker';\nimport { onSpaceOrEnter } from '../../utils/utils';\nimport { useUtils } from '../useUtils';\nimport { LocalizationProvider } from '../../../LocalizationProvider';\nimport { PickersLayout } from '../../../PickersLayout';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n/**\n * Hook managing all the single-date mobile pickers:\n * - MobileDatePicker\n * - MobileDateTimePicker\n * - MobileTimePicker\n */\nexport const useMobilePicker = _ref => {\n  var _innerSlotProps$toolb, _innerSlotProps$toolb2, _slots$layout;\n  let {\n      props,\n      getOpenDialogAriaText\n    } = _ref,\n    pickerParams = _objectWithoutPropertiesLoose(_ref, _excluded);\n  const {\n    slots,\n    slotProps: innerSlotProps,\n    className,\n    sx,\n    format,\n    formatDensity,\n    timezone,\n    name,\n    label,\n    inputRef,\n    readOnly,\n    disabled,\n    localeText\n  } = props;\n  const utils = useUtils();\n  const internalInputRef = React.useRef(null);\n  const labelId = useId();\n  const isToolbarHidden = (_innerSlotProps$toolb = innerSlotProps == null || (_innerSlotProps$toolb2 = innerSlotProps.toolbar) == null ? void 0 : _innerSlotProps$toolb2.hidden) != null ? _innerSlotProps$toolb : false;\n  const {\n    open,\n    actions,\n    layoutProps,\n    renderCurrentView,\n    fieldProps: pickerFieldProps\n  } = usePicker(_extends({}, pickerParams, {\n    props,\n    inputRef: internalInputRef,\n    autoFocusView: true,\n    additionalViewProps: {},\n    wrapperVariant: 'mobile'\n  }));\n  const Field = slots.field;\n  const fieldProps = useSlotProps({\n    elementType: Field,\n    externalSlotProps: innerSlotProps == null ? void 0 : innerSlotProps.field,\n    additionalProps: _extends({}, pickerFieldProps, isToolbarHidden && {\n      id: labelId\n    }, !(disabled || readOnly) && {\n      onClick: actions.onOpen,\n      onKeyDown: onSpaceOrEnter(actions.onOpen)\n    }, {\n      readOnly: readOnly != null ? readOnly : true,\n      disabled,\n      className,\n      sx,\n      format,\n      formatDensity,\n      timezone,\n      label,\n      name\n    }),\n    ownerState: props\n  });\n\n  // TODO: Move to `useSlotProps` when https://github.com/mui/material-ui/pull/35088 will be merged\n  fieldProps.inputProps = _extends({}, fieldProps.inputProps, {\n    'aria-label': getOpenDialogAriaText(pickerFieldProps.value, utils)\n  });\n  const slotsForField = _extends({\n    textField: slots.textField\n  }, fieldProps.slots);\n  const Layout = (_slots$layout = slots.layout) != null ? _slots$layout : PickersLayout;\n  const handleInputRef = useForkRef(internalInputRef, fieldProps.inputRef, inputRef);\n  let labelledById = labelId;\n  if (isToolbarHidden) {\n    if (label) {\n      labelledById = `${labelId}-label`;\n    } else {\n      labelledById = undefined;\n    }\n  }\n  const slotProps = _extends({}, innerSlotProps, {\n    toolbar: _extends({}, innerSlotProps == null ? void 0 : innerSlotProps.toolbar, {\n      titleId: labelId\n    }),\n    mobilePaper: _extends({\n      'aria-labelledby': labelledById\n    }, innerSlotProps == null ? void 0 : innerSlotProps.mobilePaper)\n  });\n  const renderPicker = () => /*#__PURE__*/_jsxs(LocalizationProvider, {\n    localeText: localeText,\n    children: [/*#__PURE__*/_jsx(Field, _extends({}, fieldProps, {\n      slots: slotsForField,\n      slotProps: slotProps,\n      inputRef: handleInputRef\n    })), /*#__PURE__*/_jsx(PickersModalDialog, _extends({}, actions, {\n      open: open,\n      slots: slots,\n      slotProps: slotProps,\n      children: /*#__PURE__*/_jsx(Layout, _extends({}, layoutProps, slotProps == null ? void 0 : slotProps.layout, {\n        slots: slots,\n        slotProps: slotProps,\n        children: renderCurrentView()\n      }))\n    }))]\n  });\n  return {\n    renderPicker\n  };\n};","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { resolveComponentProps } from '@mui/base/utils';\nimport { refType } from '@mui/utils';\nimport { useMobilePicker } from '../internals/hooks/useMobilePicker';\nimport { useDatePickerDefaultizedProps } from '../DatePicker/shared';\nimport { useLocaleText, useUtils, validateDate } from '../internals';\nimport { DateField } from '../DateField';\nimport { extractValidationProps } from '../internals/utils/validation/extractValidationProps';\nimport { singleItemValueManager } from '../internals/utils/valueManagers';\nimport { renderDateViewCalendar } from '../dateViewRenderers';\nimport { resolveDateFormat } from '../internals/utils/date-utils';\n/**\n * Demos:\n *\n * - [DatePicker](https://mui.com/x/react-date-pickers/date-picker/)\n * - [Validation](https://mui.com/x/react-date-pickers/validation/)\n *\n * API:\n *\n * - [MobileDatePicker API](https://mui.com/x/api/date-pickers/mobile-date-picker/)\n */\nconst MobileDatePicker = /*#__PURE__*/React.forwardRef(function MobileDatePicker(inProps, ref) {\n  var _defaultizedProps$slo2, _props$localeText$ope, _props$localeText;\n  const localeText = useLocaleText();\n  const utils = useUtils();\n\n  // Props with the default values common to all date pickers\n  const defaultizedProps = useDatePickerDefaultizedProps(inProps, 'MuiMobileDatePicker');\n  const viewRenderers = _extends({\n    day: renderDateViewCalendar,\n    month: renderDateViewCalendar,\n    year: renderDateViewCalendar\n  }, defaultizedProps.viewRenderers);\n\n  // Props with the default values specific to the mobile variant\n  const props = _extends({}, defaultizedProps, {\n    viewRenderers,\n    format: resolveDateFormat(utils, defaultizedProps, false),\n    slots: _extends({\n      field: DateField\n    }, defaultizedProps.slots),\n    slotProps: _extends({}, defaultizedProps.slotProps, {\n      field: ownerState => {\n        var _defaultizedProps$slo;\n        return _extends({}, resolveComponentProps((_defaultizedProps$slo = defaultizedProps.slotProps) == null ? void 0 : _defaultizedProps$slo.field, ownerState), extractValidationProps(defaultizedProps), {\n          ref\n        });\n      },\n      toolbar: _extends({\n        hidden: false\n      }, (_defaultizedProps$slo2 = defaultizedProps.slotProps) == null ? void 0 : _defaultizedProps$slo2.toolbar)\n    })\n  });\n  const {\n    renderPicker\n  } = useMobilePicker({\n    props,\n    valueManager: singleItemValueManager,\n    valueType: 'date',\n    getOpenDialogAriaText: (_props$localeText$ope = (_props$localeText = props.localeText) == null ? void 0 : _props$localeText.openDatePickerDialogue) != null ? _props$localeText$ope : localeText.openDatePickerDialogue,\n    validator: validateDate\n  });\n  return renderPicker();\n});\nMobileDatePicker.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // | To update them edit the TypeScript types and run \"yarn proptypes\"  |\n  // ----------------------------------------------------------------------\n  /**\n   * If `true`, the main element is focused during the first mount.\n   * This main element is:\n   * - the element chosen by the visible view if any (i.e: the selected day on the `day` view).\n   * - the `input` element if there is a field rendered.\n   */\n  autoFocus: PropTypes.bool,\n  /**\n   * Class name applied to the root element.\n   */\n  className: PropTypes.string,\n  /**\n   * If `true`, the popover or modal will close after submitting the full date.\n   * @default `true` for desktop, `false` for mobile (based on the chosen wrapper and `desktopModeMediaQuery` prop).\n   */\n  closeOnSelect: PropTypes.bool,\n  /**\n   * Overridable components.\n   * @default {}\n   * @deprecated Please use `slots`.\n   */\n  components: PropTypes.object,\n  /**\n   * The props used for each component slot.\n   * @default {}\n   * @deprecated Please use `slotProps`.\n   */\n  componentsProps: PropTypes.object,\n  /**\n   * Formats the day of week displayed in the calendar header.\n   * @param {string} day The day of week provided by the adapter.  Deprecated, will be removed in v7: Use `date` instead.\n   * @param {TDate} date The date of the day of week provided by the adapter.\n   * @returns {string} The name to display.\n   * @default (_day: string, date: TDate) => adapter.format(date, 'weekdayShort').charAt(0).toUpperCase()\n   */\n  dayOfWeekFormatter: PropTypes.func,\n  /**\n   * Default calendar month displayed when `value` and `defaultValue` are empty.\n   * @deprecated Consider using `referenceDate` instead.\n   */\n  defaultCalendarMonth: PropTypes.any,\n  /**\n   * The default value.\n   * Used when the component is not controlled.\n   */\n  defaultValue: PropTypes.any,\n  /**\n   * If `true`, the picker and text field are disabled.\n   * @default false\n   */\n  disabled: PropTypes.bool,\n  /**\n   * If `true`, disable values after the current date for date components, time for time components and both for date time components.\n   * @default false\n   */\n  disableFuture: PropTypes.bool,\n  /**\n   * If `true`, today's date is rendering without highlighting with circle.\n   * @default false\n   */\n  disableHighlightToday: PropTypes.bool,\n  /**\n   * If `true`, the open picker button will not be rendered (renders only the field).\n   * @default false\n   */\n  disableOpenPicker: PropTypes.bool,\n  /**\n   * If `true`, disable values before the current date for date components, time for time components and both for date time components.\n   * @default false\n   */\n  disablePast: PropTypes.bool,\n  /**\n   * If `true`, the week number will be display in the calendar.\n   */\n  displayWeekNumber: PropTypes.bool,\n  /**\n   * Calendar will show more weeks in order to match this value.\n   * Put it to 6 for having fix number of week in Gregorian calendars\n   * @default undefined\n   */\n  fixedWeekNumber: PropTypes.number,\n  /**\n   * Format of the date when rendered in the input(s).\n   * Defaults to localized format based on the used `views`.\n   */\n  format: PropTypes.string,\n  /**\n   * Density of the format when rendered in the input.\n   * Setting `formatDensity` to `\"spacious\"` will add a space before and after each `/`, `-` and `.` character.\n   * @default \"dense\"\n   */\n  formatDensity: PropTypes.oneOf(['dense', 'spacious']),\n  /**\n   * Pass a ref to the `input` element.\n   */\n  inputRef: refType,\n  /**\n   * The label content.\n   */\n  label: PropTypes.node,\n  /**\n   * If `true`, calls `renderLoading` instead of rendering the day calendar.\n   * Can be used to preload information and show it in calendar.\n   * @default false\n   */\n  loading: PropTypes.bool,\n  /**\n   * Locale for components texts.\n   * Allows overriding texts coming from `LocalizationProvider` and `theme`.\n   */\n  localeText: PropTypes.object,\n  /**\n   * Maximal selectable date.\n   */\n  maxDate: PropTypes.any,\n  /**\n   * Minimal selectable date.\n   */\n  minDate: PropTypes.any,\n  /**\n   * Months rendered per row.\n   * @default 3\n   */\n  monthsPerRow: PropTypes.oneOf([3, 4]),\n  /**\n   * Name attribute used by the `input` element in the Field.\n   */\n  name: PropTypes.string,\n  /**\n   * Callback fired when the value is accepted.\n   * @template TValue The value type. Will be either the same type as `value` or `null`. Can be in `[start, end]` format in case of range value.\n   * @param {TValue} value The value that was just accepted.\n   */\n  onAccept: PropTypes.func,\n  /**\n   * Callback fired when the value changes.\n   * @template TValue The value type. Will be either the same type as `value` or `null`. Can be in `[start, end]` format in case of range value.\n   * @template TError The validation error type. Will be either `string` or a `null`. Can be in `[start, end]` format in case of range value.\n   * @param {TValue} value The new value.\n   * @param {FieldChangeHandlerContext<TError>} context The context containing the validation result of the current value.\n   */\n  onChange: PropTypes.func,\n  /**\n   * Callback fired when the popup requests to be closed.\n   * Use in controlled mode (see `open`).\n   */\n  onClose: PropTypes.func,\n  /**\n   * Callback fired when the error associated to the current value changes.\n   * If the error has a non-null value, then the `TextField` will be rendered in `error` state.\n   *\n   * @template TValue The value type. Will be either the same type as `value` or `null`. Can be in `[start, end]` format in case of range value.\n   * @template TError The validation error type. Will be either `string` or a `null`. Can be in `[start, end]` format in case of range value.\n   * @param {TError} error The new error describing why the current value is not valid.\n   * @param {TValue} value The value associated to the error.\n   */\n  onError: PropTypes.func,\n  /**\n   * Callback fired on month change.\n   * @template TDate\n   * @param {TDate} month The new month.\n   */\n  onMonthChange: PropTypes.func,\n  /**\n   * Callback fired when the popup requests to be opened.\n   * Use in controlled mode (see `open`).\n   */\n  onOpen: PropTypes.func,\n  /**\n   * Callback fired when the selected sections change.\n   * @param {FieldSelectedSections} newValue The new selected sections.\n   */\n  onSelectedSectionsChange: PropTypes.func,\n  /**\n   * Callback fired on view change.\n   * @template TView\n   * @param {TView} view The new view.\n   */\n  onViewChange: PropTypes.func,\n  /**\n   * Callback fired on year change.\n   * @template TDate\n   * @param {TDate} year The new year.\n   */\n  onYearChange: PropTypes.func,\n  /**\n   * Control the popup or dialog open state.\n   * @default false\n   */\n  open: PropTypes.bool,\n  /**\n   * The default visible view.\n   * Used when the component view is not controlled.\n   * Must be a valid option from `views` list.\n   */\n  openTo: PropTypes.oneOf(['day', 'month', 'year']),\n  /**\n   * Force rendering in particular orientation.\n   */\n  orientation: PropTypes.oneOf(['landscape', 'portrait']),\n  readOnly: PropTypes.bool,\n  /**\n   * If `true`, disable heavy animations.\n   * @default `@media(prefers-reduced-motion: reduce)` || `navigator.userAgent` matches Android <10 or iOS <13\n   */\n  reduceAnimations: PropTypes.bool,\n  /**\n   * The date used to generate the new value when both `value` and `defaultValue` are empty.\n   * @default The closest valid date-time using the validation props, except callbacks like `shouldDisable<...>`.\n   */\n  referenceDate: PropTypes.any,\n  /**\n   * Component displaying when passed `loading` true.\n   * @returns {React.ReactNode} The node to render when loading.\n   * @default () => <span data-mui-test=\"loading-progress\">...</span>\n   */\n  renderLoading: PropTypes.func,\n  /**\n   * The currently selected sections.\n   * This prop accept four formats:\n   * 1. If a number is provided, the section at this index will be selected.\n   * 2. If an object with a `startIndex` and `endIndex` properties are provided, the sections between those two indexes will be selected.\n   * 3. If a string of type `FieldSectionType` is provided, the first section with that name will be selected.\n   * 4. If `null` is provided, no section will be selected\n   * If not provided, the selected sections will be handled internally.\n   */\n  selectedSections: PropTypes.oneOfType([PropTypes.oneOf(['all', 'day', 'hours', 'meridiem', 'minutes', 'month', 'seconds', 'weekDay', 'year']), PropTypes.number, PropTypes.shape({\n    endIndex: PropTypes.number.isRequired,\n    startIndex: PropTypes.number.isRequired\n  })]),\n  /**\n   * Disable specific date.\n   *\n   * Warning: This function can be called multiple times (e.g. when rendering date calendar, checking if focus can be moved to a certain date, etc.). Expensive computations can impact performance.\n   *\n   * @template TDate\n   * @param {TDate} day The date to test.\n   * @returns {boolean} If `true` the date will be disabled.\n   */\n  shouldDisableDate: PropTypes.func,\n  /**\n   * Disable specific month.\n   * @template TDate\n   * @param {TDate} month The month to test.\n   * @returns {boolean} If `true`, the month will be disabled.\n   */\n  shouldDisableMonth: PropTypes.func,\n  /**\n   * Disable specific year.\n   * @template TDate\n   * @param {TDate} year The year to test.\n   * @returns {boolean} If `true`, the year will be disabled.\n   */\n  shouldDisableYear: PropTypes.func,\n  /**\n   * If `true`, days outside the current month are rendered:\n   *\n   * - if `fixedWeekNumber` is defined, renders days to have the weeks requested.\n   *\n   * - if `fixedWeekNumber` is not defined, renders day to fill the first and last week of the current month.\n   *\n   * - ignored if `calendars` equals more than `1` on range pickers.\n   * @default false\n   */\n  showDaysOutsideCurrentMonth: PropTypes.bool,\n  /**\n   * The props used for each component slot.\n   * @default {}\n   */\n  slotProps: PropTypes.object,\n  /**\n   * Overridable component slots.\n   * @default {}\n   */\n  slots: PropTypes.object,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  /**\n   * Choose which timezone to use for the value.\n   * Example: \"default\", \"system\", \"UTC\", \"America/New_York\".\n   * If you pass values from other timezones to some props, they will be converted to this timezone before being used.\n   * @see See the {@link https://mui.com/x/react-date-pickers/timezone/ timezones documention} for more details.\n   * @default The timezone of the `value` or `defaultValue` prop is defined, 'default' otherwise.\n   */\n  timezone: PropTypes.string,\n  /**\n   * The selected value.\n   * Used when the component is controlled.\n   */\n  value: PropTypes.any,\n  /**\n   * The visible view.\n   * Used when the component view is controlled.\n   * Must be a valid option from `views` list.\n   */\n  view: PropTypes.oneOf(['day', 'month', 'year']),\n  /**\n   * Define custom view renderers for each section.\n   * If `null`, the section will only have field editing.\n   * If `undefined`, internally defined view will be the used.\n   */\n  viewRenderers: PropTypes.shape({\n    day: PropTypes.func,\n    month: PropTypes.func,\n    year: PropTypes.func\n  }),\n  /**\n   * Available views.\n   */\n  views: PropTypes.arrayOf(PropTypes.oneOf(['day', 'month', 'year']).isRequired),\n  /**\n   * Years rendered per row.\n   * @default 3\n   */\n  yearsPerRow: PropTypes.oneOf([3, 4])\n};\nexport { MobileDatePicker };","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"desktopModeMediaQuery\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport useMediaQuery from '@mui/material/useMediaQuery';\nimport { useThemeProps } from '@mui/material/styles';\nimport { refType } from '@mui/utils';\nimport { DesktopDatePicker } from '../DesktopDatePicker';\nimport { MobileDatePicker } from '../MobileDatePicker';\nimport { DEFAULT_DESKTOP_MODE_MEDIA_QUERY } from '../internals/utils/utils';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n/**\n * Demos:\n *\n * - [DatePicker](https://mui.com/x/react-date-pickers/date-picker/)\n * - [Validation](https://mui.com/x/react-date-pickers/validation/)\n *\n * API:\n *\n * - [DatePicker API](https://mui.com/x/api/date-pickers/date-picker/)\n */\nconst DatePicker = /*#__PURE__*/React.forwardRef(function DatePicker(inProps, ref) {\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiDatePicker'\n  });\n  const {\n      desktopModeMediaQuery = DEFAULT_DESKTOP_MODE_MEDIA_QUERY\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  // defaults to `true` in environments where `window.matchMedia` would not be available (i.e. test/jsdom)\n  const isDesktop = useMediaQuery(desktopModeMediaQuery, {\n    defaultMatches: true\n  });\n  if (isDesktop) {\n    return /*#__PURE__*/_jsx(DesktopDatePicker, _extends({\n      ref: ref\n    }, other));\n  }\n  return /*#__PURE__*/_jsx(MobileDatePicker, _extends({\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? DatePicker.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // | To update them edit the TypeScript types and run \"yarn proptypes\"  |\n  // ----------------------------------------------------------------------\n  /**\n   * If `true`, the main element is focused during the first mount.\n   * This main element is:\n   * - the element chosen by the visible view if any (i.e: the selected day on the `day` view).\n   * - the `input` element if there is a field rendered.\n   */\n  autoFocus: PropTypes.bool,\n  /**\n   * Class name applied to the root element.\n   */\n  className: PropTypes.string,\n  /**\n   * If `true`, the popover or modal will close after submitting the full date.\n   * @default `true` for desktop, `false` for mobile (based on the chosen wrapper and `desktopModeMediaQuery` prop).\n   */\n  closeOnSelect: PropTypes.bool,\n  /**\n   * Overridable components.\n   * @default {}\n   * @deprecated Please use `slots`.\n   */\n  components: PropTypes.object,\n  /**\n   * The props used for each component slot.\n   * @default {}\n   * @deprecated Please use `slotProps`.\n   */\n  componentsProps: PropTypes.object,\n  /**\n   * Formats the day of week displayed in the calendar header.\n   * @param {string} day The day of week provided by the adapter.  Deprecated, will be removed in v7: Use `date` instead.\n   * @param {TDate} date The date of the day of week provided by the adapter.\n   * @returns {string} The name to display.\n   * @default (_day: string, date: TDate) => adapter.format(date, 'weekdayShort').charAt(0).toUpperCase()\n   */\n  dayOfWeekFormatter: PropTypes.func,\n  /**\n   * Default calendar month displayed when `value` and `defaultValue` are empty.\n   * @deprecated Consider using `referenceDate` instead.\n   */\n  defaultCalendarMonth: PropTypes.any,\n  /**\n   * The default value.\n   * Used when the component is not controlled.\n   */\n  defaultValue: PropTypes.any,\n  /**\n   * CSS media query when `Mobile` mode will be changed to `Desktop`.\n   * @default '@media (pointer: fine)'\n   * @example '@media (min-width: 720px)' or theme.breakpoints.up(\"sm\")\n   */\n  desktopModeMediaQuery: PropTypes.string,\n  /**\n   * If `true`, the picker and text field are disabled.\n   * @default false\n   */\n  disabled: PropTypes.bool,\n  /**\n   * If `true`, disable values after the current date for date components, time for time components and both for date time components.\n   * @default false\n   */\n  disableFuture: PropTypes.bool,\n  /**\n   * If `true`, today's date is rendering without highlighting with circle.\n   * @default false\n   */\n  disableHighlightToday: PropTypes.bool,\n  /**\n   * If `true`, the open picker button will not be rendered (renders only the field).\n   * @default false\n   */\n  disableOpenPicker: PropTypes.bool,\n  /**\n   * If `true`, disable values before the current date for date components, time for time components and both for date time components.\n   * @default false\n   */\n  disablePast: PropTypes.bool,\n  /**\n   * If `true`, the week number will be display in the calendar.\n   */\n  displayWeekNumber: PropTypes.bool,\n  /**\n   * Calendar will show more weeks in order to match this value.\n   * Put it to 6 for having fix number of week in Gregorian calendars\n   * @default undefined\n   */\n  fixedWeekNumber: PropTypes.number,\n  /**\n   * Format of the date when rendered in the input(s).\n   * Defaults to localized format based on the used `views`.\n   */\n  format: PropTypes.string,\n  /**\n   * Density of the format when rendered in the input.\n   * Setting `formatDensity` to `\"spacious\"` will add a space before and after each `/`, `-` and `.` character.\n   * @default \"dense\"\n   */\n  formatDensity: PropTypes.oneOf(['dense', 'spacious']),\n  /**\n   * Pass a ref to the `input` element.\n   */\n  inputRef: refType,\n  /**\n   * The label content.\n   */\n  label: PropTypes.node,\n  /**\n   * If `true`, calls `renderLoading` instead of rendering the day calendar.\n   * Can be used to preload information and show it in calendar.\n   * @default false\n   */\n  loading: PropTypes.bool,\n  /**\n   * Locale for components texts.\n   * Allows overriding texts coming from `LocalizationProvider` and `theme`.\n   */\n  localeText: PropTypes.object,\n  /**\n   * Maximal selectable date.\n   */\n  maxDate: PropTypes.any,\n  /**\n   * Minimal selectable date.\n   */\n  minDate: PropTypes.any,\n  /**\n   * Months rendered per row.\n   * @default 3\n   */\n  monthsPerRow: PropTypes.oneOf([3, 4]),\n  /**\n   * Name attribute used by the `input` element in the Field.\n   */\n  name: PropTypes.string,\n  /**\n   * Callback fired when the value is accepted.\n   * @template TValue The value type. Will be either the same type as `value` or `null`. Can be in `[start, end]` format in case of range value.\n   * @param {TValue} value The value that was just accepted.\n   */\n  onAccept: PropTypes.func,\n  /**\n   * Callback fired when the value changes.\n   * @template TValue The value type. Will be either the same type as `value` or `null`. Can be in `[start, end]` format in case of range value.\n   * @template TError The validation error type. Will be either `string` or a `null`. Can be in `[start, end]` format in case of range value.\n   * @param {TValue} value The new value.\n   * @param {FieldChangeHandlerContext<TError>} context The context containing the validation result of the current value.\n   */\n  onChange: PropTypes.func,\n  /**\n   * Callback fired when the popup requests to be closed.\n   * Use in controlled mode (see `open`).\n   */\n  onClose: PropTypes.func,\n  /**\n   * Callback fired when the error associated to the current value changes.\n   * If the error has a non-null value, then the `TextField` will be rendered in `error` state.\n   *\n   * @template TValue The value type. Will be either the same type as `value` or `null`. Can be in `[start, end]` format in case of range value.\n   * @template TError The validation error type. Will be either `string` or a `null`. Can be in `[start, end]` format in case of range value.\n   * @param {TError} error The new error describing why the current value is not valid.\n   * @param {TValue} value The value associated to the error.\n   */\n  onError: PropTypes.func,\n  /**\n   * Callback fired on month change.\n   * @template TDate\n   * @param {TDate} month The new month.\n   */\n  onMonthChange: PropTypes.func,\n  /**\n   * Callback fired when the popup requests to be opened.\n   * Use in controlled mode (see `open`).\n   */\n  onOpen: PropTypes.func,\n  /**\n   * Callback fired when the selected sections change.\n   * @param {FieldSelectedSections} newValue The new selected sections.\n   */\n  onSelectedSectionsChange: PropTypes.func,\n  /**\n   * Callback fired on view change.\n   * @template TView\n   * @param {TView} view The new view.\n   */\n  onViewChange: PropTypes.func,\n  /**\n   * Callback fired on year change.\n   * @template TDate\n   * @param {TDate} year The new year.\n   */\n  onYearChange: PropTypes.func,\n  /**\n   * Control the popup or dialog open state.\n   * @default false\n   */\n  open: PropTypes.bool,\n  /**\n   * The default visible view.\n   * Used when the component view is not controlled.\n   * Must be a valid option from `views` list.\n   */\n  openTo: PropTypes.oneOf(['day', 'month', 'year']),\n  /**\n   * Force rendering in particular orientation.\n   */\n  orientation: PropTypes.oneOf(['landscape', 'portrait']),\n  readOnly: PropTypes.bool,\n  /**\n   * If `true`, disable heavy animations.\n   * @default `@media(prefers-reduced-motion: reduce)` || `navigator.userAgent` matches Android <10 or iOS <13\n   */\n  reduceAnimations: PropTypes.bool,\n  /**\n   * The date used to generate the new value when both `value` and `defaultValue` are empty.\n   * @default The closest valid date-time using the validation props, except callbacks like `shouldDisable<...>`.\n   */\n  referenceDate: PropTypes.any,\n  /**\n   * Component displaying when passed `loading` true.\n   * @returns {React.ReactNode} The node to render when loading.\n   * @default () => <span data-mui-test=\"loading-progress\">...</span>\n   */\n  renderLoading: PropTypes.func,\n  /**\n   * The currently selected sections.\n   * This prop accept four formats:\n   * 1. If a number is provided, the section at this index will be selected.\n   * 2. If an object with a `startIndex` and `endIndex` properties are provided, the sections between those two indexes will be selected.\n   * 3. If a string of type `FieldSectionType` is provided, the first section with that name will be selected.\n   * 4. If `null` is provided, no section will be selected\n   * If not provided, the selected sections will be handled internally.\n   */\n  selectedSections: PropTypes.oneOfType([PropTypes.oneOf(['all', 'day', 'hours', 'meridiem', 'minutes', 'month', 'seconds', 'weekDay', 'year']), PropTypes.number, PropTypes.shape({\n    endIndex: PropTypes.number.isRequired,\n    startIndex: PropTypes.number.isRequired\n  })]),\n  /**\n   * Disable specific date.\n   *\n   * Warning: This function can be called multiple times (e.g. when rendering date calendar, checking if focus can be moved to a certain date, etc.). Expensive computations can impact performance.\n   *\n   * @template TDate\n   * @param {TDate} day The date to test.\n   * @returns {boolean} If `true` the date will be disabled.\n   */\n  shouldDisableDate: PropTypes.func,\n  /**\n   * Disable specific month.\n   * @template TDate\n   * @param {TDate} month The month to test.\n   * @returns {boolean} If `true`, the month will be disabled.\n   */\n  shouldDisableMonth: PropTypes.func,\n  /**\n   * Disable specific year.\n   * @template TDate\n   * @param {TDate} year The year to test.\n   * @returns {boolean} If `true`, the year will be disabled.\n   */\n  shouldDisableYear: PropTypes.func,\n  /**\n   * If `true`, days outside the current month are rendered:\n   *\n   * - if `fixedWeekNumber` is defined, renders days to have the weeks requested.\n   *\n   * - if `fixedWeekNumber` is not defined, renders day to fill the first and last week of the current month.\n   *\n   * - ignored if `calendars` equals more than `1` on range pickers.\n   * @default false\n   */\n  showDaysOutsideCurrentMonth: PropTypes.bool,\n  /**\n   * The props used for each component slot.\n   * @default {}\n   */\n  slotProps: PropTypes.object,\n  /**\n   * Overridable component slots.\n   * @default {}\n   */\n  slots: PropTypes.object,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  /**\n   * Choose which timezone to use for the value.\n   * Example: \"default\", \"system\", \"UTC\", \"America/New_York\".\n   * If you pass values from other timezones to some props, they will be converted to this timezone before being used.\n   * @see See the {@link https://mui.com/x/react-date-pickers/timezone/ timezones documention} for more details.\n   * @default The timezone of the `value` or `defaultValue` prop is defined, 'default' otherwise.\n   */\n  timezone: PropTypes.string,\n  /**\n   * The selected value.\n   * Used when the component is controlled.\n   */\n  value: PropTypes.any,\n  /**\n   * The visible view.\n   * Used when the component view is controlled.\n   * Must be a valid option from `views` list.\n   */\n  view: PropTypes.oneOf(['day', 'month', 'year']),\n  /**\n   * Define custom view renderers for each section.\n   * If `null`, the section will only have field editing.\n   * If `undefined`, internally defined view will be the used.\n   */\n  viewRenderers: PropTypes.shape({\n    day: PropTypes.func,\n    month: PropTypes.func,\n    year: PropTypes.func\n  }),\n  /**\n   * Available views.\n   */\n  views: PropTypes.arrayOf(PropTypes.oneOf(['day', 'month', 'year']).isRequired),\n  /**\n   * Years rendered per row.\n   * @default 4 on desktop, 3 on mobile\n   */\n  yearsPerRow: PropTypes.oneOf([3, 4])\n} : void 0;\nexport { DatePicker };","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar dateLongFormatter = function dateLongFormatter(pattern, formatLong) {\n  switch (pattern) {\n    case 'P':\n      return formatLong.date({\n        width: 'short'\n      });\n    case 'PP':\n      return formatLong.date({\n        width: 'medium'\n      });\n    case 'PPP':\n      return formatLong.date({\n        width: 'long'\n      });\n    case 'PPPP':\n    default:\n      return formatLong.date({\n        width: 'full'\n      });\n  }\n};\nvar timeLongFormatter = function timeLongFormatter(pattern, formatLong) {\n  switch (pattern) {\n    case 'p':\n      return formatLong.time({\n        width: 'short'\n      });\n    case 'pp':\n      return formatLong.time({\n        width: 'medium'\n      });\n    case 'ppp':\n      return formatLong.time({\n        width: 'long'\n      });\n    case 'pppp':\n    default:\n      return formatLong.time({\n        width: 'full'\n      });\n  }\n};\nvar dateTimeLongFormatter = function dateTimeLongFormatter(pattern, formatLong) {\n  var matchResult = pattern.match(/(P+)(p+)?/) || [];\n  var datePattern = matchResult[1];\n  var timePattern = matchResult[2];\n  if (!timePattern) {\n    return dateLongFormatter(pattern, formatLong);\n  }\n  var dateTimeFormat;\n  switch (datePattern) {\n    case 'P':\n      dateTimeFormat = formatLong.dateTime({\n        width: 'short'\n      });\n      break;\n    case 'PP':\n      dateTimeFormat = formatLong.dateTime({\n        width: 'medium'\n      });\n      break;\n    case 'PPP':\n      dateTimeFormat = formatLong.dateTime({\n        width: 'long'\n      });\n      break;\n    case 'PPPP':\n    default:\n      dateTimeFormat = formatLong.dateTime({\n        width: 'full'\n      });\n      break;\n  }\n  return dateTimeFormat.replace('{{date}}', dateLongFormatter(datePattern, formatLong)).replace('{{time}}', timeLongFormatter(timePattern, formatLong));\n};\nvar longFormatters = {\n  p: timeLongFormatter,\n  P: dateTimeLongFormatter\n};\nvar _default = longFormatters;\nexports.default = _default;\nmodule.exports = exports.default;","import _extends from \"@babel/runtime/helpers/esm/extends\";\n/* eslint-disable class-methods-use-this */\n\nconst formatTokenMap = {\n  // Year\n  y: {\n    sectionType: 'year',\n    contentType: 'digit',\n    maxLength: 4\n  },\n  yy: 'year',\n  yyy: {\n    sectionType: 'year',\n    contentType: 'digit',\n    maxLength: 4\n  },\n  yyyy: 'year',\n  // Month\n  M: {\n    sectionType: 'month',\n    contentType: 'digit',\n    maxLength: 2\n  },\n  MM: 'month',\n  MMMM: {\n    sectionType: 'month',\n    contentType: 'letter'\n  },\n  MMM: {\n    sectionType: 'month',\n    contentType: 'letter'\n  },\n  L: {\n    sectionType: 'month',\n    contentType: 'digit',\n    maxLength: 2\n  },\n  LL: 'month',\n  LLL: {\n    sectionType: 'month',\n    contentType: 'letter'\n  },\n  LLLL: {\n    sectionType: 'month',\n    contentType: 'letter'\n  },\n  // Day of the month\n  d: {\n    sectionType: 'day',\n    contentType: 'digit',\n    maxLength: 2\n  },\n  dd: 'day',\n  do: {\n    sectionType: 'day',\n    contentType: 'digit-with-letter'\n  },\n  // Day of the week\n  E: {\n    sectionType: 'weekDay',\n    contentType: 'letter'\n  },\n  EE: {\n    sectionType: 'weekDay',\n    contentType: 'letter'\n  },\n  EEE: {\n    sectionType: 'weekDay',\n    contentType: 'letter'\n  },\n  EEEE: {\n    sectionType: 'weekDay',\n    contentType: 'letter'\n  },\n  EEEEE: {\n    sectionType: 'weekDay',\n    contentType: 'letter'\n  },\n  i: {\n    sectionType: 'weekDay',\n    contentType: 'digit',\n    maxLength: 1\n  },\n  ii: 'weekDay',\n  iii: {\n    sectionType: 'weekDay',\n    contentType: 'letter'\n  },\n  iiii: {\n    sectionType: 'weekDay',\n    contentType: 'letter'\n  },\n  e: {\n    sectionType: 'weekDay',\n    contentType: 'digit',\n    maxLength: 1\n  },\n  ee: 'weekDay',\n  eee: {\n    sectionType: 'weekDay',\n    contentType: 'letter'\n  },\n  eeee: {\n    sectionType: 'weekDay',\n    contentType: 'letter'\n  },\n  eeeee: {\n    sectionType: 'weekDay',\n    contentType: 'letter'\n  },\n  eeeeee: {\n    sectionType: 'weekDay',\n    contentType: 'letter'\n  },\n  c: {\n    sectionType: 'weekDay',\n    contentType: 'digit',\n    maxLength: 1\n  },\n  cc: 'weekDay',\n  ccc: {\n    sectionType: 'weekDay',\n    contentType: 'letter'\n  },\n  cccc: {\n    sectionType: 'weekDay',\n    contentType: 'letter'\n  },\n  ccccc: {\n    sectionType: 'weekDay',\n    contentType: 'letter'\n  },\n  cccccc: {\n    sectionType: 'weekDay',\n    contentType: 'letter'\n  },\n  // Meridiem\n  a: 'meridiem',\n  aa: 'meridiem',\n  aaa: 'meridiem',\n  // Hours\n  H: {\n    sectionType: 'hours',\n    contentType: 'digit',\n    maxLength: 2\n  },\n  HH: 'hours',\n  h: {\n    sectionType: 'hours',\n    contentType: 'digit',\n    maxLength: 2\n  },\n  hh: 'hours',\n  // Minutes\n  m: {\n    sectionType: 'minutes',\n    contentType: 'digit',\n    maxLength: 2\n  },\n  mm: 'minutes',\n  // Seconds\n  s: {\n    sectionType: 'seconds',\n    contentType: 'digit',\n    maxLength: 2\n  },\n  ss: 'seconds'\n};\nconst defaultFormats = {\n  year: 'yyyy',\n  month: 'LLLL',\n  monthShort: 'MMM',\n  dayOfMonth: 'd',\n  weekday: 'EEEE',\n  weekdayShort: 'EEEEEE',\n  hours24h: 'HH',\n  hours12h: 'hh',\n  meridiem: 'aa',\n  minutes: 'mm',\n  seconds: 'ss',\n  fullDate: 'PP',\n  fullDateWithWeekday: 'PPPP',\n  keyboardDate: 'P',\n  shortDate: 'MMM d',\n  normalDate: 'd MMMM',\n  normalDateWithWeekday: 'EEE, MMM d',\n  monthAndYear: 'LLLL yyyy',\n  monthAndDate: 'MMMM d',\n  fullTime: 'p',\n  fullTime12h: 'hh:mm aa',\n  fullTime24h: 'HH:mm',\n  fullDateTime: 'PP p',\n  fullDateTime12h: 'PP hh:mm aa',\n  fullDateTime24h: 'PP HH:mm',\n  keyboardDateTime: 'P p',\n  keyboardDateTime12h: 'P hh:mm aa',\n  keyboardDateTime24h: 'P HH:mm'\n};\n/**\n * Based on `@date-io/date-fns`\n *\n * MIT License\n *\n * Copyright (c) 2017 Dmitriy Kovalenko\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nexport class AdapterDateFnsBase {\n  constructor(props) {\n    this.isMUIAdapter = true;\n    this.isTimezoneCompatible = false;\n    this.lib = 'date-fns';\n    this.locale = void 0;\n    this.formats = void 0;\n    this.formatTokenMap = formatTokenMap;\n    this.escapedCharacters = {\n      start: \"'\",\n      end: \"'\"\n    };\n    this.longFormatters = void 0;\n    this.date = value => {\n      if (typeof value === 'undefined') {\n        return new Date();\n      }\n      if (value === null) {\n        return null;\n      }\n      return new Date(value);\n    };\n    this.dateWithTimezone = value => {\n      return this.date(value);\n    };\n    this.getTimezone = () => {\n      return 'default';\n    };\n    this.setTimezone = value => {\n      return value;\n    };\n    this.toJsDate = value => {\n      return value;\n    };\n    this.getCurrentLocaleCode = () => {\n      var _this$locale;\n      return ((_this$locale = this.locale) == null ? void 0 : _this$locale.code) || 'en-US';\n    };\n    // Note: date-fns input types are more lenient than this adapter, so we need to expose our more\n    // strict signature and delegate to the more lenient signature. Otherwise, we have downstream type errors upon usage.\n    this.is12HourCycleInCurrentLocale = () => {\n      if (this.locale) {\n        return /a/.test(this.locale.formatLong.time({\n          width: 'short'\n        }));\n      }\n\n      // By default, date-fns is using en-US locale with am/pm enabled\n      return true;\n    };\n    this.expandFormat = format => {\n      const longFormatRegexp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;\n\n      // @see https://github.com/date-fns/date-fns/blob/master/src/format/index.js#L31\n      return format.match(longFormatRegexp).map(token => {\n        const firstCharacter = token[0];\n        if (firstCharacter === 'p' || firstCharacter === 'P') {\n          const longFormatter = this.longFormatters[firstCharacter];\n          return longFormatter(token, this.locale.formatLong);\n        }\n        return token;\n      }).join('');\n    };\n    this.getFormatHelperText = format => {\n      return this.expandFormat(format).replace(/(aaa|aa|a)/g, '(a|p)m').toLocaleLowerCase();\n    };\n    this.isNull = value => {\n      return value === null;\n    };\n    this.formatNumber = numberToFormat => {\n      return numberToFormat;\n    };\n    this.getMeridiemText = ampm => {\n      return ampm === 'am' ? 'AM' : 'PM';\n    };\n    const {\n      locale,\n      formats,\n      longFormatters\n    } = props;\n    this.locale = locale;\n    this.formats = _extends({}, defaultFormats, formats);\n    this.longFormatters = longFormatters;\n  }\n}","/* eslint-disable class-methods-use-this */\nimport addDays from 'date-fns/addDays';\nimport addSeconds from 'date-fns/addSeconds';\nimport addMinutes from 'date-fns/addMinutes';\nimport addHours from 'date-fns/addHours';\nimport addWeeks from 'date-fns/addWeeks';\nimport addMonths from 'date-fns/addMonths';\nimport addYears from 'date-fns/addYears';\nimport differenceInYears from 'date-fns/differenceInYears';\nimport differenceInQuarters from 'date-fns/differenceInQuarters';\nimport differenceInMonths from 'date-fns/differenceInMonths';\nimport differenceInWeeks from 'date-fns/differenceInWeeks';\nimport differenceInDays from 'date-fns/differenceInDays';\nimport differenceInHours from 'date-fns/differenceInHours';\nimport differenceInMinutes from 'date-fns/differenceInMinutes';\nimport differenceInSeconds from 'date-fns/differenceInSeconds';\nimport differenceInMilliseconds from 'date-fns/differenceInMilliseconds';\nimport eachDayOfInterval from 'date-fns/eachDayOfInterval';\nimport endOfDay from 'date-fns/endOfDay';\nimport endOfWeek from 'date-fns/endOfWeek';\nimport endOfYear from 'date-fns/endOfYear';\nimport dateFnsFormat from 'date-fns/format';\nimport getDate from 'date-fns/getDate';\nimport getDaysInMonth from 'date-fns/getDaysInMonth';\nimport getHours from 'date-fns/getHours';\nimport getMinutes from 'date-fns/getMinutes';\nimport getMonth from 'date-fns/getMonth';\nimport getSeconds from 'date-fns/getSeconds';\nimport getMilliseconds from 'date-fns/getMilliseconds';\nimport getWeek from 'date-fns/getWeek';\nimport getYear from 'date-fns/getYear';\nimport isAfter from 'date-fns/isAfter';\nimport isBefore from 'date-fns/isBefore';\nimport isEqual from 'date-fns/isEqual';\nimport isSameDay from 'date-fns/isSameDay';\nimport isSameYear from 'date-fns/isSameYear';\nimport isSameMonth from 'date-fns/isSameMonth';\nimport isSameHour from 'date-fns/isSameHour';\nimport isValid from 'date-fns/isValid';\nimport dateFnsParse from 'date-fns/parse';\nimport setDate from 'date-fns/setDate';\nimport setHours from 'date-fns/setHours';\nimport setMinutes from 'date-fns/setMinutes';\nimport setMonth from 'date-fns/setMonth';\nimport setSeconds from 'date-fns/setSeconds';\nimport setMilliseconds from 'date-fns/setMilliseconds';\nimport setYear from 'date-fns/setYear';\nimport startOfDay from 'date-fns/startOfDay';\nimport startOfMonth from 'date-fns/startOfMonth';\nimport endOfMonth from 'date-fns/endOfMonth';\nimport startOfWeek from 'date-fns/startOfWeek';\nimport startOfYear from 'date-fns/startOfYear';\nimport parseISO from 'date-fns/parseISO';\nimport formatISO from 'date-fns/formatISO';\nimport isWithinInterval from 'date-fns/isWithinInterval';\nimport defaultLocale from 'date-fns/locale/en-US';\n// @ts-ignore\nimport longFormatters from 'date-fns/_lib/format/longFormatters';\nimport { AdapterDateFnsBase } from '../AdapterDateFnsBase';\n/**\n * Based on `@date-io/date-fns`\n *\n * MIT License\n *\n * Copyright (c) 2017 Dmitriy Kovalenko\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nexport class AdapterDateFns extends AdapterDateFnsBase {\n  constructor({\n    locale,\n    formats\n  } = {}) {\n    if (typeof addDays !== 'function') {\n      throw new Error(['MUI: The `date-fns` package v3.x is not compatible with this adapter.', 'Please, install v2.x of the package or use the `AdapterDateFnsV3` instead.'].join('\\n'));\n    }\n    super({\n      locale: locale != null ? locale : defaultLocale,\n      formats,\n      longFormatters\n    });\n    this.parseISO = isoString => {\n      return parseISO(isoString);\n    };\n    this.toISO = value => {\n      return formatISO(value, {\n        format: 'extended'\n      });\n    };\n    this.parse = (value, format) => {\n      if (value === '') {\n        return null;\n      }\n      return dateFnsParse(value, format, new Date(), {\n        locale: this.locale\n      });\n    };\n    this.isValid = value => {\n      return isValid(this.date(value));\n    };\n    this.format = (value, formatKey) => {\n      return this.formatByString(value, this.formats[formatKey]);\n    };\n    this.formatByString = (value, formatString) => {\n      return dateFnsFormat(value, formatString, {\n        locale: this.locale\n      });\n    };\n    this.getDiff = (value, comparing, unit) => {\n      switch (unit) {\n        case 'years':\n          return differenceInYears(value, this.date(comparing));\n        case 'quarters':\n          return differenceInQuarters(value, this.date(comparing));\n        case 'months':\n          return differenceInMonths(value, this.date(comparing));\n        case 'weeks':\n          return differenceInWeeks(value, this.date(comparing));\n        case 'days':\n          return differenceInDays(value, this.date(comparing));\n        case 'hours':\n          return differenceInHours(value, this.date(comparing));\n        case 'minutes':\n          return differenceInMinutes(value, this.date(comparing));\n        case 'seconds':\n          return differenceInSeconds(value, this.date(comparing));\n        default:\n          {\n            return differenceInMilliseconds(value, this.date(comparing));\n          }\n      }\n    };\n    this.isEqual = (value, comparing) => {\n      if (value === null && comparing === null) {\n        return true;\n      }\n      return isEqual(value, comparing);\n    };\n    this.isSameYear = (value, comparing) => {\n      return isSameYear(value, comparing);\n    };\n    this.isSameMonth = (value, comparing) => {\n      return isSameMonth(value, comparing);\n    };\n    this.isSameDay = (value, comparing) => {\n      return isSameDay(value, comparing);\n    };\n    this.isSameHour = (value, comparing) => {\n      return isSameHour(value, comparing);\n    };\n    this.isAfter = (value, comparing) => {\n      return isAfter(value, comparing);\n    };\n    this.isAfterYear = (value, comparing) => {\n      return isAfter(value, endOfYear(comparing));\n    };\n    this.isAfterDay = (value, comparing) => {\n      return isAfter(value, endOfDay(comparing));\n    };\n    this.isBefore = (value, comparing) => {\n      return isBefore(value, comparing);\n    };\n    this.isBeforeYear = (value, comparing) => {\n      return isBefore(value, startOfYear(comparing));\n    };\n    this.isBeforeDay = (value, comparing) => {\n      return isBefore(value, startOfDay(comparing));\n    };\n    this.isWithinRange = (value, [start, end]) => {\n      return isWithinInterval(value, {\n        start,\n        end\n      });\n    };\n    this.startOfYear = value => {\n      return startOfYear(value);\n    };\n    this.startOfMonth = value => {\n      return startOfMonth(value);\n    };\n    this.startOfWeek = value => {\n      return startOfWeek(value, {\n        locale: this.locale\n      });\n    };\n    this.startOfDay = value => {\n      return startOfDay(value);\n    };\n    this.endOfYear = value => {\n      return endOfYear(value);\n    };\n    this.endOfMonth = value => {\n      return endOfMonth(value);\n    };\n    this.endOfWeek = value => {\n      return endOfWeek(value, {\n        locale: this.locale\n      });\n    };\n    this.endOfDay = value => {\n      return endOfDay(value);\n    };\n    this.addYears = (value, amount) => {\n      return addYears(value, amount);\n    };\n    this.addMonths = (value, amount) => {\n      return addMonths(value, amount);\n    };\n    this.addWeeks = (value, amount) => {\n      return addWeeks(value, amount);\n    };\n    this.addDays = (value, amount) => {\n      return addDays(value, amount);\n    };\n    this.addHours = (value, amount) => {\n      return addHours(value, amount);\n    };\n    this.addMinutes = (value, amount) => {\n      return addMinutes(value, amount);\n    };\n    this.addSeconds = (value, amount) => {\n      return addSeconds(value, amount);\n    };\n    this.getYear = value => {\n      return getYear(value);\n    };\n    this.getMonth = value => {\n      return getMonth(value);\n    };\n    this.getDate = value => {\n      return getDate(value);\n    };\n    this.getHours = value => {\n      return getHours(value);\n    };\n    this.getMinutes = value => {\n      return getMinutes(value);\n    };\n    this.getSeconds = value => {\n      return getSeconds(value);\n    };\n    this.getMilliseconds = value => {\n      return getMilliseconds(value);\n    };\n    this.setYear = (value, year) => {\n      return setYear(value, year);\n    };\n    this.setMonth = (value, month) => {\n      return setMonth(value, month);\n    };\n    this.setDate = (value, date) => {\n      return setDate(value, date);\n    };\n    this.setHours = (value, hours) => {\n      return setHours(value, hours);\n    };\n    this.setMinutes = (value, minutes) => {\n      return setMinutes(value, minutes);\n    };\n    this.setSeconds = (value, seconds) => {\n      return setSeconds(value, seconds);\n    };\n    this.setMilliseconds = (value, milliseconds) => {\n      return setMilliseconds(value, milliseconds);\n    };\n    this.getDaysInMonth = value => {\n      return getDaysInMonth(value);\n    };\n    this.getNextMonth = value => {\n      return addMonths(value, 1);\n    };\n    this.getPreviousMonth = value => {\n      return addMonths(value, -1);\n    };\n    this.getMonthArray = value => {\n      const firstMonth = startOfYear(value);\n      const monthArray = [firstMonth];\n      while (monthArray.length < 12) {\n        const prevMonth = monthArray[monthArray.length - 1];\n        monthArray.push(this.getNextMonth(prevMonth));\n      }\n      return monthArray;\n    };\n    this.mergeDateAndTime = (dateParam, timeParam) => {\n      return this.setSeconds(this.setMinutes(this.setHours(dateParam, this.getHours(timeParam)), this.getMinutes(timeParam)), this.getSeconds(timeParam));\n    };\n    this.getWeekdays = () => {\n      const now = new Date();\n      return eachDayOfInterval({\n        start: startOfWeek(now, {\n          locale: this.locale\n        }),\n        end: endOfWeek(now, {\n          locale: this.locale\n        })\n      }).map(day => this.formatByString(day, 'EEEEEE'));\n    };\n    this.getWeekArray = value => {\n      const start = startOfWeek(startOfMonth(value), {\n        locale: this.locale\n      });\n      const end = endOfWeek(endOfMonth(value), {\n        locale: this.locale\n      });\n      let count = 0;\n      let current = start;\n      const nestedWeeks = [];\n      while (isBefore(current, end)) {\n        const weekNumber = Math.floor(count / 7);\n        nestedWeeks[weekNumber] = nestedWeeks[weekNumber] || [];\n        nestedWeeks[weekNumber].push(current);\n        current = addDays(current, 1);\n        count += 1;\n      }\n      return nestedWeeks;\n    };\n    this.getWeekNumber = value => {\n      return getWeek(value, {\n        locale: this.locale\n      });\n    };\n    this.getYearRange = (start, end) => {\n      const startDate = startOfYear(start);\n      const endDate = endOfYear(end);\n      const years = [];\n      let current = startDate;\n      while (isBefore(current, endDate)) {\n        years.push(current);\n        current = addYears(current, 1);\n      }\n      return years;\n    };\n  }\n}","import { useState, useMemo, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport {\n  Box,\n  Container,\n  Typography,\n  Grid,\n  Card,\n  CardContent,\n  CardHeader,\n  Tabs,\n  Tab,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Chip,\n  CircularProgress,\n  Alert,\n  Button,\n  TextField,\n  IconButton,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  TablePagination,\n  TableSortLabel,\n  InputAdornment,\n} from \"@mui/material\";\nimport {\n  TrendingUp,\n  TrendingDown,\n  History,\n  Download,\n  Upload,\n  Refresh,\n  FilterList,\n  Search,\n  Analytics,\n  ShowChart,\n  Timeline,\n  Assessment,\n  MonetizationOn,\n  SwapHoriz,\n} from \"@mui/icons-material\";\nimport {\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  ResponsiveContainer,\n  Bar,\n  ComposedChart,\n  Tooltip as RechartsTooltip,\n} from \"recharts\";\nimport { DatePicker } from \"@mui/x-date-pickers/DatePicker\";\nimport { LocalizationProvider } from \"@mui/x-date-pickers/LocalizationProvider\";\nimport { AdapterDateFns } from \"@mui/x-date-pickers/AdapterDateFns\";\n\nconst API_BASE_URL = (import.meta.env && import.meta.env.VITE_API_URL) || (window.__CONFIG__ && window.__CONFIG__.API_URL) || \"http://localhost:3001\";\n\nconst TradeHistory = () => {\n  // State management\n  const [viewMode, setViewMode] = useState(\"trades\"); // \"trades\" or \"matched\"\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(10000); // Show all trades\n  const [selectedTrade, setSelectedTrade] = useState(null);\n  const [detailsOpen, setDetailsOpen] = useState(false);\n  const [importDialogOpen, setImportDialogOpen] = useState(false);\n  const [showAdvancedFilters, setShowAdvancedFilters] = useState(false);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [typeFilter, setTypeFilter] = useState(\"all\");\n  const [statusFilter, setStatusFilter] = useState(\"all\");\n  const [sortBy, setSortBy] = useState(\"execution_date\");\n  const [sortOrder, setSortOrder] = useState(\"desc\");\n  const [matchedPairs, setMatchedPairs] = useState([]);\n  const [matchedPairsLoading, setMatchedPairsLoading] = useState(false);\n  const [matchedPairsError, setMatchedPairsError] = useState(null);\n  const [matchedPairsSearchTerm, setMatchedPairsSearchTerm] = useState(\"\");\n  const [matchedPairsFilter, setMatchedPairsFilter] = useState(\"all\"); // all, profit, loss, wash-sale\n  const [dateFilter, setDateFilter] = useState({ start: null, end: null });\n  const [error, setError] = useState(null);\n\n  // Fetch trade data using useQuery\n  const { data: tradeData, isLoading: tradeLoading, refetch: refetchTrades } = useQuery({\n    queryKey: [\"tradeHistory\", page, rowsPerPage],\n    queryFn: async () => {\n      const params = new URLSearchParams({\n        page: (page + 1).toString(),\n        limit: rowsPerPage.toString(),\n      });\n      const response = await fetch(`${API_BASE_URL}/api/trades?${params}`);\n      if (!response.ok) throw new Error('Failed to fetch trades');\n      const data = await response.json();\n      return { data: { trades: data.items || [], pagination: data.pagination || {}, summary: {} } };\n    },\n    staleTime: 60000,\n  });\n\n  const { data: summaryData, isLoading: summaryLoading } = useQuery({\n    queryKey: [\"tradeSummary\"],\n    queryFn: async () => {\n      const response = await fetch(`${API_BASE_URL}/api/trades/summary`);\n      if (!response.ok) throw new Error('Failed to fetch summary');\n      const data = await response.json();\n      return { data: data.data };\n    },\n    staleTime: 60000,\n  });\n\n  // Extract data from responses\n  const trades = tradeData?.data?.trades || [];\n  const tradesSummary = tradeData?.data?.summary || summaryData?.data?.summary || {};\n  const loading = tradeLoading || summaryLoading;\n\n  // Generate chart data from trades\n  const chartData = useMemo(() => {\n    if (!trades || trades.length === 0) return [];\n\n    // Sort trades by date\n    const sortedTrades = [...trades].sort((a, b) =>\n      new Date(a.execution_date) - new Date(b.execution_date)\n    );\n\n    // Aggregate by date to show buy/sell counts and values\n    const dateMap = {};\n    sortedTrades.forEach((trade) => {\n      const dateKey = new Date(trade.execution_date).toLocaleDateString();\n\n      if (!dateMap[dateKey]) {\n        dateMap[dateKey] = {\n          date: dateKey,\n          buyCount: 0,\n          sellCount: 0,\n          buyValue: 0,\n          sellValue: 0,\n          totalValue: 0,\n        };\n      }\n\n      if (trade.type.toLowerCase() === 'buy') {\n        dateMap[dateKey].buyCount += 1;\n        // Only accumulate actual values, not fake defaults\n        if (trade.order_value !== null && trade.order_value !== undefined) {\n          dateMap[dateKey].buyValue += trade.order_value;\n        }\n      } else {\n        dateMap[dateKey].sellCount += 1;\n        // Only accumulate actual values, not fake defaults\n        if (trade.order_value !== null && trade.order_value !== undefined) {\n          dateMap[dateKey].sellValue += trade.order_value;\n        }\n      }\n      // Only accumulate actual values, not fake defaults\n      if (trade.order_value !== null && trade.order_value !== undefined) {\n        dateMap[dateKey].totalValue += trade.order_value;\n      }\n    });\n\n    return Object.values(dateMap);\n  }, [trades]);\n\n  // Calculate analytics metrics from trades\n  const analytics = useMemo(() => {\n    if (!trades || trades.length === 0) {\n      return {\n        totalTrades: 0,\n        winningTrades: 0,\n        losingTrades: 0,\n        winRate: 0,\n        avgHoldTime: \"N/A\",\n        totalPnl: 0,\n        avgWin: 0,\n        avgLoss: 0,\n        profitFactor: 0,\n      };\n    }\n\n    // Separate buy and sell trades\n    const buyTrades = trades.filter(t => t.type.toLowerCase() === 'buy');\n    const sellTrades = trades.filter(t => t.type.toLowerCase() === 'sell');\n\n    // Calculate metrics - only sum actual values, not fake defaults\n    const totalBuyValue = buyTrades.reduce((sum, t) =>\n      t.order_value !== null && t.order_value !== undefined ? sum + t.order_value : sum, 0);\n    const totalSellValue = sellTrades.reduce((sum, t) =>\n      t.order_value !== null && t.order_value !== undefined ? sum + t.order_value : sum, 0);\n    const closedPnl = totalSellValue - totalBuyValue; // Realized P&L from closed positions\n\n    // Count trades with quantifiable results\n    const winCount = sellTrades.length; // Closing trades are \"wins\" (realizing position)\n    const lossCount = buyTrades.filter(t => {\n      // Count unclosed buys as potential losses\n      return true;\n    }).length;\n\n    const avgWin = winCount > 0 ? totalSellValue / winCount : 0;\n    const avgLoss = lossCount > 0 ? totalBuyValue / lossCount : 0;\n    const profitFactor = totalBuyValue > 0 ? totalSellValue / totalBuyValue : 0;\n    const totalTrades = tradesSummary.total_trades || trades.length;\n\n    return {\n      totalTrades,\n      winningTrades: winCount,\n      losingTrades: buyTrades.length - winCount, // Unclosed positions\n      winRate: winCount > 0 ? (winCount / totalTrades) * 100 : 0,\n      avgHoldTime: \"N/A\",\n      totalPnl: closedPnl,\n      avgWin,\n      avgLoss,\n      profitFactor: isFinite(profitFactor) ? profitFactor : 0,\n    };\n  }, [trades, tradesSummary]);\n\n  // Filter matched pairs based on search and filter criteria\n  const filteredMatchedPairs = useMemo(() => {\n    if (!matchedPairs || matchedPairs.length === 0) return [];\n\n    return matchedPairs.filter((pair) => {\n      // Search filter\n      const searchLower = matchedPairsSearchTerm.toLowerCase();\n      const matchesSearch =\n        pair.symbol.toLowerCase().includes(searchLower) ||\n        pair.buyDate.toString().includes(searchLower) ||\n        pair.sellDate.toString().includes(searchLower);\n\n      if (!matchesSearch) return false;\n\n      // P&L filter\n      if (matchedPairsFilter !== \"all\") {\n        const pnlValue = parseFloat(pair.pnl);\n        if (matchedPairsFilter === \"profit\" && pnlValue <= 0) return false;\n        if (matchedPairsFilter === \"loss\" && pnlValue >= 0) return false;\n        if (matchedPairsFilter === \"wash-sale\" && !pair.isWashSale) return false;\n      }\n\n      return true;\n    });\n  }, [matchedPairs, matchedPairsSearchTerm, matchedPairsFilter]);\n\n  // Fetch FIFO analysis data when view mode changes to \"matched\"\n  useEffect(() => {\n    if (viewMode === \"matched\") {\n      const fetchFifoAnalysis = async () => {\n        try {\n          setMatchedPairsLoading(true);\n          setMatchedPairsError(null);\n          const response = await fetch(\"/api/trades/fifo-analysis\");\n          const data = await response.json();\n\n          if (data.success && data.data) {\n            // Handle nested structures: data.data.analysis or data.data directly\n            const analysisData = data.data?.analysis || null;\n            const matchedPairsData = analysisData?.matchedPairs || null;\n            // Validate array before setting state\n            const validMatchedPairs = Array.isArray(matchedPairsData) && matchedPairsData.length > 0 ? matchedPairsData : [];\n            setMatchedPairs(validMatchedPairs);\n          } else {\n            setMatchedPairsError(\"Failed to load matched pairs data\");\n          }\n        } catch (err) {\n          setMatchedPairsError(err.message || \"Error fetching matched pairs\");\n          console.error(\"Error fetching FIFO analysis:\", err);\n        } finally {\n          setMatchedPairsLoading(false);\n        }\n      };\n\n      fetchFifoAnalysis();\n    }\n  }, [viewMode]);\n\n  const handleRefresh = () => {\n    refetchTrades();\n  };\n\n  const handleImportTrades = async () => {\n    try {\n      setError(null);\n      // Import would go here - for now just refetch\n      refetchTrades();\n      setImportDialogOpen(false);\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  const handleExportTrades = async (format = \"csv\") => {\n    try {\n      const response = await fetch(`/api/trades/export?format=${format}`);\n      if (response.ok) {\n        const blob = await response.blob();\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement(\"a\");\n        a.href = url;\n        a.download = `trades_${new Date().toISOString().split(\"T\")[0]}.${format}`;\n        document.body.appendChild(a);\n        a.click();\n        window.URL.revokeObjectURL(url);\n        document.body.removeChild(a);\n      }\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  const getTradeTypeColor = (type) => {\n    switch (type?.toLowerCase()) {\n      case \"buy\":\n        return \"success\";\n      case \"sell\":\n        return \"error\";\n      case \"dividend\":\n        return \"info\";\n      case \"split\":\n        return \"warning\";\n      default:\n        return \"default\";\n    }\n  };\n\n\n  const formatCurrency = (amount) => {\n    if (amount === null || amount === undefined) return \"$0.00\";\n    return new Intl.NumberFormat(\"en-US\", {\n      style: \"currency\",\n      currency: \"USD\",\n    }).format(amount);\n  };\n\n  const formatPercent = (value) => {\n    if (value === null || value === undefined) return \"0.00%\";\n    return `${(value * 100).toFixed(2)}%`;\n  };\n\n  // Filtered and sorted trades\n  const filteredTrades = useMemo(() => {\n    if (!Array.isArray(trades)) return [];\n\n    let filtered = trades.filter((trade) => {\n      const matchesSearch =\n        !searchTerm ||\n        trade.symbol?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        trade.type?.toLowerCase().includes(searchTerm.toLowerCase());\n\n      const matchesType = typeFilter === \"all\" || trade.type === typeFilter;\n      const matchesStatus =\n        statusFilter === \"all\" || trade.status === statusFilter;\n\n      return matchesSearch && matchesType && matchesStatus;\n    });\n\n    // Sort trades\n    filtered.sort((a, b) => {\n      const aVal = a[sortBy] || \"\";\n      const bVal = b[sortBy] || \"\";\n\n      if (sortOrder === \"asc\") {\n        return aVal > bVal ? 1 : -1;\n      } else {\n        return aVal < bVal ? 1 : -1;\n      }\n    });\n\n    return filtered;\n  }, [trades, searchTerm, typeFilter, statusFilter, sortBy, sortOrder]);\n\n  const paginatedTrades = filteredTrades.slice(\n    page * rowsPerPage,\n    page * rowsPerPage + rowsPerPage\n  );\n\n\n  return (\n    <LocalizationProvider dateAdapter={AdapterDateFns}>\n      <Container maxWidth=\"xl\" sx={{ py: 3 }}>\n        {/* Header */}\n        <Box sx={{ mb: 3 }}>\n          <Typography\n            variant=\"h4\"\n            component=\"h1\"\n            gutterBottom\n            sx={{ fontWeight: \"bold\" }}\n          >\n            Trade History\n          </Typography>\n          <Typography variant=\"subtitle1\" color=\"text.secondary\">\n            Complete overview of your trading activity and performance\n          </Typography>\n        </Box>\n\n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 3 }} onClose={() => setError(null)}>\n            {error}\n          </Alert>\n        )}\n\n        {/* View Tabs */}\n        <Box sx={{ mb: 3, borderBottom: 1, borderColor: \"divider\" }}>\n          <Tabs value={viewMode} onChange={(e, newValue) => setViewMode(newValue)}>\n            <Tab label=\"All Trades\" value=\"trades\" />\n            <Tab label=\"Matched Pairs (FIFO)\" value=\"matched\" />\n          </Tabs>\n        </Box>\n\n        {/* Quick Stats Cards */}\n        {analytics && (\n          <Grid container spacing={3} sx={{ mb: 3 }}>\n            <Grid item xs={12} sm={6} md={3}>\n              <Card>\n                <CardContent>\n                  <Box sx={{ display: \"flex\", alignItems: \"center\" }}>\n                    <SwapHoriz color=\"primary\" sx={{ mr: 1 }} />\n                    <Typography variant=\"h6\">Total Trades</Typography>\n                  </Box>\n                  <Typography variant=\"h4\" sx={{ mt: 1 }}>\n                    {analytics.totalTrades || 0}\n                  </Typography>\n                </CardContent>\n              </Card>\n            </Grid>\n            <Grid item xs={12} sm={6} md={3}>\n              <Card>\n                <CardContent>\n                  <Box sx={{ display: \"flex\", alignItems: \"center\" }}>\n                    <MonetizationOn color=\"success\" sx={{ mr: 1 }} />\n                    <Typography variant=\"h6\">Total P&L</Typography>\n                  </Box>\n                  <Typography\n                    variant=\"h4\"\n                    sx={{\n                      mt: 1,\n                      color:\n                        analytics.totalPnl >= 0 ? \"success.main\" : \"error.main\",\n                    }}\n                  >\n                    {formatCurrency(analytics.totalPnl)}\n                  </Typography>\n                </CardContent>\n              </Card>\n            </Grid>\n            <Grid item xs={12} sm={6} md={3}>\n              <Card>\n                <CardContent>\n                  <Box sx={{ display: \"flex\", alignItems: \"center\" }}>\n                    <Assessment color=\"info\" sx={{ mr: 1 }} />\n                    <Typography variant=\"h6\">Win Rate</Typography>\n                  </Box>\n                  <Typography variant=\"h4\" sx={{ mt: 1 }}>\n                    {formatPercent(analytics.winRate)}\n                  </Typography>\n                </CardContent>\n              </Card>\n            </Grid>\n            <Grid item xs={12} sm={6} md={3}>\n              <Card>\n                <CardContent>\n                  <Box sx={{ display: \"flex\", alignItems: \"center\" }}>\n                    <Timeline color=\"secondary\" sx={{ mr: 1 }} />\n                    <Typography variant=\"h6\">Avg Hold Time</Typography>\n                  </Box>\n                  <Typography variant=\"h4\" sx={{ mt: 1 }}>\n                    {analytics.avgHoldTime || \"N/A\"}\n                  </Typography>\n                </CardContent>\n              </Card>\n            </Grid>\n          </Grid>\n        )}\n\n        {/* Action Buttons */}\n        <Box sx={{ mb: 3, display: \"flex\", gap: 2, flexWrap: \"wrap\" }}>\n          <Button\n            variant=\"outlined\"\n            startIcon={<Upload />}\n            onClick={() => setImportDialogOpen(true)}\n          >\n            Import Trades\n          </Button>\n          <Button\n            variant=\"outlined\"\n            startIcon={<Download />}\n            onClick={() => handleExportTrades(\"csv\")}\n          >\n            Export CSV\n          </Button>\n          <Button\n            variant=\"outlined\"\n            startIcon={<Download />}\n            onClick={() => handleExportTrades(\"json\")}\n          >\n            Export JSON\n          </Button>\n          <Button\n            variant=\"outlined\"\n            startIcon={<Refresh />}\n            onClick={handleRefresh}\n            disabled={loading}\n          >\n            Refresh\n          </Button>\n        </Box>\n\n        {/* Trade Activity Chart Section */}\n        <Grid container spacing={3} sx={{ mb: 4 }}>\n          <Grid item xs={12}>\n            <Card>\n              <CardHeader title=\"Trade Activity Over Time - Buy/Sell by Day\" />\n              <CardContent>\n                <ResponsiveContainer width=\"100%\" height={400}>\n                  <ComposedChart data={chartData}>\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"date\" angle={-45} textAnchor=\"end\" height={80} />\n                    <YAxis />\n                    <RechartsTooltip\n                      contentStyle={{ backgroundColor: \"#f5f5f5\", border: \"1px solid #ccc\" }}\n                      formatter={(value, name) => {\n                        if (name === \"buyValue\" || name === \"sellValue\") {\n                          return formatCurrency(value);\n                        }\n                        return value;\n                      }}\n                      labelFormatter={(label) => `Date: ${label}`}\n                    />\n                    <Bar dataKey=\"buyValue\" fill=\"#4CAF50\" name=\"Buy Value\" />\n                    <Bar dataKey=\"sellValue\" fill=\"#F44336\" name=\"Sell Value\" />\n                    <Line dataKey=\"buyCount\" stroke=\"#2196F3\" yAxisId=\"right\" strokeWidth={2} name=\"Buy Count\" />\n                    <Line dataKey=\"sellCount\" stroke=\"#FF6F00\" yAxisId=\"right\" strokeWidth={2} name=\"Sell Count\" />\n                    <YAxis yAxisId=\"right\" orientation=\"right\" />\n                  </ComposedChart>\n                </ResponsiveContainer>\n                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 2 }}>\n                  Green bars = Buy Values | Red bars = Sell Values | Blue line = # Buys | Orange line = # Sells\n                </Typography>\n              </CardContent>\n            </Card>\n          </Grid>\n        </Grid>\n\n        {/* Analytics Dashboard Section */}\n        {analytics && (\n          <Grid container spacing={3} sx={{ mb: 4 }}>\n            <Grid item xs={12} md={6}>\n              <Card>\n                <CardHeader title=\"Trading Statistics\" />\n                <CardContent>\n                  <Box\n                    sx={{ display: \"flex\", flexDirection: \"column\", gap: 2 }}\n                  >\n                    <Box\n                      sx={{\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                      }}\n                    >\n                      <Typography>Total Trades:</Typography>\n                      <Typography fontWeight=\"bold\">\n                        {analytics.totalTrades}\n                      </Typography>\n                    </Box>\n                    <Box\n                      sx={{\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                      }}\n                    >\n                      <Typography>Winning Trades:</Typography>\n                      <Typography fontWeight=\"bold\" color=\"success.main\">\n                        {analytics.winningTrades}\n                      </Typography>\n                    </Box>\n                    <Box\n                      sx={{\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                      }}\n                    >\n                      <Typography>Losing Trades:</Typography>\n                      <Typography fontWeight=\"bold\" color=\"error.main\">\n                        {analytics.losingTrades}\n                      </Typography>\n                    </Box>\n                    <Box\n                      sx={{\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                      }}\n                    >\n                      <Typography>Average Win:</Typography>\n                      <Typography fontWeight=\"bold\">\n                        {formatCurrency(analytics.avgWin)}\n                      </Typography>\n                    </Box>\n                    <Box\n                      sx={{\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                      }}\n                    >\n                      <Typography>Average Loss:</Typography>\n                      <Typography fontWeight=\"bold\">\n                        {formatCurrency(analytics.avgLoss)}\n                      </Typography>\n                    </Box>\n                    <Box\n                      sx={{\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                      }}\n                    >\n                      <Typography>Profit Factor:</Typography>\n                      <Typography fontWeight=\"bold\">\n                        {analytics.profitFactor}\n                      </Typography>\n                    </Box>\n                  </Box>\n                </CardContent>\n              </Card>\n            </Grid>\n\n            <Grid item xs={12} md={6}>\n              <Card>\n                <CardHeader title=\"Position Summary\" />\n                <CardContent>\n                  <Box\n                    sx={{\n                      display: \"flex\",\n                      flexDirection: \"column\",\n                      gap: 2,\n                    }}\n                  >\n                    <Box\n                      sx={{\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                      }}\n                    >\n                      <Typography>Avg Buy Order Value:</Typography>\n                      <Typography fontWeight=\"bold\">\n                        {formatCurrency(\n                          analytics.avgLoss\n                        )}\n                      </Typography>\n                    </Box>\n                    <Box\n                      sx={{\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                      }}\n                    >\n                      <Typography>Avg Sell Order Value:</Typography>\n                      <Typography fontWeight=\"bold\">\n                        {formatCurrency(\n                          analytics.avgWin\n                        )}\n                      </Typography>\n                    </Box>\n                    <Box\n                      sx={{\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                      }}\n                    >\n                      <Typography>Net Closed P&L:</Typography>\n                      <Typography\n                        fontWeight=\"bold\"\n                        color={\n                          analytics.totalPnl >= 0\n                            ? \"success.main\"\n                            : \"error.main\"\n                        }\n                      >\n                        {formatCurrency(analytics.totalPnl)}\n                      </Typography>\n                    </Box>\n                    <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 1 }}>\n                      Based on buy/sell order values\n                    </Typography>\n                  </Box>\n                </CardContent>\n              </Card>\n            </Grid>\n          </Grid>\n        )}\n\n\n        {/* Trade List Section - All Trades View */}\n        {viewMode === \"trades\" && (\n          <>\n            {/* Filters */}\n            <Card sx={{ mb: 3 }}>\n            <CardContent>\n              <Box\n                sx={{\n                  display: \"flex\",\n                  gap: 2,\n                  flexWrap: \"wrap\",\n                  alignItems: \"center\",\n                }}\n              >\n                <TextField\n                  size=\"small\"\n                  placeholder=\"Search by symbol or type...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  InputProps={{\n                    startAdornment: (\n                      <InputAdornment position=\"start\">\n                        <Search />\n                      </InputAdornment>\n                    ),\n                  }}\n                  sx={{ minWidth: 200 }}\n                />\n\n                <FormControl size=\"small\" sx={{ minWidth: 120 }}>\n                  <InputLabel>Type</InputLabel>\n                  <Select\n                    value={typeFilter}\n                    label=\"Type\"\n                    onChange={(e) => setTypeFilter(e.target.value)}\n                  >\n                    <MenuItem value=\"all\">All Types</MenuItem>\n                    <MenuItem value=\"buy\">Buy</MenuItem>\n                    <MenuItem value=\"sell\">Sell</MenuItem>\n                    <MenuItem value=\"dividend\">Dividend</MenuItem>\n                    <MenuItem value=\"split\">Split</MenuItem>\n                  </Select>\n                </FormControl>\n\n                <FormControl size=\"small\" sx={{ minWidth: 120 }}>\n                  <InputLabel>Status</InputLabel>\n                  <Select\n                    value={statusFilter}\n                    label=\"Status\"\n                    onChange={(e) => setStatusFilter(e.target.value)}\n                  >\n                    <MenuItem value=\"all\">All Status</MenuItem>\n                    <MenuItem value=\"filled\">Filled</MenuItem>\n                    <MenuItem value=\"pending\">Pending</MenuItem>\n                    <MenuItem value=\"cancelled\">Cancelled</MenuItem>\n                    <MenuItem value=\"partial\">Partial</MenuItem>\n                  </Select>\n                </FormControl>\n\n                <Button\n                  variant=\"outlined\"\n                  startIcon={<FilterList />}\n                  onClick={() => setShowAdvancedFilters(!showAdvancedFilters)}\n                >\n                  Filters\n                </Button>\n              </Box>\n\n              {showAdvancedFilters && (\n                <Box\n                  sx={{ mt: 2, pt: 2, borderTop: 1, borderColor: \"divider\" }}\n                >\n                  <Grid container spacing={2}>\n                    <Grid item xs={12} sm={6}>\n                      <DatePicker\n                        label=\"Start Date\"\n                        value={dateFilter.start}\n                        onChange={(date) =>\n                          setDateFilter((prev) => ({ ...prev, start: date }))\n                        }\n                        renderInput={(params) => (\n                          <TextField {...params} fullWidth />\n                        )}\n                      />\n                    </Grid>\n                    <Grid item xs={12} sm={6}>\n                      <DatePicker\n                        label=\"End Date\"\n                        value={dateFilter.end}\n                        onChange={(date) =>\n                          setDateFilter((prev) => ({ ...prev, end: date }))\n                        }\n                        renderInput={(params) => (\n                          <TextField {...params} fullWidth />\n                        )}\n                      />\n                    </Grid>\n                  </Grid>\n                </Box>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Trade Table */}\n          <Card>\n            <TableContainer>\n              <Table>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>\n                      <TableSortLabel\n                        active={sortBy === \"symbol\"}\n                        direction={sortBy === \"symbol\" ? sortOrder : \"asc\"}\n                        onClick={() => {\n                          setSortBy(\"symbol\");\n                          setSortOrder(\n                            sortBy === \"symbol\" && sortOrder === \"asc\"\n                              ? \"desc\"\n                              : \"asc\"\n                          );\n                        }}\n                      >\n                        Symbol\n                      </TableSortLabel>\n                    </TableCell>\n                    <TableCell>Type</TableCell>\n                    <TableCell>Quantity</TableCell>\n                    <TableCell>Price</TableCell>\n                    <TableCell>Value</TableCell>\n                    <TableCell>Status</TableCell>\n                    <TableCell>\n                      <TableSortLabel\n                        active={sortBy === \"executedAt\"}\n                        direction={sortBy === \"executedAt\" ? sortOrder : \"asc\"}\n                        onClick={() => {\n                          setSortBy(\"executedAt\");\n                          setSortOrder(\n                            sortBy === \"executedAt\" && sortOrder === \"asc\"\n                              ? \"desc\"\n                              : \"asc\"\n                          );\n                        }}\n                      >\n                        Date\n                      </TableSortLabel>\n                    </TableCell>\n                    <TableCell>Actions</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {loading ? (\n                    <TableRow>\n                      <TableCell colSpan={8} align=\"center\">\n                        <CircularProgress />\n                      </TableCell>\n                    </TableRow>\n                  ) : (paginatedTrades?.length || 0) === 0 ? (\n                    <TableRow>\n                      <TableCell colSpan={8} align=\"center\">\n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                          No trades found\n                        </Typography>\n                      </TableCell>\n                    </TableRow>\n                  ) : (\n                    (paginatedTrades || []).map((trade) => (\n                      <TableRow key={trade.id} hover>\n                        <TableCell>\n                          <Typography variant=\"body2\" fontWeight=\"bold\">\n                            {trade.symbol}\n                          </Typography>\n                        </TableCell>\n                        <TableCell>\n                          <Chip\n                            label={trade.type}\n                            color={getTradeTypeColor(trade.type)}\n                            size=\"small\"\n                            icon={\n                              trade.type === \"buy\" ? (\n                                <TrendingUp />\n                              ) : (\n                                <TrendingDown />\n                              )\n                            }\n                          />\n                        </TableCell>\n                        <TableCell>{trade.quantity}</TableCell>\n                        <TableCell>{formatCurrency(trade.execution_price)}</TableCell>\n                        <TableCell>{formatCurrency(trade.order_value)}</TableCell>\n                        <TableCell>\n                          <Chip\n                            label=\"Filled\"\n                            color=\"success\"\n                            size=\"small\"\n                          />\n                        </TableCell>\n                        <TableCell>\n                          {new Date(trade.execution_date).toLocaleDateString()}\n                        </TableCell>\n                        <TableCell>\n                          <IconButton\n                            size=\"small\"\n                            onClick={() => {\n                              setSelectedTrade(trade);\n                              setDetailsOpen(true);\n                            }}\n                          >\n                            <Analytics />\n                          </IconButton>\n                        </TableCell>\n                      </TableRow>\n                    ))\n                  )}\n                </TableBody>\n              </Table>\n            </TableContainer>\n            <TablePagination\n              rowsPerPageOptions={[10, 25, 50, 100]}\n              component=\"div\"\n              count={filteredTrades?.length || 0}\n              rowsPerPage={rowsPerPage}\n              page={page}\n              onPageChange={(e, newPage) => setPage(newPage)}\n              onRowsPerPageChange={(e) => {\n                setRowsPerPage(parseInt(e.target.value, 10));\n                setPage(0);\n              }}\n            />\n          </Card>\n          </>\n        )}\n\n        {/* Matched Pairs Section - Matched Pairs View */}\n        {viewMode === \"matched\" && (\n          <>\n            {matchedPairsLoading ? (\n              <Card sx={{ p: 3, textAlign: \"center\" }}>\n                <CircularProgress />\n                <Typography sx={{ mt: 2 }}>Loading matched pairs...</Typography>\n              </Card>\n            ) : matchedPairsError ? (\n              <Alert severity=\"error\" sx={{ mb: 3 }}>\n                {matchedPairsError}\n              </Alert>\n            ) : (\n              <>\n                {/* Matched Pairs Filters */}\n                <Card sx={{ mb: 3 }}>\n                  <CardContent>\n                    <Box\n                      sx={{\n                        display: \"flex\",\n                        gap: 2,\n                        flexWrap: \"wrap\",\n                        alignItems: \"center\",\n                      }}\n                    >\n                      <TextField\n                        size=\"small\"\n                        placeholder=\"Search by symbol or date...\"\n                        value={matchedPairsSearchTerm}\n                        onChange={(e) => setMatchedPairsSearchTerm(e.target.value)}\n                        InputProps={{\n                          startAdornment: (\n                            <InputAdornment position=\"start\">\n                              <Search />\n                            </InputAdornment>\n                          ),\n                        }}\n                        sx={{ minWidth: 200 }}\n                      />\n\n                      <FormControl size=\"small\" sx={{ minWidth: 150 }}>\n                        <InputLabel>P&L Filter</InputLabel>\n                        <Select\n                          value={matchedPairsFilter}\n                          label=\"P&L Filter\"\n                          onChange={(e) => setMatchedPairsFilter(e.target.value)}\n                        >\n                          <MenuItem value=\"all\">All Pairs</MenuItem>\n                          <MenuItem value=\"profit\">Profits Only</MenuItem>\n                          <MenuItem value=\"loss\">Losses Only</MenuItem>\n                          <MenuItem value=\"wash-sale\">Wash Sales Only</MenuItem>\n                        </Select>\n                      </FormControl>\n\n                      <Button\n                        variant=\"outlined\"\n                        onClick={() => {\n                          setMatchedPairsSearchTerm(\"\");\n                          setMatchedPairsFilter(\"all\");\n                        }}\n                      >\n                        Clear Filters\n                      </Button>\n                    </Box>\n                  </CardContent>\n                </Card>\n\n                {/* Matched Pairs Table */}\n                <Card>\n                  <TableContainer>\n                  <Table>\n                    <TableHead>\n                      <TableRow sx={{ backgroundColor: \"#f5f5f5\" }}>\n                        <TableCell><strong>Symbol</strong></TableCell>\n                        <TableCell><strong>Buy Date</strong></TableCell>\n                        <TableCell align=\"right\"><strong>Buy Price</strong></TableCell>\n                        <TableCell><strong>Sell Date</strong></TableCell>\n                        <TableCell align=\"right\"><strong>Sell Price</strong></TableCell>\n                        <TableCell align=\"right\"><strong>Qty</strong></TableCell>\n                        <TableCell align=\"right\"><strong>Cost Basis</strong></TableCell>\n                        <TableCell align=\"right\"><strong>Proceeds</strong></TableCell>\n                        <TableCell align=\"right\"><strong>P&L</strong></TableCell>\n                        <TableCell align=\"right\"><strong>Hold Days</strong></TableCell>\n                        <TableCell><strong>Tax Type</strong></TableCell>\n                        <TableCell><strong>Wash Sale</strong></TableCell>\n                      </TableRow>\n                    </TableHead>\n                    <TableBody>\n                      {filteredMatchedPairs && filteredMatchedPairs.length > 0 ? (\n                        filteredMatchedPairs.map((pair, index) => {\n                          const pnlValue = parseFloat(pair.pnl);\n                          const isProfit = pnlValue >= 0;\n                          return (\n                            <TableRow key={index} hover>\n                              <TableCell>\n                                <Typography variant=\"body2\" fontWeight=\"bold\">\n                                  {pair.symbol}\n                                </Typography>\n                              </TableCell>\n                              <TableCell>\n                                <Typography variant=\"body2\">\n                                  {new Date(pair.buyDate).toLocaleDateString()}\n                                </Typography>\n                              </TableCell>\n                              <TableCell align=\"right\">\n                                <Typography variant=\"body2\">\n                                  {formatCurrency(pair.buyPrice)}\n                                </Typography>\n                              </TableCell>\n                              <TableCell>\n                                <Typography variant=\"body2\">\n                                  {new Date(pair.sellDate).toLocaleDateString()}\n                                </Typography>\n                              </TableCell>\n                              <TableCell align=\"right\">\n                                <Typography variant=\"body2\">\n                                  {formatCurrency(pair.sellPrice)}\n                                </Typography>\n                              </TableCell>\n                              <TableCell align=\"right\">\n                                <Typography variant=\"body2\">\n                                  {pair.quantity}\n                                </Typography>\n                              </TableCell>\n                              <TableCell align=\"right\">\n                                <Typography variant=\"body2\">\n                                  {formatCurrency(pair.costBasis)}\n                                </Typography>\n                              </TableCell>\n                              <TableCell align=\"right\">\n                                <Typography variant=\"body2\">\n                                  {formatCurrency(pair.proceeds)}\n                                </Typography>\n                              </TableCell>\n                              <TableCell align=\"right\">\n                                <Typography\n                                  variant=\"body2\"\n                                  fontWeight=\"bold\"\n                                  sx={{\n                                    color: isProfit ? \"success.main\" : \"error.main\",\n                                  }}\n                                >\n                                  {isProfit ? \"+\" : \"\"}{formatCurrency(pnlValue)}\n                                </Typography>\n                              </TableCell>\n                              <TableCell align=\"right\">\n                                <Typography variant=\"body2\">\n                                  {pair.holdDays}\n                                </Typography>\n                              </TableCell>\n                              <TableCell>\n                                <Chip\n                                  label={pair.taxType}\n                                  size=\"small\"\n                                  color={pair.taxType === \"LONG-TERM\" ? \"success\" : \"warning\"}\n                                  variant=\"outlined\"\n                                />\n                              </TableCell>\n                              <TableCell>\n                                {pair.isWashSale ? (\n                                  <Chip\n                                    label=\"Wash Sale\"\n                                    size=\"small\"\n                                    color=\"error\"\n                                    variant=\"outlined\"\n                                  />\n                                ) : (\n                                  <Typography variant=\"body2\"></Typography>\n                                )}\n                              </TableCell>\n                            </TableRow>\n                          );\n                        })\n                      ) : (\n                        <TableRow>\n                          <TableCell colSpan={12} align=\"center\">\n                            <Typography variant=\"body2\" color=\"text.secondary\">\n                              No matched pairs found\n                            </Typography>\n                          </TableCell>\n                        </TableRow>\n                      )}\n                    </TableBody>\n                  </Table>\n                </TableContainer>\n                </Card>\n              </>\n            )}\n          </>\n        )}\n\n        {/* Import Dialog */}\n        <Dialog\n          open={importDialogOpen}\n          onClose={() => setImportDialogOpen(false)}\n        >\n          <DialogTitle>Import Trades</DialogTitle>\n          <DialogContent>\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n              Import your trades from connected brokers. This will sync your\n              trade history and update your analytics.\n            </Typography>\n            <Alert severity=\"info\">\n              Make sure your broker API keys are configured in Settings before\n              importing.\n            </Alert>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={() => setImportDialogOpen(false)}>Cancel</Button>\n            <Button variant=\"contained\" onClick={handleImportTrades}>\n              Import from Alpaca\n            </Button>\n          </DialogActions>\n        </Dialog>\n\n        {/* Trade Details Dialog */}\n        <Dialog\n          open={detailsOpen}\n          onClose={() => setDetailsOpen(false)}\n          maxWidth=\"md\"\n          fullWidth\n        >\n          <DialogTitle>Trade Details</DialogTitle>\n          <DialogContent>\n            {selectedTrade && (\n              <Grid container spacing={2} sx={{ mt: 1 }}>\n                <Grid item xs={12} sm={6}>\n                  <Typography variant=\"subtitle2\">Symbol</Typography>\n                  <Typography variant=\"body2\">\n                    {selectedTrade.symbol}\n                  </Typography>\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <Typography variant=\"subtitle2\">Type</Typography>\n                  <Typography variant=\"body2\">{selectedTrade.type}</Typography>\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <Typography variant=\"subtitle2\">Quantity</Typography>\n                  <Typography variant=\"body2\">\n                    {selectedTrade.quantity}\n                  </Typography>\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <Typography variant=\"subtitle2\">Execution Price</Typography>\n                  <Typography variant=\"body2\">\n                    {formatCurrency(selectedTrade.execution_price)}\n                  </Typography>\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <Typography variant=\"subtitle2\">Total Value</Typography>\n                  <Typography variant=\"body2\">\n                    {formatCurrency(selectedTrade.order_value)}\n                  </Typography>\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <Typography variant=\"subtitle2\">P&L</Typography>\n                  <Typography\n                    variant=\"body2\"\n                    color=\"text.secondary\"\n                  >\n                    {formatCurrency(0)}\n                  </Typography>\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <Typography variant=\"subtitle2\">Execution Date</Typography>\n                  <Typography variant=\"body2\">\n                    {new Date(selectedTrade.execution_date).toLocaleString()}\n                  </Typography>\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <Typography variant=\"subtitle2\">Status</Typography>\n                  <Typography variant=\"body2\">\n                    Filled\n                  </Typography>\n                </Grid>\n                {selectedTrade.commission ? (\n                  <Grid item xs={12} sm={6}>\n                    <Typography variant=\"subtitle2\">Commission</Typography>\n                    <Typography variant=\"body2\">\n                      {formatCurrency(selectedTrade.commission)}\n                    </Typography>\n                  </Grid>\n                ) : null}\n                <Grid item xs={12} sm={6}>\n                  <Typography variant=\"subtitle2\">Order ID</Typography>\n                  <Typography variant=\"body2\">\n                    {selectedTrade.order_id}\n                  </Typography>\n                </Grid>\n              </Grid>\n            )}\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={() => setDetailsOpen(false)}>Close</Button>\n          </DialogActions>\n        </Dialog>\n      </Container>\n    </LocalizationProvider>\n  );\n};\n\nexport default TradeHistory;\n","/**\n * Centralized error logging utility for consistent error handling across all pages\n * Enhanced with circular reference protection and comprehensive error details\n */\n\n/**\n * Safely stringify an object, handling circular references\n * @param {any} obj - Object to stringify\n * @param {number} maxDepth - Maximum depth to traverse\n * @returns {string} Safe JSON string\n */\nconst safeStringify = (obj, _maxDepth = 3) => {\n  const seen = new WeakSet();\n\n  return JSON.stringify(\n    obj,\n    (key, value) => {\n      if (value === null || value === undefined) return value;\n\n      if (typeof value === \"function\") {\n        return `[Function: ${value.name || \"anonymous\"}]`;\n      }\n\n      if (typeof value === \"object\") {\n        if (seen.has(value)) {\n          return \"[Circular Reference]\";\n        }\n        seen.add(value);\n\n        // Handle special objects safely\n        if (value instanceof Error) {\n          return {\n            name: value.name,\n            message: value.message,\n            stack: value.stack,\n            code: value.code,\n          };\n        }\n\n        if (value instanceof Date) {\n          return value.toISOString();\n        }\n\n        if (value instanceof Element) {\n          return `[Element: ${value.tagName}]`;\n        }\n      }\n\n      return value;\n    },\n    2\n  );\n};\n\n/**\n * Log API/network error with detailed context\n * @param {string} component - The component/page name (e.g., 'StockExplorer', 'Dashboard')\n * @param {string} operation - The operation that failed (e.g., 'fetchStockData', 'loadAnalystRatings')\n * @param {Error|any} error - The error object or message\n * @param {object} context - Additional context (URL, params, etc.)\n */\nexport const logApiError = (component, operation, error, context = {}) => {\n  const timestamp = new Date().toISOString();\n  const errorMessage = error?.message || error?.toString() || \"Unknown error\";\n  const errorStack = error?.stack || \"No stack trace available\";\n\n  // Log structured error information (using console.log to avoid recursion)\n  if (import.meta.env && import.meta.env.DEV) {\n    console.group(` ${component} - ${operation} failed`);\n    console.log(` Timestamp: ${timestamp}`);\n    console.log(` Component: ${component}`);\n    console.log(` Operation: ${operation}`);\n    console.log(` Error: ${errorMessage}`);\n\n    // Log additional context if provided (with safe stringification)\n    if (context.url) console.log(` URL: ${context.url}`);\n    if (context.params)\n      console.log(` Params:`, safeStringify(context.params));\n    if (context.response)\n      console.log(` Response:`, safeStringify(context.response));\n    if (context.status) console.log(` Status: ${context.status}`);\n\n    // Log full error details safely (avoid circular references)\n    try {\n      console.log(` Full Error Details:`, safeStringify(error));\n    } catch (stringifyError) {\n      console.log(` Full Error (safe fallback):`, {\n        name: error?.name,\n        message: error?.message,\n        code: error?.code,\n        isAxiosError: error?.isAxiosError,\n      });\n    }\n\n    console.log(` Stack Trace:`, errorStack);\n  }\n\n  // Additional axios error details if available (with safe stringification)\n  if (error?.isAxiosError) {\n    const axiosDetails = {\n      url: error.config?.url,\n      method: error.config?.method,\n      baseURL: error.config?.baseURL,\n      timeout: error.config?.timeout,\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n      responseData: error.response?.data,\n    };\n    if (import.meta.env && import.meta.env.DEV) {\n      console.log(` Axios Error Details:`, safeStringify(axiosDetails));\n    }\n  }\n\n  if (import.meta.env && import.meta.env.DEV) {\n    console.groupEnd();\n\n    // Also log a simple version for easier searching (with safe stringification)\n    const simplifiedLog = {\n      error: errorMessage,\n      context: safeStringify(context),\n      timestamp,\n    };\n    console.log(\n      ` ${component} - ${operation} failed:`,\n      safeStringify(simplifiedLog)\n    );\n  }\n};\n\n/**\n * Log query error from React Query with additional context\n * @param {string} component - The component/page name\n * @param {string} queryKey - The query key or operation name\n * @param {Error} error - The query error\n * @param {object} context - Additional context\n */\nexport const logQueryError = (component, queryKey, error, context = {}) => {\n  logApiError(component, `Query[${queryKey}]`, error, {\n    queryKey,\n    ...context,\n  });\n};\n\n/**\n * Log successful API operation (for debugging/monitoring)\n * @param {string} component - The component/page name\n * @param {string} operation - The operation that succeeded\n * @param {object} result - The result data (optional)\n * @param {object} context - Additional context\n */\nexport const logApiSuccess = (\n  component,\n  operation,\n  result = null,\n  context = {}\n) => {\n  const timestamp = new Date().toISOString();\n\n  const successLog = {\n    timestamp,\n    component,\n    operation,\n    resultSize: result\n      ? Array.isArray(result)\n        ? result?.length || 0\n        : Object.keys(result).length\n      : \"N/A\",\n    context,\n  };\n  if (import.meta.env && import.meta.env.DEV) {\n    console.log(\n      ` ${component} - ${operation} succeeded`,\n      safeStringify(successLog)\n    );\n  }\n};\n\n/**\n * Create an error logger bound to a specific component\n * @param {string} component - The component name\n * @returns {object} Object with logging methods bound to the component\n */\nexport const createComponentLogger = (component) => ({\n  error: (operation, error, context) =>\n    logApiError(component, operation, error, context),\n  queryError: (queryKey, error, context) =>\n    logQueryError(component, queryKey, error, context),\n  success: (operation, result, context) =>\n    logApiSuccess(component, operation, result, context),\n  info: (message, context) =>\n    import.meta.env &&\n    import.meta.env.DEV &&\n    console.log(` [${component}] ${message}`, context),\n});\n\nexport default {\n  logApiError,\n  logQueryError,\n  logApiSuccess,\n  createComponentLogger,\n};\n","import { useState, useEffect, useCallback, useMemo, useRef } from \"react\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useDocumentTitle } from \"../hooks/useDocumentTitle\";\nimport {\n  Container,\n  Paper,\n  Tabs,\n  Tab,\n  Box,\n  Typography,\n  Grid,\n  Card,\n  CardContent,\n  CardHeader,\n  Button,\n  TextField,\n  Switch,\n  FormControlLabel,\n  Divider,\n  Alert,\n  Chip,\n  IconButton,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Avatar,\n  CircularProgress,\n  Snackbar,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  ListItemSecondaryAction,\n} from \"@mui/material\";\nimport {\n  AccountCircle,\n  Security,\n  Api,\n  Notifications,\n  Palette,\n  Shield,\n  Visibility,\n  VisibilityOff,\n  Download,\n  Warning,\n  CheckCircle,\n  Save,\n  Cancel,\n  Add,\n  Delete,\n} from \"@mui/icons-material\";\nimport api, { getApiConfig } from \"../services/api\";\nimport { createComponentLogger } from \"../utils/errorLogger\";\n\nfunction TabPanel({ children, value, index, ...other }) {\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`settings-tabpanel-${index}`}\n      aria-labelledby={`settings-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box sx={{ py: 3 }}>{children}</Box>}\n    </div>\n  );\n}\n\nconst Settings = () => {\n  useDocumentTitle(\"Settings\");\n  const { user, isAuthenticated, isLoading, logout, checkAuthState } =\n    useAuth();\n  const navigate = useNavigate();\n\n  // Memoize API config to prevent new object creation on every render\n  const apiConfig = useMemo(() => getApiConfig(), []);\n  const { apiUrl } = apiConfig;\n\n  // Memoize logger to prevent useCallback recreation on every render\n  const logger = useMemo(() => createComponentLogger(\"Settings\"), []);\n\n  const [activeTab, setActiveTab] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [snackbar, setSnackbar] = useState({\n    open: false,\n    message: \"\",\n    severity: \"success\",\n  });\n  const [_apiKeys, _setApiKeys] = useState([]);\n  const [addApiKeyDialog, setAddApiKeyDialog] = useState(false);\n  const [showApiKeys, setShowApiKeys] = useState({});\n\n  // New API key form\n  const [newApiKey, setNewApiKey] = useState({\n    brokerName: \"\",\n    apiKey: \"\",\n    apiSecret: \"\",\n    sandbox: true,\n  });\n\n  // User profile form\n  const [profileData, setProfileData] = useState({\n    firstName: \"\",\n    lastName: \"\",\n    email: \"\",\n    phone: \"\",\n    timezone: \"America/New_York\",\n    currency: \"USD\",\n  });\n\n  // Notification preferences\n  const [passwordDialog, setPasswordDialog] = useState({\n    open: false,\n    currentPassword: \"\",\n    newPassword: \"\",\n    confirmPassword: \"\",\n    errors: {},\n  });\n  const [notifications, setNotifications] = useState({\n    email: true,\n    push: true,\n    priceAlerts: true,\n    portfolioUpdates: true,\n    marketNews: false,\n    weeklyReports: true,\n  });\n\n  // Theme preferences\n  const [themeSettings, setThemeSettings] = useState({\n    darkMode: false,\n    primaryColor: \"#1976d2\",\n    chartStyle: \"candlestick\",\n    layout: \"standard\",\n  });\n\n  // Authentication guard - disabled\n  // useEffect(() => {\n  //   if (!isLoading && !isAuthenticated) {\n  //     navigate('/login');\n  //   }\n  // }, [isAuthenticated, isLoading, navigate]);\n\n  // Define loadApiKeys first since it's referenced in loadUserSettings\n  const loadApiKeys = useCallback(async () => {\n    try {\n      const response = await api.getApiKeys();\n\n      if (response && response.ok) {\n        // Convert object to array format that the component expects\n        const apiKeysData = response.data || {};\n        const apiKeysArray = Object.entries(apiKeysData).map(([brokerName, keyData]) => ({\n          brokerName,\n          ...keyData,\n          createdAt: keyData.lastValidated || new Date().toISOString()\n        }));\n        _setApiKeys(apiKeysArray);\n      } else {\n        if (import.meta.env && import.meta.env.DEV)\n          console.error(\n            \"API keys endpoint returned non-OK status:\",\n            response?.status || \"unknown\"\n          );\n        throw new Error(\n          `API keys endpoint failed: ${response?.status || \"unknown\"}`\n        );\n      }\n    } catch (error) {\n      logger.error(\"Load API Keys Failed\", error, {\n        userId: user?.sub || user?.id,\n        apiUrl,\n        operation: \"loadApiKeys\",\n        responseStatus: error.response?.status,\n        responseData: error.response?.data,\n      });\n      _setApiKeys([]); // Set empty array and let user see there's no data\n      throw error; // Re-throw so parent catch can handle it\n    }\n  }, [apiUrl, logger, user?.id, user?.sub]); // Dependencies required by ESLint\n\n  // Define loadUserSettings after loadApiKeys with useCallback to prevent infinite loops\n  const loadUserSettings = useCallback(async () => {\n    try {\n      setLoading(true);\n\n      // Load user profile data\n      setProfileData({\n        firstName: user?.firstName || \"\",\n        lastName: user?.lastName || \"\",\n        email: user?.email || \"\",\n        phone: user?.phone || \"\",\n        timezone: user?.timezone || \"America/New_York\",\n        currency: user?.currency || \"USD\",\n      });\n\n      // Load API keys with error handling\n      try {\n        await loadApiKeys();\n      } catch (apiError) {\n        logger.error(\"API Keys Loading Failed\", apiError, {\n          userId: user?.sub || user?.id,\n          apiUrl,\n          operation: \"loadApiKeys\",\n          context: \"settings initialization\",\n        });\n        showSnackbar(`Failed to load API keys: ${apiError.message}`, \"error\");\n        // Don't fail the entire settings load if API keys fail\n      }\n\n      // Load notification preferences\n      try {\n        const notifResponse = await fetch(\n          `${apiUrl}/api/settings/preferences`,\n          {\n            headers: {\n              Authorization: `Bearer ${user?.tokens?.accessToken || \"dev-token\"}`,\n            },\n          }\n        );\n        if (notifResponse.ok) {\n          const notifData = await notifResponse.json();\n          setNotifications((prev) => ({ ...prev, ...notifData.preferences }));\n        } else if (notifResponse.status === 404) {\n          // Endpoint doesn't exist - stop trying, use defaults\n          console.log(\"Notifications endpoint not implemented, using defaults\");\n        }\n      } catch (error) {\n        console.log(\"Failed to load notification preferences, using defaults\");\n      }\n\n      // Load theme preferences\n      try {\n        const themeResponse = await fetch(\n          `${apiUrl}/api/settings/preferences`,\n          {\n            headers: {\n              Authorization: `Bearer ${user?.tokens?.accessToken || \"dev-token\"}`,\n            },\n          }\n        );\n        if (themeResponse.ok) {\n          const themeData = await themeResponse.json();\n          setThemeSettings((prev) => ({ ...prev, ...themeData.preferences }));\n        } else if (themeResponse.status === 404) {\n          // Endpoint doesn't exist - stop trying, use defaults\n          console.log(\"Theme endpoint not implemented, using defaults\");\n        }\n      } catch (error) {\n        console.log(\"Failed to load theme preferences, using defaults\");\n      }\n    } catch (error) {\n      if (import.meta.env && import.meta.env.DEV)\n        console.error(\"Error loading settings:\", error);\n      showSnackbar(\"Failed to load settings\", \"error\");\n\n      // Set empty profile data to show there's an issue\n      setProfileData({\n        firstName: \"\",\n        lastName: \"\",\n        email: \"\",\n        phone: \"\",\n        timezone: \"America/New_York\",\n        currency: \"USD\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  }, [\n    apiUrl,\n    logger,\n    loadApiKeys,\n    user?.currency,\n    user?.email,\n    user?.firstName,\n    user?.id,\n    user?.lastName,\n    user?.phone,\n    user?.sub,\n    user?.timezone,\n    user?.tokens?.accessToken,\n  ]); // Dependencies required by ESLint\n\n  // Load settings when authenticated - USING REF TO AVOID USER OBJECT DEPENDENCY\n  const hasLoadedRef = useRef(false);\n  const loadUserSettingsRef = useRef(loadUserSettings);\n\n  // Update ref when loadUserSettings changes\n  useEffect(() => {\n    loadUserSettingsRef.current = loadUserSettings;\n  }, [loadUserSettings]);\n\n  useEffect(() => {\n    // Only load if authenticated and we haven't loaded yet\n    if (isAuthenticated && !hasLoadedRef.current && !loading) {\n      hasLoadedRef.current = true; // Mark as loaded immediately\n\n      logger.info(\"User authenticated, loading settings\", {\n        userId: user?.sub || user?.id,\n        email: user?.email,\n      });\n      loadUserSettingsRef.current();\n    }\n  }, [\n    isAuthenticated,\n    loading,\n    logger,\n    user?.email,\n    user?.id,\n    user?.sub,\n  ]); // Removed loadUserSettings from dependencies to prevent infinite loop\n\n  // Separate session recovery logic (production only)\n  useEffect(() => {\n    if (\n      !isLoading &&\n      !user &&\n      !isAuthenticated &&\n      import.meta.env &&\n      import.meta.env.PROD\n    ) {\n      logger.error(\n        \"No authenticated session found\",\n        new Error(\"Session check failed\"),\n        {\n          isAuthenticated,\n          isLoading,\n          hasUser: !!user,\n        }\n      );\n      // Only attempt recovery once, don't include checkAuthState in dependencies\n      checkAuthState().catch((error) => {\n        logger.error(\"Session recovery failed\", error);\n      });\n    }\n  }, [isLoading, isAuthenticated, user, checkAuthState, logger]); // Dependencies required by ESLint\n\n  const handleTabChange = (event, newValue) => {\n    setActiveTab(newValue);\n  };\n\n  const showSnackbar = (message, severity = \"success\") => {\n    setSnackbar({ open: true, message, severity });\n  };\n\n  const handleSaveProfile = async () => {\n    try {\n      setLoading(true);\n\n      const response = await fetch(`${apiUrl}/api/user/profile`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${user?.tokens?.accessToken || \"dev-token\"}`,\n        },\n        body: JSON.stringify(profileData),\n      });\n\n      if (response.ok) {\n        const updatedUser = await response.json();\n        showSnackbar(\"Profile updated successfully\");\n\n        // Update the user context with new data\n        if (updatedUser.user) {\n          // This would typically update the auth context\n          // For now, just refresh the settings\n          await loadUserSettings();\n        }\n      } else {\n        const error = await response.json();\n        logger.error(\n          \"Profile Update Failed\",\n          new Error(`Profile update rejected: ${response.status}`),\n          {\n            userId: user?.sub || user?.id,\n            profileData,\n            responseStatus: response.status,\n            errorData: error,\n            operation: \"updateProfile\",\n          }\n        );\n        showSnackbar(error.error || \"Failed to update profile\", \"error\");\n      }\n    } catch (error) {\n      logger.error(\"Profile Save Error\", error, {\n        userId: user?.sub || user?.id,\n        profileData,\n        operation: \"handleSaveProfile\",\n        context: \"network or server error\",\n      });\n      showSnackbar(\"Failed to update profile\", \"error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddApiKey = async () => {\n    try {\n      setLoading(true);\n\n      const response = await api.saveApiKey(newApiKey);\n\n      if (response && response.ok) {\n        showSnackbar(\"API key added successfully\");\n        setAddApiKeyDialog(false);\n        setNewApiKey({\n          brokerName: \"\",\n          apiKey: \"\",\n          apiSecret: \"\",\n          sandbox: true,\n        });\n        await loadApiKeys();\n      } else {\n        const error = await response.json();\n        showSnackbar(error.error || \"Failed to add API key\", \"error\");\n      }\n    } catch (error) {\n      if (import.meta.env && import.meta.env.DEV)\n        console.error(\"Error adding API key:\", error);\n      showSnackbar(\"Failed to add API key\", \"error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const _deleteApiKey = async (brokerName) => {\n    try {\n      await api.deleteApiKey(brokerName);\n      showSnackbar(\"API key deleted successfully\");\n      await loadApiKeys();\n    } catch (error) {\n      if (import.meta.env && import.meta.env.DEV)\n        console.error(\"Error deleting API key:\", error);\n      showSnackbar(\"Failed to delete API key\", \"error\");\n    }\n  };\n\n  const _testConnection = async (brokerName) => {\n    try {\n      setLoading(true);\n\n      const response = await api.testApiKey({\n        provider: brokerName,\n        keyId: newApiKey.keyId || newApiKey.key,\n        secret: newApiKey.secret\n      });\n\n      if (response.ok && response.isValid) {\n        showSnackbar(\n          ` Connection successful! API key is valid.`,\n          \"success\"\n        );\n      } else {\n        showSnackbar(\n          ` Connection failed: ${response.error || \"Invalid API key\"}`,\n          \"error\"\n        );\n      }\n    } catch (error) {\n      if (import.meta.env && import.meta.env.DEV)\n        console.error(\"Error testing connection:\", error);\n      showSnackbar(\"Failed to test connection\", \"error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const _saveSettings = async () => {\n    try {\n      setLoading(true);\n\n      const response = await api.saveApiKey({\n        provider: newApiKey.brokerName,\n        keyId: newApiKey.keyId || newApiKey.key,\n        secret: newApiKey.secret\n      });\n\n      if (response.ok) {\n        showSnackbar(\n          ` API key saved successfully!`,\n          \"success\"\n        );\n\n        // Refresh API keys list\n        await loadApiKeys();\n        \n        // Reset form\n        setNewApiKey({ provider: \"\", keyId: \"\", secret: \"\" });\n      } else {\n        showSnackbar(response.error || \"Failed to save API key\", \"error\");\n      }\n    } catch (error) {\n      if (import.meta.env && import.meta.env.DEV)\n        console.error(\"Error saving API key:\", error);\n      showSnackbar(\"Failed to save API key\", \"error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSaveNotifications = async () => {\n    try {\n      setLoading(true);\n\n      const response = await api.updateSettings({ \n        preferences: { ...themeSettings, ...notifications } \n      });\n\n      if (response.ok) {\n        showSnackbar(\"Notification preferences updated successfully\");\n      } else {\n        showSnackbar(\n          response.error || \"Failed to update notification preferences\",\n          \"error\"\n        );\n      }\n    } catch (error) {\n      if (import.meta.env && import.meta.env.DEV)\n        console.error(\"Error saving notifications:\", error);\n      showSnackbar(\"Failed to update notification preferences\", \"error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSaveTheme = async () => {\n    try {\n      setLoading(true);\n\n      const response = await api.updateSettings({ \n        preferences: { ...themeSettings, ...notifications } \n      });\n\n      if (response.ok) {\n        showSnackbar(\"Theme preferences updated successfully\");\n      } else {\n        showSnackbar(\n          response.error || \"Failed to update theme preferences\",\n          \"error\"\n        );\n      }\n    } catch (error) {\n      if (import.meta.env && import.meta.env.DEV)\n        console.error(\"Error saving theme:\", error);\n      showSnackbar(\"Failed to update theme preferences\", \"error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleChangePassword = async () => {\n    setPasswordDialog({\n      open: true,\n      currentPassword: \"\",\n      newPassword: \"\",\n      confirmPassword: \"\",\n      errors: {},\n    });\n  };\n\n  const validatePasswordChange = () => {\n    const errors = {};\n\n    if (!passwordDialog.currentPassword) {\n      errors.currentPassword = \"Current password is required\";\n    }\n\n    if (!passwordDialog.newPassword) {\n      errors.newPassword = \"New password is required\";\n    } else if (passwordDialog.newPassword.length < 8) {\n      errors.newPassword = \"Password must be at least 8 characters\";\n    } else if (\n      !/(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)/.test(passwordDialog.newPassword)\n    ) {\n      errors.newPassword =\n        \"Password must contain uppercase, lowercase, and number\";\n    }\n\n    if (passwordDialog.newPassword !== passwordDialog.confirmPassword) {\n      errors.confirmPassword = \"Passwords do not match\";\n    }\n\n    if (passwordDialog.currentPassword === passwordDialog.newPassword) {\n      errors.newPassword =\n        \"New password must be different from current password\";\n    }\n\n    return errors;\n  };\n\n  const handlePasswordDialogSubmit = async () => {\n    const errors = validatePasswordChange();\n\n    if (Object.keys(errors).length > 0) {\n      setPasswordDialog((prev) => ({ ...prev, errors }));\n      return;\n    }\n\n    try {\n      setLoading(true);\n\n      const response = await fetch(`${apiUrl}/api/user/change-password`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${user?.tokens?.accessToken || \"dev-token\"}`,\n        },\n        body: JSON.stringify({\n          currentPassword: passwordDialog.currentPassword,\n          newPassword: passwordDialog.newPassword,\n        }),\n      });\n\n      if (response.ok) {\n        showSnackbar(\"Password changed successfully\", \"success\");\n        setPasswordDialog({\n          open: false,\n          currentPassword: \"\",\n          newPassword: \"\",\n          confirmPassword: \"\",\n          errors: {},\n        });\n      } else {\n        const errorData = await response.json();\n        if (response.status === 401) {\n          setPasswordDialog((prev) => ({\n            ...prev,\n            errors: { currentPassword: \"Current password is incorrect\" },\n          }));\n        } else {\n          showSnackbar(\n            errorData.message || \"Failed to change password\",\n            \"error\"\n          );\n        }\n      }\n    } catch (error) {\n      showSnackbar(\"Network error. Please try again.\", \"error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handlePasswordDialogClose = () => {\n    setPasswordDialog({\n      open: false,\n      currentPassword: \"\",\n      newPassword: \"\",\n      confirmPassword: \"\",\n      errors: {},\n    });\n  };\n\n  const handleToggleTwoFactor = async () => {\n    try {\n      setLoading(true);\n\n      const action = user?.twoFactorEnabled ? \"disable\" : \"enable\";\n      const response = await fetch(`${apiUrl}/api/user/two-factor/${action}`, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${user?.tokens?.accessToken || \"dev-token\"}`,\n        },\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        showSnackbar(\n          user?.twoFactorEnabled\n            ? \"Two-factor authentication disabled\"\n            : \"Two-factor authentication enabled\"\n        );\n\n        // Show QR code or setup instructions if enabling\n        if (!user?.twoFactorEnabled && data.qrCode) {\n          showSnackbar(\n            \"Please scan the QR code with your authenticator app\",\n            \"info\"\n          );\n        }\n\n        // Refresh user settings\n        await loadUserSettings();\n      } else {\n        const error = await response.json();\n        showSnackbar(\n          error.error || \"Failed to toggle two-factor authentication\",\n          \"error\"\n        );\n      }\n    } catch (error) {\n      if (import.meta.env && import.meta.env.DEV)\n        console.error(\"Error toggling two-factor auth:\", error);\n      showSnackbar(\"Failed to toggle two-factor authentication\", \"error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDownloadRecoveryCodes = async () => {\n    try {\n      setLoading(true);\n\n      const response = await fetch(`${apiUrl}/api/user/recovery-codes`, {\n        headers: {\n          Authorization: `Bearer ${user?.tokens?.accessToken || \"dev-token\"}`,\n        },\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n\n        // Create and download recovery codes file\n        const codesText = data.codes.join(\"\\n\");\n        const blob = new Blob([codesText], { type: \"text/plain\" });\n        const url = URL.createObjectURL(blob);\n        const link = document.createElement(\"a\");\n        link.href = url;\n        link.download = \"recovery-codes.txt\";\n        link.click();\n        URL.revokeObjectURL(url);\n\n        showSnackbar(\"Recovery codes downloaded successfully\", \"success\");\n      } else {\n        const error = await response.json();\n        showSnackbar(\n          error.error || \"Failed to download recovery codes\",\n          \"error\"\n        );\n      }\n    } catch (error) {\n      if (import.meta.env && import.meta.env.DEV)\n        console.error(\"Error downloading recovery codes:\", error);\n      showSnackbar(\"Failed to download recovery codes\", \"error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDeleteAccount = async () => {\n    if (\n      window.confirm(\n        \"Are you sure you want to delete your account? This action cannot be undone.\"\n      )\n    ) {\n      if (\n        window.confirm(\n          'This will permanently delete all your data. Type \"DELETE\" to confirm.'\n        )\n      ) {\n        const userInput = window.prompt(\n          'Type \"DELETE\" to confirm account deletion:'\n        );\n        if (userInput === \"DELETE\") {\n          try {\n            setLoading(true);\n\n            const response = await fetch(`${apiUrl}/api/user/delete-account`, {\n              method: \"DELETE\",\n              headers: {\n                Authorization: `Bearer ${user?.tokens?.accessToken || \"dev-token\"}`,\n              },\n            });\n\n            if (response.ok) {\n              showSnackbar(\"Account deleted successfully\", \"success\");\n              await logout();\n              navigate(\"/\");\n            } else {\n              const error = await response.json();\n              showSnackbar(error.error || \"Failed to delete account\", \"error\");\n            }\n          } catch (error) {\n            if (import.meta.env && import.meta.env.DEV)\n              console.error(\"Error deleting account:\", error);\n            showSnackbar(\"Failed to delete account\", \"error\");\n          } finally {\n            setLoading(false);\n          }\n        }\n      }\n    }\n  };\n\n  const handleRevokeAllSessions = async () => {\n    if (\n      window.confirm(\n        \"This will sign you out of all devices except this one. Continue?\"\n      )\n    ) {\n      try {\n        setLoading(true);\n\n        const response = await fetch(`${apiUrl}/api/user/revoke-sessions`, {\n          method: \"POST\",\n          headers: {\n            Authorization: `Bearer ${user?.tokens?.accessToken || \"dev-token\"}`,\n          },\n        });\n\n        if (response.ok) {\n          showSnackbar(\"All other sessions have been revoked\", \"success\");\n        } else {\n          const error = await response.json();\n          showSnackbar(error.error || \"Failed to revoke sessions\", \"error\");\n        }\n      } catch (error) {\n        if (import.meta.env && import.meta.env.DEV)\n          console.error(\"Error revoking sessions:\", error);\n        showSnackbar(\"Failed to revoke sessions\", \"error\");\n      } finally {\n        setLoading(false);\n      }\n    }\n  };\n\n  // Show loading state while authentication is being checked\n  if (loading || isLoading) {\n    return (\n      <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\n        <Box\n          display=\"flex\"\n          justifyContent=\"center\"\n          alignItems=\"center\"\n          minHeight=\"60vh\"\n        >\n          <CircularProgress size={60} />\n        </Box>\n      </Container>\n    );\n  }\n\n  // If we don't have a user object at all, show a fallback with more options\n  if (!user && !isLoading) {\n    // Log authentication info to console for debugging (but don't log as error in development)\n    if (import.meta.env && import.meta.env.PROD) {\n      logger.error(\n        \"Authentication Error\",\n        new Error(\"Unable to load user information\"),\n        {\n          userObject: user,\n          isAuthenticated,\n          isLoading,\n          apiUrl,\n          reason:\n            \"No user object available after authentication loading completed\",\n          suggestedActions: [\"refresh page\", \"login again\", \"check session\"],\n          url: window.location.href,\n        }\n      );\n    } else {\n      console.log(\n        \" DEV: Settings page - no authenticated user, showing login prompt\"\n      );\n    }\n\n    return (\n      <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\n        <Alert\n          severity=\"warning\"\n          action={\n            <Button\n              color=\"inherit\"\n              size=\"small\"\n              onClick={() => window.location.reload()}\n              aria-label=\"Refresh page to re-authenticate\"\n            >\n              Refresh\n            </Button>\n          }\n        >\n          Unable to load user information. This may be due to an expired session\n          or authentication issue.\n        </Alert>\n      </Container>\n    );\n  }\n\n  return (\n    <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }} data-testid=\"settings-page\">\n      <Typography variant=\"h3\" component=\"h1\" gutterBottom>\n        Account Settings\n      </Typography>\n      <Typography variant=\"subtitle1\" color=\"text.secondary\" sx={{ mb: 4 }}>\n        Manage your account preferences, API connections, and security settings\n      </Typography>\n\n      <Paper sx={{ width: \"100%\" }}>\n        <Tabs\n          value={activeTab}\n          onChange={handleTabChange}\n          variant=\"scrollable\"\n          scrollButtons=\"auto\"\n          sx={{ borderBottom: 1, borderColor: \"divider\" }}\n          aria-label=\"Settings navigation tabs\"\n        >\n          <Tab\n            value={0}\n            icon={<AccountCircle />}\n            label=\"Profile\"\n            aria-label=\"Profile settings\"\n          />\n          <Tab\n            value={1}\n            icon={<Api />}\n            label=\"API Keys\"\n            data-testid=\"api-keys-tab\"\n            aria-label=\"API keys management\"\n          />\n          <Tab\n            value={2}\n            icon={<Notifications />}\n            label=\"Notifications\"\n            aria-label=\"Notification preferences\"\n          />\n          <Tab\n            value={3}\n            icon={<Palette />}\n            label=\"Appearance\"\n            aria-label=\"Appearance and theme settings\"\n          />\n          <Tab\n            value={4}\n            icon={<Security />}\n            label=\"Security\"\n            aria-label=\"Security and account settings\"\n          />\n          <Tab\n            value={5}\n            icon={<Shield />}\n            label=\"Privacy\"\n            aria-label=\"Privacy settings and data management\"\n          />\n        </Tabs>\n\n        {/* Profile Tab */}\n        <TabPanel value={activeTab} index={0}>\n          <Grid container spacing={3}>\n            <Grid item xs={12} md={8}>\n              <Card>\n                <CardHeader title=\"Personal Information\" />\n                <CardContent>\n                  <Grid container spacing={2}>\n                    <Grid item xs={12} sm={6}>\n                      <TextField\n                        fullWidth\n                        label=\"First Name\"\n                        value={profileData.firstName}\n                        onChange={(e) =>\n                          setProfileData({\n                            ...profileData,\n                            firstName: e.target.value,\n                          })\n                        }\n                      />\n                    </Grid>\n                    <Grid item xs={12} sm={6}>\n                      <TextField\n                        fullWidth\n                        label=\"Last Name\"\n                        value={profileData.lastName}\n                        onChange={(e) =>\n                          setProfileData({\n                            ...profileData,\n                            lastName: e.target.value,\n                          })\n                        }\n                      />\n                    </Grid>\n                    <Grid item xs={12}>\n                      <TextField\n                        fullWidth\n                        label=\"Email\"\n                        type=\"email\"\n                        value={profileData.email}\n                        onChange={(e) =>\n                          setProfileData({\n                            ...profileData,\n                            email: e.target.value,\n                          })\n                        }\n                      />\n                    </Grid>\n                    <Grid item xs={12} sm={6}>\n                      <FormControl fullWidth>\n                        <InputLabel>Timezone</InputLabel>\n                        <Select\n                          value={profileData.timezone}\n                          onChange={(e) =>\n                            setProfileData({\n                              ...profileData,\n                              timezone: e.target.value,\n                            })\n                          }\n                        >\n                          <MenuItem value=\"America/New_York\">\n                            Eastern Time\n                          </MenuItem>\n                          <MenuItem value=\"America/Chicago\">\n                            Central Time\n                          </MenuItem>\n                          <MenuItem value=\"America/Denver\">\n                            Mountain Time\n                          </MenuItem>\n                          <MenuItem value=\"America/Los_Angeles\">\n                            Pacific Time\n                          </MenuItem>\n                          <MenuItem value=\"Europe/London\">London</MenuItem>\n                          <MenuItem value=\"Asia/Tokyo\">Tokyo</MenuItem>\n                        </Select>\n                      </FormControl>\n                    </Grid>\n                    <Grid item xs={12} sm={6}>\n                      <FormControl fullWidth>\n                        <InputLabel>Currency</InputLabel>\n                        <Select\n                          value={profileData.currency}\n                          onChange={(e) =>\n                            setProfileData({\n                              ...profileData,\n                              currency: e.target.value,\n                            })\n                          }\n                        >\n                          <MenuItem value=\"USD\">USD - US Dollar</MenuItem>\n                          <MenuItem value=\"EUR\">EUR - Euro</MenuItem>\n                          <MenuItem value=\"GBP\">GBP - British Pound</MenuItem>\n                          <MenuItem value=\"CAD\">CAD - Canadian Dollar</MenuItem>\n                        </Select>\n                      </FormControl>\n                    </Grid>\n                  </Grid>\n                  <Box sx={{ mt: 3, display: \"flex\", gap: 2 }}>\n                    <Button\n                      variant=\"contained\"\n                      startIcon={<Save />}\n                      onClick={handleSaveProfile}\n                      disabled={loading}\n                      aria-label=\"Save profile changes\"\n                    >\n                      Save Changes\n                    </Button>\n                    <Button\n                      variant=\"outlined\"\n                      startIcon={<Cancel />}\n                      onClick={loadUserSettings}\n                      aria-label=\"Cancel and reset profile changes\"\n                    >\n                      Reset\n                    </Button>\n                  </Box>\n                </CardContent>\n              </Card>\n            </Grid>\n            <Grid item xs={12} md={4}>\n              <Card>\n                <CardHeader title=\"Account Overview\" />\n                <CardContent>\n                  <Box display=\"flex\" alignItems=\"center\" mb={2}>\n                    <Avatar sx={{ mr: 2, width: 56, height: 56 }}>\n                      {(\n                        user?.firstName?.[0] ||\n                        user?.username?.[0] ||\n                        \"U\"\n                      ).toUpperCase()}\n                    </Avatar>\n                    <Box>\n                      <Typography variant=\"h6\">\n                        {user?.firstName || \"Unknown\"}{\" \"}\n                        {user?.lastName || \"User\"}\n                      </Typography>\n                      <Typography color=\"text.secondary\">\n                        {user?.email || \"No email provided\"}\n                      </Typography>\n                    </Box>\n                  </Box>\n                  <Divider sx={{ my: 2 }} />\n                  <List dense aria-label=\"Account information\">\n                    <ListItem>\n                      <ListItemText\n                        primary=\"Account Status\"\n                        secondary=\"Active\"\n                      />\n                      <ListItemSecondaryAction>\n                        <Chip label=\"Active\" color=\"success\" size=\"small\" />\n                      </ListItemSecondaryAction>\n                    </ListItem>\n                    <ListItem>\n                      <ListItemText\n                        primary=\"Member Since\"\n                        secondary={new Date(\n                          user?.createdAt || Date.now()\n                        ).toLocaleDateString()}\n                      />\n                    </ListItem>\n                  </List>\n                </CardContent>\n              </Card>\n            </Grid>\n          </Grid>\n        </TabPanel>\n\n        {/* API Keys Tab */}\n        <TabPanel value={activeTab} index={1}>\n          <Grid container spacing={4}>\n            <Grid item xs={12}>\n              <Card>\n                <CardHeader\n                  title=\"API Keys\"\n                  subheader=\"Manage your API keys for data providers and trading platforms\"\n                  action={\n                    <Button\n                      variant=\"contained\"\n                      startIcon={<Add />}\n                      onClick={() => setAddApiKeyDialog(true)}\n                      data-testid=\"add-api-key-button\"\n                      aria-label=\"Add new API key\"\n                    >\n                      Add API Key\n                    </Button>\n                  }\n                />\n                <CardContent>\n                  {_apiKeys.length === 0 ? (\n                    <Alert severity=\"info\" sx={{ mb: 2 }}>\n                      No API keys configured. Add your first API key to start\n                      accessing real market data.\n                    </Alert>\n                  ) : (\n                    <Grid container spacing={2}>\n                      {_apiKeys.map((apiKey) => (\n                        <Grid item xs={12} md={6} key={apiKey.brokerName}>\n                          <Card variant=\"outlined\">\n                            <CardContent>\n                              <Box\n                                display=\"flex\"\n                                justifyContent=\"space-between\"\n                                alignItems=\"center\"\n                              >\n                                <Box>\n                                  <Typography variant=\"h6\">\n                                    {apiKey.brokerName}\n                                  </Typography>\n                                  <Typography\n                                    variant=\"body2\"\n                                    color=\"text.secondary\"\n                                  >\n                                    Added:{\" \"}\n                                    {new Date(\n                                      apiKey.createdAt\n                                    ).toLocaleDateString()}\n                                  </Typography>\n                                </Box>\n                                <Box>\n                                  <Chip\n                                    label={apiKey.status || \"Active\"}\n                                    color={\n                                      apiKey.status === \"active\"\n                                        ? \"success\"\n                                        : \"default\"\n                                    }\n                                    size=\"small\"\n                                  />\n                                  <IconButton\n                                    onClick={() =>\n                                      _deleteApiKey(apiKey.brokerName)\n                                    }\n                                    color=\"error\"\n                                    aria-label={`Delete ${apiKey.brokerName} API key`}\n                                  >\n                                    <Delete />\n                                  </IconButton>\n                                </Box>\n                              </Box>\n                            </CardContent>\n                          </Card>\n                        </Grid>\n                      ))}\n                    </Grid>\n                  )}\n                </CardContent>\n              </Card>\n            </Grid>\n          </Grid>\n        </TabPanel>\n\n        {/* Notifications Tab */}\n        <TabPanel value={activeTab} index={2}>\n          <Card>\n            <CardHeader\n              title=\"Notification Preferences\"\n              action={\n                <Button\n                  variant=\"contained\"\n                  startIcon={<Save />}\n                  onClick={handleSaveNotifications}\n                  disabled={loading}\n                  aria-label=\"Save notification preferences\"\n                >\n                  Save\n                </Button>\n              }\n            />\n            <CardContent>\n              <Grid container spacing={3}>\n                <Grid item xs={12} md={6}>\n                  <Typography variant=\"h6\" gutterBottom>\n                    Delivery Methods\n                  </Typography>\n                  <Box sx={{ display: \"flex\", flexDirection: \"column\" }}>\n                    <FormControlLabel\n                      control={\n                        <Switch\n                          checked={notifications.email}\n                          onChange={(e) =>\n                            setNotifications({\n                              ...notifications,\n                              email: e.target.checked,\n                            })\n                          }\n                        />\n                      }\n                      label=\"Email Notifications\"\n                    />\n                    <FormControlLabel\n                      control={\n                        <Switch\n                          checked={notifications.push}\n                          onChange={(e) =>\n                            setNotifications({\n                              ...notifications,\n                              push: e.target.checked,\n                            })\n                          }\n                        />\n                      }\n                      label=\"Push Notifications\"\n                    />\n                  </Box>\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Typography variant=\"h6\" gutterBottom>\n                    Content Types\n                  </Typography>\n                  <Box sx={{ display: \"flex\", flexDirection: \"column\" }}>\n                    <FormControlLabel\n                      control={\n                        <Switch\n                          checked={notifications.priceAlerts}\n                          onChange={(e) =>\n                            setNotifications({\n                              ...notifications,\n                              priceAlerts: e.target.checked,\n                            })\n                          }\n                        />\n                      }\n                      label=\"Price Alerts\"\n                    />\n                    <FormControlLabel\n                      control={\n                        <Switch\n                          checked={notifications.portfolioUpdates}\n                          onChange={(e) =>\n                            setNotifications({\n                              ...notifications,\n                              portfolioUpdates: e.target.checked,\n                            })\n                          }\n                        />\n                      }\n                      label=\"Portfolio Updates\"\n                    />\n                    <FormControlLabel\n                      control={\n                        <Switch\n                          checked={notifications.marketNews}\n                          onChange={(e) =>\n                            setNotifications({\n                              ...notifications,\n                              marketNews: e.target.checked,\n                            })\n                          }\n                        />\n                      }\n                      label=\"Market News\"\n                    />\n                    <FormControlLabel\n                      control={\n                        <Switch\n                          checked={notifications.weeklyReports}\n                          onChange={(e) =>\n                            setNotifications({\n                              ...notifications,\n                              weeklyReports: e.target.checked,\n                            })\n                          }\n                        />\n                      }\n                      label=\"Weekly Reports\"\n                    />\n                  </Box>\n                </Grid>\n              </Grid>\n            </CardContent>\n          </Card>\n        </TabPanel>\n\n        {/* Appearance Tab */}\n        <TabPanel value={activeTab} index={3}>\n          <Card>\n            <CardHeader\n              title=\"Appearance Settings\"\n              action={\n                <Button\n                  variant=\"contained\"\n                  startIcon={<Save />}\n                  onClick={handleSaveTheme}\n                  disabled={loading}\n                  aria-label=\"Save appearance settings\"\n                >\n                  Save\n                </Button>\n              }\n            />\n            <CardContent>\n              <Grid container spacing={3}>\n                <Grid item xs={12} md={6}>\n                  <Typography variant=\"h6\" gutterBottom>\n                    Theme Settings\n                  </Typography>\n                  <Box sx={{ mb: 2 }}>\n                    <FormControlLabel\n                      control={\n                        <Switch\n                          checked={themeSettings.darkMode}\n                          onChange={(e) =>\n                            setThemeSettings({\n                              ...themeSettings,\n                              darkMode: e.target.checked,\n                            })\n                          }\n                        />\n                      }\n                      label=\"Dark Mode\"\n                    />\n                  </Box>\n                  <FormControl fullWidth sx={{ mb: 2 }}>\n                    <InputLabel>Primary Color</InputLabel>\n                    <Select\n                      value={themeSettings.primaryColor}\n                      onChange={(e) =>\n                        setThemeSettings({\n                          ...themeSettings,\n                          primaryColor: e.target.value,\n                        })\n                      }\n                    >\n                      <MenuItem value=\"#1976d2\">Blue</MenuItem>\n                      <MenuItem value=\"#2e7d32\">Green</MenuItem>\n                      <MenuItem value=\"#ed6c02\">Orange</MenuItem>\n                      <MenuItem value=\"#9c27b0\">Purple</MenuItem>\n                      <MenuItem value=\"#d32f2f\">Red</MenuItem>\n                    </Select>\n                  </FormControl>\n                  <FormControl fullWidth>\n                    <InputLabel>Layout Style</InputLabel>\n                    <Select\n                      value={themeSettings.layout}\n                      onChange={(e) =>\n                        setThemeSettings({\n                          ...themeSettings,\n                          layout: e.target.value,\n                        })\n                      }\n                    >\n                      <MenuItem value=\"standard\">Standard</MenuItem>\n                      <MenuItem value=\"compact\">Compact</MenuItem>\n                      <MenuItem value=\"spacious\">Spacious</MenuItem>\n                    </Select>\n                  </FormControl>\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Typography variant=\"h6\" gutterBottom>\n                    Chart Settings\n                  </Typography>\n                  <FormControl fullWidth sx={{ mb: 2 }}>\n                    <InputLabel>Default Chart Style</InputLabel>\n                    <Select\n                      value={themeSettings.chartStyle}\n                      onChange={(e) =>\n                        setThemeSettings({\n                          ...themeSettings,\n                          chartStyle: e.target.value,\n                        })\n                      }\n                    >\n                      <MenuItem value=\"candlestick\">Candlestick</MenuItem>\n                      <MenuItem value=\"line\">Line</MenuItem>\n                      <MenuItem value=\"area\">Area</MenuItem>\n                      <MenuItem value=\"bar\">Bar</MenuItem>\n                    </Select>\n                  </FormControl>\n                  <Alert severity=\"info\">\n                    Theme changes will be applied immediately. Some changes may\n                    require a page refresh.\n                  </Alert>\n                </Grid>\n              </Grid>\n            </CardContent>\n          </Card>\n        </TabPanel>\n\n        {/* Security Tab */}\n        <TabPanel value={activeTab} index={4}>\n          <Grid container spacing={3}>\n            <Grid item xs={12} md={6}>\n              <Card>\n                <CardHeader title=\"Password & Authentication\" />\n                <CardContent>\n                  <Button\n                    variant=\"outlined\"\n                    fullWidth\n                    sx={{ mb: 2 }}\n                    startIcon={<Security />}\n                    onClick={handleChangePassword}\n                    disabled={loading}\n                    aria-label=\"Change account password\"\n                  >\n                    Change Password\n                  </Button>\n                  <Button\n                    variant=\"outlined\"\n                    fullWidth\n                    sx={{ mb: 2 }}\n                    startIcon={<Security />}\n                    onClick={handleToggleTwoFactor}\n                    disabled={loading}\n                    aria-label={`${user?.twoFactorEnabled ? \"Disable\" : \"Enable\"} two-factor authentication`}\n                  >\n                    {user?.twoFactorEnabled ? \"Disable\" : \"Enable\"} Two-Factor\n                    Authentication\n                  </Button>\n                  <Button\n                    variant=\"outlined\"\n                    fullWidth\n                    startIcon={<Download />}\n                    onClick={handleDownloadRecoveryCodes}\n                    disabled={loading || !user?.twoFactorEnabled}\n                    aria-label=\"Download two-factor authentication recovery codes\"\n                  >\n                    Download Recovery Codes\n                  </Button>\n                </CardContent>\n              </Card>\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <Card>\n                <CardHeader title=\"Account Actions\" />\n                <CardContent>\n                  <Button\n                    variant=\"outlined\"\n                    fullWidth\n                    onClick={logout}\n                    sx={{ mb: 2 }}\n                    disabled={loading}\n                    aria-label=\"Sign out of account\"\n                  >\n                    Sign Out\n                  </Button>\n                  <Button\n                    variant=\"outlined\"\n                    color=\"error\"\n                    fullWidth\n                    startIcon={<Warning />}\n                    onClick={handleDeleteAccount}\n                    disabled={loading}\n                    aria-label=\"Delete account permanently\"\n                  >\n                    Delete Account\n                  </Button>\n                </CardContent>\n              </Card>\n            </Grid>\n            <Grid item xs={12}>\n              <Card>\n                <CardHeader title=\"Active Sessions\" />\n                <CardContent>\n                  <Typography\n                    variant=\"body2\"\n                    color=\"text.secondary\"\n                    sx={{ mb: 2 }}\n                  >\n                    Manage your active login sessions across different devices.\n                  </Typography>\n                  <List aria-label=\"Active sessions\">\n                    <ListItem>\n                      <ListItemIcon>\n                        <CheckCircle color=\"success\" />\n                      </ListItemIcon>\n                      <ListItemText\n                        primary=\"Current Session\"\n                        secondary={`${navigator.userAgent.includes(\"Chrome\") ? \"Chrome\" : \"Browser\"} on ${navigator.platform} - ${new Date().toLocaleString()}`}\n                      />\n                      <ListItemSecondaryAction>\n                        <Chip label=\"Current\" color=\"primary\" size=\"small\" />\n                      </ListItemSecondaryAction>\n                    </ListItem>\n                  </List>\n                  <Button\n                    variant=\"outlined\"\n                    color=\"warning\"\n                    startIcon={<Security />}\n                    onClick={handleRevokeAllSessions}\n                    disabled={loading}\n                    aria-label=\"Revoke all other active sessions\"\n                  >\n                    Revoke All Other Sessions\n                  </Button>\n                </CardContent>\n              </Card>\n            </Grid>\n          </Grid>\n        </TabPanel>\n\n        {/* Privacy Tab */}\n        <TabPanel value={activeTab} index={5}>\n          <Grid container spacing={3}>\n            <Grid item xs={12} md={6}>\n              <Card>\n                <CardHeader title=\"Data Privacy\" />\n                <CardContent>\n                  <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                    Control how your data is collected, stored, and used.\n                  </Typography>\n                  <FormControlLabel\n                    control={<Switch defaultChecked />}\n                    label=\"Allow analytics collection\"\n                    sx={{ mb: 2 }}\n                  />\n                  <FormControlLabel\n                    control={<Switch defaultChecked />}\n                    label=\"Share usage data for improvements\"\n                    sx={{ mb: 2 }}\n                  />\n                  <FormControlLabel\n                    control={<Switch />}\n                    label=\"Allow marketing communications\"\n                    sx={{ mb: 2 }}\n                  />\n                  <Button\n                    variant=\"outlined\"\n                    fullWidth\n                    startIcon={<Download />}\n                    sx={{ mt: 2 }}\n                  >\n                    Download My Data\n                  </Button>\n                </CardContent>\n              </Card>\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <Card>\n                <CardHeader title=\"Data Retention\" />\n                <CardContent>\n                  <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                    Manage how long your data is stored in our systems.\n                  </Typography>\n                  <FormControl fullWidth sx={{ mb: 2 }}>\n                    <InputLabel>Trading History Retention</InputLabel>\n                    <Select defaultValue=\"12months\" label=\"Trading History Retention\">\n                      <MenuItem value=\"3months\">3 Months</MenuItem>\n                      <MenuItem value=\"6months\">6 Months</MenuItem>\n                      <MenuItem value=\"12months\">12 Months</MenuItem>\n                      <MenuItem value=\"forever\">Keep Forever</MenuItem>\n                    </Select>\n                  </FormControl>\n                  <FormControl fullWidth sx={{ mb: 2 }}>\n                    <InputLabel>Analytics Data Retention</InputLabel>\n                    <Select defaultValue=\"6months\" label=\"Analytics Data Retention\">\n                      <MenuItem value=\"30days\">30 Days</MenuItem>\n                      <MenuItem value=\"3months\">3 Months</MenuItem>\n                      <MenuItem value=\"6months\">6 Months</MenuItem>\n                      <MenuItem value=\"never\">Don&apos;t Store</MenuItem>\n                    </Select>\n                  </FormControl>\n                </CardContent>\n              </Card>\n            </Grid>\n            <Grid item xs={12}>\n              <Card>\n                <CardHeader title=\"Account Data Management\" />\n                <CardContent>\n                  <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                    Request actions regarding your personal data.\n                  </Typography>\n                  <Grid container spacing={2}>\n                    <Grid item xs={12} sm={4}>\n                      <Button\n                        variant=\"outlined\"\n                        fullWidth\n                        startIcon={<Download />}\n                      >\n                        Export Data\n                      </Button>\n                    </Grid>\n                    <Grid item xs={12} sm={4}>\n                      <Button\n                        variant=\"outlined\"\n                        color=\"warning\"\n                        fullWidth\n                        startIcon={<Warning />}\n                      >\n                        Request Data Deletion\n                      </Button>\n                    </Grid>\n                    <Grid item xs={12} sm={4}>\n                      <Button\n                        variant=\"outlined\"\n                        color=\"info\"\n                        fullWidth\n                      >\n                        Privacy Report\n                      </Button>\n                    </Grid>\n                  </Grid>\n                  <Alert severity=\"info\" sx={{ mt: 2 }}>\n                    Data export and deletion requests may take up to 30 days to process.\n                  </Alert>\n                </CardContent>\n              </Card>\n            </Grid>\n          </Grid>\n        </TabPanel>\n      </Paper>\n\n      {/* Add API Key Dialog */}\n      <Dialog\n        open={addApiKeyDialog}\n        onClose={() => setAddApiKeyDialog(false)}\n        maxWidth=\"sm\"\n        fullWidth\n      >\n        <DialogTitle>Add Broker API Key</DialogTitle>\n        <DialogContent>\n          <Grid container spacing={2} sx={{ mt: 1 }}>\n            <Grid item xs={12}>\n              <FormControl fullWidth>\n                <InputLabel id=\"broker-select-label\">Broker</InputLabel>\n                <Select\n                  labelId=\"broker-select-label\"\n                  id=\"broker-select\"\n                  label=\"Broker\"\n                  value={newApiKey.brokerName}\n                  onChange={(e) =>\n                    setNewApiKey({ ...newApiKey, brokerName: e.target.value })\n                  }\n                >\n                  <MenuItem value=\"alpaca\" data-provider=\"alpaca\">\n                    Alpaca\n                  </MenuItem>\n                  <MenuItem value=\"polygon\" data-provider=\"polygon\">\n                    Polygon\n                  </MenuItem>\n                </Select>\n              </FormControl>\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                fullWidth\n                label=\"API Key\"\n                type={showApiKeys.apiKey ? \"text\" : \"password\"}\n                value={newApiKey.apiKey}\n                data-testid=\"api-key-input\"\n                onChange={(e) =>\n                  setNewApiKey({ ...newApiKey, apiKey: e.target.value })\n                }\n                InputProps={{\n                  endAdornment: (\n                    <IconButton\n                      onClick={() =>\n                        setShowApiKeys({\n                          ...showApiKeys,\n                          apiKey: !showApiKeys.apiKey,\n                        })\n                      }\n                      aria-label={\n                        showApiKeys.apiKey ? \"Hide API key\" : \"Show API key\"\n                      }\n                    >\n                      {showApiKeys.apiKey ? <VisibilityOff /> : <Visibility />}\n                    </IconButton>\n                  ),\n                }}\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                fullWidth\n                label=\"API Secret\"\n                type={showApiKeys.apiSecret ? \"text\" : \"password\"}\n                value={newApiKey.apiSecret}\n                onChange={(e) =>\n                  setNewApiKey({ ...newApiKey, apiSecret: e.target.value })\n                }\n                InputProps={{\n                  endAdornment: (\n                    <IconButton\n                      onClick={() =>\n                        setShowApiKeys({\n                          ...showApiKeys,\n                          apiSecret: !showApiKeys.apiSecret,\n                        })\n                      }\n                      aria-label={\n                        showApiKeys.apiSecret\n                          ? \"Hide API secret\"\n                          : \"Show API secret\"\n                      }\n                    >\n                      {showApiKeys.apiSecret ? (\n                        <VisibilityOff />\n                      ) : (\n                        <Visibility />\n                      )}\n                    </IconButton>\n                  ),\n                }}\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <FormControlLabel\n                control={\n                  <Switch\n                    checked={newApiKey.sandbox}\n                    onChange={(e) =>\n                      setNewApiKey({ ...newApiKey, sandbox: e.target.checked })\n                    }\n                  />\n                }\n                label=\"Sandbox Environment (recommended for testing)\"\n              />\n            </Grid>\n          </Grid>\n          <Alert severity=\"info\" sx={{ mt: 2 }}>\n            API keys are encrypted and stored securely. We recommend starting\n            with sandbox mode for testing.\n          </Alert>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={() => setAddApiKeyDialog(false)}\n            aria-label=\"Cancel adding API key\"\n          >\n            Cancel\n          </Button>\n          <Button\n            onClick={handleAddApiKey}\n            variant=\"contained\"\n            disabled={!newApiKey.brokerName || !newApiKey.apiKey || loading}\n            aria-label=\"Add new API key\"\n          >\n            Add API Key\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Password Change Dialog */}\n      <Dialog\n        open={passwordDialog.open}\n        onClose={handlePasswordDialogClose}\n        maxWidth=\"sm\"\n        fullWidth\n      >\n        <DialogTitle>Change Password</DialogTitle>\n        <DialogContent>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            label=\"Current Password\"\n            type=\"password\"\n            fullWidth\n            variant=\"outlined\"\n            value={passwordDialog.currentPassword}\n            onChange={(e) =>\n              setPasswordDialog((prev) => ({\n                ...prev,\n                currentPassword: e.target.value,\n                errors: { ...prev.errors, currentPassword: \"\" },\n              }))\n            }\n            error={Boolean(passwordDialog.errors.currentPassword)}\n            helperText={passwordDialog.errors.currentPassword}\n            sx={{ mb: 2 }}\n          />\n          <TextField\n            margin=\"dense\"\n            label=\"New Password\"\n            type=\"password\"\n            fullWidth\n            variant=\"outlined\"\n            value={passwordDialog.newPassword}\n            onChange={(e) =>\n              setPasswordDialog((prev) => ({\n                ...prev,\n                newPassword: e.target.value,\n                errors: { ...prev.errors, newPassword: \"\" },\n              }))\n            }\n            error={Boolean(passwordDialog.errors.newPassword)}\n            helperText={\n              passwordDialog.errors.newPassword ||\n              \"Must be at least 8 characters with uppercase, lowercase, and number\"\n            }\n            sx={{ mb: 2 }}\n          />\n          <TextField\n            margin=\"dense\"\n            label=\"Confirm New Password\"\n            type=\"password\"\n            fullWidth\n            variant=\"outlined\"\n            value={passwordDialog.confirmPassword}\n            onChange={(e) =>\n              setPasswordDialog((prev) => ({\n                ...prev,\n                confirmPassword: e.target.value,\n                errors: { ...prev.errors, confirmPassword: \"\" },\n              }))\n            }\n            error={Boolean(passwordDialog.errors.confirmPassword)}\n            helperText={passwordDialog.errors.confirmPassword}\n            onKeyPress={(e) => {\n              if (e.key === \"Enter\") {\n                handlePasswordDialogSubmit();\n              }\n            }}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handlePasswordDialogClose}>Cancel</Button>\n          <Button\n            onClick={handlePasswordDialogSubmit}\n            variant=\"contained\"\n            disabled={loading}\n            startIcon={loading && <CircularProgress size={20} />}\n          >\n            {loading ? \"Changing...\" : \"Change Password\"}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Snackbar for notifications */}\n      <Snackbar\n        open={snackbar.open}\n        autoHideDuration={6000}\n        onClose={() => setSnackbar({ ...snackbar, open: false })}\n      >\n        <Alert\n          onClose={() => setSnackbar({ ...snackbar, open: false })}\n          severity={snackbar.severity}\n          sx={{ width: \"100%\" }}\n        >\n          {snackbar.message}\n        </Alert>\n      </Snackbar>\n    </Container>\n  );\n};\n\nexport default Settings;\n","import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  Chip,\n  Button,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Typography,\n  CircularProgress,\n  Alert,\n} from '@mui/material';\nimport { useTheme } from '@mui/material/styles';\nimport { formatDistanceToNow } from 'date-fns';\n\nconst Messages = () => {\n  const theme = useTheme();\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedMessage, setSelectedMessage] = useState(null);\n  const [openDialog, setOpenDialog] = useState(false);\n\n  // Fetch messages\n  useEffect(() => {\n    const fetchMessages = async () => {\n      try {\n        setLoading(true);\n        const response = await fetch('/api/contact/submissions');\n        const result = await response.json();\n\n        if (!response.ok) {\n          throw new Error(result.error || 'Failed to fetch messages');\n        }\n\n        setMessages(result.data.submissions || []);\n        setError(null);\n      } catch (err) {\n        console.error('Error fetching messages:', err);\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchMessages();\n  }, []);\n\n  const handleOpenDialog = (message) => {\n    setSelectedMessage(message);\n    setOpenDialog(true);\n  };\n\n  const handleCloseDialog = () => {\n    setOpenDialog(false);\n    setSelectedMessage(null);\n  };\n\n  const handleStatusChange = async (id, newStatus) => {\n    try {\n      const response = await fetch(`/api/contact/submissions/${id}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ status: newStatus })\n      });\n\n      const result = await response.json();\n\n      if (!response.ok) {\n        throw new Error(result.error);\n      }\n\n      // Update local state\n      setMessages(messages.map(msg => \n        msg.id === id ? { ...msg, status: newStatus, reviewed_at: new Date() } : msg\n      ));\n\n      if (selectedMessage?.id === id) {\n        setSelectedMessage({ ...selectedMessage, status: newStatus });\n      }\n    } catch (err) {\n      console.error('Error updating message:', err);\n      alert(`Failed to update message: ${err.message}`);\n    }\n  };\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case 'new':\n        return 'primary';\n      case 'reviewed':\n        return 'success';\n      case 'archived':\n        return 'default';\n      default:\n        return 'default';\n    }\n  };\n\n  if (loading) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', p: 4 }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ p: 3 }}>\n      <Typography variant=\"h4\" sx={{ mb: 3, fontWeight: 700 }}>\n         Contact Form Submissions\n      </Typography>\n\n      {error && <Alert severity=\"error\" sx={{ mb: 2 }}>{error}</Alert>}\n\n      {messages.length === 0 ? (\n        <Alert severity=\"info\">No messages received yet</Alert>\n      ) : (\n        <TableContainer component={Paper}>\n          <Table>\n            <TableHead>\n              <TableRow sx={{ backgroundColor: theme.palette.primary.main + '10' }}>\n                <TableCell sx={{ fontWeight: 700 }}>Date</TableCell>\n                <TableCell sx={{ fontWeight: 700 }}>Name</TableCell>\n                <TableCell sx={{ fontWeight: 700 }}>Email</TableCell>\n                <TableCell sx={{ fontWeight: 700 }}>Subject</TableCell>\n                <TableCell sx={{ fontWeight: 700 }}>Status</TableCell>\n                <TableCell sx={{ fontWeight: 700, textAlign: 'center' }}>Actions</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {messages.map((message) => (\n                <TableRow key={message.id} hover>\n                  <TableCell>\n                    {formatDistanceToNow(new Date(message.submitted_at), { addSuffix: true })}\n                  </TableCell>\n                  <TableCell>{message.name}</TableCell>\n                  <TableCell>{message.email}</TableCell>\n                  <TableCell>{message.subject || ''}</TableCell>\n                  <TableCell>\n                    <Chip\n                      label={message.status}\n                      color={getStatusColor(message.status)}\n                      size=\"small\"\n                    />\n                  </TableCell>\n                  <TableCell sx={{ textAlign: 'center' }}>\n                    <Button\n                      size=\"small\"\n                      variant=\"outlined\"\n                      onClick={() => handleOpenDialog(message)}\n                    >\n                      View\n                    </Button>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      )}\n\n      {/* Message Detail Dialog */}\n      <Dialog open={openDialog} onClose={handleCloseDialog} maxWidth=\"sm\" fullWidth>\n        <DialogTitle>Message Details</DialogTitle>\n        <DialogContent sx={{ pt: 2 }}>\n          {selectedMessage && (\n            <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\n              <Box>\n                <Typography variant=\"subtitle2\" sx={{ fontWeight: 700 }}>From:</Typography>\n                <Typography>{selectedMessage.name} ({selectedMessage.email})</Typography>\n              </Box>\n              {selectedMessage.subject && (\n                <Box>\n                  <Typography variant=\"subtitle2\" sx={{ fontWeight: 700 }}>Subject:</Typography>\n                  <Typography>{selectedMessage.subject}</Typography>\n                </Box>\n              )}\n              <Box>\n                <Typography variant=\"subtitle2\" sx={{ fontWeight: 700 }}>Message:</Typography>\n                <Typography sx={{ whiteSpace: 'pre-wrap', mt: 1 }}>\n                  {selectedMessage.message}\n                </Typography>\n              </Box>\n              <Box>\n                <Typography variant=\"subtitle2\" sx={{ fontWeight: 700 }}>Status:</Typography>\n                <Box sx={{ mt: 1, display: 'flex', gap: 1 }}>\n                  <Button\n                    size=\"small\"\n                    variant={selectedMessage.status === 'new' ? 'contained' : 'outlined'}\n                    onClick={() => handleStatusChange(selectedMessage.id, 'new')}\n                  >\n                    New\n                  </Button>\n                  <Button\n                    size=\"small\"\n                    variant={selectedMessage.status === 'reviewed' ? 'contained' : 'outlined'}\n                    onClick={() => handleStatusChange(selectedMessage.id, 'reviewed')}\n                  >\n                    Reviewed\n                  </Button>\n                  <Button\n                    size=\"small\"\n                    variant={selectedMessage.status === 'archived' ? 'contained' : 'outlined'}\n                    onClick={() => handleStatusChange(selectedMessage.id, 'archived')}\n                  >\n                    Archived\n                  </Button>\n                </Box>\n              </Box>\n            </Box>\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleCloseDialog}>Close</Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n\nexport default Messages;\n","import { useState } from \"react\";\nimport {\n  Box,\n  Card,\n  CardContent,\n  TextField,\n  Button,\n  Typography,\n  Alert,\n  CircularProgress,\n  Link,\n  InputAdornment,\n  IconButton,\n  Divider,\n  Checkbox,\n  FormControlLabel,\n} from \"@mui/material\";\nimport {\n  Visibility,\n  VisibilityOff,\n  Login as LoginIcon,\n} from \"@mui/icons-material\";\nimport { useAuth } from \"../../contexts/AuthContext\";\n\nfunction LoginForm({ onSwitchToRegister, onSwitchToForgotPassword }) {\n  const [formData, setFormData] = useState({\n    username: \"\",\n    password: \"\",\n  });\n  const [showPassword, setShowPassword] = useState(false);\n  const [localError, setLocalError] = useState(\"\");\n  const [rememberMe, setRememberMe] = useState(false);\n\n  const { login, isLoading, error, clearError } = useAuth();\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n    // Clear errors when user starts typing\n    if (error) clearError();\n    if (localError) setLocalError(\"\");\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLocalError(\"\");\n\n    if (!formData.username || !formData.password) {\n      setLocalError(\"Please enter both username and password\");\n      return;\n    }\n\n    // Store remember me preference\n    localStorage.setItem(\"rememberMe\", rememberMe.toString());\n\n    const result = await login(formData.username, formData.password);\n\n    if (!result.success && result.error) {\n      setLocalError(result.error);\n    }\n  };\n\n  const displayError = error || localError;\n\n  return (\n    <Card sx={{ maxWidth: 400, mx: \"auto\", mt: 4 }}>\n      <CardContent sx={{ p: 4 }}>\n        <Box display=\"flex\" alignItems=\"center\" justifyContent=\"center\" mb={3}>\n          <LoginIcon sx={{ mr: 1, color: \"primary.main\" }} />\n          <Typography variant=\"h4\" component=\"h1\" color=\"primary\">\n            Sign In\n          </Typography>\n        </Box>\n\n        <Typography\n          variant=\"body1\"\n          color=\"text.secondary\"\n          align=\"center\"\n          mb={3}\n        >\n          Access your Financial Dashboard\n        </Typography>\n\n        {displayError && (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            {displayError}\n          </Alert>\n        )}\n\n        <Box component=\"form\" role=\"form\" onSubmit={handleSubmit} noValidate>\n          <TextField\n            fullWidth\n            id=\"username\"\n            name=\"username\"\n            label=\"Username or Email\"\n            type=\"text\"\n            value={formData.username}\n            onChange={handleChange}\n            margin=\"normal\"\n            required\n            autoComplete=\"username\"\n            autoFocus\n            disabled={isLoading}\n          />\n\n          <TextField\n            fullWidth\n            id=\"password\"\n            name=\"password\"\n            label=\"Password\"\n            type={showPassword ? \"text\" : \"password\"}\n            value={formData.password}\n            onChange={handleChange}\n            margin=\"normal\"\n            required\n            autoComplete=\"current-password\"\n            disabled={isLoading}\n            InputProps={{\n              endAdornment: (\n                <InputAdornment position=\"end\">\n                  <IconButton\n                    aria-label=\"toggle password visibility\"\n                    onClick={() => setShowPassword(!showPassword)}\n                    edge=\"end\"\n                    disabled={isLoading}\n                  >\n                    {showPassword ? <VisibilityOff /> : <Visibility />}\n                  </IconButton>\n                </InputAdornment>\n              ),\n            }}\n          />\n\n          <FormControlLabel\n            control={\n              <Checkbox\n                checked={rememberMe}\n                onChange={(e) => setRememberMe(e.target.checked)}\n                color=\"primary\"\n                disabled={isLoading}\n              />\n            }\n            label=\"Remember me for 30 days\"\n            sx={{ mt: 1, mb: 1 }}\n          />\n\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            sx={{ mt: 3, mb: 2, py: 1.5 }}\n            disabled={isLoading}\n            startIcon={\n              isLoading ? <CircularProgress size={20} /> : <LoginIcon />\n            }\n          >\n            {isLoading ? \"Signing In...\" : \"Sign In\"}\n          </Button>\n\n          <Box\n            display=\"flex\"\n            justifyContent=\"space-between\"\n            alignItems=\"center\"\n            mt={2}\n          >\n            <Link\n              component=\"button\"\n              type=\"button\"\n              variant=\"body2\"\n              onClick={onSwitchToForgotPassword}\n              disabled={isLoading}\n            >\n              Forgot password?\n            </Link>\n          </Box>\n\n          <Divider sx={{ my: 2 }} />\n\n          <Box textAlign=\"center\">\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Don&apos;t have an account?{\" \"}\n              <Link\n                component=\"button\"\n                type=\"button\"\n                variant=\"body2\"\n                onClick={onSwitchToRegister}\n                disabled={isLoading}\n                sx={{ fontWeight: \"medium\" }}\n              >\n                Sign up here\n              </Link>\n            </Typography>\n          </Box>\n        </Box>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default LoginForm;\n","import { useState } from \"react\";\nimport {\n  Box,\n  Card,\n  CardContent,\n  TextField,\n  Button,\n  Typography,\n  Alert,\n  CircularProgress,\n  Link,\n  InputAdornment,\n  IconButton,\n  Divider,\n  Grid,\n} from \"@mui/material\";\nimport {\n  Visibility,\n  VisibilityOff,\n  PersonAdd as RegisterIcon,\n} from \"@mui/icons-material\";\nimport { useAuth } from \"../../contexts/AuthContext\";\n\nfunction RegisterForm({ onSwitchToLogin, onRegistrationSuccess }) {\n  const [formData, setFormData] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    firstName: \"\",\n    lastName: \"\",\n  });\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  const [localError, setLocalError] = useState(\"\");\n\n  const { register, isLoading, error, clearError } = useAuth();\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n    // Clear errors when user starts typing\n    if (error) clearError();\n    if (localError) setLocalError(\"\");\n  };\n\n  const validateForm = () => {\n    if (!formData.username || !formData.email || !formData.password) {\n      setLocalError(\"Please fill in all required fields\");\n      return false;\n    }\n\n    if (formData.password !== formData.confirmPassword) {\n      setLocalError(\"Passwords do not match\");\n      return false;\n    }\n\n    if ((formData.password?.length || 0) < 8) {\n      setLocalError(\"Password must be at least 8 characters long\");\n      return false;\n    }\n\n    if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email)) {\n      setLocalError(\"Please enter a valid email address\");\n      return false;\n    }\n\n    return true;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLocalError(\"\");\n\n    if (!validateForm()) {\n      return;\n    }\n\n    const result = await register(\n      formData.username,\n      formData.password,\n      formData.email,\n      formData.firstName,\n      formData.lastName\n    );\n\n    if (result.success) {\n      onRegistrationSuccess?.(formData.username, result.nextStep);\n    } else if (result.error) {\n      setLocalError(result.error);\n    }\n  };\n\n  const displayError = error || localError;\n\n  return (\n    <Card sx={{ maxWidth: 500, mx: \"auto\", mt: 4 }}>\n      <CardContent sx={{ p: 4 }}>\n        <Box display=\"flex\" alignItems=\"center\" justifyContent=\"center\" mb={3}>\n          <RegisterIcon sx={{ mr: 1, color: \"primary.main\" }} />\n          <Typography variant=\"h4\" component=\"h1\" color=\"primary\">\n            Sign Up\n          </Typography>\n        </Box>\n\n        <Typography\n          variant=\"body1\"\n          color=\"text.secondary\"\n          align=\"center\"\n          mb={3}\n        >\n          Create your Financial Dashboard account\n        </Typography>\n\n        {displayError && (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            {displayError}\n          </Alert>\n        )}\n\n        <Box component=\"form\" onSubmit={handleSubmit} noValidate>\n          <Grid container spacing={2}>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                fullWidth\n                id=\"firstName\"\n                name=\"firstName\"\n                label=\"First Name\"\n                value={formData.firstName}\n                onChange={handleChange}\n                autoComplete=\"given-name\"\n                disabled={isLoading}\n              />\n            </Grid>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                fullWidth\n                id=\"lastName\"\n                name=\"lastName\"\n                label=\"Last Name\"\n                value={formData.lastName}\n                onChange={handleChange}\n                autoComplete=\"family-name\"\n                disabled={isLoading}\n              />\n            </Grid>\n          </Grid>\n\n          <TextField\n            fullWidth\n            id=\"username\"\n            name=\"username\"\n            label=\"Username\"\n            value={formData.username}\n            onChange={handleChange}\n            margin=\"normal\"\n            required\n            autoComplete=\"username\"\n            disabled={isLoading}\n            helperText=\"This will be your unique identifier for signing in\"\n          />\n\n          <TextField\n            fullWidth\n            id=\"email\"\n            name=\"email\"\n            label=\"Email Address\"\n            type=\"email\"\n            value={formData.email}\n            onChange={handleChange}\n            margin=\"normal\"\n            required\n            autoComplete=\"email\"\n            disabled={isLoading}\n            helperText=\"We'll send verification instructions to this email\"\n          />\n\n          <TextField\n            fullWidth\n            id=\"password\"\n            name=\"password\"\n            label=\"Password\"\n            type={showPassword ? \"text\" : \"password\"}\n            value={formData.password}\n            onChange={handleChange}\n            margin=\"normal\"\n            required\n            autoComplete=\"new-password\"\n            disabled={isLoading}\n            helperText=\"Must be at least 8 characters long\"\n            InputProps={{\n              endAdornment: (\n                <InputAdornment position=\"end\">\n                  <IconButton\n                    aria-label=\"toggle password visibility\"\n                    onClick={() => setShowPassword(!showPassword)}\n                    edge=\"end\"\n                    disabled={isLoading}\n                  >\n                    {showPassword ? <VisibilityOff /> : <Visibility />}\n                  </IconButton>\n                </InputAdornment>\n              ),\n            }}\n          />\n\n          <TextField\n            fullWidth\n            id=\"confirmPassword\"\n            name=\"confirmPassword\"\n            label=\"Confirm Password\"\n            type={showConfirmPassword ? \"text\" : \"password\"}\n            value={formData.confirmPassword}\n            onChange={handleChange}\n            margin=\"normal\"\n            required\n            autoComplete=\"new-password\"\n            disabled={isLoading}\n            InputProps={{\n              endAdornment: (\n                <InputAdornment position=\"end\">\n                  <IconButton\n                    aria-label=\"toggle confirm password visibility\"\n                    onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n                    edge=\"end\"\n                    disabled={isLoading}\n                  >\n                    {showConfirmPassword ? <VisibilityOff /> : <Visibility />}\n                  </IconButton>\n                </InputAdornment>\n              ),\n            }}\n          />\n\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            sx={{ mt: 3, mb: 2, py: 1.5 }}\n            disabled={isLoading}\n            startIcon={\n              isLoading ? <CircularProgress size={20} /> : <RegisterIcon />\n            }\n          >\n            {isLoading ? \"Creating Account...\" : \"Create Account\"}\n          </Button>\n\n          <Divider sx={{ my: 2 }} />\n\n          <Box textAlign=\"center\">\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Already have an account?{\" \"}\n              <Link\n                component=\"button\"\n                type=\"button\"\n                variant=\"body2\"\n                onClick={onSwitchToLogin}\n                disabled={isLoading}\n                sx={{ fontWeight: \"medium\" }}\n              >\n                Sign in here\n              </Link>\n            </Typography>\n          </Box>\n        </Box>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default RegisterForm;\n","import { useState, useEffect } from \"react\";\nimport {\n  Box,\n  Card,\n  CardContent,\n  TextField,\n  Button,\n  Typography,\n  Alert,\n  CircularProgress,\n  Link,\n} from \"@mui/material\";\nimport { CheckCircle as ConfirmIcon } from \"@mui/icons-material\";\nimport { useAuth } from \"../../contexts/AuthContext\";\n\nfunction ConfirmationForm({\n  username,\n  onConfirmationSuccess,\n  onSwitchToLogin,\n}) {\n  const [confirmationCode, setConfirmationCode] = useState(\"\");\n  const [localError, setLocalError] = useState(\"\");\n  const [resendSuccess, setResendSuccess] = useState(\"\");\n  const [resendCooldown, setResendCooldown] = useState(0);\n\n  const {\n    confirmRegistration,\n    resendConfirmationCode,\n    isLoading,\n    error,\n    clearError,\n  } = useAuth();\n\n  const handleChange = (e) => {\n    setConfirmationCode(e.target.value);\n    // Clear errors when user starts typing\n    if (error) clearError();\n    if (localError) setLocalError(\"\");\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLocalError(\"\");\n\n    if (!confirmationCode) {\n      setLocalError(\"Please enter the confirmation code\");\n      return;\n    }\n\n    const result = await confirmRegistration(username, confirmationCode);\n\n    if (result.success) {\n      onConfirmationSuccess?.();\n    } else if (result.error) {\n      setLocalError(result.error);\n    }\n  };\n\n  // Cooldown timer effect\n  useEffect(() => {\n    if (resendCooldown > 0) {\n      const timer = setTimeout(() => {\n        setResendCooldown(resendCooldown - 1);\n      }, 1000);\n      return () => clearTimeout(timer);\n    }\n  }, [resendCooldown]);\n\n  const handleResendCode = async () => {\n    setLocalError(\"\");\n    setResendSuccess(\"\");\n\n    const result = await resendConfirmationCode(username);\n\n    if (result.success) {\n      setResendSuccess(result.message);\n      setResendCooldown(60); // 60 second cooldown\n    } else {\n      setLocalError(result.error);\n    }\n  };\n\n  const displayError = error || localError;\n\n  return (\n    <Card sx={{ maxWidth: 400, mx: \"auto\", mt: 4 }}>\n      <CardContent sx={{ p: 4 }}>\n        <Box display=\"flex\" alignItems=\"center\" justifyContent=\"center\" mb={3}>\n          <ConfirmIcon sx={{ mr: 1, color: \"primary.main\" }} />\n          <Typography variant=\"h4\" component=\"h1\" color=\"primary\">\n            Verify Account\n          </Typography>\n        </Box>\n\n        <Typography\n          variant=\"body1\"\n          color=\"text.secondary\"\n          align=\"center\"\n          mb={3}\n        >\n          Enter the verification code sent to your email address\n        </Typography>\n\n        {displayError && (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            {displayError}\n          </Alert>\n        )}\n\n        {resendSuccess && (\n          <Alert severity=\"success\" sx={{ mb: 2 }}>\n            {resendSuccess}\n          </Alert>\n        )}\n\n        <Box component=\"form\" onSubmit={handleSubmit} noValidate>\n          <TextField\n            fullWidth\n            id=\"confirmationCode\"\n            name=\"confirmationCode\"\n            label=\"Verification Code\"\n            type=\"text\"\n            value={confirmationCode}\n            onChange={handleChange}\n            margin=\"normal\"\n            required\n            autoFocus\n            disabled={isLoading}\n            placeholder=\"Enter 6-digit code\"\n            inputProps={{ maxLength: 6 }}\n          />\n\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            sx={{ mt: 3, mb: 2, py: 1.5 }}\n            disabled={isLoading}\n            startIcon={\n              isLoading ? <CircularProgress size={20} /> : <ConfirmIcon />\n            }\n          >\n            {isLoading ? \"Verifying...\" : \"Verify Account\"}\n          </Button>\n\n          <Box textAlign=\"center\" mt={2}>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Didn&apos;t receive the code?{\" \"}\n              <Link\n                component=\"button\"\n                type=\"button\"\n                variant=\"body2\"\n                onClick={handleResendCode}\n                disabled={isLoading || resendCooldown > 0}\n                sx={{ fontWeight: \"medium\" }}\n              >\n                {resendCooldown > 0 ? `Resend (${resendCooldown}s)` : \"Resend\"}\n              </Link>\n            </Typography>\n\n            <Typography variant=\"body2\" color=\"text.secondary\" mt={1}>\n              <Link\n                component=\"button\"\n                type=\"button\"\n                variant=\"body2\"\n                onClick={onSwitchToLogin}\n                disabled={isLoading}\n                sx={{ fontWeight: \"medium\" }}\n              >\n                Back to Sign In\n              </Link>\n            </Typography>\n          </Box>\n        </Box>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default ConfirmationForm;\n","import { useState } from \"react\";\nimport {\n  Box,\n  TextField,\n  Button,\n  Typography,\n  Alert,\n  Paper,\n} from \"@mui/material\";\nimport { useAuth } from \"../../contexts/AuthContext\";\n\nconst ForgotPasswordForm = ({ onBack }) => {\n  const [email, setEmail] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  const { forgotPassword } = useAuth();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(\"\");\n    setMessage(\"\");\n\n    try {\n      const result = await forgotPassword(email);\n      if (result.success) {\n        setMessage(result.message || \"Reset code sent to your email\");\n      } else {\n        setError(result.error || \"Failed to send password reset email.\");\n      }\n    } catch (err) {\n      setError(\"Failed to send password reset email. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Paper elevation={3} sx={{ p: 4, maxWidth: 400, width: \"100%\" }}>\n      <Typography variant=\"h4\" gutterBottom align=\"center\">\n        Reset Password\n      </Typography>\n\n      <Typography\n        variant=\"body2\"\n        color=\"text.secondary\"\n        sx={{ mb: 3 }}\n        align=\"center\"\n      >\n        Enter your email address and we&apos;ll send you a password reset link.\n      </Typography>\n\n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\n          {error}\n        </Alert>\n      )}\n\n      {message && (\n        <Alert severity=\"success\" sx={{ mb: 2 }}>\n          {message}\n        </Alert>\n      )}\n\n      <Box component=\"form\" onSubmit={handleSubmit} sx={{ mt: 1 }}>\n        <TextField\n          margin=\"normal\"\n          required\n          fullWidth\n          id=\"email\"\n          label=\"Email Address\"\n          name=\"email\"\n          autoComplete=\"email\"\n          autoFocus\n          type=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          disabled={loading}\n        />\n\n        <Button\n          type=\"submit\"\n          fullWidth\n          variant=\"contained\"\n          sx={{ mt: 3, mb: 2 }}\n          disabled={loading || !email}\n        >\n          {loading ? \"Sending...\" : \"Send Reset Email\"}\n        </Button>\n\n        <Button fullWidth variant=\"text\" onClick={onBack} disabled={loading}>\n          Back to Sign In\n        </Button>\n      </Box>\n    </Paper>\n  );\n};\n\nexport default ForgotPasswordForm;\n","import { useState } from \"react\";\nimport {\n  Box,\n  Card,\n  CardContent,\n  TextField,\n  Button,\n  Typography,\n  Alert,\n  CircularProgress,\n  Link,\n  InputAdornment,\n  IconButton,\n} from \"@mui/material\";\nimport { Visibility, VisibilityOff, VpnKey } from \"@mui/icons-material\";\nimport { useAuth } from \"../../contexts/AuthContext\";\n\nfunction ResetPasswordForm({\n  username,\n  onPasswordResetSuccess,\n  onSwitchToLogin,\n}) {\n  const [formData, setFormData] = useState({\n    confirmationCode: \"\",\n    newPassword: \"\",\n    confirmPassword: \"\",\n  });\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  const [localError, setLocalError] = useState(\"\");\n\n  const { confirmForgotPassword, isLoading, error, clearError } = useAuth();\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n    // Clear errors when user starts typing\n    if (error) clearError();\n    if (localError) setLocalError(\"\");\n  };\n\n  const validateForm = () => {\n    if (\n      !formData.confirmationCode ||\n      !formData.newPassword ||\n      !formData.confirmPassword\n    ) {\n      setLocalError(\"Please fill in all fields\");\n      return false;\n    }\n\n    if (formData.newPassword !== formData.confirmPassword) {\n      setLocalError(\"Passwords do not match\");\n      return false;\n    }\n\n    if ((formData.newPassword?.length || 0) < 8) {\n      setLocalError(\"Password must be at least 8 characters long\");\n      return false;\n    }\n\n    return true;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLocalError(\"\");\n\n    if (!validateForm()) {\n      return;\n    }\n\n    const result = await confirmForgotPassword(\n      username,\n      formData.confirmationCode,\n      formData.newPassword\n    );\n\n    if (result.success) {\n      onPasswordResetSuccess?.();\n    } else if (result.error) {\n      setLocalError(result.error);\n    }\n  };\n\n  const displayError = error || localError;\n\n  return (\n    <Card sx={{ maxWidth: 400, mx: \"auto\", mt: 4 }}>\n      <CardContent sx={{ p: 4 }}>\n        <Box display=\"flex\" alignItems=\"center\" justifyContent=\"center\" mb={3}>\n          <VpnKey sx={{ mr: 1, color: \"primary.main\" }} />\n          <Typography variant=\"h4\" component=\"h1\" color=\"primary\">\n            Set New Password\n          </Typography>\n        </Box>\n\n        <Typography\n          variant=\"body1\"\n          color=\"text.secondary\"\n          align=\"center\"\n          mb={3}\n        >\n          Enter the code from your email and choose a new password\n        </Typography>\n\n        {displayError && (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            {displayError}\n          </Alert>\n        )}\n\n        <Box component=\"form\" onSubmit={handleSubmit} noValidate>\n          <TextField\n            fullWidth\n            id=\"confirmationCode\"\n            name=\"confirmationCode\"\n            label=\"Reset Code\"\n            type=\"text\"\n            value={formData.confirmationCode}\n            onChange={handleChange}\n            margin=\"normal\"\n            required\n            autoFocus\n            disabled={isLoading}\n            placeholder=\"Enter 6-digit code\"\n            inputProps={{ maxLength: 6 }}\n          />\n\n          <TextField\n            fullWidth\n            id=\"newPassword\"\n            name=\"newPassword\"\n            label=\"New Password\"\n            type={showPassword ? \"text\" : \"password\"}\n            value={formData.newPassword}\n            onChange={handleChange}\n            margin=\"normal\"\n            required\n            disabled={isLoading}\n            autoComplete=\"new-password\"\n            helperText=\"Must be at least 8 characters long\"\n            InputProps={{\n              endAdornment: (\n                <InputAdornment position=\"end\">\n                  <IconButton\n                    aria-label=\"toggle password visibility\"\n                    onClick={() => setShowPassword(!showPassword)}\n                    edge=\"end\"\n                    disabled={isLoading}\n                  >\n                    {showPassword ? <VisibilityOff /> : <Visibility />}\n                  </IconButton>\n                </InputAdornment>\n              ),\n            }}\n          />\n\n          <TextField\n            fullWidth\n            id=\"confirmPassword\"\n            name=\"confirmPassword\"\n            label=\"Confirm New Password\"\n            type={showConfirmPassword ? \"text\" : \"password\"}\n            value={formData.confirmPassword}\n            onChange={handleChange}\n            margin=\"normal\"\n            required\n            disabled={isLoading}\n            autoComplete=\"new-password\"\n            InputProps={{\n              endAdornment: (\n                <InputAdornment position=\"end\">\n                  <IconButton\n                    aria-label=\"toggle confirm password visibility\"\n                    onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n                    edge=\"end\"\n                    disabled={isLoading}\n                  >\n                    {showConfirmPassword ? <VisibilityOff /> : <Visibility />}\n                  </IconButton>\n                </InputAdornment>\n              ),\n            }}\n          />\n\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            sx={{ mt: 3, mb: 2, py: 1.5 }}\n            disabled={isLoading}\n            startIcon={isLoading ? <CircularProgress size={20} /> : <VpnKey />}\n          >\n            {isLoading ? \"Resetting...\" : \"Reset Password\"}\n          </Button>\n\n          <Box textAlign=\"center\" mt={2}>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              <Link\n                component=\"button\"\n                type=\"button\"\n                variant=\"body2\"\n                onClick={onSwitchToLogin}\n                disabled={isLoading}\n                sx={{ fontWeight: \"medium\" }}\n              >\n                Back to Sign In\n              </Link>\n            </Typography>\n          </Box>\n        </Box>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default ResetPasswordForm;\n","import { useState } from \"react\";\nimport {\n  Box,\n  Typography,\n  TextField,\n  Button,\n  Alert,\n  InputAdornment,\n} from \"@mui/material\";\nimport { Security } from \"@mui/icons-material\";\n\nfunction MFAChallenge({\n  challengeType = \"SMS_MFA\",\n  message = \"Please enter the verification code sent to your device.\",\n  onSuccess,\n  onCancel,\n}) {\n  const [code, setCode] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!code.trim()) {\n      setError(\"Please enter the verification code\");\n      return;\n    }\n\n    setLoading(true);\n    setError(\"\");\n\n    try {\n      // Simulate MFA validation\n      if (code === \"123456\") {\n        onSuccess({\n          username: \"testuser\",\n          code: code,\n          challengeType: challengeType,\n        });\n      } else {\n        setError(\"Invalid verification code. Please try again.\");\n      }\n    } catch (err) {\n      setError(\"MFA verification failed. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getChallengeTitle = () => {\n    switch (challengeType) {\n      case \"SMS_MFA\":\n        return \"SMS Verification\";\n      case \"SOFTWARE_TOKEN_MFA\":\n        return \"Authenticator App\";\n      default:\n        return \"Multi-Factor Authentication\";\n    }\n  };\n\n  return (\n    <Box sx={{ p: 3 }}>\n      <Box display=\"flex\" alignItems=\"center\" mb={2}>\n        <Security sx={{ mr: 1, color: \"primary.main\" }} />\n        <Typography variant=\"h6\" component=\"h2\">\n          {getChallengeTitle()}\n        </Typography>\n      </Box>\n\n      <Typography variant=\"body2\" color=\"text.secondary\" mb={3}>\n        {message}\n      </Typography>\n\n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\n          {error}\n        </Alert>\n      )}\n\n      <form onSubmit={handleSubmit}>\n        <TextField\n          fullWidth\n          label=\"Verification Code\"\n          value={code}\n          onChange={(e) => setCode(e.target.value)}\n          placeholder=\"Enter 6-digit code\"\n          inputProps={{\n            maxLength: 6,\n            pattern: \"[0-9]{6}\",\n          }}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <Security />\n              </InputAdornment>\n            ),\n          }}\n          sx={{ mb: 3 }}\n          required\n        />\n\n        <Box display=\"flex\" gap={2} justifyContent=\"flex-end\">\n          <Button variant=\"outlined\" onClick={onCancel} disabled={loading}>\n            Cancel\n          </Button>\n          <Button\n            type=\"submit\"\n            variant=\"contained\"\n            disabled={loading || !code.trim()}\n          >\n            {loading ? \"Verifying...\" : \"Verify\"}\n          </Button>\n        </Box>\n      </form>\n\n      <Typography variant=\"caption\" display=\"block\" textAlign=\"center\" mt={2}>\n        Didn&apos;t receive a code? Check your spam folder or try again.\n      </Typography>\n    </Box>\n  );\n}\n\nexport default MFAChallenge;\n","import { useState } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  Box,\n  IconButton,\n  Typography,\n  Alert,\n} from \"@mui/material\";\nimport { Close } from \"@mui/icons-material\";\nimport LoginForm from \"./LoginForm\";\nimport RegisterForm from \"./RegisterForm\";\nimport ConfirmationForm from \"./ConfirmationForm\";\nimport ForgotPasswordForm from \"./ForgotPasswordForm\";\nimport ResetPasswordForm from \"./ResetPasswordForm\";\nimport MFAChallenge from \"./MFAChallenge\";\n\nconst AUTH_MODES = {\n  LOGIN: \"login\",\n  REGISTER: \"register\",\n  CONFIRM: \"confirm\",\n  FORGOT_PASSWORD: \"forgot_password\",\n  RESET_PASSWORD: \"reset_password\",\n  MFA_CHALLENGE: \"mfa_challenge\",\n};\n\nfunction AuthModal({ open, onClose, initialMode = AUTH_MODES.LOGIN, email = \"\", onSuccess }) {\n  const [mode, setMode] = useState(initialMode);\n  const [username, setUsername] = useState(email);\n  const [successMessage, setSuccessMessage] = useState(\"\");\n\n  const handleRegistrationSuccess = (registeredUsername, _nextStep) => {\n    setUsername(registeredUsername);\n    setSuccessMessage(\n      \"Registration successful! Please check your email for a verification code.\"\n    );\n    setMode(AUTH_MODES.CONFIRM);\n  };\n\n  const handleConfirmationSuccess = () => {\n    setSuccessMessage(\"Account confirmed! You can now sign in.\");\n    setMode(AUTH_MODES.LOGIN);\n  };\n\n  const handleForgotPasswordSuccess = (resetUsername) => {\n    setUsername(resetUsername);\n    setSuccessMessage(\"Password reset code sent! Please check your email.\");\n    setMode(AUTH_MODES.RESET_PASSWORD);\n  };\n\n  const handlePasswordResetSuccess = () => {\n    setSuccessMessage(\n      \"Password reset successful! You can now sign in with your new password.\"\n    );\n    setMode(AUTH_MODES.LOGIN);\n    onSuccess?.();\n  };\n\n  const handleMFASuccess = (result) => {\n    setSuccessMessage(\"Multi-factor authentication successful!\");\n    setMode(AUTH_MODES.LOGIN);\n    // In a real app, this would complete the authentication process\n    console.log(\"MFA Success:\", result);\n  };\n\n  const handleMFACancel = () => {\n    setMode(AUTH_MODES.LOGIN);\n  };\n\n  const handleClose = () => {\n    setMode(initialMode);\n    setUsername(\"\");\n    setSuccessMessage(\"\");\n    onClose();\n  };\n\n  const getTitle = () => {\n    switch (mode) {\n      case AUTH_MODES.LOGIN:\n        return \"Sign In\";\n      case AUTH_MODES.REGISTER:\n        return \"Create Account\";\n      case AUTH_MODES.CONFIRM:\n        return \"Verify Account\";\n      case AUTH_MODES.FORGOT_PASSWORD:\n        return \"Reset Password\";\n      case AUTH_MODES.RESET_PASSWORD:\n        return \"Set New Password\";\n      case AUTH_MODES.MFA_CHALLENGE:\n        return \"Multi-Factor Authentication\";\n      default:\n        return \"Authentication\";\n    }\n  };\n\n  return (\n    <Dialog\n      open={open}\n      onClose={handleClose}\n      maxWidth=\"sm\"\n      fullWidth\n      PaperProps={{\n        sx: { borderRadius: 2 },\n      }}\n    >\n      <Box\n        display=\"flex\"\n        justifyContent=\"space-between\"\n        alignItems=\"center\"\n        p={2}\n        borderBottom={1}\n        borderColor=\"divider\"\n      >\n        <Typography variant=\"h6\" component=\"h2\">\n          {getTitle()}\n        </Typography>\n        <IconButton onClick={handleClose} size=\"small\" aria-label=\"close\">\n          <Close />\n        </IconButton>\n      </Box>\n\n      <DialogContent sx={{ p: 0 }}>\n        {successMessage && (\n          <Alert severity=\"success\" sx={{ m: 2, mb: 0 }}>\n            {successMessage}\n          </Alert>\n        )}\n\n        {mode === AUTH_MODES.LOGIN && (\n          <LoginForm\n            onSwitchToRegister={() => {\n              setSuccessMessage(\"\");\n              setMode(AUTH_MODES.REGISTER);\n            }}\n            onSwitchToForgotPassword={() => {\n              setSuccessMessage(\"\");\n              setMode(AUTH_MODES.FORGOT_PASSWORD);\n            }}\n          />\n        )}\n\n        {mode === AUTH_MODES.REGISTER && (\n          <RegisterForm\n            onSwitchToLogin={() => {\n              setSuccessMessage(\"\");\n              setMode(AUTH_MODES.LOGIN);\n            }}\n            onRegistrationSuccess={handleRegistrationSuccess}\n          />\n        )}\n\n        {mode === AUTH_MODES.CONFIRM && (\n          <ConfirmationForm\n            username={username}\n            onConfirmationSuccess={handleConfirmationSuccess}\n            onSwitchToLogin={() => {\n              setSuccessMessage(\"\");\n              setMode(AUTH_MODES.LOGIN);\n            }}\n          />\n        )}\n\n        {mode === AUTH_MODES.FORGOT_PASSWORD && (\n          <ForgotPasswordForm\n            onForgotPasswordSuccess={handleForgotPasswordSuccess}\n            onSwitchToLogin={() => {\n              setSuccessMessage(\"\");\n              setMode(AUTH_MODES.LOGIN);\n            }}\n          />\n        )}\n\n        {mode === AUTH_MODES.RESET_PASSWORD && (\n          <ResetPasswordForm\n            username={username}\n            onPasswordResetSuccess={handlePasswordResetSuccess}\n            onSwitchToLogin={() => {\n              setSuccessMessage(\"\");\n              setMode(AUTH_MODES.LOGIN);\n            }}\n          />\n        )}\n\n        {mode === AUTH_MODES.MFA_CHALLENGE && (\n          <MFAChallenge\n            challengeType=\"SMS_MFA\"\n            message=\"Please enter the verification code sent to your device.\"\n            onSuccess={handleMFASuccess}\n            onCancel={handleMFACancel}\n          />\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nexport default AuthModal;\n","function ProtectedRoute({ children, _requireAuth = false, _fallback = null }) {\n  // Authentication disabled - all routes are now public\n  return children;\n}\n\nexport default ProtectedRoute;\n","import React from \"react\";\nimport {\n  Box,\n  Typography,\n  Button,\n  Card,\n  CardContent,\n  Alert,\n  Divider,\n  Stack,\n} from \"@mui/material\";\nimport {\n  ErrorOutline,\n  Refresh,\n  Home,\n  ContactSupport,\n} from \"@mui/icons-material\";\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n      errorInfo: null,\n      errorId: null,\n    };\n  }\n\n  static getDerivedStateFromError(_error) {\n    // Update state so the next render will show the fallback UI\n    return {\n      hasError: true,\n      errorId: `ERR_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n    };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // Only catch React rendering errors, not API/async errors\n    const isReactRenderError = errorInfo && errorInfo.componentStack;\n    const isNetworkError =\n      error &&\n      error.message &&\n      (error.message.includes(\"Network Error\") ||\n        error.message.includes(\"fetch\") ||\n        error.message.includes(\"ECONNREFUSED\") ||\n        error.message.includes(\"timeout\"));\n\n    // Don't catch network/API errors - let components handle them\n    if (isNetworkError && !isReactRenderError) {\n      console.warn(\n        \"API/Network error caught by ErrorBoundary, but not showing error UI:\",\n        error\n      );\n      return;\n    }\n\n    // Log the error to our error reporting service\n    console.error(\n      \"ErrorBoundary caught a React render error:\",\n      error,\n      errorInfo\n    );\n\n    this.setState({\n      error: error,\n      errorInfo: errorInfo,\n    });\n\n    // In production, you would send this to an error reporting service\n    // like Sentry, LogRocket, or Bugsnag\n    if (process.env.NODE_ENV === \"production\") {\n      // Example: Send to error reporting service\n      // errorReportingService.captureException(error, {\n      //   extra: errorInfo,\n      //   tags: {\n      //     component: 'ErrorBoundary'\n      //   }\n      // });\n    }\n  }\n\n  handleReload = () => {\n    // Clear the error state and reload the component\n    this.setState({\n      hasError: false,\n      error: null,\n      errorInfo: null,\n      errorId: null,\n    });\n\n    // Reload the entire page to ensure clean state\n    window.location.reload();\n  };\n\n  handleGoHome = () => {\n    window.location.href = \"/\";\n  };\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <Box\n          sx={{\n            minHeight: \"100vh\",\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            bgcolor: \"grey.50\",\n            p: 3,\n          }}\n        >\n          <Card sx={{ maxWidth: 600, width: \"100%\" }}>\n            <CardContent sx={{ p: 4 }}>\n              <Stack spacing={3} alignItems=\"center\" textAlign=\"center\">\n                {/* Error Icon */}\n                <ErrorOutline\n                  data-testid=\"ErrorOutlineIcon\"\n                  sx={{ fontSize: 64, color: \"error.main\" }}\n                />\n\n                {/* Main Error Message */}\n                <Box>\n                  <Typography variant=\"h4\" fontWeight={700} gutterBottom>\n                    Something went wrong\n                  </Typography>\n                  <Typography\n                    variant=\"body1\"\n                    color=\"text.secondary\"\n                    sx={{ mb: 2 }}\n                  >\n                    We apologize for the inconvenience. An unexpected error has\n                    occurred in our financial dashboard application.\n                  </Typography>\n                </Box>\n\n                {/* Error Details for Development */}\n                {process.env.NODE_ENV === \"development\" && this.state.error && (\n                  <Alert\n                    severity=\"error\"\n                    sx={{ width: \"100%\", textAlign: \"left\" }}\n                  >\n                    <Typography\n                      variant=\"subtitle2\"\n                      fontWeight={600}\n                      gutterBottom\n                    >\n                      Error Details (Development Only):\n                    </Typography>\n                    <Typography\n                      variant=\"body2\"\n                      sx={{ fontFamily: \"monospace\", mb: 1 }}\n                    >\n                      {this.state.error.toString()}\n                    </Typography>\n                    {this.state.errorInfo?.componentStack && (\n                      <details style={{ marginTop: 8 }}>\n                        <summary style={{ cursor: \"pointer\", fontWeight: 600 }}>\n                          Component Stack\n                        </summary>\n                        <pre\n                          style={{\n                            fontSize: \"0.75rem\",\n                            marginTop: 8,\n                            whiteSpace: \"pre-wrap\",\n                            maxHeight: 200,\n                            overflow: \"auto\",\n                          }}\n                        >\n                          {this.state.errorInfo.componentStack}\n                        </pre>\n                      </details>\n                    )}\n                  </Alert>\n                )}\n\n                {/* Error ID for Production */}\n                {process.env.NODE_ENV === \"production\" && (\n                  <Alert severity=\"info\" sx={{ width: \"100%\" }}>\n                    <Typography variant=\"body2\">\n                      <strong>Error ID:</strong> {this.state.errorId}\n                    </Typography>\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      Please provide this ID when contacting support for faster\n                      assistance.\n                    </Typography>\n                  </Alert>\n                )}\n\n                <Divider sx={{ width: \"100%\" }} />\n\n                {/* Action Buttons */}\n                <Stack direction=\"row\" spacing={2}>\n                  <Button\n                    variant=\"contained\"\n                    startIcon={<Refresh />}\n                    onClick={this.handleReload}\n                    size=\"large\"\n                  >\n                    Try Again\n                  </Button>\n                  <Button\n                    variant=\"outlined\"\n                    startIcon={<Home />}\n                    onClick={this.handleGoHome}\n                    size=\"large\"\n                  >\n                    Go Home\n                  </Button>\n                </Stack>\n\n                {/* Support Information */}\n                <Box sx={{ mt: 2 }}>\n                  <Typography\n                    variant=\"body2\"\n                    color=\"text.secondary\"\n                    gutterBottom\n                  >\n                    If this problem persists, please contact our support team:\n                  </Typography>\n                  <Button\n                    variant=\"text\"\n                    startIcon={<ContactSupport />}\n                    size=\"small\"\n                    href=\"mailto:support@edgebrooke.com\"\n                  >\n                    support@edgebrooke.com\n                  </Button>\n                </Box>\n\n                {/* Professional Footer */}\n                <Box\n                  sx={{\n                    mt: 3,\n                    pt: 2,\n                    borderTop: 1,\n                    borderColor: \"divider\",\n                    width: \"100%\",\n                  }}\n                >\n                  <Typography\n                    variant=\"caption\"\n                    color=\"text.secondary\"\n                    textAlign=\"center\"\n                  >\n                    Edgebrooke Capital Financial Dashboard\n                    <br />\n                    Enterprise-grade financial data platform for professional\n                    investors\n                  </Typography>\n                </Box>\n              </Stack>\n            </CardContent>\n          </Card>\n        </Box>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","import React from 'react';\nimport { useNavigate } from 'react-router-dom';\n\n/**\n * RootRedirect Component\n * Handles routing logic for the root path (/)\n * Redirects to Portfolio Holdings (admin default landing page)\n */\nconst RootRedirect = () => {\n  const navigate = useNavigate();\n\n  React.useEffect(() => {\n    // Redirect to Portfolio Holdings\n    navigate('/portfolio', { replace: true });\n  }, [navigate]);\n\n  return null;\n};\n\nexport default RootRedirect;","import { useState, useEffect } from \"react\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport {\n  Container,\n  Typography,\n  Card,\n  CardContent,\n  Button,\n  Box,\n} from \"@mui/material\";\n\nconst AuthTest = () => {\n  const auth = useAuth();\n  const [debugInfo, setDebugInfo] = useState([]);\n\n  const addDebugInfo = (message) => {\n    const timestamp = new Date().toLocaleTimeString();\n    const logMessage = `${timestamp}: ${message}`;\n    if (import.meta.env && import.meta.env.DEV) {\n      console.log(\" AUTH DEBUG:\", logMessage);\n    }\n    setDebugInfo((prev) => [...prev, logMessage]);\n  };\n\n  useEffect(() => {\n    addDebugInfo(\"AuthTest component mounted\");\n    addDebugInfo(\n      `Initial auth state: loading=${auth.isLoading}, authenticated=${auth.isAuthenticated}`\n    );\n    \n  }, []);\n\n  useEffect(() => {\n    addDebugInfo(\n      `Auth state changed: loading=${auth.isLoading}, authenticated=${auth.isAuthenticated}, user=${auth.user?.username || \"none\"}`\n    );\n  }, [auth.isLoading, auth.isAuthenticated, auth.user]);\n\n  const loginWithTestUser = async () => {\n    addDebugInfo(\"Attempting to login with test user...\");\n    try {\n      const result = await auth.login(\"testuser\", \"testpass\");\n      addDebugInfo(`Login result: ${JSON.stringify(result)}`);\n    } catch (error) {\n      addDebugInfo(`Login error: ${error.message}`);\n    }\n  };\n\n  const logout = async () => {\n    addDebugInfo(\"Attempting to logout...\");\n    try {\n      await auth.logout();\n      addDebugInfo(\"Logout successful\");\n    } catch (error) {\n      addDebugInfo(`Logout error: ${error.message}`);\n    }\n  };\n\n  const checkAuthState = async () => {\n    addDebugInfo(\"Manually checking auth state...\");\n    try {\n      await auth.checkAuthState();\n      addDebugInfo(\"Auth state check completed\");\n    } catch (error) {\n      addDebugInfo(`Auth state check error: ${error.message}`);\n    }\n  };\n\n  return (\n    <Container maxWidth=\"md\">\n      <Typography variant=\"h4\" gutterBottom>\n        Authentication Test Page\n      </Typography>\n\n      <Card sx={{ mb: 3 }}>\n        <CardContent>\n          <Typography variant=\"h6\" gutterBottom>\n            Current Auth State:\n          </Typography>\n          <Typography>\n            Loading: {auth.isLoading ? \" Yes\" : \" No\"}\n          </Typography>\n          <Typography>\n            Authenticated: {auth.isAuthenticated ? \" Yes\" : \" No\"}\n          </Typography>\n          <Typography>\n            User: {auth.user ? ` ${auth.user.username}` : \" None\"}\n          </Typography>\n          <Typography>Error: {auth.error || \" None\"}</Typography>\n          <Typography>\n            Tokens: {auth.tokens ? \" Present\" : \" None\"}\n          </Typography>\n\n          <Box sx={{ mt: 2, display: \"flex\", gap: 1, flexWrap: \"wrap\" }}>\n            <Button\n              onClick={loginWithTestUser}\n              variant=\"contained\"\n              size=\"small\"\n            >\n              Login Test User\n            </Button>\n            <Button onClick={logout} variant=\"outlined\" size=\"small\">\n              Logout\n            </Button>\n            <Button onClick={checkAuthState} variant=\"outlined\" size=\"small\">\n              Check Auth State\n            </Button>\n          </Box>\n        </CardContent>\n      </Card>\n\n      <Card sx={{ mb: 3 }}>\n        <CardContent>\n          <Typography variant=\"h6\" gutterBottom>\n            Local Storage Tokens:\n          </Typography>\n          <Typography>\n            accessToken:{\" \"}\n            {localStorage.getItem(\"accessToken\") ? \" Present\" : \" Missing\"}\n          </Typography>\n          <Typography>\n            authToken:{\" \"}\n            {localStorage.getItem(\"authToken\") ? \" Present\" : \" Missing\"}\n          </Typography>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardContent>\n          <Typography variant=\"h6\" gutterBottom>\n            Debug Log ({debugInfo?.length || 0} entries):\n          </Typography>\n          <Box\n            sx={{ maxHeight: 300, overflow: \"auto\", bgcolor: \"grey.50\", p: 1 }}\n          >\n            {(debugInfo || []).map((info, index) => (\n              <Typography\n                key={index}\n                variant=\"body2\"\n                sx={{\n                  fontFamily: \"monospace\",\n                  marginBottom: \"2px\",\n                  fontSize: \"0.75rem\",\n                }}\n              >\n                {info}\n              </Typography>\n            ))}\n          </Box>\n          <Button\n            onClick={() => setDebugInfo([])}\n            variant=\"outlined\"\n            size=\"small\"\n            sx={{ mt: 1 }}\n          >\n            Clear Log\n          </Button>\n        </CardContent>\n      </Card>\n    </Container>\n  );\n};\n\nexport default AuthTest;\n","import React, { useState, useEffect } from \"react\";\nimport { Routes, Route, useNavigate, useLocation } from \"react-router-dom\";\nimport {\n  AppBar,\n  Box,\n  Toolbar,\n  Typography,\n  Container,\n  Drawer,\n  List,\n  ListItem,\n  ListItemButton,\n  ListItemIcon,\n  ListItemText,\n  IconButton,\n  useTheme,\n  useMediaQuery,\n  Button,\n  Menu,\n  MenuItem,\n  Avatar,\n  Divider,\n} from \"@mui/material\";\nimport {\n  Menu as MenuIcon,\n  Dashboard as _DashboardIcon,\n  Settings as SettingsIcon,\n  ExpandLess,\n  ExpandMore,\n  Stars,\n  TrendingUp as TrendingUpIcon,\n  Business as BusinessIcon,\n  Public as PublicIcon,\n  ShowChart as ShowChartIcon,\n  Event as EventIcon,\n  Timeline as TimelineIcon,\n  Psychology as PsychologyIcon,\n  AccountBalance as AccountBalanceIcon,\n  Analytics as AnalyticsIcon,\n  HealthAndSafety as HealthAndSafetyIcon,\n  Storage as StorageIcon,\n  AccountCircle as AccountCircleIcon,\n  Login as LoginIcon,\n  Logout as LogoutIcon,\n  Mail as MailIcon,\n} from \"@mui/icons-material\";\n\n// Admin-only page imports (Portfolio and Tools)\nimport MetricsDashboard from \"./pages/MetricsDashboard\";\nimport ServiceHealth from \"./pages/ServiceHealth\";\nimport PortfolioDashboard from \"./pages/PortfolioDashboard\";\nimport PortfolioOptimizerNew from \"./pages/PortfolioOptimizerNew\";\nimport TradeHistory from \"./pages/TradeHistory\";\nimport Settings from \"./pages/Settings\";\nimport Messages from \"./pages/Messages\";\nimport { useAuth } from \"./contexts/AuthContext\";\nimport AuthModal from \"./components/auth/AuthModal\";\nimport ProtectedRoute from \"./components/auth/ProtectedRoute\";\nimport ErrorBoundary from \"./components/ErrorBoundary\";\nimport RootRedirect from \"./components/RootRedirect\";\nimport AuthTest from \"./pages/AuthTest\";\n\nconst drawerWidth = 240;\n\nconst menuItems = [\n  // Portfolio Section (Admin only - no markets data)\n  {\n    text: \"Portfolio Holdings\",\n    icon: <AccountBalanceIcon />,\n    path: \"/portfolio\",\n    category: \"portfolio\",\n  },\n  {\n    text: \"Trade History\",\n    icon: <TimelineIcon />,\n    path: \"/trade-history\",\n    category: \"portfolio\",\n  },\n  {\n    text: \"Optimization Tools\",\n    icon: <AnalyticsIcon />,\n    path: \"/optimizer\",\n    category: \"portfolio\",\n  },\n  // Tools Section\n  {\n    text: \"Messages\",\n    icon: <MailIcon />,\n    path: \"/messages\",\n    category: \"tools\",\n  },\n  {\n    text: \"Settings\",\n    icon: <SettingsIcon />,\n    path: \"/settings\",\n    category: \"tools\",\n  },\n  {\n    text: \"Health\",\n    icon: <HealthAndSafetyIcon />,\n    path: \"/service-health\",\n    category: \"tools\",\n  },\n];\n\nfunction App() {\n  console.log(\" APP COMPONENT: Starting App component render...\");\n\n  // All hooks must be at the top level - not inside try-catch\n  const [mobileOpen, setMobileOpen] = useState(false);\n  const [authModalOpen, setAuthModalOpen] = useState(false);\n  const [userMenuAnchor, setUserMenuAnchor] = useState(null);\n  const [expandedSections, setExpandedSections] = useState({\n    markets: true,\n    stocks: true,\n    sentiment: false,\n    portfolio: true,\n    research: false,\n    tools: true,\n  });\n\n  console.log(\" APP COMPONENT: State initialized\");\n\n  const theme = useTheme();\n  console.log(\" APP COMPONENT: Theme loaded:\", theme ? \"\" : \"\");\n\n  const isMobile = useMediaQuery(theme.breakpoints.down(\"md\"));\n  console.log(\" APP COMPONENT: isMobile:\", isMobile);\n\n  console.log(\" APP COMPONENT: About to call useAuth...\");\n\n  // Safe auth context access - useAuth now has built-in fallback safety\n  const { isAuthenticated, user, logout } = useAuth();\n  console.log(\n    \" APP COMPONENT: Auth state loaded - isAuthenticated:\",\n    isAuthenticated,\n    \"user:\",\n    user\n  );\n\n  const navigate = useNavigate();\n  console.log(\" APP COMPONENT: Navigate loaded\");\n\n  const location = useLocation();\n  console.log(\" APP COMPONENT: Location loaded:\", location?.pathname);\n\n  // Auto-close auth modal when user successfully authenticates\n  useEffect(() => {\n    if (isAuthenticated && authModalOpen) {\n      setAuthModalOpen(false);\n    }\n  }, [isAuthenticated, authModalOpen]);\n\n  // Premium status functionality removed - all features available\n\n  const handleDrawerToggle = () => {\n    setMobileOpen(!mobileOpen);\n  };\n\n  const handleUserMenuOpen = (event) => {\n    setUserMenuAnchor(event.currentTarget);\n  };\n\n  const handleUserMenuClose = () => {\n    setUserMenuAnchor(null);\n  };\n\n  const handleLogout = async () => {\n    handleUserMenuClose();\n    await logout();\n  };\n\n  const handleNavigation = (path) => {\n    navigate(path);\n    if (isMobile) {\n      setMobileOpen(false);\n    }\n  };\n\n  const handleSectionToggle = (section) => {\n    setExpandedSections((prev) => ({\n      ...prev,\n      [section]: !prev[section],\n    }));\n  };\n\n  const groupedMenuItems = menuItems\n    .reduce((acc, item) => {\n      if (!acc[item.category]) {\n        acc[item.category] = [];\n      }\n      acc[item.category].push(item);\n      return acc;\n    }, {});\n\n  const sectionTitles = {\n    main: \"Dashboard\",\n    markets: \"Markets\",\n    stocks: \"Stocks\",\n    sentiment: \"Sentiment Analysis\",\n    portfolio: \"Portfolio\",\n    research: \"Research & Education\",\n    tools: \"Tools\",\n  };\n\n  const drawer = (\n    <div>\n      <Toolbar>\n        <Typography\n          variant=\"h6\"\n          noWrap\n          component=\"div\"\n          sx={{ fontWeight: 700, color: \"primary.main\" }}\n        >\n          Financial Platform\n        </Typography>\n      </Toolbar>\n      <List sx={{ px: 1 }}>\n        {Object.entries(groupedMenuItems).map(([category, items]) => (\n          <React.Fragment key={category}>\n            {category === \"main\" ? (\n              // Dashboard gets special treatment - no section header\n              (items || []).map((item) => (\n                <ListItem key={item.text} disablePadding sx={{ mb: 1 }}>\n                  <ListItemButton\n                    selected={location.pathname === item.path}\n                    onClick={() => handleNavigation(item.path, item.premium)}\n                    sx={{\n                      borderRadius: 1,\n                      \"&.Mui-selected\": {\n                        backgroundColor: theme.palette.primary.main + \"20\",\n                        \"& .MuiListItemIcon-root\": {\n                          color: theme.palette.primary.main,\n                        },\n                        \"& .MuiListItemText-primary\": {\n                          color: theme.palette.primary.main,\n                          fontWeight: 600,\n                        },\n                      },\n                    }}\n                  >\n                    <ListItemIcon>{item.icon}</ListItemIcon>\n                    <ListItemText\n                      primary={item.text}\n                      primaryTypographyProps={{\n                        sx: { fontSize: '0.85rem' }\n                      }}\n                    />\n                  </ListItemButton>\n                </ListItem>\n              ))\n            ) : (\n              <>\n                {/* Section Header */}\n                <ListItem disablePadding>\n                  <ListItemButton\n                    onClick={() => handleSectionToggle(category)}\n                    aria-label={`${expandedSections[category] ? \"Collapse\" : \"Expand\"} ${sectionTitles[category]} section`}\n                    sx={{\n                      py: 0.5,\n                      \"&:hover\": { backgroundColor: \"transparent\" },\n                    }}\n                  >\n                    <ListItemText\n                      primary={sectionTitles[category]}\n                      primaryTypographyProps={{\n                        variant: \"subtitle2\",\n                        fontWeight: 600,\n                        color: \"text.secondary\",\n                        textTransform: \"uppercase\",\n                        letterSpacing: 0.5,\n                        fontSize: '0.75rem',\n                      }}\n                    />\n                    {expandedSections[category] ? (\n                      <ExpandLess />\n                    ) : (\n                      <ExpandMore />\n                    )}\n                  </ListItemButton>\n                </ListItem>\n\n                {/* Section Items */}\n                {expandedSections[category] &&\n                  (items || []).map((item) => (\n                    <ListItem key={item.text} disablePadding sx={{ pl: 2 }}>\n                      <ListItemButton\n                        selected={location.pathname === item.path}\n                        onClick={() =>\n                          handleNavigation(item.path, item.premium)\n                        }\n                        disabled={false}\n                        sx={{\n                          borderRadius: 1,\n                          py: 0.5,\n                          \"&.Mui-selected\": {\n                            backgroundColor: theme.palette.primary.main + \"20\",\n                            \"& .MuiListItemIcon-root\": {\n                              color: theme.palette.primary.main,\n                            },\n                            \"& .MuiListItemText-primary\": {\n                              color: theme.palette.primary.main,\n                              fontWeight: 600,\n                            },\n                          },\n                          \"&.Mui-disabled\": {\n                            opacity: 0.6,\n                          },\n                        }}\n                      >\n                        <ListItemIcon sx={{ minWidth: 36 }}>\n                          {item.icon}\n                        </ListItemIcon>\n                        <ListItemText\n                          primary={item.text}\n                          primaryTypographyProps={{\n                            sx: { fontSize: '0.85rem' }\n                          }}\n                        />\n                      </ListItemButton>\n                    </ListItem>\n                  ))}\n              </>\n            )}\n          </React.Fragment>\n        ))}\n      </List>\n    </div>\n  );\n\n  console.log(\" APP COMPONENT: About to render JSX...\");\n\n  return (\n    <ErrorBoundary>\n      <Box sx={{ display: \"flex\", width: \"100%\", overflowX: \"hidden\" }}>\n      <AppBar\n        position=\"fixed\"\n        sx={{\n          width: { md: `calc(100% - ${drawerWidth}px)` },\n          ml: { md: `${drawerWidth}px` },\n          backgroundColor: \"white\",\n          color: \"text.primary\",\n          boxShadow: \"0 2px 4px rgba(0,0,0,0.1)\",\n        }}\n      >\n        <Toolbar>\n          <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            edge=\"start\"\n            onClick={handleDrawerToggle}\n            sx={{ mr: 2, display: { md: \"none\" } }}\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography\n            variant=\"h6\"\n            noWrap\n            component=\"div\"\n            sx={{\n              flexGrow: 1,\n              mr: 2,\n              pointerEvents: 'none'\n            }}\n          >\n            {menuItems.find((item) => item.path === location.pathname)?.text ||\n              \"Dashboard\"}\n          </Typography>\n\n          {/* Authentication UI */}\n          {isAuthenticated ? (\n            <>\n              <IconButton\n                onClick={handleUserMenuOpen}\n                size=\"large\"\n                edge=\"end\"\n                color=\"inherit\"\n              >\n                <Avatar sx={{ width: 32, height: 32, bgcolor: \"primary.main\" }}>\n                  {user?.username?.[0]?.toUpperCase() || \"U\"}\n                </Avatar>\n              </IconButton>\n              <Menu\n                anchorEl={userMenuAnchor}\n                open={Boolean(userMenuAnchor)}\n                onClose={handleUserMenuClose}\n                anchorOrigin={{\n                  vertical: \"bottom\",\n                  horizontal: \"right\",\n                }}\n                transformOrigin={{\n                  vertical: \"top\",\n                  horizontal: \"right\",\n                }}\n              >\n                <MenuItem onClick={handleUserMenuClose}>\n                  <AccountCircleIcon sx={{ mr: 1 }} />\n                  {user?.username || \"User\"}\n                </MenuItem>\n                <Divider />\n                <MenuItem\n                  onClick={() => {\n                    handleUserMenuClose();\n                    navigate(\"/settings\");\n                  }}\n                >\n                  <SettingsIcon sx={{ mr: 1 }} />\n                  Settings\n                </MenuItem>\n                <MenuItem onClick={handleLogout}>\n                  <LogoutIcon sx={{ mr: 1 }} />\n                  Sign Out\n                </MenuItem>\n              </Menu>\n            </>\n          ) : (\n            <Button\n              color=\"inherit\"\n              startIcon={<LoginIcon />}\n              onClick={() => setAuthModalOpen(true)}\n              sx={{\n                ml: 2,\n                zIndex: 1000,\n                position: 'relative',\n                flexShrink: 0\n              }}\n              data-testid=\"auth-sign-in-button\"\n            >\n              Sign In\n            </Button>\n          )}\n        </Toolbar>\n      </AppBar>\n\n      <Box\n        component=\"nav\"\n        sx={{ width: { md: drawerWidth }, flexShrink: { md: 0 } }}\n      >\n        <Drawer\n          variant=\"temporary\"\n          open={mobileOpen}\n          onClose={handleDrawerToggle}\n          ModalProps={{\n            keepMounted: true, // Better open performance on mobile.\n          }}\n          sx={{\n            display: { xs: \"block\", md: \"none\" },\n            \"& .MuiDrawer-paper\": {\n              boxSizing: \"border-box\",\n              width: drawerWidth,\n            },\n          }}\n        >\n          {drawer}\n        </Drawer>\n        <Drawer\n          variant=\"permanent\"\n          sx={{\n            display: { xs: \"none\", md: \"block\" },\n            \"& .MuiDrawer-paper\": {\n              boxSizing: \"border-box\",\n              width: drawerWidth,\n            },\n          }}\n          open\n        >\n          {drawer}\n        </Drawer>\n      </Box>\n\n      <Box\n        component=\"main\"\n        sx={{\n          flexGrow: 1,\n          p: { xs: 1, sm: 2, md: 3 },\n          width: { xs: \"100%\", md: `calc(100% - ${drawerWidth}px)` },\n          backgroundColor: theme.palette.background.default,\n          minHeight: \"100vh\",\n          overflowX: \"hidden\",\n        }}\n      >\n        <Toolbar />\n        <Container maxWidth=\"xl\" sx={{ px: { xs: 1, sm: 2, md: 3 } }}>\n          <Routes>\n            {/* Admin-only routes (protected) */}\n            <Route path=\"/\" element={<RootRedirect />} />\n            <Route path=\"/portfolio\" element={<ProtectedRoute><PortfolioDashboard /></ProtectedRoute>} />\n            <Route path=\"/trade-history\" element={<ProtectedRoute><TradeHistory /></ProtectedRoute>} />\n            <Route path=\"/optimizer\" element={<ProtectedRoute><PortfolioOptimizerNew /></ProtectedRoute>} />\n            <Route path=\"/metrics\" element={<MetricsDashboard />} />\n            <Route path=\"/messages\" element={<ProtectedRoute><Messages /></ProtectedRoute>} />\n            <Route path=\"/service-health\" element={<ServiceHealth />} />\n            <Route path=\"/settings\" element={<ProtectedRoute><Settings /></ProtectedRoute>} />\n            <Route path=\"/auth-test\" element={<AuthTest />} />\n          </Routes>\n        </Container>\n      </Box>\n\n      {/* Authentication Modal */}\n      <AuthModal open={authModalOpen} onClose={() => setAuthModalOpen(false)} />\n      </Box>\n    </ErrorBoundary>\n  );\n}\n\nexport default App;\n","import ReactDOM from \"react-dom/client\";\n// Fresh deployment to clear CloudFront cache and ensure correct config (2025-08-21)\nimport { BrowserRouter } from \"react-router-dom\";\nimport { ThemeProvider, createTheme } from \"@mui/material/styles\";\nimport CssBaseline from \"@mui/material/CssBaseline\";\nimport { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\nimport App from \"./App\";\nimport { AuthProvider } from \"./contexts/AuthContext\";\nimport { configureAmplify } from \"./config/amplify\";\nimport { createComponentLogger } from \"./utils/errorLogger\";\nimport ErrorBoundary from \"./components/ErrorBoundary\";\n\n// Initialize comprehensive error logging service\nconst logger = createComponentLogger(\"Main\");\n\n// RESTORED: Professional error logging service integration\nconst _originalConsoleError = console.error;\nconst _originalConsoleWarn = console.warn;\n\n// RESTORED: Professional error service integration for window errors\nwindow.addEventListener(\n  \"error\",\n  function (e) {\n    const errorContext = {\n      filename: e.filename,\n      lineno: e.lineno,\n      colno: e.colno,\n      userAgent: navigator.userAgent,\n      url: window.location.href,\n      timestamp: new Date().toISOString(),\n    };\n\n    logger.error(\"WindowError\", e.error || new Error(e.message), errorContext);\n\n    // Let all errors through for debugging\n    return false;\n  },\n  true\n);\n\n// RESTORED: Professional promise rejection handling\nwindow.addEventListener(\"unhandledrejection\", function (e) {\n  const errorContext = {\n    url: window.location.href,\n    timestamp: new Date().toISOString(),\n    promiseState: \"rejected\",\n  };\n\n  logger.error(\"UnhandledPromiseRejection\", e.reason, errorContext);\n\n  // Let all errors through for debugging\n  return false;\n});\n\n// Application initialization\n\n// Aggressively clear all Service Workers and caches to fix old API URL caching\nif (\"serviceWorker\" in navigator) {\n  // Unregister all service workers\n  navigator.serviceWorker\n    .getRegistrations()\n    .then(function (registrations) {\n      // Found Service Worker registrations\n      for (let registration of registrations) {\n        registration.unregister().then(function (_boolean) {\n          // Service Worker unregistered\n        });\n      }\n    })\n    .catch(function (error) {\n      console.error(\"Service Worker unregistration failed:\", error);\n    });\n}\n\n// Clear all caches to ensure fresh configuration loading\nif (\"caches\" in window) {\n  caches\n    .keys()\n    .then(function (cacheNames) {\n      // Found cache stores\n      return Promise.all(\n        (cacheNames || []).map(function (cacheName) {\n          // Deleting cache\n          return caches.delete(cacheName);\n        })\n      );\n    })\n    .then(function () {\n      // All caches cleared\n    })\n    .catch(function (error) {\n      console.error(\"Cache clearing failed:\", error);\n    });\n}\n\n// Check if config is already loaded by index.html, don't force reload\nif (window.__CONFIG__) {\n  // Config already loaded by index.html\n} else {\n  // Waiting for config.js to load from index.html\n  // Wait a bit for config to load naturally from index.html\n  setTimeout(() => {\n    if (window.__CONFIG__) {\n      // Config loaded after waiting\n    } else {\n      if (import.meta.env && import.meta.env.DEV) {\n        console.warn(\" Config not loaded yet, check index.html script tag\");\n      }\n    }\n  }, 1000);\n}\n\n// Configure Amplify\nconfigureAmplify();\n\n// Create theme\nconst theme = createTheme({\n  palette: {\n    mode: \"light\",\n    primary: {\n      main: \"#1976d2\",\n      light: \"#42a5f5\",\n      dark: \"#1565c0\",\n    },\n    secondary: {\n      main: \"#dc004e\",\n      light: \"#ff5983\",\n      dark: \"#9a0036\",\n    },\n    background: {\n      default: \"#f5f5f5\",\n      paper: \"#ffffff\",\n    },\n    success: {\n      main: \"#2e7d32\",\n      light: \"#4caf50\",\n      dark: \"#1b5e20\",\n    },\n    error: {\n      main: \"#d32f2f\",\n      light: \"#ef5350\",\n      dark: \"#c62828\",\n    },\n    warning: {\n      main: \"#b7700d\",\n      light: \"#d4951a\",\n      dark: \"#8a5409\",\n    },\n    info: {\n      main: \"#0277bd\",\n      light: \"#29b6f6\",\n      dark: \"#01579b\",\n    },\n  },\n  typography: {\n    fontFamily:\n      'Inter, -apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", \"Oxygen\", \"Ubuntu\", \"Cantarell\", \"Fira Sans\", \"Droid Sans\", \"Helvetica Neue\", sans-serif',\n    h1: {\n      fontWeight: 600,\n    },\n    h2: {\n      fontWeight: 600,\n    },\n    h3: {\n      fontWeight: 600,\n    },\n    h4: {\n      fontWeight: 600,\n    },\n    h5: {\n      fontWeight: 600,\n    },\n    h6: {\n      fontWeight: 600,\n    },\n  },\n  components: {\n    MuiButton: {\n      styleOverrides: {\n        root: {\n          textTransform: \"none\",\n          fontWeight: 500,\n          minWidth: \"44px\",\n          minHeight: \"44px\",\n          \"&:focus\": {\n            outline: \"3px solid #1976d2\",\n            outlineOffset: \"2px\",\n            boxShadow: \"0 0 0 3px rgba(25, 118, 210, 0.3)\",\n          },\n          \"&:focus-visible\": {\n            outline: \"3px solid #1976d2\",\n            outlineOffset: \"2px\",\n            boxShadow: \"0 0 0 3px rgba(25, 118, 210, 0.3)\",\n          },\n        },\n      },\n    },\n    MuiIconButton: {\n      styleOverrides: {\n        root: {\n          minWidth: \"44px\",\n          minHeight: \"44px\",\n          \"&:focus\": {\n            outline: \"3px solid #1976d2\",\n            outlineOffset: \"2px\",\n            boxShadow: \"0 0 0 3px rgba(25, 118, 210, 0.3)\",\n          },\n          \"&:focus-visible\": {\n            outline: \"3px solid #1976d2\",\n            outlineOffset: \"2px\",\n            boxShadow: \"0 0 0 3px rgba(25, 118, 210, 0.3)\",\n          },\n        },\n      },\n    },\n    MuiTextField: {\n      styleOverrides: {\n        root: {\n          \"& .MuiOutlinedInput-root\": {\n            \"&.Mui-focused\": {\n              \"& .MuiOutlinedInput-notchedOutline\": {\n                borderColor: \"#1976d2\",\n                borderWidth: \"2px\",\n              },\n            },\n            \"&:focus-within\": {\n              outline: \"3px solid rgba(25, 118, 210, 0.3)\",\n              outlineOffset: \"2px\",\n            },\n          },\n        },\n      },\n    },\n    MuiCard: {\n      styleOverrides: {\n        root: {\n          boxShadow: \"0 2px 8px rgba(0,0,0,0.1)\",\n          borderRadius: 12,\n        },\n      },\n    },\n    MuiPaper: {\n      styleOverrides: {\n        root: {\n          borderRadius: 12,\n        },\n      },\n    },\n    MuiChip: {\n      styleOverrides: {\n        root: {\n          minHeight: \"32px\",\n          \"& .MuiChip-label\": {\n            paddingLeft: \"12px\",\n            paddingRight: \"12px\",\n          },\n        },\n      },\n    },\n  },\n});\n\n// Create React Query client\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      staleTime: 5 * 60 * 1000, // 5 minutes\n      cacheTime: 10 * 60 * 1000, // 10 minutes\n      refetchOnWindowFocus: false,\n      retry: (failureCount, error) => {\n        if (error.status === 404) return false;\n        return failureCount < 3;\n      },\n    },\n  },\n});\n\n// Theme and QueryClient created, looking for root element\n\nconst rootElement = document.getElementById(\"root\");\nif (!rootElement) {\n  console.error(\" Root element not found!\");\n  alert(\"Root element not found!\");\n} else {\n  // Root element found\n}\n\n// Creating React root and rendering app\n\ntry {\n  logger.info(\"React application initialization starting\");\n\n  const rootElement = document.getElementById(\"root\");\n  if (!rootElement) {\n    throw new Error(\"Root element not found in DOM\");\n  }\n\n  const root = ReactDOM.createRoot(rootElement);\n  logger.info(\"React root created successfully\");\n\n  root.render(\n    <ErrorBoundary>\n      <BrowserRouter\n        future={{\n          v7_startTransition: true,\n          v7_relativeSplatPath: true,\n        }}\n      >\n        <QueryClientProvider client={queryClient}>\n          <ThemeProvider theme={theme}>\n            <CssBaseline />\n            <AuthProvider>\n              <App />\n            </AuthProvider>\n          </ThemeProvider>\n        </QueryClientProvider>\n      </BrowserRouter>\n    </ErrorBoundary>\n  );\n\n  logger.success(\"React application render initiated\");\n\n  // Post-render validation\n  setTimeout(() => {\n    const rootContent = document.getElementById(\"root\");\n    if (rootContent && rootContent.innerHTML.trim() === \"\") {\n      logger.error(\n        \"EmptyRender\",\n        new Error(\"React rendered but root is empty\"),\n        {\n          innerHTML: rootContent.innerHTML,\n          config: window.__CONFIG__,\n          timestamp: new Date().toISOString(),\n        }\n      );\n    } else if (rootContent) {\n      logger.success(\"React application rendered successfully\", {\n        contentLength: rootContent.innerHTML.length,\n        hasContent: rootContent.innerHTML.length > 0,\n      });\n    }\n  }, 2000);\n} catch (error) {\n  logger.error(\"ReactInitialization\", error, {\n    phase: \"main_render\",\n    config: window.__CONFIG__,\n    userAgent: navigator.userAgent,\n  });\n\n  // Show user-friendly error\n  alert(\n    \"Application failed to start. Please refresh the page or contact support.\"\n  );\n}\n"],"names":["m","require$$0","client","_extends","target","i","source","key","Action","PopStateEventType","createBrowserHistory","options","createBrowserLocation","window","globalHistory","pathname","search","hash","createLocation","createBrowserHref","to","createPath","getUrlBasedHistory","invariant","value","message","warning","cond","createKey","getHistoryState","location","index","current","state","parsePath","_ref","path","parsedPath","hashIndex","searchIndex","getLocation","createHref","validateLocation","v5Compat","action","listener","getIndex","handlePop","nextIndex","delta","history","push","historyState","url","error","replace","createURL","base","href","fn","n","ResultType","matchRoutes","routes","locationArg","basename","matchRoutesImpl","allowPartial","stripBasename","branches","flattenRoutes","rankRouteBranches","matches","decoded","decodePath","matchRouteBranch","parentsMeta","parentPath","flattenRoute","route","relativePath","meta","joinPaths","routesMeta","computeScore","_route$path","exploded","explodeOptionalSegments","segments","first","rest","isOptional","required","restExploded","result","subpath","a","b","compareIndexes","paramRe","dynamicSegmentValue","indexRouteValue","emptySegmentValue","staticSegmentValue","splatPenalty","isSplat","s","initialScore","score","segment","branch","matchedParams","matchedPathname","end","remainingPathname","match","matchPath","normalizePathname","pattern","matcher","compiledParams","compilePath","pathnameBase","captureGroups","memo","paramName","splatValue","caseSensitive","params","regexpSource","_","v","startIndex","nextChar","resolvePath","fromPathname","toPathname","resolvePathname","normalizeSearch","normalizeHash","getInvalidPathError","char","field","dest","getPathContributingMatches","getResolveToMatches","v7_relativeSplatPath","pathMatches","idx","resolveTo","toArg","routePathnames","locationPathname","isPathRelative","isEmptyPath","from","routePathnameIndex","toSegments","hasExplicitTrailingSlash","hasCurrentTrailingSlash","paths","isRouteErrorResponse","validMutationMethodsArr","validRequestMethodsArr","DataRouterContext","React.createContext","DataRouterStateContext","NavigationContext","LocationContext","RouteContext","RouteErrorContext","useInRouterContext","React.useContext","useLocation","UNSAFE_invariant","useIsomorphicLayoutEffect","cb","React.useLayoutEffect","useNavigate","isDataRoute","useNavigateStable","useNavigateUnstable","dataRouterContext","future","navigator","routePathnamesJson","UNSAFE_getResolveToMatches","activeRef","React.useRef","React.useCallback","useRoutes","useRoutesImpl","dataRouterState","parentMatches","routeMatch","parentParams","parentPathnameBase","locationFromContext","_parsedLocationArg$pa","parsedLocationArg","parentSegments","renderedMatches","_renderMatches","React.createElement","DefaultErrorComponent","useRouteError","stack","preStyles","React.Fragment","defaultErrorElement","RenderErrorBoundary","React.Component","props","errorInfo","RenderedRoute","routeContext","children","_dataRouterState","_future","errors","errorIndex","renderFallback","fallbackIndex","loaderData","needsToRunLoader","outlet","shouldRenderHydrateFallback","errorElement","hydrateFallbackElement","warningOnce","getChildren","DataRouterHook","DataRouterStateHook","useDataRouterContext","hookName","ctx","useDataRouterState","useRouteContext","useCurrentRouteId","thisRoute","_state$errors","routeId","router","id","alreadyWarned$1","logV6DeprecationWarnings","renderFuture","routerFuture","Route","_props","Router","_ref5","basenameProp","locationProp","navigationType","staticProp","navigationContext","React.useMemo","locationContext","trailingPathname","Routes","_ref6","createRoutesFromChildren","React.Children","element","React.isValidElement","treePath","REACT_ROUTER_VERSION","START_TRANSITION","startTransitionImpl","React","BrowserRouter","_ref4","historyRef","setStateImpl","React.useState","v7_startTransition","setState","newState","React.useEffect","UNSAFE_logV6DeprecationWarnings","Subscribable","defaultTimeoutProvider","callback","delay","timeoutId","intervalId","TimeoutManager","#provider","#providerCalled","provider","timeoutManager","systemSetTimeoutZero","isServer","noop","functionalUpdate","updater","input","isValidTimeout","timeUntilStale","updatedAt","staleTime","resolveStaleTime","query","resolveEnabled","enabled","matchQuery","filters","type","exact","fetchStatus","predicate","queryKey","stale","hashQueryKeyByOptions","partialMatchKey","isActive","matchMutation","mutation","status","mutationKey","hashKey","val","isPlainObject","hasOwn","replaceEqualDeep","array","isPlainArray","aSize","bItems","bSize","copy","equalItems","aItem","bItem","shallowEqualObjects","o","hasObjectPrototype","ctor","prot","sleep","timeout","resolve","replaceData","prevData","data","addToEnd","items","item","max","newItems","addToStart","skipToken","ensureQueryFn","fetchOptions","shouldThrowError","throwOnError","FocusManager","#focused","#cleanup","#setup","onFocus","setup","focused","isFocused","focusManager","pendingThenable","reject","thenable","_resolve","_reject","finalize","reason","defaultScheduler","createNotifyManager","queue","transactions","notifyFn","batchNotifyFn","scheduleFn","schedule","flush","originalQueue","args","notifyManager","OnlineManager","#online","onOnline","onlineListener","offlineListener","online","onlineManager","defaultRetryDelay","failureCount","canFetch","networkMode","CancelledError","createRetryer","config","isRetryCancelled","continueFn","isResolved","cancel","cancelOptions","cancelRetry","continueRetry","canContinue","canStart","pause","continueResolve","run","promiseOrValue","initialPromise","retry","retryDelay","shouldRetry","Removable","#gcTimeout","newGcTime","Query","#initialState","#revertState","#cache","#client","#retryer","#defaultOptions","#abortSignalConsumed","getDefaultState","defaultState","newData","#dispatch","setStateOptions","promise","observer","x","abortController","addSignalProperty","object","fetchFn","queryFn","queryFnContext","queryFnContext2","context","context2","reducer","fetchState","hasData","initialDataUpdatedAt","QueryObserver","#selectError","#currentThenable","#currentQuery","#currentQueryInitialState","#currentResult","#currentResultState","#currentResultOptions","#selectFn","#selectResult","#lastQueryWithDefinedData","#staleTimeoutId","#refetchIntervalId","#currentRefetchInterval","#trackedProps","shouldFetchOnMount","#executeFetch","#updateTimers","shouldFetchOn","#clearStaleTimeout","#clearRefetchInterval","prevOptions","prevQuery","#updateQuery","mounted","shouldFetchOptionally","#updateStaleTimeout","nextRefetchInterval","#computeRefetchInterval","#updateRefetchInterval","shouldAssignObserverCurrentProperties","onPropTracked","defaultedOptions","nextInterval","prevResult","prevResultState","prevResultOptions","queryInitialState","isPlaceholderData","fetchOnMount","fetchOptionally","errorUpdatedAt","skipSelect","placeholderData","selectError","isFetching","isPending","isError","isLoading","nextResult","isStale","finalizeThenableIfPossible","recreateThenable","pending","prevThenable","shouldNotifyListeners","notifyOnChangeProps","notifyOnChangePropsValue","includedProps","typedKey","#notify","notifyOptions","shouldLoadOnMount","optimisticResult","infiniteQueryBehavior","pages","direction","oldPages","oldPageParams","currentPage","cancelled","fetchPage","param","previous","page","maxPages","addTo","pageParamFn","getPreviousPageParam","getNextPageParam","oldData","remainingPages","pageParams","lastIndex","Mutation","#observers","#mutationCache","variables","onContinue","mutationFnContext","restored","isPaused","MutationCache","#mutations","#scopes","#mutationId","scope","scopeFor","scopedMutations","firstPendingMutation","defaultedFilters","event","pausedMutations","QueryCache","#queries","queryHash","queryInMap","queries","QueryClient","#queryCache","#queryDefaults","#mutationDefaults","#mountCount","#unsubscribeFocus","#unsubscribeOnline","cachedData","queryCache","defaultedCancelOptions","promises","defaults","queryDefault","QueryClientContext","useQueryClient","queryClient","QueryClientProvider","jsx","IsRestoringContext","useIsRestoring","createValue","isReset","QueryErrorResetBoundaryContext","useQueryErrorResetBoundary","ensurePreventErrorBoundaryRetry","errorResetBoundary","useClearResetErrorBoundary","getHasError","suspense","ensureSuspenseTimers","clamp","originalStaleTime","willFetch","isRestoring","shouldSuspend","fetchOptimistic","useBaseQuery","Observer","isNewCacheEntry","shouldSubscribe","React.useSyncExternalStore","onStoreChange","unsubscribe","useQuery","getApiConfig","runtimeApiUrl","apiUrl","__vite_import_meta_env__","hostname","protocol","environment","isDevelopment","isProduction","currentConfig","api","axios","response","duration","userMessage","logData","getPortfolioData","backendData","extractResponseData","getCurrentBaseURL","hasValidApiServer","authToken","fullUrl","handleApiError","getNaaimData","queryParams","getFearGreedData","testApiConnection","customUrl","testUrl","getDiagnosticInfo","healthCheck","triedRoot","healthUrl","rootUrl","rootError","MetricsDashboard","activeTab","setActiveTab","useState","loading","setLoading","setError","stocks","setStocks","sectors","setSectors","topStocks","setTopStocks","bottomStocks","setBottomStocks","searchTerm","setSearchTerm","selectedSector","setSelectedSector","minMetric","setMinMetric","maxMetric","setMaxMetric","sortBy","setSortBy","sortOrder","_setSortOrder","_setPage","totalPages","setTotalPages","useEffect","fetchData","fetchTopStocks","fetchBottomStocks","stocksArray","err","topStocksData","stock","bottomStocksData","getMetricColor","metric","safeMetricDisplay","getMetricChip","label","Chip","MainMetricsTable","TableContainer","Paper","jsxs","Table","TableHead","TableRow","TableCell","TableBody","_index","Typography","Box","Tooltip","IconButton","Info","TopStocks","Grid","category","Card","CardContent","BottomStocks","Container","Alert","Tabs","e","newValue","Tab","TextField","FormControl","InputLabel","Select","MenuItem","CircularProgress","Fragment","isObject","ServiceHealth","environmentInfo","setEnvironmentInfo","testResults","setTestResults","testingInProgress","setTestingInProgress","componentError","setComponentError","refreshing","setRefreshing","diagnosticInfo","useMemo","handleError","ecsTasks","ecsLoading","ecsError","refetchEcs","awsApiUrl","controller","dbHealth","dbLoading","dbError","refetchDb","rawResponse","healthData","endpoints","testAllEndpoints","useCallback","results","endpoint","startTime","endTime","healthLoading","healthError","refetchHealth","env","define_process_env_default","safeHealthData","safeDbHealth","safeTestResults","safeDiagnosticInfo","getStatusIcon","CheckCircle","ErrorIcon","Warning","Refresh","Button","refreshHealthStatus","getStatusColor","formatNumber","num","formatDate","dateString","formatTimeAgo","now","date","diffMs","diffHours","diffDays","diffMinutes","Api","Storage","Cloud","Accordion","AccordionSummary","ExpandMore","AccordionDetails","Speed","name","taskName","taskData","tableName","tableData","signIn","signOut","signUp","confirmSignUp","getCurrentUser","fetchAuthSession","resetPassword","confirmResetPassword","resendSignUpCode","Amplify","getRuntimeConfig","isCognitoConfigured","runtimeConfig","userPoolId","clientId","getAmplifyConfig","configureAmplify","DEV_USERS_KEY","DEV_SESSION_KEY","DEV_PENDING_KEY","DevAuthService","stored","session","defaultUser","_username","username","password","email","firstName","lastName","user","verificationCode","confirmationCode","usernameOrEmail","actualUsername","userEntry","userData","tokens","resetCode","newPassword","resetKey","code","token","_token","_code","attributes","devAuthService","SessionManager","authContext","callbacks","rememberMe","storage","timeoutDuration","warningTime","events","activityHandler","sessionDuration","sessionAge","maxAge","sessionManager","SessionWarningDialog","open","timeRemaining","onExtend","onLogout","onClose","countdown","setCountdown","extending","setExtending","isMountedRef","useRef","timer","prev","newTime","handleExtend","formatTime","milliseconds","totalSeconds","minutes","seconds","progressValue","Dialog","DialogTitle","DialogContent","AccessTime","LinearProgress","DialogActions","initialState","AUTH_ACTIONS","authReducer","AuthContext","createContext","defaultContextValue","AuthProvider","dispatch","useReducer","sessionWarning","setSessionWarning","refreshSession","getErrorMessage","logout","devAuth","checkAuthState","isProductionBuild","cognitoConfigured","forceDevAuth","authContextObj","_result","warningData","attempts","login","isSignedIn","nextStep","cognitoError","errorMsg","errorMessage","register","isSignUpComplete","confirmRegistration","resendConfirmationCode","forgotPassword","output","confirmForgotPassword","clearError","handleExtendSession","handleSessionLogout","handleCloseWarning","useAuth","useContext","useDocumentTitle","title","suffix","previousTitle","exports","_utils","_interopRequireDefault","Delete","_createSvgIcon","_jsxRuntime","require$$2","Edit","Add","BROKERS","ManualPositionsDialog","setOpen","positions","setPositions","isFormOpen","setIsFormOpen","editingId","setEditingId","formData","setFormData","fetchPositions","positionsData","handleAddPosition","handleEditPosition","position","handleDeletePosition","p","handleSavePosition","method","payload","handleFormChange","calculateMetrics","costBasis","marketValue","unrealizedGain","unrealizedGainPct","AddIcon","broker","metrics","EditIcon","DeleteIcon","TRADE_TYPES","STATUSES","ManualTradesDialog","trades","setTrades","fetchTrades","tradesData","handleAddTrade","handleEditTrade","trade","handleDeleteTrade","t","handleSaveTrade","calculateTradeValue","quantity","price","totalValue","StatCard","Icon","unit","color","interpretation","theme","useTheme","MetricBox","PortfolioDashboard","useMediaQuery","portfolioData","refetchPortfolio","summary","dailyReturns","metadata","metricsData","metricsLoading","refetchMetrics","isSyncing","setIsSyncing","syncStatus","setSyncStatus","handleAlpacaSync","alpacaResult","consolidateResult","consolidated_holdings","total_value","sources_synced","signals","performanceChartData","sectorData","sectorMap","pos","sector","return_pct","benchmarkData","Assessment","TrendingUp","ShowChart","CardHeader","ResponsiveContainer","PieChart","Pie","colors","Cell","RechartsTooltip","BarChart","CartesianGrid","XAxis","YAxis","Legend","Bar","signal","LineChart","Line","AreaChart","Area","RadarChart","PolarGrid","PolarAngleAxis","PolarRadiusAxis","Radar","AccountBalance","ComposedChart","weight","gainLoss","gainLossColor","returnPct","returnColor","PortfolioOptimizerNew","analysis","setAnalysis","COLORS","fetchAnalysis","analysisData","currentMetrics","optimizedMetrics","improvements","recommendations","rec","issueColors","d","Divider","entry","allocation","impact","impactColor","sum","holding","beforeHolding","h","beforeWeightStr","afterWeightStr","beforeWeightNum","afterWeightNum","weightChanged","isNewPosition","isHostComponent","appendOwnerState","elementType","otherProps","ownerState","extractEventHandlers","excludeKeys","prop","resolveComponentProps","componentProps","slotState","useForkRef","refs","cleanupRef","refEffect","instance","cleanups","ref","refCallback","refCleanup","omitEventHandlers","mergeSlotProps","parameters","getSlotProps","additionalProps","externalSlotProps","externalForwardedProps","className","joinedClasses","clsx","mergedStyle","eventHandlers","componentsPropsWithoutEventHandlers","otherPropsWithoutEventHandlers","internalSlotProps","useSlotProps","skipResolvingSlotProps","resolvedComponentsProps","mergedProps","internalRef","areViewsEqual","views","expectedViews","expectedView","applyDefaultViewProps","openTo","defaultOpenTo","defaultViews","viewsWithDefault","openToWithDefault","mergeDateAndTime","utils","dateParam","timeParam","mergedDate","findClosestEnabledDate","disableFuture","disablePast","maxDate","minDate","isDateDisabled","timezone","today","forward","backward","replaceInvalidDateByNull","applyDefaultDate","defaultValue","areDatesEqual","getMonthsInYear","year","months","prevMonth","getTodayDate","valueType","dateViews","isDatePickerView","view","resolveDateFormat","format","isInToolbar","formats","getWeekdays","start","diff","timeViews","isTimeView","getSecondsInDay","createIsAfterIgnoreDatePart","disableIgnoringDatePartForTimeValidation","dateLeft","dateRight","SECTION_TYPE_GRANULARITY","getSectionTypeGranularity","sections","section","_SECTION_TYPE_GRANULA","roundDate","granularity","roundedDate","getDefaultReferenceDate","inGetTodayDate","_props$disableIgnorin","referenceDate","isAfter","getDateSectionConfigFromFormatToken","formatToken","getDeltaFromKeyCode","keyCode","getDaysInWeekStr","elements","startDate","endDate","weekDay","getLetterEditingOptions","sectionType","month","cleanLeadingZeros","valueStr","size","cleanValueStr","cleanDigitSectionValue","sectionBoundaries","adjustSectionValue","sectionsValueBoundaries","activeDate","stepsAttributes","isStart","isEnd","shouldSetAbsolute","adjustDigitSection","getCleanValue","step","newSectionValueNumber","adjustLetterSection","newOptionIndex","getSectionVisibleValue","hasLeadingZeros","cleanString","dirtyString","addPositionPropertiesToSections","isRTL","positionInInput","newSections","renderedValue","sectionStr","sectionLength","sectionLengthInInput","cleanedValue","startInInput","endInInput","getSectionPlaceholder","localeText","sectionConfig","sectionFormat","changeSectionValueFormat","currentFormat","newFormat","isFourDigitYearFormat","doesSectionFormatHaveLeadingZeros","contentType","getEscapedPartsFromFormat","escapedParts","startChar","endChar","regExp","splitFormatIntoSections","formatDensity","shouldRespectLeadingZeros","startSeparator","commitToken","hasLeadingZerosInFormat","hasLeadingZerosInInput","isValidDate","sectionValue","maxLength","formatExpansionOverflow","prevFormat","nextFormat","expandedFormat","isTokenStartRegExp","currentTokenValue","escapedPartOfCurrentChar","escapeIndex","isEscapedChar","potentialToken","regExpMatch","cleanSeparator","separator","cleanedSeparator","getDateFromDateSections","shouldSkipWeekDays","sectionFormats","sectionValues","formatWithoutSeparator","dateWithoutSeparatorStr","createDateStrForInputFromSections","dateStr","dateValue","getSectionsBoundaries","endOfYear","endOfDay","maxDaysInMonth","longestMonth","acc","daysInMonth","currentDate","daysInWeek","lastHourInDay","transferDateSectionValue","dateToTransferFrom","dateToTransferTo","formattedDaysInWeek","dayInWeekStrOfActiveDate","dayInWeekOfActiveDate","isAM","mergedDateHours","reliableSectionModificationOrder","mergeDateIntoReferenceDate","shouldLimitToEditedSections","isAndroid","getSectionOrder","neighbors","leftIndex","rightIndex","rtl2ltr","ltr2rtl","groupedSectionsStart","groupedSectionsEnd","RTLIndex","_section$endSeparator","rtlIndex","_excluded","singleItemValueManager","_objectWithoutPropertiesLoose","singleItemFieldValueManager","prevReferenceValue","prevSections","getSectionsFromDate","newActiveDate","referenceValue","parseDate","MuiPickersAdapterContext","LocalizationProvider","inProps","_React$useContext","inLocaleText","otherInProps","parentUtils","parentLocaleText","useThemeProps","DateAdapter","dateFormats","dateLibInstance","adapterLocale","themeLocaleText","adapter","defaultDates","contextValue","_jsx","getPickersLocalization","pickersTranslations","enUSPickers","time","hours","weekNumber","DEFAULT_LOCALE","useLocalizationContext","localization","useUtils","useDefaultDates","useLocaleText","useNow","getPickersToolbarUtilityClass","slot","generateUtilityClass","generateUtilityClasses","useUtilityClasses","classes","isLandscape","composeClasses","PickersToolbarRoot","styled","styles","PickersToolbarContent","_ownerState$landscape","PickersToolbar","React.forwardRef","toolbarTitle","hidden","titleId","_jsxs","getDatePickerToolbarUtilityClass","DatePickerToolbarRoot","DatePickerToolbarTitle","DatePickerToolbar","toolbarFormat","toolbarPlaceholder","other","dateText","formatFromViews","uncapitalizeObjectKeys","capitalizedObject","useDatePickerDefaultizedProps","_themeProps$slots","_themeProps$disableFu","_themeProps$disablePa","_themeProps$slotProps","themeProps","_themeProps$localeTex","slots","ArrowDropDownIcon","createSvgIcon","ArrowLeftIcon","ArrowRightIcon","CalendarIcon","ClearIcon","getPickersArrowSwitcherUtilityClass","_excluded2","_excluded3","PickersArrowSwitcherRoot","PickersArrowSwitcherSpacer","PickersArrowSwitcherButton","PickersArrowSwitcher","_slots$previousIconBu","_slots$nextIconButton","_slots$leftArrowIcon","_slots$rightArrowIcon","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel","nextProps","previousProps","PreviousIconButton","previousIconButtonProps","NextIconButton","nextIconButtonProps","LeftArrowIcon","_useSlotProps","leftArrowIconProps","RightArrowIcon","_useSlotProps2","rightArrowIconProps","DAY_SIZE","DAY_MARGIN","DIALOG_WIDTH","MAX_CALENDAR_HEIGHT","VIEW_HEIGHT","PickersModalDialogRoot","MuiDialog","dialogClasses","PickersModalDialogContent","PickersModalDialog","_slots$dialog","_slots$mobileTransiti","onDismiss","Transition","Fade","getPickersPopperUtilityClass","arrayIncludes","itemOrItems","onSpaceOrEnter","innerFn","externalEvent","getActiveElement","root","activeEl","DEFAULT_DESKTOP_MODE_MEDIA_QUERY","PREFERS_REDUCED_MOTION","mobileVersionMatches","androidVersion","iOSVersion","slowAnimationDevices","useDefaultReduceAnimations","PickersPopperRoot","MuiPopper","PickersPopperPaper","MuiPaper","clickedRootScrollbar","doc","useClickAwayListener","active","onClickAway","movedRef","syntheticEventRef","nodeRef","activatedRef","armClickAwayListener","handleClickAway","useEventCallback","insideReactTree","ownerDocument","insideDOM","handleSynthetic","handleTouchMove","PickersPopperPaperWrapper","PaperComponent","popperPlacement","inOwnerState","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart","paperProps","_paperProps$onClick","_paperProps$onTouchSt","PickersPopper","_slots$desktopTransit","_slots$desktopTrapFoc","_slots$desktopPaper","_slots$popper","anchorEl","containerRef","shouldRestoreFocus","onBlur","role","placement","inReduceAnimations","handleKeyDown","nativeEvent","lastFocusedElementRef","clickAwayRef","paperRef","handleRef","handlePaperRef","defaultReduceAnimations","reduceAnimations","Grow","FocusTrap","BaseFocusTrap","Popper","popperProps","TransitionProps","useValueWithTimezone","timezoneProp","valueProp","onChange","valueManager","_ref2","firstDefaultValue","inputValue","inputTimezone","setInputTimezone","timezoneToRender","valueWithTimezoneToRender","handleValueChange","otherParams","newValueWithInputTimezone","useControlledValueWithTimezone","onChangeProp","valueWithInputTimezone","setValue","useControlled","useValidation","validate","isSameError","defaultErrorState","onError","previousValidationErrorRef","validationError","useFieldState","fieldValueManager","validator","internalProps","referenceDateProp","selectedSectionsProp","onSelectedSectionsChange","valueFromTheOutside","getSectionsFromValue","fallbackSections","placeholder","stateWithoutReferenceDate","selectedSections","innerSetSelectedSections","setSelectedSections","newSelectedSections","prevState","selectedSectionIndexes","selectedSectionIndex","publishValue","setSectionValue","sectionIndex","newSectionValue","clearValue","clearActiveSection","activeSection","activeDateManager","hasNoOtherNonEmptySections","newValues","updateValueFromValueStr","parseDateStr","newReferenceValue","updateSectionValue","shouldGoToNextSection","newActiveDateSections","values","shouldPublish","setTempAndroidValueStr","tempValueStrAndroid","shouldUpdate","QUERY_LIFE_DURATION_MS","isQueryResponseWithoutValue","useFieldCharacterEditing","setQuery","resetQuery","_sections$query$secti","applyQuery","keyPressed","getFirstSectionValueMatchingWithQuery","isValidQueryValue","cleanKeyPressed","concatenatedQueryValue","queryResponse","applyLetterEditing","findMatchingOptions","queryValue","matchingValues","option","testQueryOnFormatAndFallbackFormat","fallbackFormat","formatFallbackValue","getOptions","fallbackOptions","fallbackValue","applyNumericEditing","getNewSectionValue","queryValueNumber","formattedValue","useField","inputRefProp","readOnly","unstableFieldRef","minutesStep","onClick","onKeyDown","onMouseUp","onPaste","clearable","onClear","disabled","otherForwardedProps","applyCharacterEditing","resetCharacterQuery","inputRef","focusTimeoutRef","sectionOrder","syncSelectionFromDOM","_selectionStart","browserStartIndex","nextSectionIndex","handleInputClick","handleInputMouseUp","handleInputFocus","handleInputBlur","handleInputPaste","pastedValue","lettersOnly","digitsOnly","digitsAndLetterOnly","handleInputChange","targetValue","eventData","shouldUseEventData","prevValueStr","startOfDiffIndex","endOfDiffIndex","activeSectionEndRelativeToNewValue","handleInputKeyDown","useEnhancedEffect","firstSelectedSection","lastSelectedSection","selectionStart","selectionEnd","currentScrollTop","inputError","_state$tempValueStrAn","inputMode","inputHasFocus","areAllSectionsEmpty","shouldShowPlaceholder","React.useImperativeHandle","_selectionStart2","_selectionEnd","_inputRef$current","browserEndIndex","isInputReadOnly","activeSectionIndex","handleClearValue","_inputRef$current2","useOpenState","onOpen","isControllingOpenProp","openState","setIsOpenState","setIsOpen","newIsOpen","shouldPublishValue","hasChanged","dateState","isControlled","isCurrentValueTheDefaultValue","shouldCommitValue","closeOnSelect","shouldClosePicker","usePickerValue","wrapperVariant","onAccept","inValue","inDefaultValue","isOpen","setDateState","initialValue","updateDate","updaterParams","comparison","shouldCommit","shouldClose","isUpdateComingFromPicker","handleClear","handleAccept","handleDismiss","handleCancel","handleSetToday","handleOpen","handleClose","handleChange","selectionState","handleSelectShortcut","changeImportance","shortcut","handleChangeFromField","handleFieldSelectedSectionsChange","actions","fieldResponse","viewValue","viewResponse","layoutResponse","testedValue","useViews","onViewChange","inView","autoFocus","inFocusedView","onFocusedViewChange","_views","_views2","previousOpenTo","previousViews","defaultView","setView","defaultFocusedView","focusedView","setFocusedView","previousView","viewIndex","nextView","handleFocusedViewChange","viewToFocus","hasFocus","prevFocusedView","handleChangeView","newView","goToNextView","setValueAndGoToNextView","currentViewSelectionState","selectedView","isSelectionFinishedOnCurrentView","hasMoreViews","nextViewAfterSelected","usePickerViews","propsFromPickerValue","additionalViewProps","autoFocusView","viewRenderers","propsToForwardToView","hasUIView","viewModeLookup","viewForReduce","viewMode","timeViewsCount","currentViewMode","popperView","setPopperView","renderer","getOrientation","useIsLandscape","customOrientation","orientation","setOrientation","eventHandler","usePickerLayoutProps","propsFromPickerViews","usePicker","pickerValueResponse","pickerViewsResponse","pickerLayoutResponse","getPickersLayoutUtilityClass","pickersLayoutClasses","PickersActionBar","onCancel","onSetToday","buttons","actionType","PickersShortcuts","isValid","resolvedItems","getValue","List","ListItem","toolbarHasView","toolbarProps","usePickerLayout","_slots$actionBar","_slots$shortcuts","onSelectShortcut","components","componentsProps","innerSlots","innerSlotProps","ActionBar","actionBarProps","actionBar","Toolbar","toolbar","content","tabs","Shortcuts","shortcutsProps","shortcuts","PickersLayoutRoot","PropTypes","PickersLayoutContentWrapper","PickersLayout","sx","useNextMonthDisabled","lastEnabledMonth","usePreviousMonthDisabled","firstEnabledMonth","DATE_VALIDATION_PROP_NAMES","TIME_VALIDATION_PROP_NAMES","DATE_TIME_VALIDATION_PROP_NAMES","VALIDATION_PROP_NAMES","extractValidationProps","extractedProps","propName","SHARED_FIELD_INTERNAL_PROP_NAMES","splitFieldInternalAndForwardedProps","forwardedProps","extractProp","validateDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear","getPickersDayUtilityClass","pickersDayClasses","selected","disableMargin","disableHighlightToday","outsideCurrentMonth","showDaysOutsideCurrentMonth","isHiddenDaySpacingFiller","styleArg","alpha","overridesResolver","PickersDayRoot","ButtonBase","PickersDayFiller","PickersDayRaw","forwardedRef","day","isAnimating","onDaySelect","onMouseDown","onMouseEnter","isToday","handleMouseDown","handleClick","PickersDay","React.memo","getPickersSlideTransitionUtilityClass","pickersSlideTransitionClasses","slideDirection","PickersSlideTransitionRoot","TransitionGroup","slideTransition","PickersSlideTransition","transKey","transitionClasses","React.cloneElement","CSSTransition","useIsDateDisabled","getDayCalendarUtilityClass","weeksContainerHeight","PickersCalendarDayRoot","PickersCalendarDayHeader","PickersCalendarWeekDayLabel","PickersCalendarWeekNumberLabel","PickersCalendarWeekNumber","PickersCalendarLoadingContainer","PickersCalendarSlideTransition","PickersCalendarWeekContainer","PickersCalendarWeek","WrappedDay","_slots$day","_slotProps$day","parentProps","focusableDay","selectedDays","currentMonthNumber","isViewFocused","isMonthSwitchingAnimating","isFocusableDay","isSelected","selectedDay","Day","dayProps","isDisabled","isFirstVisibleCell","startOfMonth","isLastVisibleCell","endOfMonth","DayCalendar","onFocusedDayChange","currentMonth","focusedDay","onSelectedDaysChange","onMonthSwitchingAnimationEnd","renderLoading","dayOfWeekFormatterFromProps","gridLabelId","displayWeekNumber","fixedWeekNumber","dayOfWeekFormatter","_day","internalHasFocus","setInternalHasFocus","internalFocusedDay","setInternalFocusedDay","handleDaySelect","focusDay","newFocusedDayDefault","nextAvailableMonth","closestDayToFocus","handleFocus","handleBlur","validSelectedDays","transitionKey","slideNodeRef","React.createRef","startOfCurrentWeek","weeksToDisplay","currentMonthWithTimezone","toDisplay","nextMonth","additionalWeeks","hasCommonWeek","week","weekday","_dayOfWeekFormatter","dayIndex","createCalendarStateReducer","disableSwitchToMonthOnDayFocus","needMonthSwitch","useCalendarState","defaultCalendarMonth","onMonthChange","reducerFn","externalReferenceDate","calendarState","React.useReducer","handleChangeMonth","changeMonth","newDate","newDateRequested","changeFocusedDay","newFocusedDate","withoutMonthSwitchingAnimation","useDesktopPicker","_innerSlotProps$toolb","_innerSlotProps$toolb2","_slots$inputAdornment","_slots$openPickerButt","_slots$layout","getOpenDialogAriaText","pickerParams","internalInputRef","labelId","useId","isToolbarHidden","layoutProps","renderCurrentView","pickerFieldProps","InputAdornment","MuiInputAdornment","inputAdornmentProps","OpenPickerButton","openPickerButtonProps","OpenPickerIcon","Field","fieldProps","slotsForField","Layout","handleInputRef","labelledById","useDefaultizedDateField","_props$disablePast","_props$disableFuture","_props$format","useDateField","useClearableField","forwardedFieldProps","ForwardedInputProps","_slots$clearButton","_slotProps$clearButto","_slots$clearIcon","_slotProps$clearIcon","MuiIconButton","iconButtonProps","EndClearIcon","endClearIconProps","InputProps","DateField","_slots$textField","_slotProps$textField","inputProps","MuiTextField","externalInputRef","textFieldProps","_useDateField","ProcessedInputProps","processedFieldProps","getPickersFadeTransitionGroupUtilityClass","PickersFadeTransitionGroupRoot","PickersFadeTransitionGroup","getPickersMonthUtilityClass","pickersMonthClasses","PickersMonthRoot","PickersMonthButton","PickersMonth","tabIndex","ariaCurrent","ariaLabel","_ref$current","getMonthCalendarUtilityClass","useMonthCalendarDefaultizedProps","MonthCalendarRoot","MonthCalendar","onMonthFocus","monthsPerRow","todayMonth","selectedMonth","focusedMonth","setFocusedMonth","changeHasFocus","newHasFocus","isMonthDisabled","dateToValidate","monthToValidate","handleMonthSelection","focusMonth","prevFocusedMonth","handleMonthFocus","handleMonthBlur","monthNumber","monthText","monthLabel","getPickersYearUtilityClass","pickersYearClasses","PickersYearRoot","PickersYearButton","PickersYear","getYearCalendarUtilityClass","useYearCalendarDefaultizedProps","_themeProps$yearsPerR","YearCalendarRoot","YearCalendar","onYearFocus","yearsPerRow","todayYear","selectedYear","focusedYear","setFocusedYear","isYearDisabled","yearToValidate","handleYearSelection","focusYear","prevFocusedYear","handleYearFocus","handleYearBlur","scrollerRef","tabbableButton","offsetHeight","offsetTop","clientHeight","scrollTop","elementBottom","yearNumber","getPickersCalendarHeaderUtilityClass","pickersCalendarHeaderClasses","PickersCalendarHeaderRoot","PickersCalendarHeaderLabelContainer","PickersCalendarHeaderLabel","PickersCalendarHeaderSwitchViewButton","PickersCalendarHeaderSwitchViewIcon","PickersCalendarHeader","_slots$switchViewButt","_slots$switchViewIcon","SwitchViewButton","switchViewButtonProps","SwitchViewIcon","switchViewIconProps","selectNextMonth","selectPreviousMonth","isNextMonthDisabled","isPreviousMonthDisabled","handleToggleView","el","nextIndexToOpen","PickerViewRoot","getDateCalendarUtilityClass","useDateCalendarDefaultizedProps","_themeProps$loading","_themeProps$openTo","_themeProps$views","_themeProps$reduceAni","_themeProps$renderLoa","DateCalendarRoot","DateCalendarViewTransitionContainer","DateCalendar","_slots$calendarHeader","_slotProps$calendarHe","onYearChange","minDateWithDisabled","maxDateWithDisabled","CalendarHeader","calendarHeaderProps","newMonth","handleDateMonthChange","closestEnabledDate","handleDateYearChange","startOfYear","handleSelectedDayChange","baseDateValidationProps","commonViewProps","prevOpenViewRef","renderDateViewCalendar","DesktopDatePicker","_defaultizedProps$yea","_defaultizedProps$slo2","_props$localeText$ope","_props$localeText","defaultizedProps","_defaultizedProps$slo","renderPicker","refType","useMobilePicker","MobileDatePicker","DatePicker","desktopModeMediaQuery","dateLongFormatter","formatLong","timeLongFormatter","dateTimeLongFormatter","matchResult","datePattern","timePattern","dateTimeFormat","longFormatters","_default","module","formatTokenMap","defaultFormats","AdapterDateFnsBase","_this$locale","longFormatRegexp","firstCharacter","longFormatter","numberToFormat","ampm","locale","AdapterDateFns","addDays","defaultLocale","isoString","parseISO","formatISO","dateFnsParse","formatKey","formatString","dateFnsFormat","comparing","differenceInYears","differenceInQuarters","differenceInMonths","differenceInWeeks","differenceInDays","differenceInHours","differenceInMinutes","differenceInSeconds","differenceInMilliseconds","isEqual","isSameYear","isSameMonth","isSameDay","isSameHour","isBefore","startOfDay","isWithinInterval","startOfWeek","endOfWeek","amount","addYears","addMonths","addWeeks","addHours","addMinutes","addSeconds","getYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","setYear","setMonth","setDate","setHours","setMinutes","setSeconds","setMilliseconds","getDaysInMonth","monthArray","eachDayOfInterval","count","nestedWeeks","getWeek","years","API_BASE_URL","TradeHistory","setViewMode","setPage","rowsPerPage","setRowsPerPage","selectedTrade","setSelectedTrade","detailsOpen","setDetailsOpen","importDialogOpen","setImportDialogOpen","showAdvancedFilters","setShowAdvancedFilters","typeFilter","setTypeFilter","statusFilter","setStatusFilter","setSortOrder","matchedPairs","setMatchedPairs","matchedPairsLoading","setMatchedPairsLoading","matchedPairsError","setMatchedPairsError","matchedPairsSearchTerm","setMatchedPairsSearchTerm","matchedPairsFilter","setMatchedPairsFilter","dateFilter","setDateFilter","tradeData","tradeLoading","refetchTrades","summaryData","summaryLoading","tradesSummary","chartData","sortedTrades","dateMap","dateKey","analytics","buyTrades","sellTrades","totalBuyValue","totalSellValue","closedPnl","winCount","lossCount","avgWin","avgLoss","profitFactor","totalTrades","filteredMatchedPairs","pair","searchLower","pnlValue","matchedPairsData","validMatchedPairs","handleRefresh","handleImportTrades","handleExportTrades","blob","getTradeTypeColor","formatCurrency","formatPercent","filteredTrades","filtered","matchesSearch","matchesType","matchesStatus","aVal","bVal","paginatedTrades","SwapHoriz","MonetizationOn","Timeline","Upload","Download","Search","FilterList","TableSortLabel","TrendingDown","Analytics","TablePagination","newPage","isProfit","logApiError","component","operation","logQueryError","logApiSuccess","createComponentLogger","TabPanel","Settings","isAuthenticated","navigate","apiConfig","logger","snackbar","setSnackbar","_apiKeys","_setApiKeys","addApiKeyDialog","setAddApiKeyDialog","showApiKeys","setShowApiKeys","newApiKey","setNewApiKey","profileData","setProfileData","passwordDialog","setPasswordDialog","notifications","setNotifications","themeSettings","setThemeSettings","loadApiKeys","apiKeysData","apiKeysArray","brokerName","keyData","loadUserSettings","apiError","showSnackbar","notifResponse","notifData","themeResponse","themeData","hasLoadedRef","loadUserSettingsRef","handleTabChange","severity","handleSaveProfile","updatedUser","handleAddApiKey","_deleteApiKey","handleSaveNotifications","handleSaveTheme","handleChangePassword","validatePasswordChange","handlePasswordDialogSubmit","errorData","handlePasswordDialogClose","handleToggleTwoFactor","handleDownloadRecoveryCodes","codesText","link","handleDeleteAccount","handleRevokeAllSessions","AccountCircle","Notifications","Palette","Security","Shield","Save","Cancel","Avatar","ListItemText","ListItemSecondaryAction","apiKey","FormControlLabel","Switch","ListItemIcon","VisibilityOff","Visibility","Snackbar","Messages","messages","setMessages","selectedMessage","setSelectedMessage","openDialog","setOpenDialog","handleOpenDialog","handleCloseDialog","handleStatusChange","newStatus","msg","formatDistanceToNow","LoginForm","onSwitchToRegister","onSwitchToForgotPassword","showPassword","setShowPassword","localError","setLocalError","setRememberMe","handleSubmit","displayError","LoginIcon","Checkbox","Link","RegisterForm","onSwitchToLogin","onRegistrationSuccess","showConfirmPassword","setShowConfirmPassword","validateForm","RegisterIcon","ConfirmationForm","onConfirmationSuccess","setConfirmationCode","resendSuccess","setResendSuccess","resendCooldown","setResendCooldown","handleResendCode","ConfirmIcon","ForgotPasswordForm","onBack","setEmail","setMessage","ResetPasswordForm","onPasswordResetSuccess","VpnKey","MFAChallenge","challengeType","onSuccess","setCode","getChallengeTitle","AUTH_MODES","AuthModal","initialMode","mode","setMode","setUsername","successMessage","setSuccessMessage","handleRegistrationSuccess","registeredUsername","_nextStep","handleConfirmationSuccess","handleForgotPasswordSuccess","resetUsername","handlePasswordResetSuccess","handleMFASuccess","handleMFACancel","getTitle","Close","ProtectedRoute","_requireAuth","_fallback","ErrorBoundary","_error","isReactRenderError","Stack","ErrorOutline","Home","ContactSupport","RootRedirect","AuthTest","auth","debugInfo","setDebugInfo","addDebugInfo","logMessage","loginWithTestUser","info","drawerWidth","menuItems","AccountBalanceIcon","TimelineIcon","AnalyticsIcon","MailIcon","SettingsIcon","HealthAndSafetyIcon","App","mobileOpen","setMobileOpen","authModalOpen","setAuthModalOpen","userMenuAnchor","setUserMenuAnchor","expandedSections","setExpandedSections","isMobile","handleDrawerToggle","handleUserMenuOpen","handleUserMenuClose","handleLogout","handleNavigation","handleSectionToggle","groupedMenuItems","sectionTitles","drawer","ListItemButton","ExpandLess","AppBar","MenuIcon","Menu","AccountCircleIcon","LogoutIcon","Drawer","errorContext","registrations","registration","_boolean","cacheNames","cacheName","createTheme","rootElement","ReactDOM","ThemeProvider","CssBaseline","rootContent"],"mappings":"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YAAa,OACb,YAAa,QACb,UAAW,CACf,EACE,KAAM,OAEN,EAAG,CACD,YAAa,QACb,YAAa,QACb,UAAW,CACf,EACE,GAAI,QACJ,KAAM,CACJ,YAAa,QACb,YAAa,QACjB,EACE,IAAK,CACH,YAAa,QACb,YAAa,QACjB,EACE,EAAG,CACD,YAAa,QACb,YAAa,QACb,UAAW,CACf,EACE,GAAI,QACJ,IAAK,CACH,YAAa,QACb,YAAa,QACjB,EACE,KAAM,CACJ,YAAa,QACb,YAAa,QACjB,EAEE,EAAG,CACD,YAAa,MACb,YAAa,QACb,UAAW,CACf,EACE,GAAI,MACJ,GAAI,CACF,YAAa,MACb,YAAa,mBACjB,EAEE,EAAG,CACD,YAAa,UACb,YAAa,QACjB,EACE,GAAI,CACF,YAAa,UACb,YAAa,QACjB,EACE,IAAK,CACH,YAAa,UACb,YAAa,QACjB,EACE,KAAM,CACJ,YAAa,UACb,YAAa,QACjB,EACE,MAAO,CACL,YAAa,UACb,YAAa,QACjB,EACE,EAAG,CACD,YAAa,UACb,YAAa,QACb,UAAW,CACf,EACE,GAAI,UACJ,IAAK,CACH,YAAa,UACb,YAAa,QACjB,EACE,KAAM,CACJ,YAAa,UACb,YAAa,QACjB,EACE,EAAG,CACD,YAAa,UACb,YAAa,QACb,UAAW,CACf,EACE,GAAI,UACJ,IAAK,CACH,YAAa,UACb,YAAa,QACjB,EACE,KAAM,CACJ,YAAa,UACb,YAAa,QACjB,EACE,MAAO,CACL,YAAa,UACb,YAAa,QACjB,EACE,OAAQ,CACN,YAAa,UACb,YAAa,QACjB,EACE,EAAG,CACD,YAAa,UACb,YAAa,QACb,UAAW,CACf,EACE,GAAI,UACJ,IAAK,CACH,YAAa,UACb,YAAa,QACjB,EACE,KAAM,CACJ,YAAa,UACb,YAAa,QACjB,EACE,MAAO,CACL,YAAa,UACb,YAAa,QACjB,EACE,OAAQ,CACN,YAAa,UACb,YAAa,QACjB,EAEE,EAAG,WACH,GAAI,WACJ,IAAK,WAEL,EAAG,CACD,YAAa,QACb,YAAa,QACb,UAAW,CACf,EACE,GAAI,QACJ,EAAG,CACD,YAAa,QACb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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,38,39,40,41,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134]}