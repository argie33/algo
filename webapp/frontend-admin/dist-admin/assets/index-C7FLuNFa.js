import{r as h,R as Za,j as e,C as ot,A as je,B as E,T as u,f as tn,g as Pt,P as He,G as v,h as ve,F as tt,I as st,S as rt,M as re,i as Je,k as dt,l as ut,m as ht,n as Te,o as A,p as ft,q as Ue,s as Ks,u as We,v as Io,w as Qs,x as Q,y as J,z as Ao,D as sr,E as ee,H as yr,J as ds,K as Nt,L as Vr,N as Dn,O as _n,Q as br,U as vr,V as Ys,W as jr,X as Ja,Y as Zt,Z as _t,$ as Wt,a0 as Tt,a1 as Xa,a2 as ei,a3 as It,a4 as ti,a5 as sn,a6 as rn,a7 as jt,a8 as rr,a9 as Wr,aa as Tn,ab as Se,ac as Ro,ad as ys,c as Xe,ae as F,af as _e,ag as qe,ah as at,ai as it,aj as we,ak as nt,al as $t,am as nr,an as kn,ao as Jt,ap as si,aq as ri,ar as he,as as wr,at as ni,au as Ut,av as ps,aw as Zs,ax as Kt,ay as M,az as oi,aA as xs,aB as ai,aC as Mo,aD as nn,aE as kt,aF as Oo,aG as Fo,aH as ii,aI as li,aJ as No,aK as ci,aL as Es,aM as En,aN as di,aO as In,aP as Lo,aQ as ui,aR as Vo,aS as hi,aT as fi,aU as ls,aV as mi,aW as Sr,aX as pi,aY as Wo,aZ as us,a_ as An,a$ as xi,b0 as gi,b1 as pt,b2 as bt,b3 as Ur,b4 as Xt,b5 as es,b6 as yi,b7 as $r,b8 as bi,b9 as gs,ba as Rn,bb as Mn,bc as vi,bd as On,be as ji,bf as wi,bg as Si,bh as Cr,bi as Pr,bj as Ci,bk as Pi,bl as Di,bm as _i,bn as Uo,bo as Ti,bp as Fn,bq as ki,br as Ei,bs as Ii,bt as Ai,bu as Ri}from"./mui-wq031XSZ.js";import{a as Mi,g as Ns,b as Oi}from"./vendor-Cd7-iaQF.js";import{a as Fi,b as Dr,l as Ni,p as Li,f as Vi,c as Wi,i as Ui,d as $i,e as Bi,g as zi,h as Hi,j as Gi,k as qi,m as Ki,n as Yi,o as Qi,q as Zi,r as Ji,s as Xi,t as el,u as tl,v as sl,w as _r,x as Tr,y as Nn,z as ws,A as Ws,B as Ln,C as rl,D as Vn,E as kr,F as Wn,G as Er,H as Un,I as Ir,J as nl,K as ol,L as al,M as il,N as ll,O as cl,P as dl,Q as ul,R as hl,S as fl,T as ml,U as pl,V as xl,W as gl,X as yl,Y as bl,Z as vl,_ as jl,$ as wl,a0 as Sl,a1 as Cl,a2 as Pl}from"./utils-B1HQnmbz.js";import{R as Ne,P as $o,a as Bo,C as zo,T as Le,B as vt,b as Ke,X as Ye,Y as Re,L as lt,c as Oe,d as Br,e as Yt,A as Dl,f as $n,g as _l,h as Tl,i as kl,j as El,k as Il,l as zr}from"./charts-FoPqZJtt.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var Us={},Bn;function Al(){if(Bn)return Us;Bn=1;var t=Mi();return Us.createRoot=t.createRoot,Us.hydrateRoot=t.hydrateRoot,Us}var Rl=Al();const Ml=Ns(Rl);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function As(){return As=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},As.apply(this,arguments)}var Lt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Lt||(Lt={}));const zn="popstate";function Ol(t){t===void 0&&(t={});function s(n,a){let{pathname:o,search:i,hash:l}=n.location;return Hr("",{pathname:o,search:i,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Go(a)}return Nl(s,r,null,t)}function Ge(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function Ho(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Fl(){return Math.random().toString(36).substr(2,8)}function Hn(t,s){return{usr:t.state,key:t.key,idx:s}}function Hr(t,s,r,n){return r===void 0&&(r=null),As({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?bs(s):s,{state:r,key:s&&s.key||n||Fl()})}function Go(t){let{pathname:s="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function bs(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(s.search=t.substr(n),t=t.substr(0,n)),t&&(s.pathname=t)}return s}function Nl(t,s,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:o=!1}=n,i=a.history,l=Lt.Pop,c=null,d=m();d==null&&(d=0,i.replaceState(As({},i.state,{idx:d}),""));function m(){return(i.state||{idx:null}).idx}function x(){l=Lt.Pop;let j=m(),P=j==null?null:j-d;d=j,c&&c({action:l,location:p.location,delta:P})}function g(j,P){l=Lt.Push;let S=Hr(p.location,j,P);d=m()+1;let T=Hn(S,d),w=p.createHref(S);try{i.pushState(T,"",w)}catch(y){if(y instanceof DOMException&&y.name==="DataCloneError")throw y;a.location.assign(w)}o&&c&&c({action:l,location:p.location,delta:1})}function b(j,P){l=Lt.Replace;let S=Hr(p.location,j,P);d=m();let T=Hn(S,d),w=p.createHref(S);i.replaceState(T,"",w),o&&c&&c({action:l,location:p.location,delta:0})}function D(j){let P=a.location.origin!=="null"?a.location.origin:a.location.href,S=typeof j=="string"?j:Go(j);return S=S.replace(/ $/,"%20"),Ge(P,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,P)}let p={get action(){return l},get location(){return t(a,i)},listen(j){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(zn,x),c=j,()=>{a.removeEventListener(zn,x),c=null}},createHref(j){return s(a,j)},createURL:D,encodeLocation(j){let P=D(j);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:g,replace:b,go(j){return i.go(j)}};return p}var Gn;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Gn||(Gn={}));function Ll(t,s,r){return r===void 0&&(r="/"),Vl(t,s,r)}function Vl(t,s,r,n){let a=typeof s=="string"?bs(s):s,o=Yo(a.pathname||"/",r);if(o==null)return null;let i=qo(t);Wl(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let d=Jl(o);l=Yl(i[c],d)}return l}function qo(t,s,r,n){s===void 0&&(s=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(Ge(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=Qt([n,c.relativePath]),m=r.concat(c);o.children&&o.children.length>0&&(Ge(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),qo(o.children,s,m,d)),!(o.path==null&&!o.index)&&s.push({path:d,score:ql(d,o.index),routesMeta:m})};return t.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))a(o,i);else for(let c of Ko(o.path))a(o,i,c)}),s}function Ko(t){let s=t.split("/");if(s.length===0)return[];let[r,...n]=s,a=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return a?[o,""]:[o];let i=Ko(n.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),a&&l.push(...i),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Wl(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:Kl(s.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Ul=/^:[\w-]+$/,$l=3,Bl=2,zl=1,Hl=10,Gl=-2,qn=t=>t==="*";function ql(t,s){let r=t.split("/"),n=r.length;return r.some(qn)&&(n+=Gl),s&&(n+=Bl),r.filter(a=>!qn(a)).reduce((a,o)=>a+(Ul.test(o)?$l:o===""?zl:Hl),n)}function Kl(t,s){return t.length===s.length&&t.slice(0,-1).every((n,a)=>n===s[a])?t[t.length-1]-s[s.length-1]:0}function Yl(t,s,r){let{routesMeta:n}=t,a={},o="/",i=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,m=o==="/"?s:s.slice(o.length)||"/",x=Ql({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},m),g=c.route;if(!x)return null;Object.assign(a,x.params),i.push({params:a,pathname:Qt([o,x.pathname]),pathnameBase:nc(Qt([o,x.pathnameBase])),route:g}),x.pathnameBase!=="/"&&(o=Qt([o,x.pathnameBase]))}return i}function Ql(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Zl(t.path,t.caseSensitive,t.end),a=s.match(r);if(!a)return null;let o=a[0],i=o.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((d,m,x)=>{let{paramName:g,isOptional:b}=m;if(g==="*"){let p=l[x]||"";i=o.slice(0,o.length-p.length).replace(/(.)\/+$/,"$1")}const D=l[x];return b&&!D?d[g]=void 0:d[g]=(D||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:i,pattern:t}}function Zl(t,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),Ho(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),n]}function Jl(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Ho(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function Yo(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function Xl(t,s){s===void 0&&(s="/");let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?bs(t):t;return{pathname:r?r.startsWith("/")?r:ec(r,s):s,search:oc(n),hash:ac(a)}}function ec(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Ar(t,s,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tc(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function sc(t,s){let r=tc(t);return s?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function rc(t,s,r,n){n===void 0&&(n=!1);let a;typeof t=="string"?a=bs(t):(a=As({},t),Ge(!a.pathname||!a.pathname.includes("?"),Ar("?","pathname","search",a)),Ge(!a.pathname||!a.pathname.includes("#"),Ar("#","pathname","hash",a)),Ge(!a.search||!a.search.includes("#"),Ar("#","search","hash",a)));let o=t===""||a.pathname==="",i=o?"/":a.pathname,l;if(i==null)l=r;else{let x=s.length-1;if(!n&&i.startsWith("..")){let g=i.split("/");for(;g[0]==="..";)g.shift(),x-=1;a.pathname=g.join("/")}l=x>=0?s[x]:"/"}let c=Xl(a,l),d=i&&i!=="/"&&i.endsWith("/"),m=(o||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||m)&&(c.pathname+="/"),c}const Qt=t=>t.join("/").replace(/\/\/+/g,"/"),nc=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),oc=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ac=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ic(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Qo=["post","put","patch","delete"];new Set(Qo);const lc=["get",...Qo];new Set(lc);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rs(){return Rs=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rs.apply(this,arguments)}const on=h.createContext(null),cc=h.createContext(null),or=h.createContext(null),ar=h.createContext(null),vs=h.createContext({outlet:null,matches:[],isDataRoute:!1}),Zo=h.createContext(null);function ir(){return h.useContext(ar)!=null}function an(){return ir()||Ge(!1),h.useContext(ar).location}function Jo(t){h.useContext(or).static||h.useLayoutEffect(t)}function ln(){let{isDataRoute:t}=h.useContext(vs);return t?wc():dc()}function dc(){ir()||Ge(!1);let t=h.useContext(on),{basename:s,future:r,navigator:n}=h.useContext(or),{matches:a}=h.useContext(vs),{pathname:o}=an(),i=JSON.stringify(sc(a,r.v7_relativeSplatPath)),l=h.useRef(!1);return Jo(()=>{l.current=!0}),h.useCallback(function(d,m){if(m===void 0&&(m={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let x=rc(d,JSON.parse(i),o,m.relative==="path");t==null&&s!=="/"&&(x.pathname=x.pathname==="/"?s:Qt([s,x.pathname])),(m.replace?n.replace:n.push)(x,m.state,m)},[s,n,i,o,t])}function uc(t,s){return hc(t,s)}function hc(t,s,r,n){ir()||Ge(!1);let{navigator:a}=h.useContext(or),{matches:o}=h.useContext(vs),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=an(),m;if(s){var x;let j=typeof s=="string"?bs(s):s;c==="/"||(x=j.pathname)!=null&&x.startsWith(c)||Ge(!1),m=j}else m=d;let g=m.pathname||"/",b=g;if(c!=="/"){let j=c.replace(/^\//,"").split("/");b="/"+g.replace(/^\//,"").split("/").slice(j.length).join("/")}let D=Ll(t,{pathname:b}),p=gc(D&&D.map(j=>Object.assign({},j,{params:Object.assign({},l,j.params),pathname:Qt([c,a.encodeLocation?a.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?c:Qt([c,a.encodeLocation?a.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),o,r,n);return s&&p?h.createElement(ar.Provider,{value:{location:Rs({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Lt.Pop}},p):p}function fc(){let t=jc(),s=ic(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},s),r?h.createElement("pre",{style:a},r):null,null)}const mc=h.createElement(fc,null);class pc extends h.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?h.createElement(vs.Provider,{value:this.props.routeContext},h.createElement(Zo.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xc(t){let{routeContext:s,match:r,children:n}=t,a=h.useContext(on);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),h.createElement(vs.Provider,{value:s},n)}function gc(t,s,r,n){var a;if(s===void 0&&(s=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var o;if(!r)return null;if(r.errors)t=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,l=(a=r)==null?void 0:a.errors;if(l!=null){let m=i.findIndex(x=>x.route.id&&l?.[x.route.id]!==void 0);m>=0||Ge(!1),i=i.slice(0,Math.min(i.length,m+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let m=0;m<i.length;m++){let x=i[m];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(d=m),x.route.id){let{loaderData:g,errors:b}=r,D=x.route.loader&&g[x.route.id]===void 0&&(!b||b[x.route.id]===void 0);if(x.route.lazy||D){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((m,x,g)=>{let b,D=!1,p=null,j=null;r&&(b=l&&x.route.id?l[x.route.id]:void 0,p=x.route.errorElement||mc,c&&(d<0&&g===0?(Sc("route-fallback"),D=!0,j=null):d===g&&(D=!0,j=x.route.hydrateFallbackElement||null)));let P=s.concat(i.slice(0,g+1)),S=()=>{let T;return b?T=p:D?T=j:x.route.Component?T=h.createElement(x.route.Component,null):x.route.element?T=x.route.element:T=m,h.createElement(xc,{match:x,routeContext:{outlet:m,matches:P,isDataRoute:r!=null},children:T})};return r&&(x.route.ErrorBoundary||x.route.errorElement||g===0)?h.createElement(pc,{location:r.location,revalidation:r.revalidation,component:p,error:b,children:S(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):S()},null)}var Xo=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(Xo||{}),ea=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(ea||{});function yc(t){let s=h.useContext(on);return s||Ge(!1),s}function bc(t){let s=h.useContext(cc);return s||Ge(!1),s}function vc(t){let s=h.useContext(vs);return s||Ge(!1),s}function ta(t){let s=vc(),r=s.matches[s.matches.length-1];return r.route.id||Ge(!1),r.route.id}function jc(){var t;let s=h.useContext(Zo),r=bc(),n=ta();return s!==void 0?s:(t=r.errors)==null?void 0:t[n]}function wc(){let{router:t}=yc(Xo.UseNavigateStable),s=ta(ea.UseNavigateStable),r=h.useRef(!1);return Jo(()=>{r.current=!0}),h.useCallback(function(a,o){o===void 0&&(o={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,Rs({fromRouteId:s},o)))},[t,s])}const Kn={};function Sc(t,s,r){Kn[t]||(Kn[t]=!0)}function Cc(t,s){t?.v7_startTransition,t?.v7_relativeSplatPath}function St(t){Ge(!1)}function Pc(t){let{basename:s="/",children:r=null,location:n,navigationType:a=Lt.Pop,navigator:o,static:i=!1,future:l}=t;ir()&&Ge(!1);let c=s.replace(/^\/*/,"/"),d=h.useMemo(()=>({basename:c,navigator:o,static:i,future:Rs({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof n=="string"&&(n=bs(n));let{pathname:m="/",search:x="",hash:g="",state:b=null,key:D="default"}=n,p=h.useMemo(()=>{let j=Yo(m,c);return j==null?null:{location:{pathname:j,search:x,hash:g,state:b,key:D},navigationType:a}},[c,m,x,g,b,D,a]);return p==null?null:h.createElement(or.Provider,{value:d},h.createElement(ar.Provider,{children:r,value:p}))}function Dc(t){let{children:s,location:r}=t;return uc(Gr(s),r)}new Promise(()=>{});function Gr(t,s){s===void 0&&(s=[]);let r=[];return h.Children.forEach(t,(n,a)=>{if(!h.isValidElement(n))return;let o=[...s,a];if(n.type===h.Fragment){r.push.apply(r,Gr(n.props.children,o));return}n.type!==St&&Ge(!1),!n.props.index||!n.props.children||Ge(!1);let i={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Gr(n.props.children,o)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const _c="6";try{window.__reactRouterVersion=_c}catch{}const Tc="startTransition",Yn=Za[Tc];function kc(t){let{basename:s,children:r,future:n,window:a}=t,o=h.useRef();o.current==null&&(o.current=Ol({window:a,v5Compat:!0}));let i=o.current,[l,c]=h.useState({action:i.action,location:i.location}),{v7_startTransition:d}=n||{},m=h.useCallback(x=>{d&&Yn?Yn(()=>c(x)):c(x)},[c,d]);return h.useLayoutEffect(()=>i.listen(m),[i,m]),h.useEffect(()=>Cc(n),[n]),h.createElement(Pc,{basename:s,children:r,location:l.location,navigationType:l.action,navigator:i,future:n})}var Qn;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Qn||(Qn={}));var Zn;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Zn||(Zn={}));var Ls=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ec={setTimeout:(t,s)=>setTimeout(t,s),clearTimeout:t=>clearTimeout(t),setInterval:(t,s)=>setInterval(t,s),clearInterval:t=>clearInterval(t)},Ic=class{#e=Ec;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,s){return this.#e.setTimeout(t,s)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,s){return this.#e.setInterval(t,s)}clearInterval(t){this.#e.clearInterval(t)}},qt=new Ic;function Ac(t){setTimeout(t,0)}var ts=typeof window>"u"||"Deno"in globalThis;function ct(){}function Rc(t,s){return typeof t=="function"?t(s):t}function qr(t){return typeof t=="number"&&t>=0&&t!==1/0}function sa(t,s){return Math.max(t+(s||0)-Date.now(),0)}function Vt(t,s){return typeof t=="function"?t(s):t}function xt(t,s){return typeof t=="function"?t(s):t}function Jn(t,s){const{type:r="all",exact:n,fetchStatus:a,predicate:o,queryKey:i,stale:l}=t;if(i){if(n){if(s.queryHash!==cn(i,s.options))return!1}else if(!Os(s.queryKey,i))return!1}if(r!=="all"){const c=s.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&s.isStale()!==l||a&&a!==s.state.fetchStatus||o&&!o(s))}function Xn(t,s){const{exact:r,status:n,predicate:a,mutationKey:o}=t;if(o){if(!s.options.mutationKey)return!1;if(r){if(Ms(s.options.mutationKey)!==Ms(o))return!1}else if(!Os(s.options.mutationKey,o))return!1}return!(n&&s.state.status!==n||a&&!a(s))}function cn(t,s){return(s?.queryKeyHashFn||Ms)(t)}function Ms(t){return JSON.stringify(t,(s,r)=>Yr(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Os(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?Object.keys(s).every(r=>Os(t[r],s[r])):!1}var Mc=Object.prototype.hasOwnProperty;function ra(t,s){if(t===s)return t;const r=eo(t)&&eo(s);if(!r&&!(Yr(t)&&Yr(s)))return s;const a=(r?t:Object.keys(t)).length,o=r?s:Object.keys(s),i=o.length,l=r?new Array(i):{};let c=0;for(let d=0;d<i;d++){const m=r?d:o[d],x=t[m],g=s[m];if(x===g){l[m]=x,(r?d<a:Mc.call(t,m))&&c++;continue}if(x===null||g===null||typeof x!="object"||typeof g!="object"){l[m]=g;continue}const b=ra(x,g);l[m]=b,b===x&&c++}return a===i&&c===a?t:l}function Kr(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const r in t)if(t[r]!==s[r])return!1;return!0}function eo(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Yr(t){if(!to(t))return!1;const s=t.constructor;if(s===void 0)return!0;const r=s.prototype;return!(!to(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function to(t){return Object.prototype.toString.call(t)==="[object Object]"}function Oc(t){return new Promise(s=>{qt.setTimeout(s,t)})}function Qr(t,s,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,s):r.structuralSharing!==!1?ra(t,s):s}function Fc(t,s,r=0){const n=[...t,s];return r&&n.length>r?n.slice(1):n}function Nc(t,s,r=0){const n=[s,...t];return r&&n.length>r?n.slice(0,-1):n}var dn=Symbol();function na(t,s){return!t.queryFn&&s?.initialPromise?()=>s.initialPromise:!t.queryFn||t.queryFn===dn?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Lc(t,s){return typeof t=="function"?t(...s):!!t}var Vc=class extends Ls{#e;#t;#s;constructor(){super(),this.#s=t=>{if(!ts&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#s=t,this.#t?.(),this.#t=t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},un=new Vc;function Zr(){let t,s;const r=new Promise((a,o)=>{t=a,s=o});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),t(a)},r.reject=a=>{n({status:"rejected",reason:a}),s(a)},r}var Wc=Ac;function Uc(){let t=[],s=0,r=l=>{l()},n=l=>{l()},a=Wc;const o=l=>{s?t.push(l):a(()=>{r(l)})},i=()=>{const l=t;t=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;s++;try{c=l()}finally{s--,s||i()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var Ze=Uc(),$c=class extends Ls{#e=!0;#t;#s;constructor(){super(),this.#s=t=>{if(!ts&&window.addEventListener){const s=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#s=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(r=>{r(t)}))}isOnline(){return this.#e}},Js=new $c;function Bc(t){return Math.min(1e3*2**t,3e4)}function oa(t){return(t??"online")==="online"?Js.isOnline():!0}var Jr=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function aa(t){let s=!1,r=0,n;const a=Zr(),o=()=>a.status!=="pending",i=p=>{if(!o()){const j=new Jr(p);g(j),t.onCancel?.(j)}},l=()=>{s=!0},c=()=>{s=!1},d=()=>un.isFocused()&&(t.networkMode==="always"||Js.isOnline())&&t.canRun(),m=()=>oa(t.networkMode)&&t.canRun(),x=p=>{o()||(n?.(),a.resolve(p))},g=p=>{o()||(n?.(),a.reject(p))},b=()=>new Promise(p=>{n=j=>{(o()||d())&&p(j)},t.onPause?.()}).then(()=>{n=void 0,o()||t.onContinue?.()}),D=()=>{if(o())return;let p;const j=r===0?t.initialPromise:void 0;try{p=j??t.fn()}catch(P){p=Promise.reject(P)}Promise.resolve(p).then(x).catch(P=>{if(o())return;const S=t.retry??(ts?0:3),T=t.retryDelay??Bc,w=typeof T=="function"?T(r,P):T,y=S===!0||typeof S=="number"&&r<S||typeof S=="function"&&S(r,P);if(s||!y){g(P);return}r++,t.onFail?.(r,P),Oc(w).then(()=>d()?void 0:b()).then(()=>{s?g(P):D()})})};return{promise:a,status:()=>a.status,cancel:i,continue:()=>(n?.(),a),cancelRetry:l,continueRetry:c,canStart:m,start:()=>(m()?D():b().then(D),a)}}var ia=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qr(this.gcTime)&&(this.#e=qt.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ts?1/0:300*1e3))}clearGcTimeout(){this.#e&&(qt.clearTimeout(this.#e),this.#e=void 0)}},zc=class extends ia{#e;#t;#s;#n;#r;#i;#a;constructor(t){super(),this.#a=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.client,this.#s=this.#n.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=so(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){if(this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=so(this.options);s.data!==void 0&&(this.setData(s.data,{updatedAt:s.dataUpdatedAt,manual:!0}),this.#e=s)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(t,s){const r=Qr(this.state.data,t,this.options);return this.#o({data:r,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),r}setState(t,s){this.#o({type:"setState",state:t,setStateOptions:s})}cancel(t){const s=this.#r?.promise;return this.#r?.cancel(t),s?s.then(ct).catch(ct):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>xt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===dn||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Vt(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!sa(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(this.#r&&(this.#a?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}async fetch(t,s){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(c=>c.options.queryFn);l&&this.setOptions(l.options)}const r=new AbortController,n=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#a=!0,r.signal)})},a=()=>{const l=na(this.options,s),d=(()=>{const m={client:this.#n,queryKey:this.queryKey,meta:this.meta};return n(m),m})();return this.#a=!1,this.options.persister?this.options.persister(l,d,this):l(d)},i=(()=>{const l={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:a};return n(l),l})();this.options.behavior?.onFetch(i,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==i.fetchOptions?.meta)&&this.#o({type:"fetch",meta:i.fetchOptions?.meta}),this.#r=aa({initialPromise:s?.initialPromise,fn:i.fetchFn,onCancel:l=>{l instanceof Jr&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(l,c)=>{this.#o({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0});try{const l=await this.#r.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#s.config.onSuccess?.(l,this),this.#s.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof Jr){if(l.silent)return this.#r.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#o({type:"error",error:l}),this.#s.config.onError?.(l,this),this.#s.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#o(t){const s=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...la(r.data,this.options),fetchMeta:t.meta??null};case"success":const n={...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?n:void 0,n;case"error":const a=t.error;return{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=s(this.state),Ze.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:t})})}};function la(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:oa(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function so(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,r=s!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Hc=class extends Ls{constructor(t,s){super(),this.options=s,this.#e=t,this.#o=null,this.#a=Zr(),this.bindMethods(),this.setOptions(s)}#e;#t=void 0;#s=void 0;#n=void 0;#r;#i;#a;#o;#p;#h;#f;#c;#d;#l;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),ro(this.#t,this.options)?this.#u():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Xr(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Xr(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#j(),this.#t.removeObserver(this)}setOptions(t){const s=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof xt(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),s._defaulted&&!Kr(this.options,s)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const n=this.hasListeners();n&&no(this.#t,r,this.options,s)&&this.#u(),this.updateResult(),n&&(this.#t!==r||xt(this.options.enabled,this.#t)!==xt(s.enabled,this.#t)||Vt(this.options.staleTime,this.#t)!==Vt(s.staleTime,this.#t))&&this.#x();const a=this.#g();n&&(this.#t!==r||xt(this.options.enabled,this.#t)!==xt(s.enabled,this.#t)||a!==this.#l)&&this.#y(a)}getOptimisticResult(t){const s=this.#e.getQueryCache().build(this.#e,t),r=this.createResult(s,t);return qc(this,r)&&(this.#n=r,this.#i=this.options,this.#r=this.#t.state),r}getCurrentResult(){return this.#n}trackResult(t,s){return new Proxy(t,{get:(r,n)=>(this.trackProp(n),s?.(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,n))})}trackProp(t){this.#m.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=this.#e.defaultQueryOptions(t),r=this.#e.getQueryCache().build(this.#e,s);return r.fetch().then(()=>this.createResult(r,s))}fetch(t){return this.#u({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#u(t){this.#w();let s=this.#t.fetch(this.options,t);return t?.throwOnError||(s=s.catch(ct)),s}#x(){this.#v();const t=Vt(this.options.staleTime,this.#t);if(ts||this.#n.isStale||!qr(t))return;const r=sa(this.#n.dataUpdatedAt,t)+1;this.#c=qt.setTimeout(()=>{this.#n.isStale||this.updateResult()},r)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(t){this.#j(),this.#l=t,!(ts||xt(this.options.enabled,this.#t)===!1||!qr(this.#l)||this.#l===0)&&(this.#d=qt.setInterval(()=>{(this.options.refetchIntervalInBackground||un.isFocused())&&this.#u()},this.#l))}#b(){this.#x(),this.#y(this.#g())}#v(){this.#c&&(qt.clearTimeout(this.#c),this.#c=void 0)}#j(){this.#d&&(qt.clearInterval(this.#d),this.#d=void 0)}createResult(t,s){const r=this.#t,n=this.options,a=this.#n,o=this.#r,i=this.#i,c=t!==r?t.state:this.#s,{state:d}=t;let m={...d},x=!1,g;if(s._optimisticResults){const _=this.hasListeners(),k=!_&&ro(t,s),R=_&&no(t,r,s,n);(k||R)&&(m={...m,...la(d.data,t.options)}),s._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:b,errorUpdatedAt:D,status:p}=m;g=m.data;let j=!1;if(s.placeholderData!==void 0&&g===void 0&&p==="pending"){let _;a?.isPlaceholderData&&s.placeholderData===i?.placeholderData?(_=a.data,j=!0):_=typeof s.placeholderData=="function"?s.placeholderData(this.#f?.state.data,this.#f):s.placeholderData,_!==void 0&&(p="success",g=Qr(a?.data,_,s),x=!0)}if(s.select&&g!==void 0&&!j)if(a&&g===o?.data&&s.select===this.#p)g=this.#h;else try{this.#p=s.select,g=s.select(g),g=Qr(a?.data,g,s),this.#h=g,this.#o=null}catch(_){this.#o=_}this.#o&&(b=this.#o,g=this.#h,D=Date.now(),p="error");const P=m.fetchStatus==="fetching",S=p==="pending",T=p==="error",w=S&&P,y=g!==void 0,C={status:p,fetchStatus:m.fetchStatus,isPending:S,isSuccess:p==="success",isError:T,isInitialLoading:w,isLoading:w,data:g,dataUpdatedAt:m.dataUpdatedAt,error:b,errorUpdatedAt:D,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>c.dataUpdateCount||m.errorUpdateCount>c.errorUpdateCount,isFetching:P,isRefetching:P&&!S,isLoadingError:T&&!y,isPaused:m.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:T&&y,isStale:hn(t,s),refetch:this.refetch,promise:this.#a,isEnabled:xt(s.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const _=U=>{C.status==="error"?U.reject(C.error):C.data!==void 0&&U.resolve(C.data)},k=()=>{const U=this.#a=C.promise=Zr();_(U)},R=this.#a;switch(R.status){case"pending":t.queryHash===r.queryHash&&_(R);break;case"fulfilled":(C.status==="error"||C.data!==R.value)&&k();break;case"rejected":(C.status!=="error"||C.error!==R.reason)&&k();break}}return C}updateResult(){const t=this.#n,s=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#i=this.options,this.#r.data!==void 0&&(this.#f=this.#t),Kr(s,t))return;this.#n=s;const r=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,a=typeof n=="function"?n():n;if(a==="all"||!a&&!this.#m.size)return!0;const o=new Set(a??this.#m);return this.options.throwOnError&&o.add("error"),Object.keys(this.#n).some(i=>{const l=i;return this.#n[l]!==t[l]&&o.has(l)})};this.#S({listeners:r()})}#w(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const s=this.#t;this.#t=t,this.#s=t.state,this.hasListeners()&&(s?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#S(t){Ze.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function Gc(t,s){return xt(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function ro(t,s){return Gc(t,s)||t.state.data!==void 0&&Xr(t,s,s.refetchOnMount)}function Xr(t,s,r){if(xt(s.enabled,t)!==!1&&Vt(s.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&hn(t,s)}return!1}function no(t,s,r,n){return(t!==s||xt(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&hn(t,r)}function hn(t,s){return xt(s.enabled,t)!==!1&&t.isStaleByTime(Vt(s.staleTime,t))}function qc(t,s){return!Kr(t.getCurrentResult(),s)}function oo(t){return{onFetch:(s,r)=>{const n=s.options,a=s.fetchOptions?.meta?.fetchMore?.direction,o=s.state.data?.pages||[],i=s.state.data?.pageParams||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let m=!1;const x=D=>{Object.defineProperty(D,"signal",{enumerable:!0,get:()=>(s.signal.aborted?m=!0:s.signal.addEventListener("abort",()=>{m=!0}),s.signal)})},g=na(s.options,s.fetchOptions),b=async(D,p,j)=>{if(m)return Promise.reject();if(p==null&&D.pages.length)return Promise.resolve(D);const S=(()=>{const f={client:s.client,queryKey:s.queryKey,pageParam:p,direction:j?"backward":"forward",meta:s.options.meta};return x(f),f})(),T=await g(S),{maxPages:w}=s.options,y=j?Nc:Fc;return{pages:y(D.pages,T,w),pageParams:y(D.pageParams,p,w)}};if(a&&o.length){const D=a==="backward",p=D?Kc:ao,j={pages:o,pageParams:i},P=p(n,j);l=await b(j,P,D)}else{const D=t??o.length;do{const p=c===0?i[0]??n.initialPageParam:ao(n,l);if(c>0&&p==null)break;l=await b(l,p),c++}while(c<D)}return l};s.options.persister?s.fetchFn=()=>s.options.persister?.(d,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},r):s.fetchFn=d}}}function ao(t,{pages:s,pageParams:r}){const n=s.length-1;return s.length>0?t.getNextPageParam(s[n],s,r[n],r):void 0}function Kc(t,{pages:s,pageParams:r}){return s.length>0?t.getPreviousPageParam?.(s[0],s,r[0],r):void 0}var Yc=class extends ia{#e;#t;#s;#n;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#s=t.mutationCache,this.#t=[],this.state=t.state||Qc(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(s=>s!==t),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#s.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){const s=()=>{this.#r({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#n=aa({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(o,i)=>{this.#r({type:"failed",failureCount:o,error:i})},onPause:()=>{this.#r({type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#s.canRun(this)});const n=this.state.status==="pending",a=!this.#n.canStart();try{if(n)s();else{this.#r({type:"pending",variables:t,isPaused:a}),await this.#s.config.onMutate?.(t,this,r);const i=await this.options.onMutate?.(t,r);i!==this.state.context&&this.#r({type:"pending",context:i,variables:t,isPaused:a})}const o=await this.#n.start();return await this.#s.config.onSuccess?.(o,t,this.state.context,this,r),await this.options.onSuccess?.(o,t,this.state.context,r),await this.#s.config.onSettled?.(o,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(o,null,t,this.state.context,r),this.#r({type:"success",data:o}),o}catch(o){try{throw await this.#s.config.onError?.(o,t,this.state.context,this,r),await this.options.onError?.(o,t,this.state.context,r),await this.#s.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,o,t,this.state.context,r),o}finally{this.#r({type:"error",error:o})}}finally{this.#s.runNext(this)}}#r(t){const s=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),Ze.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(t)}),this.#s.notify({mutation:this,type:"updated",action:t})})}};function Qc(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Zc=class extends Ls{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#s=0}#e;#t;#s;build(t,s,r){const n=new Yc({client:t,mutationCache:this,mutationId:++this.#s,options:t.defaultMutationOptions(s),state:r});return this.add(n),n}add(t){this.#e.add(t);const s=$s(t);if(typeof s=="string"){const r=this.#t.get(s);r?r.push(t):this.#t.set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const s=$s(t);if(typeof s=="string"){const r=this.#t.get(s);if(r)if(r.length>1){const n=r.indexOf(t);n!==-1&&r.splice(n,1)}else r[0]===t&&this.#t.delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=$s(t);if(typeof s=="string"){const n=this.#t.get(s)?.find(a=>a.state.status==="pending");return!n||n===t}else return!0}runNext(t){const s=$s(t);return typeof s=="string"?this.#t.get(s)?.find(n=>n!==t&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ze.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const s={exact:!0,...t};return this.getAll().find(r=>Xn(s,r))}findAll(t={}){return this.getAll().filter(s=>Xn(t,s))}notify(t){Ze.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return Ze.batch(()=>Promise.all(t.map(s=>s.continue().catch(ct))))}};function $s(t){return t.options.scope?.id}var Jc=class extends Ls{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,s,r){const n=s.queryKey,a=s.queryHash??cn(n,s);let o=this.get(a);return o||(o=new zc({client:t,queryKey:n,queryHash:a,options:t.defaultQueryOptions(s),state:r,defaultOptions:t.getQueryDefaults(n)}),this.add(o)),o}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=this.#e.get(t.queryHash);s&&(t.destroy(),s===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ze.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const s={exact:!0,...t};return this.getAll().find(r=>Jn(s,r))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(r=>Jn(t,r)):s}notify(t){Ze.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){Ze.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ze.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Xc=class{#e;#t;#s;#n;#r;#i;#a;#o;constructor(t={}){this.#e=t.queryCache||new Jc,this.#t=t.mutationCache||new Zc,this.#s=t.defaultOptions||{},this.#n=new Map,this.#r=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#a=un.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=Js.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#a?.(),this.#a=void 0,this.#o?.(),this.#o=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const s=this.defaultQueryOptions({queryKey:t});return this.#e.get(s.queryHash)?.state.data}ensureQueryData(t){const s=this.defaultQueryOptions(t),r=this.#e.build(this,s),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(Vt(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(n))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:s,state:r})=>{const n=r.data;return[s,n]})}setQueryData(t,s,r){const n=this.defaultQueryOptions({queryKey:t}),o=this.#e.get(n.queryHash)?.state.data,i=Rc(s,o);if(i!==void 0)return this.#e.build(this,n).setData(i,{...r,manual:!0})}setQueriesData(t,s,r){return Ze.batch(()=>this.#e.findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,s,r)]))}getQueryState(t){const s=this.defaultQueryOptions({queryKey:t});return this.#e.get(s.queryHash)?.state}removeQueries(t){const s=this.#e;Ze.batch(()=>{s.findAll(t).forEach(r=>{s.remove(r)})})}resetQueries(t,s){const r=this.#e;return Ze.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},s)))}cancelQueries(t,s={}){const r={revert:!0,...s},n=Ze.batch(()=>this.#e.findAll(t).map(a=>a.cancel(r)));return Promise.all(n).then(ct).catch(ct)}invalidateQueries(t,s={}){return Ze.batch(()=>(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},s)))}refetchQueries(t,s={}){const r={...s,cancelRefetch:s.cancelRefetch??!0},n=Ze.batch(()=>this.#e.findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let o=a.fetch(void 0,r);return r.throwOnError||(o=o.catch(ct)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(ct)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const r=this.#e.build(this,s);return r.isStaleByTime(Vt(s.staleTime,r))?r.fetch(s):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ct).catch(ct)}fetchInfiniteQuery(t){return t.behavior=oo(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ct).catch(ct)}ensureInfiniteQueryData(t){return t.behavior=oo(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Js.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(t){this.#s=t}setQueryDefaults(t,s){this.#n.set(Ms(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...this.#n.values()],r={};return s.forEach(n=>{Os(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,s){this.#r.set(Ms(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...this.#r.values()],r={};return s.forEach(n=>{Os(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const s={...this.#s.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=cn(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===dn&&(s.enabled=!1),s}defaultMutationOptions(t){return t?._defaulted?t:{...this.#s.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},ca=h.createContext(void 0),ed=t=>{const s=h.useContext(ca);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},td=({client:t,children:s})=>(h.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(ca.Provider,{value:t,children:s})),da=h.createContext(!1),sd=()=>h.useContext(da);da.Provider;function rd(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var nd=h.createContext(rd()),od=()=>h.useContext(nd),ad=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},id=t=>{h.useEffect(()=>{t.clearReset()},[t])},ld=({result:t,errorResetBoundary:s,throwOnError:r,query:n,suspense:a})=>t.isError&&!s.isReset()&&!t.isFetching&&n&&(a&&t.data===void 0||Lc(r,[t.error,n])),cd=t=>{if(t.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},dd=(t,s)=>t.isLoading&&t.isFetching&&!s,ud=(t,s)=>t?.suspense&&s.isPending,io=(t,s,r)=>s.fetchOptimistic(t).catch(()=>{r.clearReset()});function hd(t,s,r){const n=sd(),a=od(),o=ed(),i=o.defaultQueryOptions(t);o.getDefaultOptions().queries?._experimental_beforeQuery?.(i),i._optimisticResults=n?"isRestoring":"optimistic",cd(i),ad(i,a),id(a);const l=!o.getQueryCache().get(i.queryHash),[c]=h.useState(()=>new s(o,i)),d=c.getOptimisticResult(i),m=!n&&t.subscribed!==!1;if(h.useSyncExternalStore(h.useCallback(x=>{const g=m?c.subscribe(Ze.batchCalls(x)):ct;return c.updateResult(),g},[c,m]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),h.useEffect(()=>{c.setOptions(i)},[i,c]),ud(i,d))throw io(i,c,a);if(ld({result:d,errorResetBoundary:a,throwOnError:i.throwOnError,query:o.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw d.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(i,d),i.experimental_prefetchInRender&&!ts&&dd(d,n)&&(l?io(i,c,a):o.getQueryCache().get(i.queryHash)?.promise)?.catch(ct).finally(()=>{c.updateResult()}),i.notifyOnChangeProps?d:c.trackResult(d)}function hs(t,s){return hd(t,Hc)}const Ot={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"http://localhost:3001",VITE_AWS_REGION:"us-east-1",VITE_BUILD_TIME:"2026-01-05T13:27:30.749Z",VITE_COGNITO_CLIENT_ID:"",VITE_COGNITO_DOMAIN:"",VITE_COGNITO_REDIRECT_SIGN_IN:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",VITE_COGNITO_REDIRECT_SIGN_OUT:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",VITE_COGNITO_USER_POOL_ID:"",VITE_ENABLE_DEBUG:"false",VITE_ENABLE_MOCK_DATA:"false",VITE_ENVIRONMENT:"production",VITE_SERVERLESS:"true",VITE_VERSION:"1.0.0-dev"},lr=()=>{let t=typeof window<"u"&&window.__CONFIG__&&window.__CONFIG__.API_URL?window.__CONFIG__.API_URL:null,s=t||Ot&&"http://localhost:3001";if(!s&&(Ot&&!1))s="/";else if(!s&&typeof window<"u"){const{hostname:i,protocol:l}=window.location;i==="localhost"||i==="127.0.0.1"?s="http://localhost:3001":s=`${`${l}//${i}`}:3001`}s||(s="/"),console.log(" [API CONFIG] URL Resolution:",{runtimeApiUrl:t,envApiUrl:Ot&&"http://localhost:3001",finalApiUrl:s,windowConfig:typeof window<"u"?window.__CONFIG__:"undefined",allEnvVars:Ot||{}});const n=Ot&&"production"||"development",a=!1,o=!!Ot;return{baseURL:s,isServerless:!!s&&!s.includes("localhost"),apiUrl:s,isConfigured:!!s&&!s.includes("localhost"),environment:n,isDevelopment:a,isProduction:o,baseUrl:Ot&&"/",allEnvVars:Ot||{}}};let Ve=lr();(!Ve.apiUrl||Ve.apiUrl.includes("localhost"))&&console.warn("[API CONFIG] Using fallback API URL:",Ve.baseURL+`
Set window.__CONFIG__.API_URL at runtime or VITE_API_URL at build time to override.`);let ke=Fi.create({baseURL:Ve.baseURL,timeout:Ve.isServerless?45e3:3e4,headers:{"Content-Type":"application/json",Authorization:"Bearer dev-bypass-token"}});try{ke&&ke.interceptors&&ke.interceptors.request.use(t=>(t.metadata={startTime:new Date},t),t=>Promise.reject(t))}catch{}try{ke&&ke.interceptors&&ke.interceptors.response.use(t=>{if(t.config.metadata){const s=new Date-t.config.metadata.startTime;s>1e4&&console.warn(" Slow API request detected:",{url:t.config.url,method:t.config.method,duration:`${s}ms`})}return t},t=>{let s="An unexpected error occurred";t.code==="ECONNABORTED"?s="Request timed out. The server may be experiencing high load. Please try again.":t.code==="ERR_NETWORK"?s="Network connection failed. Please check your internet connection.":t.code==="ENOTFOUND"?s="Server could not be reached. Please try again later.":t.code==="CERT_UNTRUSTED"?s="Security certificate error. Please contact support.":t.response?.status===401?s="Authentication failed. Please sign in again.":t.response?.status===403?s="Access denied. You do not have permission for this resource.":t.response?.status===404?s="The requested resource was not found. Please check your request and try again.":t.response?.status===429?s="Too many requests. Please wait a moment and try again.":t.response?.status===500?s="Server error occurred. Our team has been notified. Please try again later.":t.response?.status===502?s="Bad gateway error. The service may be temporarily unavailable.":t.response?.status===503?s="Service temporarily unavailable. Please try again in a few minutes.":navigator.onLine||(s="No internet connection. Please check your network and try again."),t.userMessage=s;const r={url:t.config?.url,method:t.config?.method,status:t.response?.status,statusText:t.response?.statusText,message:t.message,code:t.code,userMessage:s,stack:t.stack?.split(`
`)[0]};return t.response?.status>=500?console.error(" Server Error:",r):t.response?.status>=400?console.warn(" Client Error:",r):t.code?console.error(" Network Error:",r):console.error(" Unknown Error:",r),Promise.reject(t)})}catch{}const fd=async()=>{try{const t=await ke.get("/api/portfolio/metrics"),s=mn(t);return console.log(" Portfolio Data Loaded:",s),s?{data:s,success:t.data?.success??!0}:{data:null,success:!1,error:"No portfolio data available"}}catch(t){return console.error("Error fetching portfolio data:",t),{data:null,success:!1,error:t?.response?.data?.error||t?.message||"Failed to fetch portfolio data"}}},md=()=>Ve.baseURL;try{ke.interceptors.request.use(t=>{const s=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.port==="5173",r=Ve&&Ve.baseURL&&(Ve.baseURL.startsWith("http://localhost:")||Ve.baseURL.startsWith("https://"));if(s&&!r){console.log(" [API] Blocking API call - no server configured:",{baseURL:Ve.baseURL,hasValidApiServer:r});const a=new Error("API calls disabled - no server configured");return a.code="NO_SERVER_CONFIGURED",Promise.reject(a)}console.log(" [API] Allowing API call:",{isDevelopment:s,hasValidApiServer:r,baseURL:Ve.baseURL,url:t.url}),t.url&&t.url.startsWith("/api/api")&&(t.url=t.url.replace("/api/api","/api"));try{let a=null;typeof window<"u"&&(a=localStorage.getItem("authToken")||sessionStorage.getItem("authToken")||localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")),a&&(t.headers.Authorization=`Bearer ${a}`)}catch(a){console.log("Could not retrieve auth token:",a.message)}const n=`${t.baseURL||ke.defaults.baseURL}${t.url}`;return console.log("[API REQUEST FINAL URL]",n,t),t.isServerless&&(t.headers["X-Lambda-Request"]="true",t.headers["X-Request-Time"]=new Date().toISOString()),t},t=>(console.error("API Request Error:",{message:t?.message||"Unknown error",status:t.response?.status,statusText:t.response?.statusText}),Promise.reject(t)))}catch{}try{ke.interceptors.response.use(t=>{const s=`${t.config.baseURL||ke.defaults.baseURL}${t.config.url}`;return console.log("[API SUCCESS]",t.config.method?.toUpperCase(),s,{status:t?.status,statusText:t?.statusText,dataSize:t?.data?Array.isArray(t?.data)?t.data?.length||0:Object.keys(t?.data).length:0}),t},async t=>(t?.code==="DEV_MODE_BLOCKED",Promise.reject(t)))}catch{}function fn(t,s=""){let r="An unexpected error occurred";return t?.response?.data?.error?r=t.response?.data.error:t?.response?.data?.message?r=t.response?.data.message:t?.message&&(r=t.message),s?`${s}: ${r}`:r}function mn(t){if(!t||!t.data)return null;const s=t.data;return s.items!==void 0&&s.pagination!==void 0?{items:s.items,pagination:s.pagination}:s.data!==void 0&&s.success!==void 0?s.data:(s.success!==void 0,s)}console.log(" [API STARTUP] Initializing API configuration...");console.log(" [API CONFIG]",lr());console.log(" [AXIOS DEFAULT BASE URL]",ke?.defaults?.baseURL||"undefined");const pd=async(t={})=>{try{const s=new URLSearchParams;Object.entries(t).forEach(([a,o])=>{o!=null&&o!==""&&s.append(a,o)});const r=await ke.get(`/api/market/naaim?${s.toString()}`);return{data:mn(r),success:r.data?.success??!0,timestamp:r.data?.timestamp}}catch(s){return fn(s,"get NAAIM data"),{data:null}}},xd=async(t={})=>{try{const s=new URLSearchParams;Object.entries(t).forEach(([a,o])=>{o!=null&&o!==""&&s.append(a,o)});const r=await ke.get(`/api/market/fear-greed?${s.toString()}`);return{data:mn(r),success:r.data?.success??!0,timestamp:r.data?.timestamp}}catch(s){return fn(s,"get fear & greed data"),{data:null}}},gd=async(t=null)=>{try{console.log("Testing API connection..."),console.log("Current API URL:",Ve.baseURL),console.log("Custom URL:",t),console.log("Environment:","production"),console.log("VITE_API_URL:","http://localhost:3001");const s=t||Ve.baseURL,r=await ke.get("/api/health?quick=true",{baseURL:s,timeout:7e3});return{success:!0,apiUrl:s,status:r?.status,data:r?.data,message:"API connection successful"}}catch(s){return console.error("API connection test failed:",{message:s?.message||"Unknown error",status:s.response?.status,statusText:s.response?.statusText}),{success:!1,apiUrl:t||Ve.baseURL,error:s.message,details:{hasResponse:!!s.response,status:s.response?.status,statusText:s.response?.statusText,responseData:s.response?.data,code:s.code,isNetworkError:!s.response,configUrl:s.config?.url,fullUrl:(t||Ve.baseURL)+"/api/health?quick=true"}}}},yd=()=>({currentApiUrl:Ve.baseURL,axiosDefaultBaseUrl:ke.defaults.baseURL,viteApiUrl:"http://localhost:3001",isConfigured:Ve.isConfigured,environment:"production",urlsMatch:Ve.baseURL===ke.defaults.baseURL,timestamp:new Date().toISOString()}),bd=async(t="")=>{let s=!1,r=`/api/health${t}`,n=`/${t}`;try{const a=await ke.get(r,{baseURL:Ve.baseURL});return console.log("Health check response:",a?.data),{data:a?.data,healthy:!0,endpoint:r,fallback:!1,timestamp:new Date().toISOString()}}catch{console.warn("Health check failed for /api/health, trying root / endpoint..."),s=!0;try{const o=await ke.get(n,{baseURL:Ve.baseURL});return console.log("Root endpoint health check response:",o?.data),{data:o?.data,healthy:!0,endpoint:n,fallback:!0,timestamp:new Date().toISOString()}}catch(o){return console.error("Error in health check (both endpoints failed):",o),{data:null,error:fn(o,"health check (both endpoints)"),healthy:!1,endpoint:s?n:r,fallback:s,timestamp:new Date().toISOString()}}}},vd=()=>{const[t,s]=h.useState(0),[r,n]=h.useState(!0),[a,o]=h.useState(null),[i,l]=h.useState([]),[c,d]=h.useState([]),[m,x]=h.useState({}),[g,b]=h.useState({}),[D,p]=h.useState(""),[j,P]=h.useState(""),[S,T]=h.useState(0),[w,y]=h.useState(1),[f,C]=h.useState("composite_metric"),[_,k]=h.useState("desc"),[R,U]=h.useState(1),[z,G]=h.useState(1);h.useEffect(()=>{$()},[R,D,j,S,w,f,_]),h.useEffect(()=>{t===2&&(L(),se())},[t]);const $=async()=>{try{n(!0);const B=new URLSearchParams({limit:"50",offset:"0",search:D,sortBy:f,sortOrder:_}),H=await ke.get(`/api/scores/stockscores?${B}`);if(!H||!H.data)throw new Error("No data received from scores API");const q=H.data?.items||[];l(q),G(Math.ceil((H.data?.pagination?.total||q.length)/50)||1),o(null)}catch(B){o(B.message)}finally{n(!1)}},L=async()=>{try{const B=await ke.get("/api/scores/stockscores?limit=50&sortBy=composite_score");if(!B||!B.data)throw new Error("No data received from top stocks API");const H=B.data?.items||[],q={composite:H.filter(W=>W.composite_score!==null&&W.composite_score!==void 0).sort((W,me)=>me.composite_score-W.composite_score).slice(0,10).map(W=>({...W,companyName:W.company_name,categoryMetric:W.composite_score,sector:W.sector||"N/A"})),quality:H.filter(W=>W.quality_score!==null&&W.quality_score!==void 0).sort((W,me)=>me.quality_score-W.quality_score).slice(0,10).map(W=>({...W,companyName:W.company_name,categoryMetric:W.quality_score,sector:W.sector||"N/A"})),value:H.filter(W=>W.value_score!==null&&W.value_score!==void 0).sort((W,me)=>me.value_score-W.value_score).slice(0,10).map(W=>({...W,companyName:W.company_name,categoryMetric:W.value_score,sector:W.sector||"N/A"}))};x(q)}catch(B){o(B.message)}},se=async()=>{try{const B=await ke.get("/api/scores/stockscores?limit=500&sortBy=composite_score");if(!B||!B.data)throw new Error("No data received from bottom stocks API");const H=B.data?.items||[];if(!H||H.length===0){console.warn("No stocks returned from API"),b({});return}const q={composite:H.filter(W=>W.composite_score!==null&&W.composite_score!==void 0).sort((W,me)=>W.composite_score-me.composite_score).slice(0,10).map(W=>({...W,companyName:W.company_name||"N/A",categoryMetric:W.composite_score,sector:W.sector||"N/A"})),quality:H.filter(W=>W.quality_score!==null&&W.quality_score!==void 0).sort((W,me)=>W.quality_score-me.quality_score).slice(0,10).map(W=>({...W,companyName:W.company_name||"N/A",categoryMetric:W.quality_score,sector:W.sector||"N/A"})),value:H.filter(W=>W.value_score!==null&&W.value_score!==void 0).sort((W,me)=>W.value_score-me.value_score).slice(0,10).map(W=>({...W,companyName:W.company_name||"N/A",categoryMetric:W.value_score,sector:W.sector||"N/A"})),growth:H.filter(W=>W.growth_score!==null&&W.growth_score!==void 0).sort((W,me)=>W.growth_score-me.growth_score).slice(0,10).map(W=>({...W,companyName:W.company_name||"N/A",categoryMetric:W.growth_score,sector:W.sector||"N/A"})),momentum:H.filter(W=>W.momentum_score!==null&&W.momentum_score!==void 0).sort((W,me)=>W.momentum_score-me.momentum_score).slice(0,10).map(W=>({...W,companyName:W.company_name||"N/A",categoryMetric:W.momentum_score,sector:W.sector||"N/A"}))};b(q)}catch(B){console.error("Error fetching bottom stocks:",B),o(B.message),b({})}},ie=B=>B==null?"#9e9e9e":B>=.8?"#4caf50":B>=.7?"#8bc34a":B>=.6?"#ffeb3b":B>=.5?"#ff9800":"#f44336",te=B=>B!=null?B.toFixed(3):"N/A",V=(B,H)=>e.jsx(Ue,{label:`${H}: ${B.toFixed(3)}`,size:"small",style:{backgroundColor:ie(B),color:B>=.6?"#000":"#fff",fontWeight:"bold",margin:"2px"}}),O=()=>e.jsx(dt,{component:He,sx:{mt:3},children:e.jsxs(ut,{children:[e.jsx(ht,{children:e.jsxs(Te,{children:[e.jsx(A,{children:e.jsx("strong",{children:"Symbol"})}),e.jsx(A,{children:e.jsx("strong",{children:"Company"})}),e.jsx(A,{children:e.jsx("strong",{children:"Sector"})}),e.jsx(A,{align:"center",children:e.jsx("strong",{children:"Composite Metric"})}),e.jsx(A,{align:"center",children:e.jsx("strong",{children:"Quality"})}),e.jsx(A,{align:"center",children:e.jsx("strong",{children:"Value"})}),e.jsx(A,{align:"center",children:e.jsx("strong",{children:"Growth"})}),e.jsx(A,{children:e.jsx("strong",{children:"Price"})}),e.jsx(A,{children:e.jsx("strong",{children:"Market Cap"})})]})}),e.jsx(ft,{children:(i||[]).map((B,H)=>e.jsxs(Te,{hover:!0,children:[e.jsx(A,{children:e.jsx(u,{variant:"subtitle2",sx:{fontWeight:"bold",color:"#1976d2"},children:B.symbol})}),e.jsx(A,{children:e.jsxs(u,{variant:"body2",children:[B.companyName?.substring(0,30),B.companyName?.length>30?"...":""]})}),e.jsx(A,{children:e.jsx(Ue,{label:B.sector,size:"small",variant:"outlined"})}),e.jsx(A,{align:"center",children:e.jsxs(E,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx(u,{variant:"h6",sx:{color:ie(B.returnOnEquity),fontWeight:"bold"},children:te(B.returnOnEquity)}),e.jsx(Ks,{title:`PE: ${B.pe||"N/A"}`,children:e.jsx(We,{size:"small",children:e.jsx(Io,{fontSize:"small"})})})]})}),e.jsx(A,{align:"center",children:e.jsx(u,{sx:{color:ie(B.profitMargin)},children:te(B.profitMargin)})}),e.jsx(A,{align:"center",children:e.jsx(u,{sx:{color:ie(B.debtToEquity)},children:te(B.debtToEquity)})}),e.jsx(A,{align:"center",children:e.jsx(u,{sx:{color:ie(B.returnOnAssets)},children:te(B.returnOnAssets)})}),e.jsxs(A,{children:["$",B.currentPrice?.toFixed(2)||"N/A"]}),e.jsx(A,{children:B.marketCap?`$${(B.marketCap/1e9).toFixed(1)}B`:"N/A"})]},B.symbol))})]})}),fe=()=>e.jsxs(e.Fragment,{children:[e.jsxs(E,{sx:{mb:4},children:[e.jsxs(u,{variant:"h5",sx:{fontWeight:700,mb:3},children:[e.jsx(Qs,{sx:{mr:1,verticalAlign:"middle"}}),"Top Performers by Category"]}),e.jsx(v,{container:!0,spacing:3,children:Object.entries(m).map(([B,H])=>e.jsx(v,{item:!0,xs:12,md:6,children:e.jsx(Q,{children:e.jsxs(J,{children:[e.jsxs(u,{variant:"h6",gutterBottom:!0,sx:{textTransform:"capitalize",color:"#059669"},children:["Top ",B==="composite"?"Overall":B," Stocks"]}),e.jsx(E,{sx:{maxHeight:400,overflow:"auto"},children:H.slice(0,10).map((q,W)=>e.jsxs(E,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:1,borderBottom:W<9?"1px solid #eee":"none"},children:[e.jsxs(E,{children:[e.jsxs(u,{variant:"subtitle2",sx:{fontWeight:"bold"},children:[W+1,". ",q.symbol]}),e.jsxs(u,{variant:"caption",color:"textSecondary",children:[q.companyName?.substring(0,25),q.companyName?.length>25?"...":""]})]}),e.jsxs(E,{sx:{textAlign:"right"},children:[e.jsx(u,{variant:"body2",sx:{color:ie(q.categoryMetric),fontWeight:"bold"},children:q.categoryMetric.toFixed(3)}),e.jsx(u,{variant:"caption",color:"textSecondary",children:q.sector})]})]},q.symbol))})]})})},B))})]}),g&&Object.keys(g).length>0&&e.jsxs(E,{sx:{mt:6},children:[e.jsxs(u,{variant:"h5",sx:{fontWeight:700,mb:3},children:[e.jsx(Ao,{sx:{mr:1,verticalAlign:"middle"}}),"Bottom Performers by Category"]}),e.jsx(v,{container:!0,spacing:3,children:Object.entries(g).map(([B,H])=>H&&H.length>0&&e.jsx(v,{item:!0,xs:12,md:6,children:e.jsx(Q,{sx:{backgroundColor:"#fef2f2"},children:e.jsxs(J,{children:[e.jsxs(u,{variant:"h6",gutterBottom:!0,sx:{textTransform:"capitalize",color:"#dc2626"},children:["Bottom ",B==="composite"?"Overall":B," Stocks"]}),e.jsx(E,{sx:{maxHeight:400,overflow:"auto"},children:H.map((q,W)=>e.jsxs(E,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:1,borderBottom:W<H.length-1?"1px solid #fee2e2":"none"},children:[e.jsxs(E,{children:[e.jsxs(u,{variant:"subtitle2",sx:{fontWeight:"bold"},children:[W+1,". ",q.symbol]}),e.jsxs(u,{variant:"caption",color:"textSecondary",children:[q.companyName?.substring(0,25),q.companyName?.length>25?"...":""]})]}),e.jsxs(E,{sx:{textAlign:"right"},children:[e.jsx(u,{variant:"body2",sx:{color:q.categoryMetric<=40?"#dc2626":"#f97316",fontWeight:"bold"},children:q.categoryMetric.toFixed(1)}),e.jsx(u,{variant:"caption",color:"textSecondary",children:q.sector})]})]},`${q.symbol}-${W}`))})]})})},`bottom-${B}`))})]})]});return a?e.jsx(ot,{maxWidth:"lg",sx:{mt:4},children:e.jsxs(je,{severity:"error",children:["Error loading metrics: ",a]})}):e.jsxs(ot,{maxWidth:"lg",sx:{mt:4},children:[e.jsxs(E,{sx:{mb:4},children:[e.jsx(u,{variant:"h3",component:"h1",gutterBottom:!0,children:"Institutional-Grade Stock Metrics"}),e.jsx(u,{variant:"subtitle1",color:"textSecondary",children:"Advanced multi-factor analysis based on academic research and institutional methodology"})]}),e.jsx(E,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:e.jsxs(tn,{value:t,onChange:(B,H)=>s(H),children:[e.jsx(Pt,{value:0,label:"Stock Metrics"}),e.jsx(Pt,{value:2,label:"Top & Bottom Performers"})]})}),t===0&&e.jsx(He,{sx:{p:3,mb:3},children:e.jsxs(v,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(v,{item:!0,xs:12,sm:3,children:e.jsx(ve,{fullWidth:!0,label:"Search Symbol/Company",value:D,onChange:B=>p(B.target.value),size:"small"})}),e.jsx(v,{item:!0,xs:12,sm:2,children:e.jsxs(tt,{fullWidth:!0,size:"small",children:[e.jsx(st,{children:"Sector"}),e.jsxs(rt,{value:j,label:"Sector",onChange:B=>P(B.target.value),children:[e.jsx(re,{value:"",children:"All Sectors"}),e.jsx(re,{value:"Technology",children:"Technology"}),e.jsx(re,{value:"Healthcare",children:"Healthcare"}),e.jsx(re,{value:"Financial Services",children:"Financial Services"}),e.jsx(re,{value:"Consumer Cyclical",children:"Consumer Cyclical"}),e.jsx(re,{value:"Industrials",children:"Industrials"}),e.jsx(re,{value:"Communication Services",children:"Communication Services"}),e.jsx(re,{value:"Consumer Defensive",children:"Consumer Defensive"}),e.jsx(re,{value:"Energy",children:"Energy"}),e.jsx(re,{value:"Utilities",children:"Utilities"}),e.jsx(re,{value:"Real Estate",children:"Real Estate"}),e.jsx(re,{value:"Basic Materials",children:"Basic Materials"})]})]})}),e.jsx(v,{item:!0,xs:12,sm:2,children:e.jsx(ve,{fullWidth:!0,label:"Min Metric",type:"number",value:S,onChange:B=>T(Number(B.target.value)),size:"small",inputProps:{min:0,max:1,step:.01}})}),e.jsx(v,{item:!0,xs:12,sm:2,children:e.jsx(ve,{fullWidth:!0,label:"Max Metric",type:"number",value:w,onChange:B=>y(Number(B.target.value)),size:"small",inputProps:{min:0,max:1,step:.01}})}),e.jsx(v,{item:!0,xs:12,sm:2,children:e.jsxs(tt,{fullWidth:!0,size:"small",children:[e.jsx(st,{children:"Sort By"}),e.jsxs(rt,{value:f,label:"Sort By",onChange:B=>C(B.target.value),children:[e.jsx(re,{value:"composite_metric",children:"Composite Metric"}),e.jsx(re,{value:"quality_metric",children:"Quality Metric"}),e.jsx(re,{value:"value_metric",children:"Value Metric"}),e.jsx(re,{value:"market_cap",children:"Market Cap"}),e.jsx(re,{value:"symbol",children:"Symbol"})]})]})})]})}),r?e.jsx(E,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(Je,{})}):e.jsxs(e.Fragment,{children:[t===0&&e.jsx(O,{}),t===2&&e.jsx(fe,{})]}),t===0&&z>1&&e.jsx(E,{sx:{display:"flex",justifyContent:"center",mt:3},children:e.jsxs(u,{variant:"body2",sx:{mt:1},children:["Page ",R," of ",z]})}),e.jsxs(He,{sx:{p:2,mt:4,backgroundColor:"#f5f5f5"},children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"Metrics Methodology"}),e.jsxs(v,{container:!0,spacing:2,children:[e.jsxs(v,{item:!0,xs:12,sm:6,md:6,children:[e.jsx(u,{variant:"subtitle2",children:"Quality Metric"}),e.jsx(u,{variant:"caption",children:"Financial statement quality, balance sheet strength, profitability, management effectiveness using Piotroski F-Score, Altman Z-Score analysis"})]}),e.jsxs(v,{item:!0,xs:12,sm:6,md:6,children:[e.jsx(u,{variant:"subtitle2",children:"Value Metric"}),e.jsx(u,{variant:"caption",children:"Traditional multiples (P/E, P/B, EV/EBITDA), DCF intrinsic value, dividend discount model, and peer comparison analysis"})]}),e.jsxs(v,{item:!0,xs:12,sm:6,md:6,children:[e.jsx(u,{variant:"subtitle2",children:"Growth Metric"}),e.jsx(u,{variant:"caption",children:"Revenue growth analysis, earnings growth quality, fundamental growth drivers, and market expansion potential based on academic research"})]})]}),e.jsxs(E,{sx:{mt:2},children:[e.jsx(u,{variant:"subtitle2",gutterBottom:!0,children:"Metric Ranges (0-1 Scale):"}),e.jsxs(E,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[V(.9,"Excellent (0.8-1.0)"),V(.75,"Good (0.7-0.79)"),V(.65,"Fair (0.6-0.69)"),V(.55,"Below Average (0.5-0.59)"),V(.4,"Poor (0.0-0.49)")]})]})]})]})},Et={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"http://localhost:3001",VITE_AWS_REGION:"us-east-1",VITE_BUILD_TIME:"2026-01-05T13:27:30.749Z",VITE_COGNITO_CLIENT_ID:"",VITE_COGNITO_DOMAIN:"",VITE_COGNITO_REDIRECT_SIGN_IN:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",VITE_COGNITO_REDIRECT_SIGN_OUT:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",VITE_COGNITO_USER_POOL_ID:"",VITE_ENABLE_DEBUG:"false",VITE_ENABLE_MOCK_DATA:"false",VITE_ENVIRONMENT:"production",VITE_SERVERLESS:"true",VITE_VERSION:"1.0.0-dev"};var Rr={};function Bs(t){return t&&typeof t=="object"&&!Array.isArray(t)}function jd(){const[t,s]=h.useState({}),[r,n]=h.useState({}),[a,o]=h.useState(!1),[i,l]=h.useState(null),[c,d]=h.useState(!1),m=h.useMemo(()=>{try{return yd()}catch(V){return console.error("Error getting diagnostic info:",V),{}}},[]);h.useMemo(()=>{try{return lr()}catch(V){return console.error("Error getting API config:",V),{}}},[]),h.useMemo(()=>{try{return md()}catch(V){return console.error("Error getting current base URL:",V),""}},[]),h.useEffect(()=>{const V=O=>{console.error("ServiceHealth component error:",O.error),l(O.error.message)};return window.addEventListener("error",V),()=>window.removeEventListener("error",V)},[]);const{data:x,isLoading:g,error:b,refetch:D}=hs({queryKey:["ecsTasks"],queryFn:async()=>{try{const V="https://qda42av7je.execute-api.us-east-1.amazonaws.com/dev",O=new AbortController,fe=setTimeout(()=>O.abort(),5e3),B=await fetch(`${V}/api/health/ecs-tasks`,{method:"GET",headers:{"Content-Type":"application/json"},signal:O.signal});if(clearTimeout(fe),!B.ok)return{error:!0,message:`HTTP ${B.status}: ${B.statusText}`,timestamp:new Date().toISOString()};const H=await B.json();return H?.success,H}catch(V){return console.warn("ECS tasks check failed (non-critical):",V?.message),{error:!0,message:V?.message||"ECS tasks endpoint unavailable",timestamp:new Date().toISOString(),isOptional:!0}}},refetchInterval:6e4,retry:0,staleTime:3e4,enabled:!0,onError:V=>{console.error("React Query ECS tasks error:",V)}}),{data:p,isLoading:j,error:P,refetch:S}=hs({queryKey:["databaseHealth"],queryFn:async()=>{try{const O=(await ke.get("/api/health/database",{timeout:6e4,validateStatus:B=>B<500}))?.data,fe=O?.data||O;if(fe&&typeof fe=="object")return fe;throw new Error("Invalid response structure from database health endpoint")}catch(V){return console.error("Database health check failed:",V),console.error("Error details:",{message:V.message,response:V.response?.data,status:V.response?.status}),{error:!0,message:V.message||"Unknown database health error",details:V.response?.data||V.response?.status||"No additional details",timestamp:new Date().toISOString(),database:{status:"error",currentTime:new Date().toISOString(),postgresVersion:"unknown",tables:{},summary:{total_tables:0,healthy_tables:0,stale_tables:0,empty_tables:0,error_tables:1,missing_tables:0,total_records:0,total_missing_data:0}}}}},refetchInterval:!1,retry:1,staleTime:3e4,enabled:!0,onError:V=>{console.error("React Query database health error:",V)}}),T=h.useMemo(()=>[{name:"Health Check",fn:()=>bd()},{name:"API Connection",fn:()=>gd()},{name:"NAAIM Data",fn:()=>pd({limit:5})},{name:"Fear & Greed",fn:()=>xd({limit:5})}],[]),w=h.useCallback(async()=>{o(!0);const V={};for(const O of T)try{const fe=Date.now();await Promise.race([O.fn(),new Promise((H,q)=>setTimeout(()=>q(new Error("Timeout")),1e4))]);const B=Date.now();V[O.name]={status:"success",response:"OK",responseTime:B-fe,critical:O.critical}}catch(fe){console.error(` ${O.name} failed:`,fe),V[O.name]={status:"error",error:fe.message||"Unknown error",responseTime:0,critical:O.critical}}n(V),o(!1)},[T]),{data:y,isLoading:f,error:C,refetch:_}=hs({queryKey:["serviceHealth"],queryFn:async()=>{try{return(await ke.get("/api/health"))?.data}catch(V){throw console.error("Service health error:",V),V}},refetchInterval:!1,retry:1,staleTime:3e4,enabled:!0});h.useEffect(()=>{w()},[w]),h.useEffect(()=>{const V={Frontend:{API_URL:Rr.REACT_APP_API_URL||"Not set",Environment:"production",Build_Time:Rr.REACT_APP_BUILD_TIME||"Unknown",Version:Rr.REACT_APP_VERSION||"1.0.0"},Browser:{User_Agent:navigator.userAgent,Language:navigator.language,Platform:navigator.platform,Online:navigator.onLine,Cookies_Enabled:navigator.cookieEnabled},Runtime:{React_Version:sr.version,Timestamp:new Date().toISOString(),Timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}};s(V)},[]);const k=Bs(y)?y:{},R=Bs(p)?p:{},U=Bs(r)?r:{},z=Bs(m)?m:{},G=V=>{switch(V){case"success":return e.jsx(ds,{color:"success"});case"error":return e.jsx(yr,{color:"error"});case"warning":return e.jsx(Zt,{color:"warning"});default:return e.jsx(Nt,{})}};if(i)return e.jsx(ot,{maxWidth:"lg",sx:{py:4},children:e.jsxs(je,{severity:"error",children:[e.jsx(u,{variant:"h6",children:"Service Health Error"}),e.jsx(u,{variant:"body2",children:i}),e.jsx(ee,{onClick:()=>window.location.reload(),sx:{mt:2},children:"Reload Page"})]})});const $=async()=>{try{d(!0),await S()}catch(V){console.error("Failed to refresh health status:",V)}finally{d(!1)}},L=V=>{switch(V){case"success":case"healthy":case"connected":return"success";case"error":case"failed":case"disconnected":return"error";case"warning":case"stale":case"incomplete":return"warning";case"empty":return"info";default:return"default"}},se=V=>V==null?"N/A":new Intl.NumberFormat().format(V),ie=V=>V?new Date(V).toLocaleString():"N/A",te=V=>{if(!V)return"N/A";const O=new Date,fe=new Date(V),B=O-fe,H=Math.floor(B/(1e3*60*60)),q=Math.floor(H/24);if(q>0)return`${q} day${q>1?"s":""} ago`;if(H>0)return`${H} hour${H>1?"s":""} ago`;{const W=Math.floor(B/6e4);return`${W} minute${W>1?"s":""} ago`}};return e.jsxs(ot,{maxWidth:"xl",sx:{py:3},children:[e.jsxs(E,{sx:{mb:3},children:[e.jsx(u,{variant:"h4",component:"h1",gutterBottom:!0,children:"Service Health Dashboard"}),e.jsx(u,{variant:"subtitle1",color:"textSecondary",children:"Monitor system status, API health, and data integrity"})]}),e.jsxs(v,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,md:3,children:e.jsx(Q,{children:e.jsxs(J,{sx:{textAlign:"center"},children:[f?e.jsx(Je,{}):C?e.jsxs(e.Fragment,{children:[e.jsx(yr,{color:"error",sx:{fontSize:40,mb:1}}),e.jsx(u,{variant:"h6",color:"error",children:"Service Down"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ds,{color:"success",sx:{fontSize:40,mb:1}}),e.jsx(u,{variant:"h6",color:"success.main",children:"Service Healthy"})]}),e.jsx(ee,{variant:"outlined",size:"small",startIcon:e.jsx(Nt,{}),onClick:_,sx:{mt:1},disabled:c,children:c?"Refreshing...":"Refresh Health Status"})]})})}),e.jsx(v,{item:!0,xs:12,md:3,children:e.jsx(Q,{children:e.jsxs(J,{sx:{textAlign:"center"},children:[e.jsx(Vr,{sx:{fontSize:40,mb:1,color:"primary.main"}}),e.jsx(u,{variant:"h6",children:"API Gateway"}),e.jsx(u,{variant:"body2",color:"textSecondary",children:z?.isConfigured?"Configured":"Not Configured"}),e.jsx(u,{variant:"caption",display:"block",sx:{mt:1},children:z?.urlsMatch?"URLs Match":"URL Mismatch"})]})})}),e.jsx(v,{item:!0,xs:12,md:3,children:e.jsx(Q,{children:e.jsxs(J,{sx:{textAlign:"center"},children:[e.jsx(Dn,{sx:{fontSize:40,mb:1,color:"primary.main"}}),e.jsx(u,{variant:"h6",children:"Database"}),e.jsx(u,{variant:"body2",color:"textSecondary",children:j?"Checking...":P?"Error":R?.database?.status==="connected"?"Connected":R?.database?.status==="disconnected"?"Disconnected":R?.error?"Error":"Unknown"}),P&&e.jsxs(je,{severity:"error",sx:{mt:2},children:[e.jsx(u,{variant:"subtitle2",children:"Failed to load database health:"}),e.jsx(u,{variant:"body2",sx:{wordBreak:"break-all"},children:typeof P=="string"?P:P?.message||"Unknown error"})]}),R?.error&&e.jsxs(je,{severity:"error",sx:{mt:2},children:[e.jsx(u,{variant:"subtitle2",children:"Database Error:"}),e.jsx(u,{variant:"body2",sx:{wordBreak:"break-all"},children:R.message||"Unknown error"})]})]})})}),e.jsx(v,{item:!0,xs:12,md:3,children:e.jsx(Q,{children:e.jsxs(J,{sx:{textAlign:"center"},children:[e.jsx(_n,{sx:{fontSize:40,mb:1,color:"primary.main"}}),e.jsx(u,{variant:"h6",children:"Environment"}),e.jsx(u,{variant:"body2",color:"textSecondary",children:(()=>{const V=Et&&"production"||"";return V.toLowerCase().startsWith("prod")?"Production":V.toLowerCase().startsWith("stag")?"Staging":V.toLowerCase().startsWith("dev")?"Development":V?V.charAt(0).toUpperCase()+V.slice(1):"Production"})()}),e.jsx(u,{variant:"caption",display:"block",sx:{mt:1},title:Et&&"http://localhost:3001"||"",children:Et?"API: http://localhost:3001":""})]})})})]}),e.jsxs(v,{container:!0,spacing:3,children:[e.jsx(v,{item:!0,xs:12,children:e.jsxs(br,{defaultExpanded:!0,children:[e.jsx(vr,{expandIcon:e.jsx(Ys,{}),children:e.jsxs(u,{variant:"h6",children:[e.jsx(Vr,{sx:{mr:1,verticalAlign:"middle"}}),"API Health"]})}),e.jsxs(jr,{children:[k&&e.jsxs(E,{children:[e.jsxs(u,{variant:"subtitle2",gutterBottom:!0,children:["Status: ",k.status]}),e.jsxs(u,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:["Last Updated:"," ",new Date(k.timestamp).toLocaleString()]}),k.api&&e.jsxs(E,{sx:{mt:2},children:[e.jsx(u,{variant:"subtitle2",children:"API Information:"}),e.jsxs(u,{variant:"body2",children:["Version: ",k.api.version]}),e.jsxs(u,{variant:"body2",children:["Environment: ",k.api.environment]})]})]}),e.jsx(E,{sx:{mt:2},children:e.jsx(ee,{variant:"outlined",size:"small",startIcon:e.jsx(Ja,{}),onClick:w,disabled:a,children:a?"Testing...":"Test All Endpoints"})}),Object.keys(U).length>0&&e.jsx(dt,{component:He,sx:{mt:2},children:e.jsxs(ut,{size:"small",children:[e.jsx(ht,{children:e.jsxs(Te,{children:[e.jsx(A,{children:"Endpoint"}),e.jsx(A,{children:"Status"}),e.jsx(A,{children:"Response Time"}),e.jsx(A,{children:"Error"})]})}),e.jsx(ft,{children:Object.entries(U).map(([V,O])=>e.jsxs(Te,{children:[e.jsx(A,{children:V}),e.jsx(A,{children:e.jsx(Ue,{icon:G(O?.status),label:O?.status||"Unknown",color:L(O?.status),size:"small"})}),e.jsx(A,{children:O.responseTime?`${O.responseTime}ms`:"-"}),e.jsx(A,{children:O.error||"-"})]},V))})]})})]})]})}),e.jsx(v,{item:!0,xs:12,children:e.jsxs(br,{defaultExpanded:!0,children:[e.jsx(vr,{expandIcon:e.jsx(Ys,{}),children:e.jsxs(u,{variant:"h6",children:[e.jsx(_n,{sx:{mr:1,verticalAlign:"middle"}}),"Scheduled Tasks Status"]})}),e.jsxs(jr,{children:[e.jsx(E,{sx:{display:"flex",justifyContent:"flex-end",mb:2},children:e.jsx(ee,{variant:"outlined",size:"small",startIcon:e.jsx(Nt,{}),onClick:()=>D(),children:"Refresh"})}),g&&e.jsxs(E,{sx:{display:"flex",justifyContent:"center",p:2},children:[e.jsx(Je,{size:24}),e.jsx(u,{sx:{ml:2},children:"Loading scheduled tasks status..."})]}),b&&e.jsxs(je,{severity:"error",sx:{mb:2},children:[e.jsx(u,{variant:"subtitle2",children:"Failed to load ECS tasks status:"}),e.jsx(u,{variant:"body2",sx:{wordBreak:"break-all"},children:typeof b=="string"?b:b?.message||"Unknown error"})]}),!g&&!b&&x&&x.tasks&&e.jsx(dt,{component:He,children:e.jsxs(ut,{size:"small",children:[e.jsx(ht,{children:e.jsxs(Te,{children:[e.jsx(A,{children:"Task Name"}),e.jsx(A,{children:"Status"}),e.jsx(A,{children:"Last Run"}),e.jsx(A,{children:"Freshness"}),e.jsx(A,{children:"Details"})]})}),e.jsx(ft,{children:Object.entries(x.tasks).map(([V,O])=>e.jsxs(Te,{children:[e.jsx(A,{children:e.jsx(u,{variant:"body2",fontWeight:"bold",children:V})}),e.jsx(A,{children:e.jsx(Ue,{icon:O.status==="success"?e.jsx(ds,{}):O.status==="failure"?e.jsx(yr,{}):O.status==="never_run"?e.jsx(Io,{}):e.jsx(Zt,{}),label:O.status||"unknown",color:O.status==="success"?"success":O.status==="failure"?"error":O.status==="never_run"?"default":"warning",size:"small"})}),e.jsx(A,{children:O.last_run?e.jsx(Ks,{title:new Date(O.last_run).toLocaleString(),children:e.jsx(u,{variant:"body2",children:O.hours_since_run!==void 0?`${O.hours_since_run}h ago`:new Date(O.last_run).toLocaleDateString()})}):e.jsx(u,{variant:"body2",color:"text.secondary",children:"Never"})}),e.jsx(A,{children:O.freshness&&e.jsx(Ue,{label:O.freshness,color:O.freshness==="current"?"success":O.freshness==="warning"?"warning":"error",size:"small"})}),e.jsx(A,{children:O.error_message?e.jsx(Ks,{title:O.error_message,children:e.jsxs(u,{variant:"body2",color:"error",noWrap:!0,children:[O.error_message.substring(0,50),"..."]})}):O.message?e.jsx(u,{variant:"body2",color:"text.secondary",children:O.message}):O.exit_code!==null&&O.exit_code!==void 0?e.jsxs(u,{variant:"body2",children:["Exit code: ",O.exit_code]}):"-"})]},V))})]})}),!g&&!b&&(!x||!x.tasks||Object.keys(x.tasks).length===0)&&e.jsxs(je,{severity:"info",children:[e.jsx(u,{variant:"subtitle2",children:"No scheduled tasks configured"}),e.jsx(u,{variant:"body2",children:"Configure scheduled tasks in GitHub Actions workflows or AWS EventBridge."})]})]})]})}),e.jsx(v,{item:!0,xs:12,children:e.jsxs(br,{defaultExpanded:!0,children:[e.jsx(vr,{expandIcon:e.jsx(Ys,{}),children:e.jsxs(u,{variant:"h6",children:[e.jsx(Dn,{sx:{mr:1,verticalAlign:"middle"}}),"Database Health"]})}),e.jsxs(jr,{children:[e.jsx(E,{sx:{display:"flex",justifyContent:"flex-end",mb:2},children:e.jsx(ee,{variant:"outlined",size:"small",startIcon:e.jsx(Nt,{}),onClick:$,disabled:c,children:c?"Updating...":"Update All Tables"})}),j&&e.jsxs(E,{sx:{display:"flex",justifyContent:"center",p:2},children:[e.jsx(Je,{size:24}),e.jsx(u,{sx:{ml:2},children:"Loading database health..."})]}),P&&e.jsxs(je,{severity:"error",sx:{mb:2},children:[e.jsx(u,{variant:"subtitle2",children:"Failed to load database health:"}),e.jsx(u,{variant:"body2",sx:{wordBreak:"break-all"},children:typeof P=="string"?P:P?.message||"Unknown error"})]}),R&&e.jsxs(E,{children:[e.jsxs(E,{sx:{mb:2},children:[e.jsx(u,{variant:"subtitle2",gutterBottom:!0,children:"Database Status:"}),e.jsxs(u,{variant:"body2",children:["Status: ",R.database?.status||"Unknown"]}),R.database?.currentTime&&e.jsxs(u,{variant:"body2",children:["Current Time:"," ",new Date(R.database.currentTime).toLocaleString()]}),R.database?.postgresVersion&&e.jsxs(u,{variant:"body2",children:["PostgreSQL Version:"," ",R.database.postgresVersion]})]}),R.error||R.message||R.details?e.jsxs(je,{severity:"error",sx:{mb:2},children:[e.jsx(u,{variant:"subtitle2",children:"Backend Error:"}),R.error&&e.jsxs(u,{variant:"body2",sx:{wordBreak:"break-all"},children:[e.jsx("b",{children:"Error:"})," ",R.error]}),R.message&&e.jsxs(u,{variant:"body2",sx:{wordBreak:"break-all"},children:[e.jsx("b",{children:"Message:"})," ",R.message]}),R.details&&e.jsxs(u,{variant:"body2",sx:{wordBreak:"break-all"},children:[e.jsx("b",{children:"Details:"})," ",R.details]})]}):null,R.database?.summary&&e.jsxs(E,{sx:{mb:2},children:[e.jsx(u,{variant:"subtitle2",gutterBottom:!0,children:"Summary:"}),e.jsxs(v,{container:!0,spacing:1,children:[e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsxs(u,{variant:"body2",color:"text.secondary",children:["Total Tables:"," ",R.database.summary.total_tables]})}),e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsxs(u,{variant:"body2",color:"success.main",children:["Healthy:"," ",R.database.summary.healthy_tables]})}),e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsxs(u,{variant:"body2",color:"text.secondary",children:["Stale: ",R.database.summary.stale_tables]})}),e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsxs(u,{variant:"body2",color:"error.main",children:["Errors: ",R.database.summary.error_tables]})}),e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsxs(u,{variant:"body2",color:"info.dark",children:["Empty: ",R.database.summary.empty_tables]})}),e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsxs(u,{variant:"body2",color:"text.secondary",children:["Missing:"," ",R.database.summary.missing_tables]})}),e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsxs(u,{variant:"body2",color:"text.secondary",children:["Total Records:"," ",se(R.database.summary.total_records)]})}),e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsxs(u,{variant:"body2",color:"text.secondary",children:["Missing Data:"," ",se(R.database.summary.total_missing_data)]})})]})]}),R.database?.tables&&Object.keys(R.database.tables).length>0&&e.jsxs(E,{sx:{mt:2},children:[e.jsxs(u,{variant:"subtitle2",gutterBottom:!0,children:["Table Details (",Object.keys(R.database.tables).length," ","tables monitored):"]}),e.jsx(dt,{component:He,sx:{maxHeight:600},children:e.jsxs(ut,{size:"small",stickyHeader:!0,children:[e.jsx(ht,{children:e.jsxs(Te,{children:[e.jsx(A,{children:"Table"}),e.jsx(A,{align:"right",children:"Records"}),e.jsx(A,{children:"Status"}),e.jsx(A,{children:"Last Updated"}),e.jsx(A,{children:"Missing Data"}),e.jsx(A,{children:"Last Checked"}),e.jsx(A,{children:"Error"})]})}),e.jsx(ft,{children:Object.entries(R.database.tables).sort(([V],[O])=>V.localeCompare(O)).map(([V,O])=>e.jsxs(Te,{sx:{"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:[e.jsx(A,{component:"th",scope:"row",children:e.jsx(u,{variant:"body2",fontFamily:"monospace",fontWeight:600,children:V})}),e.jsx(A,{align:"right",children:e.jsx(u,{variant:"body2",fontWeight:600,children:se(O.record_count)})}),e.jsx(A,{children:e.jsxs(E,{sx:{display:"flex",gap:.5,alignItems:"center"},children:[e.jsx(Ue,{icon:G(O.status),label:O.status,color:L(O.status),size:"small",sx:{minWidth:80}}),O.is_stale&&e.jsx(Ue,{label:"Stale",color:"warning",size:"small"})]})}),e.jsx(A,{children:e.jsxs(E,{children:[e.jsx(u,{variant:"body2",children:ie(O.last_updated)}),e.jsx(u,{variant:"caption",color:"text.secondary",children:te(O.last_updated)})]})}),e.jsx(A,{align:"right",children:O.missing_data_count>0?e.jsx(u,{variant:"body2",color:"text.secondary",fontWeight:600,children:se(O.missing_data_count)}):e.jsx(u,{variant:"body2",color:"success.main",children:"0"})}),e.jsx(A,{children:e.jsx(u,{variant:"body2",children:ie(O.last_checked)})}),e.jsx(A,{children:O.error&&e.jsx(Ks,{title:O.error,children:e.jsx(u,{variant:"body2",color:"error",sx:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",cursor:"help"},children:O.error.length>30?`${O.error.substring(0,30)}...`:O.error})})})]},V))})]})})]}),(!R.database?.tables||Object.keys(R.database.tables).length===0)&&e.jsxs(je,{severity:"warning",sx:{mt:2},children:[e.jsx(u,{variant:"subtitle2",children:"No table data found"}),e.jsx(u,{variant:"body2",children:"The database health check did not return any table information. This could mean the health_status table is empty or the backend is not properly configured."})]}),R.database?.note&&e.jsx(je,{severity:"info",sx:{mt:2},children:R.database.note})]})]})]})})]})]})}const wd=async()=>{throw new Error("AWS Amplify Auth is not configured")},Sd=async()=>{throw new Error("AWS Amplify Auth is not configured")},Cd=async()=>{throw new Error("AWS Amplify Auth is not configured")},Pd=async()=>{throw new Error("AWS Amplify Auth is not configured")},lo=async()=>{throw new Error("AWS Amplify Auth is not configured")},Mr=async()=>{throw new Error("AWS Amplify Auth is not configured")},Dd=async()=>{throw new Error("AWS Amplify Auth is not configured")},_d=async()=>{throw new Error("AWS Amplify Auth is not configured")},Td=async()=>{throw new Error("AWS Amplify Auth is not configured")},kd={configure:()=>{},getConfig:()=>({})},pn=()=>typeof window<"u"&&window.__CONFIG__?window.__CONFIG__:{},Ct=()=>{const t=pn(),s=t.USER_POOL_ID||"",r=t.USER_POOL_CLIENT_ID||"";return!!(s&&r&&s!==""&&r!==""&&s!=="us-east-1_DUMMY"&&r!=="dummy-client-id")},Ed=()=>{const t=pn();return{Auth:{Cognito:{userPoolId:t.USER_POOL_ID||""||"us-east-1_DUMMY",userPoolClientId:t.USER_POOL_CLIENT_ID||""||"dummy-client-id",region:"us-east-1",signUpVerificationMethod:"code",loginWith:{oauth:{domain:t.USER_POOL_DOMAIN||""||"dummy-domain",scopes:["email","profile","openid"],redirectSignIn:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",redirectSignOut:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",responseType:"code"},username:!0,email:!0}}}}};function Id(){try{const t=Ed(),s=pn();console.log(" [AMPLIFY CONFIG] Configuration details:",{userPoolId:t.Auth.Cognito.userPoolId,clientId:t.Auth.Cognito.userPoolClientId,domain:t.Auth.Cognito.loginWith.oauth.domain,runtimeConfigAvailable:!!Object.keys(s).length,isCognitoConfigured:Ct()}),Ct()||(console.warn("  Cognito not configured - using dummy values for development"),console.log("Environment variables needed:"),console.log("- VITE_COGNITO_USER_POOL_ID"),console.log("- VITE_COGNITO_CLIENT_ID"),console.log("- VITE_COGNITO_DOMAIN"),console.log("Or set runtime config in window.__CONFIG__")),kd.configure(t),console.log(" Amplify configured successfully")}catch(t){console.error(" Failed to configure Amplify:",t)}}const co="dev_users",Or="dev_session",uo="dev_pending";class Fe{constructor(){this.users=this.loadUsers(),this.session=this.loadSession(),this.pendingVerifications=this.loadPendingVerifications(),this.ensureDevUser()}loadUsers(){if(typeof localStorage>"u")return{};const s=localStorage.getItem(co);return s?JSON.parse(s):{}}saveUsers(){typeof localStorage<"u"&&localStorage.setItem(co,JSON.stringify(this.users))}loadSession(){if(typeof localStorage>"u")return null;const s=localStorage.getItem(Or);return s?JSON.parse(s):null}saveSession(s){this.session=s,typeof localStorage<"u"&&localStorage.setItem(Or,JSON.stringify(s))}clearSession(){this.session=null,typeof localStorage<"u"&&localStorage.removeItem(Or)}loadPendingVerifications(){if(typeof localStorage>"u")return{};const s=localStorage.getItem(uo);return s?JSON.parse(s):{}}savePendingVerifications(){typeof localStorage<"u"&&localStorage.setItem(uo,JSON.stringify(this.pendingVerifications))}ensureDevUser(){const s={username:"devuser",email:"argeropolos@gmail.com",firstName:"Dev",lastName:"User",password:"password123",confirmed:!0,createdAt:Date.now()};this.users.devuser=s,this.users["argeropolos@gmail.com"]=s,this.saveUsers(),typeof console<"u"&&(console.log(" DEV: Ensured default dev user exists"),console.log(" Email: argeropolos@gmail.com"),console.log(" Username: devuser"),console.log(" Password: password123"),console.log(" User can sign in with either email or username"))}generateVerificationCode(){return Math.floor(1e5+Math.random()*9e5).toString()}generateDevTokens(s){return{accessToken:"dev-bypass-token",idToken:"dev-bypass-token",refreshToken:"dev-bypass-token"}}async signUp(s,r,n,a,o){if(this.users[s])throw new Error("UsernameExistsException: Username already exists");if(this.pendingVerifications[s])throw new Error("UsernameExistsException: Username already exists");if(Object.values(this.users).find(d=>d.email===n))throw new Error("UsernameExistsException: Email already exists");if(Object.values(this.pendingVerifications).find(d=>d.email===n))throw new Error("UsernameExistsException: Email already exists");const c=this.generateVerificationCode();return this.pendingVerifications[s]={username:s,password:r,email:n,firstName:a,lastName:o,verificationCode:c,createdAt:Date.now()},this.savePendingVerifications(),typeof console<"u"&&(console.log(" DEV: Email verification code sent to",n),console.log(" DEV: Verification code:",c),console.log(" DEV AUTH: Verification code for",n,":",c),console.log(" DEV AUTH: Copy this code to complete registration")),typeof window<"u"&&window.DEV_AUTH_DEBUG!==!1&&(window.lastDevCode=c,typeof console<"u"&&console.log(" DEV AUTH: Access code via window.lastDevCode")),typeof window<"u"&&window.location&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&typeof window.alert=="function"&&setTimeout(()=>{alert(` DEV AUTH VERIFICATION CODE

For: ${n}
Code: ${c}

Copy this code to complete your registration.`)},100),{isSignUpComplete:!1,nextStep:{signUpStep:"CONFIRM_SIGN_UP",codeDeliveryDetails:{deliveryMedium:"EMAIL",destination:n}}}}async confirmSignUp(s,r){typeof console<"u"&&console.log(" DEV: Confirming sign up for",s);const n=this.pendingVerifications[s];if(!n)throw new Error("UserNotFoundException: User not found");if(n.verificationCode!==r)throw new Error("CodeMismatchException: Invalid verification code");if(Date.now()-n.createdAt>300*1e3)throw new Error("ExpiredCodeException: Verification code has expired");return this.users[s]={username:s,email:n.email,firstName:n.firstName,lastName:n.lastName,password:n.password,confirmed:!0,createdAt:Date.now()},this.saveUsers(),delete this.pendingVerifications[s],this.savePendingVerifications(),typeof console<"u"&&console.log(" DEV: User confirmed successfully"),{isSignUpComplete:!0}}async signIn(s,r){typeof console<"u"&&console.log(" DEV: Signing in user",s);let n=this.users[s],a=s;if(!n){const l=Object.entries(this.users).find(([,c])=>c.email===s);l&&(a=l[0],n=l[1],typeof console<"u"&&console.log(" DEV: Found user by email, username is",a))}if(!n)throw this.pendingVerifications[s]?new Error("UserNotConfirmedException: User not confirmed"):Object.values(this.pendingVerifications).find(d=>d.email===s)?new Error("UserNotConfirmedException: User not confirmed"):new Error("UserNotFoundException: User not found");if(!n.confirmed)throw new Error("UserNotConfirmedException: User not confirmed");if(n.password!==r)throw new Error("NotAuthorizedException: Invalid password");const o=this.generateDevTokens(a),i={user:{username:n.username,userId:`dev-${n.username}`,email:n.email,firstName:n.firstName,lastName:n.lastName},tokens:o,expiresAt:Date.now()+36e5};return this.saveSession(i),typeof console<"u"&&console.log(" DEV: User signed in successfully"),{isSignedIn:!0,user:i.user,tokens:i.tokens}}async signOut(){return typeof console<"u"&&console.log(" DEV: Signing out user"),this.clearSession(),!0}async getCurrentUser(){if(typeof window<"u"&&window.__DEV_AUTH_OVERRIDE__)return window.__DEV_AUTH_OVERRIDE__.user;if(!this.session||Date.now()>this.session.expiresAt)throw new Error("No authenticated user");return this.session.user}async fetchAuthSession(){if(typeof window<"u"&&window.__DEV_AUTH_OVERRIDE__)return{tokens:window.__DEV_AUTH_OVERRIDE__.tokens};if(!this.session||Date.now()>this.session.expiresAt)throw new Error("No valid session");return{tokens:this.session.tokens}}async resetPassword(s){typeof console<"u"&&console.log(" DEV: Initiating password reset for",s);const r=this.users[s];if(!r)throw new Error("UserNotFoundException: User not found");const n=this.generateVerificationCode();return this.pendingVerifications[`reset_${s}`]={username:s,resetCode:n,createdAt:Date.now()},this.savePendingVerifications(),typeof console<"u"&&(console.log(" DEV: Password reset code sent to",r.email),console.log(" DEV: Reset code:",n),console.log(" DEV AUTH: Password reset code for",r.email,":",n),console.log(" DEV AUTH: Copy this code to reset your password")),typeof window<"u"&&window.DEV_AUTH_DEBUG!==!1&&(window.lastDevResetCode=n,typeof console<"u"&&console.log(" DEV AUTH: Access code via window.lastDevResetCode")),typeof window<"u"&&window.location&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&typeof window.alert=="function"&&setTimeout(()=>{alert(` DEV AUTH PASSWORD RESET CODE

For: ${r.email}
Reset Code: ${n}

Copy this code to reset your password.`)},100),{nextStep:{resetPasswordStep:"CONFIRM_RESET_PASSWORD_WITH_CODE",codeDeliveryDetails:{deliveryMedium:"EMAIL",destination:r.email}}}}async confirmResetPassword(s,r,n){typeof console<"u"&&console.log(" DEV: Confirming password reset for",s);const a=`reset_${s}`,o=this.pendingVerifications[a];if(!o)throw new Error("Invalid reset request");if(o.resetCode!==r)throw new Error("CodeMismatchException: Invalid verification code");if(Date.now()-o.createdAt>300*1e3)throw new Error("ExpiredCodeException: Verification code has expired");return this.users[s].password=n,this.saveUsers(),delete this.pendingVerifications[a],this.savePendingVerifications(),typeof console<"u"&&console.log(" DEV: Password reset successfully"),!0}isAuthenticated(){return!!(this.session&&Date.now()<this.session.expiresAt)}getCurrentUserInfo(){return this.isAuthenticated()?this.session.user:null}async signUpWrapper(s){try{const{username:r,password:n,email:a,firstName:o,lastName:i}=s;if(this.users[r])return{success:!1,error:{code:"UsernameExistsException",message:"Username already exists"}};if(this.pendingVerifications[r])return{success:!1,error:{code:"UsernameExistsException",message:"Username already exists"}};if(Object.values(this.users).find(m=>m.email===a))return{success:!1,error:{code:"UsernameExistsException",message:"Email already exists"}};if(Object.values(this.pendingVerifications).find(m=>m.email===a))return{success:!1,error:{code:"UsernameExistsException",message:"Email already exists"}};const d=await Fe.prototype.signUp.call(this,r,n,a,o||"Dev",i||"User");return{success:!0,user:{username:r,email:a},userConfirmed:!1,isSignUpComplete:d.isSignUpComplete,nextStep:d.nextStep}}catch(r){return{success:!1,error:{code:r.message.split(":")[0],message:r.message.split(":")[1]||r.message}}}}async signInWrapper(s,r){try{const n=await Fe.prototype.signIn.call(this,s,r);return{success:!0,user:n.user,tokens:n.tokens,isSignedIn:n.isSignedIn}}catch(n){return{success:!1,error:{code:n.message.split(":")[0],message:n.message.split(":")[1]||n.message}}}}validatePassword(s){const r=[];return s.length<8&&r.push("Password must be at least 8 characters long"),/[a-z]/.test(s)||r.push("Password must contain at least one lowercase letter"),/[A-Z]/.test(s)||r.push("Password must contain at least one uppercase letter"),/\d/.test(s)||r.push("Password must contain at least one digit"),/[!@#$%^&*(),.?":{}|<>]/.test(s)||r.push("Password must contain at least one special character"),{isValid:r.length===0,errors:r}}async getCurrentUserWrapper(){try{return{success:!0,user:await Fe.prototype.getCurrentUser.call(this)}}catch(s){return{success:!1,error:{code:"NotAuthorizedException",message:s.message}}}}async getJwtToken(){try{return(await this.fetchAuthSession()).tokens.accessToken}catch{return null}}async signOutWrapper(){try{return await Fe.prototype.signOut.call(this),{success:!0}}catch(s){return{success:!1,error:{code:"SignOutError",message:s.message}}}}async forgotPasswordWrapper(s){try{return await Fe.prototype.resetPassword.call(this,s),{success:!0}}catch(r){return{success:!1,error:{code:r.message.split(":")[0],message:r.message.split(":")[1]||r.message}}}}async confirmResetPasswordWrapper(s,r,n){try{return await Fe.prototype.confirmResetPassword.call(this,s,r,n),{success:!0}}catch(a){return{success:!1,error:{code:a.message.split(":")[0],message:a.message.split(":")[1]||a.message}}}}validateJwtToken(s){return!!(s&&typeof s=="string"&&s.length>0)}isTokenExpired(s){return!1}async confirmMFA(s,r){return{success:!0,user:s||{username:"testuser"}}}async updateUserAttributes(s,r){try{return this.users[s.username]&&(Object.assign(this.users[s.username],r),this.saveUsers()),{success:!0}}catch(n){return{success:!1,error:{code:"UpdateAttributesError",message:n.message}}}}}const de=new Fe;de.signUp=(...t)=>{if(t.length===1&&typeof t[0]=="object")return de.signUpWrapper(t[0]);{const[s,r,n,a,o]=t;return de.signUpWrapper({username:s,password:r,email:n,firstName:a,lastName:o})}};de.signIn=(...t)=>de.signInWrapper(...t);de.getCurrentUser=(...t)=>de.getCurrentUserWrapper(...t);de.signOut=(...t)=>de.signOutWrapper(...t);de.forgotPassword=(...t)=>de.forgotPasswordWrapper(...t);de.forgotPasswordSubmit=(...t)=>de.confirmResetPasswordWrapper(...t);de.changePassword=(...t)=>de.confirmResetPasswordWrapper(...t);de.generateVerificationCode=(...t)=>Fe.prototype.generateVerificationCode.call(de,...t);de.generateDevTokens=(...t)=>Fe.prototype.generateDevTokens.call(de,...t);de.loadUsers=(...t)=>Fe.prototype.loadUsers.call(de,...t);de.saveUsers=(...t)=>Fe.prototype.saveUsers.call(de,...t);de.loadSession=(...t)=>Fe.prototype.loadSession.call(de,...t);de.saveSession=(...t)=>Fe.prototype.saveSession.call(de,...t);de.loadPendingVerifications=(...t)=>Fe.prototype.loadPendingVerifications.call(de,...t);de.savePendingVerifications=(...t)=>Fe.prototype.savePendingVerifications.call(de,...t);de.confirmSignUp=(...t)=>Fe.prototype.confirmSignUp.call(de,...t);de.validateJwtToken=(...t)=>Fe.prototype.validateJwtToken.call(de,...t);de.isTokenExpired=(...t)=>Fe.prototype.isTokenExpired.call(de,...t);de.confirmMFA=(...t)=>Fe.prototype.confirmMFA.call(de,...t);de.updateUserAttributes=(...t)=>Fe.prototype.updateUserAttributes.call(de,...t);de.validatePassword=(...t)=>Fe.prototype.validatePassword.call(de,...t);de.ensureDevUser=(...t)=>Fe.prototype.ensureDevUser.call(de,...t);class Ad{constructor(){this.refreshTimer=null,this.warningTimer=null,this.sessionTimeoutTimer=null,this.isRefreshing=!1,this.config={tokenRefreshInterval:2700*1e3,sessionTimeout:480*60*1e3,warningTime:600*1e3,maxRefreshAttempts:3,rememberMeDuration:720*60*60*1e3},this.callbacks={onTokenRefresh:null,onSessionWarning:null,onSessionExpired:null,onRefreshError:null},this.sessionData={lastActivity:Date.now(),loginTime:null,refreshAttempts:0,rememberMe:!1}}initialize(s){this.authContext=s,this.setupEventListeners(),this.startSessionTracking(),this.scheduleTokenRefresh(),console.log(" Session manager initialized")}setCallbacks(s){this.callbacks={...this.callbacks,...s}}startSession(s=!1){const r=Date.now();this.sessionData={lastActivity:r,loginTime:r,refreshAttempts:0,rememberMe:s};const n=s?localStorage:sessionStorage;n.setItem("sessionStart",r.toString()),n.setItem("rememberMe",s.toString()),this.startSessionTracking(),this.scheduleTokenRefresh(),console.log(` Session started (remember me: ${s})`)}endSession(){this.clearAllTimers(),this.clearSessionStorage(),console.log(" Session ended")}updateActivity(){this.sessionData.lastActivity=Date.now(),this.sessionTimeoutTimer&&(clearTimeout(this.sessionTimeoutTimer),this.startSessionTimeout())}scheduleTokenRefresh(){this.refreshTimer&&clearInterval(this.refreshTimer),this.refreshTimer=setInterval(async()=>{await this.refreshTokens()},this.config.tokenRefreshInterval),console.log(" Token refresh scheduled")}async refreshTokens(){if(!(this.isRefreshing||!this.authContext)){this.isRefreshing=!0;try{const s=await this.authContext.refreshSession();if(s.success)this.sessionData.refreshAttempts=0,console.log(" Tokens refreshed successfully"),this.callbacks.onTokenRefresh&&this.callbacks.onTokenRefresh(s);else throw new Error(s.error||"Token refresh failed")}catch(s){console.error(" Token refresh failed:",s),this.sessionData.refreshAttempts++,this.callbacks.onRefreshError&&this.callbacks.onRefreshError(s,this.sessionData.refreshAttempts),this.sessionData.refreshAttempts>=this.config.maxRefreshAttempts&&(console.error(" Max refresh attempts reached, logging out"),await this.handleSessionExpired())}finally{this.isRefreshing=!1}}}startSessionTracking(){this.startSessionTimeout(),this.startWarningTimer()}startSessionTimeout(){this.sessionTimeoutTimer&&clearTimeout(this.sessionTimeoutTimer);const s=this.sessionData.rememberMe?this.config.rememberMeDuration:this.config.sessionTimeout;this.sessionTimeoutTimer=setTimeout(async()=>{await this.handleSessionExpired()},s)}startWarningTimer(){this.warningTimer&&clearTimeout(this.warningTimer);const r=(this.sessionData.rememberMe?this.config.rememberMeDuration:this.config.sessionTimeout)-this.config.warningTime;this.warningTimer=setTimeout(()=>{this.handleSessionWarning()},r)}handleSessionWarning(){console.log(" Session expiring soon"),this.callbacks.onSessionWarning&&this.callbacks.onSessionWarning({timeRemaining:this.config.warningTime,canExtend:!0})}async handleSessionExpired(){console.log(" Session expired"),this.callbacks.onSessionExpired&&this.callbacks.onSessionExpired(),this.authContext&&await this.authContext.logout(),this.endSession()}extendSession(){console.log(" Extending session"),this.updateActivity(),this.startSessionTimeout(),this.startWarningTimer()}setupEventListeners(){const s=["mousedown","mousemove","keypress","scroll","touchstart","click"],r=()=>{this.updateActivity()};s.forEach(n=>{document.addEventListener(n,r,!0)}),document.addEventListener("visibilitychange",()=>{document.hidden||this.updateActivity()})}clearAllTimers(){this.refreshTimer&&(clearInterval(this.refreshTimer),this.refreshTimer=null),this.warningTimer&&(clearTimeout(this.warningTimer),this.warningTimer=null),this.sessionTimeoutTimer&&(clearTimeout(this.sessionTimeoutTimer),this.sessionTimeoutTimer=null)}clearSessionStorage(){localStorage.removeItem("sessionStart"),localStorage.removeItem("rememberMe"),sessionStorage.removeItem("sessionStart"),sessionStorage.removeItem("rememberMe")}getSessionInfo(){const s=Date.now(),r=s-(this.sessionData.loginTime||s),n=this.sessionData.rememberMe?this.config.rememberMeDuration:this.config.sessionTimeout;return{isActive:!0,sessionDuration:r,timeRemaining:n-r,lastActivity:this.sessionData.lastActivity,rememberMe:this.sessionData.rememberMe,refreshAttempts:this.sessionData.refreshAttempts}}isSessionValid(){const s=Date.now(),r=s-(this.sessionData.loginTime||s),n=this.sessionData.rememberMe?this.config.rememberMeDuration:this.config.sessionTimeout;return r<n}}const ns=new Ad,Rd=({open:t,timeRemaining:s,onExtend:r,onLogout:n,onClose:a})=>{const[o,i]=h.useState(s),[l,c]=h.useState(!1),d=h.useRef(!0);h.useEffect(()=>{i(s)},[s]),h.useEffect(()=>{if(!t)return;const b=setInterval(()=>{if(!d.current){clearInterval(b);return}i(D=>{const p=D-1e3;return p<=0?(clearInterval(b),d.current&&n(),0):p})},1e3);return()=>{clearInterval(b)}},[t,n]),h.useEffect(()=>()=>{d.current=!1},[]);const m=async()=>{c(!0);try{await r(),a()}catch(b){console.error("Failed to extend session:",b)}finally{c(!1)}},x=b=>{const D=Math.max(0,Math.floor(b/1e3)),p=Math.floor(D/60),j=D%60;return`${p}:${j.toString().padStart(2,"0")}`},g=(s-o)/s*100;return e.jsxs(_t,{open:t,onClose:a,maxWidth:"sm",fullWidth:!0,disableEscapeKeyDown:!0,PaperProps:{sx:{borderRadius:2,border:"2px solid",borderColor:"warning.main"}},children:[e.jsx(Wt,{children:e.jsxs(E,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(Zt,{color:"warning"}),e.jsx(u,{variant:"h6",children:"Session Expiring Soon"})]})}),e.jsxs(Tt,{children:[e.jsxs(je,{severity:"warning",sx:{mb:2},children:["Your session will expire in ",e.jsx("strong",{children:x(o)})]}),e.jsxs(E,{sx:{mb:2},children:[e.jsxs(E,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(Xa,{fontSize:"small"}),e.jsx(u,{variant:"body2",color:"text.secondary",children:"Time Remaining"})]}),e.jsx(ei,{variant:"determinate",value:100-g,color:o<6e4?"error":"warning",sx:{height:8,borderRadius:4}})]}),e.jsx(u,{variant:"body2",color:"text.secondary",children:'You will be automatically logged out when the timer reaches zero. Click "Stay Signed In" to extend your session.'})]}),e.jsxs(It,{sx:{p:2,gap:1},children:[e.jsx(ee,{onClick:n,color:"error",variant:"outlined",disabled:l,children:"Sign Out Now"}),e.jsx(ee,{onClick:m,color:"primary",variant:"contained",disabled:l,startIcon:l?e.jsx(Je,{size:16}):null,children:l?"Extending...":"Stay Signed In"})]})]})},Md={user:null,isAuthenticated:!1,isLoading:!0,error:null,tokens:null},ce={LOADING:"LOADING",LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGIN_FAILURE:"LOGIN_FAILURE",LOGOUT:"LOGOUT",SET_ERROR:"SET_ERROR",CLEAR_ERROR:"CLEAR_ERROR",UPDATE_TOKENS:"UPDATE_TOKENS"};function Od(t,s){switch(s.type){case ce.LOADING:return{...t,isLoading:s.payload};case ce.LOGIN_SUCCESS:return{...t,user:s.payload.user,tokens:s.payload.tokens,isAuthenticated:!0,isLoading:!1,error:null};case ce.LOGIN_FAILURE:return{...t,user:null,tokens:null,isAuthenticated:!1,isLoading:!1,error:s.payload};case ce.LOGOUT:return localStorage.removeItem("accessToken"),localStorage.removeItem("authToken"),sessionStorage.removeItem("accessToken"),sessionStorage.removeItem("authToken"),{...t,user:null,tokens:null,isAuthenticated:!1,isLoading:!1,error:null};case ce.SET_ERROR:return{...t,error:s.payload,isLoading:!1};case ce.CLEAR_ERROR:return{...t,error:null};case ce.UPDATE_TOKENS:return{...t,tokens:s.payload};default:return t}}const ua=h.createContext(null),Fd={user:null,isAuthenticated:!1,isLoading:!0,error:null,tokens:null,login:async()=>{},signup:async()=>{},confirmAccount:async()=>{},forgotPassword:async()=>{},resetPassword:async()=>{}};function Nd({children:t}){const[s,r]=h.useReducer(Od,Md),[n,a]=h.useState({show:!1,timeRemaining:0}),o=h.useCallback(async()=>{try{const w=await Mr({forceRefresh:!0});return w.tokens?(r({type:ce.UPDATE_TOKENS,payload:{accessToken:w.tokens.accessToken.toString(),idToken:w.tokens.idToken?.toString(),refreshToken:w.tokens.refreshToken?.toString()}}),{success:!0}):{success:!1,error:"No valid tokens"}}catch(w){return console.error("Session refresh error:",w),{success:!1,error:S(w)}}},[]),i=h.useCallback(async()=>{try{return localStorage.removeItem("accessToken"),localStorage.removeItem("authToken"),sessionStorage.removeItem("accessToken"),sessionStorage.removeItem("authToken"),Ct()?(await Sd(),r({type:ce.LOGOUT}),{success:!0}):(console.log("Cognito not configured - using development authentication"),await de.signOut(),r({type:ce.LOGOUT}),{success:!0})}catch(w){return console.error("Logout error:",w),r({type:ce.LOGOUT}),{success:!1,error:S(w)}}},[]),l=h.useCallback(async()=>{try{if(r({type:ce.LOADING,payload:!0}),(typeof globalThis<"u"&&globalThis.__vitest_worker__||typeof window<"u"&&window.__vitest_worker__||!1||typeof process<"u"&&!1||typeof window<"u"&&window.navigator?.userAgent?.includes("jsdom")||typeof globalThis<"u"&&(globalThis.vi||globalThis.vitest||globalThis.__vitest__))&&!(typeof window<"u"&&window.playwright)){console.log("Unit test environment detected - skipping auth check"),r({type:ce.LOADING,payload:!1}),r({type:ce.LOGOUT});return}const y=!0,f=Ct(),C=!1;if(y&&f&&!C){console.log(" PRODUCTION MODE - Using AWS Cognito authentication");try{const _=await lo(),k=await Mr();if(_&&k.tokens){const R={accessToken:k.tokens.accessToken.toString(),idToken:k.tokens.idToken?.toString(),refreshToken:k.tokens.refreshToken?.toString()};localStorage.setItem("accessToken",R.accessToken),r({type:ce.LOGIN_SUCCESS,payload:{user:{username:_.username,userId:_.userId,email:_.signInDetails?.loginId||_.username,firstName:_.userAttributes?.given_name||"",lastName:_.userAttributes?.family_name||"",signInDetails:_.signInDetails},tokens:R}}),console.log(" User authenticated with Cognito");return}}catch(_){console.log("No Cognito session found:",_)}}if(!f||C){console.log(C?" DEVELOPMENT MODE - Dev auth forced via VITE_FORCE_DEV_AUTH=true":f?" DEVELOPMENT MODE - Using dev auth in DEV environment":" DEVELOPMENT MODE - Cognito not configured, using dev auth fallback");try{const _=await de.getCurrentUser(),k=await de.fetchAuthSession();if(_&&k.tokens){localStorage.setItem("accessToken",k.tokens.accessToken),r({type:ce.LOGIN_SUCCESS,payload:{user:_,tokens:k.tokens}}),console.log(" Development user authenticated");return}}catch(_){console.log("No dev auth session found:",_.message)}}r({type:ce.LOGOUT})}catch(w){console.log("Authentication check failed:",w),r({type:ce.LOGOUT})}},[]);h.useEffect(()=>{l()},[l]),h.useEffect(()=>{if(s.isAuthenticated&&s.user)try{const w={refreshSession:o,logout:i};ns.initialize(w),ns.setCallbacks({onTokenRefresh:f=>{console.log(" Tokens refreshed automatically")},onSessionWarning:f=>{a({show:!0,timeRemaining:f.timeRemaining})},onSessionExpired:async()=>{console.log(" Session expired, logging out"),await i()},onRefreshError:(f,C)=>{console.error(` Token refresh failed (attempt ${C}):`,f)}});const y=localStorage.getItem("rememberMe")==="true";ns.startSession(y)}catch(w){console.error(" Failed to initialize session manager:",w)}else s.isAuthenticated||(ns.endSession(),a({show:!1,timeRemaining:0}));return()=>{ns.clearAllTimers()}},[s.isAuthenticated,s.user,o,i,a]);const c=async(w,y)=>{try{r({type:ce.LOADING,payload:!0}),r({type:ce.CLEAR_ERROR});const f=!0,C=Ct(),_=!1;if(f&&C&&!_)try{console.log(" PRODUCTION LOGIN - Attempting AWS Cognito");const{isSignedIn:U,nextStep:z}=await wd({username:w,password:y});if(U){const G=await lo(),$=await Mr(),L={accessToken:$.tokens.accessToken.toString(),idToken:$.tokens.idToken?.toString(),refreshToken:$.tokens.refreshToken?.toString()};return localStorage.setItem("accessToken",L.accessToken),r({type:ce.LOGIN_SUCCESS,payload:{user:{username:G.username,userId:G.userId,email:G.signInDetails?.loginId||G.username,firstName:G.userAttributes?.given_name||"",lastName:G.userAttributes?.family_name||"",signInDetails:G.signInDetails},tokens:L}}),console.log(" Production login successful"),{success:!0}}else return{success:!1,nextStep:z,message:"Additional authentication step required"}}catch(U){console.warn(" Cognito authentication failed, trying dev auth fallback:",U)}if(!C||_||!1){console.log(_?" DEVELOPMENT LOGIN - Dev auth forced via VITE_FORCE_DEV_AUTH=true":" DEVELOPMENT LOGIN - Using dev auth fallback");try{const U=await de.signIn(w,y);if(!U||!U.success||!U.tokens){const z=U.error?.message||"Login failed - no tokens received";return console.error("Dev auth login failed:",z),r({type:ce.LOGIN_FAILURE,payload:z}),{success:!1,error:z}}return localStorage.setItem("accessToken",U.tokens.accessToken),r({type:ce.LOGIN_SUCCESS,payload:{user:U.user,tokens:U.tokens}}),console.log(" Development login successful"),{success:!0}}catch(U){console.error("Dev auth login error:",U);const z=S(U);return r({type:ce.LOGIN_FAILURE,payload:z}),{success:!1,error:z}}}console.error(" CRITICAL: Both Cognito and dev auth paths were skipped or failed"),console.error("Debug info:",{isProductionBuild:f,cognitoConfigured:C,forceDevAuth:_,isDev:!1,shouldUseDevAuth:!C||_||!1});const R=C?"Authentication service is temporarily unavailable. Please try again later.":"Authentication is not configured. Please contact support or use development mode.";throw new Error(R)}catch(f){console.error("Login error:",f);const C=S(f);return r({type:ce.LOGIN_FAILURE,payload:C}),{success:!1,error:C}}},d=async(w,y,f,C,_)=>{try{if(r({type:ce.LOADING,payload:!0}),r({type:ce.CLEAR_ERROR}),!Ct()){console.log("Cognito not configured - using development authentication");try{const U=await de.signUp(w,y,f,C,_);return r({type:ce.LOADING,payload:!1}),{success:!0,isComplete:U.isSignUpComplete,nextStep:U.nextStep,message:U.isSignUpComplete?"Registration completed successfully":"Please check your email for verification code"}}catch(U){console.error("Dev auth registration error:",U);const z=S(U);return r({type:ce.SET_ERROR,payload:z}),{success:!1,error:z}}}const{isSignUpComplete:k,nextStep:R}=await Cd({username:w,password:y,options:{userAttributes:{email:f,given_name:C,family_name:_}}});return r({type:ce.LOADING,payload:!1}),{success:!0,isComplete:k,nextStep:R,message:k?"Registration completed successfully":"Please check your email for verification code"}}catch(k){console.error("Registration error:",k);const R=S(k);return r({type:ce.SET_ERROR,payload:R}),{success:!1,error:R}}},m=async(w,y)=>{try{if(r({type:ce.LOADING,payload:!0}),r({type:ce.CLEAR_ERROR}),!Ct()){console.log("Cognito not configured - using development authentication");try{const C=await de.confirmSignUp(w,y);return r({type:ce.LOADING,payload:!1}),{success:!0,isComplete:C.isSignUpComplete,message:"Account confirmed successfully. You can now sign in."}}catch(C){console.error("Dev auth confirmation error:",C);const _=S(C);return r({type:ce.SET_ERROR,payload:_}),{success:!1,error:_}}}const{isSignUpComplete:f}=await Pd({username:w,confirmationCode:y});return r({type:ce.LOADING,payload:!1}),{success:!0,isComplete:f,message:"Account confirmed successfully. You can now sign in."}}catch(f){console.error("Confirmation error:",f);const C=S(f);return r({type:ce.SET_ERROR,payload:C}),{success:!1,error:C}}},x=async w=>{try{if(r({type:ce.LOADING,payload:!0}),r({type:ce.CLEAR_ERROR}),!Ct()){console.log("Cognito not configured - using development authentication");try{return await new Promise(y=>setTimeout(y,1e3)),r({type:ce.LOADING,payload:!1}),{success:!0,message:"New verification code sent to your email (development mode)"}}catch(y){console.error("Dev auth resend error:",y);const f=S(y);return r({type:ce.SET_ERROR,payload:f}),{success:!1,error:f}}}return await Td({username:w}),r({type:ce.LOADING,payload:!1}),{success:!0,message:"New verification code sent to your email"}}catch(y){console.error("Resend confirmation error:",y);const f=S(y);return r({type:ce.SET_ERROR,payload:f}),{success:!1,error:f}}},g=async w=>{try{if(r({type:ce.LOADING,payload:!0}),r({type:ce.CLEAR_ERROR}),!Ct()){console.log("Cognito not configured - using development authentication");try{const f=await de.resetPassword(w);return r({type:ce.LOADING,payload:!1}),{success:!0,nextStep:f.nextStep,message:"Password reset code sent to your email"}}catch(f){console.error("Dev auth password reset error:",f);const C=S(f);return r({type:ce.SET_ERROR,payload:C}),{success:!1,error:C}}}const y=await Dd({username:w});return r({type:ce.LOADING,payload:!1}),{success:!0,nextStep:y.nextStep,message:"Password reset code sent to your email"}}catch(y){console.error("Forgot password error:",y);const f=S(y);return r({type:ce.SET_ERROR,payload:f}),{success:!1,error:f}}},b=async(w,y,f)=>{try{if(r({type:ce.LOADING,payload:!0}),r({type:ce.CLEAR_ERROR}),!Ct()){console.log("Cognito not configured - using development authentication");try{return await de.confirmResetPassword(w,y,f),r({type:ce.LOADING,payload:!1}),{success:!0,message:"Password reset successfully. You can now sign in with your new password."}}catch(C){console.error("Dev auth confirm password reset error:",C);const _=S(C);return r({type:ce.SET_ERROR,payload:_}),{success:!1,error:_}}}return await _d({username:w,confirmationCode:y,newPassword:f}),r({type:ce.LOADING,payload:!1}),{success:!0,message:"Password reset successfully. You can now sign in with your new password."}}catch(C){console.error("Confirm password reset error:",C);const _=S(C);return r({type:ce.SET_ERROR,payload:_}),{success:!1,error:_}}},D=()=>{r({type:ce.CLEAR_ERROR})},p=async()=>{ns.extendSession(),a({show:!1,timeRemaining:0})},j=async()=>{a({show:!1,timeRemaining:0}),await i()},P=()=>{a({show:!1,timeRemaining:0})},S=w=>w.name==="NotAuthorizedException"?"Invalid username or password":w.name==="UserNotConfirmedException"?"Please confirm your account before signing in":w.name==="UsernameExistsException"?"Username already exists":w.name==="CodeMismatchException"?"Invalid verification code":w.name==="ExpiredCodeException"?"Verification code has expired":w.message||"An unexpected error occurred",T={...s,login:c,register:d,confirmRegistration:m,resendConfirmationCode:x,logout:i,forgotPassword:g,confirmForgotPassword:b,refreshSession:o,clearError:D,checkAuthState:l};return e.jsxs(ua.Provider,{value:T,children:[t,e.jsx(Rd,{open:n.show,timeRemaining:n.timeRemaining,onExtend:p,onLogout:j,onClose:P})]})}function Rt(){const t=h.useContext(ua);if(t===null)return console.warn("useAuth called outside AuthProvider - using defaults"),Fd;if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const ha=(t,s="Financial Dashboard")=>{h.useEffect(()=>{const r=document.title;return t&&(document.title=`${t} | ${s}`),()=>{document.title=r&&r.trim()?r:s}},[t,s])};var Ss={},Fr={};const Ld=Oi(ti);var ho;function xn(){return ho||(ho=1,(function(t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s.createSvgIcon}});var s=Ld})(Fr)),Fr}var fo;function Vd(){if(fo)return Ss;fo=1;var t=sn();Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.default=void 0;var s=t(xn()),r=rn();return Ss.default=(0,s.default)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),Ss}var Wd=Vd();const fa=Ns(Wd);var Cs={},mo;function Ud(){if(mo)return Cs;mo=1;var t=sn();Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.default=void 0;var s=t(xn()),r=rn();return Cs.default=(0,s.default)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),Cs}var $d=Ud();const ma=Ns($d);var Ps={},po;function Bd(){if(po)return Ps;po=1;var t=sn();Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.default=void 0;var s=t(xn()),r=rn();return Ps.default=(0,s.default)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),Ps}var zd=Bd();const Xs=Ns(zd),Hd=["Interactive Brokers","Fidelity","Charles Schwab","E*TRADE","TD Ameritrade","Webull","Robinhood","Other"];function Gd(){const[t,s]=h.useState(!1),[r,n]=h.useState([]),[a,o]=h.useState(!1),[i,l]=h.useState(null),[c,d]=h.useState(!1),[m,x]=h.useState(null),[g,b]=h.useState({symbol:"",quantity:"",average_cost:"",current_price:"",broker:"",broker_account_id:"",purchase_date:"",notes:""});h.useEffect(()=>{t&&D()},[t]);const D=async()=>{o(!0),l(null);try{const f=await(await fetch("/api/portfolio/manual-positions")).json();if(f.success){const C=f.data||[];n(Array.isArray(C)?C:[])}else l(f.error||"Failed to fetch positions")}catch(y){l(y.message)}finally{o(!1)}},p=()=>{x(null),b({symbol:"",quantity:"",average_cost:"",current_price:"",broker:"",broker_account_id:"",purchase_date:"",notes:""}),d(!0)},j=y=>{x(y.id),b({symbol:y.symbol,quantity:y.quantity.toString(),average_cost:y.average_cost.toString(),current_price:y.current_price?y.current_price.toString():"",broker:y.broker||"",broker_account_id:y.broker_account_id||"",purchase_date:y.purchase_date?y.purchase_date.split("T")[0]:"",notes:y.notes||""}),d(!0)},P=async y=>{if(window.confirm("Are you sure you want to delete this position?"))try{const C=await(await fetch(`/api/portfolio/manual-positions/${y}`,{method:"DELETE"})).json();C.success?(n(r.filter(_=>_.id!==y)),l(null)):l(C.error||"Failed to delete position")}catch(f){l(f.message)}},S=async()=>{l(null);try{const y=m?`/api/portfolio/manual-positions/${m}`:"/api/portfolio/manual-positions",f=m?"PATCH":"POST",C={...g,quantity:parseFloat(g.quantity),average_cost:parseFloat(g.average_cost),current_price:g.current_price?parseFloat(g.current_price):null},k=await(await fetch(y,{method:f,headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})).json();k.success?(d(!1),D()):l(k.error||"Failed to save position")}catch(y){l(y.message)}},T=y=>{const{name:f,value:C}=y.target;b(_=>({..._,[f]:C}))},w=y=>{const f=y.quantity*y.average_cost,C=y.quantity*(y.current_price||y.average_cost),_=C-f,k=f>0?_/f*100:0;return{costBasis:f,marketValue:C,unrealizedGain:_,unrealizedGainPct:k}};return e.jsxs(e.Fragment,{children:[e.jsx(ee,{variant:"contained",color:"primary",startIcon:e.jsx(Xs,{}),onClick:()=>s(!0),sx:{mb:2},children:"Manage Manual Positions"}),e.jsxs(_t,{open:t,onClose:()=>s(!1),maxWidth:"lg",fullWidth:!0,children:[e.jsx(Wt,{children:"Manual Positions Management"}),e.jsxs(Tt,{children:[i&&e.jsx(je,{severity:"error",sx:{mb:2},children:i}),c?e.jsxs(E,{sx:{mt:2,display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[e.jsx(ve,{label:"Symbol",name:"symbol",value:g.symbol,onChange:T,placeholder:"e.g., AAPL",required:!0}),e.jsx(ve,{label:"Quantity",name:"quantity",type:"number",value:g.quantity,onChange:T,inputProps:{step:"0.001"},required:!0}),e.jsx(ve,{label:"Average Cost",name:"average_cost",type:"number",value:g.average_cost,onChange:T,inputProps:{step:"0.01"},required:!0}),e.jsx(ve,{label:"Current Price",name:"current_price",type:"number",value:g.current_price,onChange:T,inputProps:{step:"0.01"}}),e.jsxs(tt,{fullWidth:!0,children:[e.jsx(st,{children:"Broker"}),e.jsx(rt,{name:"broker",value:g.broker,onChange:T,label:"Broker",children:Hd.map(y=>e.jsx(re,{value:y,children:y},y))})]}),e.jsx(ve,{label:"Broker Account ID",name:"broker_account_id",value:g.broker_account_id,onChange:T}),e.jsx(ve,{label:"Purchase Date",name:"purchase_date",type:"date",value:g.purchase_date,onChange:T,InputLabelProps:{shrink:!0}}),e.jsx(ve,{label:"Notes",name:"notes",value:g.notes,onChange:T,multiline:!0,rows:2,sx:{gridColumn:"1 / -1"}}),e.jsxs(E,{sx:{gridColumn:"1 / -1",display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(ee,{onClick:()=>d(!1),children:"Cancel"}),e.jsxs(ee,{onClick:S,variant:"contained",color:"primary",children:[m?"Update":"Add"," Position"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{variant:"contained",startIcon:e.jsx(Xs,{}),onClick:p,sx:{mb:2},children:"Add Position"}),a?e.jsx("p",{children:"Loading positions..."}):r.length===0?e.jsx(je,{severity:"info",children:"No manual positions added yet."}):e.jsx(dt,{component:He,children:e.jsxs(ut,{size:"small",children:[e.jsx(ht,{children:e.jsxs(Te,{sx:{backgroundColor:"#f5f5f5"},children:[e.jsx(A,{children:"Symbol"}),e.jsx(A,{align:"right",children:"Quantity"}),e.jsx(A,{align:"right",children:"Avg Cost"}),e.jsx(A,{align:"right",children:"Current Price"}),e.jsx(A,{align:"right",children:"Market Value"}),e.jsx(A,{align:"right",children:"Gain/Loss"}),e.jsx(A,{align:"right",children:"Gain/Loss %"}),e.jsx(A,{align:"center",children:"Broker"}),e.jsx(A,{align:"center",children:"Actions"})]})}),e.jsx(ft,{children:r.map(y=>{const f=w(y);return e.jsxs(Te,{children:[e.jsx(A,{children:e.jsx("strong",{children:y.symbol})}),e.jsx(A,{align:"right",children:y.quantity.toFixed(4)}),e.jsxs(A,{align:"right",children:["$",y.average_cost.toFixed(2)]}),e.jsxs(A,{align:"right",children:["$",(y.current_price||y.average_cost).toFixed(2)]}),e.jsxs(A,{align:"right",children:["$",f.marketValue.toFixed(2)]}),e.jsxs(A,{align:"right",sx:{color:f.unrealizedGain>=0?"green":"red",fontWeight:"bold"},children:["$",f.unrealizedGain.toFixed(2)]}),e.jsxs(A,{align:"right",sx:{color:f.unrealizedGainPct>=0?"green":"red",fontWeight:"bold"},children:[f.unrealizedGainPct.toFixed(2),"%"]}),e.jsx(A,{align:"center",children:y.broker||""}),e.jsxs(A,{align:"center",children:[e.jsx(We,{size:"small",onClick:()=>j(y),title:"Edit",children:e.jsx(ma,{fontSize:"small"})}),e.jsx(We,{size:"small",color:"error",onClick:()=>P(y.id),title:"Delete",children:e.jsx(fa,{fontSize:"small"})})]})]},y.id)})})]})})]})]}),e.jsx(It,{children:e.jsx(ee,{onClick:()=>s(!1),children:"Close"})})]})]})}const qd=["buy","sell"],Kd=["filled","pending","cancelled"];function Yd(){const[t,s]=h.useState(!1),[r,n]=h.useState([]),[a,o]=h.useState(!1),[i,l]=h.useState(null),[c,d]=h.useState(!1),[m,x]=h.useState(null),[g,b]=h.useState({symbol:"",trade_type:"buy",quantity:"",price:"",execution_date:"",status:"filled"});h.useEffect(()=>{t&&D()},[t]);const D=async()=>{o(!0),l(null);try{const f=await(await fetch("/api/trades/manual")).json();if(f.success){const C=f.data||[];n(Array.isArray(C)?C:[])}else l(f.error||"Failed to fetch trades")}catch(y){l(y.message)}finally{o(!1)}},p=()=>{x(null),b({symbol:"",trade_type:"buy",quantity:"",price:"",execution_date:new Date().toISOString().split("T")[0],status:"filled"}),d(!0)},j=y=>{x(y.id),b({symbol:y.symbol,trade_type:y.trade_type,quantity:y.quantity.toString(),price:y.price.toString(),execution_date:y.execution_date.split("T")[0],status:y.status}),d(!0)},P=async y=>{if(window.confirm("Are you sure you want to delete this trade?"))try{const C=await(await fetch(`/api/trades/manual/${y}`,{method:"DELETE"})).json();C.success?(n(r.filter(_=>_.id!==y)),l(null)):l(C.error||"Failed to delete trade")}catch(f){l(f.message)}},S=async()=>{l(null);try{const y=m?`/api/trades/manual/${m}`:"/api/trades/manual",f=m?"PATCH":"POST",C={...g,quantity:parseFloat(g.quantity),price:parseFloat(g.price)},k=await(await fetch(y,{method:f,headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})).json();k.success?(d(!1),D()):l(k.error||"Failed to save trade")}catch(y){l(y.message)}},T=y=>{const{name:f,value:C}=y.target;b(_=>({..._,[f]:C}))},w=(y,f)=>y*f;return e.jsxs(e.Fragment,{children:[e.jsx(ee,{variant:"contained",color:"primary",startIcon:e.jsx(Xs,{}),onClick:()=>s(!0),sx:{mb:2,ml:1},children:"Record Manual Trade"}),e.jsxs(_t,{open:t,onClose:()=>s(!1),maxWidth:"lg",fullWidth:!0,children:[e.jsx(Wt,{children:"Manual Trade Entry"}),e.jsxs(Tt,{children:[i&&e.jsx(je,{severity:"error",sx:{mb:2},children:i}),c?e.jsxs(E,{sx:{mt:2,display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[e.jsx(ve,{label:"Symbol",name:"symbol",value:g.symbol,onChange:T,placeholder:"e.g., TSLA",required:!0}),e.jsxs(tt,{fullWidth:!0,required:!0,children:[e.jsx(st,{children:"Trade Type"}),e.jsx(rt,{name:"trade_type",value:g.trade_type,onChange:T,label:"Trade Type",children:qd.map(y=>e.jsx(re,{value:y,children:y.toUpperCase()},y))})]}),e.jsx(ve,{label:"Quantity",name:"quantity",type:"number",value:g.quantity,onChange:T,inputProps:{step:"0.001"},required:!0}),e.jsx(ve,{label:"Price",name:"price",type:"number",value:g.price,onChange:T,inputProps:{step:"0.01"},required:!0}),e.jsx(ve,{label:"Execution Date",name:"execution_date",type:"date",value:g.execution_date,onChange:T,InputLabelProps:{shrink:!0},required:!0}),e.jsxs(tt,{fullWidth:!0,children:[e.jsx(st,{children:"Status"}),e.jsx(rt,{name:"status",value:g.status,onChange:T,label:"Status",children:Kd.map(y=>e.jsx(re,{value:y,children:y.toUpperCase()},y))})]}),e.jsxs(E,{sx:{gridColumn:"1 / -1",display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(ee,{onClick:()=>d(!1),children:"Cancel"}),e.jsxs(ee,{onClick:S,variant:"contained",color:"primary",children:[m?"Update":"Add"," Trade"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{variant:"contained",startIcon:e.jsx(Xs,{}),onClick:p,sx:{mb:2},children:"Add Trade"}),a?e.jsx("p",{children:"Loading trades..."}):r.length===0?e.jsx(je,{severity:"info",children:"No manual trades recorded yet."}):e.jsx(dt,{component:He,children:e.jsxs(ut,{size:"small",children:[e.jsx(ht,{children:e.jsxs(Te,{sx:{backgroundColor:"#f5f5f5"},children:[e.jsx(A,{children:"Date"}),e.jsx(A,{children:"Symbol"}),e.jsx(A,{children:"Type"}),e.jsx(A,{align:"right",children:"Qty"}),e.jsx(A,{align:"right",children:"Price"}),e.jsx(A,{align:"right",children:"Total Value"}),e.jsx(A,{children:"Status"}),e.jsx(A,{align:"center",children:"Actions"})]})}),e.jsx(ft,{children:r.map(y=>{const f=parseFloat(y.quantity),C=parseFloat(y.price),_=w(f,C);return e.jsxs(Te,{children:[e.jsx(A,{children:y.execution_date}),e.jsx(A,{children:e.jsx("strong",{children:y.symbol})}),e.jsx(A,{children:y.trade_type.toUpperCase()}),e.jsx(A,{align:"right",children:f.toFixed(4)}),e.jsxs(A,{align:"right",children:["$",C.toFixed(2)]}),e.jsxs(A,{align:"right",children:["$",_.toFixed(2)]}),e.jsx(A,{children:y.status}),e.jsxs(A,{align:"center",children:[e.jsx(We,{size:"small",onClick:()=>j(y),title:"Edit",children:e.jsx(ma,{fontSize:"small"})}),e.jsx(We,{size:"small",color:"error",onClick:()=>P(y.id),title:"Delete",children:e.jsx(fa,{fontSize:"small"})})]})]},y.id)})})]})})]})]}),e.jsx(It,{children:e.jsx(ee,{onClick:()=>s(!1),children:"Close"})})]})]})}const zs=({icon:t,label:s,value:r,unit:n="",color:a="primary",interpretation:o=""})=>{const i=jt();return e.jsx(Q,{sx:{height:"100%",background:i.palette.mode==="dark"?`linear-gradient(135deg, ${i.palette.background.paper} 0%, ${i.palette.background.default} 100%)`:`linear-gradient(135deg, #ffffff 0%, ${i.palette.grey[50]} 100%)`,borderLeft:`4px solid ${i.palette[a]?.main||i.palette.primary.main}`,boxShadow:i.palette.mode==="dark"?"0 2px 8px rgba(0,0,0,0.3)":"0 2px 4px rgba(0,0,0,0.05)",transition:"all 0.3s ease","&:hover":{boxShadow:i.palette.mode==="dark"?"0 4px 12px rgba(0,0,0,0.4)":"0 4px 8px rgba(0,0,0,0.1)",transform:"translateY(-2px)"}},children:e.jsxs(J,{children:[e.jsx(E,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1,children:e.jsx(t,{sx:{color:`${i.palette[a]?.main||i.palette.primary.main}`,fontSize:28}})}),e.jsxs(u,{variant:"h4",sx:{fontWeight:700,mb:.5},children:[r,n&&e.jsx("span",{style:{fontSize:"0.6em",marginLeft:"4px"},children:n})]}),e.jsx(u,{variant:"body2",color:"text.secondary",sx:{mb:1},children:s}),o&&e.jsx(u,{variant:"caption",sx:{color:i.palette.text.secondary,display:"block",fontStyle:"italic"},children:o})]})})},ae=({label:t,value:s,unit:r=""})=>{const n=jt();return e.jsxs(E,{sx:{p:2,backgroundColor:n.palette.background.default,borderRadius:1},children:[e.jsx(u,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:t}),e.jsxs(u,{variant:"h6",sx:{fontWeight:600},children:[s,r&&e.jsx("span",{style:{fontSize:"0.7em",marginLeft:"4px"},children:r})]})]})};function Qd(){ha("Portfolio Dashboard");const{user:t}=Rt(),s=jt();rr(s.breakpoints.down("md"));const{data:r,isLoading:n,refetch:a}=hs({queryKey:["portfolioData"],queryFn:()=>fd(),staleTime:6e4}),o=r?.data?.summary||{},i=r?.data?.positions||[],l=r?.data?.daily_returns||[],c=r?.data?.metadata||{};console.log(" Portfolio Summary Data:",{portfolio_value:o.portfolio_value,total_pnl:o.total_pnl,total_return:o.total_return,return_1m:o.return_1m,return_1y:o.return_1y,volatility:o.volatility_annualized,sharpe_ratio:o.sharpe_ratio,holdings_count:o.holdings_count}),console.log(" Positions:",i.length,"holdings");const d={data:{summary:{portfolio_value:o.portfolio_value,total_cost:o.total_cost,total_pnl:o.total_pnl||null,total_pnl_percent:o.total_pnl_percent||null,total_return:o.total_return||null,holdings_count:o.holdings_count||0,volatility_annualized:o.volatility_annualized,sharpe_ratio:o.sharpe_ratio,sortino_ratio:o.sortino_ratio,calmar_ratio:o.calmar_ratio,max_drawdown:o.max_drawdown,beta:o.beta,return_1m:o.return_1m,return_3m:o.return_3m,return_6m:o.return_6m,return_1y:o.return_1y,return_3y:o.return_3y,return_rolling_1y:o.return_rolling_1y,ytd_return:o.ytd_return,win_rate:o.win_rate,best_day_gain:o.best_day_gain,worst_day_loss:o.worst_day_loss,avg_daily_return:o.avg_daily_return,herfindahl_index:o.herfindahl_index,effective_n:o.effective_n,diversification_ratio:o.diversification_ratio,top_1_weight:o.top_1_weight,top_5_weight:o.top_5_weight,top_10_weight:o.top_10_weight},positions:i,daily_returns:l,benchmark_metrics:o,metadata:c}},m=n,x=a,[g,b]=h.useState(!1),[D,p]=h.useState(null),j=async()=>{b(!0),p(null);try{console.log(" Step 1: Importing from Alpaca...");const C=await(await fetch("/api/portfolio/import/alpaca",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer dev-bypass-token"}})).json();console.log(" Alpaca import complete:",C),console.log(" Step 2: Consolidating from all sources...");const k=await(await fetch("/api/portfolio/sync",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer dev-bypass-token"}})).json();if(console.log(" Portfolio consolidated:",k),k.success){const{consolidated_holdings:R,total_value:U,sources_synced:z}=k.data,G=` Portfolio synced! ${R} holdings from Alpaca (${z.alpaca_positions}), Manual (${z.manual_positions}), and Trades (${z.from_trades}) | Total Value: $${U.toLocaleString()}`;p({type:"success",message:G}),x()}else p({type:"error",message:` Sync failed: ${k.error}`})}catch(f){p({type:"error",message:` Sync error: ${f.message}`})}finally{b(!1)}},P=r?.data?.signals||[],S=h.useMemo(()=>d?.data?.daily_returns?.slice(-252).map((f,C)=>({date:C,return:f,cumulative:f}))||[],[d]),T=h.useMemo(()=>{if(!i||i.length===0)return[];const f={};let C=0;return i.forEach(_=>{const k=_.sector||"Other",R=_.market_value_dollars!=null?Math.abs(_.market_value_dollars):null,U=_.return_percent!=null?_.return_percent:null;f[k]||(f[k]={weight:0,return:0,count:0}),R!=null&&(f[k].weight+=R,C+=R),U!=null&&(f[k].return+=U),f[k].count+=1}),Object.entries(f).map(([_,k])=>({sector:_,weight:C>0?k.weight/C*100:0,return:k.count>0?k.return/k.count:0})).sort((_,k)=>k.weight-_.weight)},[i]),w=h.useMemo(()=>{const f=d?.data?.benchmark_metrics;return f?{return:f.return_1y||f.return_6m||f.return_3m||f.return_1m||null,risk:f.volatility||null,volatility:f.volatility,sharpeRatio:f.sharpe_ratio,alpha:f.alpha,outperformance:f.outperformance,correlation:f.correlation_with_spy}:{return:null,risk:null}},[d]);if(m)return e.jsx(ot,{maxWidth:"lg",sx:{py:4},children:e.jsx(E,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(Je,{})})});const y=Object.values(o).some(f=>f!==0&&f!==void 0)||i&&i.length>0;return e.jsxs(ot,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(E,{sx:{mb:4},children:[e.jsxs(E,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[e.jsxs(E,{children:[e.jsx(u,{variant:"h4",sx:{fontWeight:700,mb:1},children:"Portfolio Dashboard"}),e.jsx(u,{variant:"body2",color:"text.secondary",children:"Professional-grade portfolio analytics - All metrics on one page"})]}),e.jsxs(E,{sx:{display:"flex",gap:1,flexWrap:"wrap",justifyContent:"flex-end"},children:[e.jsx(ee,{variant:"contained",startIcon:e.jsx(Nt,{}),onClick:j,disabled:g,sx:{backgroundColor:f=>f.palette.primary.main,"&:hover":{backgroundColor:f=>f.palette.primary.dark},"&:disabled":{opacity:.6}},children:g?"Syncing...":"Sync with Alpaca"}),e.jsx(Gd,{}),e.jsx(Yd,{})]})]}),D&&e.jsx(Q,{sx:{p:2,mb:2,backgroundColor:D.type==="success"?f=>f.palette.success.light:f=>f.palette.error.light,border:`1px solid ${D.type==="success"?"#4caf50":"#f44336"}`},children:e.jsx(u,{variant:"body2",sx:{color:D.type==="success"?"#2e7d32":"#c62828"},children:D.message})})]}),!y&&e.jsx(Q,{sx:{p:4,mb:4},children:e.jsx(u,{align:"center",color:"text.secondary",children:"No portfolio data available. Add holdings to see comprehensive metrics."})}),y&&e.jsxs(e.Fragment,{children:[e.jsxs(E,{sx:{mb:4},children:[e.jsxs(u,{variant:"h5",sx:{fontWeight:700,mb:3,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Wr,{sx:{color:"primary.main"}})," Executive Summary & Top Holdings"]}),e.jsxs(v,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(zs,{icon:Qs,label:"Portfolio Value",value:o.portfolio_value!=null?`$${o.portfolio_value.toLocaleString(void 0,{maximumFractionDigits:2})}`:"N/A",unit:"",color:"success"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(zs,{icon:Wr,label:"Total P&L",value:o.total_pnl!=null?`$${o.total_pnl.toLocaleString(void 0,{maximumFractionDigits:2})}`:"N/A",unit:"",color:o.total_pnl>=0?"success":"error"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(zs,{icon:Tn,label:"Return %",value:o.total_pnl_percent!=null?o.total_pnl_percent.toFixed(2):"N/A",unit:"%",color:o.total_pnl_percent>=0?"success":"error"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(zs,{icon:Zt,label:"Holdings",value:o.holdings_count!=null?o.holdings_count:"N/A",unit:"positions",color:"info"})})]}),e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"Portfolio Holdings Distribution (All Positions)"}),e.jsxs(J,{children:[e.jsx(Ne,{width:"100%",height:400,children:e.jsxs($o,{children:[e.jsx(Bo,{data:i.filter(f=>f.weight_percent!==null&&f.weight_percent!==void 0&&parseFloat(f.weight_percent)>0).map(f=>({name:f.symbol,value:parseFloat(f.weight_percent)})),cx:"50%",cy:"50%",labelLine:!1,label:({name:f,value:C})=>C>1?`${f}: ${C.toFixed(1)}%`:f,outerRadius:110,fill:"#8884d8",dataKey:"value",children:i.map((f,C)=>{const _=["#1976d2","#43a047","#ffb300","#8e24aa","#e53935","#00acc1","#6a1b9a","#0277bd","#ef6c00","#d32f2f","#1e88e5","#43a047","#fb8c00","#5e35b1","#00838f"];return e.jsx(zo,{fill:_[C%_.length]},`cell-${C}`)})}),e.jsx(Le,{formatter:f=>`${f!=null?f.toFixed(2):"0.00"}%`})]})}),i.length>5&&e.jsx("div",{style:{marginTop:16,fontSize:"0.875rem",color:"#666"},children:e.jsxs("p",{children:["Showing all ",i.length," positions  Positions < 1% shown by symbol only"]})})]})]}),e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"Holdings Performance & Gains/Losses",subheader:"Current P&L by position"}),e.jsx(J,{children:e.jsx(Ne,{width:"100%",height:300,children:e.jsxs(vt,{data:i.slice(0,15).map((f,C)=>({name:f.symbol,gain:f.gain_loss_dollars!==null&&f.gain_loss_dollars!==void 0?parseFloat(f.gain_loss_dollars):null,value:f.market_value_dollars!==null&&f.market_value_dollars!==void 0?parseFloat(f.market_value_dollars):null})),layout:"vertical",margin:{top:5,right:30,left:80,bottom:5},children:[e.jsx(Ke,{strokeDasharray:"3 3"}),e.jsx(Ye,{type:"number"}),e.jsx(Re,{dataKey:"name",type:"category",width:75}),e.jsx(Le,{formatter:f=>`$${f?.toFixed(2)||"0.00"}`,contentStyle:{backgroundColor:"#fff",border:"1px solid #ccc"}}),e.jsx(lt,{}),e.jsx(Oe,{dataKey:"gain",fill:"#43a047",name:"Gain/Loss ($)",radius:[0,8,8,0]}),e.jsx(Oe,{dataKey:"value",fill:"#1976d2",name:"Position Value ($)",radius:[0,8,8,0]})]})})})]})]}),P&&P.length>0&&e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"Trading Signals",subheader:`Latest signal recommendations - ${P.length} signals`}),e.jsxs(J,{children:[e.jsx(v,{container:!0,spacing:2,children:P.slice(0,10).map((f,C)=>e.jsx(v,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsxs(E,{sx:{p:2,backgroundColor:_=>_.palette.mode==="dark"?"#1e1e1e":"#f5f5f5",borderRadius:1,border:"1px solid",borderColor:_=>_.palette.mode==="dark"?"#333":"#ddd"},children:[e.jsx(E,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:e.jsx(u,{variant:"h6",sx:{fontWeight:600},children:f.symbol||f.ticker})}),f.score&&e.jsxs(u,{variant:"caption",color:"text.secondary",children:["Score: ",(f.score*100).toFixed(1),"%"]}),f.timestamp&&e.jsx(u,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:new Date(f.timestamp).toLocaleDateString()})]})},C))}),P.length===0&&e.jsx(u,{variant:"body2",color:"text.secondary",align:"center",sx:{py:2},children:"No trading signals available at this time."})]})]}),e.jsxs(E,{sx:{mb:4,mt:6},children:[e.jsxs(u,{variant:"h5",sx:{fontWeight:700,mb:3,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Qs,{sx:{color:"success.main"}})," Performance Metrics & Analysis"]}),e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"Core Performance Metrics",subheader:"Total returns across different timeframes"}),e.jsx(J,{children:e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Total Return",value:o.total_return!=null?o.total_return.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"1Y Return",value:o.return_1y!=null?o.return_1y.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"3Y Return",value:o.return_3y!=null?o.return_3y.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"YTD Return",value:o.ytd_return!=null?o.ytd_return.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Portfolio Value",value:o.portfolio_value!=null?`$${(o.portfolio_value/1e3).toFixed(1)}`:"N/A",unit:"K"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Holdings Count",value:i.length||"0",unit:""})})]})})]}),e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"Rolling Period Returns",subheader:"Returns across multiple time horizons"}),e.jsxs(J,{children:[e.jsxs(v,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"1M",value:o.return_1m!=null?o.return_1m.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"3M",value:o.return_3m!=null?o.return_3m.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"6M",value:o.return_6m!=null?o.return_6m.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"1Y Rolling",value:o.return_rolling_1y!=null?o.return_rolling_1y.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"YTD",value:o.ytd_return!=null?o.ytd_return.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Daily Volatility",value:o.volatility_annualized!=null?(o.volatility_annualized/Math.sqrt(252)).toFixed(3):"N/A",unit:"%"})})]}),e.jsx(Ne,{width:"100%",height:320,children:e.jsxs(Br,{data:[{period:"1M",return:o.return_1m},{period:"3M",return:o.return_3m},{period:"6M",return:o.return_6m},{period:"1Y",return:o.return_rolling_1y},{period:"YTD",return:o.ytd_return}],children:[e.jsx(Ke,{strokeDasharray:"3 3"}),e.jsx(Ye,{dataKey:"period"}),e.jsx(Re,{label:{value:"Return (%)",angle:-90,position:"insideLeft"}}),e.jsx(Le,{formatter:f=>`${f?.toFixed(2)}%`}),e.jsx(lt,{}),e.jsx(Yt,{type:"monotone",dataKey:"return",stroke:"#1976d2",strokeWidth:2.5,dot:{fill:"#1976d2",r:6},name:"Period Return"})]})})]})]}),e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"Cumulative Performance vs SPY",subheader:"Portfolio growth compared to S&P 500 benchmark"}),e.jsx(J,{children:e.jsx(Ne,{width:"100%",height:350,children:e.jsxs(Br,{data:S.length>0?S:[{date:0,portfolio:1e4,spy:1e4},{date:252,portfolio:12e3,spy:11500}],children:[e.jsx(Ke,{strokeDasharray:"3 3"}),e.jsx(Ye,{dataKey:"date",label:{value:"Trading Days",position:"insideBottomRight",offset:-10}}),e.jsx(Re,{label:{value:"Value ($)",angle:-90,position:"insideLeft"}}),e.jsx(Le,{formatter:f=>`$${f?.toFixed(0)||"0"}`,labelFormatter:f=>`Day ${f}`}),e.jsx(lt,{}),e.jsx(Yt,{type:"monotone",dataKey:"portfolio",stroke:"#1976d2",strokeWidth:2.5,dot:!1,name:"Portfolio",isAnimationActive:!1}),e.jsx(Yt,{type:"monotone",dataKey:"spy",stroke:"#43a047",strokeWidth:2,dot:!1,name:"SPY Benchmark",strokeDasharray:"5 5",isAnimationActive:!1})]})})})]}),e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"SPY Benchmark Comparison",subheader:"How your portfolio compares to the S&P 500"}),e.jsxs(J,{children:[e.jsxs(v,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(E,{sx:{p:2,backgroundColor:f=>f.palette.background.default,borderRadius:1},children:[e.jsx(u,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"Portfolio Return"}),e.jsx(u,{variant:"h6",sx:{fontWeight:600,color:o.total_return!==null&&o.total_return!==void 0?o.total_return>=0?"success.main":"error.main":"text.secondary"},children:o.total_return!==null&&o.total_return!==void 0?`${o.total_return.toFixed(2)}%`:"N/A"})]})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(E,{sx:{p:2,backgroundColor:f=>f.palette.background.default,borderRadius:1},children:[e.jsx(u,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"SPY Return"}),e.jsx(u,{variant:"h6",sx:{fontWeight:600,color:"info.main"},children:w.return!==null&&w.return!==void 0?`${w.return.toFixed(2)}%`:"N/A"})]})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(E,{sx:{p:2,backgroundColor:f=>f.palette.background.default,borderRadius:1},children:[e.jsx(u,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"Outperformance"}),o.total_return!==null&&o.total_return!==void 0&&w?.return!==null&&w?.return!==void 0?e.jsxs(u,{variant:"h6",sx:{fontWeight:600,color:o.total_return-w.return>=0?"success.main":"error.main"},children:[(o.total_return-w.return).toFixed(2),"%"]}):e.jsx(u,{variant:"h6",sx:{fontWeight:600,color:"text.secondary"},children:"N/A"})]})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(E,{sx:{p:2,backgroundColor:f=>f.palette.background.default,borderRadius:1},children:[e.jsx(u,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"Correlation"}),e.jsx(u,{variant:"h6",sx:{fontWeight:600},children:o.correlation_with_spy!==null&&o.correlation_with_spy!==void 0?o.correlation_with_spy.toFixed(2):""})]})})]}),e.jsx(Ne,{width:"100%",height:300,children:e.jsxs(vt,{data:[{name:"Portfolio",return:o.total_return,risk:o.volatility_annualized},{name:"SPY",return:w?.return,risk:w?.risk}],children:[e.jsx(Ke,{strokeDasharray:"3 3"}),e.jsx(Ye,{dataKey:"name"}),e.jsx(Re,{yAxisId:"left",label:{value:"Return (%)",angle:-90,position:"insideLeft"}}),e.jsx(Re,{yAxisId:"right",orientation:"right",label:{value:"Volatility (%)",angle:90,position:"insideRight"}}),e.jsx(Le,{}),e.jsx(lt,{}),e.jsx(Oe,{yAxisId:"left",dataKey:"return",fill:"#1976d2",name:"Total Return %",radius:[8,8,0,0]}),e.jsx(Oe,{yAxisId:"right",dataKey:"risk",fill:"#ff9800",name:"Volatility %",radius:[8,8,0,0]})]})}),e.jsxs(u,{variant:"body2",sx:{mt:3,p:2,backgroundColor:f=>f.palette.mode==="dark"?"rgba(25, 118, 210, 0.1)":"rgba(25, 118, 210, 0.05)",borderRadius:1},children:[e.jsx("strong",{children:"Analysis:"})," ",o.correlation_with_spy>.8?" Your portfolio moves closely with the market (High correlation)":o.correlation_with_spy>.5?" Moderate correlation with the market":" Low correlation - Good diversification from the broad market",". Your beta of ",o.beta?.toFixed(2)||"1.0"," means ",o.beta>1.2?"your portfolio is MORE volatile than the market.":o.beta<.8?"your portfolio is LESS volatile than the market.":"your portfolio moves roughly with the market."]})]})]}),e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"Daily Performance Impact",subheader:"Win rate, best/worst days, and daily volatility"}),e.jsxs(J,{children:[e.jsxs(v,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Win Rate",value:o.win_rate!==null&&o.win_rate!==void 0?o.win_rate.toFixed(1):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Best Day",value:o.best_day_gain!==null&&o.best_day_gain!==void 0?o.best_day_gain.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Worst Day",value:o.worst_day_loss!==null&&o.worst_day_loss!==void 0?o.worst_day_loss.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Top 5 Days Impact",value:o.top_5_days_contribution!==null&&o.top_5_days_contribution!==void 0?o.top_5_days_contribution.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Positive Days",value:o.win_rate!==null&&o.win_rate!==void 0?o.win_rate.toFixed(1):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Avg Daily Vol",value:o.volatility_annualized!==null&&o.volatility_annualized!==void 0?(o.volatility_annualized/Math.sqrt(252)).toFixed(3):"N/A",unit:"%"})})]}),e.jsx(Ne,{width:"100%",height:300,children:e.jsxs(vt,{data:[...o.win_rate!==null&&o.win_rate!==void 0?[{metric:"Win Rate",value:o.win_rate}]:[],...o.best_day_gain!==null&&o.best_day_gain!==void 0?[{metric:"Best Day",value:o.best_day_gain}]:[],...o.worst_day_loss!==null&&o.worst_day_loss!==void 0?[{metric:"Worst Day",value:Math.abs(o.worst_day_loss)}]:[],...o.top_5_days_contribution!==null&&o.top_5_days_contribution!==void 0?[{metric:"Top 5 Days",value:o.top_5_days_contribution}]:[]],children:[e.jsx(Ke,{strokeDasharray:"3 3"}),e.jsx(Ye,{dataKey:"metric"}),e.jsx(Re,{label:{value:"Return (%)",angle:-90,position:"insideLeft"}}),e.jsx(Le,{formatter:f=>`${f?.toFixed(2)}%`}),e.jsx(Oe,{dataKey:"value",fill:"#43a047",name:"Value",radius:[8,8,0,0]})]})})]})]}),e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"Relative Performance Metrics",subheader:"How you're tracking against SPY in detail"}),e.jsx(J,{children:e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Tracking Error",value:o.tracking_error!==null&&o.tracking_error!==void 0?o.tracking_error.toFixed(4):"N/A",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Active Return",value:o.active_return!==null&&o.active_return!==void 0?o.active_return.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Information Ratio",value:o.information_ratio!==null&&o.information_ratio!==void 0?o.information_ratio.toFixed(2):"N/A",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Rel Volatility",value:o.relative_volatility!==null&&o.relative_volatility!==void 0?o.relative_volatility.toFixed(2):"N/A",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Beta vs SPY",value:o.beta!==null&&o.beta!==void 0?o.beta.toFixed(2):"N/A",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Alpha",value:o.alpha!==null&&o.alpha!==void 0?o.alpha.toFixed(2):"N/A",unit:"%"})})]})})]})]}),e.jsxs(E,{sx:{mb:4,mt:6},children:[e.jsxs(u,{variant:"h5",sx:{fontWeight:700,mb:3,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Zt,{sx:{color:"error.main"}})," Risk Metrics & Quality Indicators"]}),e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"Volatility & Risk Metrics",subheader:"Core risk indicators for your portfolio"}),e.jsx(J,{children:e.jsxs(v,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Volatility",value:o.volatility_annualized?.toFixed(2)||"",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Downside Dev",value:o.downside_deviation?.toFixed(2)||"",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Beta vs SPY",value:o.beta?.toFixed(2)||"",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Max Drawdown",value:o.max_drawdown?.toFixed(2)||"",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Return/Risk",value:o.return_risk_ratio?.toFixed(2)||"",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Correlation SPY",value:o.correlation_with_spy!==null&&o.correlation_with_spy!==void 0?o.correlation_with_spy.toFixed(2):"",unit:""})})]})})]}),e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"Risk-Adjusted Return Ratios",subheader:"Sharpe, Sortino, Calmar & Information ratios"}),e.jsxs(J,{children:[e.jsxs(v,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Sharpe Ratio",value:o.sharpe_ratio?.toFixed(3)||"",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Sortino Ratio",value:o.sortino_ratio?.toFixed(3)||"",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Calmar Ratio",value:o.calmar_ratio?.toFixed(3)||"",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Treynor Ratio",value:o.treynor_ratio?.toFixed(3)||"",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Information Ratio",value:o.information_ratio?.toFixed(2)||"",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Alpha",value:o.alpha?.toFixed(2)||"",unit:"%"})})]}),e.jsx(Ne,{width:"100%",height:320,children:e.jsxs(vt,{data:[{metric:"Sharpe",value:(o.sharpe_ratio||0)*2},{metric:"Sortino",value:(o.sortino_ratio||0)*2},{metric:"Calmar",value:(o.calmar_ratio||0)*10},{metric:"Info",value:(o.information_ratio||0)*5}],children:[e.jsx(Ke,{strokeDasharray:"3 3"}),e.jsx(Ye,{dataKey:"metric"}),e.jsx(Re,{label:{value:"Ratio Value (normalized)",angle:-90,position:"insideLeft"}}),e.jsx(Le,{formatter:f=>`${f?.toFixed(3)}`}),e.jsx(Oe,{dataKey:"value",fill:"#1976d2",name:"Ratio",radius:[8,8,0,0]})]})})]})]}),e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"Drawdown & Recovery",subheader:"Portfolio drawdown depth and recovery time"}),e.jsxs(J,{children:[e.jsxs(v,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Max Drawdown",value:o.max_drawdown?.toFixed(2)||"0.00",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Current DD",value:o.current_drawdown?.toFixed(2)||"0.00",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Avg Drawdown",value:o.avg_drawdown?.toFixed(2)||"0.00",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"DD Duration",value:o.drawdown_duration_days||"0",unit:"days"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Recovery Time",value:o.max_recovery_days||"0",unit:"days"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Calmar Ratio",value:o.calmar_ratio?.toFixed(3)||"0.000",unit:""})})]}),e.jsx(Ne,{width:"100%",height:300,children:e.jsxs(Dl,{data:[{date:"Current",drawdown:o.current_drawdown||0,maxDD:o.max_drawdown||0},{date:"Avg DD",drawdown:o.avg_drawdown||0,maxDD:o.max_drawdown||0}],children:[e.jsx(Ke,{strokeDasharray:"3 3"}),e.jsx(Ye,{dataKey:"date"}),e.jsx(Re,{label:{value:"Drawdown (%)",angle:-90,position:"insideLeft"}}),e.jsx(Le,{formatter:f=>`${f?.toFixed(2)}%`}),e.jsx(lt,{}),e.jsx($n,{type:"monotone",dataKey:"drawdown",stackId:"1",stroke:"#ff9800",fill:"#ff9800",opacity:.6,name:"Current Drawdown"}),e.jsx($n,{type:"monotone",dataKey:"maxDD",stackId:"1",stroke:"#f44336",fill:"#f44336",opacity:.6,name:"Max Drawdown"})]})})]})]}),e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"Tail Risk Analysis",subheader:"VaR, CVaR, Skewness, and Kurtosis"}),e.jsxs(J,{children:[e.jsxs(v,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"VaR 95%",value:o.var_95?.toFixed(2)||"0.00",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"VaR 99%",value:o.var_99?.toFixed(2)||"0.00",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"CVaR 95%",value:o.cvar_95?.toFixed(2)||"0.00",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Skewness",value:o.skewness?.toFixed(3)||"0.000",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Kurtosis",value:o.kurtosis?.toFixed(3)||"0.000",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Semi-Skew",value:o.semi_skewness?.toFixed(3)||"0.000",unit:""})})]}),e.jsx(Ne,{width:"100%",height:300,children:e.jsxs(vt,{data:[{metric:"Skewness",value:o.skewness||0},{metric:"Kurtosis",value:(o.kurtosis||0)/3},{metric:"VaR 95%",value:o.var_95||0},{metric:"CVaR 95%",value:o.cvar_95||0}],children:[e.jsx(Ke,{strokeDasharray:"3 3"}),e.jsx(Ye,{dataKey:"metric"}),e.jsx(Re,{label:{value:"Value",angle:-90,position:"insideLeft"}}),e.jsx(Le,{formatter:f=>`${f?.toFixed(3)}`}),e.jsx(Oe,{dataKey:"value",fill:"#e53935",name:"Value",radius:[8,8,0,0]})]})})]})]}),e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"Portfolio Risk Profile (Holistic View)",subheader:"Visual snapshot of all risk dimensions"}),e.jsx(J,{children:e.jsx(Ne,{width:"100%",height:350,children:e.jsxs(_l,{data:[...o.volatility_annualized!==null&&o.volatility_annualized!==void 0?[{metric:"Volatility",value:Math.min(o.volatility_annualized,100)}]:[],...o.max_drawdown!==null&&o.max_drawdown!==void 0?[{metric:"Drawdown",value:Math.min(Math.abs(o.max_drawdown),100)}]:[],...o.skewness!==null&&o.skewness!==void 0?[{metric:"Skewness",value:Math.min(Math.abs(o.skewness*20),100)}]:[],...o.kurtosis!==null&&o.kurtosis!==void 0?[{metric:"Kurtosis",value:Math.min(o.kurtosis*5,100)}]:[],...o.portfolio_beta!==null&&o.portfolio_beta!==void 0?[{metric:"Beta",value:Math.min(o.portfolio_beta*50,100)}]:[],...o.diversification_score!==null&&o.diversification_score!==void 0?[{metric:"Diversification",value:Math.min(o.diversification_score/10,100)}]:[]],children:[e.jsx(Tl,{}),e.jsx(kl,{dataKey:"metric"}),e.jsx(El,{angle:90,domain:[0,100]}),e.jsx(Il,{name:"Risk Profile",dataKey:"value",stroke:"#ff9800",fill:"#ff9800",fillOpacity:.6}),e.jsx(Le,{formatter:f=>`${f?.toFixed(1)}`})]})})})]})]}),e.jsxs(E,{sx:{mb:4,mt:6},children:[e.jsxs(u,{variant:"h5",sx:{fontWeight:700,mb:3,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ro,{sx:{color:"primary.main"}})," Allocation & Diversification"]}),e.jsx(u,{variant:"h6",sx:{fontWeight:600,mb:3,color:"text.secondary"},children:"Core Allocation Metrics"}),e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"Concentration & Diversification Metrics"}),e.jsx(J,{children:e.jsxs(v,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Top 1 Position",value:o.top_1_weight!=null?o.top_1_weight.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Top 5 Positions",value:o.top_5_weight!=null?o.top_5_weight.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Top 10 Positions",value:o.top_10_weight!=null?o.top_10_weight.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Herfindahl Index",value:o.herfindahl_index!=null?o.herfindahl_index.toFixed(4):"N/A",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Effective N",value:o.effective_n!=null?o.effective_n.toFixed(2):"N/A",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Diversification Ratio",value:o.diversification_ratio!=null?o.diversification_ratio.toFixed(2):"N/A",unit:""})})]})})]}),e.jsx(u,{variant:"h6",sx:{fontWeight:600,mt:4,mb:3,color:"text.secondary"},children:"Holdings Distribution & Performance"}),e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"Holdings by Weight Distribution"}),e.jsx(J,{children:e.jsx(Ne,{width:"100%",height:350,children:e.jsxs(vt,{data:i.map(f=>({symbol:f.symbol,weight:f.weight_percent!==null&&f.weight_percent!==void 0?parseFloat(f.weight_percent):null,value:f.market_value_dollars!==null&&f.market_value_dollars!==void 0?parseFloat(f.market_value_dollars):null})),layout:"vertical",margin:{top:5,right:30,left:80,bottom:5},children:[e.jsx(Ke,{strokeDasharray:"3 3"}),e.jsx(Ye,{type:"number"}),e.jsx(Re,{dataKey:"symbol",type:"category",width:70}),e.jsx(Le,{formatter:f=>f?.toFixed(2)}),e.jsx(lt,{}),e.jsx(Oe,{dataKey:"weight",fill:"#1976d2",name:"Weight %",radius:[0,8,8,0]})]})})})]}),e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"Position Market Values & Gains"}),e.jsx(J,{children:e.jsx(Ne,{width:"100%",height:300,children:e.jsxs(vt,{data:i.map(f=>({symbol:f.symbol,value:f.market_value_dollars!==null&&f.market_value_dollars!==void 0?parseFloat(f.market_value_dollars):null,gain:f.gain_loss_dollars!==null&&f.gain_loss_dollars!==void 0?parseFloat(f.gain_loss_dollars):null})),children:[e.jsx(Ke,{strokeDasharray:"3 3"}),e.jsx(Ye,{dataKey:"symbol"}),e.jsx(Re,{yAxisId:"left",label:{value:"Market Value ($)",angle:-90,position:"insideLeft"}}),e.jsx(Re,{yAxisId:"right",orientation:"right",label:{value:"Gain/Loss ($)",angle:90,position:"insideRight"}}),e.jsx(Le,{formatter:f=>`$${f?.toFixed(0)}`}),e.jsx(lt,{}),e.jsx(Oe,{yAxisId:"left",dataKey:"value",fill:"#1976d2",name:"Position Value ($)",radius:[8,8,0,0]}),e.jsx(Oe,{yAxisId:"right",dataKey:"gain",fill:"#43a047",name:"Unrealized Gain/Loss ($)",radius:[8,8,0,0]})]})})})]}),e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"Sector & Industry Diversification"}),e.jsxs(J,{children:[e.jsxs(v,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Num Sectors",value:o.num_sectors||"0",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Num Industries",value:o.num_industries||"0",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Sector Concentration",value:o.sector_concentration?.toFixed(2)||"0.00",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Avg Correlation",value:o.avg_correlation?.toFixed(2)||"0.50",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Top Sector",value:o.top_sector||"N/A",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Best Performer",value:o.best_performer_sector||"N/A",unit:""})})]}),e.jsx(Ne,{width:"100%",height:300,children:e.jsxs(vt,{data:T.length>0?T:[{sector:"No Data",weight:0,return:0}],children:[e.jsx(Ke,{strokeDasharray:"3 3"}),e.jsx(Ye,{dataKey:"sector"}),e.jsx(Re,{yAxisId:"left",label:{value:"Weight (%)",angle:-90,position:"insideLeft"}}),e.jsx(Re,{yAxisId:"right",orientation:"right",label:{value:"Avg Return (%)",angle:90,position:"insideRight"}}),e.jsx(Le,{}),e.jsx(lt,{}),e.jsx(Oe,{yAxisId:"left",dataKey:"weight",fill:"#1976d2",name:"Portfolio Weight %",radius:[8,8,0,0]}),e.jsx(Oe,{yAxisId:"right",dataKey:"return",fill:"#43a047",name:"Avg Sector Return %",radius:[8,8,0,0]})]})})]})]}),e.jsx(u,{variant:"h6",sx:{fontWeight:600,mt:4,mb:3,color:"text.secondary"},children:"Position-Level Analysis"}),e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"Volatility & Risk Contribution by Position"}),e.jsx(J,{children:e.jsx(Ne,{width:"100%",height:300,children:e.jsxs(zr,{data:i.map(f=>({symbol:f.symbol,volatility:parseFloat(f.volatility_percent)||0,risk:parseFloat(f.risk_contribution_percent)||0,weight:parseFloat(f.weight_percent)||0})),children:[e.jsx(Ke,{strokeDasharray:"3 3"}),e.jsx(Ye,{dataKey:"symbol"}),e.jsx(Re,{yAxisId:"left",label:{value:"Volatility (%)",angle:-90,position:"insideLeft"}}),e.jsx(Re,{yAxisId:"right",orientation:"right",label:{value:"Risk Contrib (%) / Weight",angle:90,position:"insideRight"}}),e.jsx(Le,{}),e.jsx(lt,{}),e.jsx(Oe,{yAxisId:"left",dataKey:"volatility",fill:"#ff9800",name:"Volatility %",radius:[8,8,0,0]}),e.jsx(Oe,{yAxisId:"right",dataKey:"risk",fill:"#e53935",name:"Risk Contribution %",radius:[8,8,0,0]})]})})})]}),e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"Return Contribution by Holding"}),e.jsx(J,{children:e.jsx(Ne,{width:"100%",height:300,children:e.jsxs(vt,{data:i.map(f=>({symbol:f.symbol,return:parseFloat(f.return_contribution_percent)||0,beta:parseFloat(f.beta)||0})),children:[e.jsx(Ke,{strokeDasharray:"3 3"}),e.jsx(Ye,{dataKey:"symbol"}),e.jsx(Re,{yAxisId:"left",label:{value:"Return Contrib (%)",angle:-90,position:"insideLeft"}}),e.jsx(Re,{yAxisId:"right",orientation:"right",label:{value:"Beta",angle:90,position:"insideRight"}}),e.jsx(Le,{}),e.jsx(lt,{}),e.jsx(Oe,{yAxisId:"left",dataKey:"return",fill:"#43a047",name:"Return Contribution %",radius:[8,8,0,0]}),e.jsx(Oe,{yAxisId:"right",dataKey:"beta",fill:"#1976d2",name:"Beta",radius:[8,8,0,0]})]})})})]}),e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"Position Correlation with Portfolio"}),e.jsxs(J,{children:[e.jsx(Ne,{width:"100%",height:300,children:e.jsxs(vt,{data:i.filter(f=>f.correlation_with_portfolio!==null&&f.correlation_with_portfolio!==void 0&&f.weight_percent!==null&&f.weight_percent!==void 0).map(f=>({symbol:f.symbol,correlation:parseFloat(f.correlation_with_portfolio),weight:parseFloat(f.weight_percent)})),children:[e.jsx(Ke,{strokeDasharray:"3 3"}),e.jsx(Ye,{dataKey:"symbol"}),e.jsx(Re,{label:{value:"Correlation / Weight (%)",angle:-90,position:"insideLeft"}}),e.jsx(Le,{formatter:f=>f?.toFixed(2)}),e.jsx(lt,{}),e.jsx(Oe,{dataKey:"correlation",fill:"#9c27b0",name:"Correlation with Portfolio",radius:[8,8,0,0]})]})}),e.jsx(u,{variant:"caption",color:"text.secondary",sx:{mt:2,display:"block"},children:"Correlation > 0.7: Strong positive correlation with portfolio movements | Correlation < 0.5: Good diversifier"})]})]}),e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"Top Holdings Correlation Matrix",subheader:"Asset correlation structure (top 8 positions)"}),e.jsxs(J,{children:[e.jsx(Ne,{width:"100%",height:350,children:e.jsxs(zr,{data:i.slice(0,8).filter(f=>f.correlation_with_portfolio!==null&&f.correlation_with_portfolio!==void 0&&f.volatility_percent!==null&&f.volatility_percent!==void 0&&f.weight_percent!==null&&f.weight_percent!==void 0).map((f,C)=>({symbol:f.symbol,correlation_market:parseFloat(f.correlation_with_portfolio),volatility:parseFloat(f.volatility_percent),weight:parseFloat(f.weight_percent)})),layout:"vertical",margin:{top:5,right:30,left:100,bottom:5},children:[e.jsx(Ke,{strokeDasharray:"3 3"}),e.jsx(Ye,{type:"number"}),e.jsx(Re,{dataKey:"symbol",type:"category",width:90}),e.jsx(Le,{contentStyle:{backgroundColor:"#fff",border:"1px solid #ccc"},formatter:f=>f?.toFixed(2)||"0"}),e.jsx(lt,{}),e.jsx(Oe,{dataKey:"correlation_market",fill:"#1976d2",name:"Market Correlation",radius:[0,8,8,0]}),e.jsx(Oe,{dataKey:"volatility",fill:"#ff6f00",name:"Volatility (Annualized %)",radius:[0,8,8,0]})]})}),e.jsx(u,{variant:"caption",color:"text.secondary",sx:{mt:2,display:"block"},children:"Shows how each holding correlates with the broader market and its individual volatility. Higher correlation = moves with market; Higher volatility = more price swings."})]})]})]}),e.jsxs(E,{sx:{mb:4,mt:6},children:[e.jsxs(u,{variant:"h5",sx:{fontWeight:700,mb:3,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Tn,{sx:{color:"primary.main"}})," Portfolio Efficiency"]}),e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"Portfolio Efficiency Metrics"}),e.jsx(J,{children:e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Return/Risk Ratio",value:o.return_risk_ratio!=null?o.return_risk_ratio.toFixed(2):"N/A",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Cash Drag",value:o.cash_drag!=null?o.cash_drag.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Turnover Ratio",value:o.turnover_ratio!=null?o.turnover_ratio.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Transaction Costs",value:o.transaction_costs!=null?o.transaction_costs.toFixed(2):"N/A",unit:"bps"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Sector Momentum",value:o.sector_momentum!=null?o.sector_momentum.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(ae,{label:"Risk-Free Rate",value:c.risk_free_rate!=null?c.risk_free_rate:"N/A",unit:"%"})})]})})]}),e.jsxs(Q,{sx:{mb:4},children:[e.jsx(Se,{title:"Top Holdings Attribution",action:e.jsx(ee,{size:"small",startIcon:e.jsx(Nt,{}),onClick:()=>x(),children:"Refresh"})}),e.jsx(J,{sx:{overflowX:"auto"},children:i.length===0?e.jsx(u,{color:"text.secondary",align:"center",sx:{py:4},children:"No holdings data available."}):e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:"700px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:`2px solid ${s.palette.divider}`,backgroundColor:s.palette.background.default},children:[e.jsx("th",{style:{textAlign:"left",padding:"12px",fontWeight:700},children:"Symbol"}),e.jsx("th",{style:{textAlign:"right",padding:"12px",fontWeight:700},children:"Weight %"}),e.jsx("th",{style:{textAlign:"right",padding:"12px",fontWeight:700},children:"Value $"}),e.jsx("th",{style:{textAlign:"right",padding:"12px",fontWeight:700},children:"Gain/Loss $"}),e.jsx("th",{style:{textAlign:"right",padding:"12px",fontWeight:700},children:"Return %"})]})}),e.jsx("tbody",{children:i.map((f,C)=>{const _=f.weight_percent!==null&&f.weight_percent!==void 0?parseFloat(f.weight_percent).toFixed(2):"N/A",k=f.market_value_dollars!==null&&f.market_value_dollars!==void 0?`$${parseFloat(f.market_value_dollars).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`:"N/A",R=f.gain_loss_dollars!==null&&f.gain_loss_dollars!==void 0?`$${parseFloat(f.gain_loss_dollars).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`:"N/A",U=f.gain_loss_dollars!==null&&f.gain_loss_dollars!==void 0?parseFloat(f.gain_loss_dollars)>=0?s.palette.success.main:s.palette.error.main:"inherit",z=f.return_percent!==null&&f.return_percent!==void 0?parseFloat(f.return_percent).toFixed(2):"N/A",G=f.return_percent!==null&&f.return_percent!==void 0?parseFloat(f.return_percent)>=0?s.palette.success.main:s.palette.error.main:"inherit";return e.jsxs("tr",{style:{borderBottom:`1px solid ${s.palette.divider}`},children:[e.jsx("td",{style:{padding:"12px",fontWeight:500},children:f.symbol}),e.jsxs("td",{style:{textAlign:"right",padding:"12px"},children:[_,"%"]}),e.jsx("td",{style:{textAlign:"right",padding:"12px"},children:k}),e.jsx("td",{style:{textAlign:"right",padding:"12px",color:U},children:R}),e.jsxs("td",{style:{textAlign:"right",padding:"12px",color:G,fontWeight:600},children:[z,"%"]})]},C)})})]})})]})]}),e.jsx(Q,{sx:{backgroundColor:s.palette.background.default},children:e.jsx(J,{children:e.jsxs(u,{variant:"caption",color:"text.secondary",children:[e.jsx("strong",{children:"Calculation Basis:"})," ",c.calculation_basis??"N/A"," ",e.jsx("strong",{children:" Benchmark:"})," ",c.benchmark??"N/A"," ",e.jsx("strong",{children:" Risk-Free Rate:"})," ",c.risk_free_rate??"N/A"," ",e.jsx("strong",{children:" Data Points:"})," ",c.data_points??"N/A"," ",e.jsx("strong",{children:" Portfolio Value:"})," ",c.portfolio_value!==null&&c.portfolio_value!==void 0?`$${c.portfolio_value.toLocaleString()}`:"N/A"]})})})]})]})}function Zd(){const[t,s]=h.useState(!1),[r,n]=h.useState(null),[a,o]=h.useState(null),i=["#8884d8","#82ca9d","#ffc658","#ff7c7c","#8dd1e1","#d084d0","#a4de6c","#ffb347"],l=async()=>{s(!0),o(null);try{const p=await ke.get("/api/optimization/analysis");console.log("[PortfolioOptimizerNew] API Response:",p.data);const j=p.data?.data?.analysis||p.data?.analysis||p.data;console.log("[PortfolioOptimizerNew] Analysis Data:",j),j?n(j):(o("No analysis data returned from server"),n(null))}catch(p){console.error("[PortfolioOptimizerNew] Fetch Error:",p),o(p.response?.data?.error||p.message)}finally{s(!1)}};if(h.useEffect(()=>{l()},[]),t&&!r)return e.jsx(ot,{maxWidth:"lg",sx:{py:4,textAlign:"center"},children:e.jsx(Je,{})});if(!r)return e.jsx(ot,{maxWidth:"lg",sx:{py:4},children:a?e.jsxs(je,{severity:"error",children:[e.jsx(u,{variant:"h6",sx:{mb:1},children:"Unable to load optimization data"}),e.jsx(u,{variant:"body2",children:a}),e.jsx(ee,{variant:"outlined",onClick:l,sx:{mt:2},children:"Try Again"})]}):e.jsx(je,{severity:"info",children:"No portfolio data available - please add holdings to get optimization recommendations"})});const c=r.portfolioMetrics?.current||{},d=r.portfolioMetrics?.optimized||{},m={beta:c.beta,sharpeRatio:c.sharpeRatio,volatility:c.volatility,concentration:r.concentration||"",avgQuality:r.avgQuality!==null&&r.avgQuality!==void 0?r.avgQuality:null},x={beta:{expected:d.beta,improved:d.beta!==void 0&&c.beta!==void 0&&d.beta<c.beta},sharpeRatio:{expected:d.sharpeRatio,improved:d.sharpeRatio!==void 0&&c.sharpeRatio!==void 0&&d.sharpeRatio>c.sharpeRatio},volatility:{expected:d.volatility,improved:d.volatility!==void 0&&c.volatility!==void 0&&d.volatility<c.volatility},concentration:{expected:r.targetConcentration||""},quality:{expected:r.expectedQuality!==null&&r.expectedQuality!==void 0?r.expectedQuality:null}};r.issues;const g=r.recommendations||[];g.map((p,j)=>({symbol:p.symbol,weight:p.targetWeight?parseFloat(p.targetWeight.replace("%","")):null,action:p.action,priority:p.priority,reason:p.reason})),r.portfolioValue!==null&&r.portfolioValue!==void 0?r.portfolioValue:r.totalValue!==null&&r.totalValue!==void 0&&r.totalValue;const b=x?[{name:"Beta",current:m?.beta,expected:x.beta?.expected},{name:"Sharpe",current:m?.sharpeRatio,expected:x.sharpeRatio?.expected},{name:"Concentration %",current:parseFloat(m.concentration.replace("%","")),expected:parseFloat(x.concentration.expected.replace("%",""))}]:[],D={high:"#d32f2f",medium:"#f57c00",low:"#388e3c"};return e.jsxs(ot,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(E,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(u,{variant:"h4",children:"Portfolio Optimizer"}),e.jsx(E,{sx:{display:"flex",gap:1},children:e.jsx(ee,{variant:"contained",onClick:l,disabled:t,children:t?e.jsx(Je,{size:24}):"Refresh Analysis"})})]}),a&&e.jsx(je,{severity:"error",sx:{mb:2},children:a}),e.jsxs(e.Fragment,{children:[e.jsxs(v,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(Q,{children:e.jsxs(J,{children:[e.jsx(u,{color:"textSecondary",gutterBottom:!0,children:"Beta"}),e.jsx(u,{variant:"h5",children:m?.beta||""}),e.jsxs(u,{variant:"body2",color:x?.beta?.improved?"success.main":"error.main",children:[x?.beta?.improved?"":""," ",typeof x?.beta?.expected=="number"&&!isNaN(x.beta.expected)?x.beta.expected.toFixed(2):""]})]})})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(Q,{children:e.jsxs(J,{children:[e.jsx(u,{color:"textSecondary",gutterBottom:!0,children:"Sharpe Ratio"}),e.jsx(u,{variant:"h5",children:typeof m?.sharpeRatio=="number"&&!isNaN(m.sharpeRatio)?m.sharpeRatio.toFixed(2):""}),e.jsxs(u,{variant:"body2",color:x?.sharpeRatio?.improved?"success.main":"error.main",children:[x?.sharpeRatio?.improved?"":""," ",typeof x?.sharpeRatio?.expected=="number"&&!isNaN(x?.sharpeRatio?.expected)?x.sharpeRatio.expected.toFixed(2):""]})]})})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(Q,{children:e.jsxs(J,{children:[e.jsx(u,{color:"textSecondary",gutterBottom:!0,children:"Concentration"}),e.jsx(u,{variant:"h5",children:m?.concentration}),e.jsxs(u,{variant:"body2",color:"error.main",children:[""," ",x?.concentration?.expected]})]})})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(Q,{children:e.jsxs(J,{children:[e.jsx(u,{color:"textSecondary",gutterBottom:!0,children:"Quality"}),e.jsx(u,{variant:"h5",children:typeof m.avgQuality=="number"&&!isNaN(m.avgQuality)?m.avgQuality.toFixed(1):""}),e.jsxs(u,{variant:"body2",color:"error.main",children:[""," ",typeof x?.quality?.expected=="number"&&!isNaN(x?.quality?.expected)?x.quality.expected.toFixed(1):""]})]})})})]}),e.jsxs(He,{sx:{mb:3,p:2},children:[e.jsxs(u,{variant:"h6",sx:{mb:2},children:["Recommendations (",g.length,")"]}),e.jsx(dt,{children:e.jsxs(ut,{children:[e.jsx(ht,{children:e.jsxs(Te,{sx:{bgcolor:"#f5f5f5"},children:[e.jsx(A,{children:e.jsx("strong",{children:"#"})}),e.jsx(A,{children:e.jsx("strong",{children:"Action"})}),e.jsx(A,{children:e.jsx("strong",{children:"Symbol"})}),e.jsx(A,{children:e.jsx("strong",{children:"Reason"})}),e.jsx(A,{children:e.jsx("strong",{children:"Target Weight"})}),e.jsx(A,{children:e.jsx("strong",{children:"Priority"})})]})}),e.jsx(ft,{children:g.map(p=>e.jsxs(Te,{children:[e.jsx(A,{children:p.id}),e.jsx(A,{children:e.jsx(Ue,{label:p.action,color:p.action==="BUY"?"success":"error",size:"small",variant:"outlined"})}),e.jsx(A,{children:e.jsx("strong",{children:p.symbol})}),e.jsx(A,{children:p.reason}),e.jsx(A,{children:p.targetWeight||"-"}),e.jsx(A,{children:e.jsx(Ue,{label:p.priority,size:"small",sx:{bgcolor:D[p.priority],color:"white"}})})]},p.id))})]})})]}),e.jsxs(He,{sx:{p:3,mb:3},children:[e.jsx(u,{variant:"h6",sx:{mb:2,fontWeight:"bold"},children:" Expected Improvements"}),e.jsx(u,{variant:"caption",sx:{color:"#888",mb:2,display:"block"},children:"Quantified improvements from current to optimized portfolio"}),b.length===0||b.every(p=>p.current===null&&p.expected===null)?e.jsx(je,{severity:"info",sx:{mb:2},children:"Portfolio metrics unavailable - requires at least 2 days of historical performance data. Once you have sufficient portfolio history, metrics like Beta, Sharpe Ratio, and Volatility will be calculated and displayed here."}):null,e.jsx(Ne,{width:"100%",height:300,children:e.jsxs(vt,{data:b,children:[e.jsx(Ke,{strokeDasharray:"3 3"}),e.jsx(Ye,{dataKey:"name"}),e.jsx(Re,{}),e.jsx(Le,{formatter:p=>p?.toFixed?p.toFixed(2):p}),e.jsx(lt,{}),e.jsx(Oe,{dataKey:"current",fill:"#8884d8",name:"Current Portfolio"}),e.jsx(Oe,{dataKey:"expected",fill:"#82ca9d",name:"Optimized Portfolio"})]})}),e.jsx(E,{sx:{mt:3,p:2,bgcolor:"#f5f5f5",borderRadius:1},children:e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(Q,{sx:{bgcolor:"white",boxShadow:"none",border:"1px solid #eee",height:"100%"},children:e.jsxs(J,{sx:{p:2},children:[e.jsxs(E,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#666",fontWeight:"bold",textTransform:"uppercase"},children:"Beta"}),x?.beta?.improved?e.jsx(E,{sx:{color:"#4caf50",fontWeight:"bold"},children:""}):e.jsx(E,{sx:{color:"#999"},children:""})]}),e.jsxs(u,{sx:{color:"#333",fontWeight:"bold",mb:.5},children:[m?.beta||"","  ",x?.beta?.expected?typeof x.beta.expected=="number"?x.beta.expected.toFixed(2):x.beta.expected:""]}),e.jsx(u,{variant:"caption",sx:{color:x?.beta?.improved?"#4caf50":"#999"},children:x?.beta?.improved?" Lower is better":""})]})})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(Q,{sx:{bgcolor:"white",boxShadow:"none",border:"1px solid #eee",height:"100%"},children:e.jsxs(J,{sx:{p:2},children:[e.jsxs(E,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#666",fontWeight:"bold",textTransform:"uppercase"},children:"Sharpe Ratio"}),x?.sharpeRatio?.improved?e.jsx(E,{sx:{color:"#4caf50",fontWeight:"bold"},children:""}):e.jsx(E,{sx:{color:"#999"},children:""})]}),e.jsxs(u,{sx:{color:"#333",fontWeight:"bold",mb:.5},children:[typeof m?.sharpeRatio=="number"?m.sharpeRatio.toFixed(2):"","  ",x?.sharpeRatio?.expected?typeof x.sharpeRatio.expected=="number"?x.sharpeRatio.expected.toFixed(2):x.sharpeRatio.expected:""]}),e.jsx(u,{variant:"caption",sx:{color:x?.sharpeRatio?.improved?"#4caf50":"#999"},children:x?.sharpeRatio?.improved?" Higher is better":""})]})})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(Q,{sx:{bgcolor:"white",boxShadow:"none",border:"1px solid #eee",height:"100%"},children:e.jsxs(J,{sx:{p:2},children:[e.jsxs(E,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#666",fontWeight:"bold",textTransform:"uppercase"},children:"Volatility"}),x?.volatility?.improved?e.jsx(E,{sx:{color:"#4caf50",fontWeight:"bold"},children:""}):e.jsx(E,{sx:{color:"#999"},children:""})]}),e.jsxs(u,{sx:{color:"#333",fontWeight:"bold",mb:.5},children:[m?.volatility?`${m.volatility}%`:"","  ",x?.volatility?.expected?typeof x.volatility.expected=="number"?`${x.volatility.expected.toFixed(2)}%`:x.volatility.expected:""]}),e.jsx(u,{variant:"caption",sx:{color:x?.volatility?.improved?"#4caf50":"#999"},children:x?.volatility?.improved?" Lower is better":""})]})})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(Q,{sx:{bgcolor:"white",boxShadow:"none",border:"1px solid #eee",height:"100%"},children:e.jsxs(J,{sx:{p:2},children:[e.jsxs(E,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#666",fontWeight:"bold",textTransform:"uppercase"},children:"Concentration"}),e.jsx(E,{sx:{color:"#999"},children:""})]}),e.jsxs(u,{sx:{color:"#333",fontWeight:"bold",mb:.5},children:[m?.concentration,"  ",x?.concentration?.expected]}),e.jsx(u,{variant:"caption",sx:{color:"#999"},children:""})]})})})]})})]})]}),e.jsx(ys,{sx:{my:4}}),r?.portfolioMetrics&&(r.portfolioMetrics.current||r.portfolioMetrics.optimized)&&e.jsxs(He,{sx:{p:3,mb:3,bgcolor:"#fafafa"},children:[e.jsx(u,{variant:"h5",sx:{mb:1,fontWeight:"bold",color:"#1a1a1a"},children:" Correlation Analysis"}),e.jsx(u,{variant:"caption",sx:{color:"#888",mb:3,display:"block"},children:"Risk metrics comparison | Better = Lower correlation risk"}),e.jsxs(v,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(Q,{sx:{height:"100%",bgcolor:"white",border:"2px solid #fff3e0",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:e.jsxs(J,{sx:{p:2.5},children:[e.jsxs(E,{sx:{display:"flex",alignItems:"center",mb:2.5},children:[e.jsx(E,{sx:{width:10,height:10,borderRadius:"50%",bgcolor:"#ff9800",mr:1}}),e.jsx(u,{variant:"subtitle1",sx:{fontWeight:"600",color:"#333"},children:"Current Portfolio"})]}),r.portfolioMetrics.current&&e.jsxs(v,{container:!0,spacing:1.5,children:[e.jsx(v,{item:!0,xs:6,children:e.jsxs(E,{sx:{bgcolor:"#fff9f0",p:1.5,borderRadius:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#888",fontSize:"0.7rem",fontWeight:"600",textTransform:"uppercase"},children:"Beta"}),e.jsx(u,{variant:"h6",sx:{fontWeight:"700",color:"#ff6f00",mt:.5},children:typeof r.portfolioMetrics.current.beta=="number"&&!isNaN(r.portfolioMetrics.current.beta)?r.portfolioMetrics.current.beta.toFixed(2):""})]})}),e.jsx(v,{item:!0,xs:6,children:e.jsxs(E,{sx:{bgcolor:"#fff9f0",p:1.5,borderRadius:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#888",fontSize:"0.7rem",fontWeight:"600",textTransform:"uppercase"},children:"Volatility"}),e.jsx(u,{variant:"h6",sx:{fontWeight:"700",color:"#ff6f00",mt:.5},children:typeof r.portfolioMetrics.current.volatility=="number"&&!isNaN(r.portfolioMetrics.current.volatility)?r.portfolioMetrics.current.volatility.toFixed(1)+"%":""})]})}),e.jsx(v,{item:!0,xs:6,children:e.jsxs(E,{sx:{bgcolor:"#fff9f0",p:1.5,borderRadius:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#888",fontSize:"0.7rem",fontWeight:"600",textTransform:"uppercase"},children:"Sharpe"}),e.jsx(u,{variant:"h6",sx:{fontWeight:"700",color:"#ff6f00",mt:.5},children:typeof r.portfolioMetrics.current.sharpeRatio=="number"&&!isNaN(r.portfolioMetrics.current.sharpeRatio)?r.portfolioMetrics.current.sharpeRatio.toFixed(2):""})]})}),e.jsx(v,{item:!0,xs:6,children:e.jsxs(E,{sx:{bgcolor:"#fff9f0",p:1.5,borderRadius:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#888",fontSize:"0.7rem",fontWeight:"600",textTransform:"uppercase"},children:"Diversif."}),e.jsx(u,{variant:"h6",sx:{fontWeight:"700",color:"#ff6f00",mt:.5},children:typeof r.portfolioMetrics.current.diversificationScore=="number"&&!isNaN(r.portfolioMetrics.current.diversificationScore)?(r.portfolioMetrics.current.diversificationScore*100).toFixed(0)+"%":""})]})}),e.jsx(v,{item:!0,xs:12,children:e.jsxs(E,{sx:{bgcolor:"#fff9f0",p:1.5,borderRadius:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#888",fontSize:"0.7rem",fontWeight:"600",textTransform:"uppercase"},children:"Concentration Risk"}),e.jsx(u,{variant:"h6",sx:{fontWeight:"700",color:"#ff6f00",mt:.5},children:typeof r.portfolioMetrics.current.concentrationRatio=="number"&&!isNaN(r.portfolioMetrics.current.concentrationRatio)?r.portfolioMetrics.current.concentrationRatio.toFixed(1)+"%":""})]})})]})]})})}),e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(Q,{sx:{height:"100%",bgcolor:"white",border:"2px solid #e8f5e9",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:e.jsxs(J,{sx:{p:2.5},children:[e.jsxs(E,{sx:{display:"flex",alignItems:"center",mb:2.5},children:[e.jsx(E,{sx:{width:10,height:10,borderRadius:"50%",bgcolor:"#4caf50",mr:1}}),e.jsx(u,{variant:"subtitle1",sx:{fontWeight:"600",color:"#333"},children:"Optimized"})]}),r.portfolioMetrics.optimized&&e.jsxs(v,{container:!0,spacing:1.5,children:[e.jsx(v,{item:!0,xs:6,children:e.jsxs(E,{sx:{bgcolor:"#f1f8f5",p:1.5,borderRadius:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#888",fontSize:"0.7rem",fontWeight:"600",textTransform:"uppercase"},children:"Beta"}),e.jsx(u,{variant:"h6",sx:{fontWeight:"700",color:"#2e7d32",mt:.5},children:typeof r.portfolioMetrics.optimized.beta=="number"&&!isNaN(r.portfolioMetrics.optimized.beta)?r.portfolioMetrics.optimized.beta.toFixed(2):""})]})}),e.jsx(v,{item:!0,xs:6,children:e.jsxs(E,{sx:{bgcolor:"#f1f8f5",p:1.5,borderRadius:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#888",fontSize:"0.7rem",fontWeight:"600",textTransform:"uppercase"},children:"Volatility"}),e.jsx(u,{variant:"h6",sx:{fontWeight:"700",color:"#2e7d32",mt:.5},children:typeof r.portfolioMetrics.optimized.volatility=="number"&&!isNaN(r.portfolioMetrics.optimized.volatility)?r.portfolioMetrics.optimized.volatility.toFixed(1)+"%":""})]})}),e.jsx(v,{item:!0,xs:6,children:e.jsxs(E,{sx:{bgcolor:"#f1f8f5",p:1.5,borderRadius:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#888",fontSize:"0.7rem",fontWeight:"600",textTransform:"uppercase"},children:"Sharpe"}),e.jsx(u,{variant:"h6",sx:{fontWeight:"700",color:"#2e7d32",mt:.5},children:typeof r.portfolioMetrics.optimized.sharpeRatio=="number"&&!isNaN(r.portfolioMetrics.optimized.sharpeRatio)?r.portfolioMetrics.optimized.sharpeRatio.toFixed(2):""})]})}),e.jsx(v,{item:!0,xs:6,children:e.jsxs(E,{sx:{bgcolor:"#f1f8f5",p:1.5,borderRadius:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#888",fontSize:"0.7rem",fontWeight:"600",textTransform:"uppercase"},children:"Diversif."}),e.jsx(u,{variant:"h6",sx:{fontWeight:"700",color:"#2e7d32",mt:.5},children:typeof r.portfolioMetrics.optimized.diversificationScore=="number"&&!isNaN(r.portfolioMetrics.optimized.diversificationScore)?(r.portfolioMetrics.optimized.diversificationScore*100).toFixed(0)+"%":""})]})}),e.jsx(v,{item:!0,xs:12,children:e.jsxs(E,{sx:{bgcolor:"#f1f8f5",p:1.5,borderRadius:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#888",fontSize:"0.7rem",fontWeight:"600",textTransform:"uppercase"},children:"Concentration Risk"}),e.jsx(u,{variant:"h6",sx:{fontWeight:"700",color:"#2e7d32",mt:.5},children:typeof r.portfolioMetrics.optimized.concentrationRatio=="number"&&!isNaN(r.portfolioMetrics.optimized.concentrationRatio)?r.portfolioMetrics.optimized.concentrationRatio.toFixed(1)+"%":""})]})})]})]})})})]}),r.portfolioMetrics.improvements&&e.jsxs(v,{container:!0,spacing:1.5,children:[e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsx(Q,{sx:{bgcolor:"white",boxShadow:"none",border:"1px solid #eee"},children:e.jsxs(J,{sx:{p:1.5,textAlign:"center"},children:[e.jsx(u,{variant:"caption",sx:{color:"#999",fontSize:"0.65rem",fontWeight:"600",textTransform:"uppercase"},children:"Beta "}),e.jsx(u,{variant:"body2",sx:{fontWeight:"700",color:r.portfolioMetrics.improvements.betaReduction?.includes("-")?"#f44336":"#4caf50",mt:.5},children:r.portfolioMetrics.improvements.betaReduction})]})})}),e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsx(Q,{sx:{bgcolor:"white",boxShadow:"none",border:"1px solid #eee"},children:e.jsxs(J,{sx:{p:1.5,textAlign:"center"},children:[e.jsx(u,{variant:"caption",sx:{color:"#999",fontSize:"0.65rem",fontWeight:"600",textTransform:"uppercase"},children:"Risk "}),e.jsx(u,{variant:"body2",sx:{fontWeight:"700",color:"#4caf50",mt:.5},children:r.portfolioMetrics.improvements.riskReduction})]})})}),e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsx(Q,{sx:{bgcolor:"white",boxShadow:"none",border:"1px solid #eee"},children:e.jsxs(J,{sx:{p:1.5,textAlign:"center"},children:[e.jsx(u,{variant:"caption",sx:{color:"#999",fontSize:"0.65rem",fontWeight:"600",textTransform:"uppercase"},children:"Sharpe "}),e.jsx(u,{variant:"body2",sx:{fontWeight:"700",color:r.portfolioMetrics.improvements.sharpeImprovement?.includes("-")?"#f44336":"#4caf50",mt:.5},children:r.portfolioMetrics.improvements.sharpeImprovement})]})})}),e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsx(Q,{sx:{bgcolor:"white",boxShadow:"none",border:"1px solid #eee"},children:e.jsxs(J,{sx:{p:1.5,textAlign:"center"},children:[e.jsx(u,{variant:"caption",sx:{color:"#999",fontSize:"0.65rem",fontWeight:"600",textTransform:"uppercase"},children:"Diversif. "}),e.jsx(u,{variant:"body2",sx:{fontWeight:"700",color:r.portfolioMetrics.improvements.diversificationGain?.includes("-")?"#f44336":"#4caf50",mt:.5},children:r.portfolioMetrics.improvements.diversificationGain})]})})})]})]}),r?.sectorRebalance&&(r.sectorRebalance.before?.length>0||r.sectorRebalance.after?.length>0)&&e.jsxs(He,{sx:{p:3,mb:3,bgcolor:"#fafafa"},children:[e.jsx(u,{variant:"h5",sx:{mb:1,fontWeight:"bold",color:"#1a1a1a"},children:" Sector Allocation"}),e.jsx(u,{variant:"caption",sx:{color:"#888",mb:3,display:"block"},children:"Diversification impact | More sectors = Lower correlation risk"}),e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(Q,{sx:{height:"100%",bgcolor:"white",border:"2px solid #fff3e0",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:e.jsxs(J,{sx:{p:2.5},children:[e.jsxs(E,{sx:{display:"flex",alignItems:"center",mb:2.5},children:[e.jsx(E,{sx:{width:10,height:10,borderRadius:"50%",bgcolor:"#ff9800",mr:1}}),e.jsx(u,{variant:"subtitle1",sx:{fontWeight:"600",color:"#333"},children:"Current Sectors"})]}),e.jsx(E,{children:r.sectorRebalance.before.map((p,j)=>e.jsxs(E,{sx:{mb:1.5},children:[e.jsxs(E,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5},children:[e.jsx(u,{variant:"body2",sx:{fontWeight:"600",color:"#333",flex:1},children:p.sector}),e.jsx(u,{variant:"body2",sx:{fontWeight:"700",color:"#ff6f00",minWidth:"50px",textAlign:"right"},children:p.weight}),e.jsxs(u,{variant:"caption",sx:{color:"#999",ml:1},children:[p.count,"p"]})]}),e.jsx(E,{sx:{height:6,bgcolor:"#ffe0b2",borderRadius:"3px",overflow:"hidden"},children:e.jsx(E,{sx:{height:"100%",bgcolor:"#ff9800",width:p.weight,transition:"width 0.3s"}})})]},j))}),e.jsx(E,{sx:{mt:2,pt:1.5,borderTop:"1px solid #f0f0f0",textAlign:"center"},children:e.jsxs(u,{variant:"caption",sx:{color:"#ff6f00",fontWeight:"700",fontSize:"0.75rem",textTransform:"uppercase"},children:[r.sectorRebalance.before.length," Sectors"]})})]})})}),e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(Q,{sx:{height:"100%",bgcolor:"white",border:"2px solid #e8f5e9",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:e.jsxs(J,{sx:{p:2.5},children:[e.jsxs(E,{sx:{display:"flex",alignItems:"center",mb:2.5},children:[e.jsx(E,{sx:{width:10,height:10,borderRadius:"50%",bgcolor:"#4caf50",mr:1}}),e.jsx(u,{variant:"subtitle1",sx:{fontWeight:"600",color:"#333"},children:"Target Sectors"}),r.sectorRebalance.after.length>r.sectorRebalance.before.length&&e.jsx(Ue,{label:`+${r.sectorRebalance.after.length-r.sectorRebalance.before.length}`,size:"small",sx:{ml:"auto",bgcolor:"#c8e6c9",color:"#2e7d32",fontWeight:"600",height:"22px"}})]}),e.jsx(E,{children:r.sectorRebalance.after.map((p,j)=>e.jsxs(E,{sx:{mb:1.5},children:[e.jsxs(E,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5},children:[e.jsx(u,{variant:"body2",sx:{fontWeight:"600",color:"#333",flex:1},children:p.sector}),e.jsx(u,{variant:"body2",sx:{fontWeight:"700",color:"#2e7d32",minWidth:"50px",textAlign:"right"},children:p.weight}),e.jsxs(u,{variant:"caption",sx:{color:"#999",ml:1},children:[p.count,"p"]})]}),e.jsx(E,{sx:{height:6,bgcolor:"#c8e6c9",borderRadius:"3px",overflow:"hidden"},children:e.jsx(E,{sx:{height:"100%",bgcolor:"#4caf50",width:p.weight,transition:"width 0.3s"}})})]},j))}),e.jsx(E,{sx:{mt:2,pt:1.5,borderTop:"1px solid #f0f0f0",textAlign:"center"},children:e.jsxs(u,{variant:"caption",sx:{color:"#2e7d32",fontWeight:"700",fontSize:"0.75rem",textTransform:"uppercase"},children:[r.sectorRebalance.after.length," Sectors"]})})]})})})]})]}),r?.efficientFrontier&&r.efficientFrontier.length>0&&e.jsxs(He,{sx:{p:3,mb:3,bgcolor:"#fafafa"},children:[e.jsx(u,{variant:"h5",sx:{mb:1,fontWeight:"bold",color:"#1a1a1a"},children:" Efficient Frontier"}),e.jsx(u,{variant:"caption",sx:{color:"#888",mb:3,display:"block"},children:"Risk vs Return trade-offs | Current portfolio vs optimized strategies"}),e.jsx(Ne,{width:"100%",height:350,children:e.jsxs(Br,{data:r.efficientFrontier,children:[e.jsx(Ke,{strokeDasharray:"3 3"}),e.jsx(Ye,{dataKey:"riskProfile",label:{value:"Risk Profile",position:"insideBottomRight",offset:-5}}),e.jsx(Re,{yAxisId:"left",label:{value:"Return %",angle:-90,position:"insideLeft"}}),e.jsx(Re,{yAxisId:"right",orientation:"right",label:{value:"Sharpe Ratio",angle:90,position:"insideRight"}}),e.jsx(Le,{formatter:p=>typeof p=="number"?p.toFixed(2):p,labelFormatter:p=>`Risk Profile: ${p}`}),e.jsx(lt,{}),e.jsx(Yt,{yAxisId:"left",type:"monotone",dataKey:"return",stroke:"#82ca9d",name:"Expected Return",dot:{r:5}}),e.jsx(Yt,{yAxisId:"right",type:"monotone",dataKey:"sharpeRatio",stroke:"#8884d8",name:"Sharpe Ratio",dot:{r:5}})]})}),e.jsx(E,{sx:{mt:3,p:2,bgcolor:"#f5f5f5",borderRadius:1},children:e.jsxs(v,{container:!0,spacing:2,children:[e.jsxs(v,{item:!0,xs:12,sm:6,md:3,children:[e.jsx(u,{variant:"caption",color:"textSecondary",children:"Frontier Points"}),e.jsx(u,{variant:"body2",sx:{fontWeight:"bold",color:"#1976d2"},children:r.efficientFrontier.length})]}),e.jsxs(v,{item:!0,xs:12,sm:6,md:3,children:[e.jsx(u,{variant:"caption",color:"textSecondary",children:"Risk Range"}),e.jsxs(u,{variant:"body2",sx:{fontWeight:"bold",color:"#f57c00"},children:[Math.min(...r.efficientFrontier.map(p=>p.risk||0)).toFixed(1),"% - ",Math.max(...r.efficientFrontier.map(p=>p.risk||0)).toFixed(1),"%"]})]}),e.jsxs(v,{item:!0,xs:12,sm:6,md:3,children:[e.jsx(u,{variant:"caption",color:"textSecondary",children:"Return Range"}),e.jsxs(u,{variant:"body2",sx:{fontWeight:"bold",color:"#4caf50"},children:[Math.min(...r.efficientFrontier.map(p=>p.return||0)).toFixed(1),"% - ",Math.max(...r.efficientFrontier.map(p=>p.return||0)).toFixed(1),"%"]})]}),e.jsxs(v,{item:!0,xs:12,sm:6,md:3,children:[e.jsx(u,{variant:"caption",color:"textSecondary",children:"Max Sharpe Ratio"}),e.jsx(u,{variant:"body2",sx:{fontWeight:"bold",color:"#2196f3"},children:Math.max(...r.efficientFrontier.map(p=>p.sharpeRatio||0)).toFixed(2)})]})]})})]}),r?.targetAllocation&&r.targetAllocation.length>0&&e.jsxs(He,{sx:{p:3,mb:3,bgcolor:"#fafafa"},children:[e.jsx(u,{variant:"h5",sx:{mb:1,fontWeight:"bold",color:"#1a1a1a"},children:" Target Allocation Breakdown"}),e.jsx(u,{variant:"caption",sx:{color:"#888",mb:3,display:"block"},children:"Recommended portfolio weights for optimal risk-adjusted returns"}),e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:12,md:6,children:e.jsx(E,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:350},children:e.jsx(Ne,{width:"100%",height:"100%",children:e.jsxs($o,{children:[e.jsx(Bo,{data:r.targetAllocation.filter(p=>p.weight!==null&&p.weight!==void 0).map(p=>({name:p.symbol,value:parseFloat(p.weight.replace("%",""))})),cx:"50%",cy:"50%",labelLine:!1,label:({name:p,value:j})=>`${p}: ${j.toFixed(1)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:r.targetAllocation.map((p,j)=>e.jsx(zo,{fill:i[j%i.length]},`cell-${j}`))}),e.jsx(Le,{formatter:p=>`${p.toFixed(2)}%`})]})})})}),e.jsxs(v,{item:!0,xs:12,md:6,children:[e.jsx(dt,{sx:{maxHeight:350,overflow:"auto"},children:e.jsxs(ut,{size:"small",children:[e.jsx(ht,{children:e.jsxs(Te,{sx:{bgcolor:"#e8f5e9",position:"sticky",top:0},children:[e.jsx(A,{sx:{fontWeight:"bold",width:"30%"},children:"Symbol"}),e.jsx(A,{align:"right",sx:{fontWeight:"bold",width:"35%"},children:"Target Weight"}),e.jsx(A,{align:"right",sx:{fontWeight:"bold",width:"35%"},children:"Expected Impact"})]})}),e.jsx(ft,{children:r.targetAllocation.filter(p=>p.weight!==null&&p.weight!==void 0).map((p,j)=>{const P=parseFloat(p.weight.replace("%","")),S=P>15?"High":P>5?"Medium":"Low",T=S==="High"?"#2e7d32":S==="Medium"?"#f57c00":"#666";return e.jsxs(Te,{sx:{"&:hover":{bgcolor:"#f1f8f5"}},children:[e.jsx(A,{sx:{fontWeight:"bold",color:"#333"},children:p.symbol}),e.jsxs(A,{align:"right",sx:{fontWeight:"700",color:"#2e7d32",fontSize:"1rem"},children:[P.toFixed(2),"%"]}),e.jsx(A,{align:"right",sx:{color:T,fontWeight:"bold"},children:S})]},j)})})]})}),e.jsx(E,{sx:{mt:2,p:2,bgcolor:"#f1f8f5",borderRadius:1,borderLeft:"3px solid #4caf50"},children:e.jsxs(u,{variant:"caption",sx:{color:"#2e7d32",fontWeight:"bold"},children:["Total Portfolio: ",r.targetAllocation.filter(p=>p.weight!==null&&p.weight!==void 0).reduce((p,j)=>p+parseFloat(j.weight.replace("%","")),0).toFixed(2),"% | ",r.targetAllocation.filter(p=>p.weight!==null&&p.weight!==void 0).length," positions"]})})]})]})]}),r?.allocationComparison&&r.allocationComparison.before&&r.allocationComparison.after&&e.jsxs(He,{sx:{p:2,mb:3},children:[e.jsx(u,{variant:"h6",sx:{mb:3,fontWeight:"bold"},children:" Portfolio Holdings: Before & After Rebalance"}),e.jsx(u,{variant:"body2",color:"textSecondary",sx:{mb:2},children:"Individual position changes | Compare current weights vs target weights | Green = Improvement expected"}),e.jsxs(E,{sx:{display:"flex",gap:3,flexWrap:"wrap"},children:[e.jsxs(E,{sx:{flex:"1 1 400px",minWidth:400},children:[e.jsx(u,{variant:"subtitle2",sx:{mb:2,fontWeight:"bold",color:"#ff6f00",display:"flex",alignItems:"center",gap:1},children:" Current Holdings"}),e.jsx(dt,{children:e.jsxs(ut,{size:"small",children:[e.jsx(ht,{children:e.jsxs(Te,{sx:{bgcolor:"#fff3e0"},children:[e.jsx(A,{sx:{fontWeight:"bold",width:"40%"},children:"Symbol"}),e.jsx(A,{align:"right",sx:{fontWeight:"bold",width:"30%"},children:"Weight"}),e.jsx(A,{align:"right",sx:{fontWeight:"bold",width:"30%"},children:"Sector"})]})}),e.jsx(ft,{children:r.allocationComparison.before&&r.allocationComparison.before.length>0?r.allocationComparison.before.map((p,j)=>e.jsxs(Te,{sx:{"&:hover":{bgcolor:"#fff8f0"}},children:[e.jsx(A,{sx:{fontWeight:"bold",color:"#333"},children:p.symbol}),e.jsx(A,{align:"right",sx:{color:"#ff9800",fontWeight:"bold"},children:p.weight}),e.jsx(A,{align:"right",sx:{fontSize:"0.875rem",color:"#666"},children:p.sector||"N/A"})]},j)):e.jsx(Te,{children:e.jsx(A,{colSpan:3,align:"center",sx:{color:"#999",py:2},children:"No current holdings"})})})]})}),e.jsx(E,{sx:{mt:2,p:1.5,bgcolor:"#fff9e6",borderRadius:1,borderLeft:"3px solid #ff9800"},children:e.jsxs(u,{variant:"caption",sx:{color:"#ff6f00",fontWeight:"bold"},children:[r.allocationComparison.before?r.allocationComparison.before.length:0," positions | Total: 100%"]})})]}),e.jsxs(E,{sx:{flex:"1 1 400px",minWidth:400},children:[e.jsx(u,{variant:"subtitle2",sx:{mb:2,fontWeight:"bold",color:"#2e7d32",display:"flex",alignItems:"center",gap:1},children:" Target Holdings"}),e.jsx(dt,{children:e.jsxs(ut,{size:"small",children:[e.jsx(ht,{children:e.jsxs(Te,{sx:{bgcolor:"#e8f5e9"},children:[e.jsx(A,{sx:{fontWeight:"bold",width:"40%"},children:"Symbol"}),e.jsx(A,{align:"right",sx:{fontWeight:"bold",width:"30%"},children:"Weight"}),e.jsx(A,{align:"right",sx:{fontWeight:"bold",width:"30%"},children:"Sector"})]})}),e.jsx(ft,{children:r.allocationComparison.after&&r.allocationComparison.after.length>0?r.allocationComparison.after.map((p,j)=>{try{const P=r.allocationComparison.before?.find(_=>_.symbol===p.symbol),S=P?.weight?.toString()||"0%",T=p.weight?.toString()||"0%",w=parseFloat(S.replace("%","")),y=parseFloat(T.replace("%","")),f=P&&w!==y,C=!P;return e.jsxs(Te,{sx:{bgcolor:C?"#c8e6c9":f?"#fff8e1":"transparent","&:hover":{bgcolor:C?"#b5ddb5":"#f5f5f5"}},children:[e.jsxs(A,{sx:{fontWeight:"bold",color:"#333"},children:[p.symbol,C&&e.jsx(Ue,{label:"NEW",size:"small",sx:{ml:1,bgcolor:"#4caf50",color:"white",height:"20px"}})]}),e.jsx(A,{align:"right",children:e.jsxs(E,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:.5},children:[e.jsx(u,{sx:{color:"#4caf50",fontWeight:"bold"},children:p.weight}),f&&!isNaN(w)&&!isNaN(y)&&e.jsxs(u,{variant:"caption",sx:{color:y>w?"#4caf50":"#f44336",fontWeight:"bold"},children:[y>w?"":""," ",Math.abs((y-w).toFixed(2)),"%"]})]})}),e.jsx(A,{align:"right",sx:{fontSize:"0.875rem",color:"#666"},children:p.sector||"N/A"})]},j)}catch(P){return console.error("Error rendering holding:",P,p),null}}):e.jsx(Te,{children:e.jsx(A,{colSpan:3,align:"center",sx:{color:"#999",py:2},children:"No target holdings"})})})]})}),e.jsx(E,{sx:{mt:2,p:1.5,bgcolor:"#f1f8e9",borderRadius:1,borderLeft:"3px solid #4caf50"},children:e.jsxs(u,{variant:"caption",sx:{color:"#2e7d32",fontWeight:"bold"},children:[r.allocationComparison.after?r.allocationComparison.after.length:0," positions | +",(r.allocationComparison.after?.length||0)-(r.allocationComparison.before?.length||0)," new"]})})]})]}),e.jsx(E,{sx:{mt:3,p:2,bgcolor:"#f5f5f5",borderRadius:1,borderLeft:"4px solid #1976d2"},children:e.jsxs(v,{container:!0,spacing:2,children:[e.jsxs(v,{item:!0,xs:12,sm:6,md:3,children:[e.jsx(u,{variant:"caption",color:"textSecondary",children:"Current Holdings"}),e.jsx(u,{variant:"body2",sx:{fontWeight:"bold",color:"#ff9800"},children:r.allocationComparison.before?.length||0})]}),e.jsxs(v,{item:!0,xs:12,sm:6,md:3,children:[e.jsx(u,{variant:"caption",color:"textSecondary",children:"Target Holdings"}),e.jsx(u,{variant:"body2",sx:{fontWeight:"bold",color:"#4caf50"},children:r.allocationComparison.after?.length||0})]}),e.jsxs(v,{item:!0,xs:12,sm:6,md:3,children:[e.jsx(u,{variant:"caption",color:"textSecondary",children:"New Positions"}),e.jsxs(u,{variant:"body2",sx:{fontWeight:"bold",color:"#2196f3"},children:["+",(r.allocationComparison.after?.length||0)-(r.allocationComparison.before?.length||0)]})]}),e.jsxs(v,{item:!0,xs:12,sm:6,md:3,children:[e.jsx(u,{variant:"caption",color:"textSecondary",children:"Positions Exited"}),e.jsx(u,{variant:"body2",sx:{fontWeight:"bold",color:"#f44336"},children:r.allocationComparison.before?r.allocationComparison.before.filter(p=>!r.allocationComparison.after?.find(j=>j.symbol===p.symbol)).length:0})]})]})})]})]})}function Jd(t){return typeof t=="string"}function Xd(t,s,r){return t===void 0||Jd(t)?s:{...s,ownerState:{...s.ownerState,...r}}}function eu(t,s=[]){if(t===void 0)return{};const r={};return Object.keys(t).filter(n=>n.match(/^on[A-Z]/)&&typeof t[n]=="function"&&!s.includes(n)).forEach(n=>{r[n]=t[n]}),r}function gn(t,s,r){return typeof t=="function"?t(s,r):t}function tu(...t){const s=h.useRef(void 0),r=h.useCallback(n=>{const a=t.map(o=>{if(o==null)return null;if(typeof o=="function"){const i=o,l=i(n);return typeof l=="function"?l:()=>{i(null)}}return o.current=n,()=>{o.current=null}});return()=>{a.forEach(o=>o?.())}},t);return h.useMemo(()=>t.every(n=>n==null)?null:n=>{s.current&&(s.current(),s.current=void 0),n!=null&&(s.current=r(n))},t)}function xo(t){if(t===void 0)return{};const s={};return Object.keys(t).filter(r=>!(r.match(/^on[A-Z]/)&&typeof t[r]=="function")).forEach(r=>{s[r]=t[r]}),s}function su(t){const{getSlotProps:s,additionalProps:r,externalSlotProps:n,externalForwardedProps:a,className:o}=t;if(!s){const b=Xe(r?.className,o,a?.className,n?.className),D={...r?.style,...a?.style,...n?.style},p={...r,...a,...n};return b.length>0&&(p.className=b),Object.keys(D).length>0&&(p.style=D),{props:p,internalRef:void 0}}const i=eu({...a,...n}),l=xo(n),c=xo(a),d=s(i),m=Xe(d?.className,r?.className,o,a?.className,n?.className),x={...d?.style,...r?.style,...a?.style,...n?.style},g={...d,...r,...c,...l};return m.length>0&&(g.className=m),Object.keys(x).length>0&&(g.style=x),{props:g,internalRef:d.ref}}function $e(t){const{elementType:s,externalSlotProps:r,ownerState:n,skipResolvingSlotProps:a=!1,...o}=t,i=a?{}:gn(r,n),{props:l,internalRef:c}=su({...o,externalSlotProps:i}),d=tu(c,i?.ref,t.additionalProps?.ref);return Xd(s,{...l,ref:d},n)}const Ds=(t,s)=>t.length!==s.length?!1:s.every(r=>t.includes(r)),ru=({openTo:t,defaultOpenTo:s,views:r,defaultViews:n})=>{const a=r??n;let o;if(t!=null)o=t;else if(a.includes(s))o=s;else if(a.length>0)o=a[0];else throw new Error("MUI: The `views` prop must contain at least one view");return{views:a,openTo:o}},er=(t,s,r)=>{let n=s;return n=t.setHours(n,t.getHours(r)),n=t.setMinutes(n,t.getMinutes(r)),n=t.setSeconds(n,t.getSeconds(r)),n},Is=({date:t,disableFuture:s,disablePast:r,maxDate:n,minDate:a,isDateDisabled:o,utils:i,timezone:l})=>{const c=er(i,i.dateWithTimezone(void 0,l),t);r&&i.isBefore(a,c)&&(a=c),s&&i.isAfter(n,c)&&(n=c);let d=t,m=t;for(i.isBefore(t,a)&&(d=a,m=null),i.isAfter(t,n)&&(m&&(m=n),d=null);d||m;){if(d&&i.isAfter(d,n)&&(d=null),m&&i.isBefore(m,a)&&(m=null),d){if(!o(d))return d;d=i.addDays(d,1)}if(m){if(!o(m))return m;m=i.addDays(m,-1)}}return null},nu=(t,s)=>s==null||!t.isValid(s)?null:s,gt=(t,s,r)=>s==null||!t.isValid(s)?r:s,ou=(t,s,r)=>!t.isValid(s)&&s!=null&&!t.isValid(r)&&r!=null?!0:t.isEqual(s,r),yn=(t,s)=>{const n=[t.startOfYear(s)];for(;n.length<12;){const a=n[n.length-1];n.push(t.addMonths(a,1))}return n},pa=(t,s,r)=>r==="date"?t.startOfDay(t.dateWithTimezone(void 0,s)):t.dateWithTimezone(void 0,s),au=["year","month","day"],go=t=>au.includes(t),bn=(t,{format:s,views:r},n)=>{if(s!=null)return s;const a=t.formats;return Ds(r,["year"])?a.year:Ds(r,["month"])?a.month:Ds(r,["day"])?a.dayOfMonth:Ds(r,["month","year"])?`${a.month} ${a.year}`:Ds(r,["day","month"])?`${a.month} ${a.dayOfMonth}`:n?/en/.test(t.getCurrentLocaleCode())?a.normalDateWithWeekday:a.normalDate:a.keyboardDate},iu=(t,s)=>{const r=t.startOfWeek(s);return[0,1,2,3,4,5,6].map(n=>t.addDays(r,n))},lu=["hours","minutes","seconds"],cu=t=>lu.includes(t),yo=(t,s)=>s.getHours(t)*3600+s.getMinutes(t)*60+s.getSeconds(t),du=(t,s)=>(r,n)=>t?s.isAfter(r,n):yo(r,s)>yo(n,s),Dt={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},uu=t=>Math.max(...t.map(s=>{var r;return(r=Dt[s.type])!=null?r:1})),_s=(t,s,r)=>{if(s===Dt.year)return t.startOfYear(r);if(s===Dt.month)return t.startOfMonth(r);if(s===Dt.day)return t.startOfDay(r);let n=r;return s<Dt.minutes&&(n=t.setMinutes(n,0)),s<Dt.seconds&&(n=t.setSeconds(n,0)),s<Dt.milliseconds&&(n=t.setMilliseconds(n,0)),n},hu=({props:t,utils:s,granularity:r,timezone:n,getTodayDate:a})=>{var o;let i=a?a():_s(s,r,pa(s,n));t.minDate!=null&&s.isAfterDay(t.minDate,i)&&(i=_s(s,r,t.minDate)),t.maxDate!=null&&s.isBeforeDay(t.maxDate,i)&&(i=_s(s,r,t.maxDate));const l=du((o=t.disableIgnoringDatePartForTimeValidation)!=null?o:!1,s);return t.minTime!=null&&l(t.minTime,i)&&(i=_s(s,r,t.disableIgnoringDatePartForTimeValidation?t.minTime:er(s,i,t.minTime))),t.maxTime!=null&&l(i,t.maxTime)&&(i=_s(s,r,t.disableIgnoringDatePartForTimeValidation?t.maxTime:er(s,i,t.maxTime))),i},xa=(t,s)=>{const r=t.formatTokenMap[s];if(r==null)throw new Error([`MUI: The token "${s}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof r=="string"?{type:r,contentType:r==="meridiem"?"letter":"digit",maxLength:void 0}:{type:r.sectionType,contentType:r.contentType,maxLength:r.maxLength}},fu=t=>{switch(t){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}},cr=(t,s,r)=>{const n=[],a=t.dateWithTimezone(void 0,s),o=t.startOfWeek(a),i=t.endOfWeek(a);let l=o;for(;t.isBefore(l,i);)n.push(l),l=t.addDays(l,1);return n.map(c=>t.formatByString(c,r))},ga=(t,s,r,n)=>{switch(r){case"month":return yn(t,t.dateWithTimezone(void 0,s)).map(a=>t.formatByString(a,n));case"weekDay":return cr(t,s,n);case"meridiem":{const a=t.dateWithTimezone(void 0,s);return[t.startOfDay(a),t.endOfDay(a)].map(o=>t.formatByString(o,n))}default:return[]}},ya=(t,s,r)=>{let n=s;for(n=Number(n).toString();n.length<r;)n=`0${n}`;return n},ba=(t,s,r,n,a)=>{if(a.type==="day"&&a.contentType==="digit-with-letter"){const i=t.setDate(n.longestMonth,r);return t.formatByString(i,a.format)}const o=r.toString();return a.hasLeadingZerosInInput?ya(t,o,a.maxLength):o},mu=(t,s,r,n,a,o,i)=>{const l=fu(n),c=n==="Home",d=n==="End",m=r.value===""||c||d,x=()=>{const b=a[r.type]({currentDate:o,format:r.format,contentType:r.contentType}),D=S=>ba(t,s,S,b,r),p=r.type==="minutes"&&i!=null&&i.minutesStep?i.minutesStep:1;let P=parseInt(r.value,10)+l*p;if(m){if(r.type==="year"&&!d&&!c)return t.formatByString(t.dateWithTimezone(void 0,s),r.format);l>0||c?P=b.minimum:P=b.maximum}return P%p!==0&&((l<0||c)&&(P+=p-(p+P)%p),(l>0||d)&&(P-=P%p)),P>b.maximum?D(b.minimum+(P-b.maximum-1)%(b.maximum-b.minimum+1)):P<b.minimum?D(b.maximum-(b.minimum-P-1)%(b.maximum-b.minimum+1)):D(P)},g=()=>{const b=ga(t,s,r.type,r.format);if(b.length===0)return r.value;if(m)return l>0||c?b[0]:b[b.length-1];const p=(b.indexOf(r.value)+b.length+l)%b.length;return b[p]};return r.contentType==="digit"||r.contentType==="digit-with-letter"?x():g()},vn=(t,s)=>{let r=t.value||t.placeholder;const n=s==="non-input"?t.hasLeadingZerosInFormat:t.hasLeadingZerosInInput;return s==="non-input"&&t.hasLeadingZerosInInput&&!t.hasLeadingZerosInFormat&&(r=Number(r).toString()),["input-rtl","input-ltr"].includes(s)&&t.contentType==="digit"&&!n&&r.length===1&&(r=`${r}`),s==="input-rtl"&&(r=`${r}`),r},cs=t=>t.replace(/[\u2066\u2067\u2068\u2069]/g,""),va=(t,s)=>{let r=0,n=s?1:0;const a=[];for(let o=0;o<t.length;o+=1){const i=t[o],l=vn(i,s?"input-rtl":"input-ltr"),c=`${i.startSeparator}${l}${i.endSeparator}`,d=cs(c).length,m=c.length,x=cs(l),g=n+l.indexOf(x[0])+i.startSeparator.length,b=g+x.length;a.push(F({},i,{start:r,end:r+d,startInInput:g,endInInput:b})),r+=d,n+=m}return a},pu=(t,s,r,n,a)=>{switch(n.type){case"year":return r.fieldYearPlaceholder({digitAmount:t.formatByString(t.dateWithTimezone(void 0,s),a).length,format:a});case"month":return r.fieldMonthPlaceholder({contentType:n.contentType,format:a});case"day":return r.fieldDayPlaceholder({format:a});case"weekDay":return r.fieldWeekDayPlaceholder({contentType:n.contentType,format:a});case"hours":return r.fieldHoursPlaceholder({format:a});case"minutes":return r.fieldMinutesPlaceholder({format:a});case"seconds":return r.fieldSecondsPlaceholder({format:a});case"meridiem":return r.fieldMeridiemPlaceholder({format:a});default:return a}},bo=(t,s,r,n)=>t.formatByString(t.parse(s,r),n),ja=(t,s,r)=>t.formatByString(t.dateWithTimezone(void 0,s),r).length===4,wa=(t,s,r,n,a)=>{if(r!=="digit")return!1;const o=t.dateWithTimezone(void 0,s);switch(n){case"year":return ja(t,s,a)?t.formatByString(t.setYear(o,1),a)==="0001":t.formatByString(t.setYear(o,2001),a)==="01";case"month":return t.formatByString(t.startOfYear(o),a).length>1;case"day":return t.formatByString(t.startOfMonth(o),a).length>1;case"weekDay":return t.formatByString(t.startOfWeek(o),a).length>1;case"hours":return t.formatByString(t.setHours(o,1),a).length>1;case"minutes":return t.formatByString(t.setMinutes(o,1),a).length>1;case"seconds":return t.formatByString(t.setSeconds(o,1),a).length>1;default:throw new Error("Invalid section type")}},xu=(t,s)=>{const r=[],{start:n,end:a}=t.escapedCharacters,o=new RegExp(`(\\${n}[^\\${a}]*\\${a})+`,"g");let i=null;for(;i=o.exec(s);)r.push({start:i.index,end:o.lastIndex-1});return r},vo=(t,s,r,n,a,o,i,l)=>{let c="";const d=[],m=t.date(),x=T=>{if(T==="")return null;const w=xa(t,T),y=wa(t,s,w.contentType,w.type,T),f=i?y:w.contentType==="digit",C=a!=null&&t.isValid(a);let _=C?t.formatByString(a,T):"",k=null;if(f)if(y)k=_===""?t.formatByString(m,T).length:_.length;else{if(w.maxLength==null)throw new Error(`MUI: The token ${T} should have a 'maxDigitNumber' property on it's adapter`);k=w.maxLength,C&&(_=ya(t,_,k))}return d.push(F({},w,{format:T,maxLength:k,value:_,placeholder:pu(t,s,r,w,T),hasLeadingZeros:y,hasLeadingZerosInFormat:y,hasLeadingZerosInInput:f,startSeparator:d.length===0?c:"",endSeparator:"",modified:!1})),null};let g=10,b=n,D=t.expandFormat(n);for(;D!==b;)if(b=D,D=t.expandFormat(b),g-=1,g<0)throw new Error("MUI: The format expansion seems to be  enter in an infinite loop. Please open an issue with the format passed to the picker component");const p=D,j=xu(t,p),P=new RegExp(`^(${Object.keys(t.formatTokenMap).sort((T,w)=>w.length-T.length).join("|")})`,"g");let S="";for(let T=0;T<p.length;T+=1){const w=j.find(k=>k.start<=T&&k.end>=T),y=p[T],f=w!=null,C=`${S}${p.slice(T)}`,_=P.test(C);!f&&y.match(/([A-Za-z]+)/)&&_?(S=C.slice(0,P.lastIndex),T+=P.lastIndex-1):f&&w?.start===T||w?.end===T||(x(S),S="",d.length===0?c+=y:d[d.length-1].endSeparator+=y)}return x(S),d.map(T=>{const w=y=>{let f=y;return l&&f!==null&&f.includes(" ")&&(f=`${f}`),o==="spacious"&&["/",".","-"].includes(f)&&(f=` ${f} `),f};return T.startSeparator=w(T.startSeparator),T.endSeparator=w(T.endSeparator),T})},gu=(t,s)=>{const r=s.some(l=>l.type==="day"),n=[],a=[];for(let l=0;l<s.length;l+=1){const c=s[l];r&&c.type==="weekDay"||(n.push(c.format),a.push(vn(c,"non-input")))}const o=n.join(" "),i=a.join(" ");return t.parse(i,o)},yu=(t,s)=>{const n=t.map(a=>{const o=vn(a,s?"input-rtl":"input-ltr");return`${a.startSeparator}${o}${a.endSeparator}`}).join("");return s?`${n}`:n},bu=(t,s)=>{const r=t.dateWithTimezone(void 0,s),n=t.endOfYear(r),a=t.endOfDay(r),{maxDaysInMonth:o,longestMonth:i}=yn(t,r).reduce((l,c)=>{const d=t.getDaysInMonth(c);return d>l.maxDaysInMonth?{maxDaysInMonth:d,longestMonth:c}:l},{maxDaysInMonth:0,longestMonth:null});return{year:({format:l})=>({minimum:0,maximum:ja(t,s,l)?9999:99}),month:()=>({minimum:1,maximum:t.getMonth(n)+1}),day:({currentDate:l})=>({minimum:1,maximum:l!=null&&t.isValid(l)?t.getDaysInMonth(l):o,longestMonth:i}),weekDay:({format:l,contentType:c})=>{if(c==="digit"){const d=cr(t,s,l).map(Number);return{minimum:Math.min(...d),maximum:Math.max(...d)}}return{minimum:1,maximum:7}},hours:({format:l})=>{const c=t.getHours(a);return t.formatByString(t.endOfDay(r),l)!==c.toString()?{minimum:1,maximum:Number(t.formatByString(t.startOfDay(r),l))}:{minimum:0,maximum:c}},minutes:()=>({minimum:0,maximum:t.getMinutes(a)}),seconds:()=>({minimum:0,maximum:t.getSeconds(a)}),meridiem:()=>({minimum:0,maximum:0})}},vu=(t,s,r,n,a)=>{switch(r.type){case"year":return t.setYear(a,t.getYear(n));case"month":return t.setMonth(a,t.getMonth(n));case"weekDay":{const o=cr(t,s,r.format),i=t.formatByString(n,r.format),l=o.indexOf(i),d=o.indexOf(r.value)-l;return t.addDays(n,d)}case"day":return t.setDate(a,t.getDate(n));case"meridiem":{const o=t.getHours(n)<12,i=t.getHours(a);return o&&i>=12?t.addHours(a,-12):!o&&i<12?t.addHours(a,12):a}case"hours":return t.setHours(a,t.getHours(n));case"minutes":return t.setMinutes(a,t.getMinutes(n));case"seconds":return t.setSeconds(a,t.getSeconds(n));default:return a}},jo={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8},wo=(t,s,r,n,a,o)=>[...n].sort((i,l)=>jo[i.type]-jo[l.type]).reduce((i,l)=>!o||l.modified?vu(t,s,l,r,i):i,a),ju=()=>navigator.userAgent.toLowerCase().indexOf("android")>-1,wu=(t,s)=>{const r={};if(!s)return t.forEach((c,d)=>{const m=d===0?null:d-1,x=d===t.length-1?null:d+1;r[d]={leftIndex:m,rightIndex:x}}),{neighbors:r,startIndex:0,endIndex:t.length-1};const n={},a={};let o=0,i=0,l=t.length-1;for(;l>=0;){i=t.findIndex((c,d)=>{var m;return d>=o&&((m=c.endSeparator)==null?void 0:m.includes(" "))&&c.endSeparator!==" / "}),i===-1&&(i=t.length-1);for(let c=i;c>=o;c-=1)a[c]=l,n[l]=c,l-=1;o=i+1}return t.forEach((c,d)=>{const m=a[d],x=m===0?null:n[m-1],g=m===t.length-1?null:n[m+1];r[d]={leftIndex:x,rightIndex:g}}),{neighbors:r,startIndex:n[0],endIndex:n[t.length-1]}},Su=["value","referenceDate"],At={emptyValue:null,getTodayValue:pa,getInitialReferenceValue:t=>{let{value:s,referenceDate:r}=t,n=_e(t,Su);return s!=null&&n.utils.isValid(s)?s:r??hu(n)},cleanValue:nu,areValuesEqual:ou,isSameError:(t,s)=>t===s,hasError:t=>t!=null,defaultErrorState:null,getTimezone:(t,s)=>s==null||!t.isValid(s)?null:t.getTimezone(s),setTimezone:(t,s,r)=>r==null?null:t.setTimezone(r,s)},Cu={updateReferenceValue:(t,s,r)=>s==null||!t.isValid(s)?r:s,getSectionsFromValue:(t,s,r,n,a)=>!t.isValid(s)&&!!r?r:va(a(s),n),getValueStrFromSections:yu,getActiveDateManager:(t,s)=>({date:s.value,referenceDate:s.referenceValue,getSections:r=>r,getNewValuesFromNewActiveDate:r=>({value:r,referenceValue:r==null||!t.isValid(r)?s.referenceValue:r})}),parseValueStr:(t,s,r)=>r(t.trim(),s)},Pu=["localeText"],en=h.createContext(null),jn=function(s){var r;const{localeText:n}=s,a=_e(s,Pu),{utils:o,localeText:i}=(r=h.useContext(en))!=null?r:{utils:void 0,localeText:void 0},l=qe({props:a,name:"MuiLocalizationProvider"}),{children:c,dateAdapter:d,dateFormats:m,dateLibInstance:x,adapterLocale:g,localeText:b}=l,D=h.useMemo(()=>F({},b,i,n),[b,i,n]),p=h.useMemo(()=>{if(!d)return o||null;const S=new d({locale:g,formats:m,instance:x});if(!S.isMUIAdapter)throw new Error(["MUI: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/getting-started/#installation"].join(`
`));return S},[d,g,m,x,o]),j=h.useMemo(()=>p?{minDate:p.date("1900-01-01T00:00:00.000"),maxDate:p.date("2099-12-31T00:00:00.000")}:null,[p]),P=h.useMemo(()=>({utils:p,defaultDates:j,localeText:D}),[j,p,D]);return e.jsx(en.Provider,{value:P,children:c})},Du=t=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:F({},t)}}}}),Sa={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"open previous view",openNextView:"open next view",calendarViewSwitchingButtonAriaLabel:t=>t==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",clockLabelText:(t,s,r)=>`Select ${t}. ${s===null?"No time selected":`Selected time is ${r.format(s,"fullTime")}`}`,hoursClockNumberText:t=>`${t} hours`,minutesClockNumberText:t=>`${t} minutes`,secondsClockNumberText:t=>`${t} seconds`,selectViewText:t=>`Select ${t}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:t=>`Week ${t}`,calendarWeekNumberText:t=>`${t}`,openDatePickerDialogue:(t,s)=>t!==null&&s.isValid(t)?`Choose date, selected date is ${s.format(t,"fullDate")}`:"Choose date",openTimePickerDialogue:(t,s)=>t!==null&&s.isValid(t)?`Choose time, selected time is ${s.format(t,"fullTime")}`:"Choose time",fieldClearLabel:"Clear value",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:t=>"Y".repeat(t.digitAmount),fieldMonthPlaceholder:t=>t.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:t=>t.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa"},_u=Sa;Du(Sa);const ss=()=>{const t=h.useContext(en);if(t===null)throw new Error(["MUI: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(t.utils===null)throw new Error(["MUI: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const s=h.useMemo(()=>F({},_u,t.localeText),[t.localeText]);return h.useMemo(()=>F({},t,{localeText:s}),[t,s])},Ie=()=>ss().utils,Vs=()=>ss().defaultDates,Bt=()=>ss().localeText,dr=t=>{const s=Ie(),r=h.useRef();return r.current===void 0&&(r.current=s.dateWithTimezone(void 0,t)),r.current};function Tu(t){return at("MuiPickersToolbar",t)}it("MuiPickersToolbar",["root","content"]);const ku=t=>{const{classes:s,isLandscape:r}=t;return nt({root:["root"],content:["content"],penIconButton:["penIconButton",r&&"penIconButtonLandscape"]},Tu,s)},Eu=we("div",{name:"MuiPickersToolbar",slot:"Root",overridesResolver:(t,s)=>s.root})(({theme:t,ownerState:s})=>F({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:t.spacing(2,3)},s.isLandscape&&{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"})),Iu=we("div",{name:"MuiPickersToolbar",slot:"Content",overridesResolver:(t,s)=>s.content})(({ownerState:t})=>{var s;return{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:t.isLandscape?"flex-start":"space-between",flexDirection:t.isLandscape?(s=t.landscapeDirection)!=null?s:"column":"row",flex:1,alignItems:t.isLandscape?"flex-start":"center"}}),Au=h.forwardRef(function(s,r){const n=qe({props:s,name:"MuiPickersToolbar"}),{children:a,className:o,toolbarTitle:i,hidden:l,titleId:c}=n,d=n,m=ku(d);return l?null:e.jsxs(Eu,{ref:r,className:Xe(m.root,o),ownerState:d,children:[e.jsx(u,{color:"text.secondary",variant:"overline",id:c,children:i}),e.jsx(Iu,{className:m.content,ownerState:d,children:a})]})});function Ru(t){return at("MuiDatePickerToolbar",t)}it("MuiDatePickerToolbar",["root","title"]);const Mu=["value","isLandscape","onChange","toolbarFormat","toolbarPlaceholder","views","className"],Ou=t=>{const{classes:s}=t;return nt({root:["root"],title:["title"]},Ru,s)},Fu=we(Au,{name:"MuiDatePickerToolbar",slot:"Root",overridesResolver:(t,s)=>s.root})({}),Nu=we(u,{name:"MuiDatePickerToolbar",slot:"Title",overridesResolver:(t,s)=>s.title})(({ownerState:t})=>F({},t.isLandscape&&{margin:"auto 16px auto auto"})),Lu=h.forwardRef(function(s,r){const n=qe({props:s,name:"MuiDatePickerToolbar"}),{value:a,isLandscape:o,toolbarFormat:i,toolbarPlaceholder:l="",views:c,className:d}=n,m=_e(n,Mu),x=Ie(),g=Bt(),b=Ou(n),D=h.useMemo(()=>{if(!a)return l;const j=bn(x,{format:i,views:c},!0);return x.formatByString(a,j)},[a,i,l,x,c]),p=n;return e.jsx(Fu,F({ref:r,toolbarTitle:g.datePickerToolbarTitle,isLandscape:o,className:Xe(b.root,d)},m,{children:e.jsx(Nu,{variant:"h4",align:o?"left":"center",ownerState:p,className:b.title,children:D})}))}),Ca=t=>{if(t!==void 0)return Object.keys(t).reduce((s,r)=>F({},s,{[`${r.slice(0,1).toLowerCase()}${r.slice(1)}`]:t[r]}),{})};function Pa(t,s){var r,n,a,o;const i=Ie(),l=Vs(),c=qe({props:t,name:s}),d=h.useMemo(()=>{var x;return((x=c.localeText)==null?void 0:x.toolbarTitle)==null?c.localeText:F({},c.localeText,{datePickerToolbarTitle:c.localeText.toolbarTitle})},[c.localeText]),m=(r=c.slots)!=null?r:Ca(c.components);return F({},c,{localeText:d},ru({views:c.views,openTo:c.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{disableFuture:(n=c.disableFuture)!=null?n:!1,disablePast:(a=c.disablePast)!=null?a:!1,minDate:gt(i,c.minDate,l.minDate),maxDate:gt(i,c.maxDate,l.maxDate),slots:F({toolbar:Lu},m),slotProps:(o=c.slotProps)!=null?o:c.componentsProps})}const Vu=$t(e.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Wu=$t(e.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"ArrowLeft"),Uu=$t(e.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"ArrowRight"),$u=$t(e.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Calendar");$t(e.jsxs(h.Fragment,{children:[e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),e.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Clock");$t(e.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),"DateRange");$t(e.jsxs(h.Fragment,{children:[e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),e.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Time");const Bu=$t(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");function zu(t){return at("MuiPickersArrowSwitcher",t)}it("MuiPickersArrowSwitcher",["root","spacer","button"]);const Hu=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel"],Gu=["ownerState"],qu=["ownerState"],Ku=we("div",{name:"MuiPickersArrowSwitcher",slot:"Root",overridesResolver:(t,s)=>s.root})({display:"flex"}),Yu=we("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer",overridesResolver:(t,s)=>s.spacer})(({theme:t})=>({width:t.spacing(3)})),So=we(We,{name:"MuiPickersArrowSwitcher",slot:"Button",overridesResolver:(t,s)=>s.button})(({ownerState:t})=>F({},t.hidden&&{visibility:"hidden"})),Qu=t=>{const{classes:s}=t;return nt({root:["root"],spacer:["spacer"],button:["button"]},zu,s)},Zu=h.forwardRef(function(s,r){var n,a,o,i;const c=jt().direction==="rtl",d=qe({props:s,name:"MuiPickersArrowSwitcher"}),{children:m,className:x,slots:g,slotProps:b,isNextDisabled:D,isNextHidden:p,onGoToNext:j,nextLabel:P,isPreviousDisabled:S,isPreviousHidden:T,onGoToPrevious:w,previousLabel:y}=d,f=_e(d,Hu),C=d,_=Qu(C),k={isDisabled:D,isHidden:p,goTo:j,label:P},R={isDisabled:S,isHidden:T,goTo:w,label:y},U=(n=g?.previousIconButton)!=null?n:So,z=$e({elementType:U,externalSlotProps:b?.previousIconButton,additionalProps:{size:"medium",title:R.label,"aria-label":R.label,disabled:R.isDisabled,edge:"end",onClick:R.goTo},ownerState:F({},C,{hidden:R.isHidden}),className:_.button}),G=(a=g?.nextIconButton)!=null?a:So,$=$e({elementType:G,externalSlotProps:b?.nextIconButton,additionalProps:{size:"medium",title:k.label,"aria-label":k.label,disabled:k.isDisabled,edge:"start",onClick:k.goTo},ownerState:F({},C,{hidden:k.isHidden}),className:_.button}),L=(o=g?.leftArrowIcon)!=null?o:Wu,se=$e({elementType:L,externalSlotProps:b?.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),ie=_e(se,Gu),te=(i=g?.rightArrowIcon)!=null?i:Uu,V=$e({elementType:te,externalSlotProps:b?.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),O=_e(V,qu);return e.jsxs(Ku,F({ref:r,className:Xe(_.root,x),ownerState:C},f,{children:[e.jsx(U,F({},z,{children:c?e.jsx(te,F({},O)):e.jsx(L,F({},ie))})),m?e.jsx(u,{variant:"subtitle1",component:"span",children:m}):e.jsx(Yu,{className:_.spacer,ownerState:C}),e.jsx(G,F({},$,{children:c?e.jsx(L,F({},ie)):e.jsx(te,F({},O))}))]}))}),Fs=36,ur=2,hr=320,Ju=280,wn=334,Xu=we(_t)({[`& .${kn.container}`]:{outline:0},[`& .${kn.paper}`]:{outline:0,minWidth:hr}}),eh=we(Tt)({"&:first-of-type":{padding:0}});function th(t){var s,r;const{children:n,onDismiss:a,open:o,slots:i,slotProps:l}=t,c=(s=i?.dialog)!=null?s:Xu,d=(r=i?.mobileTransition)!=null?r:nr;return e.jsx(c,F({open:o,onClose:a},l?.dialog,{TransitionComponent:d,TransitionProps:l?.mobileTransition,PaperComponent:i?.mobilePaper,PaperProps:l?.mobilePaper,children:e.jsx(eh,{children:n})}))}function sh(t){return at("MuiPickersPopper",t)}it("MuiPickersPopper",["root","paper"]);function rh(t,s){return Array.isArray(s)?s.every(r=>t.indexOf(r)!==-1):t.indexOf(s)!==-1}const nh=(t,s)=>r=>{(r.key==="Enter"||r.key===" ")&&(t(r),r.preventDefault(),r.stopPropagation())},tr=(t=document)=>{const s=t.activeElement;return s?s.shadowRoot?tr(s.shadowRoot):s:null},oh="@media (pointer: fine)",ah="@media (prefers-reduced-motion: reduce)",fs=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),Co=fs&&fs[1]?parseInt(fs[1],10):null,Po=fs&&fs[2]?parseInt(fs[2],10):null,ih=Co&&Co<10||Po&&Po<13||!1,Da=()=>rr(ah,{defaultMatches:!1})||ih,lh=["PaperComponent","popperPlacement","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],ch=t=>{const{classes:s}=t;return nt({root:["root"],paper:["paper"]},sh,s)},dh=we(ni,{name:"MuiPickersPopper",slot:"Root",overridesResolver:(t,s)=>s.root})(({theme:t})=>({zIndex:t.zIndex.modal})),uh=we(He,{name:"MuiPickersPopper",slot:"Paper",overridesResolver:(t,s)=>s.paper})(({ownerState:t})=>F({outline:0,transformOrigin:"top center"},t.placement.includes("top")&&{transformOrigin:"bottom center"}));function hh(t,s){return s.documentElement.clientWidth<t.clientX||s.documentElement.clientHeight<t.clientY}function fh(t,s){const r=h.useRef(!1),n=h.useRef(!1),a=h.useRef(null),o=h.useRef(!1);h.useEffect(()=>{if(!t)return;function c(){o.current=!0}return document.addEventListener("mousedown",c,!0),document.addEventListener("touchstart",c,!0),()=>{document.removeEventListener("mousedown",c,!0),document.removeEventListener("touchstart",c,!0),o.current=!1}},[t]);const i=he(c=>{if(!o.current)return;const d=n.current;n.current=!1;const m=wr(a.current);if(!a.current||"clientX"in c&&hh(c,m))return;if(r.current){r.current=!1;return}let x;c.composedPath?x=c.composedPath().indexOf(a.current)>-1:x=!m.documentElement.contains(c.target)||a.current.contains(c.target),!x&&!d&&s(c)}),l=()=>{n.current=!0};return h.useEffect(()=>{if(t){const c=wr(a.current),d=()=>{r.current=!0};return c.addEventListener("touchstart",i),c.addEventListener("touchmove",d),()=>{c.removeEventListener("touchstart",i),c.removeEventListener("touchmove",d)}}},[t,i]),h.useEffect(()=>{if(t){const c=wr(a.current);return c.addEventListener("click",i),()=>{c.removeEventListener("click",i),n.current=!1}}},[t,i]),[a,l,l]}const mh=h.forwardRef((t,s)=>{const{PaperComponent:r,popperPlacement:n,ownerState:a,children:o,paperSlotProps:i,paperClasses:l,onPaperClick:c,onPaperTouchStart:d}=t,m=_e(t,lh),x=F({},a,{placement:n}),g=$e({elementType:r,externalSlotProps:i,additionalProps:{tabIndex:-1,elevation:8,ref:s},className:l,ownerState:x});return e.jsx(r,F({},m,g,{onClick:b=>{var D;c(b),(D=g.onClick)==null||D.call(g,b)},onTouchStart:b=>{var D;d(b),(D=g.onTouchStart)==null||D.call(g,b)},ownerState:x,children:o}))});function ph(t){var s,r,n,a;const o=qe({props:t,name:"MuiPickersPopper"}),{anchorEl:i,children:l,containerRef:c=null,shouldRestoreFocus:d,onBlur:m,onDismiss:x,open:g,role:b,placement:D,slots:p,slotProps:j,reduceAnimations:P}=o;h.useEffect(()=>{function V(O){g&&(O.key==="Escape"||O.key==="Esc")&&x()}return document.addEventListener("keydown",V),()=>{document.removeEventListener("keydown",V)}},[x,g]);const S=h.useRef(null);h.useEffect(()=>{b==="tooltip"||d&&!d()||(g?S.current=tr(document):S.current&&S.current instanceof HTMLElement&&setTimeout(()=>{S.current instanceof HTMLElement&&S.current.focus()}))},[g,b,d]);const[T,w,y]=fh(g,m??x),f=h.useRef(null),C=Jt(f,c),_=Jt(C,T),k=o,R=ch(k),U=Da(),z=P??U,G=V=>{V.key==="Escape"&&(V.stopPropagation(),x())},$=((s=p?.desktopTransition)!=null?s:z)?nr:si,L=(r=p?.desktopTrapFocus)!=null?r:ri,se=(n=p?.desktopPaper)!=null?n:uh,ie=(a=p?.popper)!=null?a:dh,te=$e({elementType:ie,externalSlotProps:j?.popper,additionalProps:{transition:!0,role:b,open:g,anchorEl:i,placement:D,onKeyDown:G},className:R.root,ownerState:o});return e.jsx(ie,F({},te,{children:({TransitionProps:V,placement:O})=>e.jsx(L,F({open:g,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:b==="tooltip",isEnabled:()=>!0},j?.desktopTrapFocus,{children:e.jsx($,F({},V,j?.desktopTransition,{children:e.jsx(mh,{PaperComponent:se,ownerState:k,popperPlacement:O,ref:_,onPaperClick:w,onPaperTouchStart:y,paperClasses:R.paper,paperSlotProps:j?.desktopPaper,children:l})}))}))}))}const Sn=({timezone:t,value:s,defaultValue:r,onChange:n,valueManager:a})=>{var o,i;const l=Ie(),c=h.useRef(r),d=(o=s??c.current)!=null?o:a.emptyValue,m=h.useMemo(()=>a.getTimezone(l,d),[l,a,d]),x=he(p=>m==null?p:a.setTimezone(l,m,p)),g=(i=t??m)!=null?i:"default",b=h.useMemo(()=>a.setTimezone(l,g,d),[a,l,g,d]),D=he((p,...j)=>{const P=x(p);n?.(P,...j)});return{value:b,handleValueChange:D,timezone:g}},Cn=({name:t,timezone:s,value:r,defaultValue:n,onChange:a,valueManager:o})=>{const[i,l]=Ut({name:t,state:"value",controlled:r,default:n??o.emptyValue}),c=he((d,...m)=>{l(d),a?.(d,...m)});return Sn({timezone:s,value:i,defaultValue:void 0,onChange:c,valueManager:o})};function _a(t,s,r,n){const{value:a,onError:o}=t,i=ss(),l=h.useRef(n),c=s({adapter:i,value:a,props:t});return h.useEffect(()=>{o&&!r(c,l.current)&&o(c,a),l.current=c},[r,o,l,c,a]),c}const xh=t=>{const s=Ie(),r=Bt(),n=ss(),o=jt().direction==="rtl",{valueManager:i,fieldValueManager:l,validator:c,internalProps:d,internalProps:{value:m,defaultValue:x,referenceDate:g,onChange:b,format:D,formatDensity:p="dense",selectedSections:j,onSelectedSectionsChange:P,shouldRespectLeadingZeros:S=!1,timezone:T}}=t,{timezone:w,value:y,handleValueChange:f}=Sn({timezone:T,value:m,defaultValue:x,onChange:b,valueManager:i}),C=h.useMemo(()=>bu(s,w),[s,w]),_=h.useCallback((H,q=null)=>l.getSectionsFromValue(s,H,q,o,W=>vo(s,w,r,D,W,p,S,o)),[l,D,r,o,S,s,p,w]),k=h.useMemo(()=>l.getValueStrFromSections(_(i.emptyValue),o),[l,_,i.emptyValue,o]),[R,U]=h.useState(()=>{const H=_(y),q={sections:H,value:y,referenceValue:i.emptyValue,tempValueStrAndroid:null},W=uu(H),me=i.getInitialReferenceValue({referenceDate:g,value:y,utils:s,props:d,granularity:W,timezone:w});return F({},q,{referenceValue:me})}),[z,G]=Ut({controlled:j,default:null,name:"useField",state:"selectedSectionIndexes"}),$=H=>{G(H),P?.(H),U(q=>F({},q,{selectedSectionQuery:null}))},L=h.useMemo(()=>{if(z==null)return null;if(z==="all")return{startIndex:0,endIndex:R.sections.length-1,shouldSelectBoundarySelectors:!0};if(typeof z=="number")return{startIndex:z,endIndex:z};if(typeof z=="string"){const H=R.sections.findIndex(q=>q.type===z);return{startIndex:H,endIndex:H}}return z},[z,R.sections]),se=({value:H,referenceValue:q,sections:W})=>{if(U(K=>F({},K,{sections:W,value:H,referenceValue:q,tempValueStrAndroid:null})),i.areValuesEqual(s,R.value,H))return;const me={validationError:c({adapter:n,value:H,props:F({},d,{value:H,timezone:w})})};f(H,me)},ie=(H,q)=>{const W=[...R.sections];return W[H]=F({},W[H],{value:q,modified:!0}),va(W,o)},te=()=>{se({value:i.emptyValue,referenceValue:R.referenceValue,sections:_(i.emptyValue)})},V=()=>{if(L==null)return;const H=R.sections[L.startIndex],q=l.getActiveDateManager(s,R,H),me=q.getSections(R.sections).filter(Ee=>Ee.value!=="").length===(H.value===""?0:1),K=ie(L.startIndex,""),ye=me?null:s.date(new Date("")),Ce=q.getNewValuesFromNewActiveDate(ye);(ye!=null&&!s.isValid(ye))!=(q.date!=null&&!s.isValid(q.date))?se(F({},Ce,{sections:K})):U(Ee=>F({},Ee,Ce,{sections:K,tempValueStrAndroid:null}))},O=H=>{const q=(K,ye)=>{const Ce=s.parse(K,D);if(Ce==null||!s.isValid(Ce))return null;const Ee=vo(s,w,r,D,Ce,p,S,o);return wo(s,w,Ce,Ee,ye,!1)},W=l.parseValueStr(H,R.referenceValue,q),me=l.updateReferenceValue(s,W,R.referenceValue);se({value:W,referenceValue:me,sections:_(W,R.sections)})},fe=({activeSection:H,newSectionValue:q,shouldGoToNextSection:W})=>{W&&L&&L.startIndex<R.sections.length-1?$(L.startIndex+1):L&&L.startIndex!==L.endIndex&&$(L.startIndex);const me=l.getActiveDateManager(s,R,H),K=ie(L.startIndex,q),ye=me.getSections(K),Ce=gu(s,ye);let Ee,oe;if(Ce!=null&&s.isValid(Ce)){const pe=wo(s,w,Ce,ye,me.referenceDate,!0);Ee=me.getNewValuesFromNewActiveDate(pe),oe=!0}else Ee=me.getNewValuesFromNewActiveDate(Ce),oe=(Ce!=null&&!s.isValid(Ce))!=(me.date!=null&&!s.isValid(me.date));return oe?se(F({},Ee,{sections:K})):U(pe=>F({},pe,Ee,{sections:K,tempValueStrAndroid:null}))},B=H=>U(q=>F({},q,{tempValueStrAndroid:H}));return h.useEffect(()=>{const H=_(R.value);U(q=>F({},q,{sections:H}))},[D,s.locale]),h.useEffect(()=>{let H=!1;i.areValuesEqual(s,R.value,y)?H=i.getTimezone(s,R.value)!==i.getTimezone(s,y):H=!0,H&&U(q=>F({},q,{value:y,referenceValue:l.updateReferenceValue(s,y,q.referenceValue),sections:_(y)}))},[y]),{state:R,selectedSectionIndexes:L,setSelectedSections:$,clearValue:te,clearActiveSection:V,updateSectionValue:fe,updateValueFromValueStr:O,setTempAndroidValueStr:B,sectionsValueBoundaries:C,placeholder:k,timezone:w}},gh=5e3,os=t=>t.saveQuery!=null,yh=({sections:t,updateSectionValue:s,sectionsValueBoundaries:r,setTempAndroidValueStr:n,timezone:a})=>{const o=Ie(),[i,l]=h.useState(null),c=he(()=>l(null));h.useEffect(()=>{var b;i!=null&&((b=t[i.sectionIndex])==null?void 0:b.type)!==i.sectionType&&c()},[t,i,c]),h.useEffect(()=>{if(i!=null){const b=setTimeout(()=>c(),gh);return()=>{window.clearTimeout(b)}}return()=>{}},[i,c]);const d=({keyPressed:b,sectionIndex:D},p,j)=>{const P=b.toLowerCase(),S=t[D];if(i!=null&&(!j||j(i.value))&&i.sectionIndex===D){const w=`${i.value}${P}`,y=p(w,S);if(!os(y))return l({sectionIndex:D,value:w,sectionType:S.type}),y}const T=p(P,S);return os(T)&&!T.saveQuery?(c(),null):(l({sectionIndex:D,value:P,sectionType:S.type}),os(T)?null:T)},m=b=>{const D=(P,S,T)=>{const w=S.filter(y=>y.toLowerCase().startsWith(T));return w.length===0?{saveQuery:!1}:{sectionValue:w[0],shouldGoToNextSection:w.length===1}},p=(P,S,T,w)=>{const y=f=>ga(o,a,S.type,f);if(S.contentType==="letter")return D(S.format,y(S.format),P);if(T&&w!=null&&xa(o,T).contentType==="letter"){const f=y(T),C=D(T,f,P);return os(C)?{saveQuery:!1}:F({},C,{sectionValue:w(C.sectionValue,f)})}return{saveQuery:!1}};return d(b,(P,S)=>{switch(S.type){case"month":{const T=w=>bo(o,w,o.formats.month,S.format);return p(P,S,o.formats.month,T)}case"weekDay":{const T=(w,y)=>y.indexOf(w).toString();return p(P,S,o.formats.weekday,T)}case"meridiem":return p(P,S);default:return{saveQuery:!1}}})},x=b=>{const D=(j,P)=>{const S=+`${j}`,T=r[P.type]({currentDate:null,format:P.format,contentType:P.contentType});if(S>T.maximum)return{saveQuery:!1};if(S<T.minimum)return{saveQuery:!0};const w=+`${j}0`>T.maximum||j.length===T.maximum.toString().length;return{sectionValue:ba(o,a,S,T,P),shouldGoToNextSection:w}};return d(b,(j,P)=>{if(P.contentType==="digit"||P.contentType==="digit-with-letter")return D(j,P);if(P.type==="month"){wa(o,a,"digit","month","MM");const S=D(j,{type:P.type,format:"MM",hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2});if(os(S))return S;const T=bo(o,S.sectionValue,"MM",P.format);return F({},S,{sectionValue:T})}if(P.type==="weekDay"){const S=D(j,P);if(os(S))return S;const T=cr(o,a,P.format)[Number(S.sectionValue)-1];return F({},S,{sectionValue:T})}return{saveQuery:!1}},j=>!Number.isNaN(Number(j)))};return{applyCharacterEditing:he(b=>{const D=t[b.sectionIndex],j=b.keyPressed!==" "&&!Number.isNaN(Number(b.keyPressed))?x(b):m(b);j==null?n(null):s({activeSection:D,newSectionValue:j.sectionValue,shouldGoToNextSection:j.shouldGoToNextSection})}),resetCharacterQuery:c}},bh=["onClick","onKeyDown","onFocus","onBlur","onMouseUp","onPaste","error","clearable","onClear","disabled"],vh=t=>{const s=Ie(),{state:r,selectedSectionIndexes:n,setSelectedSections:a,clearValue:o,clearActiveSection:i,updateSectionValue:l,updateValueFromValueStr:c,setTempAndroidValueStr:d,sectionsValueBoundaries:m,placeholder:x,timezone:g}=xh(t),{inputRef:b,internalProps:D,internalProps:{readOnly:p=!1,unstableFieldRef:j,minutesStep:P},forwardedProps:{onClick:S,onKeyDown:T,onFocus:w,onBlur:y,onMouseUp:f,onPaste:C,error:_,clearable:k,onClear:R,disabled:U},fieldValueManager:z,valueManager:G,validator:$}=t,L=_e(t.forwardedProps,bh),{applyCharacterEditing:se,resetCharacterQuery:ie}=yh({sections:r.sections,updateSectionValue:l,sectionsValueBoundaries:m,setTempAndroidValueStr:d,timezone:g}),te=h.useRef(null),V=Jt(b,te),O=h.useRef(void 0),B=jt().direction==="rtl",H=h.useMemo(()=>wu(r.sections,B),[r.sections,B]),q=()=>{var Z;if(p){a(null);return}const N=(Z=te.current.selectionStart)!=null?Z:0;let Y;N<=r.sections[0].startInInput||N>=r.sections[r.sections.length-1].endInInput?Y=1:Y=r.sections.findIndex(ge=>ge.startInInput-ge.startSeparator.length>N);const le=Y===-1?r.sections.length-1:Y-1;a(le)},W=he((Z,...N)=>{Z.isDefaultPrevented()||(S?.(Z,...N),q())}),me=he(Z=>{f?.(Z),Z.preventDefault()}),K=he((...Z)=>{w?.(...Z);const N=te.current;window.clearTimeout(O.current),O.current=setTimeout(()=>{!N||N!==te.current||n!=null||p||(N.value.length&&Number(N.selectionEnd)-Number(N.selectionStart)===N.value.length?a("all"):q())})}),ye=he((...Z)=>{y?.(...Z),a(null)}),Ce=he(Z=>{if(C?.(Z),p){Z.preventDefault();return}const N=Z.clipboardData.getData("text");if(n&&n.startIndex===n.endIndex){const Y=r.sections[n.startIndex],le=/^[a-zA-Z]+$/.test(N),ge=/^[0-9]+$/.test(N),De=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(N);if(Y.contentType==="letter"&&le||Y.contentType==="digit"&&ge||Y.contentType==="digit-with-letter"&&De){ie(),l({activeSection:Y,newSectionValue:N,shouldGoToNextSection:!0}),Z.preventDefault();return}if(le||ge){Z.preventDefault();return}}Z.preventDefault(),ie(),c(N)}),Ee=he(Z=>{if(p)return;const N=Z.target.value;if(N===""){ie(),o();return}const Y=Z.nativeEvent.data,le=Y&&Y.length>1,ge=le?Y:N,De=cs(ge);if(n==null||le){c(le?Y:De);return}let Be;if(n.startIndex===0&&n.endIndex===r.sections.length-1&&De.length===1)Be=De;else{const Qe=cs(z.getValueStrFromSections(r.sections,B));let zt=-1,Ht=-1;for(let ze=0;ze<Qe.length;ze+=1)zt===-1&&Qe[ze]!==De[ze]&&(zt=ze),Ht===-1&&Qe[Qe.length-ze-1]!==De[De.length-ze-1]&&(Ht=ze);const yt=r.sections[n.startIndex];if(zt<yt.start||Qe.length-Ht-1>yt.end)return;const et=De.length-Qe.length+yt.end-cs(yt.endSeparator||"").length;Be=De.slice(yt.start+cs(yt.startSeparator||"").length,et)}if(Be.length===0){ju()?d(ge):(ie(),i());return}se({keyPressed:Be,sectionIndex:n.startIndex})}),oe=he(Z=>{switch(T?.(Z),!0){case(Z.key==="a"&&(Z.ctrlKey||Z.metaKey)):{Z.preventDefault(),a("all");break}case Z.key==="ArrowRight":{if(Z.preventDefault(),n==null)a(H.startIndex);else if(n.startIndex!==n.endIndex)a(n.endIndex);else{const N=H.neighbors[n.startIndex].rightIndex;N!==null&&a(N)}break}case Z.key==="ArrowLeft":{if(Z.preventDefault(),n==null)a(H.endIndex);else if(n.startIndex!==n.endIndex)a(n.startIndex);else{const N=H.neighbors[n.startIndex].leftIndex;N!==null&&a(N)}break}case Z.key==="Delete":{if(Z.preventDefault(),p)break;n==null||n.startIndex===0&&n.endIndex===r.sections.length-1?o():i(),ie();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(Z.key):{if(Z.preventDefault(),p||n==null)break;const N=r.sections[n.startIndex],Y=z.getActiveDateManager(s,r,N),le=mu(s,g,N,Z.key,m,Y.date,{minutesStep:P});l({activeSection:N,newSectionValue:le,shouldGoToNextSection:!1});break}}});ps(()=>{if(!te.current)return;if(n==null){te.current.scrollLeft&&(te.current.scrollLeft=0);return}const Z=r.sections[n.startIndex],N=r.sections[n.endIndex];let Y=Z.startInInput,le=N.endInInput;if(n.shouldSelectBoundarySelectors&&(Y-=Z.startSeparator.length,le+=N.endSeparator.length),Y!==te.current.selectionStart||le!==te.current.selectionEnd){const ge=te.current.scrollTop;te.current===tr(document)&&te.current.setSelectionRange(Y,le),te.current.scrollTop=ge}});const pe=_a(F({},D,{value:r.value,timezone:g}),$,G.isSameError,G.defaultErrorState),X=h.useMemo(()=>_!==void 0?_:G.hasError(pe),[G,pe,_]);h.useEffect(()=>{!X&&!n&&ie()},[r.referenceValue,n,X]),h.useEffect(()=>(te.current&&te.current===document.activeElement&&a("all"),()=>window.clearTimeout(O.current)),[]),h.useEffect(()=>{r.tempValueStrAndroid!=null&&n!=null&&(ie(),i())},[r.tempValueStrAndroid]);const I=h.useMemo(()=>{var Z;return(Z=r.tempValueStrAndroid)!=null?Z:z.getValueStrFromSections(r.sections,B)},[r.sections,z,r.tempValueStrAndroid,B]),ne=h.useMemo(()=>n==null||r.sections[n.startIndex].contentType==="letter"?"text":"numeric",[n,r.sections]),be=te.current&&te.current===tr(document),Pe=G.areValuesEqual(s,r.value,G.emptyValue),ue=!be&&Pe;h.useImperativeHandle(j,()=>({getSections:()=>r.sections,getActiveSectionIndex:()=>{var Z,N,Y;const le=(Z=te.current.selectionStart)!=null?Z:0,ge=(N=te.current.selectionEnd)!=null?N:0,De=!!((Y=te.current)!=null&&Y.readOnly);if(le===0&&ge===0||De)return null;const Be=le<=r.sections[0].startInInput?1:r.sections.findIndex(Qe=>Qe.startInInput-Qe.startSeparator.length>le);return Be===-1?r.sections.length-1:Be-1},setSelectedSections:Z=>a(Z)}));const xe=he((Z,...N)=>{var Y;Z.preventDefault(),R?.(Z,...N),o(),te==null||(Y=te.current)==null||Y.focus(),a(0)});return F({placeholder:x,autoComplete:"off",disabled:!!U},L,{value:ue?"":I,inputMode:ne,readOnly:p,onClick:W,onFocus:K,onBlur:ye,onPaste:Ce,onChange:Ee,onKeyDown:oe,onMouseUp:me,onClear:xe,error:X,ref:V,clearable:!!(k&&!Pe&&!p&&!U)})},jh=({open:t,onOpen:s,onClose:r})=>{const n=h.useRef(typeof t=="boolean").current,[a,o]=h.useState(!1);h.useEffect(()=>{if(n){if(typeof t!="boolean")throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");o(t)}},[n,t]);const i=h.useCallback(l=>{n||o(l),l&&s&&s(),!l&&r&&r()},[n,s,r]);return{isOpen:a,setIsOpen:i}},wh=t=>{const{action:s,hasChanged:r,dateState:n,isControlled:a}=t,o=!a&&!n.hasBeenModifiedSinceMount;return s.name==="setValueFromField"?!0:s.name==="setValueFromAction"?o&&["accept","today","clear"].includes(s.pickerAction)?!0:r(n.lastPublishedValue):s.name==="setValueFromView"&&s.selectionState!=="shallow"||s.name==="setValueFromShortcut"?o?!0:r(n.lastPublishedValue):!1},Sh=t=>{const{action:s,hasChanged:r,dateState:n,isControlled:a,closeOnSelect:o}=t,i=!a&&!n.hasBeenModifiedSinceMount;return s.name==="setValueFromAction"?i&&["accept","today","clear"].includes(s.pickerAction)?!0:r(n.lastCommittedValue):s.name==="setValueFromView"&&s.selectionState==="finish"&&o?i?!0:r(n.lastCommittedValue):s.name==="setValueFromShortcut"?s.changeImportance==="accept"&&r(n.lastCommittedValue):!1},Ch=t=>{const{action:s,closeOnSelect:r}=t;return s.name==="setValueFromAction"?!0:s.name==="setValueFromView"?s.selectionState==="finish"&&r:s.name==="setValueFromShortcut"?s.changeImportance==="accept":!1},Ph=({props:t,valueManager:s,valueType:r,wrapperVariant:n,validator:a})=>{const{onAccept:o,onChange:i,value:l,defaultValue:c,closeOnSelect:d=n==="desktop",selectedSections:m,onSelectedSectionsChange:x,timezone:g}=t,{current:b}=h.useRef(c),{current:D}=h.useRef(l!==void 0),p=Ie(),j=ss(),[P,S]=Ut({controlled:m,default:null,name:"usePickerValue",state:"selectedSections"}),{isOpen:T,setIsOpen:w}=jh(t),[y,f]=h.useState(()=>{let K;return l!==void 0?K=l:b!==void 0?K=b:K=s.emptyValue,{draft:K,lastPublishedValue:K,lastCommittedValue:K,lastControlledValue:l,hasBeenModifiedSinceMount:!1}}),{timezone:C,handleValueChange:_}=Sn({timezone:g,value:l,defaultValue:b,onChange:i,valueManager:s});_a(F({},t,{value:y.draft,timezone:C}),a,s.isSameError,s.defaultErrorState);const k=he(K=>{const ye={action:K,dateState:y,hasChanged:pe=>!s.areValuesEqual(p,K.value,pe),isControlled:D,closeOnSelect:d},Ce=wh(ye),Ee=Sh(ye),oe=Ch(ye);if(f(pe=>F({},pe,{draft:K.value,lastPublishedValue:Ce?K.value:pe.lastPublishedValue,lastCommittedValue:Ee?K.value:pe.lastCommittedValue,hasBeenModifiedSinceMount:!0})),Ce){const X={validationError:K.name==="setValueFromField"?K.context.validationError:a({adapter:j,value:K.value,props:F({},t,{value:K.value,timezone:C})})};K.name==="setValueFromShortcut"&&K.shortcut!=null&&(X.shortcut=K.shortcut),_(K.value,X)}Ee&&o&&o(K.value),oe&&w(!1)});if(l!==void 0&&(y.lastControlledValue===void 0||!s.areValuesEqual(p,y.lastControlledValue,l))){const K=s.areValuesEqual(p,y.draft,l);f(ye=>F({},ye,{lastControlledValue:l},K?{}:{lastCommittedValue:l,lastPublishedValue:l,draft:l,hasBeenModifiedSinceMount:!0}))}const R=he(()=>{k({value:s.emptyValue,name:"setValueFromAction",pickerAction:"clear"})}),U=he(()=>{k({value:y.lastPublishedValue,name:"setValueFromAction",pickerAction:"accept"})}),z=he(()=>{k({value:y.lastPublishedValue,name:"setValueFromAction",pickerAction:"dismiss"})}),G=he(()=>{k({value:y.lastCommittedValue,name:"setValueFromAction",pickerAction:"cancel"})}),$=he(()=>{k({value:s.getTodayValue(p,C,r),name:"setValueFromAction",pickerAction:"today"})}),L=he(()=>w(!0)),se=he(()=>w(!1)),ie=he((K,ye="partial")=>k({name:"setValueFromView",value:K,selectionState:ye})),te=he((K,ye,Ce)=>k({name:"setValueFromShortcut",value:K,changeImportance:ye??"accept",shortcut:Ce})),V=he((K,ye)=>k({name:"setValueFromField",value:K,context:ye})),O=he(K=>{S(K),x?.(K)}),fe={onClear:R,onAccept:U,onDismiss:z,onCancel:G,onSetToday:$,onOpen:L,onClose:se},B={value:y.draft,onChange:V,selectedSections:P,onSelectedSectionsChange:O},H=h.useMemo(()=>s.cleanValue(p,y.draft),[p,s,y.draft]),q={value:H,onChange:ie,onClose:se,open:T,onSelectedSectionsChange:O},me=F({},fe,{value:H,onChange:ie,onSelectShortcut:te,isValid:K=>{const ye=a({adapter:j,value:K,props:F({},t,{value:K,timezone:C})});return!s.hasError(ye)}});return{open:T,fieldProps:B,viewProps:q,layoutProps:me,actions:fe}};function Ta({onChange:t,onViewChange:s,openTo:r,view:n,views:a,autoFocus:o,focusedView:i,onFocusedViewChange:l}){var c,d;const m=h.useRef(r),x=h.useRef(a),g=h.useRef(a.includes(r)?r:a[0]),[b,D]=Ut({name:"useViews",state:"view",controlled:n,default:g.current}),p=h.useRef(o?b:null),[j,P]=Ut({name:"useViews",state:"focusedView",controlled:i,default:p.current});h.useEffect(()=>{(m.current&&m.current!==r||x.current&&x.current.some(k=>!a.includes(k)))&&(D(a.includes(r)?r:a[0]),x.current=a,m.current=r)},[r,D,b,a]);const S=a.indexOf(b),T=(c=a[S-1])!=null?c:null,w=(d=a[S+1])!=null?d:null,y=he((k,R)=>{P(R?k:U=>k===U?null:U),l?.(k,R)}),f=he(k=>{y(k,!0),k!==b&&(D(k),s&&s(k))}),C=he(()=>{w&&f(w)}),_=he((k,R,U)=>{const z=R==="finish",G=U?a.indexOf(U)<a.length-1:!!w;if(t(k,z&&G?"partial":R,U),U&&U!==b){const L=a[a.indexOf(U)+1];L&&f(L)}else z&&C()});return{view:b,setView:f,focusedView:j,setFocusedView:y,nextView:w,previousView:T,defaultView:a.includes(r)?r:a[0],goToNextView:C,setValueAndGoToNextView:_}}const Dh=["className","sx"],_h=({props:t,propsFromPickerValue:s,additionalViewProps:r,inputRef:n,autoFocusView:a})=>{const{onChange:o,open:i,onSelectedSectionsChange:l,onClose:c}=s,{view:d,views:m,openTo:x,onViewChange:g,viewRenderers:b,timezone:D}=t,p=_e(t,Dh),{view:j,setView:P,defaultView:S,focusedView:T,setFocusedView:w,setValueAndGoToNextView:y}=Ta({view:d,views:m,openTo:x,onChange:o,onViewChange:g,autoFocus:a}),{hasUIView:f,viewModeLookup:C}=h.useMemo(()=>m.reduce(($,L)=>{let se;return b[L]!=null?se="UI":se="field",$.viewModeLookup[L]=se,se==="UI"&&($.hasUIView=!0),$},{hasUIView:!1,viewModeLookup:{}}),[b,m]),_=h.useMemo(()=>m.reduce(($,L)=>b[L]!=null&&cu(L)?$+1:$,0),[b,m]),k=C[j],R=he(()=>k==="UI"),[U,z]=h.useState(k==="UI"?j:null);return U!==j&&C[j]==="UI"&&z(j),ps(()=>{k==="field"&&i&&(c(),setTimeout(()=>{n?.current.focus(),l(j)}))},[j]),ps(()=>{if(!i)return;let $=j;k==="field"&&U!=null&&($=U),$!==S&&C[$]==="UI"&&C[S]==="UI"&&($=S),$!==j&&P($),w($,!0)},[i]),{hasUIView:f,shouldRestoreFocus:R,layoutProps:{views:m,view:U,onViewChange:P},renderCurrentView:()=>{if(U==null)return null;const $=b[U];return $==null?null:$(F({},p,r,s,{views:m,timezone:D,onChange:y,view:U,onViewChange:P,focusedView:T,onFocusedViewChange:w,showViewSwitcher:_>1,timeViewsCount:_}))}}};function Do(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}const Th=(t,s)=>{const[r,n]=h.useState(Do);return ps(()=>{const o=()=>{n(Do())};return window.addEventListener("orientationchange",o),()=>{window.removeEventListener("orientationchange",o)}},[]),rh(t,["hours","minutes","seconds"])?!1:(s||r)==="landscape"},kh=({props:t,propsFromPickerValue:s,propsFromPickerViews:r,wrapperVariant:n})=>{const{orientation:a}=t,o=Th(r.views,a);return{layoutProps:F({},r,s,{isLandscape:o,wrapperVariant:n,disabled:t.disabled,readOnly:t.readOnly})}},ka=({props:t,valueManager:s,valueType:r,wrapperVariant:n,inputRef:a,additionalViewProps:o,validator:i,autoFocusView:l})=>{const c=Ph({props:t,valueManager:s,valueType:r,wrapperVariant:n,validator:i}),d=_h({props:t,inputRef:a,additionalViewProps:o,autoFocusView:l,propsFromPickerValue:c.viewProps}),m=kh({props:t,wrapperVariant:n,propsFromPickerValue:c.layoutProps,propsFromPickerViews:d.layoutProps});return{open:c.open,actions:c.actions,fieldProps:c.fieldProps,renderCurrentView:d.renderCurrentView,hasUIView:d.hasUIView,shouldRestoreFocus:d.shouldRestoreFocus,layoutProps:m.layoutProps}};function Ea(t){return at("MuiPickersLayout",t)}const Nr=it("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),Eh=["onAccept","onClear","onCancel","onSetToday","actions"];function Ih(t){const{onAccept:s,onClear:r,onCancel:n,onSetToday:a,actions:o}=t,i=_e(t,Eh),l=Bt();if(o==null||o.length===0)return null;const c=o?.map(d=>{switch(d){case"clear":return e.jsx(ee,{onClick:r,children:l.clearButtonLabel},d);case"cancel":return e.jsx(ee,{onClick:n,children:l.cancelButtonLabel},d);case"accept":return e.jsx(ee,{onClick:s,children:l.okButtonLabel},d);case"today":return e.jsx(ee,{onClick:a,children:l.todayButtonLabel},d);default:return null}});return e.jsx(It,F({},i,{children:c}))}const Ah=["items","changeImportance","isLandscape","onChange","isValid"],Rh=["getValue"];function Mh(t){const{items:s,changeImportance:r,onChange:n,isValid:a}=t,o=_e(t,Ah);if(s==null||s.length===0)return null;const i=s.map(l=>{let{getValue:c}=l,d=_e(l,Rh);const m=c({isValid:a});return{label:d.label,onClick:()=>{n(m,r,d)},disabled:!a(m)}});return e.jsx(Zs,F({dense:!0,sx:[{maxHeight:wn,maxWidth:200,overflow:"auto"},...Array.isArray(o.sx)?o.sx:[o.sx]]},o,{children:i.map(l=>e.jsx(Kt,{children:e.jsx(Ue,F({},l))},l.label))}))}function Oh(t){return t.view!==null}const Fh=t=>{const{classes:s,isLandscape:r}=t;return nt({root:["root",r&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},Ea,s)},Nh=t=>{var s,r;const{wrapperVariant:n,onAccept:a,onClear:o,onCancel:i,onSetToday:l,view:c,views:d,onViewChange:m,value:x,onChange:g,onSelectShortcut:b,isValid:D,isLandscape:p,disabled:j,readOnly:P,children:S,components:T,componentsProps:w,slots:y,slotProps:f}=t,C=y??Ca(T),_=f??w,k=Fh(t),R=(s=C?.actionBar)!=null?s:Ih,U=$e({elementType:R,externalSlotProps:_?.actionBar,additionalProps:{onAccept:a,onClear:o,onCancel:i,onSetToday:l,actions:n==="desktop"?[]:["cancel","accept"],className:k.actionBar},ownerState:F({},t,{wrapperVariant:n})}),z=e.jsx(R,F({},U)),G=C?.toolbar,$=$e({elementType:G,externalSlotProps:_?.toolbar,additionalProps:{isLandscape:p,onChange:g,value:x,view:c,onViewChange:m,views:d,disabled:j,readOnly:P,className:k.toolbar},ownerState:F({},t,{wrapperVariant:n})}),L=Oh($)&&G?e.jsx(G,F({},$)):null,se=S,ie=C?.tabs,te=c&&ie?e.jsx(ie,F({view:c,onViewChange:m,className:k.tabs},_?.tabs)):null,V=(r=C?.shortcuts)!=null?r:Mh,O=$e({elementType:V,externalSlotProps:_?.shortcuts,additionalProps:{isValid:D,isLandscape:p,onChange:b,className:k.shortcuts},ownerState:{isValid:D,isLandscape:p,onChange:b,className:k.shortcuts,wrapperVariant:n}}),fe=c&&V?e.jsx(V,F({},O)):null;return{toolbar:L,content:se,tabs:te,actionBar:z,shortcuts:fe}},Lh=t=>{const{isLandscape:s,classes:r}=t;return nt({root:["root",s&&"landscape"],contentWrapper:["contentWrapper"]},Ea,r)},Ia=we("div",{name:"MuiPickersLayout",slot:"Root",overridesResolver:(t,s)=>s.root})(({theme:t,ownerState:s})=>({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${Nr.toolbar}`]:s.isLandscape?{gridColumn:t.direction==="rtl"?3:1,gridRow:"2 / 3"}:{gridColumn:"2 / 4",gridRow:1},[`.${Nr.shortcuts}`]:s.isLandscape?{gridColumn:"2 / 4",gridRow:1}:{gridColumn:t.direction==="rtl"?3:1,gridRow:"2 / 3"},[`& .${Nr.actionBar}`]:{gridColumn:"1 / 4",gridRow:3}}));Ia.propTypes={as:M.elementType,ownerState:M.shape({isLandscape:M.bool.isRequired}).isRequired,sx:M.oneOfType([M.arrayOf(M.oneOfType([M.func,M.object,M.bool])),M.func,M.object])};const Vh=we("div",{name:"MuiPickersLayout",slot:"ContentWrapper",overridesResolver:(t,s)=>s.contentWrapper})({gridColumn:2,gridRow:2,display:"flex",flexDirection:"column"}),Aa=function(s){const r=qe({props:s,name:"MuiPickersLayout"}),{toolbar:n,content:a,tabs:o,actionBar:i,shortcuts:l}=Nh(r),{sx:c,className:d,isLandscape:m,ref:x,wrapperVariant:g}=r,b=r,D=Lh(b);return e.jsxs(Ia,{ref:x,sx:c,className:Xe(d,D.root),ownerState:b,children:[m?l:n,m?n:l,e.jsx(Vh,{className:D.contentWrapper,children:g==="desktop"?e.jsxs(h.Fragment,{children:[a,o]}):e.jsxs(h.Fragment,{children:[o,a]})}),i]})};function Wh(t,{disableFuture:s,maxDate:r,timezone:n}){const a=Ie();return h.useMemo(()=>{const o=a.dateWithTimezone(void 0,n),i=a.startOfMonth(s&&a.isBefore(o,r)?o:r);return!a.isAfter(i,t)},[s,r,t,a,n])}function Uh(t,{disablePast:s,minDate:r,timezone:n}){const a=Ie();return h.useMemo(()=>{const o=a.dateWithTimezone(void 0,n),i=a.startOfMonth(s&&a.isAfter(o,r)?o:r);return!a.isBefore(i,t)},[s,r,t,a,n])}const Ra=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],$h=["disablePast","disableFuture","minTime","maxTime","shouldDisableClock","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],Bh=["minDateTime","maxDateTime"],zh=[...Ra,...$h,...Bh],Ma=t=>zh.reduce((s,r)=>(t.hasOwnProperty(r)&&(s[r]=t[r]),s),{}),Hh=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","readOnly","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef"],Gh=(t,s)=>{const r=F({},t),n={},a=o=>{r.hasOwnProperty(o)&&(n[o]=r[o],delete r[o])};return Hh.forEach(a),Ra.forEach(a),{forwardedProps:r,internalProps:n}},fr=({props:t,value:s,adapter:r})=>{if(s===null)return null;const{shouldDisableDate:n,shouldDisableMonth:a,shouldDisableYear:o,disablePast:i,disableFuture:l,timezone:c}=t,d=r.utils.dateWithTimezone(void 0,c),m=gt(r.utils,t.minDate,r.defaultDates.minDate),x=gt(r.utils,t.maxDate,r.defaultDates.maxDate);switch(!0){case!r.utils.isValid(s):return"invalidDate";case!!(n&&n(s)):return"shouldDisableDate";case!!(a&&a(s)):return"shouldDisableMonth";case!!(o&&o(s)):return"shouldDisableYear";case!!(l&&r.utils.isAfterDay(s,d)):return"disableFuture";case!!(i&&r.utils.isBeforeDay(s,d)):return"disablePast";case!!(m&&r.utils.isBeforeDay(s,m)):return"minDate";case!!(x&&r.utils.isAfterDay(s,x)):return"maxDate";default:return null}};function qh(t){return at("MuiPickersDay",t)}const Gt=it("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]),Kh=["autoFocus","className","day","disabled","disableHighlightToday","disableMargin","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","outsideCurrentMonth","selected","showDaysOutsideCurrentMonth","children","today","isFirstVisibleCell","isLastVisibleCell"],Yh=t=>{const{selected:s,disableMargin:r,disableHighlightToday:n,today:a,disabled:o,outsideCurrentMonth:i,showDaysOutsideCurrentMonth:l,classes:c}=t,d=i&&!l;return nt({root:["root",s&&!d&&"selected",o&&"disabled",!r&&"dayWithMargin",!n&&a&&"today",i&&l&&"dayOutsideMonth",d&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},qh,c)},Oa=({theme:t,ownerState:s})=>F({},t.typography.caption,{width:Fs,height:Fs,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:t.transitions.create("background-color",{duration:t.transitions.duration.short}),color:(t.vars||t).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:xs(t.palette.primary.main,t.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.focusOpacity})`:xs(t.palette.primary.main,t.palette.action.focusOpacity),[`&.${Gt.selected}`]:{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${Gt.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,fontWeight:t.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${Gt.disabled}:not(.${Gt.selected})`]:{color:(t.vars||t).palette.text.disabled},[`&.${Gt.disabled}&.${Gt.selected}`]:{opacity:.6}},!s.disableMargin&&{margin:`0 ${ur}px`},s.outsideCurrentMonth&&s.showDaysOutsideCurrentMonth&&{color:(t.vars||t).palette.text.secondary},!s.disableHighlightToday&&s.today&&{[`&:not(.${Gt.selected})`]:{border:`1px solid ${(t.vars||t).palette.text.secondary}`}}),Fa=(t,s)=>{const{ownerState:r}=t;return[s.root,!r.disableMargin&&s.dayWithMargin,!r.disableHighlightToday&&r.today&&s.today,!r.outsideCurrentMonth&&r.showDaysOutsideCurrentMonth&&s.dayOutsideMonth,r.outsideCurrentMonth&&!r.showDaysOutsideCurrentMonth&&s.hiddenDaySpacingFiller]},Qh=we(oi,{name:"MuiPickersDay",slot:"Root",overridesResolver:Fa})(Oa),Zh=we("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:Fa})(({theme:t,ownerState:s})=>F({},Oa({theme:t,ownerState:s}),{opacity:0,pointerEvents:"none"})),Ts=()=>{},Jh=h.forwardRef(function(s,r){const n=qe({props:s,name:"MuiPickersDay"}),{autoFocus:a=!1,className:o,day:i,disabled:l=!1,disableHighlightToday:c=!1,disableMargin:d=!1,isAnimating:m,onClick:x,onDaySelect:g,onFocus:b=Ts,onBlur:D=Ts,onKeyDown:p=Ts,onMouseDown:j=Ts,onMouseEnter:P=Ts,outsideCurrentMonth:S,selected:T=!1,showDaysOutsideCurrentMonth:w=!1,children:y,today:f=!1}=n,C=_e(n,Kh),_=F({},n,{autoFocus:a,disabled:l,disableHighlightToday:c,disableMargin:d,selected:T,showDaysOutsideCurrentMonth:w,today:f}),k=Yh(_),R=Ie(),U=h.useRef(null),z=Jt(U,r);ps(()=>{a&&!l&&!m&&!S&&U.current.focus()},[a,l,m,S]);const G=L=>{j(L),S&&L.preventDefault()},$=L=>{l||g(i),S&&L.currentTarget.focus(),x&&x(L)};return S&&!w?e.jsx(Zh,{className:Xe(k.root,k.hiddenDaySpacingFiller,o),ownerState:_,role:C.role}):e.jsx(Qh,F({className:Xe(k.root,o),ref:z,centerRipple:!0,disabled:l,tabIndex:T?0:-1,onKeyDown:L=>p(L,i),onFocus:L=>b(L,i),onBlur:L=>D(L,i),onMouseEnter:L=>P(L,i),onClick:$,onMouseDown:G},C,{ownerState:_,children:y||R.format(i,"dayOfMonth")}))}),Xh=h.memo(Jh),ef=t=>at("MuiPickersSlideTransition",t),mt=it("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),tf=["children","className","reduceAnimations","slideDirection","transKey","classes"],sf=t=>{const{classes:s,slideDirection:r}=t,n={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${r}`],exitActive:[`slideExitActiveLeft-${r}`]};return nt(n,ef,s)},rf=we(Mo,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(t,s)=>[s.root,{[`.${mt["slideEnter-left"]}`]:s["slideEnter-left"]},{[`.${mt["slideEnter-right"]}`]:s["slideEnter-right"]},{[`.${mt.slideEnterActive}`]:s.slideEnterActive},{[`.${mt.slideExit}`]:s.slideExit},{[`.${mt["slideExitActiveLeft-left"]}`]:s["slideExitActiveLeft-left"]},{[`.${mt["slideExitActiveLeft-right"]}`]:s["slideExitActiveLeft-right"]}]})(({theme:t})=>{const s=t.transitions.create("transform",{duration:t.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${mt["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${mt["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${mt.slideEnterActive}`]:{transform:"translate(0%)",transition:s},[`& .${mt.slideExit}`]:{transform:"translate(0%)"},[`& .${mt["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:s,zIndex:0},[`& .${mt["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:s,zIndex:0}}});function nf(t){const s=qe({props:t,name:"MuiPickersSlideTransition"}),{children:r,className:n,reduceAnimations:a,transKey:o}=s,i=_e(s,tf),l=sf(s),c=jt();if(a)return e.jsx("div",{className:Xe(l.root,n),children:r});const d={exit:l.exit,enterActive:l.enterActive,enter:l.enter,exitActive:l.exitActive};return e.jsx(rf,{className:Xe(l.root,n),childFactory:m=>h.cloneElement(m,{classNames:d}),role:"presentation",children:e.jsx(ai,F({mountOnEnter:!0,unmountOnExit:!0,timeout:c.transitions.duration.complex,classNames:d},i,{children:r}),o)})}const Na=({shouldDisableDate:t,shouldDisableMonth:s,shouldDisableYear:r,minDate:n,maxDate:a,disableFuture:o,disablePast:i,timezone:l})=>{const c=ss();return h.useCallback(d=>fr({adapter:c,value:d,props:{shouldDisableDate:t,shouldDisableMonth:s,shouldDisableYear:r,minDate:n,maxDate:a,disableFuture:o,disablePast:i,timezone:l}})!==null,[c,t,s,r,n,a,o,i,l])},of=t=>at("MuiDayCalendar",t);it("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const af=["parentProps","day","focusableDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],lf=["ownerState"],cf=t=>{const{classes:s}=t;return nt({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},of,s)},La=(Fs+ur*2)*6,df=we("div",{name:"MuiDayCalendar",slot:"Root",overridesResolver:(t,s)=>s.root})({}),uf=we("div",{name:"MuiDayCalendar",slot:"Header",overridesResolver:(t,s)=>s.header})({display:"flex",justifyContent:"center",alignItems:"center"}),hf=we(u,{name:"MuiDayCalendar",slot:"WeekDayLabel",overridesResolver:(t,s)=>s.weekDayLabel})(({theme:t})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(t.vars||t).palette.text.secondary})),ff=we(u,{name:"MuiDayCalendar",slot:"WeekNumberLabel",overridesResolver:(t,s)=>s.weekNumberLabel})(({theme:t})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:t.palette.text.disabled})),mf=we(u,{name:"MuiDayCalendar",slot:"WeekNumber",overridesResolver:(t,s)=>s.weekNumber})(({theme:t})=>F({},t.typography.caption,{width:Fs,height:Fs,padding:0,margin:`0 ${ur}px`,color:t.palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),pf=we("div",{name:"MuiDayCalendar",slot:"LoadingContainer",overridesResolver:(t,s)=>s.loadingContainer})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:La}),xf=we(nf,{name:"MuiDayCalendar",slot:"SlideTransition",overridesResolver:(t,s)=>s.slideTransition})({minHeight:La}),gf=we("div",{name:"MuiDayCalendar",slot:"MonthContainer",overridesResolver:(t,s)=>s.monthContainer})({overflow:"hidden"}),yf=we("div",{name:"MuiDayCalendar",slot:"WeekContainer",overridesResolver:(t,s)=>s.weekContainer})({margin:`${ur}px 0`,display:"flex",justifyContent:"center"});function bf(t){var s,r,n;let{parentProps:a,day:o,focusableDay:i,selectedDays:l,isDateDisabled:c,currentMonthNumber:d,isViewFocused:m}=t,x=_e(t,af);const{disabled:g,disableHighlightToday:b,isMonthSwitchingAnimating:D,showDaysOutsideCurrentMonth:p,components:j,componentsProps:P,slots:S,slotProps:T,timezone:w}=a,y=Ie(),f=dr(w),C=i!==null&&y.isSameDay(o,i),_=l.some(ie=>y.isSameDay(ie,o)),k=y.isSameDay(o,f),R=(s=(r=S?.day)!=null?r:j?.Day)!=null?s:Xh,U=$e({elementType:R,externalSlotProps:(n=T?.day)!=null?n:P?.day,additionalProps:F({disableHighlightToday:b,showDaysOutsideCurrentMonth:p,role:"gridcell",isAnimating:D,"data-timestamp":y.toJsDate(o).valueOf()},x),ownerState:F({},a,{day:o,selected:_})}),z=_e(U,lf),G=h.useMemo(()=>g||c(o),[g,c,o]),$=h.useMemo(()=>y.getMonth(o)!==d,[y,o,d]),L=h.useMemo(()=>{const ie=y.startOfMonth(y.setMonth(o,d));return p?y.isSameDay(o,y.startOfWeek(ie)):y.isSameDay(o,ie)},[d,o,p,y]),se=h.useMemo(()=>{const ie=y.endOfMonth(y.setMonth(o,d));return p?y.isSameDay(o,y.endOfWeek(ie)):y.isSameDay(o,ie)},[d,o,p,y]);return e.jsx(R,F({},z,{day:o,disabled:G,autoFocus:m&&C,today:k,outsideCurrentMonth:$,isFirstVisibleCell:L,isLastVisibleCell:se,selected:_,tabIndex:C?0:-1,"aria-selected":_,"aria-current":k?"date":void 0}))}function vf(t){const s=qe({props:t,name:"MuiDayCalendar"}),{onFocusedDayChange:r,className:n,currentMonth:a,selectedDays:o,focusedDay:i,loading:l,onSelectedDaysChange:c,onMonthSwitchingAnimationEnd:d,readOnly:m,reduceAnimations:x,renderLoading:g=()=>e.jsx("span",{children:"..."}),slideDirection:b,TransitionProps:D,disablePast:p,disableFuture:j,minDate:P,maxDate:S,shouldDisableDate:T,shouldDisableMonth:w,shouldDisableYear:y,dayOfWeekFormatter:f,hasFocus:C,onFocusedViewChange:_,gridLabelId:k,displayWeekNumber:R,fixedWeekNumber:U,autoFocus:z,timezone:G}=s,$=dr(G),L=Ie(),se=cf(s),te=jt().direction==="rtl",V=f||((ue,xe)=>L.format(xe,"weekdayShort").charAt(0).toUpperCase()),O=Na({shouldDisableDate:T,shouldDisableMonth:w,shouldDisableYear:y,minDate:P,maxDate:S,disablePast:p,disableFuture:j,timezone:G}),fe=Bt(),[B,H]=Ut({name:"DayCalendar",state:"hasFocus",controlled:C,default:z??!1}),[q,W]=h.useState(()=>i||$),me=he(ue=>{m||c(ue)}),K=ue=>{O(ue)||(r(ue),W(ue),_?.(!0),H(!0))},ye=he((ue,xe)=>{switch(ue.key){case"ArrowUp":K(L.addDays(xe,-7)),ue.preventDefault();break;case"ArrowDown":K(L.addDays(xe,7)),ue.preventDefault();break;case"ArrowLeft":{const Z=L.addDays(xe,te?1:-1),N=L.addMonths(xe,te?1:-1),Y=Is({utils:L,date:Z,minDate:te?Z:L.startOfMonth(N),maxDate:te?L.endOfMonth(N):Z,isDateDisabled:O,timezone:G});K(Y||Z),ue.preventDefault();break}case"ArrowRight":{const Z=L.addDays(xe,te?-1:1),N=L.addMonths(xe,te?-1:1),Y=Is({utils:L,date:Z,minDate:te?L.startOfMonth(N):Z,maxDate:te?Z:L.endOfMonth(N),isDateDisabled:O,timezone:G});K(Y||Z),ue.preventDefault();break}case"Home":K(L.startOfWeek(xe)),ue.preventDefault();break;case"End":K(L.endOfWeek(xe)),ue.preventDefault();break;case"PageUp":K(L.addMonths(xe,1)),ue.preventDefault();break;case"PageDown":K(L.addMonths(xe,-1)),ue.preventDefault();break}}),Ce=he((ue,xe)=>K(xe)),Ee=he((ue,xe)=>{B&&L.isSameDay(q,xe)&&_?.(!1)}),oe=L.getMonth(a),pe=h.useMemo(()=>o.filter(ue=>!!ue).map(ue=>L.startOfDay(ue)),[L,o]),X=oe,I=h.useMemo(()=>h.createRef(),[X]),ne=L.startOfWeek($),be=h.useMemo(()=>{const ue=L.startOfMonth(a),xe=L.endOfMonth(a);return O(q)||L.isAfterDay(q,xe)||L.isBeforeDay(q,ue)?Is({utils:L,date:q,minDate:ue,maxDate:xe,disablePast:p,disableFuture:j,isDateDisabled:O,timezone:G}):q},[a,j,p,q,O,L,G]),Pe=h.useMemo(()=>{const ue=L.setTimezone(a,G),xe=L.getWeekArray(ue);let Z=L.addMonths(ue,1);for(;U&&xe.length<U;){const N=L.getWeekArray(Z),Y=L.isSameDay(xe[xe.length-1][0],N[0][0]);N.slice(Y?1:0).forEach(le=>{xe.length<U&&xe.push(le)}),Z=L.addMonths(Z,1)}return xe},[a,U,L,G]);return e.jsxs(df,{role:"grid","aria-labelledby":k,className:se.root,children:[e.jsxs(uf,{role:"row",className:se.header,children:[R&&e.jsx(ff,{variant:"caption",role:"columnheader","aria-label":fe.calendarWeekNumberHeaderLabel,className:se.weekNumberLabel,children:fe.calendarWeekNumberHeaderText}),iu(L,$).map((ue,xe)=>{var Z;const N=L.format(ue,"weekdayShort");return e.jsx(hf,{variant:"caption",role:"columnheader","aria-label":L.format(L.addDays(ne,xe),"weekday"),className:se.weekDayLabel,children:(Z=V?.(N,ue))!=null?Z:N},N+xe.toString())})]}),l?e.jsx(pf,{className:se.loadingContainer,children:g()}):e.jsx(xf,F({transKey:X,onExited:d,reduceAnimations:x,slideDirection:b,className:Xe(n,se.slideTransition)},D,{nodeRef:I,children:e.jsx(gf,{ref:I,role:"rowgroup",className:se.monthContainer,children:Pe.map((ue,xe)=>e.jsxs(yf,{role:"row",className:se.weekContainer,"aria-rowindex":xe+1,children:[R&&e.jsx(mf,{className:se.weekNumber,role:"rowheader","aria-label":fe.calendarWeekNumberAriaLabelText(L.getWeekNumber(ue[0])),children:fe.calendarWeekNumberText(L.getWeekNumber(ue[0]))}),ue.map((Z,N)=>e.jsx(bf,{parentProps:s,day:Z,selectedDays:pe,focusableDay:be,onKeyDown:ye,onFocus:Ce,onBlur:Ee,onDaySelect:me,isDateDisabled:O,currentMonthNumber:oe,isViewFocused:B,"aria-colindex":N+1},Z.toString()))]},`week-${ue[0]}`))})}))]})}const jf=(t,s,r)=>(n,a)=>{switch(a.type){case"changeMonth":return F({},n,{slideDirection:a.direction,currentMonth:a.newMonth,isMonthSwitchingAnimating:!t});case"finishMonthSwitchingAnimation":return F({},n,{isMonthSwitchingAnimating:!1});case"changeFocusedDay":{if(n.focusedDay!=null&&a.focusedDay!=null&&r.isSameDay(a.focusedDay,n.focusedDay))return n;const o=a.focusedDay!=null&&!s&&!r.isSameMonth(n.currentMonth,a.focusedDay);return F({},n,{focusedDay:a.focusedDay,isMonthSwitchingAnimating:o&&!t&&!a.withoutMonthSwitchingAnimation,currentMonth:o?r.startOfMonth(a.focusedDay):n.currentMonth,slideDirection:a.focusedDay!=null&&r.isAfterDay(a.focusedDay,n.currentMonth)?"left":"right"})}default:throw new Error("missing support")}},wf=t=>{const{value:s,referenceDate:r,defaultCalendarMonth:n,disableFuture:a,disablePast:o,disableSwitchToMonthOnDayFocus:i=!1,maxDate:l,minDate:c,onMonthChange:d,reduceAnimations:m,shouldDisableDate:x,timezone:g}=t,b=Ie(),D=h.useRef(jf(!!m,i,b)).current,p=h.useMemo(()=>{let C=null;return r?C=r:n&&(C=b.startOfMonth(n)),At.getInitialReferenceValue({value:s,utils:b,timezone:g,props:t,referenceDate:C,granularity:Dt.day})},[]),[j,P]=h.useReducer(D,{isMonthSwitchingAnimating:!1,focusedDay:p,currentMonth:b.startOfMonth(p),slideDirection:"left"}),S=h.useCallback(C=>{P(F({type:"changeMonth"},C)),d&&d(C.newMonth)},[d]),T=h.useCallback(C=>{const _=C;b.isSameMonth(_,j.currentMonth)||S({newMonth:b.startOfMonth(_),direction:b.isAfterDay(_,j.currentMonth)?"left":"right"})},[j.currentMonth,S,b]),w=Na({shouldDisableDate:x,minDate:c,maxDate:l,disableFuture:a,disablePast:o,timezone:g}),y=h.useCallback(()=>{P({type:"finishMonthSwitchingAnimation"})},[]),f=he((C,_)=>{w(C)||P({type:"changeFocusedDay",focusedDay:C,withoutMonthSwitchingAnimation:_})});return{referenceDate:p,calendarState:j,changeMonth:T,changeFocusedDay:f,isDateDisabled:w,onMonthSwitchingAnimationEnd:y,handleChangeMonth:S}},Sf=["props","getOpenDialogAriaText"],Cf=["ownerState"],Pf=["ownerState"],Df=t=>{var s,r,n,a,o;let{props:i,getOpenDialogAriaText:l}=t,c=_e(t,Sf);const{slots:d,slotProps:m,className:x,sx:g,format:b,formatDensity:D,timezone:p,name:j,label:P,inputRef:S,readOnly:T,disabled:w,autoFocus:y,localeText:f,reduceAnimations:C}=i,_=Ie(),k=h.useRef(null),R=h.useRef(null),U=nn(),z=(s=m==null||(r=m.toolbar)==null?void 0:r.hidden)!=null?s:!1,{open:G,actions:$,hasUIView:L,layoutProps:se,renderCurrentView:ie,shouldRestoreFocus:te,fieldProps:V}=ka(F({},c,{props:i,inputRef:k,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"desktop"})),O=(n=d.inputAdornment)!=null?n:kt,fe=$e({elementType:O,externalSlotProps:m?.inputAdornment,additionalProps:{position:"end"},ownerState:i}),B=_e(fe,Cf),H=(a=d.openPickerButton)!=null?a:We,q=$e({elementType:H,externalSlotProps:m?.openPickerButton,additionalProps:{disabled:w||T,onClick:G?$.onClose:$.onOpen,"aria-label":l(V.value,_),edge:B.position},ownerState:i}),W=_e(q,Pf),me=d.openPickerIcon,K=d.field,ye=$e({elementType:K,externalSlotProps:m?.field,additionalProps:F({},V,z&&{id:U},{readOnly:T,disabled:w,className:x,sx:g,format:b,formatDensity:D,timezone:p,label:P,name:j,autoFocus:y&&!i.open,focused:G?!0:void 0}),ownerState:i});L&&(ye.InputProps=F({},ye.InputProps,{ref:R},!i.disableOpenPicker&&{[`${B.position}Adornment`]:e.jsx(O,F({},B,{children:e.jsx(H,F({},W,{children:e.jsx(me,F({},m?.openPickerIcon))}))}))}));const Ce=F({textField:d.textField,clearIcon:d.clearIcon,clearButton:d.clearButton},ye.slots),Ee=(o=d.layout)!=null?o:Aa,oe=Jt(k,ye.inputRef,S);let pe=U;z&&(P?pe=`${U}-label`:pe=void 0);const X=F({},m,{toolbar:F({},m?.toolbar,{titleId:U}),popper:F({"aria-labelledby":pe},m?.popper)});return{renderPicker:()=>e.jsxs(jn,{localeText:f,children:[e.jsx(K,F({},ye,{slots:Ce,slotProps:X,inputRef:oe})),e.jsx(ph,F({role:"dialog",placement:"bottom-start",anchorEl:R.current},$,{open:G,slots:d,slotProps:X,shouldRestoreFocus:te,reduceAnimations:C,children:e.jsx(Ee,F({},se,X?.layout,{slots:d,slotProps:X,children:ie()}))}))]})}},_f=t=>{var s,r,n;const a=Ie(),o=Vs();return F({},t,{disablePast:(s=t.disablePast)!=null?s:!1,disableFuture:(r=t.disableFuture)!=null?r:!1,format:(n=t.format)!=null?n:a.formats.keyboardDate,minDate:gt(a,t.minDate,o.minDate),maxDate:gt(a,t.maxDate,o.maxDate)})},Tf=({props:t,inputRef:s})=>{const r=_f(t),{forwardedProps:n,internalProps:a}=Gh(r);return vh({inputRef:s,forwardedProps:n,internalProps:a,valueManager:At,fieldValueManager:Cu,validator:fr})},kf=["ownerState"],Ef=({clearable:t,fieldProps:s,InputProps:r,onClear:n,slots:a,slotProps:o,components:i,componentsProps:l})=>{var c,d,m,x,g,b;const D=Bt(),p=(c=(d=a?.clearButton)!=null?d:i?.ClearButton)!=null?c:We,j=$e({elementType:p,externalSlotProps:(m=o?.clearButton)!=null?m:l?.clearButton,ownerState:{},className:"clearButton",additionalProps:{title:D.fieldClearLabel}}),P=_e(j,kf),S=(x=(g=a?.clearIcon)!=null?g:i?.ClearIcon)!=null?x:Bu,T=$e({elementType:S,externalSlotProps:(b=o?.clearIcon)!=null?b:l?.clearIcon,ownerState:{}}),w=F({},r,{endAdornment:e.jsxs(h.Fragment,{children:[t&&e.jsx(kt,{position:"end",sx:{marginRight:r!=null&&r.endAdornment?-1:-1.5},children:e.jsx(p,F({},P,{onClick:n,children:e.jsx(S,F({fontSize:"small"},T))}))}),r?.endAdornment]})}),y=F({},s,{sx:[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(s.sx)?s.sx:[s.sx]]});return{InputProps:w,fieldProps:y}},If=["components","componentsProps","slots","slotProps","InputProps","inputProps"],Af=["inputRef"],Rf=["ref","onPaste","onKeyDown","inputMode","readOnly","clearable","onClear"],Va=h.forwardRef(function(s,r){var n,a,o;const i=qe({props:s,name:"MuiDateField"}),{components:l,componentsProps:c,slots:d,slotProps:m,InputProps:x,inputProps:g}=i,b=_e(i,If),D=i,p=(n=(a=d?.textField)!=null?a:l?.TextField)!=null?n:ve,j=$e({elementType:p,externalSlotProps:(o=m?.textField)!=null?o:c?.textField,externalForwardedProps:b,ownerState:D}),{inputRef:P}=j,S=_e(j,Af);S.inputProps=F({},g,S.inputProps),S.InputProps=F({},x,S.InputProps);const T=Tf({props:S,inputRef:P}),{ref:w,onPaste:y,onKeyDown:f,inputMode:C,readOnly:_,clearable:k,onClear:R}=T,U=_e(T,Rf),{InputProps:z,fieldProps:G}=Ef({onClear:R,clearable:k,fieldProps:U,InputProps:U.InputProps,slots:d,slotProps:m,components:l,componentsProps:c});return e.jsx(p,F({ref:r},G,{InputProps:F({},z,{readOnly:_}),inputProps:F({},U.inputProps,{inputMode:C,onPaste:y,onKeyDown:f,ref:w})}))}),Mf=t=>at("MuiPickersFadeTransitionGroup",t);it("MuiPickersFadeTransitionGroup",["root"]);const Of=t=>{const{classes:s}=t;return nt({root:["root"]},Mf,s)},Ff=we(Mo,{name:"MuiPickersFadeTransitionGroup",slot:"Root",overridesResolver:(t,s)=>s.root})({display:"block",position:"relative"});function Wa(t){const s=qe({props:t,name:"MuiPickersFadeTransitionGroup"}),{children:r,className:n,reduceAnimations:a,transKey:o}=s,i=Of(s),l=jt();return a?r:e.jsx(Ff,{className:Xe(i.root,n),children:e.jsx(nr,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:l.transitions.duration.enteringScreen,enter:l.transitions.duration.enteringScreen,exit:0},children:r},o)})}function Nf(t){return at("MuiPickersMonth",t)}const Hs=it("MuiPickersMonth",["root","monthButton","disabled","selected"]),Lf=["autoFocus","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","aria-label","monthsPerRow"],Vf=t=>{const{disabled:s,selected:r,classes:n}=t;return nt({root:["root"],monthButton:["monthButton",s&&"disabled",r&&"selected"]},Nf,n)},Wf=we("div",{name:"MuiPickersMonth",slot:"Root",overridesResolver:(t,s)=>[s.root]})(({ownerState:t})=>({flexBasis:t.monthsPerRow===3?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"})),Uf=we("button",{name:"MuiPickersMonth",slot:"MonthButton",overridesResolver:(t,s)=>[s.monthButton,{[`&.${Hs.disabled}`]:s.disabled},{[`&.${Hs.selected}`]:s.selected}]})(({theme:t})=>F({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{margin:"8px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:xs(t.palette.action.active,t.palette.action.hoverOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:xs(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Hs.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${Hs.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})),$f=h.memo(function(s){const r=qe({props:s,name:"MuiPickersMonth"}),{autoFocus:n,children:a,disabled:o,selected:i,value:l,tabIndex:c,onClick:d,onKeyDown:m,onFocus:x,onBlur:g,"aria-current":b,"aria-label":D}=r,p=_e(r,Lf),j=h.useRef(null),P=Vf(r);return ps(()=>{if(n){var S;(S=j.current)==null||S.focus()}},[n]),e.jsx(Wf,F({className:P.root,ownerState:r},p,{children:e.jsx(Uf,{ref:j,disabled:o,type:"button",role:"radio",tabIndex:o?-1:c,"aria-current":b,"aria-checked":i,"aria-label":D,onClick:S=>d(S,l),onKeyDown:S=>m(S,l),onFocus:S=>x(S,l),onBlur:S=>g(S,l),className:P.monthButton,ownerState:r,children:a})}))});function Bf(t){return at("MuiMonthCalendar",t)}it("MuiMonthCalendar",["root"]);const zf=["className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","autoFocus","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId"],Hf=t=>{const{classes:s}=t;return nt({root:["root"]},Bf,s)};function Gf(t,s){const r=Ie(),n=Vs(),a=qe({props:t,name:s});return F({disableFuture:!1,disablePast:!1},a,{minDate:gt(r,a.minDate,n.minDate),maxDate:gt(r,a.maxDate,n.maxDate)})}const qf=we("div",{name:"MuiMonthCalendar",slot:"Root",overridesResolver:(t,s)=>s.root})({display:"flex",flexWrap:"wrap",alignContent:"stretch",padding:"0 4px",width:hr,boxSizing:"border-box"}),Kf=h.forwardRef(function(s,r){const n=Gf(s,"MuiMonthCalendar"),{className:a,value:o,defaultValue:i,referenceDate:l,disabled:c,disableFuture:d,disablePast:m,maxDate:x,minDate:g,onChange:b,shouldDisableMonth:D,readOnly:p,disableHighlightToday:j,autoFocus:P=!1,onMonthFocus:S,hasFocus:T,onFocusedViewChange:w,monthsPerRow:y=3,timezone:f,gridLabelId:C}=n,_=_e(n,zf),{value:k,handleValueChange:R,timezone:U}=Cn({name:"MonthCalendar",timezone:f,value:o,defaultValue:i,onChange:b,valueManager:At}),z=dr(U),G=Oo(),$=Ie(),L=h.useMemo(()=>At.getInitialReferenceValue({value:k,utils:$,props:n,timezone:U,referenceDate:l,granularity:Dt.month}),[]),se=n,ie=Hf(se),te=h.useMemo(()=>$.getMonth(z),[$,z]),V=h.useMemo(()=>k!=null?$.getMonth(k):j?null:$.getMonth(L),[k,$,j,L]),[O,fe]=h.useState(()=>V||te),[B,H]=Ut({name:"MonthCalendar",state:"hasFocus",controlled:T,default:P??!1}),q=he(oe=>{H(oe),w&&w(oe)}),W=h.useCallback(oe=>{const pe=$.startOfMonth(m&&$.isAfter(z,g)?z:g),X=$.startOfMonth(d&&$.isBefore(z,x)?z:x),I=$.startOfMonth(oe);return $.isBefore(I,pe)||$.isAfter(I,X)?!0:D?D(I):!1},[d,m,x,g,z,D,$]),me=he((oe,pe)=>{if(p)return;const X=$.setMonth(k??L,pe);R(X)}),K=he(oe=>{W($.setMonth(k??L,oe))||(fe(oe),q(!0),S&&S(oe))});h.useEffect(()=>{fe(oe=>V!==null&&oe!==V?V:oe)},[V]);const ye=he((oe,pe)=>{switch(oe.key){case"ArrowUp":K((12+pe-3)%12),oe.preventDefault();break;case"ArrowDown":K((12+pe+3)%12),oe.preventDefault();break;case"ArrowLeft":K((12+pe+(G.direction==="ltr"?-1:1))%12),oe.preventDefault();break;case"ArrowRight":K((12+pe+(G.direction==="ltr"?1:-1))%12),oe.preventDefault();break}}),Ce=he((oe,pe)=>{K(pe)}),Ee=he((oe,pe)=>{O===pe&&q(!1)});return e.jsx(qf,F({ref:r,className:Xe(ie.root,a),ownerState:se,role:"radiogroup","aria-labelledby":C},_,{children:yn($,k??L).map(oe=>{const pe=$.getMonth(oe),X=$.format(oe,"monthShort"),I=$.format(oe,"month"),ne=pe===V,be=c||W(oe);return e.jsx($f,{selected:ne,value:pe,onClick:me,onKeyDown:ye,autoFocus:B&&pe===O,disabled:be,tabIndex:pe===O?0:-1,onFocus:Ce,onBlur:Ee,"aria-current":te===pe?"date":void 0,"aria-label":I,monthsPerRow:y,children:X},X)})}))});function Yf(t){return at("MuiPickersYear",t)}const Gs=it("MuiPickersYear",["root","yearButton","selected","disabled"]),Qf=["autoFocus","className","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","yearsPerRow"],Zf=t=>{const{disabled:s,selected:r,classes:n}=t;return nt({root:["root"],yearButton:["yearButton",s&&"disabled",r&&"selected"]},Yf,n)},Jf=we("div",{name:"MuiPickersYear",slot:"Root",overridesResolver:(t,s)=>[s.root]})(({ownerState:t})=>({flexBasis:t.yearsPerRow===3?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"})),Xf=we("button",{name:"MuiPickersYear",slot:"YearButton",overridesResolver:(t,s)=>[s.yearButton,{[`&.${Gs.disabled}`]:s.disabled},{[`&.${Gs.selected}`]:s.selected}]})(({theme:t})=>F({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{margin:"6px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.focusOpacity})`:xs(t.palette.action.active,t.palette.action.focusOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:xs(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Gs.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${Gs.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})),em=h.memo(function(s){const r=qe({props:s,name:"MuiPickersYear"}),{autoFocus:n,className:a,children:o,disabled:i,selected:l,value:c,tabIndex:d,onClick:m,onKeyDown:x,onFocus:g,onBlur:b,"aria-current":D}=r,p=_e(r,Qf),j=h.useRef(null),P=Zf(r);return h.useEffect(()=>{n&&j.current.focus()},[n]),e.jsx(Jf,F({className:Xe(P.root,a),ownerState:r},p,{children:e.jsx(Xf,{ref:j,disabled:i,type:"button",role:"radio",tabIndex:i?-1:d,"aria-current":D,"aria-checked":l,onClick:S=>m(S,c),onKeyDown:S=>x(S,c),onFocus:S=>g(S,c),onBlur:S=>b(S,c),className:P.yearButton,ownerState:r,children:o})}))});function tm(t){return at("MuiYearCalendar",t)}it("MuiYearCalendar",["root"]);const sm=["autoFocus","className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsPerRow","timezone","gridLabelId"],rm=t=>{const{classes:s}=t;return nt({root:["root"]},tm,s)};function nm(t,s){var r;const n=Ie(),a=Vs(),o=qe({props:t,name:s});return F({disablePast:!1,disableFuture:!1},o,{yearsPerRow:(r=o.yearsPerRow)!=null?r:3,minDate:gt(n,o.minDate,a.minDate),maxDate:gt(n,o.maxDate,a.maxDate)})}const om=we("div",{name:"MuiYearCalendar",slot:"Root",overridesResolver:(t,s)=>s.root})({display:"flex",flexDirection:"row",flexWrap:"wrap",overflowY:"auto",height:"100%",padding:"0 4px",width:hr,maxHeight:Ju,boxSizing:"border-box",position:"relative"}),am=h.forwardRef(function(s,r){const n=nm(s,"MuiYearCalendar"),{autoFocus:a,className:o,value:i,defaultValue:l,referenceDate:c,disabled:d,disableFuture:m,disablePast:x,maxDate:g,minDate:b,onChange:D,readOnly:p,shouldDisableYear:j,disableHighlightToday:P,onYearFocus:S,hasFocus:T,onFocusedViewChange:w,yearsPerRow:y,timezone:f,gridLabelId:C}=n,_=_e(n,sm),{value:k,handleValueChange:R,timezone:U}=Cn({name:"YearCalendar",timezone:f,value:i,defaultValue:l,onChange:D,valueManager:At}),z=dr(U),G=Oo(),$=Ie(),L=h.useMemo(()=>At.getInitialReferenceValue({value:k,utils:$,props:n,timezone:U,referenceDate:c,granularity:Dt.year}),[]),se=n,ie=rm(se),te=h.useMemo(()=>$.getYear(z),[$,z]),V=h.useMemo(()=>k!=null?$.getYear(k):P?null:$.getYear(L),[k,$,P,L]),[O,fe]=h.useState(()=>V||te),[B,H]=Ut({name:"YearCalendar",state:"hasFocus",controlled:T,default:a??!1}),q=he(X=>{H(X),w&&w(X)}),W=h.useCallback(X=>{if(x&&$.isBeforeYear(X,z)||m&&$.isAfterYear(X,z)||b&&$.isBeforeYear(X,b)||g&&$.isAfterYear(X,g))return!0;if(!j)return!1;const I=$.startOfYear(X);return j(I)},[m,x,g,b,z,j,$]),me=he((X,I)=>{if(p)return;const ne=$.setYear(k??L,I);R(ne)}),K=he(X=>{W($.setYear(k??L,X))||(fe(X),q(!0),S?.(X))});h.useEffect(()=>{fe(X=>V!==null&&X!==V?V:X)},[V]);const ye=he((X,I)=>{switch(X.key){case"ArrowUp":K(I-y),X.preventDefault();break;case"ArrowDown":K(I+y),X.preventDefault();break;case"ArrowLeft":K(I+(G.direction==="ltr"?-1:1)),X.preventDefault();break;case"ArrowRight":K(I+(G.direction==="ltr"?1:-1)),X.preventDefault();break}}),Ce=he((X,I)=>{K(I)}),Ee=he((X,I)=>{O===I&&q(!1)}),oe=h.useRef(null),pe=Jt(r,oe);return h.useEffect(()=>{if(a||oe.current===null)return;const X=oe.current.querySelector('[tabindex="0"]');if(!X)return;const I=X.offsetHeight,ne=X.offsetTop,be=oe.current.clientHeight,Pe=oe.current.scrollTop,ue=ne+I;I>be||ne<Pe||(oe.current.scrollTop=ue-be/2-I/2)},[a]),e.jsx(om,F({ref:pe,className:Xe(ie.root,o),ownerState:se,role:"radiogroup","aria-labelledby":C},_,{children:$.getYearRange(b,g).map(X=>{const I=$.getYear(X),ne=I===V,be=d||W(X);return e.jsx(em,{selected:ne,value:I,onClick:me,onKeyDown:ye,autoFocus:B&&I===O,disabled:be,tabIndex:I===O?0:-1,onFocus:Ce,onBlur:Ee,"aria-current":te===I?"date":void 0,yearsPerRow:y,children:$.format(X,"year")},$.format(X,"year"))})}))}),im=t=>at("MuiPickersCalendarHeader",t),lm=it("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),cm=["slots","slotProps","components","componentsProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","timezone"],dm=["ownerState"],um=t=>{const{classes:s}=t;return nt({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},im,s)},hm=we("div",{name:"MuiPickersCalendarHeader",slot:"Root",overridesResolver:(t,s)=>s.root})({display:"flex",alignItems:"center",marginTop:16,marginBottom:8,paddingLeft:24,paddingRight:12,maxHeight:30,minHeight:30}),fm=we("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer",overridesResolver:(t,s)=>s.labelContainer})(({theme:t})=>F({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},t.typography.body1,{fontWeight:t.typography.fontWeightMedium})),mm=we("div",{name:"MuiPickersCalendarHeader",slot:"Label",overridesResolver:(t,s)=>s.label})({marginRight:6}),pm=we(We,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton",overridesResolver:(t,s)=>s.switchViewButton})(({ownerState:t})=>F({marginRight:"auto"},t.view==="year"&&{[`.${lm.switchViewIcon}`]:{transform:"rotate(180deg)"}})),xm=we(Vu,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon",overridesResolver:(t,s)=>s.switchViewIcon})(({theme:t})=>({willChange:"transform",transition:t.transitions.create("transform"),transform:"rotate(0deg)"})),gm=h.forwardRef(function(s,r){var n,a,o,i;const l=Bt(),c=Ie(),d=qe({props:s,name:"MuiPickersCalendarHeader"}),{slots:m,slotProps:x,components:g,currentMonth:b,disabled:D,disableFuture:p,disablePast:j,maxDate:P,minDate:S,onMonthChange:T,onViewChange:w,view:y,reduceAnimations:f,views:C,labelId:_,className:k,timezone:R}=d,U=_e(d,cm),z=d,G=um(d),$=(n=(a=m?.switchViewButton)!=null?a:g?.SwitchViewButton)!=null?n:pm,L=$e({elementType:$,externalSlotProps:x?.switchViewButton,additionalProps:{size:"small","aria-label":l.calendarViewSwitchingButtonAriaLabel(y)},ownerState:z,className:G.switchViewButton}),se=(o=(i=m?.switchViewIcon)!=null?i:g?.SwitchViewIcon)!=null?o:xm,ie=$e({elementType:se,externalSlotProps:x?.switchViewIcon,ownerState:void 0,className:G.switchViewIcon}),te=_e(ie,dm),V=()=>T(c.addMonths(b,1),"left"),O=()=>T(c.addMonths(b,-1),"right"),fe=Wh(b,{disableFuture:p,maxDate:P,timezone:R}),B=Uh(b,{disablePast:j,minDate:S,timezone:R}),H=()=>{if(!(C.length===1||!w||D))if(C.length===2)w(C.find(q=>q!==y)||C[0]);else{const q=C.indexOf(y)!==0?0:1;w(C[q])}};return C.length===1&&C[0]==="year"?null:e.jsxs(hm,F({},U,{ownerState:z,className:Xe(k,G.root),ref:r,children:[e.jsxs(fm,{role:"presentation",onClick:H,ownerState:z,"aria-live":"polite",className:G.labelContainer,children:[e.jsx(Wa,{reduceAnimations:f,transKey:c.format(b,"monthAndYear"),children:e.jsx(mm,{id:_,ownerState:z,className:G.label,children:c.format(b,"monthAndYear")})}),C.length>1&&!D&&e.jsx($,F({},L,{children:e.jsx(se,F({},te))}))]}),e.jsx(nr,{in:y==="day",children:e.jsx(Zu,{slots:m,slotProps:x,onGoToPrevious:O,isPreviousDisabled:B,previousLabel:l.previousMonth,onGoToNext:V,isNextDisabled:fe,nextLabel:l.nextMonth})})]}))}),ym=we("div")({overflow:"hidden",width:hr,maxHeight:wn,display:"flex",flexDirection:"column",margin:"0 auto"}),bm=t=>at("MuiDateCalendar",t);it("MuiDateCalendar",["root","viewTransitionContainer"]);const vm=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","defaultCalendarMonth","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","components","componentsProps","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsPerRow","monthsPerRow","timezone"],jm=t=>{const{classes:s}=t;return nt({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},bm,s)};function wm(t,s){var r,n,a,o,i,l,c;const d=Ie(),m=Vs(),x=Da(),g=qe({props:t,name:s});return F({},g,{loading:(r=g.loading)!=null?r:!1,disablePast:(n=g.disablePast)!=null?n:!1,disableFuture:(a=g.disableFuture)!=null?a:!1,openTo:(o=g.openTo)!=null?o:"day",views:(i=g.views)!=null?i:["year","day"],reduceAnimations:(l=g.reduceAnimations)!=null?l:x,renderLoading:(c=g.renderLoading)!=null?c:()=>e.jsx("span",{children:"..."}),minDate:gt(d,g.minDate,m.minDate),maxDate:gt(d,g.maxDate,m.maxDate)})}const Sm=we(ym,{name:"MuiDateCalendar",slot:"Root",overridesResolver:(t,s)=>s.root})({display:"flex",flexDirection:"column",height:wn}),Cm=we(Wa,{name:"MuiDateCalendar",slot:"ViewTransitionContainer",overridesResolver:(t,s)=>s.viewTransitionContainer})({}),Pm=h.forwardRef(function(s,r){var n,a,o;const i=Ie(),l=nn(),c=wm(s,"MuiDateCalendar"),{autoFocus:d,onViewChange:m,value:x,defaultValue:g,referenceDate:b,disableFuture:D,disablePast:p,defaultCalendarMonth:j,onChange:P,onYearChange:S,onMonthChange:T,reduceAnimations:w,shouldDisableDate:y,shouldDisableMonth:f,shouldDisableYear:C,view:_,views:k,openTo:R,className:U,disabled:z,readOnly:G,minDate:$,maxDate:L,disableHighlightToday:se,focusedView:ie,onFocusedViewChange:te,showDaysOutsideCurrentMonth:V,fixedWeekNumber:O,dayOfWeekFormatter:fe,components:B,componentsProps:H,slots:q,slotProps:W,loading:me,renderLoading:K,displayWeekNumber:ye,yearsPerRow:Ce,monthsPerRow:Ee,timezone:oe}=c,pe=_e(c,vm),{value:X,handleValueChange:I,timezone:ne}=Cn({name:"DateCalendar",timezone:oe,value:x,defaultValue:g,onChange:P,valueManager:At}),{view:be,setView:Pe,focusedView:ue,setFocusedView:xe,goToNextView:Z,setValueAndGoToNextView:N}=Ta({view:_,views:k,openTo:R,onChange:I,onViewChange:m,autoFocus:d,focusedView:ie,onFocusedViewChange:te}),{referenceDate:Y,calendarState:le,changeFocusedDay:ge,changeMonth:De,handleChangeMonth:Be,isDateDisabled:Qe,onMonthSwitchingAnimationEnd:zt}=wf({value:X,defaultCalendarMonth:j,referenceDate:b,reduceAnimations:w,onMonthChange:T,minDate:$,maxDate:L,shouldDisableDate:y,disablePast:p,disableFuture:D,timezone:ne}),Ht=z&&X||$,yt=z&&X||L,rs=`${l}-grid-label`,et=ue!==null,ze=(n=(a=q?.calendarHeader)!=null?a:B?.CalendarHeader)!=null?n:gm,Ga=$e({elementType:ze,externalSlotProps:(o=W?.calendarHeader)!=null?o:H?.calendarHeader,additionalProps:{views:k,view:be,currentMonth:le.currentMonth,onViewChange:Pe,onMonthChange:(Me,wt)=>Be({newMonth:Me,direction:wt}),minDate:Ht,maxDate:yt,disabled:z,disablePast:p,disableFuture:D,reduceAnimations:w,timezone:ne,labelId:rs,slots:q,slotProps:W},ownerState:c}),qa=he(Me=>{const wt=i.startOfMonth(Me),js=i.endOfMonth(Me),Mt=Qe(Me)?Is({utils:i,date:Me,minDate:i.isBefore($,wt)?wt:$,maxDate:i.isAfter(L,js)?js:L,disablePast:p,disableFuture:D,isDateDisabled:Qe,timezone:ne}):Me;Mt?(N(Mt,"finish"),T?.(wt)):(Z(),De(wt)),ge(Mt,!0)}),Ka=he(Me=>{const wt=i.startOfYear(Me),js=i.endOfYear(Me),Mt=Qe(Me)?Is({utils:i,date:Me,minDate:i.isBefore($,wt)?wt:$,maxDate:i.isAfter(L,js)?js:L,disablePast:p,disableFuture:D,isDateDisabled:Qe,timezone:ne}):Me;Mt?(N(Mt,"finish"),S?.(Mt)):(Z(),De(wt)),ge(Mt,!0)}),Ya=he(Me=>I(Me&&er(i,Me,X??Y),"finish",be));h.useEffect(()=>{X!=null&&i.isValid(X)&&De(X)},[X]);const mr=c,Pn=jm(mr),pr={disablePast:p,disableFuture:D,maxDate:L,minDate:$},xr={disableHighlightToday:se,readOnly:G,disabled:z,timezone:ne,gridLabelId:rs},gr=h.useRef(be);h.useEffect(()=>{gr.current!==be&&(ue===gr.current&&xe(be,!0),gr.current=be)},[ue,xe,be]);const Qa=h.useMemo(()=>[X],[X]);return e.jsxs(Sm,F({ref:r,className:Xe(Pn.root,U),ownerState:mr},pe,{children:[e.jsx(ze,F({},Ga)),e.jsx(Cm,{reduceAnimations:w,className:Pn.viewTransitionContainer,transKey:be,ownerState:mr,children:e.jsxs("div",{children:[be==="year"&&e.jsx(am,F({},pr,xr,{value:X,onChange:Ka,shouldDisableYear:C,hasFocus:et,onFocusedViewChange:Me=>xe("year",Me),yearsPerRow:Ce,referenceDate:Y})),be==="month"&&e.jsx(Kf,F({},pr,xr,{hasFocus:et,className:U,value:X,onChange:qa,shouldDisableMonth:f,onFocusedViewChange:Me=>xe("month",Me),monthsPerRow:Ee,referenceDate:Y})),be==="day"&&e.jsx(vf,F({},le,pr,xr,{onMonthSwitchingAnimationEnd:zt,onFocusedDayChange:ge,reduceAnimations:w,selectedDays:Qa,onSelectedDaysChange:Ya,shouldDisableDate:y,shouldDisableMonth:f,shouldDisableYear:C,hasFocus:et,onFocusedViewChange:Me=>xe("day",Me),showDaysOutsideCurrentMonth:V,fixedWeekNumber:O,dayOfWeekFormatter:fe,displayWeekNumber:ye,components:B,componentsProps:H,slots:q,slotProps:W,loading:me,renderLoading:K}))]})})]}))}),ms=({view:t,onViewChange:s,views:r,focusedView:n,onFocusedViewChange:a,value:o,defaultValue:i,referenceDate:l,onChange:c,className:d,classes:m,disableFuture:x,disablePast:g,minDate:b,maxDate:D,shouldDisableDate:p,shouldDisableMonth:j,shouldDisableYear:P,reduceAnimations:S,onMonthChange:T,monthsPerRow:w,onYearChange:y,yearsPerRow:f,defaultCalendarMonth:C,components:_,componentsProps:k,slots:R,slotProps:U,loading:z,renderLoading:G,disableHighlightToday:$,readOnly:L,disabled:se,showDaysOutsideCurrentMonth:ie,dayOfWeekFormatter:te,sx:V,autoFocus:O,fixedWeekNumber:fe,displayWeekNumber:B,timezone:H})=>e.jsx(Pm,{view:t,onViewChange:s,views:r.filter(go),focusedView:n&&go(n)?n:null,onFocusedViewChange:a,value:o,defaultValue:i,referenceDate:l,onChange:c,className:d,classes:m,disableFuture:x,disablePast:g,minDate:b,maxDate:D,shouldDisableDate:p,shouldDisableMonth:j,shouldDisableYear:P,reduceAnimations:S,onMonthChange:T,monthsPerRow:w,onYearChange:y,yearsPerRow:f,defaultCalendarMonth:C,components:_,componentsProps:k,slots:R,slotProps:U,loading:z,renderLoading:G,disableHighlightToday:$,readOnly:L,disabled:se,showDaysOutsideCurrentMonth:ie,dayOfWeekFormatter:te,sx:V,autoFocus:O,fixedWeekNumber:fe,displayWeekNumber:B,timezone:H}),Ua=h.forwardRef(function(s,r){var n,a,o,i;const l=Bt(),c=Ie(),d=Pa(s,"MuiDesktopDatePicker"),m=F({day:ms,month:ms,year:ms},d.viewRenderers),x=F({},d,{viewRenderers:m,format:bn(c,d,!1),yearsPerRow:(n=d.yearsPerRow)!=null?n:4,slots:F({openPickerIcon:$u,field:Va},d.slots),slotProps:F({},d.slotProps,{field:b=>{var D;return F({},gn((D=d.slotProps)==null?void 0:D.field,b),Ma(d),{ref:r})},toolbar:F({hidden:!0},(a=d.slotProps)==null?void 0:a.toolbar)})}),{renderPicker:g}=Df({props:x,valueManager:At,valueType:"date",getOpenDialogAriaText:(o=(i=x.localeText)==null?void 0:i.openDatePickerDialogue)!=null?o:l.openDatePickerDialogue,validator:fr});return g()});Ua.propTypes={autoFocus:M.bool,className:M.string,closeOnSelect:M.bool,components:M.object,componentsProps:M.object,dayOfWeekFormatter:M.func,defaultCalendarMonth:M.any,defaultValue:M.any,disabled:M.bool,disableFuture:M.bool,disableHighlightToday:M.bool,disableOpenPicker:M.bool,disablePast:M.bool,displayWeekNumber:M.bool,fixedWeekNumber:M.number,format:M.string,formatDensity:M.oneOf(["dense","spacious"]),inputRef:Fo,label:M.node,loading:M.bool,localeText:M.object,maxDate:M.any,minDate:M.any,monthsPerRow:M.oneOf([3,4]),name:M.string,onAccept:M.func,onChange:M.func,onClose:M.func,onError:M.func,onMonthChange:M.func,onOpen:M.func,onSelectedSectionsChange:M.func,onViewChange:M.func,onYearChange:M.func,open:M.bool,openTo:M.oneOf(["day","month","year"]),orientation:M.oneOf(["landscape","portrait"]),readOnly:M.bool,reduceAnimations:M.bool,referenceDate:M.any,renderLoading:M.func,selectedSections:M.oneOfType([M.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),M.number,M.shape({endIndex:M.number.isRequired,startIndex:M.number.isRequired})]),shouldDisableDate:M.func,shouldDisableMonth:M.func,shouldDisableYear:M.func,showDaysOutsideCurrentMonth:M.bool,slotProps:M.object,slots:M.object,sx:M.oneOfType([M.arrayOf(M.oneOfType([M.func,M.object,M.bool])),M.func,M.object]),timezone:M.string,value:M.any,view:M.oneOf(["day","month","year"]),viewRenderers:M.shape({day:M.func,month:M.func,year:M.func}),views:M.arrayOf(M.oneOf(["day","month","year"]).isRequired),yearsPerRow:M.oneOf([3,4])};const Dm=["props","getOpenDialogAriaText"],_m=t=>{var s,r,n;let{props:a,getOpenDialogAriaText:o}=t,i=_e(t,Dm);const{slots:l,slotProps:c,className:d,sx:m,format:x,formatDensity:g,timezone:b,name:D,label:p,inputRef:j,readOnly:P,disabled:S,localeText:T}=a,w=Ie(),y=h.useRef(null),f=nn(),C=(s=c==null||(r=c.toolbar)==null?void 0:r.hidden)!=null?s:!1,{open:_,actions:k,layoutProps:R,renderCurrentView:U,fieldProps:z}=ka(F({},i,{props:a,inputRef:y,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"mobile"})),G=l.field,$=$e({elementType:G,externalSlotProps:c?.field,additionalProps:F({},z,C&&{id:f},!(S||P)&&{onClick:k.onOpen,onKeyDown:nh(k.onOpen)},{readOnly:P??!0,disabled:S,className:d,sx:m,format:x,formatDensity:g,timezone:b,label:p,name:D}),ownerState:a});$.inputProps=F({},$.inputProps,{"aria-label":o(z.value,w)});const L=F({textField:l.textField},$.slots),se=(n=l.layout)!=null?n:Aa,ie=Jt(y,$.inputRef,j);let te=f;C&&(p?te=`${f}-label`:te=void 0);const V=F({},c,{toolbar:F({},c?.toolbar,{titleId:f}),mobilePaper:F({"aria-labelledby":te},c?.mobilePaper)});return{renderPicker:()=>e.jsxs(jn,{localeText:T,children:[e.jsx(G,F({},$,{slots:L,slotProps:V,inputRef:ie})),e.jsx(th,F({},k,{open:_,slots:l,slotProps:V,children:e.jsx(se,F({},R,V?.layout,{slots:l,slotProps:V,children:U()}))}))]})}},$a=h.forwardRef(function(s,r){var n,a,o;const i=Bt(),l=Ie(),c=Pa(s,"MuiMobileDatePicker"),d=F({day:ms,month:ms,year:ms},c.viewRenderers),m=F({},c,{viewRenderers:d,format:bn(l,c,!1),slots:F({field:Va},c.slots),slotProps:F({},c.slotProps,{field:g=>{var b;return F({},gn((b=c.slotProps)==null?void 0:b.field,g),Ma(c),{ref:r})},toolbar:F({hidden:!1},(n=c.slotProps)==null?void 0:n.toolbar)})}),{renderPicker:x}=_m({props:m,valueManager:At,valueType:"date",getOpenDialogAriaText:(a=(o=m.localeText)==null?void 0:o.openDatePickerDialogue)!=null?a:i.openDatePickerDialogue,validator:fr});return x()});$a.propTypes={autoFocus:M.bool,className:M.string,closeOnSelect:M.bool,components:M.object,componentsProps:M.object,dayOfWeekFormatter:M.func,defaultCalendarMonth:M.any,defaultValue:M.any,disabled:M.bool,disableFuture:M.bool,disableHighlightToday:M.bool,disableOpenPicker:M.bool,disablePast:M.bool,displayWeekNumber:M.bool,fixedWeekNumber:M.number,format:M.string,formatDensity:M.oneOf(["dense","spacious"]),inputRef:Fo,label:M.node,loading:M.bool,localeText:M.object,maxDate:M.any,minDate:M.any,monthsPerRow:M.oneOf([3,4]),name:M.string,onAccept:M.func,onChange:M.func,onClose:M.func,onError:M.func,onMonthChange:M.func,onOpen:M.func,onSelectedSectionsChange:M.func,onViewChange:M.func,onYearChange:M.func,open:M.bool,openTo:M.oneOf(["day","month","year"]),orientation:M.oneOf(["landscape","portrait"]),readOnly:M.bool,reduceAnimations:M.bool,referenceDate:M.any,renderLoading:M.func,selectedSections:M.oneOfType([M.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),M.number,M.shape({endIndex:M.number.isRequired,startIndex:M.number.isRequired})]),shouldDisableDate:M.func,shouldDisableMonth:M.func,shouldDisableYear:M.func,showDaysOutsideCurrentMonth:M.bool,slotProps:M.object,slots:M.object,sx:M.oneOfType([M.arrayOf(M.oneOfType([M.func,M.object,M.bool])),M.func,M.object]),timezone:M.string,value:M.any,view:M.oneOf(["day","month","year"]),viewRenderers:M.shape({day:M.func,month:M.func,year:M.func}),views:M.arrayOf(M.oneOf(["day","month","year"]).isRequired),yearsPerRow:M.oneOf([3,4])};const Tm=["desktopModeMediaQuery"],_o=h.forwardRef(function(s,r){const n=qe({props:s,name:"MuiDatePicker"}),{desktopModeMediaQuery:a=oh}=n,o=_e(n,Tm);return rr(a,{defaultMatches:!0})?e.jsx(Ua,F({ref:r},o)):e.jsx($a,F({ref:r},o))});var qs={exports:{}},To;function km(){return To||(To=1,(function(t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var r=function(c,d){switch(c){case"P":return d.date({width:"short"});case"PP":return d.date({width:"medium"});case"PPP":return d.date({width:"long"});case"PPPP":default:return d.date({width:"full"})}},n=function(c,d){switch(c){case"p":return d.time({width:"short"});case"pp":return d.time({width:"medium"});case"ppp":return d.time({width:"long"});case"pppp":default:return d.time({width:"full"})}},a=function(c,d){var m=c.match(/(P+)(p+)?/)||[],x=m[1],g=m[2];if(!g)return r(c,d);var b;switch(x){case"P":b=d.dateTime({width:"short"});break;case"PP":b=d.dateTime({width:"medium"});break;case"PPP":b=d.dateTime({width:"long"});break;case"PPPP":default:b=d.dateTime({width:"full"});break}return b.replace("{{date}}",r(x,d)).replace("{{time}}",n(g,d))},o={p:n,P:a},i=o;s.default=i,t.exports=s.default})(qs,qs.exports)),qs.exports}var Em=km();const Im=Ns(Em),Am={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},Rm={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",fullDateWithWeekday:"PPPP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",monthAndYear:"LLLL yyyy",monthAndDate:"MMMM d",fullTime:"p",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",fullDateTime:"PP p",fullDateTime12h:"PP hh:mm aa",fullDateTime24h:"PP HH:mm",keyboardDateTime:"P p",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class Mm{constructor(s){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib="date-fns",this.locale=void 0,this.formats=void 0,this.formatTokenMap=Am,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=o=>typeof o>"u"?new Date:o===null?null:new Date(o),this.dateWithTimezone=o=>this.date(o),this.getTimezone=()=>"default",this.setTimezone=o=>o,this.toJsDate=o=>o,this.getCurrentLocaleCode=()=>{var o;return((o=this.locale)==null?void 0:o.code)||"en-US"},this.is12HourCycleInCurrentLocale=()=>this.locale?/a/.test(this.locale.formatLong.time({width:"short"})):!0,this.expandFormat=o=>{const i=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return o.match(i).map(l=>{const c=l[0];if(c==="p"||c==="P"){const d=this.longFormatters[c];return d(l,this.locale.formatLong)}return l}).join("")},this.getFormatHelperText=o=>this.expandFormat(o).replace(/(aaa|aa|a)/g,"(a|p)m").toLocaleLowerCase(),this.isNull=o=>o===null,this.formatNumber=o=>o,this.getMeridiemText=o=>o==="am"?"AM":"PM";const{locale:r,formats:n,longFormatters:a}=s;this.locale=r,this.formats=F({},Rm,n),this.longFormatters=a}}class Om extends Mm{constructor({locale:s,formats:r}={}){if(typeof Dr!="function")throw new Error(["MUI: The `date-fns` package v3.x is not compatible with this adapter.","Please, install v2.x of the package or use the `AdapterDateFnsV3` instead."].join(`
`));super({locale:s??Ni,formats:r,longFormatters:Im}),this.parseISO=n=>Li(n),this.toISO=n=>Vi(n,{format:"extended"}),this.parse=(n,a)=>n===""?null:Wi(n,a,new Date,{locale:this.locale}),this.isValid=n=>Ui(this.date(n)),this.format=(n,a)=>this.formatByString(n,this.formats[a]),this.formatByString=(n,a)=>$i(n,a,{locale:this.locale}),this.getDiff=(n,a,o)=>{switch(o){case"years":return Zi(n,this.date(a));case"quarters":return Qi(n,this.date(a));case"months":return Yi(n,this.date(a));case"weeks":return Ki(n,this.date(a));case"days":return qi(n,this.date(a));case"hours":return Gi(n,this.date(a));case"minutes":return Hi(n,this.date(a));case"seconds":return zi(n,this.date(a));default:return Bi(n,this.date(a))}},this.isEqual=(n,a)=>n===null&&a===null?!0:Ji(n,a),this.isSameYear=(n,a)=>Xi(n,a),this.isSameMonth=(n,a)=>el(n,a),this.isSameDay=(n,a)=>tl(n,a),this.isSameHour=(n,a)=>sl(n,a),this.isAfter=(n,a)=>_r(n,a),this.isAfterYear=(n,a)=>_r(n,Tr(a)),this.isAfterDay=(n,a)=>_r(n,Nn(a)),this.isBefore=(n,a)=>ws(n,a),this.isBeforeYear=(n,a)=>ws(n,Ws(a)),this.isBeforeDay=(n,a)=>ws(n,Ln(a)),this.isWithinRange=(n,[a,o])=>rl(n,{start:a,end:o}),this.startOfYear=n=>Ws(n),this.startOfMonth=n=>Vn(n),this.startOfWeek=n=>kr(n,{locale:this.locale}),this.startOfDay=n=>Ln(n),this.endOfYear=n=>Tr(n),this.endOfMonth=n=>Wn(n),this.endOfWeek=n=>Er(n,{locale:this.locale}),this.endOfDay=n=>Nn(n),this.addYears=(n,a)=>Un(n,a),this.addMonths=(n,a)=>Ir(n,a),this.addWeeks=(n,a)=>nl(n,a),this.addDays=(n,a)=>Dr(n,a),this.addHours=(n,a)=>ol(n,a),this.addMinutes=(n,a)=>al(n,a),this.addSeconds=(n,a)=>il(n,a),this.getYear=n=>ll(n),this.getMonth=n=>cl(n),this.getDate=n=>dl(n),this.getHours=n=>ul(n),this.getMinutes=n=>hl(n),this.getSeconds=n=>fl(n),this.getMilliseconds=n=>ml(n),this.setYear=(n,a)=>pl(n,a),this.setMonth=(n,a)=>xl(n,a),this.setDate=(n,a)=>gl(n,a),this.setHours=(n,a)=>yl(n,a),this.setMinutes=(n,a)=>bl(n,a),this.setSeconds=(n,a)=>vl(n,a),this.setMilliseconds=(n,a)=>jl(n,a),this.getDaysInMonth=n=>wl(n),this.getNextMonth=n=>Ir(n,1),this.getPreviousMonth=n=>Ir(n,-1),this.getMonthArray=n=>{const o=[Ws(n)];for(;o.length<12;){const i=o[o.length-1];o.push(this.getNextMonth(i))}return o},this.mergeDateAndTime=(n,a)=>this.setSeconds(this.setMinutes(this.setHours(n,this.getHours(a)),this.getMinutes(a)),this.getSeconds(a)),this.getWeekdays=()=>{const n=new Date;return Sl({start:kr(n,{locale:this.locale}),end:Er(n,{locale:this.locale})}).map(a=>this.formatByString(a,"EEEEEE"))},this.getWeekArray=n=>{const a=kr(Vn(n),{locale:this.locale}),o=Er(Wn(n),{locale:this.locale});let i=0,l=a;const c=[];for(;ws(l,o);){const d=Math.floor(i/7);c[d]=c[d]||[],c[d].push(l),l=Dr(l,1),i+=1}return c},this.getWeekNumber=n=>Cl(n,{locale:this.locale}),this.getYearRange=(n,a)=>{const o=Ws(n),i=Tr(a),l=[];let c=o;for(;ws(c,i);)l.push(c),c=Un(c,1);return l}}}const Fm={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"http://localhost:3001",VITE_AWS_REGION:"us-east-1",VITE_BUILD_TIME:"2026-01-05T13:27:30.749Z",VITE_COGNITO_CLIENT_ID:"",VITE_COGNITO_DOMAIN:"",VITE_COGNITO_REDIRECT_SIGN_IN:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",VITE_COGNITO_REDIRECT_SIGN_OUT:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",VITE_COGNITO_USER_POOL_ID:"",VITE_ENABLE_DEBUG:"false",VITE_ENABLE_MOCK_DATA:"false",VITE_ENVIRONMENT:"production",VITE_SERVERLESS:"true",VITE_VERSION:"1.0.0-dev"},ko=Fm&&"http://localhost:3001"||window.__CONFIG__&&window.__CONFIG__.API_URL||"http://localhost:3001",Nm=()=>{const[t,s]=h.useState("trades"),[r,n]=h.useState(0),[a,o]=h.useState(1e4),[i,l]=h.useState(null),[c,d]=h.useState(!1),[m,x]=h.useState(!1),[g,b]=h.useState(!1),[D,p]=h.useState(""),[j,P]=h.useState("all"),[S,T]=h.useState("all"),[w,y]=h.useState("execution_date"),[f,C]=h.useState("desc"),[_,k]=h.useState([]),[R,U]=h.useState(!1),[z,G]=h.useState(null),[$,L]=h.useState(""),[se,ie]=h.useState("all"),[te,V]=h.useState({start:null,end:null}),[O,fe]=h.useState(null),{data:B,isLoading:H,refetch:q}=hs({queryKey:["tradeHistory",r,a],queryFn:async()=>{const N=new URLSearchParams({page:(r+1).toString(),limit:a.toString()}),Y=await fetch(`${ko}/api/trades?${N}`);if(!Y.ok)throw new Error("Failed to fetch trades");const le=await Y.json();return{data:{trades:le.items||[],pagination:le.pagination||{},summary:{}}}},staleTime:6e4}),{data:W,isLoading:me}=hs({queryKey:["tradeSummary"],queryFn:async()=>{const N=await fetch(`${ko}/api/trades/summary`);if(!N.ok)throw new Error("Failed to fetch summary");return{data:(await N.json()).data}},staleTime:6e4}),K=B?.data?.trades||[],ye=B?.data?.summary||W?.data?.summary||{},Ce=H||me,Ee=h.useMemo(()=>{if(!K||K.length===0)return[];const N=[...K].sort((le,ge)=>new Date(le.execution_date)-new Date(ge.execution_date)),Y={};return N.forEach(le=>{const ge=new Date(le.execution_date).toLocaleDateString();Y[ge]||(Y[ge]={date:ge,buyCount:0,sellCount:0,buyValue:0,sellValue:0,totalValue:0}),le.type.toLowerCase()==="buy"?(Y[ge].buyCount+=1,le.order_value!==null&&le.order_value!==void 0&&(Y[ge].buyValue+=le.order_value)):(Y[ge].sellCount+=1,le.order_value!==null&&le.order_value!==void 0&&(Y[ge].sellValue+=le.order_value)),le.order_value!==null&&le.order_value!==void 0&&(Y[ge].totalValue+=le.order_value)}),Object.values(Y)},[K]),oe=h.useMemo(()=>{if(!K||K.length===0)return{totalTrades:0,winningTrades:0,losingTrades:0,winRate:0,avgHoldTime:"N/A",totalPnl:0,avgWin:0,avgLoss:0,profitFactor:0};const N=K.filter(et=>et.type.toLowerCase()==="buy"),Y=K.filter(et=>et.type.toLowerCase()==="sell"),le=N.reduce((et,ze)=>ze.order_value!==null&&ze.order_value!==void 0?et+ze.order_value:et,0),ge=Y.reduce((et,ze)=>ze.order_value!==null&&ze.order_value!==void 0?et+ze.order_value:et,0),De=ge-le,Be=Y.length,Qe=N.filter(et=>!0).length,zt=Be>0?ge/Be:0,Ht=Qe>0?le/Qe:0,yt=le>0?ge/le:0,rs=ye.total_trades||K.length;return{totalTrades:rs,winningTrades:Be,losingTrades:N.length-Be,winRate:Be>0?Be/rs*100:0,avgHoldTime:"N/A",totalPnl:De,avgWin:zt,avgLoss:Ht,profitFactor:isFinite(yt)?yt:0}},[K,ye]),pe=h.useMemo(()=>!_||_.length===0?[]:_.filter(N=>{const Y=$.toLowerCase();if(!(N.symbol.toLowerCase().includes(Y)||N.buyDate.toString().includes(Y)||N.sellDate.toString().includes(Y)))return!1;if(se!=="all"){const ge=parseFloat(N.pnl);if(se==="profit"&&ge<=0||se==="loss"&&ge>=0||se==="wash-sale"&&!N.isWashSale)return!1}return!0}),[_,$,se]);h.useEffect(()=>{t==="matched"&&(async()=>{try{U(!0),G(null);const le=await(await fetch("/api/trades/fifo-analysis")).json();if(le.success&&le.data){const De=(le.data?.analysis||null)?.matchedPairs||null,Be=Array.isArray(De)&&De.length>0?De:[];k(Be)}else G("Failed to load matched pairs data")}catch(Y){G(Y.message||"Error fetching matched pairs"),console.error("Error fetching FIFO analysis:",Y)}finally{U(!1)}})()},[t]);const X=()=>{q()},I=async()=>{try{fe(null),q(),x(!1)}catch(N){fe(N.message)}},ne=async(N="csv")=>{try{const Y=await fetch(`/api/trades/export?format=${N}`);if(Y.ok){const le=await Y.blob(),ge=window.URL.createObjectURL(le),De=document.createElement("a");De.href=ge,De.download=`trades_${new Date().toISOString().split("T")[0]}.${N}`,document.body.appendChild(De),De.click(),window.URL.revokeObjectURL(ge),document.body.removeChild(De)}}catch(Y){fe(Y.message)}},be=N=>{switch(N?.toLowerCase()){case"buy":return"success";case"sell":return"error";case"dividend":return"info";case"split":return"warning";default:return"default"}},Pe=N=>N==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(N),ue=N=>N==null?"0.00%":`${(N*100).toFixed(2)}%`,xe=h.useMemo(()=>{if(!Array.isArray(K))return[];let N=K.filter(Y=>{const le=!D||Y.symbol?.toLowerCase().includes(D.toLowerCase())||Y.type?.toLowerCase().includes(D.toLowerCase()),ge=j==="all"||Y.type===j,De=S==="all"||Y.status===S;return le&&ge&&De});return N.sort((Y,le)=>{const ge=Y[w]||"",De=le[w]||"";return f==="asc"?ge>De?1:-1:ge<De?1:-1}),N},[K,D,j,S,w,f]),Z=xe.slice(r*a,r*a+a);return e.jsx(jn,{dateAdapter:Om,children:e.jsxs(ot,{maxWidth:"xl",sx:{py:3},children:[e.jsxs(E,{sx:{mb:3},children:[e.jsx(u,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Trade History"}),e.jsx(u,{variant:"subtitle1",color:"text.secondary",children:"Complete overview of your trading activity and performance"})]}),O&&e.jsx(je,{severity:"error",sx:{mb:3},onClose:()=>fe(null),children:O}),e.jsx(E,{sx:{mb:3,borderBottom:1,borderColor:"divider"},children:e.jsxs(tn,{value:t,onChange:(N,Y)=>s(Y),children:[e.jsx(Pt,{label:"All Trades",value:"trades"}),e.jsx(Pt,{label:"Matched Pairs (FIFO)",value:"matched"})]})}),oe&&e.jsxs(v,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(Q,{children:e.jsxs(J,{children:[e.jsxs(E,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ii,{color:"primary",sx:{mr:1}}),e.jsx(u,{variant:"h6",children:"Total Trades"})]}),e.jsx(u,{variant:"h4",sx:{mt:1},children:oe.totalTrades||0})]})})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(Q,{children:e.jsxs(J,{children:[e.jsxs(E,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(li,{color:"success",sx:{mr:1}}),e.jsx(u,{variant:"h6",children:"Total P&L"})]}),e.jsx(u,{variant:"h4",sx:{mt:1,color:oe.totalPnl>=0?"success.main":"error.main"},children:Pe(oe.totalPnl)})]})})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(Q,{children:e.jsxs(J,{children:[e.jsxs(E,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Wr,{color:"info",sx:{mr:1}}),e.jsx(u,{variant:"h6",children:"Win Rate"})]}),e.jsx(u,{variant:"h4",sx:{mt:1},children:ue(oe.winRate)})]})})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(Q,{children:e.jsxs(J,{children:[e.jsxs(E,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(No,{color:"secondary",sx:{mr:1}}),e.jsx(u,{variant:"h6",children:"Avg Hold Time"})]}),e.jsx(u,{variant:"h4",sx:{mt:1},children:oe.avgHoldTime||"N/A"})]})})})]}),e.jsxs(E,{sx:{mb:3,display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(ee,{variant:"outlined",startIcon:e.jsx(ci,{}),onClick:()=>x(!0),children:"Import Trades"}),e.jsx(ee,{variant:"outlined",startIcon:e.jsx(Es,{}),onClick:()=>ne("csv"),children:"Export CSV"}),e.jsx(ee,{variant:"outlined",startIcon:e.jsx(Es,{}),onClick:()=>ne("json"),children:"Export JSON"}),e.jsx(ee,{variant:"outlined",startIcon:e.jsx(Nt,{}),onClick:X,disabled:Ce,children:"Refresh"})]}),e.jsx(v,{container:!0,spacing:3,sx:{mb:4},children:e.jsx(v,{item:!0,xs:12,children:e.jsxs(Q,{children:[e.jsx(Se,{title:"Trade Activity Over Time - Buy/Sell by Day"}),e.jsxs(J,{children:[e.jsx(Ne,{width:"100%",height:400,children:e.jsxs(zr,{data:Ee,children:[e.jsx(Ke,{strokeDasharray:"3 3"}),e.jsx(Ye,{dataKey:"date",angle:-45,textAnchor:"end",height:80}),e.jsx(Re,{}),e.jsx(Le,{contentStyle:{backgroundColor:"#f5f5f5",border:"1px solid #ccc"},formatter:(N,Y)=>Y==="buyValue"||Y==="sellValue"?Pe(N):N,labelFormatter:N=>`Date: ${N}`}),e.jsx(Oe,{dataKey:"buyValue",fill:"#4CAF50",name:"Buy Value"}),e.jsx(Oe,{dataKey:"sellValue",fill:"#F44336",name:"Sell Value"}),e.jsx(Yt,{dataKey:"buyCount",stroke:"#2196F3",yAxisId:"right",strokeWidth:2,name:"Buy Count"}),e.jsx(Yt,{dataKey:"sellCount",stroke:"#FF6F00",yAxisId:"right",strokeWidth:2,name:"Sell Count"}),e.jsx(Re,{yAxisId:"right",orientation:"right"})]})}),e.jsx(u,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"Green bars = Buy Values | Red bars = Sell Values | Blue line = # Buys | Orange line = # Sells"})]})]})})}),oe&&e.jsxs(v,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(v,{item:!0,xs:12,md:6,children:e.jsxs(Q,{children:[e.jsx(Se,{title:"Trading Statistics"}),e.jsx(J,{children:e.jsxs(E,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(E,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{children:"Total Trades:"}),e.jsx(u,{fontWeight:"bold",children:oe.totalTrades})]}),e.jsxs(E,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{children:"Winning Trades:"}),e.jsx(u,{fontWeight:"bold",color:"success.main",children:oe.winningTrades})]}),e.jsxs(E,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{children:"Losing Trades:"}),e.jsx(u,{fontWeight:"bold",color:"error.main",children:oe.losingTrades})]}),e.jsxs(E,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{children:"Average Win:"}),e.jsx(u,{fontWeight:"bold",children:Pe(oe.avgWin)})]}),e.jsxs(E,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{children:"Average Loss:"}),e.jsx(u,{fontWeight:"bold",children:Pe(oe.avgLoss)})]}),e.jsxs(E,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{children:"Profit Factor:"}),e.jsx(u,{fontWeight:"bold",children:oe.profitFactor})]})]})})]})}),e.jsx(v,{item:!0,xs:12,md:6,children:e.jsxs(Q,{children:[e.jsx(Se,{title:"Position Summary"}),e.jsx(J,{children:e.jsxs(E,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(E,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{children:"Avg Buy Order Value:"}),e.jsx(u,{fontWeight:"bold",children:Pe(oe.avgLoss)})]}),e.jsxs(E,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{children:"Avg Sell Order Value:"}),e.jsx(u,{fontWeight:"bold",children:Pe(oe.avgWin)})]}),e.jsxs(E,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{children:"Net Closed P&L:"}),e.jsx(u,{fontWeight:"bold",color:oe.totalPnl>=0?"success.main":"error.main",children:Pe(oe.totalPnl)})]}),e.jsx(u,{variant:"caption",color:"text.secondary",sx:{mt:1},children:"Based on buy/sell order values"})]})})]})})]}),t==="trades"&&e.jsxs(e.Fragment,{children:[e.jsx(Q,{sx:{mb:3},children:e.jsxs(J,{children:[e.jsxs(E,{sx:{display:"flex",gap:2,flexWrap:"wrap",alignItems:"center"},children:[e.jsx(ve,{size:"small",placeholder:"Search by symbol or type...",value:D,onChange:N=>p(N.target.value),InputProps:{startAdornment:e.jsx(kt,{position:"start",children:e.jsx(En,{})})},sx:{minWidth:200}}),e.jsxs(tt,{size:"small",sx:{minWidth:120},children:[e.jsx(st,{children:"Type"}),e.jsxs(rt,{value:j,label:"Type",onChange:N=>P(N.target.value),children:[e.jsx(re,{value:"all",children:"All Types"}),e.jsx(re,{value:"buy",children:"Buy"}),e.jsx(re,{value:"sell",children:"Sell"}),e.jsx(re,{value:"dividend",children:"Dividend"}),e.jsx(re,{value:"split",children:"Split"})]})]}),e.jsxs(tt,{size:"small",sx:{minWidth:120},children:[e.jsx(st,{children:"Status"}),e.jsxs(rt,{value:S,label:"Status",onChange:N=>T(N.target.value),children:[e.jsx(re,{value:"all",children:"All Status"}),e.jsx(re,{value:"filled",children:"Filled"}),e.jsx(re,{value:"pending",children:"Pending"}),e.jsx(re,{value:"cancelled",children:"Cancelled"}),e.jsx(re,{value:"partial",children:"Partial"})]})]}),e.jsx(ee,{variant:"outlined",startIcon:e.jsx(di,{}),onClick:()=>b(!g),children:"Filters"})]}),g&&e.jsx(E,{sx:{mt:2,pt:2,borderTop:1,borderColor:"divider"},children:e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(_o,{label:"Start Date",value:te.start,onChange:N=>V(Y=>({...Y,start:N})),renderInput:N=>e.jsx(ve,{...N,fullWidth:!0})})}),e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(_o,{label:"End Date",value:te.end,onChange:N=>V(Y=>({...Y,end:N})),renderInput:N=>e.jsx(ve,{...N,fullWidth:!0})})})]})})]})}),e.jsxs(Q,{children:[e.jsx(dt,{children:e.jsxs(ut,{children:[e.jsx(ht,{children:e.jsxs(Te,{children:[e.jsx(A,{children:e.jsx(In,{active:w==="symbol",direction:w==="symbol"?f:"asc",onClick:()=>{y("symbol"),C(w==="symbol"&&f==="asc"?"desc":"asc")},children:"Symbol"})}),e.jsx(A,{children:"Type"}),e.jsx(A,{children:"Quantity"}),e.jsx(A,{children:"Price"}),e.jsx(A,{children:"Value"}),e.jsx(A,{children:"Status"}),e.jsx(A,{children:e.jsx(In,{active:w==="executedAt",direction:w==="executedAt"?f:"asc",onClick:()=>{y("executedAt"),C(w==="executedAt"&&f==="asc"?"desc":"asc")},children:"Date"})}),e.jsx(A,{children:"Actions"})]})}),e.jsx(ft,{children:Ce?e.jsx(Te,{children:e.jsx(A,{colSpan:8,align:"center",children:e.jsx(Je,{})})}):(Z?.length||0)===0?e.jsx(Te,{children:e.jsx(A,{colSpan:8,align:"center",children:e.jsx(u,{variant:"body2",color:"text.secondary",children:"No trades found"})})}):(Z||[]).map(N=>e.jsxs(Te,{hover:!0,children:[e.jsx(A,{children:e.jsx(u,{variant:"body2",fontWeight:"bold",children:N.symbol})}),e.jsx(A,{children:e.jsx(Ue,{label:N.type,color:be(N.type),size:"small",icon:N.type==="buy"?e.jsx(Qs,{}):e.jsx(Ao,{})})}),e.jsx(A,{children:N.quantity}),e.jsx(A,{children:Pe(N.execution_price)}),e.jsx(A,{children:Pe(N.order_value)}),e.jsx(A,{children:e.jsx(Ue,{label:"Filled",color:"success",size:"small"})}),e.jsx(A,{children:new Date(N.execution_date).toLocaleDateString()}),e.jsx(A,{children:e.jsx(We,{size:"small",onClick:()=>{l(N),d(!0)},children:e.jsx(Lo,{})})})]},N.id))})]})}),e.jsx(ui,{rowsPerPageOptions:[10,25,50,100],component:"div",count:xe?.length||0,rowsPerPage:a,page:r,onPageChange:(N,Y)=>n(Y),onRowsPerPageChange:N=>{o(parseInt(N.target.value,10)),n(0)}})]})]}),t==="matched"&&e.jsx(e.Fragment,{children:R?e.jsxs(Q,{sx:{p:3,textAlign:"center"},children:[e.jsx(Je,{}),e.jsx(u,{sx:{mt:2},children:"Loading matched pairs..."})]}):z?e.jsx(je,{severity:"error",sx:{mb:3},children:z}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{sx:{mb:3},children:e.jsx(J,{children:e.jsxs(E,{sx:{display:"flex",gap:2,flexWrap:"wrap",alignItems:"center"},children:[e.jsx(ve,{size:"small",placeholder:"Search by symbol or date...",value:$,onChange:N=>L(N.target.value),InputProps:{startAdornment:e.jsx(kt,{position:"start",children:e.jsx(En,{})})},sx:{minWidth:200}}),e.jsxs(tt,{size:"small",sx:{minWidth:150},children:[e.jsx(st,{children:"P&L Filter"}),e.jsxs(rt,{value:se,label:"P&L Filter",onChange:N=>ie(N.target.value),children:[e.jsx(re,{value:"all",children:"All Pairs"}),e.jsx(re,{value:"profit",children:"Profits Only"}),e.jsx(re,{value:"loss",children:"Losses Only"}),e.jsx(re,{value:"wash-sale",children:"Wash Sales Only"})]})]}),e.jsx(ee,{variant:"outlined",onClick:()=>{L(""),ie("all")},children:"Clear Filters"})]})})}),e.jsx(Q,{children:e.jsx(dt,{children:e.jsxs(ut,{children:[e.jsx(ht,{children:e.jsxs(Te,{sx:{backgroundColor:"#f5f5f5"},children:[e.jsx(A,{children:e.jsx("strong",{children:"Symbol"})}),e.jsx(A,{children:e.jsx("strong",{children:"Buy Date"})}),e.jsx(A,{align:"right",children:e.jsx("strong",{children:"Buy Price"})}),e.jsx(A,{children:e.jsx("strong",{children:"Sell Date"})}),e.jsx(A,{align:"right",children:e.jsx("strong",{children:"Sell Price"})}),e.jsx(A,{align:"right",children:e.jsx("strong",{children:"Qty"})}),e.jsx(A,{align:"right",children:e.jsx("strong",{children:"Cost Basis"})}),e.jsx(A,{align:"right",children:e.jsx("strong",{children:"Proceeds"})}),e.jsx(A,{align:"right",children:e.jsx("strong",{children:"P&L"})}),e.jsx(A,{align:"right",children:e.jsx("strong",{children:"Hold Days"})}),e.jsx(A,{children:e.jsx("strong",{children:"Tax Type"})}),e.jsx(A,{children:e.jsx("strong",{children:"Wash Sale"})})]})}),e.jsx(ft,{children:pe&&pe.length>0?pe.map((N,Y)=>{const le=parseFloat(N.pnl),ge=le>=0;return e.jsxs(Te,{hover:!0,children:[e.jsx(A,{children:e.jsx(u,{variant:"body2",fontWeight:"bold",children:N.symbol})}),e.jsx(A,{children:e.jsx(u,{variant:"body2",children:new Date(N.buyDate).toLocaleDateString()})}),e.jsx(A,{align:"right",children:e.jsx(u,{variant:"body2",children:Pe(N.buyPrice)})}),e.jsx(A,{children:e.jsx(u,{variant:"body2",children:new Date(N.sellDate).toLocaleDateString()})}),e.jsx(A,{align:"right",children:e.jsx(u,{variant:"body2",children:Pe(N.sellPrice)})}),e.jsx(A,{align:"right",children:e.jsx(u,{variant:"body2",children:N.quantity})}),e.jsx(A,{align:"right",children:e.jsx(u,{variant:"body2",children:Pe(N.costBasis)})}),e.jsx(A,{align:"right",children:e.jsx(u,{variant:"body2",children:Pe(N.proceeds)})}),e.jsx(A,{align:"right",children:e.jsxs(u,{variant:"body2",fontWeight:"bold",sx:{color:ge?"success.main":"error.main"},children:[ge?"+":"",Pe(le)]})}),e.jsx(A,{align:"right",children:e.jsx(u,{variant:"body2",children:N.holdDays})}),e.jsx(A,{children:e.jsx(Ue,{label:N.taxType,size:"small",color:N.taxType==="LONG-TERM"?"success":"warning",variant:"outlined"})}),e.jsx(A,{children:N.isWashSale?e.jsx(Ue,{label:"Wash Sale",size:"small",color:"error",variant:"outlined"}):e.jsx(u,{variant:"body2",children:""})})]},Y)}):e.jsx(Te,{children:e.jsx(A,{colSpan:12,align:"center",children:e.jsx(u,{variant:"body2",color:"text.secondary",children:"No matched pairs found"})})})})]})})})]})}),e.jsxs(_t,{open:m,onClose:()=>x(!1),children:[e.jsx(Wt,{children:"Import Trades"}),e.jsxs(Tt,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Import your trades from connected brokers. This will sync your trade history and update your analytics."}),e.jsx(je,{severity:"info",children:"Make sure your broker API keys are configured in Settings before importing."})]}),e.jsxs(It,{children:[e.jsx(ee,{onClick:()=>x(!1),children:"Cancel"}),e.jsx(ee,{variant:"contained",onClick:I,children:"Import from Alpaca"})]})]}),e.jsxs(_t,{open:c,onClose:()=>d(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(Wt,{children:"Trade Details"}),e.jsx(Tt,{children:i&&e.jsxs(v,{container:!0,spacing:2,sx:{mt:1},children:[e.jsxs(v,{item:!0,xs:12,sm:6,children:[e.jsx(u,{variant:"subtitle2",children:"Symbol"}),e.jsx(u,{variant:"body2",children:i.symbol})]}),e.jsxs(v,{item:!0,xs:12,sm:6,children:[e.jsx(u,{variant:"subtitle2",children:"Type"}),e.jsx(u,{variant:"body2",children:i.type})]}),e.jsxs(v,{item:!0,xs:12,sm:6,children:[e.jsx(u,{variant:"subtitle2",children:"Quantity"}),e.jsx(u,{variant:"body2",children:i.quantity})]}),e.jsxs(v,{item:!0,xs:12,sm:6,children:[e.jsx(u,{variant:"subtitle2",children:"Execution Price"}),e.jsx(u,{variant:"body2",children:Pe(i.execution_price)})]}),e.jsxs(v,{item:!0,xs:12,sm:6,children:[e.jsx(u,{variant:"subtitle2",children:"Total Value"}),e.jsx(u,{variant:"body2",children:Pe(i.order_value)})]}),e.jsxs(v,{item:!0,xs:12,sm:6,children:[e.jsx(u,{variant:"subtitle2",children:"P&L"}),e.jsx(u,{variant:"body2",color:"text.secondary",children:Pe(0)})]}),e.jsxs(v,{item:!0,xs:12,sm:6,children:[e.jsx(u,{variant:"subtitle2",children:"Execution Date"}),e.jsx(u,{variant:"body2",children:new Date(i.execution_date).toLocaleString()})]}),e.jsxs(v,{item:!0,xs:12,sm:6,children:[e.jsx(u,{variant:"subtitle2",children:"Status"}),e.jsx(u,{variant:"body2",children:"Filled"})]}),i.commission?e.jsxs(v,{item:!0,xs:12,sm:6,children:[e.jsx(u,{variant:"subtitle2",children:"Commission"}),e.jsx(u,{variant:"body2",children:Pe(i.commission)})]}):null,e.jsxs(v,{item:!0,xs:12,sm:6,children:[e.jsx(u,{variant:"subtitle2",children:"Order ID"}),e.jsx(u,{variant:"body2",children:i.order_id})]})]})}),e.jsx(It,{children:e.jsx(ee,{onClick:()=>d(!1),children:"Close"})})]})]})})},Lm={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"http://localhost:3001",VITE_AWS_REGION:"us-east-1",VITE_BUILD_TIME:"2026-01-05T13:27:30.749Z",VITE_COGNITO_CLIENT_ID:"",VITE_COGNITO_DOMAIN:"",VITE_COGNITO_REDIRECT_SIGN_IN:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",VITE_COGNITO_REDIRECT_SIGN_OUT:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",VITE_COGNITO_USER_POOL_ID:"",VITE_ENABLE_DEBUG:"false",VITE_ENABLE_MOCK_DATA:"false",VITE_ENVIRONMENT:"production",VITE_SERVERLESS:"true",VITE_VERSION:"1.0.0-dev"},Ba=(t,s,r,n={})=>{new Date().toISOString(),r?.message||r?.toString(),r?.stack,r?.isAxiosError&&(r.config?.url,r.config?.method,r.config?.baseURL,r.config?.timeout,r.response?.status,r.response?.statusText,r.response?.data)},Vm=(t,s,r,n={})=>{Ba(t,`Query[${s}]`,r,{...n})},Wm=(t,s,r=null,n={})=>{new Date().toISOString(),r&&(Array.isArray(r)?r?.length:Object.keys(r).length)},za=t=>({error:(s,r,n)=>Ba(t,s,r,n),queryError:(s,r,n)=>Vm(t,s,r,n),success:(s,r,n)=>Wm(t,s,r,n),info:(s,r)=>Lm&&!1}),Lr={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"http://localhost:3001",VITE_AWS_REGION:"us-east-1",VITE_BUILD_TIME:"2026-01-05T13:27:30.749Z",VITE_COGNITO_CLIENT_ID:"",VITE_COGNITO_DOMAIN:"",VITE_COGNITO_REDIRECT_SIGN_IN:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",VITE_COGNITO_REDIRECT_SIGN_OUT:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",VITE_COGNITO_USER_POOL_ID:"",VITE_ENABLE_DEBUG:"false",VITE_ENABLE_MOCK_DATA:"false",VITE_ENVIRONMENT:"production",VITE_SERVERLESS:"true",VITE_VERSION:"1.0.0-dev"};function as({children:t,value:s,index:r,...n}){return e.jsx("div",{role:"tabpanel",hidden:s!==r,id:`settings-tabpanel-${r}`,"aria-labelledby":`settings-tab-${r}`,...n,children:s===r&&e.jsx(E,{sx:{py:3},children:t})})}const Um=()=>{ha("Settings");const{user:t,isAuthenticated:s,isLoading:r,logout:n,checkAuthState:a}=Rt(),o=ln(),i=h.useMemo(()=>lr(),[]),{apiUrl:l}=i,c=h.useMemo(()=>za("Settings"),[]),[d,m]=h.useState(0),[x,g]=h.useState(!1),[b,D]=h.useState({open:!1,message:"",severity:"success"}),[p,j]=h.useState([]),[P,S]=h.useState(!1),[T,w]=h.useState({}),[y,f]=h.useState({brokerName:"",apiKey:"",apiSecret:"",sandbox:!0}),[C,_]=h.useState({firstName:"",lastName:"",email:"",phone:"",timezone:"America/New_York",currency:"USD"}),[k,R]=h.useState({open:!1,currentPassword:"",newPassword:"",confirmPassword:"",errors:{}}),[U,z]=h.useState({email:!0,push:!0,priceAlerts:!0,portfolioUpdates:!0,marketNews:!1,weeklyReports:!0}),[G,$]=h.useState({darkMode:!1,primaryColor:"#1976d2",chartStyle:"candlestick",layout:"standard"}),L=h.useCallback(async()=>{try{const I=await ke.getApiKeys();if(I&&I.ok){const ne=I.data||{},be=Object.entries(ne).map(([Pe,ue])=>({brokerName:Pe,...ue,createdAt:ue.lastValidated||new Date().toISOString()}));j(be)}else throw new Error(`API keys endpoint failed: ${I?.status||"unknown"}`)}catch(I){throw c.error("Load API Keys Failed",I,{userId:t?.sub||t?.id,apiUrl:l,operation:"loadApiKeys",responseStatus:I.response?.status,responseData:I.response?.data}),j([]),I}},[l,c,t?.id,t?.sub]),se=h.useCallback(async()=>{try{g(!0),_({firstName:t?.firstName||"",lastName:t?.lastName||"",email:t?.email||"",phone:t?.phone||"",timezone:t?.timezone||"America/New_York",currency:t?.currency||"USD"});try{await L()}catch(I){c.error("API Keys Loading Failed",I,{userId:t?.sub||t?.id,apiUrl:l,operation:"loadApiKeys",context:"settings initialization"}),O(`Failed to load API keys: ${I.message}`,"error")}try{const I=await fetch(`${l}/api/settings/preferences`,{headers:{Authorization:`Bearer ${t?.tokens?.accessToken||"dev-token"}`}});if(I.ok){const ne=await I.json();z(be=>({...be,...ne.preferences}))}else I.status===404&&console.log("Notifications endpoint not implemented, using defaults")}catch{console.log("Failed to load notification preferences, using defaults")}try{const I=await fetch(`${l}/api/settings/preferences`,{headers:{Authorization:`Bearer ${t?.tokens?.accessToken||"dev-token"}`}});if(I.ok){const ne=await I.json();$(be=>({...be,...ne.preferences}))}else I.status===404&&console.log("Theme endpoint not implemented, using defaults")}catch{console.log("Failed to load theme preferences, using defaults")}}catch{O("Failed to load settings","error"),_({firstName:"",lastName:"",email:"",phone:"",timezone:"America/New_York",currency:"USD"})}finally{g(!1)}},[l,c,L,t?.currency,t?.email,t?.firstName,t?.id,t?.lastName,t?.phone,t?.sub,t?.timezone,t?.tokens?.accessToken]),ie=h.useRef(!1),te=h.useRef(se);h.useEffect(()=>{te.current=se},[se]),h.useEffect(()=>{s&&!ie.current&&!x&&(ie.current=!0,c.info("User authenticated, loading settings",{userId:t?.sub||t?.id,email:t?.email}),te.current())},[s,x,c,t?.email,t?.id,t?.sub]),h.useEffect(()=>{!r&&!t&&!s&&Lr&&(c.error("No authenticated session found",new Error("Session check failed"),{isAuthenticated:s,isLoading:r,hasUser:!!t}),a().catch(I=>{c.error("Session recovery failed",I)}))},[r,s,t,a,c]);const V=(I,ne)=>{m(ne)},O=(I,ne="success")=>{D({open:!0,message:I,severity:ne})},fe=async()=>{try{g(!0);const I=await fetch(`${l}/api/user/profile`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t?.tokens?.accessToken||"dev-token"}`},body:JSON.stringify(C)});if(I.ok){const ne=await I.json();O("Profile updated successfully"),ne.user&&await se()}else{const ne=await I.json();c.error("Profile Update Failed",new Error(`Profile update rejected: ${I.status}`),{userId:t?.sub||t?.id,profileData:C,responseStatus:I.status,errorData:ne,operation:"updateProfile"}),O(ne.error||"Failed to update profile","error")}}catch(I){c.error("Profile Save Error",I,{userId:t?.sub||t?.id,profileData:C,operation:"handleSaveProfile",context:"network or server error"}),O("Failed to update profile","error")}finally{g(!1)}},B=async()=>{try{g(!0);const I=await ke.saveApiKey(y);if(I&&I.ok)O("API key added successfully"),S(!1),f({brokerName:"",apiKey:"",apiSecret:"",sandbox:!0}),await L();else{const ne=await I.json();O(ne.error||"Failed to add API key","error")}}catch{O("Failed to add API key","error")}finally{g(!1)}},H=async I=>{try{await ke.deleteApiKey(I),O("API key deleted successfully"),await L()}catch{O("Failed to delete API key","error")}},q=async()=>{try{g(!0);const I=await ke.updateSettings({preferences:{...G,...U}});I.ok?O("Notification preferences updated successfully"):O(I.error||"Failed to update notification preferences","error")}catch{O("Failed to update notification preferences","error")}finally{g(!1)}},W=async()=>{try{g(!0);const I=await ke.updateSettings({preferences:{...G,...U}});I.ok?O("Theme preferences updated successfully"):O(I.error||"Failed to update theme preferences","error")}catch{O("Failed to update theme preferences","error")}finally{g(!1)}},me=async()=>{R({open:!0,currentPassword:"",newPassword:"",confirmPassword:"",errors:{}})},K=()=>{const I={};return k.currentPassword||(I.currentPassword="Current password is required"),k.newPassword?k.newPassword.length<8?I.newPassword="Password must be at least 8 characters":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(k.newPassword)||(I.newPassword="Password must contain uppercase, lowercase, and number"):I.newPassword="New password is required",k.newPassword!==k.confirmPassword&&(I.confirmPassword="Passwords do not match"),k.currentPassword===k.newPassword&&(I.newPassword="New password must be different from current password"),I},ye=async()=>{const I=K();if(Object.keys(I).length>0){R(ne=>({...ne,errors:I}));return}try{g(!0);const ne=await fetch(`${l}/api/user/change-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t?.tokens?.accessToken||"dev-token"}`},body:JSON.stringify({currentPassword:k.currentPassword,newPassword:k.newPassword})});if(ne.ok)O("Password changed successfully","success"),R({open:!1,currentPassword:"",newPassword:"",confirmPassword:"",errors:{}});else{const be=await ne.json();ne.status===401?R(Pe=>({...Pe,errors:{currentPassword:"Current password is incorrect"}})):O(be.message||"Failed to change password","error")}}catch{O("Network error. Please try again.","error")}finally{g(!1)}},Ce=()=>{R({open:!1,currentPassword:"",newPassword:"",confirmPassword:"",errors:{}})},Ee=async()=>{try{g(!0);const I=t?.twoFactorEnabled?"disable":"enable",ne=await fetch(`${l}/api/user/two-factor/${I}`,{method:"POST",headers:{Authorization:`Bearer ${t?.tokens?.accessToken||"dev-token"}`}});if(ne.ok){const be=await ne.json();O(t?.twoFactorEnabled?"Two-factor authentication disabled":"Two-factor authentication enabled"),!t?.twoFactorEnabled&&be.qrCode&&O("Please scan the QR code with your authenticator app","info"),await se()}else{const be=await ne.json();O(be.error||"Failed to toggle two-factor authentication","error")}}catch{O("Failed to toggle two-factor authentication","error")}finally{g(!1)}},oe=async()=>{try{g(!0);const I=await fetch(`${l}/api/user/recovery-codes`,{headers:{Authorization:`Bearer ${t?.tokens?.accessToken||"dev-token"}`}});if(I.ok){const be=(await I.json()).codes.join(`
`),Pe=new Blob([be],{type:"text/plain"}),ue=URL.createObjectURL(Pe),xe=document.createElement("a");xe.href=ue,xe.download="recovery-codes.txt",xe.click(),URL.revokeObjectURL(ue),O("Recovery codes downloaded successfully","success")}else{const ne=await I.json();O(ne.error||"Failed to download recovery codes","error")}}catch{O("Failed to download recovery codes","error")}finally{g(!1)}},pe=async()=>{if(window.confirm("Are you sure you want to delete your account? This action cannot be undone.")&&window.confirm('This will permanently delete all your data. Type "DELETE" to confirm.')&&window.prompt('Type "DELETE" to confirm account deletion:')==="DELETE")try{g(!0);const ne=await fetch(`${l}/api/user/delete-account`,{method:"DELETE",headers:{Authorization:`Bearer ${t?.tokens?.accessToken||"dev-token"}`}});if(ne.ok)O("Account deleted successfully","success"),await n(),o("/");else{const be=await ne.json();O(be.error||"Failed to delete account","error")}}catch{O("Failed to delete account","error")}finally{g(!1)}},X=async()=>{if(window.confirm("This will sign you out of all devices except this one. Continue?"))try{g(!0);const I=await fetch(`${l}/api/user/revoke-sessions`,{method:"POST",headers:{Authorization:`Bearer ${t?.tokens?.accessToken||"dev-token"}`}});if(I.ok)O("All other sessions have been revoked","success");else{const ne=await I.json();O(ne.error||"Failed to revoke sessions","error")}}catch{O("Failed to revoke sessions","error")}finally{g(!1)}};return x||r?e.jsx(ot,{maxWidth:"lg",sx:{mt:4,mb:4},children:e.jsx(E,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:e.jsx(Je,{size:60})})}):!t&&!r?(Lr?c.error("Authentication Error",new Error("Unable to load user information"),{userObject:t,isAuthenticated:s,isLoading:r,apiUrl:l,reason:"No user object available after authentication loading completed",suggestedActions:["refresh page","login again","check session"],url:window.location.href}):console.log(" DEV: Settings page - no authenticated user, showing login prompt"),e.jsx(ot,{maxWidth:"lg",sx:{mt:4,mb:4},children:e.jsx(je,{severity:"warning",action:e.jsx(ee,{color:"inherit",size:"small",onClick:()=>window.location.reload(),"aria-label":"Refresh page to re-authenticate",children:"Refresh"}),children:"Unable to load user information. This may be due to an expired session or authentication issue."})})):e.jsxs(ot,{maxWidth:"lg",sx:{mt:4,mb:4},"data-testid":"settings-page",children:[e.jsx(u,{variant:"h3",component:"h1",gutterBottom:!0,children:"Account Settings"}),e.jsx(u,{variant:"subtitle1",color:"text.secondary",sx:{mb:4},children:"Manage your account preferences, API connections, and security settings"}),e.jsxs(He,{sx:{width:"100%"},children:[e.jsxs(tn,{value:d,onChange:V,variant:"scrollable",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider"},"aria-label":"Settings navigation tabs",children:[e.jsx(Pt,{value:0,icon:e.jsx(Vo,{}),label:"Profile","aria-label":"Profile settings"}),e.jsx(Pt,{value:1,icon:e.jsx(Vr,{}),label:"API Keys","data-testid":"api-keys-tab","aria-label":"API keys management"}),e.jsx(Pt,{value:2,icon:e.jsx(hi,{}),label:"Notifications","aria-label":"Notification preferences"}),e.jsx(Pt,{value:3,icon:e.jsx(fi,{}),label:"Appearance","aria-label":"Appearance and theme settings"}),e.jsx(Pt,{value:4,icon:e.jsx(ls,{}),label:"Security","aria-label":"Security and account settings"}),e.jsx(Pt,{value:5,icon:e.jsx(mi,{}),label:"Privacy","aria-label":"Privacy settings and data management"})]}),e.jsx(as,{value:d,index:0,children:e.jsxs(v,{container:!0,spacing:3,children:[e.jsx(v,{item:!0,xs:12,md:8,children:e.jsxs(Q,{children:[e.jsx(Se,{title:"Personal Information"}),e.jsxs(J,{children:[e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(ve,{fullWidth:!0,label:"First Name",value:C.firstName,onChange:I=>_({...C,firstName:I.target.value})})}),e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(ve,{fullWidth:!0,label:"Last Name",value:C.lastName,onChange:I=>_({...C,lastName:I.target.value})})}),e.jsx(v,{item:!0,xs:12,children:e.jsx(ve,{fullWidth:!0,label:"Email",type:"email",value:C.email,onChange:I=>_({...C,email:I.target.value})})}),e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsxs(tt,{fullWidth:!0,children:[e.jsx(st,{children:"Timezone"}),e.jsxs(rt,{value:C.timezone,onChange:I=>_({...C,timezone:I.target.value}),children:[e.jsx(re,{value:"America/New_York",children:"Eastern Time"}),e.jsx(re,{value:"America/Chicago",children:"Central Time"}),e.jsx(re,{value:"America/Denver",children:"Mountain Time"}),e.jsx(re,{value:"America/Los_Angeles",children:"Pacific Time"}),e.jsx(re,{value:"Europe/London",children:"London"}),e.jsx(re,{value:"Asia/Tokyo",children:"Tokyo"})]})]})}),e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsxs(tt,{fullWidth:!0,children:[e.jsx(st,{children:"Currency"}),e.jsxs(rt,{value:C.currency,onChange:I=>_({...C,currency:I.target.value}),children:[e.jsx(re,{value:"USD",children:"USD - US Dollar"}),e.jsx(re,{value:"EUR",children:"EUR - Euro"}),e.jsx(re,{value:"GBP",children:"GBP - British Pound"}),e.jsx(re,{value:"CAD",children:"CAD - Canadian Dollar"})]})]})})]}),e.jsxs(E,{sx:{mt:3,display:"flex",gap:2},children:[e.jsx(ee,{variant:"contained",startIcon:e.jsx(Sr,{}),onClick:fe,disabled:x,"aria-label":"Save profile changes",children:"Save Changes"}),e.jsx(ee,{variant:"outlined",startIcon:e.jsx(pi,{}),onClick:se,"aria-label":"Cancel and reset profile changes",children:"Reset"})]})]})]})}),e.jsx(v,{item:!0,xs:12,md:4,children:e.jsxs(Q,{children:[e.jsx(Se,{title:"Account Overview"}),e.jsxs(J,{children:[e.jsxs(E,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(Wo,{sx:{mr:2,width:56,height:56},children:(t?.firstName?.[0]||t?.username?.[0]||"U").toUpperCase()}),e.jsxs(E,{children:[e.jsxs(u,{variant:"h6",children:[t?.firstName||"Unknown"," ",t?.lastName||"User"]}),e.jsx(u,{color:"text.secondary",children:t?.email||"No email provided"})]})]}),e.jsx(ys,{sx:{my:2}}),e.jsxs(Zs,{dense:!0,"aria-label":"Account information",children:[e.jsxs(Kt,{children:[e.jsx(us,{primary:"Account Status",secondary:"Active"}),e.jsx(An,{children:e.jsx(Ue,{label:"Active",color:"success",size:"small"})})]}),e.jsx(Kt,{children:e.jsx(us,{primary:"Member Since",secondary:new Date(t?.createdAt||Date.now()).toLocaleDateString()})})]})]})]})})]})}),e.jsx(as,{value:d,index:1,children:e.jsx(v,{container:!0,spacing:4,children:e.jsx(v,{item:!0,xs:12,children:e.jsxs(Q,{children:[e.jsx(Se,{title:"API Keys",subheader:"Manage your API keys for data providers and trading platforms",action:e.jsx(ee,{variant:"contained",startIcon:e.jsx(xi,{}),onClick:()=>S(!0),"data-testid":"add-api-key-button","aria-label":"Add new API key",children:"Add API Key"})}),e.jsx(J,{children:p.length===0?e.jsx(je,{severity:"info",sx:{mb:2},children:"No API keys configured. Add your first API key to start accessing real market data."}):e.jsx(v,{container:!0,spacing:2,children:p.map(I=>e.jsx(v,{item:!0,xs:12,md:6,children:e.jsx(Q,{variant:"outlined",children:e.jsx(J,{children:e.jsxs(E,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(E,{children:[e.jsx(u,{variant:"h6",children:I.brokerName}),e.jsxs(u,{variant:"body2",color:"text.secondary",children:["Added:"," ",new Date(I.createdAt).toLocaleDateString()]})]}),e.jsxs(E,{children:[e.jsx(Ue,{label:I.status||"Active",color:I.status==="active"?"success":"default",size:"small"}),e.jsx(We,{onClick:()=>H(I.brokerName),color:"error","aria-label":`Delete ${I.brokerName} API key`,children:e.jsx(gi,{})})]})]})})})},I.brokerName))})})]})})})}),e.jsx(as,{value:d,index:2,children:e.jsxs(Q,{children:[e.jsx(Se,{title:"Notification Preferences",action:e.jsx(ee,{variant:"contained",startIcon:e.jsx(Sr,{}),onClick:q,disabled:x,"aria-label":"Save notification preferences",children:"Save"})}),e.jsx(J,{children:e.jsxs(v,{container:!0,spacing:3,children:[e.jsxs(v,{item:!0,xs:12,md:6,children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"Delivery Methods"}),e.jsxs(E,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(pt,{control:e.jsx(bt,{checked:U.email,onChange:I=>z({...U,email:I.target.checked})}),label:"Email Notifications"}),e.jsx(pt,{control:e.jsx(bt,{checked:U.push,onChange:I=>z({...U,push:I.target.checked})}),label:"Push Notifications"})]})]}),e.jsxs(v,{item:!0,xs:12,md:6,children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"Content Types"}),e.jsxs(E,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(pt,{control:e.jsx(bt,{checked:U.priceAlerts,onChange:I=>z({...U,priceAlerts:I.target.checked})}),label:"Price Alerts"}),e.jsx(pt,{control:e.jsx(bt,{checked:U.portfolioUpdates,onChange:I=>z({...U,portfolioUpdates:I.target.checked})}),label:"Portfolio Updates"}),e.jsx(pt,{control:e.jsx(bt,{checked:U.marketNews,onChange:I=>z({...U,marketNews:I.target.checked})}),label:"Market News"}),e.jsx(pt,{control:e.jsx(bt,{checked:U.weeklyReports,onChange:I=>z({...U,weeklyReports:I.target.checked})}),label:"Weekly Reports"})]})]})]})})]})}),e.jsx(as,{value:d,index:3,children:e.jsxs(Q,{children:[e.jsx(Se,{title:"Appearance Settings",action:e.jsx(ee,{variant:"contained",startIcon:e.jsx(Sr,{}),onClick:W,disabled:x,"aria-label":"Save appearance settings",children:"Save"})}),e.jsx(J,{children:e.jsxs(v,{container:!0,spacing:3,children:[e.jsxs(v,{item:!0,xs:12,md:6,children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"Theme Settings"}),e.jsx(E,{sx:{mb:2},children:e.jsx(pt,{control:e.jsx(bt,{checked:G.darkMode,onChange:I=>$({...G,darkMode:I.target.checked})}),label:"Dark Mode"})}),e.jsxs(tt,{fullWidth:!0,sx:{mb:2},children:[e.jsx(st,{children:"Primary Color"}),e.jsxs(rt,{value:G.primaryColor,onChange:I=>$({...G,primaryColor:I.target.value}),children:[e.jsx(re,{value:"#1976d2",children:"Blue"}),e.jsx(re,{value:"#2e7d32",children:"Green"}),e.jsx(re,{value:"#ed6c02",children:"Orange"}),e.jsx(re,{value:"#9c27b0",children:"Purple"}),e.jsx(re,{value:"#d32f2f",children:"Red"})]})]}),e.jsxs(tt,{fullWidth:!0,children:[e.jsx(st,{children:"Layout Style"}),e.jsxs(rt,{value:G.layout,onChange:I=>$({...G,layout:I.target.value}),children:[e.jsx(re,{value:"standard",children:"Standard"}),e.jsx(re,{value:"compact",children:"Compact"}),e.jsx(re,{value:"spacious",children:"Spacious"})]})]})]}),e.jsxs(v,{item:!0,xs:12,md:6,children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"Chart Settings"}),e.jsxs(tt,{fullWidth:!0,sx:{mb:2},children:[e.jsx(st,{children:"Default Chart Style"}),e.jsxs(rt,{value:G.chartStyle,onChange:I=>$({...G,chartStyle:I.target.value}),children:[e.jsx(re,{value:"candlestick",children:"Candlestick"}),e.jsx(re,{value:"line",children:"Line"}),e.jsx(re,{value:"area",children:"Area"}),e.jsx(re,{value:"bar",children:"Bar"})]})]}),e.jsx(je,{severity:"info",children:"Theme changes will be applied immediately. Some changes may require a page refresh."})]})]})})]})}),e.jsx(as,{value:d,index:4,children:e.jsxs(v,{container:!0,spacing:3,children:[e.jsx(v,{item:!0,xs:12,md:6,children:e.jsxs(Q,{children:[e.jsx(Se,{title:"Password & Authentication"}),e.jsxs(J,{children:[e.jsx(ee,{variant:"outlined",fullWidth:!0,sx:{mb:2},startIcon:e.jsx(ls,{}),onClick:me,disabled:x,"aria-label":"Change account password",children:"Change Password"}),e.jsxs(ee,{variant:"outlined",fullWidth:!0,sx:{mb:2},startIcon:e.jsx(ls,{}),onClick:Ee,disabled:x,"aria-label":`${t?.twoFactorEnabled?"Disable":"Enable"} two-factor authentication`,children:[t?.twoFactorEnabled?"Disable":"Enable"," Two-Factor Authentication"]}),e.jsx(ee,{variant:"outlined",fullWidth:!0,startIcon:e.jsx(Es,{}),onClick:oe,disabled:x||!t?.twoFactorEnabled,"aria-label":"Download two-factor authentication recovery codes",children:"Download Recovery Codes"})]})]})}),e.jsx(v,{item:!0,xs:12,md:6,children:e.jsxs(Q,{children:[e.jsx(Se,{title:"Account Actions"}),e.jsxs(J,{children:[e.jsx(ee,{variant:"outlined",fullWidth:!0,onClick:n,sx:{mb:2},disabled:x,"aria-label":"Sign out of account",children:"Sign Out"}),e.jsx(ee,{variant:"outlined",color:"error",fullWidth:!0,startIcon:e.jsx(Zt,{}),onClick:pe,disabled:x,"aria-label":"Delete account permanently",children:"Delete Account"})]})]})}),e.jsx(v,{item:!0,xs:12,children:e.jsxs(Q,{children:[e.jsx(Se,{title:"Active Sessions"}),e.jsxs(J,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Manage your active login sessions across different devices."}),e.jsx(Zs,{"aria-label":"Active sessions",children:e.jsxs(Kt,{children:[e.jsx(Ur,{children:e.jsx(ds,{color:"success"})}),e.jsx(us,{primary:"Current Session",secondary:`${navigator.userAgent.includes("Chrome")?"Chrome":"Browser"} on ${navigator.platform} - ${new Date().toLocaleString()}`}),e.jsx(An,{children:e.jsx(Ue,{label:"Current",color:"primary",size:"small"})})]})}),e.jsx(ee,{variant:"outlined",color:"warning",startIcon:e.jsx(ls,{}),onClick:X,disabled:x,"aria-label":"Revoke all other active sessions",children:"Revoke All Other Sessions"})]})]})})]})}),e.jsx(as,{value:d,index:5,children:e.jsxs(v,{container:!0,spacing:3,children:[e.jsx(v,{item:!0,xs:12,md:6,children:e.jsxs(Q,{children:[e.jsx(Se,{title:"Data Privacy"}),e.jsxs(J,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Control how your data is collected, stored, and used."}),e.jsx(pt,{control:e.jsx(bt,{defaultChecked:!0}),label:"Allow analytics collection",sx:{mb:2}}),e.jsx(pt,{control:e.jsx(bt,{defaultChecked:!0}),label:"Share usage data for improvements",sx:{mb:2}}),e.jsx(pt,{control:e.jsx(bt,{}),label:"Allow marketing communications",sx:{mb:2}}),e.jsx(ee,{variant:"outlined",fullWidth:!0,startIcon:e.jsx(Es,{}),sx:{mt:2},children:"Download My Data"})]})]})}),e.jsx(v,{item:!0,xs:12,md:6,children:e.jsxs(Q,{children:[e.jsx(Se,{title:"Data Retention"}),e.jsxs(J,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Manage how long your data is stored in our systems."}),e.jsxs(tt,{fullWidth:!0,sx:{mb:2},children:[e.jsx(st,{children:"Trading History Retention"}),e.jsxs(rt,{defaultValue:"12months",label:"Trading History Retention",children:[e.jsx(re,{value:"3months",children:"3 Months"}),e.jsx(re,{value:"6months",children:"6 Months"}),e.jsx(re,{value:"12months",children:"12 Months"}),e.jsx(re,{value:"forever",children:"Keep Forever"})]})]}),e.jsxs(tt,{fullWidth:!0,sx:{mb:2},children:[e.jsx(st,{children:"Analytics Data Retention"}),e.jsxs(rt,{defaultValue:"6months",label:"Analytics Data Retention",children:[e.jsx(re,{value:"30days",children:"30 Days"}),e.jsx(re,{value:"3months",children:"3 Months"}),e.jsx(re,{value:"6months",children:"6 Months"}),e.jsx(re,{value:"never",children:"Don't Store"})]})]})]})]})}),e.jsx(v,{item:!0,xs:12,children:e.jsxs(Q,{children:[e.jsx(Se,{title:"Account Data Management"}),e.jsxs(J,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Request actions regarding your personal data."}),e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:12,sm:4,children:e.jsx(ee,{variant:"outlined",fullWidth:!0,startIcon:e.jsx(Es,{}),children:"Export Data"})}),e.jsx(v,{item:!0,xs:12,sm:4,children:e.jsx(ee,{variant:"outlined",color:"warning",fullWidth:!0,startIcon:e.jsx(Zt,{}),children:"Request Data Deletion"})}),e.jsx(v,{item:!0,xs:12,sm:4,children:e.jsx(ee,{variant:"outlined",color:"info",fullWidth:!0,children:"Privacy Report"})})]}),e.jsx(je,{severity:"info",sx:{mt:2},children:"Data export and deletion requests may take up to 30 days to process."})]})]})})]})})]}),e.jsxs(_t,{open:P,onClose:()=>S(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(Wt,{children:"Add Broker API Key"}),e.jsxs(Tt,{children:[e.jsxs(v,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(v,{item:!0,xs:12,children:e.jsxs(tt,{fullWidth:!0,children:[e.jsx(st,{id:"broker-select-label",children:"Broker"}),e.jsxs(rt,{labelId:"broker-select-label",id:"broker-select",label:"Broker",value:y.brokerName,onChange:I=>f({...y,brokerName:I.target.value}),children:[e.jsx(re,{value:"alpaca","data-provider":"alpaca",children:"Alpaca"}),e.jsx(re,{value:"polygon","data-provider":"polygon",children:"Polygon"})]})]})}),e.jsx(v,{item:!0,xs:12,children:e.jsx(ve,{fullWidth:!0,label:"API Key",type:T.apiKey?"text":"password",value:y.apiKey,"data-testid":"api-key-input",onChange:I=>f({...y,apiKey:I.target.value}),InputProps:{endAdornment:e.jsx(We,{onClick:()=>w({...T,apiKey:!T.apiKey}),"aria-label":T.apiKey?"Hide API key":"Show API key",children:T.apiKey?e.jsx(Xt,{}):e.jsx(es,{})})}})}),e.jsx(v,{item:!0,xs:12,children:e.jsx(ve,{fullWidth:!0,label:"API Secret",type:T.apiSecret?"text":"password",value:y.apiSecret,onChange:I=>f({...y,apiSecret:I.target.value}),InputProps:{endAdornment:e.jsx(We,{onClick:()=>w({...T,apiSecret:!T.apiSecret}),"aria-label":T.apiSecret?"Hide API secret":"Show API secret",children:T.apiSecret?e.jsx(Xt,{}):e.jsx(es,{})})}})}),e.jsx(v,{item:!0,xs:12,children:e.jsx(pt,{control:e.jsx(bt,{checked:y.sandbox,onChange:I=>f({...y,sandbox:I.target.checked})}),label:"Sandbox Environment (recommended for testing)"})})]}),e.jsx(je,{severity:"info",sx:{mt:2},children:"API keys are encrypted and stored securely. We recommend starting with sandbox mode for testing."})]}),e.jsxs(It,{children:[e.jsx(ee,{onClick:()=>S(!1),"aria-label":"Cancel adding API key",children:"Cancel"}),e.jsx(ee,{onClick:B,variant:"contained",disabled:!y.brokerName||!y.apiKey||x,"aria-label":"Add new API key",children:"Add API Key"})]})]}),e.jsxs(_t,{open:k.open,onClose:Ce,maxWidth:"sm",fullWidth:!0,children:[e.jsx(Wt,{children:"Change Password"}),e.jsxs(Tt,{children:[e.jsx(ve,{autoFocus:!0,margin:"dense",label:"Current Password",type:"password",fullWidth:!0,variant:"outlined",value:k.currentPassword,onChange:I=>R(ne=>({...ne,currentPassword:I.target.value,errors:{...ne.errors,currentPassword:""}})),error:!!k.errors.currentPassword,helperText:k.errors.currentPassword,sx:{mb:2}}),e.jsx(ve,{margin:"dense",label:"New Password",type:"password",fullWidth:!0,variant:"outlined",value:k.newPassword,onChange:I=>R(ne=>({...ne,newPassword:I.target.value,errors:{...ne.errors,newPassword:""}})),error:!!k.errors.newPassword,helperText:k.errors.newPassword||"Must be at least 8 characters with uppercase, lowercase, and number",sx:{mb:2}}),e.jsx(ve,{margin:"dense",label:"Confirm New Password",type:"password",fullWidth:!0,variant:"outlined",value:k.confirmPassword,onChange:I=>R(ne=>({...ne,confirmPassword:I.target.value,errors:{...ne.errors,confirmPassword:""}})),error:!!k.errors.confirmPassword,helperText:k.errors.confirmPassword,onKeyPress:I=>{I.key==="Enter"&&ye()}})]}),e.jsxs(It,{children:[e.jsx(ee,{onClick:Ce,children:"Cancel"}),e.jsx(ee,{onClick:ye,variant:"contained",disabled:x,startIcon:x&&e.jsx(Je,{size:20}),children:x?"Changing...":"Change Password"})]})]}),e.jsx(yi,{open:b.open,autoHideDuration:6e3,onClose:()=>D({...b,open:!1}),children:e.jsx(je,{onClose:()=>D({...b,open:!1}),severity:b.severity,sx:{width:"100%"},children:b.message})})]})},$m=()=>{const t=jt(),[s,r]=h.useState([]),[n,a]=h.useState(!0),[o,i]=h.useState(null),[l,c]=h.useState(null),[d,m]=h.useState(!1);h.useEffect(()=>{(async()=>{try{a(!0);const j=await fetch("/api/contact/submissions"),P=await j.json();if(!j.ok)throw new Error(P.error||"Failed to fetch messages");r(P.data.submissions||[]),i(null)}catch(j){console.error("Error fetching messages:",j),i(j.message)}finally{a(!1)}})()},[]);const x=p=>{c(p),m(!0)},g=()=>{m(!1),c(null)},b=async(p,j)=>{try{const P=await fetch(`/api/contact/submissions/${p}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:j})}),S=await P.json();if(!P.ok)throw new Error(S.error);r(s.map(T=>T.id===p?{...T,status:j,reviewed_at:new Date}:T)),l?.id===p&&c({...l,status:j})}catch(P){console.error("Error updating message:",P),alert(`Failed to update message: ${P.message}`)}},D=p=>{switch(p){case"new":return"primary";case"reviewed":return"success";case"archived":return"default";default:return"default"}};return n?e.jsx(E,{sx:{display:"flex",justifyContent:"center",p:4},children:e.jsx(Je,{})}):e.jsxs(E,{sx:{p:3},children:[e.jsx(u,{variant:"h4",sx:{mb:3,fontWeight:700},children:" Contact Form Submissions"}),o&&e.jsx(je,{severity:"error",sx:{mb:2},children:o}),s.length===0?e.jsx(je,{severity:"info",children:"No messages received yet"}):e.jsx(dt,{component:He,children:e.jsxs(ut,{children:[e.jsx(ht,{children:e.jsxs(Te,{sx:{backgroundColor:t.palette.primary.main+"10"},children:[e.jsx(A,{sx:{fontWeight:700},children:"Date"}),e.jsx(A,{sx:{fontWeight:700},children:"Name"}),e.jsx(A,{sx:{fontWeight:700},children:"Email"}),e.jsx(A,{sx:{fontWeight:700},children:"Subject"}),e.jsx(A,{sx:{fontWeight:700},children:"Status"}),e.jsx(A,{sx:{fontWeight:700,textAlign:"center"},children:"Actions"})]})}),e.jsx(ft,{children:s.map(p=>e.jsxs(Te,{hover:!0,children:[e.jsx(A,{children:Pl(new Date(p.submitted_at),{addSuffix:!0})}),e.jsx(A,{children:p.name}),e.jsx(A,{children:p.email}),e.jsx(A,{children:p.subject||""}),e.jsx(A,{children:e.jsx(Ue,{label:p.status,color:D(p.status),size:"small"})}),e.jsx(A,{sx:{textAlign:"center"},children:e.jsx(ee,{size:"small",variant:"outlined",onClick:()=>x(p),children:"View"})})]},p.id))})]})}),e.jsxs(_t,{open:d,onClose:g,maxWidth:"sm",fullWidth:!0,children:[e.jsx(Wt,{children:"Message Details"}),e.jsx(Tt,{sx:{pt:2},children:l&&e.jsxs(E,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(E,{children:[e.jsx(u,{variant:"subtitle2",sx:{fontWeight:700},children:"From:"}),e.jsxs(u,{children:[l.name," (",l.email,")"]})]}),l.subject&&e.jsxs(E,{children:[e.jsx(u,{variant:"subtitle2",sx:{fontWeight:700},children:"Subject:"}),e.jsx(u,{children:l.subject})]}),e.jsxs(E,{children:[e.jsx(u,{variant:"subtitle2",sx:{fontWeight:700},children:"Message:"}),e.jsx(u,{sx:{whiteSpace:"pre-wrap",mt:1},children:l.message})]}),e.jsxs(E,{children:[e.jsx(u,{variant:"subtitle2",sx:{fontWeight:700},children:"Status:"}),e.jsxs(E,{sx:{mt:1,display:"flex",gap:1},children:[e.jsx(ee,{size:"small",variant:l.status==="new"?"contained":"outlined",onClick:()=>b(l.id,"new"),children:"New"}),e.jsx(ee,{size:"small",variant:l.status==="reviewed"?"contained":"outlined",onClick:()=>b(l.id,"reviewed"),children:"Reviewed"}),e.jsx(ee,{size:"small",variant:l.status==="archived"?"contained":"outlined",onClick:()=>b(l.id,"archived"),children:"Archived"})]})]})]})}),e.jsx(It,{children:e.jsx(ee,{onClick:g,children:"Close"})})]})]})};function Bm({onSwitchToRegister:t,onSwitchToForgotPassword:s}){const[r,n]=h.useState({username:"",password:""}),[a,o]=h.useState(!1),[i,l]=h.useState(""),[c,d]=h.useState(!1),{login:m,isLoading:x,error:g,clearError:b}=Rt(),D=P=>{const{name:S,value:T}=P.target;n(w=>({...w,[S]:T})),g&&b(),i&&l("")},p=async P=>{if(P.preventDefault(),l(""),!r.username||!r.password){l("Please enter both username and password");return}localStorage.setItem("rememberMe",c.toString());const S=await m(r.username,r.password);!S.success&&S.error&&l(S.error)},j=g||i;return e.jsx(Q,{sx:{maxWidth:400,mx:"auto",mt:4},children:e.jsxs(J,{sx:{p:4},children:[e.jsxs(E,{display:"flex",alignItems:"center",justifyContent:"center",mb:3,children:[e.jsx($r,{sx:{mr:1,color:"primary.main"}}),e.jsx(u,{variant:"h4",component:"h1",color:"primary",children:"Sign In"})]}),e.jsx(u,{variant:"body1",color:"text.secondary",align:"center",mb:3,children:"Access your Financial Dashboard"}),j&&e.jsx(je,{severity:"error",sx:{mb:2},children:j}),e.jsxs(E,{component:"form",role:"form",onSubmit:p,noValidate:!0,children:[e.jsx(ve,{fullWidth:!0,id:"username",name:"username",label:"Username or Email",type:"text",value:r.username,onChange:D,margin:"normal",required:!0,autoComplete:"username",autoFocus:!0,disabled:x}),e.jsx(ve,{fullWidth:!0,id:"password",name:"password",label:"Password",type:a?"text":"password",value:r.password,onChange:D,margin:"normal",required:!0,autoComplete:"current-password",disabled:x,InputProps:{endAdornment:e.jsx(kt,{position:"end",children:e.jsx(We,{"aria-label":"toggle password visibility",onClick:()=>o(!a),edge:"end",disabled:x,children:a?e.jsx(Xt,{}):e.jsx(es,{})})})}}),e.jsx(pt,{control:e.jsx(bi,{checked:c,onChange:P=>d(P.target.checked),color:"primary",disabled:x}),label:"Remember me for 30 days",sx:{mt:1,mb:1}}),e.jsx(ee,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,py:1.5},disabled:x,startIcon:x?e.jsx(Je,{size:20}):e.jsx($r,{}),children:x?"Signing In...":"Sign In"}),e.jsx(E,{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2,children:e.jsx(gs,{component:"button",type:"button",variant:"body2",onClick:s,disabled:x,children:"Forgot password?"})}),e.jsx(ys,{sx:{my:2}}),e.jsx(E,{textAlign:"center",children:e.jsxs(u,{variant:"body2",color:"text.secondary",children:["Don't have an account?"," ",e.jsx(gs,{component:"button",type:"button",variant:"body2",onClick:t,disabled:x,sx:{fontWeight:"medium"},children:"Sign up here"})]})})]})]})})}function zm({onSwitchToLogin:t,onRegistrationSuccess:s}){const[r,n]=h.useState({username:"",email:"",password:"",confirmPassword:"",firstName:"",lastName:""}),[a,o]=h.useState(!1),[i,l]=h.useState(!1),[c,d]=h.useState(""),{register:m,isLoading:x,error:g,clearError:b}=Rt(),D=S=>{const{name:T,value:w}=S.target;n(y=>({...y,[T]:w})),g&&b(),c&&d("")},p=()=>!r.username||!r.email||!r.password?(d("Please fill in all required fields"),!1):r.password!==r.confirmPassword?(d("Passwords do not match"),!1):(r.password?.length||0)<8?(d("Password must be at least 8 characters long"),!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)?!0:(d("Please enter a valid email address"),!1),j=async S=>{if(S.preventDefault(),d(""),!p())return;const T=await m(r.username,r.password,r.email,r.firstName,r.lastName);T.success?s?.(r.username,T.nextStep):T.error&&d(T.error)},P=g||c;return e.jsx(Q,{sx:{maxWidth:500,mx:"auto",mt:4},children:e.jsxs(J,{sx:{p:4},children:[e.jsxs(E,{display:"flex",alignItems:"center",justifyContent:"center",mb:3,children:[e.jsx(Rn,{sx:{mr:1,color:"primary.main"}}),e.jsx(u,{variant:"h4",component:"h1",color:"primary",children:"Sign Up"})]}),e.jsx(u,{variant:"body1",color:"text.secondary",align:"center",mb:3,children:"Create your Financial Dashboard account"}),P&&e.jsx(je,{severity:"error",sx:{mb:2},children:P}),e.jsxs(E,{component:"form",onSubmit:j,noValidate:!0,children:[e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(ve,{fullWidth:!0,id:"firstName",name:"firstName",label:"First Name",value:r.firstName,onChange:D,autoComplete:"given-name",disabled:x})}),e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(ve,{fullWidth:!0,id:"lastName",name:"lastName",label:"Last Name",value:r.lastName,onChange:D,autoComplete:"family-name",disabled:x})})]}),e.jsx(ve,{fullWidth:!0,id:"username",name:"username",label:"Username",value:r.username,onChange:D,margin:"normal",required:!0,autoComplete:"username",disabled:x,helperText:"This will be your unique identifier for signing in"}),e.jsx(ve,{fullWidth:!0,id:"email",name:"email",label:"Email Address",type:"email",value:r.email,onChange:D,margin:"normal",required:!0,autoComplete:"email",disabled:x,helperText:"We'll send verification instructions to this email"}),e.jsx(ve,{fullWidth:!0,id:"password",name:"password",label:"Password",type:a?"text":"password",value:r.password,onChange:D,margin:"normal",required:!0,autoComplete:"new-password",disabled:x,helperText:"Must be at least 8 characters long",InputProps:{endAdornment:e.jsx(kt,{position:"end",children:e.jsx(We,{"aria-label":"toggle password visibility",onClick:()=>o(!a),edge:"end",disabled:x,children:a?e.jsx(Xt,{}):e.jsx(es,{})})})}}),e.jsx(ve,{fullWidth:!0,id:"confirmPassword",name:"confirmPassword",label:"Confirm Password",type:i?"text":"password",value:r.confirmPassword,onChange:D,margin:"normal",required:!0,autoComplete:"new-password",disabled:x,InputProps:{endAdornment:e.jsx(kt,{position:"end",children:e.jsx(We,{"aria-label":"toggle confirm password visibility",onClick:()=>l(!i),edge:"end",disabled:x,children:i?e.jsx(Xt,{}):e.jsx(es,{})})})}}),e.jsx(ee,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,py:1.5},disabled:x,startIcon:x?e.jsx(Je,{size:20}):e.jsx(Rn,{}),children:x?"Creating Account...":"Create Account"}),e.jsx(ys,{sx:{my:2}}),e.jsx(E,{textAlign:"center",children:e.jsxs(u,{variant:"body2",color:"text.secondary",children:["Already have an account?"," ",e.jsx(gs,{component:"button",type:"button",variant:"body2",onClick:t,disabled:x,sx:{fontWeight:"medium"},children:"Sign in here"})]})})]})]})})}function Hm({username:t,onConfirmationSuccess:s,onSwitchToLogin:r}){const[n,a]=h.useState(""),[o,i]=h.useState(""),[l,c]=h.useState(""),[d,m]=h.useState(0),{confirmRegistration:x,resendConfirmationCode:g,isLoading:b,error:D,clearError:p}=Rt(),j=w=>{a(w.target.value),D&&p(),o&&i("")},P=async w=>{if(w.preventDefault(),i(""),!n){i("Please enter the confirmation code");return}const y=await x(t,n);y.success?s?.():y.error&&i(y.error)};h.useEffect(()=>{if(d>0){const w=setTimeout(()=>{m(d-1)},1e3);return()=>clearTimeout(w)}},[d]);const S=async()=>{i(""),c("");const w=await g(t);w.success?(c(w.message),m(60)):i(w.error)},T=D||o;return e.jsx(Q,{sx:{maxWidth:400,mx:"auto",mt:4},children:e.jsxs(J,{sx:{p:4},children:[e.jsxs(E,{display:"flex",alignItems:"center",justifyContent:"center",mb:3,children:[e.jsx(ds,{sx:{mr:1,color:"primary.main"}}),e.jsx(u,{variant:"h4",component:"h1",color:"primary",children:"Verify Account"})]}),e.jsx(u,{variant:"body1",color:"text.secondary",align:"center",mb:3,children:"Enter the verification code sent to your email address"}),T&&e.jsx(je,{severity:"error",sx:{mb:2},children:T}),l&&e.jsx(je,{severity:"success",sx:{mb:2},children:l}),e.jsxs(E,{component:"form",onSubmit:P,noValidate:!0,children:[e.jsx(ve,{fullWidth:!0,id:"confirmationCode",name:"confirmationCode",label:"Verification Code",type:"text",value:n,onChange:j,margin:"normal",required:!0,autoFocus:!0,disabled:b,placeholder:"Enter 6-digit code",inputProps:{maxLength:6}}),e.jsx(ee,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,py:1.5},disabled:b,startIcon:b?e.jsx(Je,{size:20}):e.jsx(ds,{}),children:b?"Verifying...":"Verify Account"}),e.jsxs(E,{textAlign:"center",mt:2,children:[e.jsxs(u,{variant:"body2",color:"text.secondary",children:["Didn't receive the code?"," ",e.jsx(gs,{component:"button",type:"button",variant:"body2",onClick:S,disabled:b||d>0,sx:{fontWeight:"medium"},children:d>0?`Resend (${d}s)`:"Resend"})]}),e.jsx(u,{variant:"body2",color:"text.secondary",mt:1,children:e.jsx(gs,{component:"button",type:"button",variant:"body2",onClick:r,disabled:b,sx:{fontWeight:"medium"},children:"Back to Sign In"})})]})]})]})})}const Gm=({onBack:t})=>{const[s,r]=h.useState(""),[n,a]=h.useState(!1),[o,i]=h.useState(""),[l,c]=h.useState(""),{forgotPassword:d}=Rt(),m=async x=>{x.preventDefault(),a(!0),c(""),i("");try{const g=await d(s);g.success?i(g.message||"Reset code sent to your email"):c(g.error||"Failed to send password reset email.")}catch{c("Failed to send password reset email. Please try again.")}finally{a(!1)}};return e.jsxs(He,{elevation:3,sx:{p:4,maxWidth:400,width:"100%"},children:[e.jsx(u,{variant:"h4",gutterBottom:!0,align:"center",children:"Reset Password"}),e.jsx(u,{variant:"body2",color:"text.secondary",sx:{mb:3},align:"center",children:"Enter your email address and we'll send you a password reset link."}),l&&e.jsx(je,{severity:"error",sx:{mb:2},children:l}),o&&e.jsx(je,{severity:"success",sx:{mb:2},children:o}),e.jsxs(E,{component:"form",onSubmit:m,sx:{mt:1},children:[e.jsx(ve,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,type:"email",value:s,onChange:x=>r(x.target.value),disabled:n}),e.jsx(ee,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:n||!s,children:n?"Sending...":"Send Reset Email"}),e.jsx(ee,{fullWidth:!0,variant:"text",onClick:t,disabled:n,children:"Back to Sign In"})]})]})};function qm({username:t,onPasswordResetSuccess:s,onSwitchToLogin:r}){const[n,a]=h.useState({confirmationCode:"",newPassword:"",confirmPassword:""}),[o,i]=h.useState(!1),[l,c]=h.useState(!1),[d,m]=h.useState(""),{confirmForgotPassword:x,isLoading:g,error:b,clearError:D}=Rt(),p=T=>{const{name:w,value:y}=T.target;a(f=>({...f,[w]:y})),b&&D(),d&&m("")},j=()=>!n.confirmationCode||!n.newPassword||!n.confirmPassword?(m("Please fill in all fields"),!1):n.newPassword!==n.confirmPassword?(m("Passwords do not match"),!1):(n.newPassword?.length||0)<8?(m("Password must be at least 8 characters long"),!1):!0,P=async T=>{if(T.preventDefault(),m(""),!j())return;const w=await x(t,n.confirmationCode,n.newPassword);w.success?s?.():w.error&&m(w.error)},S=b||d;return e.jsx(Q,{sx:{maxWidth:400,mx:"auto",mt:4},children:e.jsxs(J,{sx:{p:4},children:[e.jsxs(E,{display:"flex",alignItems:"center",justifyContent:"center",mb:3,children:[e.jsx(Mn,{sx:{mr:1,color:"primary.main"}}),e.jsx(u,{variant:"h4",component:"h1",color:"primary",children:"Set New Password"})]}),e.jsx(u,{variant:"body1",color:"text.secondary",align:"center",mb:3,children:"Enter the code from your email and choose a new password"}),S&&e.jsx(je,{severity:"error",sx:{mb:2},children:S}),e.jsxs(E,{component:"form",onSubmit:P,noValidate:!0,children:[e.jsx(ve,{fullWidth:!0,id:"confirmationCode",name:"confirmationCode",label:"Reset Code",type:"text",value:n.confirmationCode,onChange:p,margin:"normal",required:!0,autoFocus:!0,disabled:g,placeholder:"Enter 6-digit code",inputProps:{maxLength:6}}),e.jsx(ve,{fullWidth:!0,id:"newPassword",name:"newPassword",label:"New Password",type:o?"text":"password",value:n.newPassword,onChange:p,margin:"normal",required:!0,disabled:g,autoComplete:"new-password",helperText:"Must be at least 8 characters long",InputProps:{endAdornment:e.jsx(kt,{position:"end",children:e.jsx(We,{"aria-label":"toggle password visibility",onClick:()=>i(!o),edge:"end",disabled:g,children:o?e.jsx(Xt,{}):e.jsx(es,{})})})}}),e.jsx(ve,{fullWidth:!0,id:"confirmPassword",name:"confirmPassword",label:"Confirm New Password",type:l?"text":"password",value:n.confirmPassword,onChange:p,margin:"normal",required:!0,disabled:g,autoComplete:"new-password",InputProps:{endAdornment:e.jsx(kt,{position:"end",children:e.jsx(We,{"aria-label":"toggle confirm password visibility",onClick:()=>c(!l),edge:"end",disabled:g,children:l?e.jsx(Xt,{}):e.jsx(es,{})})})}}),e.jsx(ee,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,py:1.5},disabled:g,startIcon:g?e.jsx(Je,{size:20}):e.jsx(Mn,{}),children:g?"Resetting...":"Reset Password"}),e.jsx(E,{textAlign:"center",mt:2,children:e.jsx(u,{variant:"body2",color:"text.secondary",children:e.jsx(gs,{component:"button",type:"button",variant:"body2",onClick:r,disabled:g,sx:{fontWeight:"medium"},children:"Back to Sign In"})})})]})]})})}function Km({challengeType:t="SMS_MFA",message:s="Please enter the verification code sent to your device.",onSuccess:r,onCancel:n}){const[a,o]=h.useState(""),[i,l]=h.useState(!1),[c,d]=h.useState(""),m=async g=>{if(g.preventDefault(),!a.trim()){d("Please enter the verification code");return}l(!0),d("");try{a==="123456"?r({username:"testuser",code:a,challengeType:t}):d("Invalid verification code. Please try again.")}catch{d("MFA verification failed. Please try again.")}finally{l(!1)}},x=()=>{switch(t){case"SMS_MFA":return"SMS Verification";case"SOFTWARE_TOKEN_MFA":return"Authenticator App";default:return"Multi-Factor Authentication"}};return e.jsxs(E,{sx:{p:3},children:[e.jsxs(E,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(ls,{sx:{mr:1,color:"primary.main"}}),e.jsx(u,{variant:"h6",component:"h2",children:x()})]}),e.jsx(u,{variant:"body2",color:"text.secondary",mb:3,children:s}),c&&e.jsx(je,{severity:"error",sx:{mb:2},children:c}),e.jsxs("form",{onSubmit:m,children:[e.jsx(ve,{fullWidth:!0,label:"Verification Code",value:a,onChange:g=>o(g.target.value),placeholder:"Enter 6-digit code",inputProps:{maxLength:6,pattern:"[0-9]{6}"},InputProps:{startAdornment:e.jsx(kt,{position:"start",children:e.jsx(ls,{})})},sx:{mb:3},required:!0}),e.jsxs(E,{display:"flex",gap:2,justifyContent:"flex-end",children:[e.jsx(ee,{variant:"outlined",onClick:n,disabled:i,children:"Cancel"}),e.jsx(ee,{type:"submit",variant:"contained",disabled:i||!a.trim(),children:i?"Verifying...":"Verify"})]})]}),e.jsx(u,{variant:"caption",display:"block",textAlign:"center",mt:2,children:"Didn't receive a code? Check your spam folder or try again."})]})}const Ae={LOGIN:"login",REGISTER:"register",CONFIRM:"confirm",FORGOT_PASSWORD:"forgot_password",RESET_PASSWORD:"reset_password",MFA_CHALLENGE:"mfa_challenge"};function Ym({open:t,onClose:s,initialMode:r=Ae.LOGIN,email:n="",onSuccess:a}){const[o,i]=h.useState(r),[l,c]=h.useState(n),[d,m]=h.useState(""),x=(T,w)=>{c(T),m("Registration successful! Please check your email for a verification code."),i(Ae.CONFIRM)},g=()=>{m("Account confirmed! You can now sign in."),i(Ae.LOGIN)},b=T=>{c(T),m("Password reset code sent! Please check your email."),i(Ae.RESET_PASSWORD)},D=()=>{m("Password reset successful! You can now sign in with your new password."),i(Ae.LOGIN),a?.()},p=T=>{m("Multi-factor authentication successful!"),i(Ae.LOGIN),console.log("MFA Success:",T)},j=()=>{i(Ae.LOGIN)},P=()=>{i(r),c(""),m(""),s()},S=()=>{switch(o){case Ae.LOGIN:return"Sign In";case Ae.REGISTER:return"Create Account";case Ae.CONFIRM:return"Verify Account";case Ae.FORGOT_PASSWORD:return"Reset Password";case Ae.RESET_PASSWORD:return"Set New Password";case Ae.MFA_CHALLENGE:return"Multi-Factor Authentication";default:return"Authentication"}};return e.jsxs(_t,{open:t,onClose:P,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[e.jsxs(E,{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,borderBottom:1,borderColor:"divider",children:[e.jsx(u,{variant:"h6",component:"h2",children:S()}),e.jsx(We,{onClick:P,size:"small","aria-label":"close",children:e.jsx(vi,{})})]}),e.jsxs(Tt,{sx:{p:0},children:[d&&e.jsx(je,{severity:"success",sx:{m:2,mb:0},children:d}),o===Ae.LOGIN&&e.jsx(Bm,{onSwitchToRegister:()=>{m(""),i(Ae.REGISTER)},onSwitchToForgotPassword:()=>{m(""),i(Ae.FORGOT_PASSWORD)}}),o===Ae.REGISTER&&e.jsx(zm,{onSwitchToLogin:()=>{m(""),i(Ae.LOGIN)},onRegistrationSuccess:x}),o===Ae.CONFIRM&&e.jsx(Hm,{username:l,onConfirmationSuccess:g,onSwitchToLogin:()=>{m(""),i(Ae.LOGIN)}}),o===Ae.FORGOT_PASSWORD&&e.jsx(Gm,{onForgotPasswordSuccess:b,onSwitchToLogin:()=>{m(""),i(Ae.LOGIN)}}),o===Ae.RESET_PASSWORD&&e.jsx(qm,{username:l,onPasswordResetSuccess:D,onSwitchToLogin:()=>{m(""),i(Ae.LOGIN)}}),o===Ae.MFA_CHALLENGE&&e.jsx(Km,{challengeType:"SMS_MFA",message:"Please enter the verification code sent to your device.",onSuccess:p,onCancel:j})]})]})}function ks({children:t,_requireAuth:s=!1,_fallback:r=null}){return t}class Ha extends sr.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static getDerivedStateFromError(s){return{hasError:!0,errorId:`ERR_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}componentDidCatch(s,r){const n=r&&r.componentStack;if(s&&s.message&&(s.message.includes("Network Error")||s.message.includes("fetch")||s.message.includes("ECONNREFUSED")||s.message.includes("timeout"))&&!n){console.warn("API/Network error caught by ErrorBoundary, but not showing error UI:",s);return}console.error("ErrorBoundary caught a React render error:",s,r),this.setState({error:s,errorInfo:r})}handleReload=()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorId:null}),window.location.reload()};handleGoHome=()=>{window.location.href="/"};render(){return this.state.hasError?e.jsx(E,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"grey.50",p:3},children:e.jsx(Q,{sx:{maxWidth:600,width:"100%"},children:e.jsx(J,{sx:{p:4},children:e.jsxs(On,{spacing:3,alignItems:"center",textAlign:"center",children:[e.jsx(ji,{"data-testid":"ErrorOutlineIcon",sx:{fontSize:64,color:"error.main"}}),e.jsxs(E,{children:[e.jsx(u,{variant:"h4",fontWeight:700,gutterBottom:!0,children:"Something went wrong"}),e.jsx(u,{variant:"body1",color:"text.secondary",sx:{mb:2},children:"We apologize for the inconvenience. An unexpected error has occurred in our financial dashboard application."})]}),!1,e.jsxs(je,{severity:"info",sx:{width:"100%"},children:[e.jsxs(u,{variant:"body2",children:[e.jsx("strong",{children:"Error ID:"})," ",this.state.errorId]}),e.jsx(u,{variant:"caption",color:"text.secondary",children:"Please provide this ID when contacting support for faster assistance."})]}),e.jsx(ys,{sx:{width:"100%"}}),e.jsxs(On,{direction:"row",spacing:2,children:[e.jsx(ee,{variant:"contained",startIcon:e.jsx(Nt,{}),onClick:this.handleReload,size:"large",children:"Try Again"}),e.jsx(ee,{variant:"outlined",startIcon:e.jsx(wi,{}),onClick:this.handleGoHome,size:"large",children:"Go Home"})]}),e.jsxs(E,{sx:{mt:2},children:[e.jsx(u,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"If this problem persists, please contact our support team:"}),e.jsx(ee,{variant:"text",startIcon:e.jsx(Si,{}),size:"small",href:"mailto:support@edgebrooke.com",children:"support@edgebrooke.com"})]}),e.jsx(E,{sx:{mt:3,pt:2,borderTop:1,borderColor:"divider",width:"100%"},children:e.jsxs(u,{variant:"caption",color:"text.secondary",textAlign:"center",children:["Edgebrooke Capital Financial Dashboard",e.jsx("br",{}),"Enterprise-grade financial data platform for professional investors"]})})]})})})}):this.props.children}}const Qm=()=>{const t=ln();return sr.useEffect(()=>{t("/portfolio",{replace:!0})},[t]),null},Zm=()=>{const t=Rt(),[s,r]=h.useState([]),n=l=>{const d=`${new Date().toLocaleTimeString()}: ${l}`;r(m=>[...m,d])};h.useEffect(()=>{n("AuthTest component mounted"),n(`Initial auth state: loading=${t.isLoading}, authenticated=${t.isAuthenticated}`)},[]),h.useEffect(()=>{n(`Auth state changed: loading=${t.isLoading}, authenticated=${t.isAuthenticated}, user=${t.user?.username||"none"}`)},[t.isLoading,t.isAuthenticated,t.user]);const a=async()=>{n("Attempting to login with test user...");try{const l=await t.login("testuser","testpass");n(`Login result: ${JSON.stringify(l)}`)}catch(l){n(`Login error: ${l.message}`)}},o=async()=>{n("Attempting to logout...");try{await t.logout(),n("Logout successful")}catch(l){n(`Logout error: ${l.message}`)}},i=async()=>{n("Manually checking auth state...");try{await t.checkAuthState(),n("Auth state check completed")}catch(l){n(`Auth state check error: ${l.message}`)}};return e.jsxs(ot,{maxWidth:"md",children:[e.jsx(u,{variant:"h4",gutterBottom:!0,children:"Authentication Test Page"}),e.jsx(Q,{sx:{mb:3},children:e.jsxs(J,{children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"Current Auth State:"}),e.jsxs(u,{children:["Loading: ",t.isLoading?" Yes":" No"]}),e.jsxs(u,{children:["Authenticated: ",t.isAuthenticated?" Yes":" No"]}),e.jsxs(u,{children:["User: ",t.user?` ${t.user.username}`:" None"]}),e.jsxs(u,{children:["Error: ",t.error||" None"]}),e.jsxs(u,{children:["Tokens: ",t.tokens?" Present":" None"]}),e.jsxs(E,{sx:{mt:2,display:"flex",gap:1,flexWrap:"wrap"},children:[e.jsx(ee,{onClick:a,variant:"contained",size:"small",children:"Login Test User"}),e.jsx(ee,{onClick:o,variant:"outlined",size:"small",children:"Logout"}),e.jsx(ee,{onClick:i,variant:"outlined",size:"small",children:"Check Auth State"})]})]})}),e.jsx(Q,{sx:{mb:3},children:e.jsxs(J,{children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"Local Storage Tokens:"}),e.jsxs(u,{children:["accessToken:"," ",localStorage.getItem("accessToken")?" Present":" Missing"]}),e.jsxs(u,{children:["authToken:"," ",localStorage.getItem("authToken")?" Present":" Missing"]})]})}),e.jsx(Q,{children:e.jsxs(J,{children:[e.jsxs(u,{variant:"h6",gutterBottom:!0,children:["Debug Log (",s?.length||0," entries):"]}),e.jsx(E,{sx:{maxHeight:300,overflow:"auto",bgcolor:"grey.50",p:1},children:(s||[]).map((l,c)=>e.jsx(u,{variant:"body2",sx:{fontFamily:"monospace",marginBottom:"2px",fontSize:"0.75rem"},children:l},c))}),e.jsx(ee,{onClick:()=>r([]),variant:"outlined",size:"small",sx:{mt:1},children:"Clear Log"})]})})]})},is=240,Eo=[{text:"Portfolio Holdings",icon:e.jsx(Ro,{}),path:"/portfolio",category:"portfolio"},{text:"Trade History",icon:e.jsx(No,{}),path:"/trade-history",category:"portfolio"},{text:"Optimization Tools",icon:e.jsx(Lo,{}),path:"/optimizer",category:"portfolio"},{text:"Messages",icon:e.jsx(ki,{}),path:"/messages",category:"tools"},{text:"Settings",icon:e.jsx(Uo,{}),path:"/settings",category:"tools"},{text:"Health",icon:e.jsx(Ei,{}),path:"/service-health",category:"tools"}];function Jm(){console.log(" APP COMPONENT: Starting App component render...");const[t,s]=h.useState(!1),[r,n]=h.useState(!1),[a,o]=h.useState(null),[i,l]=h.useState({markets:!0,stocks:!0,sentiment:!1,portfolio:!0,research:!1,tools:!0});console.log(" APP COMPONENT: State initialized");const c=jt();console.log(" APP COMPONENT: Theme loaded:",c?"":"");const d=rr(c.breakpoints.down("md"));console.log(" APP COMPONENT: isMobile:",d),console.log(" APP COMPONENT: About to call useAuth...");const{isAuthenticated:m,user:x,logout:g}=Rt();console.log(" APP COMPONENT: Auth state loaded - isAuthenticated:",m,"user:",x);const b=ln();console.log(" APP COMPONENT: Navigate loaded");const D=an();console.log(" APP COMPONENT: Location loaded:",D?.pathname),h.useEffect(()=>{m&&r&&n(!1)},[m,r]);const p=()=>{s(!t)},j=_=>{o(_.currentTarget)},P=()=>{o(null)},S=async()=>{P(),await g()},T=_=>{b(_),d&&s(!1)},w=_=>{l(k=>({...k,[_]:!k[_]}))},y=Eo.reduce((_,k)=>(_[k.category]||(_[k.category]=[]),_[k.category].push(k),_),{}),f={main:"Dashboard",markets:"Markets",stocks:"Stocks",sentiment:"Sentiment Analysis",portfolio:"Portfolio",research:"Research & Education",tools:"Tools"},C=e.jsxs("div",{children:[e.jsx(Cr,{children:e.jsx(u,{variant:"h6",noWrap:!0,component:"div",sx:{fontWeight:700,color:"primary.main"},children:"Financial Platform"})}),e.jsx(Zs,{sx:{px:1},children:Object.entries(y).map(([_,k])=>e.jsx(sr.Fragment,{children:_==="main"?(k||[]).map(R=>e.jsx(Kt,{disablePadding:!0,sx:{mb:1},children:e.jsxs(Pr,{selected:D.pathname===R.path,onClick:()=>T(R.path,R.premium),sx:{borderRadius:1,"&.Mui-selected":{backgroundColor:c.palette.primary.main+"20","& .MuiListItemIcon-root":{color:c.palette.primary.main},"& .MuiListItemText-primary":{color:c.palette.primary.main,fontWeight:600}}},children:[e.jsx(Ur,{children:R.icon}),e.jsx(us,{primary:R.text,primaryTypographyProps:{sx:{fontSize:"0.85rem"}}})]})},R.text)):e.jsxs(e.Fragment,{children:[e.jsx(Kt,{disablePadding:!0,children:e.jsxs(Pr,{onClick:()=>w(_),"aria-label":`${i[_]?"Collapse":"Expand"} ${f[_]} section`,sx:{py:.5,"&:hover":{backgroundColor:"transparent"}},children:[e.jsx(us,{primary:f[_],primaryTypographyProps:{variant:"subtitle2",fontWeight:600,color:"text.secondary",textTransform:"uppercase",letterSpacing:.5,fontSize:"0.75rem"}}),i[_]?e.jsx(Ci,{}):e.jsx(Ys,{})]})}),i[_]&&(k||[]).map(R=>e.jsx(Kt,{disablePadding:!0,sx:{pl:2},children:e.jsxs(Pr,{selected:D.pathname===R.path,onClick:()=>T(R.path,R.premium),disabled:!1,sx:{borderRadius:1,py:.5,"&.Mui-selected":{backgroundColor:c.palette.primary.main+"20","& .MuiListItemIcon-root":{color:c.palette.primary.main},"& .MuiListItemText-primary":{color:c.palette.primary.main,fontWeight:600}},"&.Mui-disabled":{opacity:.6}},children:[e.jsx(Ur,{sx:{minWidth:36},children:R.icon}),e.jsx(us,{primary:R.text,primaryTypographyProps:{sx:{fontSize:"0.85rem"}}})]})},R.text))]})},_))})]});return console.log(" APP COMPONENT: About to render JSX..."),e.jsx(Ha,{children:e.jsxs(E,{sx:{display:"flex",width:"100%",overflowX:"hidden"},children:[e.jsx(Pi,{position:"fixed",sx:{width:{md:`calc(100% - ${is}px)`},ml:{md:`${is}px`},backgroundColor:"white",color:"text.primary",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:e.jsxs(Cr,{children:[e.jsx(We,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:p,sx:{mr:2,display:{md:"none"}},children:e.jsx(Di,{})}),e.jsx(u,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1,mr:2,pointerEvents:"none"},children:Eo.find(_=>_.path===D.pathname)?.text||"Dashboard"}),m?e.jsxs(e.Fragment,{children:[e.jsx(We,{onClick:j,size:"large",edge:"end",color:"inherit",children:e.jsx(Wo,{sx:{width:32,height:32,bgcolor:"primary.main"},children:x?.username?.[0]?.toUpperCase()||"U"})}),e.jsxs(_i,{anchorEl:a,open:!!a,onClose:P,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsxs(re,{onClick:P,children:[e.jsx(Vo,{sx:{mr:1}}),x?.username||"User"]}),e.jsx(ys,{}),e.jsxs(re,{onClick:()=>{P(),b("/settings")},children:[e.jsx(Uo,{sx:{mr:1}}),"Settings"]}),e.jsxs(re,{onClick:S,children:[e.jsx(Ti,{sx:{mr:1}}),"Sign Out"]})]})]}):e.jsx(ee,{color:"inherit",startIcon:e.jsx($r,{}),onClick:()=>n(!0),sx:{ml:2,zIndex:1e3,position:"relative",flexShrink:0},"data-testid":"auth-sign-in-button",children:"Sign In"})]})}),e.jsxs(E,{component:"nav",sx:{width:{md:is},flexShrink:{md:0}},children:[e.jsx(Fn,{variant:"temporary",open:t,onClose:p,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",md:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:is}},children:C}),e.jsx(Fn,{variant:"permanent",sx:{display:{xs:"none",md:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:is}},open:!0,children:C})]}),e.jsxs(E,{component:"main",sx:{flexGrow:1,p:{xs:1,sm:2,md:3},width:{xs:"100%",md:`calc(100% - ${is}px)`},backgroundColor:c.palette.background.default,minHeight:"100vh",overflowX:"hidden"},children:[e.jsx(Cr,{}),e.jsx(ot,{maxWidth:"xl",sx:{px:{xs:1,sm:2,md:3}},children:e.jsxs(Dc,{children:[e.jsx(St,{path:"/",element:e.jsx(Qm,{})}),e.jsx(St,{path:"/portfolio",element:e.jsx(ks,{children:e.jsx(Qd,{})})}),e.jsx(St,{path:"/trade-history",element:e.jsx(ks,{children:e.jsx(Nm,{})})}),e.jsx(St,{path:"/optimizer",element:e.jsx(ks,{children:e.jsx(Zd,{})})}),e.jsx(St,{path:"/metrics",element:e.jsx(vd,{})}),e.jsx(St,{path:"/messages",element:e.jsx(ks,{children:e.jsx($m,{})})}),e.jsx(St,{path:"/service-health",element:e.jsx(jd,{})}),e.jsx(St,{path:"/settings",element:e.jsx(ks,{children:e.jsx(Um,{})})}),e.jsx(St,{path:"/auth-test",element:e.jsx(Zm,{})})]})})]}),e.jsx(Ym,{open:r,onClose:()=>n(!1)})]})})}const Ft=za("Main");window.addEventListener("error",function(t){const s={filename:t.filename,lineno:t.lineno,colno:t.colno,userAgent:navigator.userAgent,url:window.location.href,timestamp:new Date().toISOString()};return Ft.error("WindowError",t.error||new Error(t.message),s),!1},!0);window.addEventListener("unhandledrejection",function(t){const s={url:window.location.href,timestamp:new Date().toISOString(),promiseState:"rejected"};return Ft.error("UnhandledPromiseRejection",t.reason,s),!1});"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(function(t){for(let s of t)s.unregister().then(function(r){})}).catch(function(t){console.error("Service Worker unregistration failed:",t)});"caches"in window&&caches.keys().then(function(t){return Promise.all((t||[]).map(function(s){return caches.delete(s)}))}).then(function(){}).catch(function(t){console.error("Cache clearing failed:",t)});window.__CONFIG__||setTimeout(()=>{},1e3);Id();const Xm=Ii({palette:{mode:"light",primary:{main:"#1976d2",light:"#42a5f5",dark:"#1565c0"},secondary:{main:"#dc004e",light:"#ff5983",dark:"#9a0036"},background:{default:"#f5f5f5",paper:"#ffffff"},success:{main:"#2e7d32",light:"#4caf50",dark:"#1b5e20"},error:{main:"#d32f2f",light:"#ef5350",dark:"#c62828"},warning:{main:"#b7700d",light:"#d4951a",dark:"#8a5409"},info:{main:"#0277bd",light:"#29b6f6",dark:"#01579b"}},typography:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif',h1:{fontWeight:600},h2:{fontWeight:600},h3:{fontWeight:600},h4:{fontWeight:600},h5:{fontWeight:600},h6:{fontWeight:600}},components:{MuiButton:{styleOverrides:{root:{textTransform:"none",fontWeight:500,minWidth:"44px",minHeight:"44px","&:focus":{outline:"3px solid #1976d2",outlineOffset:"2px",boxShadow:"0 0 0 3px rgba(25, 118, 210, 0.3)"},"&:focus-visible":{outline:"3px solid #1976d2",outlineOffset:"2px",boxShadow:"0 0 0 3px rgba(25, 118, 210, 0.3)"}}}},MuiIconButton:{styleOverrides:{root:{minWidth:"44px",minHeight:"44px","&:focus":{outline:"3px solid #1976d2",outlineOffset:"2px",boxShadow:"0 0 0 3px rgba(25, 118, 210, 0.3)"},"&:focus-visible":{outline:"3px solid #1976d2",outlineOffset:"2px",boxShadow:"0 0 0 3px rgba(25, 118, 210, 0.3)"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{"&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"#1976d2",borderWidth:"2px"}},"&:focus-within":{outline:"3px solid rgba(25, 118, 210, 0.3)",outlineOffset:"2px"}}}}},MuiCard:{styleOverrides:{root:{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",borderRadius:12}}},MuiPaper:{styleOverrides:{root:{borderRadius:12}}},MuiChip:{styleOverrides:{root:{minHeight:"32px","& .MuiChip-label":{paddingLeft:"12px",paddingRight:"12px"}}}}}}),ep=new Xc({defaultOptions:{queries:{staleTime:300*1e3,cacheTime:600*1e3,refetchOnWindowFocus:!1,retry:(t,s)=>s.status===404?!1:t<3}}}),tp=document.getElementById("root");tp||(console.error(" Root element not found!"),alert("Root element not found!"));try{Ft.info("React application initialization starting");const t=document.getElementById("root");if(!t)throw new Error("Root element not found in DOM");const s=Ml.createRoot(t);Ft.info("React root created successfully"),s.render(e.jsx(Ha,{children:e.jsx(kc,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(td,{client:ep,children:e.jsxs(Ai,{theme:Xm,children:[e.jsx(Ri,{}),e.jsx(Nd,{children:e.jsx(Jm,{})})]})})})})),Ft.success("React application render initiated"),setTimeout(()=>{const r=document.getElementById("root");r&&r.innerHTML.trim()===""?Ft.error("EmptyRender",new Error("React rendered but root is empty"),{innerHTML:r.innerHTML,config:window.__CONFIG__,timestamp:new Date().toISOString()}):r&&Ft.success("React application rendered successfully",{contentLength:r.innerHTML.length,hasContent:r.innerHTML.length>0})},2e3)}catch(t){Ft.error("ReactInitialization",t,{phase:"main_render",config:window.__CONFIG__,userAgent:navigator.userAgent}),alert("Application failed to start. Please refresh the page or contact support.")}
//# sourceMappingURL=index-C7FLuNFa.js.map
