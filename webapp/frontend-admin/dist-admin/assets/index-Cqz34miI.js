import{r as h,R as Qa,j as e,C as ot,A as Se,B as R,T as u,f as tn,g as St,P as Ye,G as v,h as be,F as et,I as tt,S as st,M as ee,i as rt,k as ft,l as mt,m as pt,n as ke,o as O,p as xt,q as ze,s as Ks,u as We,v as Io,w as G,x as Q,y as tr,z as te,E as gr,D as ds,H as Ft,J as Lr,K as Dn,L as Tn,N as yr,O as br,Q as Ys,U as vr,V as Za,W as Qt,X as kt,Y as Zt,Z as Et,$ as Ja,a0 as Xa,a1 as Vt,a2 as ei,a3 as sn,a4 as rn,a5 as Dt,a6 as sr,a7 as Vr,a8 as Wr,a9 as _n,aa as je,ab as Ao,ac as ys,c as Je,ad as N,ae as Te,af as Ge,ag as at,ah as it,ai as ve,aj as nt,ak as Ut,al as rr,am as kn,an as Jt,ao as ti,ap as si,aq as he,ar as jr,as as ri,at as Wt,au as ps,av as Qs,aw as qt,ax as F,ay as ni,az as xs,aA as oi,aB as Ro,aC as nn,aD as Pt,aE as Mo,aF as Oo,aG as ai,aH as ii,aI as Fo,aJ as li,aK as ks,aL as En,aM as ci,aN as In,aO as di,aP as No,aQ as ui,aR as Lo,aS as hi,aT as fi,aU as ls,aV as mi,aW as wr,aX as pi,aY as Vo,aZ as us,a_ as An,a$ as xi,b0 as gi,b1 as ut,b2 as bt,b3 as Ur,b4 as Xt,b5 as es,b6 as yi,b7 as $r,b8 as bi,b9 as gs,ba as Rn,bb as Mn,bc as vi,bd as On,be as ji,bf as wi,bg as Si,bh as Sr,bi as Cr,bj as Ci,bk as Pi,bl as Di,bm as Ti,bn as Wo,bo as _i,bp as Fn,bq as ki,br as Ei,bs as Ii,bt as Ai}from"./mui-iTsxuPBg.js";import{a as Ri,g as Fs,b as Mi}from"./vendor-Cd7-iaQF.js";import{a as Oi,b as Pr,l as Fi,p as Ni,f as Li,c as Vi,i as Wi,d as Ui,e as $i,g as Bi,h as zi,j as Hi,k as Gi,m as qi,n as Ki,o as Yi,q as Qi,r as Zi,s as Ji,t as Xi,u as el,v as tl,w as Dr,x as Tr,y as Nn,z as ws,A as Vs,B as Ln,C as sl,D as Vn,E as _r,F as Wn,G as kr,H as Un,I as Er,J as rl,K as nl,L as ol,M as al,N as il,O as ll,P as cl,Q as dl,R as ul,S as hl,T as fl,U as ml,V as pl,W as xl,X as gl,Y as yl,Z as bl,_ as vl,$ as jl,a0 as wl,a1 as Sl}from"./utils-CoM15Tv_.js";import{R as Ne,P as Uo,a as $o,C as Bo,T as Le,B as vt,b as qe,X as Ke,Y as Re,L as lt,c as Oe,d as Br,e as Kt,A as Cl,f as $n,g as Pl,h as Dl,i as Tl,j as _l,k as kl,l as zr}from"./charts-pRI59Fw-.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var Ws={},Bn;function El(){if(Bn)return Ws;Bn=1;var t=Ri();return Ws.createRoot=t.createRoot,Ws.hydrateRoot=t.hydrateRoot,Ws}var Il=El();const Al=Fs(Il);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Is(){return Is=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Is.apply(this,arguments)}var Nt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Nt||(Nt={}));const zn="popstate";function Rl(t){t===void 0&&(t={});function s(n,a){let{pathname:o,search:i,hash:l}=n.location;return Hr("",{pathname:o,search:i,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Ho(a)}return Ol(s,r,null,t)}function He(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function zo(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Ml(){return Math.random().toString(36).substr(2,8)}function Hn(t,s){return{usr:t.state,key:t.key,idx:s}}function Hr(t,s,r,n){return r===void 0&&(r=null),Is({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?bs(s):s,{state:r,key:s&&s.key||n||Ml()})}function Ho(t){let{pathname:s="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function bs(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(s.search=t.substr(n),t=t.substr(0,n)),t&&(s.pathname=t)}return s}function Ol(t,s,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:o=!1}=n,i=a.history,l=Nt.Pop,c=null,d=m();d==null&&(d=0,i.replaceState(Is({},i.state,{idx:d}),""));function m(){return(i.state||{idx:null}).idx}function x(){l=Nt.Pop;let w=m(),T=w==null?null:w-d;d=w,c&&c({action:l,location:p.location,delta:T})}function y(w,T){l=Nt.Push;let S=Hr(p.location,w,T);d=m()+1;let _=Hn(S,d),j=p.createHref(S);try{i.pushState(_,"",j)}catch(g){if(g instanceof DOMException&&g.name==="DataCloneError")throw g;a.location.assign(j)}o&&c&&c({action:l,location:p.location,delta:1})}function b(w,T){l=Nt.Replace;let S=Hr(p.location,w,T);d=m();let _=Hn(S,d),j=p.createHref(S);i.replaceState(_,"",j),o&&c&&c({action:l,location:p.location,delta:0})}function D(w){let T=a.location.origin!=="null"?a.location.origin:a.location.href,S=typeof w=="string"?w:Ho(w);return S=S.replace(/ $/,"%20"),He(T,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,T)}let p={get action(){return l},get location(){return t(a,i)},listen(w){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(zn,x),c=w,()=>{a.removeEventListener(zn,x),c=null}},createHref(w){return s(a,w)},createURL:D,encodeLocation(w){let T=D(w);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:y,replace:b,go(w){return i.go(w)}};return p}var Gn;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Gn||(Gn={}));function Fl(t,s,r){return r===void 0&&(r="/"),Nl(t,s,r)}function Nl(t,s,r,n){let a=typeof s=="string"?bs(s):s,o=Ko(a.pathname||"/",r);if(o==null)return null;let i=Go(t);Ll(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let d=Ql(o);l=ql(i[c],d)}return l}function Go(t,s,r,n){s===void 0&&(s=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(He(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=Yt([n,c.relativePath]),m=r.concat(c);o.children&&o.children.length>0&&(He(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Go(o.children,s,m,d)),!(o.path==null&&!o.index)&&s.push({path:d,score:Hl(d,o.index),routesMeta:m})};return t.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))a(o,i);else for(let c of qo(o.path))a(o,i,c)}),s}function qo(t){let s=t.split("/");if(s.length===0)return[];let[r,...n]=s,a=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return a?[o,""]:[o];let i=qo(n.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),a&&l.push(...i),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Ll(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:Gl(s.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Vl=/^:[\w-]+$/,Wl=3,Ul=2,$l=1,Bl=10,zl=-2,qn=t=>t==="*";function Hl(t,s){let r=t.split("/"),n=r.length;return r.some(qn)&&(n+=zl),s&&(n+=Ul),r.filter(a=>!qn(a)).reduce((a,o)=>a+(Vl.test(o)?Wl:o===""?$l:Bl),n)}function Gl(t,s){return t.length===s.length&&t.slice(0,-1).every((n,a)=>n===s[a])?t[t.length-1]-s[s.length-1]:0}function ql(t,s,r){let{routesMeta:n}=t,a={},o="/",i=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,m=o==="/"?s:s.slice(o.length)||"/",x=Kl({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},m),y=c.route;if(!x)return null;Object.assign(a,x.params),i.push({params:a,pathname:Yt([o,x.pathname]),pathnameBase:sc(Yt([o,x.pathnameBase])),route:y}),x.pathnameBase!=="/"&&(o=Yt([o,x.pathnameBase]))}return i}function Kl(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Yl(t.path,t.caseSensitive,t.end),a=s.match(r);if(!a)return null;let o=a[0],i=o.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((d,m,x)=>{let{paramName:y,isOptional:b}=m;if(y==="*"){let p=l[x]||"";i=o.slice(0,o.length-p.length).replace(/(.)\/+$/,"$1")}const D=l[x];return b&&!D?d[y]=void 0:d[y]=(D||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:i,pattern:t}}function Yl(t,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),zo(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),n]}function Ql(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return zo(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function Ko(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function Zl(t,s){s===void 0&&(s="/");let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?bs(t):t;return{pathname:r?r.startsWith("/")?r:Jl(r,s):s,search:rc(n),hash:nc(a)}}function Jl(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Ir(t,s,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Xl(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function ec(t,s){let r=Xl(t);return s?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function tc(t,s,r,n){n===void 0&&(n=!1);let a;typeof t=="string"?a=bs(t):(a=Is({},t),He(!a.pathname||!a.pathname.includes("?"),Ir("?","pathname","search",a)),He(!a.pathname||!a.pathname.includes("#"),Ir("#","pathname","hash",a)),He(!a.search||!a.search.includes("#"),Ir("#","search","hash",a)));let o=t===""||a.pathname==="",i=o?"/":a.pathname,l;if(i==null)l=r;else{let x=s.length-1;if(!n&&i.startsWith("..")){let y=i.split("/");for(;y[0]==="..";)y.shift(),x-=1;a.pathname=y.join("/")}l=x>=0?s[x]:"/"}let c=Zl(a,l),d=i&&i!=="/"&&i.endsWith("/"),m=(o||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||m)&&(c.pathname+="/"),c}const Yt=t=>t.join("/").replace(/\/\/+/g,"/"),sc=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),rc=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,nc=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function oc(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Yo=["post","put","patch","delete"];new Set(Yo);const ac=["get",...Yo];new Set(ac);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function As(){return As=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},As.apply(this,arguments)}const on=h.createContext(null),ic=h.createContext(null),nr=h.createContext(null),or=h.createContext(null),vs=h.createContext({outlet:null,matches:[],isDataRoute:!1}),Qo=h.createContext(null);function ar(){return h.useContext(or)!=null}function an(){return ar()||He(!1),h.useContext(or).location}function Zo(t){h.useContext(nr).static||h.useLayoutEffect(t)}function ln(){let{isDataRoute:t}=h.useContext(vs);return t?vc():lc()}function lc(){ar()||He(!1);let t=h.useContext(on),{basename:s,future:r,navigator:n}=h.useContext(nr),{matches:a}=h.useContext(vs),{pathname:o}=an(),i=JSON.stringify(ec(a,r.v7_relativeSplatPath)),l=h.useRef(!1);return Zo(()=>{l.current=!0}),h.useCallback(function(d,m){if(m===void 0&&(m={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let x=tc(d,JSON.parse(i),o,m.relative==="path");t==null&&s!=="/"&&(x.pathname=x.pathname==="/"?s:Yt([s,x.pathname])),(m.replace?n.replace:n.push)(x,m.state,m)},[s,n,i,o,t])}function cc(t,s){return dc(t,s)}function dc(t,s,r,n){ar()||He(!1);let{navigator:a}=h.useContext(nr),{matches:o}=h.useContext(vs),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=an(),m;if(s){var x;let w=typeof s=="string"?bs(s):s;c==="/"||(x=w.pathname)!=null&&x.startsWith(c)||He(!1),m=w}else m=d;let y=m.pathname||"/",b=y;if(c!=="/"){let w=c.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(w.length).join("/")}let D=Fl(t,{pathname:b}),p=pc(D&&D.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Yt([c,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Yt([c,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),o,r,n);return s&&p?h.createElement(or.Provider,{value:{location:As({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Nt.Pop}},p):p}function uc(){let t=bc(),s=oc(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},s),r?h.createElement("pre",{style:a},r):null,null)}const hc=h.createElement(uc,null);class fc extends h.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?h.createElement(vs.Provider,{value:this.props.routeContext},h.createElement(Qo.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mc(t){let{routeContext:s,match:r,children:n}=t,a=h.useContext(on);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),h.createElement(vs.Provider,{value:s},n)}function pc(t,s,r,n){var a;if(s===void 0&&(s=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var o;if(!r)return null;if(r.errors)t=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,l=(a=r)==null?void 0:a.errors;if(l!=null){let m=i.findIndex(x=>x.route.id&&l?.[x.route.id]!==void 0);m>=0||He(!1),i=i.slice(0,Math.min(i.length,m+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let m=0;m<i.length;m++){let x=i[m];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(d=m),x.route.id){let{loaderData:y,errors:b}=r,D=x.route.loader&&y[x.route.id]===void 0&&(!b||b[x.route.id]===void 0);if(x.route.lazy||D){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((m,x,y)=>{let b,D=!1,p=null,w=null;r&&(b=l&&x.route.id?l[x.route.id]:void 0,p=x.route.errorElement||hc,c&&(d<0&&y===0?(jc("route-fallback"),D=!0,w=null):d===y&&(D=!0,w=x.route.hydrateFallbackElement||null)));let T=s.concat(i.slice(0,y+1)),S=()=>{let _;return b?_=p:D?_=w:x.route.Component?_=h.createElement(x.route.Component,null):x.route.element?_=x.route.element:_=m,h.createElement(mc,{match:x,routeContext:{outlet:m,matches:T,isDataRoute:r!=null},children:_})};return r&&(x.route.ErrorBoundary||x.route.errorElement||y===0)?h.createElement(fc,{location:r.location,revalidation:r.revalidation,component:p,error:b,children:S(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):S()},null)}var Jo=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(Jo||{}),Xo=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(Xo||{});function xc(t){let s=h.useContext(on);return s||He(!1),s}function gc(t){let s=h.useContext(ic);return s||He(!1),s}function yc(t){let s=h.useContext(vs);return s||He(!1),s}function ea(t){let s=yc(),r=s.matches[s.matches.length-1];return r.route.id||He(!1),r.route.id}function bc(){var t;let s=h.useContext(Qo),r=gc(),n=ea();return s!==void 0?s:(t=r.errors)==null?void 0:t[n]}function vc(){let{router:t}=xc(Jo.UseNavigateStable),s=ea(Xo.UseNavigateStable),r=h.useRef(!1);return Zo(()=>{r.current=!0}),h.useCallback(function(a,o){o===void 0&&(o={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,As({fromRouteId:s},o)))},[t,s])}const Kn={};function jc(t,s,r){Kn[t]||(Kn[t]=!0)}function wc(t,s){t?.v7_startTransition,t?.v7_relativeSplatPath}function _t(t){He(!1)}function Sc(t){let{basename:s="/",children:r=null,location:n,navigationType:a=Nt.Pop,navigator:o,static:i=!1,future:l}=t;ar()&&He(!1);let c=s.replace(/^\/*/,"/"),d=h.useMemo(()=>({basename:c,navigator:o,static:i,future:As({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof n=="string"&&(n=bs(n));let{pathname:m="/",search:x="",hash:y="",state:b=null,key:D="default"}=n,p=h.useMemo(()=>{let w=Ko(m,c);return w==null?null:{location:{pathname:w,search:x,hash:y,state:b,key:D},navigationType:a}},[c,m,x,y,b,D,a]);return p==null?null:h.createElement(nr.Provider,{value:d},h.createElement(or.Provider,{children:r,value:p}))}function Cc(t){let{children:s,location:r}=t;return cc(Gr(s),r)}new Promise(()=>{});function Gr(t,s){s===void 0&&(s=[]);let r=[];return h.Children.forEach(t,(n,a)=>{if(!h.isValidElement(n))return;let o=[...s,a];if(n.type===h.Fragment){r.push.apply(r,Gr(n.props.children,o));return}n.type!==_t&&He(!1),!n.props.index||!n.props.children||He(!1);let i={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Gr(n.props.children,o)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Pc="6";try{window.__reactRouterVersion=Pc}catch{}const Dc="startTransition",Yn=Qa[Dc];function Tc(t){let{basename:s,children:r,future:n,window:a}=t,o=h.useRef();o.current==null&&(o.current=Rl({window:a,v5Compat:!0}));let i=o.current,[l,c]=h.useState({action:i.action,location:i.location}),{v7_startTransition:d}=n||{},m=h.useCallback(x=>{d&&Yn?Yn(()=>c(x)):c(x)},[c,d]);return h.useLayoutEffect(()=>i.listen(m),[i,m]),h.useEffect(()=>wc(n),[n]),h.createElement(Sc,{basename:s,children:r,location:l.location,navigationType:l.action,navigator:i,future:n})}var Qn;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Qn||(Qn={}));var Zn;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Zn||(Zn={}));var Ns=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},_c={setTimeout:(t,s)=>setTimeout(t,s),clearTimeout:t=>clearTimeout(t),setInterval:(t,s)=>setInterval(t,s),clearInterval:t=>clearInterval(t)},kc=class{#e=_c;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,s){return this.#e.setTimeout(t,s)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,s){return this.#e.setInterval(t,s)}clearInterval(t){this.#e.clearInterval(t)}},Gt=new kc;function Ec(t){setTimeout(t,0)}var ts=typeof window>"u"||"Deno"in globalThis;function ct(){}function Ic(t,s){return typeof t=="function"?t(s):t}function qr(t){return typeof t=="number"&&t>=0&&t!==1/0}function ta(t,s){return Math.max(t+(s||0)-Date.now(),0)}function Lt(t,s){return typeof t=="function"?t(s):t}function ht(t,s){return typeof t=="function"?t(s):t}function Jn(t,s){const{type:r="all",exact:n,fetchStatus:a,predicate:o,queryKey:i,stale:l}=t;if(i){if(n){if(s.queryHash!==cn(i,s.options))return!1}else if(!Ms(s.queryKey,i))return!1}if(r!=="all"){const c=s.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&s.isStale()!==l||a&&a!==s.state.fetchStatus||o&&!o(s))}function Xn(t,s){const{exact:r,status:n,predicate:a,mutationKey:o}=t;if(o){if(!s.options.mutationKey)return!1;if(r){if(Rs(s.options.mutationKey)!==Rs(o))return!1}else if(!Ms(s.options.mutationKey,o))return!1}return!(n&&s.state.status!==n||a&&!a(s))}function cn(t,s){return(s?.queryKeyHashFn||Rs)(t)}function Rs(t){return JSON.stringify(t,(s,r)=>Yr(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Ms(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?Object.keys(s).every(r=>Ms(t[r],s[r])):!1}var Ac=Object.prototype.hasOwnProperty;function sa(t,s){if(t===s)return t;const r=eo(t)&&eo(s);if(!r&&!(Yr(t)&&Yr(s)))return s;const a=(r?t:Object.keys(t)).length,o=r?s:Object.keys(s),i=o.length,l=r?new Array(i):{};let c=0;for(let d=0;d<i;d++){const m=r?d:o[d],x=t[m],y=s[m];if(x===y){l[m]=x,(r?d<a:Ac.call(t,m))&&c++;continue}if(x===null||y===null||typeof x!="object"||typeof y!="object"){l[m]=y;continue}const b=sa(x,y);l[m]=b,b===x&&c++}return a===i&&c===a?t:l}function Kr(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const r in t)if(t[r]!==s[r])return!1;return!0}function eo(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Yr(t){if(!to(t))return!1;const s=t.constructor;if(s===void 0)return!0;const r=s.prototype;return!(!to(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function to(t){return Object.prototype.toString.call(t)==="[object Object]"}function Rc(t){return new Promise(s=>{Gt.setTimeout(s,t)})}function Qr(t,s,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,s):r.structuralSharing!==!1?sa(t,s):s}function Mc(t,s,r=0){const n=[...t,s];return r&&n.length>r?n.slice(1):n}function Oc(t,s,r=0){const n=[s,...t];return r&&n.length>r?n.slice(0,-1):n}var dn=Symbol();function ra(t,s){return!t.queryFn&&s?.initialPromise?()=>s.initialPromise:!t.queryFn||t.queryFn===dn?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Fc(t,s){return typeof t=="function"?t(...s):!!t}var Nc=class extends Ns{#e;#t;#s;constructor(){super(),this.#s=t=>{if(!ts&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#s=t,this.#t?.(),this.#t=t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},un=new Nc;function Zr(){let t,s;const r=new Promise((a,o)=>{t=a,s=o});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),t(a)},r.reject=a=>{n({status:"rejected",reason:a}),s(a)},r}var Lc=Ec;function Vc(){let t=[],s=0,r=l=>{l()},n=l=>{l()},a=Lc;const o=l=>{s?t.push(l):a(()=>{r(l)})},i=()=>{const l=t;t=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;s++;try{c=l()}finally{s--,s||i()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var Ze=Vc(),Wc=class extends Ns{#e=!0;#t;#s;constructor(){super(),this.#s=t=>{if(!ts&&window.addEventListener){const s=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#s=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(r=>{r(t)}))}isOnline(){return this.#e}},Zs=new Wc;function Uc(t){return Math.min(1e3*2**t,3e4)}function na(t){return(t??"online")==="online"?Zs.isOnline():!0}var Jr=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function oa(t){let s=!1,r=0,n;const a=Zr(),o=()=>a.status!=="pending",i=p=>{if(!o()){const w=new Jr(p);y(w),t.onCancel?.(w)}},l=()=>{s=!0},c=()=>{s=!1},d=()=>un.isFocused()&&(t.networkMode==="always"||Zs.isOnline())&&t.canRun(),m=()=>na(t.networkMode)&&t.canRun(),x=p=>{o()||(n?.(),a.resolve(p))},y=p=>{o()||(n?.(),a.reject(p))},b=()=>new Promise(p=>{n=w=>{(o()||d())&&p(w)},t.onPause?.()}).then(()=>{n=void 0,o()||t.onContinue?.()}),D=()=>{if(o())return;let p;const w=r===0?t.initialPromise:void 0;try{p=w??t.fn()}catch(T){p=Promise.reject(T)}Promise.resolve(p).then(x).catch(T=>{if(o())return;const S=t.retry??(ts?0:3),_=t.retryDelay??Uc,j=typeof _=="function"?_(r,T):_,g=S===!0||typeof S=="number"&&r<S||typeof S=="function"&&S(r,T);if(s||!g){y(T);return}r++,t.onFail?.(r,T),Rc(j).then(()=>d()?void 0:b()).then(()=>{s?y(T):D()})})};return{promise:a,status:()=>a.status,cancel:i,continue:()=>(n?.(),a),cancelRetry:l,continueRetry:c,canStart:m,start:()=>(m()?D():b().then(D),a)}}var aa=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qr(this.gcTime)&&(this.#e=Gt.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ts?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Gt.clearTimeout(this.#e),this.#e=void 0)}},$c=class extends aa{#e;#t;#s;#n;#r;#i;#a;constructor(t){super(),this.#a=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.client,this.#s=this.#n.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=so(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){if(this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=so(this.options);s.data!==void 0&&(this.setData(s.data,{updatedAt:s.dataUpdatedAt,manual:!0}),this.#e=s)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(t,s){const r=Qr(this.state.data,t,this.options);return this.#o({data:r,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),r}setState(t,s){this.#o({type:"setState",state:t,setStateOptions:s})}cancel(t){const s=this.#r?.promise;return this.#r?.cancel(t),s?s.then(ct).catch(ct):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>ht(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===dn||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Lt(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!ta(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(this.#r&&(this.#a?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}async fetch(t,s){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(c=>c.options.queryFn);l&&this.setOptions(l.options)}const r=new AbortController,n=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#a=!0,r.signal)})},a=()=>{const l=ra(this.options,s),d=(()=>{const m={client:this.#n,queryKey:this.queryKey,meta:this.meta};return n(m),m})();return this.#a=!1,this.options.persister?this.options.persister(l,d,this):l(d)},i=(()=>{const l={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:a};return n(l),l})();this.options.behavior?.onFetch(i,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==i.fetchOptions?.meta)&&this.#o({type:"fetch",meta:i.fetchOptions?.meta}),this.#r=oa({initialPromise:s?.initialPromise,fn:i.fetchFn,onCancel:l=>{l instanceof Jr&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(l,c)=>{this.#o({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0});try{const l=await this.#r.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#s.config.onSuccess?.(l,this),this.#s.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof Jr){if(l.silent)return this.#r.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#o({type:"error",error:l}),this.#s.config.onError?.(l,this),this.#s.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#o(t){const s=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...ia(r.data,this.options),fetchMeta:t.meta??null};case"success":const n={...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?n:void 0,n;case"error":const a=t.error;return{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=s(this.state),Ze.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:t})})}};function ia(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:na(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function so(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,r=s!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Bc=class extends Ns{constructor(t,s){super(),this.options=s,this.#e=t,this.#o=null,this.#a=Zr(),this.bindMethods(),this.setOptions(s)}#e;#t=void 0;#s=void 0;#n=void 0;#r;#i;#a;#o;#p;#h;#f;#c;#d;#l;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),ro(this.#t,this.options)?this.#u():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Xr(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Xr(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#j(),this.#t.removeObserver(this)}setOptions(t){const s=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ht(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),s._defaulted&&!Kr(this.options,s)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const n=this.hasListeners();n&&no(this.#t,r,this.options,s)&&this.#u(),this.updateResult(),n&&(this.#t!==r||ht(this.options.enabled,this.#t)!==ht(s.enabled,this.#t)||Lt(this.options.staleTime,this.#t)!==Lt(s.staleTime,this.#t))&&this.#x();const a=this.#g();n&&(this.#t!==r||ht(this.options.enabled,this.#t)!==ht(s.enabled,this.#t)||a!==this.#l)&&this.#y(a)}getOptimisticResult(t){const s=this.#e.getQueryCache().build(this.#e,t),r=this.createResult(s,t);return Hc(this,r)&&(this.#n=r,this.#i=this.options,this.#r=this.#t.state),r}getCurrentResult(){return this.#n}trackResult(t,s){return new Proxy(t,{get:(r,n)=>(this.trackProp(n),s?.(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,n))})}trackProp(t){this.#m.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=this.#e.defaultQueryOptions(t),r=this.#e.getQueryCache().build(this.#e,s);return r.fetch().then(()=>this.createResult(r,s))}fetch(t){return this.#u({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#u(t){this.#w();let s=this.#t.fetch(this.options,t);return t?.throwOnError||(s=s.catch(ct)),s}#x(){this.#v();const t=Lt(this.options.staleTime,this.#t);if(ts||this.#n.isStale||!qr(t))return;const r=ta(this.#n.dataUpdatedAt,t)+1;this.#c=Gt.setTimeout(()=>{this.#n.isStale||this.updateResult()},r)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(t){this.#j(),this.#l=t,!(ts||ht(this.options.enabled,this.#t)===!1||!qr(this.#l)||this.#l===0)&&(this.#d=Gt.setInterval(()=>{(this.options.refetchIntervalInBackground||un.isFocused())&&this.#u()},this.#l))}#b(){this.#x(),this.#y(this.#g())}#v(){this.#c&&(Gt.clearTimeout(this.#c),this.#c=void 0)}#j(){this.#d&&(Gt.clearInterval(this.#d),this.#d=void 0)}createResult(t,s){const r=this.#t,n=this.options,a=this.#n,o=this.#r,i=this.#i,c=t!==r?t.state:this.#s,{state:d}=t;let m={...d},x=!1,y;if(s._optimisticResults){const P=this.hasListeners(),k=!P&&ro(t,s),M=P&&no(t,r,s,n);(k||M)&&(m={...m,...ia(d.data,t.options)}),s._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:b,errorUpdatedAt:D,status:p}=m;y=m.data;let w=!1;if(s.placeholderData!==void 0&&y===void 0&&p==="pending"){let P;a?.isPlaceholderData&&s.placeholderData===i?.placeholderData?(P=a.data,w=!0):P=typeof s.placeholderData=="function"?s.placeholderData(this.#f?.state.data,this.#f):s.placeholderData,P!==void 0&&(p="success",y=Qr(a?.data,P,s),x=!0)}if(s.select&&y!==void 0&&!w)if(a&&y===o?.data&&s.select===this.#p)y=this.#h;else try{this.#p=s.select,y=s.select(y),y=Qr(a?.data,y,s),this.#h=y,this.#o=null}catch(P){this.#o=P}this.#o&&(b=this.#o,y=this.#h,D=Date.now(),p="error");const T=m.fetchStatus==="fetching",S=p==="pending",_=p==="error",j=S&&T,g=y!==void 0,C={status:p,fetchStatus:m.fetchStatus,isPending:S,isSuccess:p==="success",isError:_,isInitialLoading:j,isLoading:j,data:y,dataUpdatedAt:m.dataUpdatedAt,error:b,errorUpdatedAt:D,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>c.dataUpdateCount||m.errorUpdateCount>c.errorUpdateCount,isFetching:T,isRefetching:T&&!S,isLoadingError:_&&!g,isPaused:m.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:_&&g,isStale:hn(t,s),refetch:this.refetch,promise:this.#a,isEnabled:ht(s.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const P=W=>{C.status==="error"?W.reject(C.error):C.data!==void 0&&W.resolve(C.data)},k=()=>{const W=this.#a=C.promise=Zr();P(W)},M=this.#a;switch(M.status){case"pending":t.queryHash===r.queryHash&&P(M);break;case"fulfilled":(C.status==="error"||C.data!==M.value)&&k();break;case"rejected":(C.status!=="error"||C.error!==M.reason)&&k();break}}return C}updateResult(){const t=this.#n,s=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#i=this.options,this.#r.data!==void 0&&(this.#f=this.#t),Kr(s,t))return;this.#n=s;const r=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,a=typeof n=="function"?n():n;if(a==="all"||!a&&!this.#m.size)return!0;const o=new Set(a??this.#m);return this.options.throwOnError&&o.add("error"),Object.keys(this.#n).some(i=>{const l=i;return this.#n[l]!==t[l]&&o.has(l)})};this.#S({listeners:r()})}#w(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const s=this.#t;this.#t=t,this.#s=t.state,this.hasListeners()&&(s?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#S(t){Ze.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function zc(t,s){return ht(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function ro(t,s){return zc(t,s)||t.state.data!==void 0&&Xr(t,s,s.refetchOnMount)}function Xr(t,s,r){if(ht(s.enabled,t)!==!1&&Lt(s.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&hn(t,s)}return!1}function no(t,s,r,n){return(t!==s||ht(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&hn(t,r)}function hn(t,s){return ht(s.enabled,t)!==!1&&t.isStaleByTime(Lt(s.staleTime,t))}function Hc(t,s){return!Kr(t.getCurrentResult(),s)}function oo(t){return{onFetch:(s,r)=>{const n=s.options,a=s.fetchOptions?.meta?.fetchMore?.direction,o=s.state.data?.pages||[],i=s.state.data?.pageParams||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let m=!1;const x=D=>{Object.defineProperty(D,"signal",{enumerable:!0,get:()=>(s.signal.aborted?m=!0:s.signal.addEventListener("abort",()=>{m=!0}),s.signal)})},y=ra(s.options,s.fetchOptions),b=async(D,p,w)=>{if(m)return Promise.reject();if(p==null&&D.pages.length)return Promise.resolve(D);const S=(()=>{const f={client:s.client,queryKey:s.queryKey,pageParam:p,direction:w?"backward":"forward",meta:s.options.meta};return x(f),f})(),_=await y(S),{maxPages:j}=s.options,g=w?Oc:Mc;return{pages:g(D.pages,_,j),pageParams:g(D.pageParams,p,j)}};if(a&&o.length){const D=a==="backward",p=D?Gc:ao,w={pages:o,pageParams:i},T=p(n,w);l=await b(w,T,D)}else{const D=t??o.length;do{const p=c===0?i[0]??n.initialPageParam:ao(n,l);if(c>0&&p==null)break;l=await b(l,p),c++}while(c<D)}return l};s.options.persister?s.fetchFn=()=>s.options.persister?.(d,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},r):s.fetchFn=d}}}function ao(t,{pages:s,pageParams:r}){const n=s.length-1;return s.length>0?t.getNextPageParam(s[n],s,r[n],r):void 0}function Gc(t,{pages:s,pageParams:r}){return s.length>0?t.getPreviousPageParam?.(s[0],s,r[0],r):void 0}var qc=class extends aa{#e;#t;#s;#n;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#s=t.mutationCache,this.#t=[],this.state=t.state||Kc(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(s=>s!==t),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#s.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){const s=()=>{this.#r({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#n=oa({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(o,i)=>{this.#r({type:"failed",failureCount:o,error:i})},onPause:()=>{this.#r({type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#s.canRun(this)});const n=this.state.status==="pending",a=!this.#n.canStart();try{if(n)s();else{this.#r({type:"pending",variables:t,isPaused:a}),await this.#s.config.onMutate?.(t,this,r);const i=await this.options.onMutate?.(t,r);i!==this.state.context&&this.#r({type:"pending",context:i,variables:t,isPaused:a})}const o=await this.#n.start();return await this.#s.config.onSuccess?.(o,t,this.state.context,this,r),await this.options.onSuccess?.(o,t,this.state.context,r),await this.#s.config.onSettled?.(o,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(o,null,t,this.state.context,r),this.#r({type:"success",data:o}),o}catch(o){try{throw await this.#s.config.onError?.(o,t,this.state.context,this,r),await this.options.onError?.(o,t,this.state.context,r),await this.#s.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,o,t,this.state.context,r),o}finally{this.#r({type:"error",error:o})}}finally{this.#s.runNext(this)}}#r(t){const s=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),Ze.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(t)}),this.#s.notify({mutation:this,type:"updated",action:t})})}};function Kc(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Yc=class extends Ns{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#s=0}#e;#t;#s;build(t,s,r){const n=new qc({client:t,mutationCache:this,mutationId:++this.#s,options:t.defaultMutationOptions(s),state:r});return this.add(n),n}add(t){this.#e.add(t);const s=Us(t);if(typeof s=="string"){const r=this.#t.get(s);r?r.push(t):this.#t.set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const s=Us(t);if(typeof s=="string"){const r=this.#t.get(s);if(r)if(r.length>1){const n=r.indexOf(t);n!==-1&&r.splice(n,1)}else r[0]===t&&this.#t.delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=Us(t);if(typeof s=="string"){const n=this.#t.get(s)?.find(a=>a.state.status==="pending");return!n||n===t}else return!0}runNext(t){const s=Us(t);return typeof s=="string"?this.#t.get(s)?.find(n=>n!==t&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ze.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const s={exact:!0,...t};return this.getAll().find(r=>Xn(s,r))}findAll(t={}){return this.getAll().filter(s=>Xn(t,s))}notify(t){Ze.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return Ze.batch(()=>Promise.all(t.map(s=>s.continue().catch(ct))))}};function Us(t){return t.options.scope?.id}var Qc=class extends Ns{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,s,r){const n=s.queryKey,a=s.queryHash??cn(n,s);let o=this.get(a);return o||(o=new $c({client:t,queryKey:n,queryHash:a,options:t.defaultQueryOptions(s),state:r,defaultOptions:t.getQueryDefaults(n)}),this.add(o)),o}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=this.#e.get(t.queryHash);s&&(t.destroy(),s===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ze.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const s={exact:!0,...t};return this.getAll().find(r=>Jn(s,r))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(r=>Jn(t,r)):s}notify(t){Ze.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){Ze.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ze.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Zc=class{#e;#t;#s;#n;#r;#i;#a;#o;constructor(t={}){this.#e=t.queryCache||new Qc,this.#t=t.mutationCache||new Yc,this.#s=t.defaultOptions||{},this.#n=new Map,this.#r=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#a=un.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=Zs.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#a?.(),this.#a=void 0,this.#o?.(),this.#o=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const s=this.defaultQueryOptions({queryKey:t});return this.#e.get(s.queryHash)?.state.data}ensureQueryData(t){const s=this.defaultQueryOptions(t),r=this.#e.build(this,s),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(Lt(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(n))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:s,state:r})=>{const n=r.data;return[s,n]})}setQueryData(t,s,r){const n=this.defaultQueryOptions({queryKey:t}),o=this.#e.get(n.queryHash)?.state.data,i=Ic(s,o);if(i!==void 0)return this.#e.build(this,n).setData(i,{...r,manual:!0})}setQueriesData(t,s,r){return Ze.batch(()=>this.#e.findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,s,r)]))}getQueryState(t){const s=this.defaultQueryOptions({queryKey:t});return this.#e.get(s.queryHash)?.state}removeQueries(t){const s=this.#e;Ze.batch(()=>{s.findAll(t).forEach(r=>{s.remove(r)})})}resetQueries(t,s){const r=this.#e;return Ze.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},s)))}cancelQueries(t,s={}){const r={revert:!0,...s},n=Ze.batch(()=>this.#e.findAll(t).map(a=>a.cancel(r)));return Promise.all(n).then(ct).catch(ct)}invalidateQueries(t,s={}){return Ze.batch(()=>(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},s)))}refetchQueries(t,s={}){const r={...s,cancelRefetch:s.cancelRefetch??!0},n=Ze.batch(()=>this.#e.findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let o=a.fetch(void 0,r);return r.throwOnError||(o=o.catch(ct)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(ct)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const r=this.#e.build(this,s);return r.isStaleByTime(Lt(s.staleTime,r))?r.fetch(s):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ct).catch(ct)}fetchInfiniteQuery(t){return t.behavior=oo(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ct).catch(ct)}ensureInfiniteQueryData(t){return t.behavior=oo(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Zs.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(t){this.#s=t}setQueryDefaults(t,s){this.#n.set(Rs(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...this.#n.values()],r={};return s.forEach(n=>{Ms(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,s){this.#r.set(Rs(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...this.#r.values()],r={};return s.forEach(n=>{Ms(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const s={...this.#s.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=cn(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===dn&&(s.enabled=!1),s}defaultMutationOptions(t){return t?._defaulted?t:{...this.#s.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},la=h.createContext(void 0),Jc=t=>{const s=h.useContext(la);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},Xc=({client:t,children:s})=>(h.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(la.Provider,{value:t,children:s})),ca=h.createContext(!1),ed=()=>h.useContext(ca);ca.Provider;function td(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var sd=h.createContext(td()),rd=()=>h.useContext(sd),nd=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},od=t=>{h.useEffect(()=>{t.clearReset()},[t])},ad=({result:t,errorResetBoundary:s,throwOnError:r,query:n,suspense:a})=>t.isError&&!s.isReset()&&!t.isFetching&&n&&(a&&t.data===void 0||Fc(r,[t.error,n])),id=t=>{if(t.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},ld=(t,s)=>t.isLoading&&t.isFetching&&!s,cd=(t,s)=>t?.suspense&&s.isPending,io=(t,s,r)=>s.fetchOptimistic(t).catch(()=>{r.clearReset()});function dd(t,s,r){const n=ed(),a=rd(),o=Jc(),i=o.defaultQueryOptions(t);o.getDefaultOptions().queries?._experimental_beforeQuery?.(i),i._optimisticResults=n?"isRestoring":"optimistic",id(i),nd(i,a),od(a);const l=!o.getQueryCache().get(i.queryHash),[c]=h.useState(()=>new s(o,i)),d=c.getOptimisticResult(i),m=!n&&t.subscribed!==!1;if(h.useSyncExternalStore(h.useCallback(x=>{const y=m?c.subscribe(Ze.batchCalls(x)):ct;return c.updateResult(),y},[c,m]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),h.useEffect(()=>{c.setOptions(i)},[i,c]),cd(i,d))throw io(i,c,a);if(ad({result:d,errorResetBoundary:a,throwOnError:i.throwOnError,query:o.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw d.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(i,d),i.experimental_prefetchInRender&&!ts&&ld(d,n)&&(l?io(i,c,a):o.getQueryCache().get(i.queryHash)?.promise)?.catch(ct).finally(()=>{c.updateResult()}),i.notifyOnChangeProps?d:c.trackResult(d)}function hs(t,s){return dd(t,Bc)}const Mt={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"http://localhost:3001",VITE_AWS_REGION:"us-east-1",VITE_BUILD_TIME:"2025-12-13T02:40:17.884Z",VITE_COGNITO_CLIENT_ID:"",VITE_COGNITO_DOMAIN:"",VITE_COGNITO_REDIRECT_SIGN_IN:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",VITE_COGNITO_REDIRECT_SIGN_OUT:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",VITE_COGNITO_USER_POOL_ID:"",VITE_ENABLE_DEBUG:"false",VITE_ENABLE_MOCK_DATA:"false",VITE_ENVIRONMENT:"production",VITE_SERVERLESS:"true",VITE_VERSION:"1.0.0-dev"},ir=()=>{let t=typeof window<"u"&&window.__CONFIG__&&window.__CONFIG__.API_URL?window.__CONFIG__.API_URL:null,s=t||Mt&&"http://localhost:3001";if(!s&&(Mt&&!1))s="/";else if(!s&&typeof window<"u"){const{hostname:i,protocol:l}=window.location;i==="localhost"||i==="127.0.0.1"?s="http://localhost:3001":s=`${`${l}//${i}`}:3001`}s||(s="/"),console.log(" [API CONFIG] URL Resolution:",{runtimeApiUrl:t,envApiUrl:Mt&&"http://localhost:3001",finalApiUrl:s,windowConfig:typeof window<"u"?window.__CONFIG__:"undefined",allEnvVars:Mt||{}});const n=Mt&&"production"||"development",a=!1,o=!!Mt;return{baseURL:s,isServerless:!!s&&!s.includes("localhost"),apiUrl:s,isConfigured:!!s&&!s.includes("localhost"),environment:n,isDevelopment:a,isProduction:o,baseUrl:Mt&&"/",allEnvVars:Mt||{}}};let Ve=ir();(!Ve.apiUrl||Ve.apiUrl.includes("localhost"))&&console.warn("[API CONFIG] Using fallback API URL:",Ve.baseURL+`
Set window.__CONFIG__.API_URL at runtime or VITE_API_URL at build time to override.`);let Ee=Oi.create({baseURL:Ve.baseURL,timeout:Ve.isServerless?45e3:3e4,headers:{"Content-Type":"application/json",Authorization:"Bearer dev-bypass-token"}});try{Ee&&Ee.interceptors&&Ee.interceptors.request.use(t=>(t.metadata={startTime:new Date},t),t=>Promise.reject(t))}catch{}try{Ee&&Ee.interceptors&&Ee.interceptors.response.use(t=>{if(t.config.metadata){const s=new Date-t.config.metadata.startTime;s>1e4&&console.warn(" Slow API request detected:",{url:t.config.url,method:t.config.method,duration:`${s}ms`})}return t},t=>{let s="An unexpected error occurred";t.code==="ECONNABORTED"?s="Request timed out. The server may be experiencing high load. Please try again.":t.code==="ERR_NETWORK"?s="Network connection failed. Please check your internet connection.":t.code==="ENOTFOUND"?s="Server could not be reached. Please try again later.":t.code==="CERT_UNTRUSTED"?s="Security certificate error. Please contact support.":t.response?.status===401?s="Authentication failed. Please sign in again.":t.response?.status===403?s="Access denied. You do not have permission for this resource.":t.response?.status===404?s="The requested resource was not found. Please check your request and try again.":t.response?.status===429?s="Too many requests. Please wait a moment and try again.":t.response?.status===500?s="Server error occurred. Our team has been notified. Please try again later.":t.response?.status===502?s="Bad gateway error. The service may be temporarily unavailable.":t.response?.status===503?s="Service temporarily unavailable. Please try again in a few minutes.":navigator.onLine||(s="No internet connection. Please check your network and try again."),t.userMessage=s;const r={url:t.config?.url,method:t.config?.method,status:t.response?.status,statusText:t.response?.statusText,message:t.message,code:t.code,userMessage:s,stack:t.stack?.split(`
`)[0]};return t.response?.status>=500?console.error(" Server Error:",r):t.response?.status>=400?console.warn(" Client Error:",r):t.code?console.error(" Network Error:",r):console.error(" Unknown Error:",r),Promise.reject(t)})}catch{}const ud=async()=>{try{const t=await Ee.get("/api/portfolio/metrics"),s=mn(t);return console.log(" Portfolio Data Loaded:",s),s?{data:s,success:t.data?.success??!0}:{data:null,success:!1,error:"No portfolio data available"}}catch(t){return console.error("Error fetching portfolio data:",t),{data:null,success:!1,error:t?.response?.data?.error||t?.message||"Failed to fetch portfolio data"}}},hd=()=>Ve.baseURL;try{Ee.interceptors.request.use(t=>{const s=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.port==="5173",r=Ve&&Ve.baseURL&&(Ve.baseURL.startsWith("http://localhost:")||Ve.baseURL.startsWith("https://"));if(s&&!r){console.log(" [API] Blocking API call - no server configured:",{baseURL:Ve.baseURL,hasValidApiServer:r});const a=new Error("API calls disabled - no server configured");return a.code="NO_SERVER_CONFIGURED",Promise.reject(a)}console.log(" [API] Allowing API call:",{isDevelopment:s,hasValidApiServer:r,baseURL:Ve.baseURL,url:t.url}),t.url&&t.url.startsWith("/api/api")&&(t.url=t.url.replace("/api/api","/api"));try{let a=null;typeof window<"u"&&(a=localStorage.getItem("authToken")||sessionStorage.getItem("authToken")||localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")),a&&(t.headers.Authorization=`Bearer ${a}`)}catch(a){console.log("Could not retrieve auth token:",a.message)}const n=`${t.baseURL||Ee.defaults.baseURL}${t.url}`;return console.log("[API REQUEST FINAL URL]",n,t),t.isServerless&&(t.headers["X-Lambda-Request"]="true",t.headers["X-Request-Time"]=new Date().toISOString()),t},t=>(console.error("API Request Error:",{message:t?.message||"Unknown error",status:t.response?.status,statusText:t.response?.statusText}),Promise.reject(t)))}catch{}try{Ee.interceptors.response.use(t=>{const s=`${t.config.baseURL||Ee.defaults.baseURL}${t.config.url}`;return console.log("[API SUCCESS]",t.config.method?.toUpperCase(),s,{status:t?.status,statusText:t?.statusText,dataSize:t?.data?Array.isArray(t?.data)?t.data?.length||0:Object.keys(t?.data).length:0}),t},async t=>(t?.code==="DEV_MODE_BLOCKED",Promise.reject(t)))}catch{}function fn(t,s=""){let r="An unexpected error occurred";return t?.response?.data?.error?r=t.response?.data.error:t?.response?.data?.message?r=t.response?.data.message:t?.message&&(r=t.message),s?`${s}: ${r}`:r}function mn(t){if(!t||!t.data)return null;const s=t.data;return s.items!==void 0&&s.pagination!==void 0?{items:s.items,pagination:s.pagination}:s.data!==void 0&&s.success!==void 0?s.data:(s.success!==void 0,s)}console.log(" [API STARTUP] Initializing API configuration...");console.log(" [API CONFIG]",ir());console.log(" [AXIOS DEFAULT BASE URL]",Ee?.defaults?.baseURL||"undefined");const fd=async(t={})=>{try{const s=new URLSearchParams;Object.entries(t).forEach(([a,o])=>{o!=null&&o!==""&&s.append(a,o)});const r=await Ee.get(`/api/market/naaim?${s.toString()}`);return{data:mn(r),success:r.data?.success??!0,timestamp:r.data?.timestamp}}catch(s){return fn(s,"get NAAIM data"),{data:null}}},md=async(t={})=>{try{const s=new URLSearchParams;Object.entries(t).forEach(([a,o])=>{o!=null&&o!==""&&s.append(a,o)});const r=await Ee.get(`/api/market/fear-greed?${s.toString()}`);return{data:mn(r),success:r.data?.success??!0,timestamp:r.data?.timestamp}}catch(s){return fn(s,"get fear & greed data"),{data:null}}},pd=async(t=null)=>{try{console.log("Testing API connection..."),console.log("Current API URL:",Ve.baseURL),console.log("Custom URL:",t),console.log("Environment:","production"),console.log("VITE_API_URL:","http://localhost:3001");const s=t||Ve.baseURL,r=await Ee.get("/api/health?quick=true",{baseURL:s,timeout:7e3});return{success:!0,apiUrl:s,status:r?.status,data:r?.data,message:"API connection successful"}}catch(s){return console.error("API connection test failed:",{message:s?.message||"Unknown error",status:s.response?.status,statusText:s.response?.statusText}),{success:!1,apiUrl:t||Ve.baseURL,error:s.message,details:{hasResponse:!!s.response,status:s.response?.status,statusText:s.response?.statusText,responseData:s.response?.data,code:s.code,isNetworkError:!s.response,configUrl:s.config?.url,fullUrl:(t||Ve.baseURL)+"/api/health?quick=true"}}}},xd=()=>({currentApiUrl:Ve.baseURL,axiosDefaultBaseUrl:Ee.defaults.baseURL,viteApiUrl:"http://localhost:3001",isConfigured:Ve.isConfigured,environment:"production",urlsMatch:Ve.baseURL===Ee.defaults.baseURL,timestamp:new Date().toISOString()}),gd=async(t="")=>{let s=!1,r=`/api/health${t}`,n=`/${t}`;try{const a=await Ee.get(r,{baseURL:Ve.baseURL});return console.log("Health check response:",a?.data),{data:a?.data,healthy:!0,endpoint:r,fallback:!1,timestamp:new Date().toISOString()}}catch{console.warn("Health check failed for /api/health, trying root / endpoint..."),s=!0;try{const o=await Ee.get(n,{baseURL:Ve.baseURL});return console.log("Root endpoint health check response:",o?.data),{data:o?.data,healthy:!0,endpoint:n,fallback:!0,timestamp:new Date().toISOString()}}catch(o){return console.error("Error in health check (both endpoints failed):",o),{data:null,error:fn(o,"health check (both endpoints)"),healthy:!1,endpoint:s?n:r,fallback:s,timestamp:new Date().toISOString()}}}},yd=()=>{const[t,s]=h.useState(0),[r,n]=h.useState(!0),[a,o]=h.useState(null),[i,l]=h.useState([]),[c,d]=h.useState([]),[m,x]=h.useState({}),[y,b]=h.useState(""),[D,p]=h.useState(""),[w,T]=h.useState(0),[S,_]=h.useState(1),[j,g]=h.useState("composite_metric"),[f,C]=h.useState("desc"),[P,k]=h.useState(1),[M,W]=h.useState(1);h.useEffect(()=>{$()},[P,y,D,w,S,j,f]),h.useEffect(()=>{t===2&&B()},[t]);const $=async()=>{try{n(!0);const E=new URLSearchParams({limit:"50",offset:"0",search:y,sortBy:j,sortOrder:f}),A=await Ee.get(`/api/scores/stockscores?${E}`);if(!A||!A.data)throw new Error("No data received from scores API");const ae=A.data?.items||[];l(ae),W(Math.ceil((A.data?.pagination?.total||ae.length)/50)||1),o(null)}catch(E){o(E.message)}finally{n(!1)}},B=async()=>{try{const E=await Ee.get("/api/scores/stockscores?limit=50&sortBy=composite_score");if(!E||!E.data)throw new Error("No data received from top stocks API");const A=E.data?.items||[],ae={composite:A.filter(K=>K.composite_score!==null&&K.composite_score!==void 0).sort((K,q)=>q.composite_score-K.composite_score).slice(0,10).map(K=>({...K,companyName:K.company_name,categoryMetric:K.composite_score,sector:K.sector||"N/A"})),quality:A.filter(K=>K.quality_score!==null&&K.quality_score!==void 0).sort((K,q)=>q.quality_score-K.quality_score).slice(0,10).map(K=>({...K,companyName:K.company_name,categoryMetric:K.quality_score,sector:K.sector||"N/A"})),value:A.filter(K=>K.value_score!==null&&K.value_score!==void 0).sort((K,q)=>q.value_score-K.value_score).slice(0,10).map(K=>({...K,companyName:K.company_name,categoryMetric:K.value_score,sector:K.sector||"N/A"}))};x(ae)}catch(E){o(E.message)}},U=E=>E==null?"#9e9e9e":E>=.8?"#4caf50":E>=.7?"#8bc34a":E>=.6?"#ffeb3b":E>=.5?"#ff9800":"#f44336",V=E=>E!=null?E.toFixed(3):"N/A",J=(E,A)=>e.jsx(ze,{label:`${A}: ${E.toFixed(3)}`,size:"small",style:{backgroundColor:U(E),color:E>=.6?"#000":"#fff",fontWeight:"bold",margin:"2px"}}),le=()=>e.jsx(ft,{component:Ye,sx:{mt:3},children:e.jsxs(mt,{children:[e.jsx(pt,{children:e.jsxs(ke,{children:[e.jsx(O,{children:e.jsx("strong",{children:"Symbol"})}),e.jsx(O,{children:e.jsx("strong",{children:"Company"})}),e.jsx(O,{children:e.jsx("strong",{children:"Sector"})}),e.jsx(O,{align:"center",children:e.jsx("strong",{children:"Composite Metric"})}),e.jsx(O,{align:"center",children:e.jsx("strong",{children:"Quality"})}),e.jsx(O,{align:"center",children:e.jsx("strong",{children:"Value"})}),e.jsx(O,{align:"center",children:e.jsx("strong",{children:"Growth"})}),e.jsx(O,{children:e.jsx("strong",{children:"Price"})}),e.jsx(O,{children:e.jsx("strong",{children:"Market Cap"})})]})}),e.jsx(xt,{children:(i||[]).map((E,A)=>e.jsxs(ke,{hover:!0,children:[e.jsx(O,{children:e.jsx(u,{variant:"subtitle2",sx:{fontWeight:"bold",color:"#1976d2"},children:E.symbol})}),e.jsx(O,{children:e.jsxs(u,{variant:"body2",children:[E.companyName?.substring(0,30),E.companyName?.length>30?"...":""]})}),e.jsx(O,{children:e.jsx(ze,{label:E.sector,size:"small",variant:"outlined"})}),e.jsx(O,{align:"center",children:e.jsxs(R,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx(u,{variant:"h6",sx:{color:U(E.returnOnEquity),fontWeight:"bold"},children:V(E.returnOnEquity)}),e.jsx(Ks,{title:`PE: ${E.pe||"N/A"}`,children:e.jsx(We,{size:"small",children:e.jsx(Io,{fontSize:"small"})})})]})}),e.jsx(O,{align:"center",children:e.jsx(u,{sx:{color:U(E.profitMargin)},children:V(E.profitMargin)})}),e.jsx(O,{align:"center",children:e.jsx(u,{sx:{color:U(E.debtToEquity)},children:V(E.debtToEquity)})}),e.jsx(O,{align:"center",children:e.jsx(u,{sx:{color:U(E.returnOnAssets)},children:V(E.returnOnAssets)})}),e.jsxs(O,{children:["$",E.currentPrice?.toFixed(2)||"N/A"]}),e.jsx(O,{children:E.marketCap?`$${(E.marketCap/1e9).toFixed(1)}B`:"N/A"})]},E.symbol))})]})}),X=()=>e.jsx(v,{container:!0,spacing:3,sx:{mt:2},children:Object.entries(m).map(([E,A])=>e.jsx(v,{item:!0,xs:12,md:6,children:e.jsx(G,{children:e.jsxs(Q,{children:[e.jsxs(u,{variant:"h6",gutterBottom:!0,sx:{textTransform:"capitalize"},children:["Top ",E==="composite"?"Overall":E," Stocks"]}),e.jsx(R,{sx:{maxHeight:400,overflow:"auto"},children:A.slice(0,10).map((ae,K)=>e.jsxs(R,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:1,borderBottom:K<9?"1px solid #eee":"none"},children:[e.jsxs(R,{children:[e.jsxs(u,{variant:"subtitle2",sx:{fontWeight:"bold"},children:[K+1,". ",ae.symbol]}),e.jsxs(u,{variant:"caption",color:"textSecondary",children:[ae.companyName?.substring(0,25),ae.companyName?.length>25?"...":""]})]}),e.jsxs(R,{sx:{textAlign:"right"},children:[e.jsx(u,{variant:"body2",sx:{color:U(ae.categoryMetric),fontWeight:"bold"},children:ae.categoryMetric.toFixed(3)}),e.jsx(u,{variant:"caption",color:"textSecondary",children:ae.sector})]})]},ae.symbol))})]})})},E))});return a?e.jsx(ot,{maxWidth:"lg",sx:{mt:4},children:e.jsxs(Se,{severity:"error",children:["Error loading metrics: ",a]})}):e.jsxs(ot,{maxWidth:"lg",sx:{mt:4},children:[e.jsxs(R,{sx:{mb:4},children:[e.jsx(u,{variant:"h3",component:"h1",gutterBottom:!0,children:"Institutional-Grade Stock Metrics"}),e.jsx(u,{variant:"subtitle1",color:"textSecondary",children:"Advanced multi-factor analysis based on academic research and institutional methodology"})]}),e.jsx(R,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:e.jsxs(tn,{value:t,onChange:(E,A)=>s(A),children:[e.jsx(St,{value:0,label:"Stock Metrics"}),e.jsx(St,{value:2,label:"Top Performers"})]})}),t===0&&e.jsx(Ye,{sx:{p:3,mb:3},children:e.jsxs(v,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(v,{item:!0,xs:12,sm:3,children:e.jsx(be,{fullWidth:!0,label:"Search Symbol/Company",value:y,onChange:E=>b(E.target.value),size:"small"})}),e.jsx(v,{item:!0,xs:12,sm:2,children:e.jsxs(et,{fullWidth:!0,size:"small",children:[e.jsx(tt,{children:"Sector"}),e.jsxs(st,{value:D,label:"Sector",onChange:E=>p(E.target.value),children:[e.jsx(ee,{value:"",children:"All Sectors"}),e.jsx(ee,{value:"Technology",children:"Technology"}),e.jsx(ee,{value:"Healthcare",children:"Healthcare"}),e.jsx(ee,{value:"Financial Services",children:"Financial Services"}),e.jsx(ee,{value:"Consumer Cyclical",children:"Consumer Cyclical"}),e.jsx(ee,{value:"Industrials",children:"Industrials"}),e.jsx(ee,{value:"Communication Services",children:"Communication Services"}),e.jsx(ee,{value:"Consumer Defensive",children:"Consumer Defensive"}),e.jsx(ee,{value:"Energy",children:"Energy"}),e.jsx(ee,{value:"Utilities",children:"Utilities"}),e.jsx(ee,{value:"Real Estate",children:"Real Estate"}),e.jsx(ee,{value:"Basic Materials",children:"Basic Materials"})]})]})}),e.jsx(v,{item:!0,xs:12,sm:2,children:e.jsx(be,{fullWidth:!0,label:"Min Metric",type:"number",value:w,onChange:E=>T(Number(E.target.value)),size:"small",inputProps:{min:0,max:1,step:.01}})}),e.jsx(v,{item:!0,xs:12,sm:2,children:e.jsx(be,{fullWidth:!0,label:"Max Metric",type:"number",value:S,onChange:E=>_(Number(E.target.value)),size:"small",inputProps:{min:0,max:1,step:.01}})}),e.jsx(v,{item:!0,xs:12,sm:2,children:e.jsxs(et,{fullWidth:!0,size:"small",children:[e.jsx(tt,{children:"Sort By"}),e.jsxs(st,{value:j,label:"Sort By",onChange:E=>g(E.target.value),children:[e.jsx(ee,{value:"composite_metric",children:"Composite Metric"}),e.jsx(ee,{value:"quality_metric",children:"Quality Metric"}),e.jsx(ee,{value:"value_metric",children:"Value Metric"}),e.jsx(ee,{value:"market_cap",children:"Market Cap"}),e.jsx(ee,{value:"symbol",children:"Symbol"})]})]})})]})}),r?e.jsx(R,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(rt,{})}):e.jsxs(e.Fragment,{children:[t===0&&e.jsx(le,{}),t===2&&e.jsx(X,{})]}),t===0&&M>1&&e.jsx(R,{sx:{display:"flex",justifyContent:"center",mt:3},children:e.jsxs(u,{variant:"body2",sx:{mt:1},children:["Page ",P," of ",M]})}),e.jsxs(Ye,{sx:{p:2,mt:4,backgroundColor:"#f5f5f5"},children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"Metrics Methodology"}),e.jsxs(v,{container:!0,spacing:2,children:[e.jsxs(v,{item:!0,xs:12,sm:6,md:6,children:[e.jsx(u,{variant:"subtitle2",children:"Quality Metric"}),e.jsx(u,{variant:"caption",children:"Financial statement quality, balance sheet strength, profitability, management effectiveness using Piotroski F-Score, Altman Z-Score analysis"})]}),e.jsxs(v,{item:!0,xs:12,sm:6,md:6,children:[e.jsx(u,{variant:"subtitle2",children:"Value Metric"}),e.jsx(u,{variant:"caption",children:"Traditional multiples (P/E, P/B, EV/EBITDA), DCF intrinsic value, dividend discount model, and peer comparison analysis"})]}),e.jsxs(v,{item:!0,xs:12,sm:6,md:6,children:[e.jsx(u,{variant:"subtitle2",children:"Growth Metric"}),e.jsx(u,{variant:"caption",children:"Revenue growth analysis, earnings growth quality, fundamental growth drivers, and market expansion potential based on academic research"})]})]}),e.jsxs(R,{sx:{mt:2},children:[e.jsx(u,{variant:"subtitle2",gutterBottom:!0,children:"Metric Ranges (0-1 Scale):"}),e.jsxs(R,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[J(.9,"Excellent (0.8-1.0)"),J(.75,"Good (0.7-0.79)"),J(.65,"Fair (0.6-0.69)"),J(.55,"Below Average (0.5-0.59)"),J(.4,"Poor (0.0-0.49)")]})]})]})]})},Tt={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"http://localhost:3001",VITE_AWS_REGION:"us-east-1",VITE_BUILD_TIME:"2025-12-13T02:40:17.884Z",VITE_COGNITO_CLIENT_ID:"",VITE_COGNITO_DOMAIN:"",VITE_COGNITO_REDIRECT_SIGN_IN:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",VITE_COGNITO_REDIRECT_SIGN_OUT:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",VITE_COGNITO_USER_POOL_ID:"",VITE_ENABLE_DEBUG:"false",VITE_ENABLE_MOCK_DATA:"false",VITE_ENVIRONMENT:"production",VITE_SERVERLESS:"true",VITE_VERSION:"1.0.0-dev"};var Ar={};function $s(t){return t&&typeof t=="object"&&!Array.isArray(t)}function bd(){const[t,s]=h.useState({}),[r,n]=h.useState({}),[a,o]=h.useState(!1),[i,l]=h.useState(null),[c,d]=h.useState(!1),m=h.useMemo(()=>{try{return xd()}catch(E){return console.error("Error getting diagnostic info:",E),{}}},[]);h.useMemo(()=>{try{return ir()}catch(E){return console.error("Error getting API config:",E),{}}},[]),h.useMemo(()=>{try{return hd()}catch(E){return console.error("Error getting current base URL:",E),""}},[]),h.useEffect(()=>{const E=A=>{console.error("ServiceHealth component error:",A.error),l(A.error.message)};return window.addEventListener("error",E),()=>window.removeEventListener("error",E)},[]);const{data:x,isLoading:y,error:b,refetch:D}=hs({queryKey:["ecsTasks"],queryFn:async()=>{try{const E="https://qda42av7je.execute-api.us-east-1.amazonaws.com/dev",A=new AbortController,ae=setTimeout(()=>A.abort(),5e3),K=await fetch(`${E}/api/health/ecs-tasks`,{method:"GET",headers:{"Content-Type":"application/json"},signal:A.signal});if(clearTimeout(ae),!K.ok)return{error:!0,message:`HTTP ${K.status}: ${K.statusText}`,timestamp:new Date().toISOString()};const q=await K.json();return q?.success,q}catch(E){return console.warn("ECS tasks check failed (non-critical):",E?.message),{error:!0,message:E?.message||"ECS tasks endpoint unavailable",timestamp:new Date().toISOString(),isOptional:!0}}},refetchInterval:6e4,retry:0,staleTime:3e4,enabled:!0,onError:E=>{console.error("React Query ECS tasks error:",E)}}),{data:p,isLoading:w,error:T,refetch:S}=hs({queryKey:["databaseHealth"],queryFn:async()=>{try{const A=(await Ee.get("/api/health/database",{timeout:6e4,validateStatus:K=>K<500}))?.data,ae=A?.data||A;if(ae&&typeof ae=="object")return ae;throw new Error("Invalid response structure from database health endpoint")}catch(E){return console.error("Database health check failed:",E),console.error("Error details:",{message:E.message,response:E.response?.data,status:E.response?.status}),{error:!0,message:E.message||"Unknown database health error",details:E.response?.data||E.response?.status||"No additional details",timestamp:new Date().toISOString(),database:{status:"error",currentTime:new Date().toISOString(),postgresVersion:"unknown",tables:{},summary:{total_tables:0,healthy_tables:0,stale_tables:0,empty_tables:0,error_tables:1,missing_tables:0,total_records:0,total_missing_data:0}}}}},refetchInterval:!1,retry:1,staleTime:3e4,enabled:!0,onError:E=>{console.error("React Query database health error:",E)}}),_=h.useMemo(()=>[{name:"Health Check",fn:()=>gd()},{name:"API Connection",fn:()=>pd()},{name:"NAAIM Data",fn:()=>fd({limit:5})},{name:"Fear & Greed",fn:()=>md({limit:5})}],[]),j=h.useCallback(async()=>{o(!0);const E={};for(const A of _)try{const ae=Date.now();await Promise.race([A.fn(),new Promise((q,se)=>setTimeout(()=>se(new Error("Timeout")),1e4))]);const K=Date.now();E[A.name]={status:"success",response:"OK",responseTime:K-ae,critical:A.critical}}catch(ae){console.error(` ${A.name} failed:`,ae),E[A.name]={status:"error",error:ae.message||"Unknown error",responseTime:0,critical:A.critical}}n(E),o(!1)},[_]),{data:g,isLoading:f,error:C,refetch:P}=hs({queryKey:["serviceHealth"],queryFn:async()=>{try{return(await Ee.get("/api/health"))?.data}catch(E){throw console.error("Service health error:",E),E}},refetchInterval:!1,retry:1,staleTime:3e4,enabled:!0});h.useEffect(()=>{j()},[j]),h.useEffect(()=>{const E={Frontend:{API_URL:Ar.REACT_APP_API_URL||"Not set",Environment:"production",Build_Time:Ar.REACT_APP_BUILD_TIME||"Unknown",Version:Ar.REACT_APP_VERSION||"1.0.0"},Browser:{User_Agent:navigator.userAgent,Language:navigator.language,Platform:navigator.platform,Online:navigator.onLine,Cookies_Enabled:navigator.cookieEnabled},Runtime:{React_Version:tr.version,Timestamp:new Date().toISOString(),Timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}};s(E)},[]);const k=$s(g)?g:{},M=$s(p)?p:{},W=$s(r)?r:{},$=$s(m)?m:{},B=E=>{switch(E){case"success":return e.jsx(ds,{color:"success"});case"error":return e.jsx(gr,{color:"error"});case"warning":return e.jsx(Qt,{color:"warning"});default:return e.jsx(Ft,{})}};if(i)return e.jsx(ot,{maxWidth:"lg",sx:{py:4},children:e.jsxs(Se,{severity:"error",children:[e.jsx(u,{variant:"h6",children:"Service Health Error"}),e.jsx(u,{variant:"body2",children:i}),e.jsx(te,{onClick:()=>window.location.reload(),sx:{mt:2},children:"Reload Page"})]})});const U=async()=>{try{d(!0),await S()}catch(E){console.error("Failed to refresh health status:",E)}finally{d(!1)}},V=E=>{switch(E){case"success":case"healthy":case"connected":return"success";case"error":case"failed":case"disconnected":return"error";case"warning":case"stale":case"incomplete":return"warning";case"empty":return"info";default:return"default"}},J=E=>E==null?"N/A":new Intl.NumberFormat().format(E),le=E=>E?new Date(E).toLocaleString():"N/A",X=E=>{if(!E)return"N/A";const A=new Date,ae=new Date(E),K=A-ae,q=Math.floor(K/(1e3*60*60)),se=Math.floor(q/24);if(se>0)return`${se} day${se>1?"s":""} ago`;if(q>0)return`${q} hour${q>1?"s":""} ago`;{const ge=Math.floor(K/6e4);return`${ge} minute${ge>1?"s":""} ago`}};return e.jsxs(ot,{maxWidth:"xl",sx:{py:3},children:[e.jsxs(R,{sx:{mb:3},children:[e.jsx(u,{variant:"h4",component:"h1",gutterBottom:!0,children:"Service Health Dashboard"}),e.jsx(u,{variant:"subtitle1",color:"textSecondary",children:"Monitor system status, API health, and data integrity"})]}),e.jsxs(v,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,md:3,children:e.jsx(G,{children:e.jsxs(Q,{sx:{textAlign:"center"},children:[f?e.jsx(rt,{}):C?e.jsxs(e.Fragment,{children:[e.jsx(gr,{color:"error",sx:{fontSize:40,mb:1}}),e.jsx(u,{variant:"h6",color:"error",children:"Service Down"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ds,{color:"success",sx:{fontSize:40,mb:1}}),e.jsx(u,{variant:"h6",color:"success.main",children:"Service Healthy"})]}),e.jsx(te,{variant:"outlined",size:"small",startIcon:e.jsx(Ft,{}),onClick:P,sx:{mt:1},disabled:c,children:c?"Refreshing...":"Refresh Health Status"})]})})}),e.jsx(v,{item:!0,xs:12,md:3,children:e.jsx(G,{children:e.jsxs(Q,{sx:{textAlign:"center"},children:[e.jsx(Lr,{sx:{fontSize:40,mb:1,color:"primary.main"}}),e.jsx(u,{variant:"h6",children:"API Gateway"}),e.jsx(u,{variant:"body2",color:"textSecondary",children:$?.isConfigured?"Configured":"Not Configured"}),e.jsx(u,{variant:"caption",display:"block",sx:{mt:1},children:$?.urlsMatch?"URLs Match":"URL Mismatch"})]})})}),e.jsx(v,{item:!0,xs:12,md:3,children:e.jsx(G,{children:e.jsxs(Q,{sx:{textAlign:"center"},children:[e.jsx(Dn,{sx:{fontSize:40,mb:1,color:"primary.main"}}),e.jsx(u,{variant:"h6",children:"Database"}),e.jsx(u,{variant:"body2",color:"textSecondary",children:w?"Checking...":T?"Error":M?.database?.status==="connected"?"Connected":M?.database?.status==="disconnected"?"Disconnected":M?.error?"Error":"Unknown"}),T&&e.jsxs(Se,{severity:"error",sx:{mt:2},children:[e.jsx(u,{variant:"subtitle2",children:"Failed to load database health:"}),e.jsx(u,{variant:"body2",sx:{wordBreak:"break-all"},children:typeof T=="string"?T:T?.message||"Unknown error"})]}),M?.error&&e.jsxs(Se,{severity:"error",sx:{mt:2},children:[e.jsx(u,{variant:"subtitle2",children:"Database Error:"}),e.jsx(u,{variant:"body2",sx:{wordBreak:"break-all"},children:M.message||"Unknown error"})]})]})})}),e.jsx(v,{item:!0,xs:12,md:3,children:e.jsx(G,{children:e.jsxs(Q,{sx:{textAlign:"center"},children:[e.jsx(Tn,{sx:{fontSize:40,mb:1,color:"primary.main"}}),e.jsx(u,{variant:"h6",children:"Environment"}),e.jsx(u,{variant:"body2",color:"textSecondary",children:(()=>{const E=Tt&&"production"||"";return E.toLowerCase().startsWith("prod")?"Production":E.toLowerCase().startsWith("stag")?"Staging":E.toLowerCase().startsWith("dev")?"Development":E?E.charAt(0).toUpperCase()+E.slice(1):"Production"})()}),e.jsx(u,{variant:"caption",display:"block",sx:{mt:1},title:Tt&&"http://localhost:3001"||"",children:Tt?"API: http://localhost:3001":""})]})})})]}),e.jsxs(v,{container:!0,spacing:3,children:[e.jsx(v,{item:!0,xs:12,children:e.jsxs(yr,{defaultExpanded:!0,children:[e.jsx(br,{expandIcon:e.jsx(Ys,{}),children:e.jsxs(u,{variant:"h6",children:[e.jsx(Lr,{sx:{mr:1,verticalAlign:"middle"}}),"API Health"]})}),e.jsxs(vr,{children:[k&&e.jsxs(R,{children:[e.jsxs(u,{variant:"subtitle2",gutterBottom:!0,children:["Status: ",k.status]}),e.jsxs(u,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:["Last Updated:"," ",new Date(k.timestamp).toLocaleString()]}),k.api&&e.jsxs(R,{sx:{mt:2},children:[e.jsx(u,{variant:"subtitle2",children:"API Information:"}),e.jsxs(u,{variant:"body2",children:["Version: ",k.api.version]}),e.jsxs(u,{variant:"body2",children:["Environment: ",k.api.environment]})]})]}),e.jsx(R,{sx:{mt:2},children:e.jsx(te,{variant:"outlined",size:"small",startIcon:e.jsx(Za,{}),onClick:j,disabled:a,children:a?"Testing...":"Test All Endpoints"})}),Object.keys(W).length>0&&e.jsx(ft,{component:Ye,sx:{mt:2},children:e.jsxs(mt,{size:"small",children:[e.jsx(pt,{children:e.jsxs(ke,{children:[e.jsx(O,{children:"Endpoint"}),e.jsx(O,{children:"Status"}),e.jsx(O,{children:"Response Time"}),e.jsx(O,{children:"Error"})]})}),e.jsx(xt,{children:Object.entries(W).map(([E,A])=>e.jsxs(ke,{children:[e.jsx(O,{children:E}),e.jsx(O,{children:e.jsx(ze,{icon:B(A?.status),label:A?.status||"Unknown",color:V(A?.status),size:"small"})}),e.jsx(O,{children:A.responseTime?`${A.responseTime}ms`:"-"}),e.jsx(O,{children:A.error||"-"})]},E))})]})})]})]})}),e.jsx(v,{item:!0,xs:12,children:e.jsxs(yr,{defaultExpanded:!0,children:[e.jsx(br,{expandIcon:e.jsx(Ys,{}),children:e.jsxs(u,{variant:"h6",children:[e.jsx(Tn,{sx:{mr:1,verticalAlign:"middle"}}),"Scheduled Tasks Status"]})}),e.jsxs(vr,{children:[e.jsx(R,{sx:{display:"flex",justifyContent:"flex-end",mb:2},children:e.jsx(te,{variant:"outlined",size:"small",startIcon:e.jsx(Ft,{}),onClick:()=>D(),children:"Refresh"})}),y&&e.jsxs(R,{sx:{display:"flex",justifyContent:"center",p:2},children:[e.jsx(rt,{size:24}),e.jsx(u,{sx:{ml:2},children:"Loading scheduled tasks status..."})]}),b&&e.jsxs(Se,{severity:"error",sx:{mb:2},children:[e.jsx(u,{variant:"subtitle2",children:"Failed to load ECS tasks status:"}),e.jsx(u,{variant:"body2",sx:{wordBreak:"break-all"},children:typeof b=="string"?b:b?.message||"Unknown error"})]}),!y&&!b&&x&&x.tasks&&e.jsx(ft,{component:Ye,children:e.jsxs(mt,{size:"small",children:[e.jsx(pt,{children:e.jsxs(ke,{children:[e.jsx(O,{children:"Task Name"}),e.jsx(O,{children:"Status"}),e.jsx(O,{children:"Last Run"}),e.jsx(O,{children:"Freshness"}),e.jsx(O,{children:"Details"})]})}),e.jsx(xt,{children:Object.entries(x.tasks).map(([E,A])=>e.jsxs(ke,{children:[e.jsx(O,{children:e.jsx(u,{variant:"body2",fontWeight:"bold",children:E})}),e.jsx(O,{children:e.jsx(ze,{icon:A.status==="success"?e.jsx(ds,{}):A.status==="failure"?e.jsx(gr,{}):A.status==="never_run"?e.jsx(Io,{}):e.jsx(Qt,{}),label:A.status||"unknown",color:A.status==="success"?"success":A.status==="failure"?"error":A.status==="never_run"?"default":"warning",size:"small"})}),e.jsx(O,{children:A.last_run?e.jsx(Ks,{title:new Date(A.last_run).toLocaleString(),children:e.jsx(u,{variant:"body2",children:A.hours_since_run!==void 0?`${A.hours_since_run}h ago`:new Date(A.last_run).toLocaleDateString()})}):e.jsx(u,{variant:"body2",color:"text.secondary",children:"Never"})}),e.jsx(O,{children:A.freshness&&e.jsx(ze,{label:A.freshness,color:A.freshness==="current"?"success":A.freshness==="warning"?"warning":"error",size:"small"})}),e.jsx(O,{children:A.error_message?e.jsx(Ks,{title:A.error_message,children:e.jsxs(u,{variant:"body2",color:"error",noWrap:!0,children:[A.error_message.substring(0,50),"..."]})}):A.message?e.jsx(u,{variant:"body2",color:"text.secondary",children:A.message}):A.exit_code!==null&&A.exit_code!==void 0?e.jsxs(u,{variant:"body2",children:["Exit code: ",A.exit_code]}):"-"})]},E))})]})}),!y&&!b&&(!x||!x.tasks||Object.keys(x.tasks).length===0)&&e.jsxs(Se,{severity:"info",children:[e.jsx(u,{variant:"subtitle2",children:"No scheduled tasks configured"}),e.jsx(u,{variant:"body2",children:"Configure scheduled tasks in GitHub Actions workflows or AWS EventBridge."})]})]})]})}),e.jsx(v,{item:!0,xs:12,children:e.jsxs(yr,{defaultExpanded:!0,children:[e.jsx(br,{expandIcon:e.jsx(Ys,{}),children:e.jsxs(u,{variant:"h6",children:[e.jsx(Dn,{sx:{mr:1,verticalAlign:"middle"}}),"Database Health"]})}),e.jsxs(vr,{children:[e.jsx(R,{sx:{display:"flex",justifyContent:"flex-end",mb:2},children:e.jsx(te,{variant:"outlined",size:"small",startIcon:e.jsx(Ft,{}),onClick:U,disabled:c,children:c?"Updating...":"Update All Tables"})}),w&&e.jsxs(R,{sx:{display:"flex",justifyContent:"center",p:2},children:[e.jsx(rt,{size:24}),e.jsx(u,{sx:{ml:2},children:"Loading database health..."})]}),T&&e.jsxs(Se,{severity:"error",sx:{mb:2},children:[e.jsx(u,{variant:"subtitle2",children:"Failed to load database health:"}),e.jsx(u,{variant:"body2",sx:{wordBreak:"break-all"},children:typeof T=="string"?T:T?.message||"Unknown error"})]}),M&&e.jsxs(R,{children:[e.jsxs(R,{sx:{mb:2},children:[e.jsx(u,{variant:"subtitle2",gutterBottom:!0,children:"Database Status:"}),e.jsxs(u,{variant:"body2",children:["Status: ",M.database?.status||"Unknown"]}),M.database?.currentTime&&e.jsxs(u,{variant:"body2",children:["Current Time:"," ",new Date(M.database.currentTime).toLocaleString()]}),M.database?.postgresVersion&&e.jsxs(u,{variant:"body2",children:["PostgreSQL Version:"," ",M.database.postgresVersion]})]}),M.error||M.message||M.details?e.jsxs(Se,{severity:"error",sx:{mb:2},children:[e.jsx(u,{variant:"subtitle2",children:"Backend Error:"}),M.error&&e.jsxs(u,{variant:"body2",sx:{wordBreak:"break-all"},children:[e.jsx("b",{children:"Error:"})," ",M.error]}),M.message&&e.jsxs(u,{variant:"body2",sx:{wordBreak:"break-all"},children:[e.jsx("b",{children:"Message:"})," ",M.message]}),M.details&&e.jsxs(u,{variant:"body2",sx:{wordBreak:"break-all"},children:[e.jsx("b",{children:"Details:"})," ",M.details]})]}):null,M.database?.summary&&e.jsxs(R,{sx:{mb:2},children:[e.jsx(u,{variant:"subtitle2",gutterBottom:!0,children:"Summary:"}),e.jsxs(v,{container:!0,spacing:1,children:[e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsxs(u,{variant:"body2",color:"text.secondary",children:["Total Tables:"," ",M.database.summary.total_tables]})}),e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsxs(u,{variant:"body2",color:"success.main",children:["Healthy:"," ",M.database.summary.healthy_tables]})}),e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsxs(u,{variant:"body2",color:"text.secondary",children:["Stale: ",M.database.summary.stale_tables]})}),e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsxs(u,{variant:"body2",color:"error.main",children:["Errors: ",M.database.summary.error_tables]})}),e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsxs(u,{variant:"body2",color:"info.dark",children:["Empty: ",M.database.summary.empty_tables]})}),e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsxs(u,{variant:"body2",color:"text.secondary",children:["Missing:"," ",M.database.summary.missing_tables]})}),e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsxs(u,{variant:"body2",color:"text.secondary",children:["Total Records:"," ",J(M.database.summary.total_records)]})}),e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsxs(u,{variant:"body2",color:"text.secondary",children:["Missing Data:"," ",J(M.database.summary.total_missing_data)]})})]})]}),M.database?.tables&&Object.keys(M.database.tables).length>0&&e.jsxs(R,{sx:{mt:2},children:[e.jsxs(u,{variant:"subtitle2",gutterBottom:!0,children:["Table Details (",Object.keys(M.database.tables).length," ","tables monitored):"]}),e.jsx(ft,{component:Ye,sx:{maxHeight:600},children:e.jsxs(mt,{size:"small",stickyHeader:!0,children:[e.jsx(pt,{children:e.jsxs(ke,{children:[e.jsx(O,{children:"Table"}),e.jsx(O,{align:"right",children:"Records"}),e.jsx(O,{children:"Status"}),e.jsx(O,{children:"Last Updated"}),e.jsx(O,{children:"Missing Data"}),e.jsx(O,{children:"Last Checked"}),e.jsx(O,{children:"Error"})]})}),e.jsx(xt,{children:Object.entries(M.database.tables).sort(([E],[A])=>E.localeCompare(A)).map(([E,A])=>e.jsxs(ke,{sx:{"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:[e.jsx(O,{component:"th",scope:"row",children:e.jsx(u,{variant:"body2",fontFamily:"monospace",fontWeight:600,children:E})}),e.jsx(O,{align:"right",children:e.jsx(u,{variant:"body2",fontWeight:600,children:J(A.record_count)})}),e.jsx(O,{children:e.jsxs(R,{sx:{display:"flex",gap:.5,alignItems:"center"},children:[e.jsx(ze,{icon:B(A.status),label:A.status,color:V(A.status),size:"small",sx:{minWidth:80}}),A.is_stale&&e.jsx(ze,{label:"Stale",color:"warning",size:"small"})]})}),e.jsx(O,{children:e.jsxs(R,{children:[e.jsx(u,{variant:"body2",children:le(A.last_updated)}),e.jsx(u,{variant:"caption",color:"text.secondary",children:X(A.last_updated)})]})}),e.jsx(O,{align:"right",children:A.missing_data_count>0?e.jsx(u,{variant:"body2",color:"text.secondary",fontWeight:600,children:J(A.missing_data_count)}):e.jsx(u,{variant:"body2",color:"success.main",children:"0"})}),e.jsx(O,{children:e.jsx(u,{variant:"body2",children:le(A.last_checked)})}),e.jsx(O,{children:A.error&&e.jsx(Ks,{title:A.error,children:e.jsx(u,{variant:"body2",color:"error",sx:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",cursor:"help"},children:A.error.length>30?`${A.error.substring(0,30)}...`:A.error})})})]},E))})]})})]}),(!M.database?.tables||Object.keys(M.database.tables).length===0)&&e.jsxs(Se,{severity:"warning",sx:{mt:2},children:[e.jsx(u,{variant:"subtitle2",children:"No table data found"}),e.jsx(u,{variant:"body2",children:"The database health check did not return any table information. This could mean the health_status table is empty or the backend is not properly configured."})]}),M.database?.note&&e.jsx(Se,{severity:"info",sx:{mt:2},children:M.database.note})]})]})]})})]})]})}const vd=async()=>{throw new Error("AWS Amplify Auth is not configured")},jd=async()=>{throw new Error("AWS Amplify Auth is not configured")},wd=async()=>{throw new Error("AWS Amplify Auth is not configured")},Sd=async()=>{throw new Error("AWS Amplify Auth is not configured")},lo=async()=>{throw new Error("AWS Amplify Auth is not configured")},Rr=async()=>{throw new Error("AWS Amplify Auth is not configured")},Cd=async()=>{throw new Error("AWS Amplify Auth is not configured")},Pd=async()=>{throw new Error("AWS Amplify Auth is not configured")},Dd=async()=>{throw new Error("AWS Amplify Auth is not configured")},Td={configure:()=>{},getConfig:()=>({})},pn=()=>typeof window<"u"&&window.__CONFIG__?window.__CONFIG__:{},wt=()=>{const t=pn(),s=t.USER_POOL_ID||"",r=t.USER_POOL_CLIENT_ID||"";return!!(s&&r&&s!==""&&r!==""&&s!=="us-east-1_DUMMY"&&r!=="dummy-client-id")},_d=()=>{const t=pn();return{Auth:{Cognito:{userPoolId:t.USER_POOL_ID||""||"us-east-1_DUMMY",userPoolClientId:t.USER_POOL_CLIENT_ID||""||"dummy-client-id",region:"us-east-1",signUpVerificationMethod:"code",loginWith:{oauth:{domain:t.USER_POOL_DOMAIN||""||"dummy-domain",scopes:["email","profile","openid"],redirectSignIn:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",redirectSignOut:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",responseType:"code"},username:!0,email:!0}}}}};function kd(){try{const t=_d(),s=pn();console.log(" [AMPLIFY CONFIG] Configuration details:",{userPoolId:t.Auth.Cognito.userPoolId,clientId:t.Auth.Cognito.userPoolClientId,domain:t.Auth.Cognito.loginWith.oauth.domain,runtimeConfigAvailable:!!Object.keys(s).length,isCognitoConfigured:wt()}),wt()||(console.warn("  Cognito not configured - using dummy values for development"),console.log("Environment variables needed:"),console.log("- VITE_COGNITO_USER_POOL_ID"),console.log("- VITE_COGNITO_CLIENT_ID"),console.log("- VITE_COGNITO_DOMAIN"),console.log("Or set runtime config in window.__CONFIG__")),Td.configure(t),console.log(" Amplify configured successfully")}catch(t){console.error(" Failed to configure Amplify:",t)}}const co="dev_users",Mr="dev_session",uo="dev_pending";class Fe{constructor(){this.users=this.loadUsers(),this.session=this.loadSession(),this.pendingVerifications=this.loadPendingVerifications(),this.ensureDevUser()}loadUsers(){if(typeof localStorage>"u")return{};const s=localStorage.getItem(co);return s?JSON.parse(s):{}}saveUsers(){typeof localStorage<"u"&&localStorage.setItem(co,JSON.stringify(this.users))}loadSession(){if(typeof localStorage>"u")return null;const s=localStorage.getItem(Mr);return s?JSON.parse(s):null}saveSession(s){this.session=s,typeof localStorage<"u"&&localStorage.setItem(Mr,JSON.stringify(s))}clearSession(){this.session=null,typeof localStorage<"u"&&localStorage.removeItem(Mr)}loadPendingVerifications(){if(typeof localStorage>"u")return{};const s=localStorage.getItem(uo);return s?JSON.parse(s):{}}savePendingVerifications(){typeof localStorage<"u"&&localStorage.setItem(uo,JSON.stringify(this.pendingVerifications))}ensureDevUser(){const s={username:"devuser",email:"argeropolos@gmail.com",firstName:"Dev",lastName:"User",password:"password123",confirmed:!0,createdAt:Date.now()};this.users.devuser=s,this.users["argeropolos@gmail.com"]=s,this.saveUsers(),typeof console<"u"&&(console.log(" DEV: Ensured default dev user exists"),console.log(" Email: argeropolos@gmail.com"),console.log(" Username: devuser"),console.log(" Password: password123"),console.log(" User can sign in with either email or username"))}generateVerificationCode(){return Math.floor(1e5+Math.random()*9e5).toString()}generateDevTokens(s){return{accessToken:"dev-bypass-token",idToken:"dev-bypass-token",refreshToken:"dev-bypass-token"}}async signUp(s,r,n,a,o){if(this.users[s])throw new Error("UsernameExistsException: Username already exists");if(this.pendingVerifications[s])throw new Error("UsernameExistsException: Username already exists");if(Object.values(this.users).find(d=>d.email===n))throw new Error("UsernameExistsException: Email already exists");if(Object.values(this.pendingVerifications).find(d=>d.email===n))throw new Error("UsernameExistsException: Email already exists");const c=this.generateVerificationCode();return this.pendingVerifications[s]={username:s,password:r,email:n,firstName:a,lastName:o,verificationCode:c,createdAt:Date.now()},this.savePendingVerifications(),typeof console<"u"&&(console.log(" DEV: Email verification code sent to",n),console.log(" DEV: Verification code:",c),console.log(" DEV AUTH: Verification code for",n,":",c),console.log(" DEV AUTH: Copy this code to complete registration")),typeof window<"u"&&window.DEV_AUTH_DEBUG!==!1&&(window.lastDevCode=c,typeof console<"u"&&console.log(" DEV AUTH: Access code via window.lastDevCode")),typeof window<"u"&&window.location&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&typeof window.alert=="function"&&setTimeout(()=>{alert(` DEV AUTH VERIFICATION CODE

For: ${n}
Code: ${c}

Copy this code to complete your registration.`)},100),{isSignUpComplete:!1,nextStep:{signUpStep:"CONFIRM_SIGN_UP",codeDeliveryDetails:{deliveryMedium:"EMAIL",destination:n}}}}async confirmSignUp(s,r){typeof console<"u"&&console.log(" DEV: Confirming sign up for",s);const n=this.pendingVerifications[s];if(!n)throw new Error("UserNotFoundException: User not found");if(n.verificationCode!==r)throw new Error("CodeMismatchException: Invalid verification code");if(Date.now()-n.createdAt>300*1e3)throw new Error("ExpiredCodeException: Verification code has expired");return this.users[s]={username:s,email:n.email,firstName:n.firstName,lastName:n.lastName,password:n.password,confirmed:!0,createdAt:Date.now()},this.saveUsers(),delete this.pendingVerifications[s],this.savePendingVerifications(),typeof console<"u"&&console.log(" DEV: User confirmed successfully"),{isSignUpComplete:!0}}async signIn(s,r){typeof console<"u"&&console.log(" DEV: Signing in user",s);let n=this.users[s],a=s;if(!n){const l=Object.entries(this.users).find(([,c])=>c.email===s);l&&(a=l[0],n=l[1],typeof console<"u"&&console.log(" DEV: Found user by email, username is",a))}if(!n)throw this.pendingVerifications[s]?new Error("UserNotConfirmedException: User not confirmed"):Object.values(this.pendingVerifications).find(d=>d.email===s)?new Error("UserNotConfirmedException: User not confirmed"):new Error("UserNotFoundException: User not found");if(!n.confirmed)throw new Error("UserNotConfirmedException: User not confirmed");if(n.password!==r)throw new Error("NotAuthorizedException: Invalid password");const o=this.generateDevTokens(a),i={user:{username:n.username,userId:`dev-${n.username}`,email:n.email,firstName:n.firstName,lastName:n.lastName},tokens:o,expiresAt:Date.now()+36e5};return this.saveSession(i),typeof console<"u"&&console.log(" DEV: User signed in successfully"),{isSignedIn:!0,user:i.user,tokens:i.tokens}}async signOut(){return typeof console<"u"&&console.log(" DEV: Signing out user"),this.clearSession(),!0}async getCurrentUser(){if(typeof window<"u"&&window.__DEV_AUTH_OVERRIDE__)return window.__DEV_AUTH_OVERRIDE__.user;if(!this.session||Date.now()>this.session.expiresAt)throw new Error("No authenticated user");return this.session.user}async fetchAuthSession(){if(typeof window<"u"&&window.__DEV_AUTH_OVERRIDE__)return{tokens:window.__DEV_AUTH_OVERRIDE__.tokens};if(!this.session||Date.now()>this.session.expiresAt)throw new Error("No valid session");return{tokens:this.session.tokens}}async resetPassword(s){typeof console<"u"&&console.log(" DEV: Initiating password reset for",s);const r=this.users[s];if(!r)throw new Error("UserNotFoundException: User not found");const n=this.generateVerificationCode();return this.pendingVerifications[`reset_${s}`]={username:s,resetCode:n,createdAt:Date.now()},this.savePendingVerifications(),typeof console<"u"&&(console.log(" DEV: Password reset code sent to",r.email),console.log(" DEV: Reset code:",n),console.log(" DEV AUTH: Password reset code for",r.email,":",n),console.log(" DEV AUTH: Copy this code to reset your password")),typeof window<"u"&&window.DEV_AUTH_DEBUG!==!1&&(window.lastDevResetCode=n,typeof console<"u"&&console.log(" DEV AUTH: Access code via window.lastDevResetCode")),typeof window<"u"&&window.location&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&typeof window.alert=="function"&&setTimeout(()=>{alert(` DEV AUTH PASSWORD RESET CODE

For: ${r.email}
Reset Code: ${n}

Copy this code to reset your password.`)},100),{nextStep:{resetPasswordStep:"CONFIRM_RESET_PASSWORD_WITH_CODE",codeDeliveryDetails:{deliveryMedium:"EMAIL",destination:r.email}}}}async confirmResetPassword(s,r,n){typeof console<"u"&&console.log(" DEV: Confirming password reset for",s);const a=`reset_${s}`,o=this.pendingVerifications[a];if(!o)throw new Error("Invalid reset request");if(o.resetCode!==r)throw new Error("CodeMismatchException: Invalid verification code");if(Date.now()-o.createdAt>300*1e3)throw new Error("ExpiredCodeException: Verification code has expired");return this.users[s].password=n,this.saveUsers(),delete this.pendingVerifications[a],this.savePendingVerifications(),typeof console<"u"&&console.log(" DEV: Password reset successfully"),!0}isAuthenticated(){return!!(this.session&&Date.now()<this.session.expiresAt)}getCurrentUserInfo(){return this.isAuthenticated()?this.session.user:null}async signUpWrapper(s){try{const{username:r,password:n,email:a,firstName:o,lastName:i}=s;if(this.users[r])return{success:!1,error:{code:"UsernameExistsException",message:"Username already exists"}};if(this.pendingVerifications[r])return{success:!1,error:{code:"UsernameExistsException",message:"Username already exists"}};if(Object.values(this.users).find(m=>m.email===a))return{success:!1,error:{code:"UsernameExistsException",message:"Email already exists"}};if(Object.values(this.pendingVerifications).find(m=>m.email===a))return{success:!1,error:{code:"UsernameExistsException",message:"Email already exists"}};const d=await Fe.prototype.signUp.call(this,r,n,a,o||"Dev",i||"User");return{success:!0,user:{username:r,email:a},userConfirmed:!1,isSignUpComplete:d.isSignUpComplete,nextStep:d.nextStep}}catch(r){return{success:!1,error:{code:r.message.split(":")[0],message:r.message.split(":")[1]||r.message}}}}async signInWrapper(s,r){try{const n=await Fe.prototype.signIn.call(this,s,r);return{success:!0,user:n.user,tokens:n.tokens,isSignedIn:n.isSignedIn}}catch(n){return{success:!1,error:{code:n.message.split(":")[0],message:n.message.split(":")[1]||n.message}}}}validatePassword(s){const r=[];return s.length<8&&r.push("Password must be at least 8 characters long"),/[a-z]/.test(s)||r.push("Password must contain at least one lowercase letter"),/[A-Z]/.test(s)||r.push("Password must contain at least one uppercase letter"),/\d/.test(s)||r.push("Password must contain at least one digit"),/[!@#$%^&*(),.?":{}|<>]/.test(s)||r.push("Password must contain at least one special character"),{isValid:r.length===0,errors:r}}async getCurrentUserWrapper(){try{return{success:!0,user:await Fe.prototype.getCurrentUser.call(this)}}catch(s){return{success:!1,error:{code:"NotAuthorizedException",message:s.message}}}}async getJwtToken(){try{return(await this.fetchAuthSession()).tokens.accessToken}catch{return null}}async signOutWrapper(){try{return await Fe.prototype.signOut.call(this),{success:!0}}catch(s){return{success:!1,error:{code:"SignOutError",message:s.message}}}}async forgotPasswordWrapper(s){try{return await Fe.prototype.resetPassword.call(this,s),{success:!0}}catch(r){return{success:!1,error:{code:r.message.split(":")[0],message:r.message.split(":")[1]||r.message}}}}async confirmResetPasswordWrapper(s,r,n){try{return await Fe.prototype.confirmResetPassword.call(this,s,r,n),{success:!0}}catch(a){return{success:!1,error:{code:a.message.split(":")[0],message:a.message.split(":")[1]||a.message}}}}validateJwtToken(s){return!!(s&&typeof s=="string"&&s.length>0)}isTokenExpired(s){return!1}async confirmMFA(s,r){return{success:!0,user:s||{username:"testuser"}}}async updateUserAttributes(s,r){try{return this.users[s.username]&&(Object.assign(this.users[s.username],r),this.saveUsers()),{success:!0}}catch(n){return{success:!1,error:{code:"UpdateAttributesError",message:n.message}}}}}const de=new Fe;de.signUp=(...t)=>{if(t.length===1&&typeof t[0]=="object")return de.signUpWrapper(t[0]);{const[s,r,n,a,o]=t;return de.signUpWrapper({username:s,password:r,email:n,firstName:a,lastName:o})}};de.signIn=(...t)=>de.signInWrapper(...t);de.getCurrentUser=(...t)=>de.getCurrentUserWrapper(...t);de.signOut=(...t)=>de.signOutWrapper(...t);de.forgotPassword=(...t)=>de.forgotPasswordWrapper(...t);de.forgotPasswordSubmit=(...t)=>de.confirmResetPasswordWrapper(...t);de.changePassword=(...t)=>de.confirmResetPasswordWrapper(...t);de.generateVerificationCode=(...t)=>Fe.prototype.generateVerificationCode.call(de,...t);de.generateDevTokens=(...t)=>Fe.prototype.generateDevTokens.call(de,...t);de.loadUsers=(...t)=>Fe.prototype.loadUsers.call(de,...t);de.saveUsers=(...t)=>Fe.prototype.saveUsers.call(de,...t);de.loadSession=(...t)=>Fe.prototype.loadSession.call(de,...t);de.saveSession=(...t)=>Fe.prototype.saveSession.call(de,...t);de.loadPendingVerifications=(...t)=>Fe.prototype.loadPendingVerifications.call(de,...t);de.savePendingVerifications=(...t)=>Fe.prototype.savePendingVerifications.call(de,...t);de.confirmSignUp=(...t)=>Fe.prototype.confirmSignUp.call(de,...t);de.validateJwtToken=(...t)=>Fe.prototype.validateJwtToken.call(de,...t);de.isTokenExpired=(...t)=>Fe.prototype.isTokenExpired.call(de,...t);de.confirmMFA=(...t)=>Fe.prototype.confirmMFA.call(de,...t);de.updateUserAttributes=(...t)=>Fe.prototype.updateUserAttributes.call(de,...t);de.validatePassword=(...t)=>Fe.prototype.validatePassword.call(de,...t);de.ensureDevUser=(...t)=>Fe.prototype.ensureDevUser.call(de,...t);class Ed{constructor(){this.refreshTimer=null,this.warningTimer=null,this.sessionTimeoutTimer=null,this.isRefreshing=!1,this.config={tokenRefreshInterval:2700*1e3,sessionTimeout:480*60*1e3,warningTime:600*1e3,maxRefreshAttempts:3,rememberMeDuration:720*60*60*1e3},this.callbacks={onTokenRefresh:null,onSessionWarning:null,onSessionExpired:null,onRefreshError:null},this.sessionData={lastActivity:Date.now(),loginTime:null,refreshAttempts:0,rememberMe:!1}}initialize(s){this.authContext=s,this.setupEventListeners(),this.startSessionTracking(),this.scheduleTokenRefresh(),console.log(" Session manager initialized")}setCallbacks(s){this.callbacks={...this.callbacks,...s}}startSession(s=!1){const r=Date.now();this.sessionData={lastActivity:r,loginTime:r,refreshAttempts:0,rememberMe:s};const n=s?localStorage:sessionStorage;n.setItem("sessionStart",r.toString()),n.setItem("rememberMe",s.toString()),this.startSessionTracking(),this.scheduleTokenRefresh(),console.log(` Session started (remember me: ${s})`)}endSession(){this.clearAllTimers(),this.clearSessionStorage(),console.log(" Session ended")}updateActivity(){this.sessionData.lastActivity=Date.now(),this.sessionTimeoutTimer&&(clearTimeout(this.sessionTimeoutTimer),this.startSessionTimeout())}scheduleTokenRefresh(){this.refreshTimer&&clearInterval(this.refreshTimer),this.refreshTimer=setInterval(async()=>{await this.refreshTokens()},this.config.tokenRefreshInterval),console.log(" Token refresh scheduled")}async refreshTokens(){if(!(this.isRefreshing||!this.authContext)){this.isRefreshing=!0;try{const s=await this.authContext.refreshSession();if(s.success)this.sessionData.refreshAttempts=0,console.log(" Tokens refreshed successfully"),this.callbacks.onTokenRefresh&&this.callbacks.onTokenRefresh(s);else throw new Error(s.error||"Token refresh failed")}catch(s){console.error(" Token refresh failed:",s),this.sessionData.refreshAttempts++,this.callbacks.onRefreshError&&this.callbacks.onRefreshError(s,this.sessionData.refreshAttempts),this.sessionData.refreshAttempts>=this.config.maxRefreshAttempts&&(console.error(" Max refresh attempts reached, logging out"),await this.handleSessionExpired())}finally{this.isRefreshing=!1}}}startSessionTracking(){this.startSessionTimeout(),this.startWarningTimer()}startSessionTimeout(){this.sessionTimeoutTimer&&clearTimeout(this.sessionTimeoutTimer);const s=this.sessionData.rememberMe?this.config.rememberMeDuration:this.config.sessionTimeout;this.sessionTimeoutTimer=setTimeout(async()=>{await this.handleSessionExpired()},s)}startWarningTimer(){this.warningTimer&&clearTimeout(this.warningTimer);const r=(this.sessionData.rememberMe?this.config.rememberMeDuration:this.config.sessionTimeout)-this.config.warningTime;this.warningTimer=setTimeout(()=>{this.handleSessionWarning()},r)}handleSessionWarning(){console.log(" Session expiring soon"),this.callbacks.onSessionWarning&&this.callbacks.onSessionWarning({timeRemaining:this.config.warningTime,canExtend:!0})}async handleSessionExpired(){console.log(" Session expired"),this.callbacks.onSessionExpired&&this.callbacks.onSessionExpired(),this.authContext&&await this.authContext.logout(),this.endSession()}extendSession(){console.log(" Extending session"),this.updateActivity(),this.startSessionTimeout(),this.startWarningTimer()}setupEventListeners(){const s=["mousedown","mousemove","keypress","scroll","touchstart","click"],r=()=>{this.updateActivity()};s.forEach(n=>{document.addEventListener(n,r,!0)}),document.addEventListener("visibilitychange",()=>{document.hidden||this.updateActivity()})}clearAllTimers(){this.refreshTimer&&(clearInterval(this.refreshTimer),this.refreshTimer=null),this.warningTimer&&(clearTimeout(this.warningTimer),this.warningTimer=null),this.sessionTimeoutTimer&&(clearTimeout(this.sessionTimeoutTimer),this.sessionTimeoutTimer=null)}clearSessionStorage(){localStorage.removeItem("sessionStart"),localStorage.removeItem("rememberMe"),sessionStorage.removeItem("sessionStart"),sessionStorage.removeItem("rememberMe")}getSessionInfo(){const s=Date.now(),r=s-(this.sessionData.loginTime||s),n=this.sessionData.rememberMe?this.config.rememberMeDuration:this.config.sessionTimeout;return{isActive:!0,sessionDuration:r,timeRemaining:n-r,lastActivity:this.sessionData.lastActivity,rememberMe:this.sessionData.rememberMe,refreshAttempts:this.sessionData.refreshAttempts}}isSessionValid(){const s=Date.now(),r=s-(this.sessionData.loginTime||s),n=this.sessionData.rememberMe?this.config.rememberMeDuration:this.config.sessionTimeout;return r<n}}const ns=new Ed,Id=({open:t,timeRemaining:s,onExtend:r,onLogout:n,onClose:a})=>{const[o,i]=h.useState(s),[l,c]=h.useState(!1),d=h.useRef(!0);h.useEffect(()=>{i(s)},[s]),h.useEffect(()=>{if(!t)return;const b=setInterval(()=>{if(!d.current){clearInterval(b);return}i(D=>{const p=D-1e3;return p<=0?(clearInterval(b),d.current&&n(),0):p})},1e3);return()=>{clearInterval(b)}},[t,n]),h.useEffect(()=>()=>{d.current=!1},[]);const m=async()=>{c(!0);try{await r(),a()}catch(b){console.error("Failed to extend session:",b)}finally{c(!1)}},x=b=>{const D=Math.max(0,Math.floor(b/1e3)),p=Math.floor(D/60),w=D%60;return`${p}:${w.toString().padStart(2,"0")}`},y=(s-o)/s*100;return e.jsxs(kt,{open:t,onClose:a,maxWidth:"sm",fullWidth:!0,disableEscapeKeyDown:!0,PaperProps:{sx:{borderRadius:2,border:"2px solid",borderColor:"warning.main"}},children:[e.jsx(Zt,{children:e.jsxs(R,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(Qt,{color:"warning"}),e.jsx(u,{variant:"h6",children:"Session Expiring Soon"})]})}),e.jsxs(Et,{children:[e.jsxs(Se,{severity:"warning",sx:{mb:2},children:["Your session will expire in ",e.jsx("strong",{children:x(o)})]}),e.jsxs(R,{sx:{mb:2},children:[e.jsxs(R,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(Ja,{fontSize:"small"}),e.jsx(u,{variant:"body2",color:"text.secondary",children:"Time Remaining"})]}),e.jsx(Xa,{variant:"determinate",value:100-y,color:o<6e4?"error":"warning",sx:{height:8,borderRadius:4}})]}),e.jsx(u,{variant:"body2",color:"text.secondary",children:'You will be automatically logged out when the timer reaches zero. Click "Stay Signed In" to extend your session.'})]}),e.jsxs(Vt,{sx:{p:2,gap:1},children:[e.jsx(te,{onClick:n,color:"error",variant:"outlined",disabled:l,children:"Sign Out Now"}),e.jsx(te,{onClick:m,color:"primary",variant:"contained",disabled:l,startIcon:l?e.jsx(rt,{size:16}):null,children:l?"Extending...":"Stay Signed In"})]})]})},Ad={user:null,isAuthenticated:!1,isLoading:!0,error:null,tokens:null},ce={LOADING:"LOADING",LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGIN_FAILURE:"LOGIN_FAILURE",LOGOUT:"LOGOUT",SET_ERROR:"SET_ERROR",CLEAR_ERROR:"CLEAR_ERROR",UPDATE_TOKENS:"UPDATE_TOKENS"};function Rd(t,s){switch(s.type){case ce.LOADING:return{...t,isLoading:s.payload};case ce.LOGIN_SUCCESS:return{...t,user:s.payload.user,tokens:s.payload.tokens,isAuthenticated:!0,isLoading:!1,error:null};case ce.LOGIN_FAILURE:return{...t,user:null,tokens:null,isAuthenticated:!1,isLoading:!1,error:s.payload};case ce.LOGOUT:return localStorage.removeItem("accessToken"),localStorage.removeItem("authToken"),sessionStorage.removeItem("accessToken"),sessionStorage.removeItem("authToken"),{...t,user:null,tokens:null,isAuthenticated:!1,isLoading:!1,error:null};case ce.SET_ERROR:return{...t,error:s.payload,isLoading:!1};case ce.CLEAR_ERROR:return{...t,error:null};case ce.UPDATE_TOKENS:return{...t,tokens:s.payload};default:return t}}const da=h.createContext(null),Md={user:null,isAuthenticated:!1,isLoading:!0,error:null,tokens:null,login:async()=>{},signup:async()=>{},confirmAccount:async()=>{},forgotPassword:async()=>{},resetPassword:async()=>{}};function Od({children:t}){const[s,r]=h.useReducer(Rd,Ad),[n,a]=h.useState({show:!1,timeRemaining:0}),o=h.useCallback(async()=>{try{const j=await Rr({forceRefresh:!0});return j.tokens?(r({type:ce.UPDATE_TOKENS,payload:{accessToken:j.tokens.accessToken.toString(),idToken:j.tokens.idToken?.toString(),refreshToken:j.tokens.refreshToken?.toString()}}),{success:!0}):{success:!1,error:"No valid tokens"}}catch(j){return console.error("Session refresh error:",j),{success:!1,error:S(j)}}},[]),i=h.useCallback(async()=>{try{return localStorage.removeItem("accessToken"),localStorage.removeItem("authToken"),sessionStorage.removeItem("accessToken"),sessionStorage.removeItem("authToken"),wt()?(await jd(),r({type:ce.LOGOUT}),{success:!0}):(console.log("Cognito not configured - using development authentication"),await de.signOut(),r({type:ce.LOGOUT}),{success:!0})}catch(j){return console.error("Logout error:",j),r({type:ce.LOGOUT}),{success:!1,error:S(j)}}},[]),l=h.useCallback(async()=>{try{if(r({type:ce.LOADING,payload:!0}),(typeof globalThis<"u"&&globalThis.__vitest_worker__||typeof window<"u"&&window.__vitest_worker__||!1||typeof process<"u"&&!1||typeof window<"u"&&window.navigator?.userAgent?.includes("jsdom")||typeof globalThis<"u"&&(globalThis.vi||globalThis.vitest||globalThis.__vitest__))&&!(typeof window<"u"&&window.playwright)){console.log("Unit test environment detected - skipping auth check"),r({type:ce.LOADING,payload:!1}),r({type:ce.LOGOUT});return}const g=!0,f=wt(),C=!1;if(g&&f&&!C){console.log(" PRODUCTION MODE - Using AWS Cognito authentication");try{const P=await lo(),k=await Rr();if(P&&k.tokens){const M={accessToken:k.tokens.accessToken.toString(),idToken:k.tokens.idToken?.toString(),refreshToken:k.tokens.refreshToken?.toString()};localStorage.setItem("accessToken",M.accessToken),r({type:ce.LOGIN_SUCCESS,payload:{user:{username:P.username,userId:P.userId,email:P.signInDetails?.loginId||P.username,firstName:P.userAttributes?.given_name||"",lastName:P.userAttributes?.family_name||"",signInDetails:P.signInDetails},tokens:M}}),console.log(" User authenticated with Cognito");return}}catch(P){console.log("No Cognito session found:",P)}}if(!f||C){console.log(C?" DEVELOPMENT MODE - Dev auth forced via VITE_FORCE_DEV_AUTH=true":f?" DEVELOPMENT MODE - Using dev auth in DEV environment":" DEVELOPMENT MODE - Cognito not configured, using dev auth fallback");try{const P=await de.getCurrentUser(),k=await de.fetchAuthSession();if(P&&k.tokens){localStorage.setItem("accessToken",k.tokens.accessToken),r({type:ce.LOGIN_SUCCESS,payload:{user:P,tokens:k.tokens}}),console.log(" Development user authenticated");return}}catch(P){console.log("No dev auth session found:",P.message)}}r({type:ce.LOGOUT})}catch(j){console.log("Authentication check failed:",j),r({type:ce.LOGOUT})}},[]);h.useEffect(()=>{l()},[l]),h.useEffect(()=>{if(s.isAuthenticated&&s.user)try{const j={refreshSession:o,logout:i};ns.initialize(j),ns.setCallbacks({onTokenRefresh:f=>{console.log(" Tokens refreshed automatically")},onSessionWarning:f=>{a({show:!0,timeRemaining:f.timeRemaining})},onSessionExpired:async()=>{console.log(" Session expired, logging out"),await i()},onRefreshError:(f,C)=>{console.error(` Token refresh failed (attempt ${C}):`,f)}});const g=localStorage.getItem("rememberMe")==="true";ns.startSession(g)}catch(j){console.error(" Failed to initialize session manager:",j)}else s.isAuthenticated||(ns.endSession(),a({show:!1,timeRemaining:0}));return()=>{ns.clearAllTimers()}},[s.isAuthenticated,s.user,o,i,a]);const c=async(j,g)=>{try{r({type:ce.LOADING,payload:!0}),r({type:ce.CLEAR_ERROR});const f=!0,C=wt(),P=!1;if(f&&C&&!P)try{console.log(" PRODUCTION LOGIN - Attempting AWS Cognito");const{isSignedIn:W,nextStep:$}=await vd({username:j,password:g});if(W){const B=await lo(),U=await Rr(),V={accessToken:U.tokens.accessToken.toString(),idToken:U.tokens.idToken?.toString(),refreshToken:U.tokens.refreshToken?.toString()};return localStorage.setItem("accessToken",V.accessToken),r({type:ce.LOGIN_SUCCESS,payload:{user:{username:B.username,userId:B.userId,email:B.signInDetails?.loginId||B.username,firstName:B.userAttributes?.given_name||"",lastName:B.userAttributes?.family_name||"",signInDetails:B.signInDetails},tokens:V}}),console.log(" Production login successful"),{success:!0}}else return{success:!1,nextStep:$,message:"Additional authentication step required"}}catch(W){console.warn(" Cognito authentication failed, trying dev auth fallback:",W)}if(!C||P||!1){console.log(P?" DEVELOPMENT LOGIN - Dev auth forced via VITE_FORCE_DEV_AUTH=true":" DEVELOPMENT LOGIN - Using dev auth fallback");try{const W=await de.signIn(j,g);if(!W||!W.success||!W.tokens){const $=W.error?.message||"Login failed - no tokens received";return console.error("Dev auth login failed:",$),r({type:ce.LOGIN_FAILURE,payload:$}),{success:!1,error:$}}return localStorage.setItem("accessToken",W.tokens.accessToken),r({type:ce.LOGIN_SUCCESS,payload:{user:W.user,tokens:W.tokens}}),console.log(" Development login successful"),{success:!0}}catch(W){console.error("Dev auth login error:",W);const $=S(W);return r({type:ce.LOGIN_FAILURE,payload:$}),{success:!1,error:$}}}console.error(" CRITICAL: Both Cognito and dev auth paths were skipped or failed"),console.error("Debug info:",{isProductionBuild:f,cognitoConfigured:C,forceDevAuth:P,isDev:!1,shouldUseDevAuth:!C||P||!1});const M=C?"Authentication service is temporarily unavailable. Please try again later.":"Authentication is not configured. Please contact support or use development mode.";throw new Error(M)}catch(f){console.error("Login error:",f);const C=S(f);return r({type:ce.LOGIN_FAILURE,payload:C}),{success:!1,error:C}}},d=async(j,g,f,C,P)=>{try{if(r({type:ce.LOADING,payload:!0}),r({type:ce.CLEAR_ERROR}),!wt()){console.log("Cognito not configured - using development authentication");try{const W=await de.signUp(j,g,f,C,P);return r({type:ce.LOADING,payload:!1}),{success:!0,isComplete:W.isSignUpComplete,nextStep:W.nextStep,message:W.isSignUpComplete?"Registration completed successfully":"Please check your email for verification code"}}catch(W){console.error("Dev auth registration error:",W);const $=S(W);return r({type:ce.SET_ERROR,payload:$}),{success:!1,error:$}}}const{isSignUpComplete:k,nextStep:M}=await wd({username:j,password:g,options:{userAttributes:{email:f,given_name:C,family_name:P}}});return r({type:ce.LOADING,payload:!1}),{success:!0,isComplete:k,nextStep:M,message:k?"Registration completed successfully":"Please check your email for verification code"}}catch(k){console.error("Registration error:",k);const M=S(k);return r({type:ce.SET_ERROR,payload:M}),{success:!1,error:M}}},m=async(j,g)=>{try{if(r({type:ce.LOADING,payload:!0}),r({type:ce.CLEAR_ERROR}),!wt()){console.log("Cognito not configured - using development authentication");try{const C=await de.confirmSignUp(j,g);return r({type:ce.LOADING,payload:!1}),{success:!0,isComplete:C.isSignUpComplete,message:"Account confirmed successfully. You can now sign in."}}catch(C){console.error("Dev auth confirmation error:",C);const P=S(C);return r({type:ce.SET_ERROR,payload:P}),{success:!1,error:P}}}const{isSignUpComplete:f}=await Sd({username:j,confirmationCode:g});return r({type:ce.LOADING,payload:!1}),{success:!0,isComplete:f,message:"Account confirmed successfully. You can now sign in."}}catch(f){console.error("Confirmation error:",f);const C=S(f);return r({type:ce.SET_ERROR,payload:C}),{success:!1,error:C}}},x=async j=>{try{if(r({type:ce.LOADING,payload:!0}),r({type:ce.CLEAR_ERROR}),!wt()){console.log("Cognito not configured - using development authentication");try{return await new Promise(g=>setTimeout(g,1e3)),r({type:ce.LOADING,payload:!1}),{success:!0,message:"New verification code sent to your email (development mode)"}}catch(g){console.error("Dev auth resend error:",g);const f=S(g);return r({type:ce.SET_ERROR,payload:f}),{success:!1,error:f}}}return await Dd({username:j}),r({type:ce.LOADING,payload:!1}),{success:!0,message:"New verification code sent to your email"}}catch(g){console.error("Resend confirmation error:",g);const f=S(g);return r({type:ce.SET_ERROR,payload:f}),{success:!1,error:f}}},y=async j=>{try{if(r({type:ce.LOADING,payload:!0}),r({type:ce.CLEAR_ERROR}),!wt()){console.log("Cognito not configured - using development authentication");try{const f=await de.resetPassword(j);return r({type:ce.LOADING,payload:!1}),{success:!0,nextStep:f.nextStep,message:"Password reset code sent to your email"}}catch(f){console.error("Dev auth password reset error:",f);const C=S(f);return r({type:ce.SET_ERROR,payload:C}),{success:!1,error:C}}}const g=await Cd({username:j});return r({type:ce.LOADING,payload:!1}),{success:!0,nextStep:g.nextStep,message:"Password reset code sent to your email"}}catch(g){console.error("Forgot password error:",g);const f=S(g);return r({type:ce.SET_ERROR,payload:f}),{success:!1,error:f}}},b=async(j,g,f)=>{try{if(r({type:ce.LOADING,payload:!0}),r({type:ce.CLEAR_ERROR}),!wt()){console.log("Cognito not configured - using development authentication");try{return await de.confirmResetPassword(j,g,f),r({type:ce.LOADING,payload:!1}),{success:!0,message:"Password reset successfully. You can now sign in with your new password."}}catch(C){console.error("Dev auth confirm password reset error:",C);const P=S(C);return r({type:ce.SET_ERROR,payload:P}),{success:!1,error:P}}}return await Pd({username:j,confirmationCode:g,newPassword:f}),r({type:ce.LOADING,payload:!1}),{success:!0,message:"Password reset successfully. You can now sign in with your new password."}}catch(C){console.error("Confirm password reset error:",C);const P=S(C);return r({type:ce.SET_ERROR,payload:P}),{success:!1,error:P}}},D=()=>{r({type:ce.CLEAR_ERROR})},p=async()=>{ns.extendSession(),a({show:!1,timeRemaining:0})},w=async()=>{a({show:!1,timeRemaining:0}),await i()},T=()=>{a({show:!1,timeRemaining:0})},S=j=>j.name==="NotAuthorizedException"?"Invalid username or password":j.name==="UserNotConfirmedException"?"Please confirm your account before signing in":j.name==="UsernameExistsException"?"Username already exists":j.name==="CodeMismatchException"?"Invalid verification code":j.name==="ExpiredCodeException"?"Verification code has expired":j.message||"An unexpected error occurred",_={...s,login:c,register:d,confirmRegistration:m,resendConfirmationCode:x,logout:i,forgotPassword:y,confirmForgotPassword:b,refreshSession:o,clearError:D,checkAuthState:l};return e.jsxs(da.Provider,{value:_,children:[t,e.jsx(Id,{open:n.show,timeRemaining:n.timeRemaining,onExtend:p,onLogout:w,onClose:T})]})}function At(){const t=h.useContext(da);if(t===null)return console.warn("useAuth called outside AuthProvider - using defaults"),Md;if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const ua=(t,s="Financial Dashboard")=>{h.useEffect(()=>{const r=document.title;return t&&(document.title=`${t} | ${s}`),()=>{document.title=r&&r.trim()?r:s}},[t,s])};var Ss={},Or={};const Fd=Mi(ei);var ho;function xn(){return ho||(ho=1,(function(t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s.createSvgIcon}});var s=Fd})(Or)),Or}var fo;function Nd(){if(fo)return Ss;fo=1;var t=sn();Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.default=void 0;var s=t(xn()),r=rn();return Ss.default=(0,s.default)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),Ss}var Ld=Nd();const ha=Fs(Ld);var Cs={},mo;function Vd(){if(mo)return Cs;mo=1;var t=sn();Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.default=void 0;var s=t(xn()),r=rn();return Cs.default=(0,s.default)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),Cs}var Wd=Vd();const fa=Fs(Wd);var Ps={},po;function Ud(){if(po)return Ps;po=1;var t=sn();Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.default=void 0;var s=t(xn()),r=rn();return Ps.default=(0,s.default)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),Ps}var $d=Ud();const Js=Fs($d),Bd=["Interactive Brokers","Fidelity","Charles Schwab","E*TRADE","TD Ameritrade","Webull","Robinhood","Other"];function zd(){const[t,s]=h.useState(!1),[r,n]=h.useState([]),[a,o]=h.useState(!1),[i,l]=h.useState(null),[c,d]=h.useState(!1),[m,x]=h.useState(null),[y,b]=h.useState({symbol:"",quantity:"",average_cost:"",current_price:"",broker:"",broker_account_id:"",purchase_date:"",notes:""});h.useEffect(()=>{t&&D()},[t]);const D=async()=>{o(!0),l(null);try{const f=await(await fetch("/api/portfolio/manual-positions")).json();if(f.success){const C=f.data||[];n(Array.isArray(C)?C:[])}else l(f.error||"Failed to fetch positions")}catch(g){l(g.message)}finally{o(!1)}},p=()=>{x(null),b({symbol:"",quantity:"",average_cost:"",current_price:"",broker:"",broker_account_id:"",purchase_date:"",notes:""}),d(!0)},w=g=>{x(g.id),b({symbol:g.symbol,quantity:g.quantity.toString(),average_cost:g.average_cost.toString(),current_price:g.current_price?g.current_price.toString():"",broker:g.broker||"",broker_account_id:g.broker_account_id||"",purchase_date:g.purchase_date?g.purchase_date.split("T")[0]:"",notes:g.notes||""}),d(!0)},T=async g=>{if(window.confirm("Are you sure you want to delete this position?"))try{const C=await(await fetch(`/api/portfolio/manual-positions/${g}`,{method:"DELETE"})).json();C.success?(n(r.filter(P=>P.id!==g)),l(null)):l(C.error||"Failed to delete position")}catch(f){l(f.message)}},S=async()=>{l(null);try{const g=m?`/api/portfolio/manual-positions/${m}`:"/api/portfolio/manual-positions",f=m?"PATCH":"POST",C={...y,quantity:parseFloat(y.quantity),average_cost:parseFloat(y.average_cost),current_price:y.current_price?parseFloat(y.current_price):null},k=await(await fetch(g,{method:f,headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})).json();k.success?(d(!1),D()):l(k.error||"Failed to save position")}catch(g){l(g.message)}},_=g=>{const{name:f,value:C}=g.target;b(P=>({...P,[f]:C}))},j=g=>{const f=g.quantity*g.average_cost,C=g.quantity*(g.current_price||g.average_cost),P=C-f,k=f>0?P/f*100:0;return{costBasis:f,marketValue:C,unrealizedGain:P,unrealizedGainPct:k}};return e.jsxs(e.Fragment,{children:[e.jsx(te,{variant:"contained",color:"primary",startIcon:e.jsx(Js,{}),onClick:()=>s(!0),sx:{mb:2},children:"Manage Manual Positions"}),e.jsxs(kt,{open:t,onClose:()=>s(!1),maxWidth:"lg",fullWidth:!0,children:[e.jsx(Zt,{children:"Manual Positions Management"}),e.jsxs(Et,{children:[i&&e.jsx(Se,{severity:"error",sx:{mb:2},children:i}),c?e.jsxs(R,{sx:{mt:2,display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[e.jsx(be,{label:"Symbol",name:"symbol",value:y.symbol,onChange:_,placeholder:"e.g., AAPL",required:!0}),e.jsx(be,{label:"Quantity",name:"quantity",type:"number",value:y.quantity,onChange:_,inputProps:{step:"0.001"},required:!0}),e.jsx(be,{label:"Average Cost",name:"average_cost",type:"number",value:y.average_cost,onChange:_,inputProps:{step:"0.01"},required:!0}),e.jsx(be,{label:"Current Price",name:"current_price",type:"number",value:y.current_price,onChange:_,inputProps:{step:"0.01"}}),e.jsxs(et,{fullWidth:!0,children:[e.jsx(tt,{children:"Broker"}),e.jsx(st,{name:"broker",value:y.broker,onChange:_,label:"Broker",children:Bd.map(g=>e.jsx(ee,{value:g,children:g},g))})]}),e.jsx(be,{label:"Broker Account ID",name:"broker_account_id",value:y.broker_account_id,onChange:_}),e.jsx(be,{label:"Purchase Date",name:"purchase_date",type:"date",value:y.purchase_date,onChange:_,InputLabelProps:{shrink:!0}}),e.jsx(be,{label:"Notes",name:"notes",value:y.notes,onChange:_,multiline:!0,rows:2,sx:{gridColumn:"1 / -1"}}),e.jsxs(R,{sx:{gridColumn:"1 / -1",display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(te,{onClick:()=>d(!1),children:"Cancel"}),e.jsxs(te,{onClick:S,variant:"contained",color:"primary",children:[m?"Update":"Add"," Position"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{variant:"contained",startIcon:e.jsx(Js,{}),onClick:p,sx:{mb:2},children:"Add Position"}),a?e.jsx("p",{children:"Loading positions..."}):r.length===0?e.jsx(Se,{severity:"info",children:"No manual positions added yet."}):e.jsx(ft,{component:Ye,children:e.jsxs(mt,{size:"small",children:[e.jsx(pt,{children:e.jsxs(ke,{sx:{backgroundColor:"#f5f5f5"},children:[e.jsx(O,{children:"Symbol"}),e.jsx(O,{align:"right",children:"Quantity"}),e.jsx(O,{align:"right",children:"Avg Cost"}),e.jsx(O,{align:"right",children:"Current Price"}),e.jsx(O,{align:"right",children:"Market Value"}),e.jsx(O,{align:"right",children:"Gain/Loss"}),e.jsx(O,{align:"right",children:"Gain/Loss %"}),e.jsx(O,{align:"center",children:"Broker"}),e.jsx(O,{align:"center",children:"Actions"})]})}),e.jsx(xt,{children:r.map(g=>{const f=j(g);return e.jsxs(ke,{children:[e.jsx(O,{children:e.jsx("strong",{children:g.symbol})}),e.jsx(O,{align:"right",children:g.quantity.toFixed(4)}),e.jsxs(O,{align:"right",children:["$",g.average_cost.toFixed(2)]}),e.jsxs(O,{align:"right",children:["$",(g.current_price||g.average_cost).toFixed(2)]}),e.jsxs(O,{align:"right",children:["$",f.marketValue.toFixed(2)]}),e.jsxs(O,{align:"right",sx:{color:f.unrealizedGain>=0?"green":"red",fontWeight:"bold"},children:["$",f.unrealizedGain.toFixed(2)]}),e.jsxs(O,{align:"right",sx:{color:f.unrealizedGainPct>=0?"green":"red",fontWeight:"bold"},children:[f.unrealizedGainPct.toFixed(2),"%"]}),e.jsx(O,{align:"center",children:g.broker||""}),e.jsxs(O,{align:"center",children:[e.jsx(We,{size:"small",onClick:()=>w(g),title:"Edit",children:e.jsx(fa,{fontSize:"small"})}),e.jsx(We,{size:"small",color:"error",onClick:()=>T(g.id),title:"Delete",children:e.jsx(ha,{fontSize:"small"})})]})]},g.id)})})]})})]})]}),e.jsx(Vt,{children:e.jsx(te,{onClick:()=>s(!1),children:"Close"})})]})]})}const Hd=["buy","sell"],Gd=["filled","pending","cancelled"];function qd(){const[t,s]=h.useState(!1),[r,n]=h.useState([]),[a,o]=h.useState(!1),[i,l]=h.useState(null),[c,d]=h.useState(!1),[m,x]=h.useState(null),[y,b]=h.useState({symbol:"",trade_type:"buy",quantity:"",price:"",execution_date:"",status:"filled"});h.useEffect(()=>{t&&D()},[t]);const D=async()=>{o(!0),l(null);try{const f=await(await fetch("/api/trades/manual")).json();if(f.success){const C=f.data||[];n(Array.isArray(C)?C:[])}else l(f.error||"Failed to fetch trades")}catch(g){l(g.message)}finally{o(!1)}},p=()=>{x(null),b({symbol:"",trade_type:"buy",quantity:"",price:"",execution_date:new Date().toISOString().split("T")[0],status:"filled"}),d(!0)},w=g=>{x(g.id),b({symbol:g.symbol,trade_type:g.trade_type,quantity:g.quantity.toString(),price:g.price.toString(),execution_date:g.execution_date.split("T")[0],status:g.status}),d(!0)},T=async g=>{if(window.confirm("Are you sure you want to delete this trade?"))try{const C=await(await fetch(`/api/trades/manual/${g}`,{method:"DELETE"})).json();C.success?(n(r.filter(P=>P.id!==g)),l(null)):l(C.error||"Failed to delete trade")}catch(f){l(f.message)}},S=async()=>{l(null);try{const g=m?`/api/trades/manual/${m}`:"/api/trades/manual",f=m?"PATCH":"POST",C={...y,quantity:parseFloat(y.quantity),price:parseFloat(y.price)},k=await(await fetch(g,{method:f,headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})).json();k.success?(d(!1),D()):l(k.error||"Failed to save trade")}catch(g){l(g.message)}},_=g=>{const{name:f,value:C}=g.target;b(P=>({...P,[f]:C}))},j=(g,f)=>g*f;return e.jsxs(e.Fragment,{children:[e.jsx(te,{variant:"contained",color:"primary",startIcon:e.jsx(Js,{}),onClick:()=>s(!0),sx:{mb:2,ml:1},children:"Record Manual Trade"}),e.jsxs(kt,{open:t,onClose:()=>s(!1),maxWidth:"lg",fullWidth:!0,children:[e.jsx(Zt,{children:"Manual Trade Entry"}),e.jsxs(Et,{children:[i&&e.jsx(Se,{severity:"error",sx:{mb:2},children:i}),c?e.jsxs(R,{sx:{mt:2,display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[e.jsx(be,{label:"Symbol",name:"symbol",value:y.symbol,onChange:_,placeholder:"e.g., TSLA",required:!0}),e.jsxs(et,{fullWidth:!0,required:!0,children:[e.jsx(tt,{children:"Trade Type"}),e.jsx(st,{name:"trade_type",value:y.trade_type,onChange:_,label:"Trade Type",children:Hd.map(g=>e.jsx(ee,{value:g,children:g.toUpperCase()},g))})]}),e.jsx(be,{label:"Quantity",name:"quantity",type:"number",value:y.quantity,onChange:_,inputProps:{step:"0.001"},required:!0}),e.jsx(be,{label:"Price",name:"price",type:"number",value:y.price,onChange:_,inputProps:{step:"0.01"},required:!0}),e.jsx(be,{label:"Execution Date",name:"execution_date",type:"date",value:y.execution_date,onChange:_,InputLabelProps:{shrink:!0},required:!0}),e.jsxs(et,{fullWidth:!0,children:[e.jsx(tt,{children:"Status"}),e.jsx(st,{name:"status",value:y.status,onChange:_,label:"Status",children:Gd.map(g=>e.jsx(ee,{value:g,children:g.toUpperCase()},g))})]}),e.jsxs(R,{sx:{gridColumn:"1 / -1",display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(te,{onClick:()=>d(!1),children:"Cancel"}),e.jsxs(te,{onClick:S,variant:"contained",color:"primary",children:[m?"Update":"Add"," Trade"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{variant:"contained",startIcon:e.jsx(Js,{}),onClick:p,sx:{mb:2},children:"Add Trade"}),a?e.jsx("p",{children:"Loading trades..."}):r.length===0?e.jsx(Se,{severity:"info",children:"No manual trades recorded yet."}):e.jsx(ft,{component:Ye,children:e.jsxs(mt,{size:"small",children:[e.jsx(pt,{children:e.jsxs(ke,{sx:{backgroundColor:"#f5f5f5"},children:[e.jsx(O,{children:"Date"}),e.jsx(O,{children:"Symbol"}),e.jsx(O,{children:"Type"}),e.jsx(O,{align:"right",children:"Qty"}),e.jsx(O,{align:"right",children:"Price"}),e.jsx(O,{align:"right",children:"Total Value"}),e.jsx(O,{children:"Status"}),e.jsx(O,{align:"center",children:"Actions"})]})}),e.jsx(xt,{children:r.map(g=>{const f=parseFloat(g.quantity),C=parseFloat(g.price),P=j(f,C);return e.jsxs(ke,{children:[e.jsx(O,{children:g.execution_date}),e.jsx(O,{children:e.jsx("strong",{children:g.symbol})}),e.jsx(O,{children:g.trade_type.toUpperCase()}),e.jsx(O,{align:"right",children:f.toFixed(4)}),e.jsxs(O,{align:"right",children:["$",C.toFixed(2)]}),e.jsxs(O,{align:"right",children:["$",P.toFixed(2)]}),e.jsx(O,{children:g.status}),e.jsxs(O,{align:"center",children:[e.jsx(We,{size:"small",onClick:()=>w(g),title:"Edit",children:e.jsx(fa,{fontSize:"small"})}),e.jsx(We,{size:"small",color:"error",onClick:()=>T(g.id),title:"Delete",children:e.jsx(ha,{fontSize:"small"})})]})]},g.id)})})]})})]})]}),e.jsx(Vt,{children:e.jsx(te,{onClick:()=>s(!1),children:"Close"})})]})]})}const Bs=({icon:t,label:s,value:r,unit:n="",color:a="primary",interpretation:o=""})=>{const i=Dt();return e.jsx(G,{sx:{height:"100%",background:i.palette.mode==="dark"?`linear-gradient(135deg, ${i.palette.background.paper} 0%, ${i.palette.background.default} 100%)`:`linear-gradient(135deg, #ffffff 0%, ${i.palette.grey[50]} 100%)`,borderLeft:`4px solid ${i.palette[a]?.main||i.palette.primary.main}`,boxShadow:i.palette.mode==="dark"?"0 2px 8px rgba(0,0,0,0.3)":"0 2px 4px rgba(0,0,0,0.05)",transition:"all 0.3s ease","&:hover":{boxShadow:i.palette.mode==="dark"?"0 4px 12px rgba(0,0,0,0.4)":"0 4px 8px rgba(0,0,0,0.1)",transform:"translateY(-2px)"}},children:e.jsxs(Q,{children:[e.jsx(R,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1,children:e.jsx(t,{sx:{color:`${i.palette[a]?.main||i.palette.primary.main}`,fontSize:28}})}),e.jsxs(u,{variant:"h4",sx:{fontWeight:700,mb:.5},children:[r,n&&e.jsx("span",{style:{fontSize:"0.6em",marginLeft:"4px"},children:n})]}),e.jsx(u,{variant:"body2",color:"text.secondary",sx:{mb:1},children:s}),o&&e.jsx(u,{variant:"caption",sx:{color:i.palette.text.secondary,display:"block",fontStyle:"italic"},children:o})]})})},oe=({label:t,value:s,unit:r=""})=>{const n=Dt();return e.jsxs(R,{sx:{p:2,backgroundColor:n.palette.background.default,borderRadius:1},children:[e.jsx(u,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:t}),e.jsxs(u,{variant:"h6",sx:{fontWeight:600},children:[s,r&&e.jsx("span",{style:{fontSize:"0.7em",marginLeft:"4px"},children:r})]})]})};function Kd(){ua("Portfolio Dashboard");const{user:t}=At(),s=Dt();sr(s.breakpoints.down("md"));const{data:r,isLoading:n,refetch:a}=hs({queryKey:["portfolioData"],queryFn:()=>ud(),staleTime:6e4}),o=r?.data?.summary||{},i=r?.data?.positions||[],l=r?.data?.daily_returns||[],c=r?.data?.metadata||{};console.log(" Portfolio Summary Data:",{portfolio_value:o.portfolio_value,total_pnl:o.total_pnl,total_return:o.total_return,return_1m:o.return_1m,return_1y:o.return_1y,volatility:o.volatility_annualized,sharpe_ratio:o.sharpe_ratio,holdings_count:o.holdings_count}),console.log(" Positions:",i.length,"holdings");const d={data:{summary:{portfolio_value:o.portfolio_value,total_cost:o.total_cost,total_pnl:o.total_pnl||null,total_pnl_percent:o.total_pnl_percent||null,total_return:o.total_return||null,holdings_count:o.holdings_count||0,volatility_annualized:o.volatility_annualized,sharpe_ratio:o.sharpe_ratio,sortino_ratio:o.sortino_ratio,calmar_ratio:o.calmar_ratio,max_drawdown:o.max_drawdown,beta:o.beta,return_1m:o.return_1m,return_3m:o.return_3m,return_6m:o.return_6m,return_1y:o.return_1y,return_3y:o.return_3y,return_rolling_1y:o.return_rolling_1y,ytd_return:o.ytd_return,win_rate:o.win_rate,best_day_gain:o.best_day_gain,worst_day_loss:o.worst_day_loss,avg_daily_return:o.avg_daily_return,herfindahl_index:o.herfindahl_index,effective_n:o.effective_n,diversification_ratio:o.diversification_ratio,top_1_weight:o.top_1_weight,top_5_weight:o.top_5_weight,top_10_weight:o.top_10_weight},positions:i,daily_returns:l,benchmark_metrics:o,metadata:c}},m=n,x=a,[y,b]=h.useState(!1),[D,p]=h.useState(null),w=async()=>{b(!0),p(null);try{console.log(" Step 1: Importing from Alpaca...");const C=await(await fetch("/api/portfolio/import/alpaca",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer dev-bypass-token"}})).json();console.log(" Alpaca import complete:",C),console.log(" Step 2: Consolidating from all sources...");const k=await(await fetch("/api/portfolio/sync",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer dev-bypass-token"}})).json();if(console.log(" Portfolio consolidated:",k),k.success){const{consolidated_holdings:M,total_value:W,sources_synced:$}=k.data,B=` Portfolio synced! ${M} holdings from Alpaca (${$.alpaca_positions}), Manual (${$.manual_positions}), and Trades (${$.from_trades}) | Total Value: $${W.toLocaleString()}`;p({type:"success",message:B}),x()}else p({type:"error",message:` Sync failed: ${k.error}`})}catch(f){p({type:"error",message:` Sync error: ${f.message}`})}finally{b(!1)}},T=r?.data?.signals||[],S=h.useMemo(()=>d?.data?.daily_returns?.slice(-252).map((f,C)=>({date:C,return:f,cumulative:f}))||[],[d]),_=h.useMemo(()=>{if(!i||i.length===0)return[];const f={};let C=0;return i.forEach(P=>{const k=P.sector||"Other",M=P.market_value_dollars!=null?Math.abs(P.market_value_dollars):null,W=P.return_percent!=null?P.return_percent:null;f[k]||(f[k]={weight:0,return:0,count:0}),M!=null&&(f[k].weight+=M,C+=M),W!=null&&(f[k].return+=W),f[k].count+=1}),Object.entries(f).map(([P,k])=>({sector:P,weight:C>0?k.weight/C*100:0,return:k.count>0?k.return/k.count:0})).sort((P,k)=>k.weight-P.weight)},[i]),j=h.useMemo(()=>{const f=d?.data?.benchmark_metrics;return f?{return:f.return_1y||f.return_6m||f.return_3m||f.return_1m||null,risk:f.volatility||null,volatility:f.volatility,sharpeRatio:f.sharpe_ratio,alpha:f.alpha,outperformance:f.outperformance,correlation:f.correlation_with_spy}:{return:null,risk:null}},[d]);if(m)return e.jsx(ot,{maxWidth:"lg",sx:{py:4},children:e.jsx(R,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(rt,{})})});const g=Object.values(o).some(f=>f!==0&&f!==void 0)||i&&i.length>0;return e.jsxs(ot,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(R,{sx:{mb:4},children:[e.jsxs(R,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[e.jsxs(R,{children:[e.jsx(u,{variant:"h4",sx:{fontWeight:700,mb:1},children:"Portfolio Dashboard"}),e.jsx(u,{variant:"body2",color:"text.secondary",children:"Professional-grade portfolio analytics - All metrics on one page"})]}),e.jsxs(R,{sx:{display:"flex",gap:1,flexWrap:"wrap",justifyContent:"flex-end"},children:[e.jsx(te,{variant:"contained",startIcon:e.jsx(Ft,{}),onClick:w,disabled:y,sx:{backgroundColor:f=>f.palette.primary.main,"&:hover":{backgroundColor:f=>f.palette.primary.dark},"&:disabled":{opacity:.6}},children:y?"Syncing...":"Sync with Alpaca"}),e.jsx(zd,{}),e.jsx(qd,{})]})]}),D&&e.jsx(G,{sx:{p:2,mb:2,backgroundColor:D.type==="success"?f=>f.palette.success.light:f=>f.palette.error.light,border:`1px solid ${D.type==="success"?"#4caf50":"#f44336"}`},children:e.jsx(u,{variant:"body2",sx:{color:D.type==="success"?"#2e7d32":"#c62828"},children:D.message})})]}),!g&&e.jsx(G,{sx:{p:4,mb:4},children:e.jsx(u,{align:"center",color:"text.secondary",children:"No portfolio data available. Add holdings to see comprehensive metrics."})}),g&&e.jsxs(e.Fragment,{children:[e.jsxs(R,{sx:{mb:4},children:[e.jsxs(u,{variant:"h5",sx:{fontWeight:700,mb:3,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Vr,{sx:{color:"primary.main"}})," Executive Summary & Top Holdings"]}),e.jsxs(v,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(Bs,{icon:Wr,label:"Portfolio Value",value:o.portfolio_value!=null?`$${o.portfolio_value.toLocaleString(void 0,{maximumFractionDigits:2})}`:"N/A",unit:"",color:"success"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(Bs,{icon:Vr,label:"Total P&L",value:o.total_pnl!=null?`$${o.total_pnl.toLocaleString(void 0,{maximumFractionDigits:2})}`:"N/A",unit:"",color:o.total_pnl>=0?"success":"error"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(Bs,{icon:_n,label:"Return %",value:o.total_pnl_percent!=null?o.total_pnl_percent.toFixed(2):"N/A",unit:"%",color:o.total_pnl_percent>=0?"success":"error"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(Bs,{icon:Qt,label:"Holdings",value:o.holdings_count!=null?o.holdings_count:"N/A",unit:"positions",color:"info"})})]}),e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"Portfolio Holdings Distribution (All Positions)"}),e.jsxs(Q,{children:[e.jsx(Ne,{width:"100%",height:400,children:e.jsxs(Uo,{children:[e.jsx($o,{data:i.filter(f=>f.weight_percent!==null&&f.weight_percent!==void 0&&parseFloat(f.weight_percent)>0).map(f=>({name:f.symbol,value:parseFloat(f.weight_percent)})),cx:"50%",cy:"50%",labelLine:!1,label:({name:f,value:C})=>C>1?`${f}: ${C.toFixed(1)}%`:f,outerRadius:110,fill:"#8884d8",dataKey:"value",children:i.map((f,C)=>{const P=["#1976d2","#43a047","#ffb300","#8e24aa","#e53935","#00acc1","#6a1b9a","#0277bd","#ef6c00","#d32f2f","#1e88e5","#43a047","#fb8c00","#5e35b1","#00838f"];return e.jsx(Bo,{fill:P[C%P.length]},`cell-${C}`)})}),e.jsx(Le,{formatter:f=>`${f!=null?f.toFixed(2):"0.00"}%`})]})}),i.length>5&&e.jsx("div",{style:{marginTop:16,fontSize:"0.875rem",color:"#666"},children:e.jsxs("p",{children:["Showing all ",i.length," positions  Positions < 1% shown by symbol only"]})})]})]}),e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"Holdings Performance & Gains/Losses",subheader:"Current P&L by position"}),e.jsx(Q,{children:e.jsx(Ne,{width:"100%",height:300,children:e.jsxs(vt,{data:i.slice(0,15).map((f,C)=>({name:f.symbol,gain:f.gain_loss_dollars!==null&&f.gain_loss_dollars!==void 0?parseFloat(f.gain_loss_dollars):null,value:f.market_value_dollars!==null&&f.market_value_dollars!==void 0?parseFloat(f.market_value_dollars):null})),layout:"vertical",margin:{top:5,right:30,left:80,bottom:5},children:[e.jsx(qe,{strokeDasharray:"3 3"}),e.jsx(Ke,{type:"number"}),e.jsx(Re,{dataKey:"name",type:"category",width:75}),e.jsx(Le,{formatter:f=>`$${f?.toFixed(2)||"0.00"}`,contentStyle:{backgroundColor:"#fff",border:"1px solid #ccc"}}),e.jsx(lt,{}),e.jsx(Oe,{dataKey:"gain",fill:"#43a047",name:"Gain/Loss ($)",radius:[0,8,8,0]}),e.jsx(Oe,{dataKey:"value",fill:"#1976d2",name:"Position Value ($)",radius:[0,8,8,0]})]})})})]})]}),T&&T.length>0&&e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"Trading Signals",subheader:`Latest signal recommendations - ${T.length} signals`}),e.jsxs(Q,{children:[e.jsx(v,{container:!0,spacing:2,children:T.slice(0,10).map((f,C)=>e.jsx(v,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsxs(R,{sx:{p:2,backgroundColor:P=>P.palette.mode==="dark"?"#1e1e1e":"#f5f5f5",borderRadius:1,border:"1px solid",borderColor:P=>P.palette.mode==="dark"?"#333":"#ddd"},children:[e.jsx(R,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:e.jsx(u,{variant:"h6",sx:{fontWeight:600},children:f.symbol||f.ticker})}),f.score&&e.jsxs(u,{variant:"caption",color:"text.secondary",children:["Score: ",(f.score*100).toFixed(1),"%"]}),f.timestamp&&e.jsx(u,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:new Date(f.timestamp).toLocaleDateString()})]})},C))}),T.length===0&&e.jsx(u,{variant:"body2",color:"text.secondary",align:"center",sx:{py:2},children:"No trading signals available at this time."})]})]}),e.jsxs(R,{sx:{mb:4,mt:6},children:[e.jsxs(u,{variant:"h5",sx:{fontWeight:700,mb:3,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Wr,{sx:{color:"success.main"}})," Performance Metrics & Analysis"]}),e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"Core Performance Metrics",subheader:"Total returns across different timeframes"}),e.jsx(Q,{children:e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Total Return",value:o.total_return!=null?o.total_return.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"1Y Return",value:o.return_1y!=null?o.return_1y.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"3Y Return",value:o.return_3y!=null?o.return_3y.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"YTD Return",value:o.ytd_return!=null?o.ytd_return.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Portfolio Value",value:o.portfolio_value!=null?`$${(o.portfolio_value/1e3).toFixed(1)}`:"N/A",unit:"K"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Holdings Count",value:i.length||"0",unit:""})})]})})]}),e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"Rolling Period Returns",subheader:"Returns across multiple time horizons"}),e.jsxs(Q,{children:[e.jsxs(v,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"1M",value:o.return_1m!=null?o.return_1m.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"3M",value:o.return_3m!=null?o.return_3m.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"6M",value:o.return_6m!=null?o.return_6m.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"1Y Rolling",value:o.return_rolling_1y!=null?o.return_rolling_1y.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"YTD",value:o.ytd_return!=null?o.ytd_return.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Daily Volatility",value:o.volatility_annualized!=null?(o.volatility_annualized/Math.sqrt(252)).toFixed(3):"N/A",unit:"%"})})]}),e.jsx(Ne,{width:"100%",height:320,children:e.jsxs(Br,{data:[{period:"1M",return:o.return_1m},{period:"3M",return:o.return_3m},{period:"6M",return:o.return_6m},{period:"1Y",return:o.return_rolling_1y},{period:"YTD",return:o.ytd_return}],children:[e.jsx(qe,{strokeDasharray:"3 3"}),e.jsx(Ke,{dataKey:"period"}),e.jsx(Re,{label:{value:"Return (%)",angle:-90,position:"insideLeft"}}),e.jsx(Le,{formatter:f=>`${f?.toFixed(2)}%`}),e.jsx(lt,{}),e.jsx(Kt,{type:"monotone",dataKey:"return",stroke:"#1976d2",strokeWidth:2.5,dot:{fill:"#1976d2",r:6},name:"Period Return"})]})})]})]}),e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"Cumulative Performance vs SPY",subheader:"Portfolio growth compared to S&P 500 benchmark"}),e.jsx(Q,{children:e.jsx(Ne,{width:"100%",height:350,children:e.jsxs(Br,{data:S.length>0?S:[{date:0,portfolio:1e4,spy:1e4},{date:252,portfolio:12e3,spy:11500}],children:[e.jsx(qe,{strokeDasharray:"3 3"}),e.jsx(Ke,{dataKey:"date",label:{value:"Trading Days",position:"insideBottomRight",offset:-10}}),e.jsx(Re,{label:{value:"Value ($)",angle:-90,position:"insideLeft"}}),e.jsx(Le,{formatter:f=>`$${f?.toFixed(0)||"0"}`,labelFormatter:f=>`Day ${f}`}),e.jsx(lt,{}),e.jsx(Kt,{type:"monotone",dataKey:"portfolio",stroke:"#1976d2",strokeWidth:2.5,dot:!1,name:"Portfolio",isAnimationActive:!1}),e.jsx(Kt,{type:"monotone",dataKey:"spy",stroke:"#43a047",strokeWidth:2,dot:!1,name:"SPY Benchmark",strokeDasharray:"5 5",isAnimationActive:!1})]})})})]}),e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"SPY Benchmark Comparison",subheader:"How your portfolio compares to the S&P 500"}),e.jsxs(Q,{children:[e.jsxs(v,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(R,{sx:{p:2,backgroundColor:f=>f.palette.background.default,borderRadius:1},children:[e.jsx(u,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"Portfolio Return"}),e.jsx(u,{variant:"h6",sx:{fontWeight:600,color:o.total_return!==null&&o.total_return!==void 0?o.total_return>=0?"success.main":"error.main":"text.secondary"},children:o.total_return!==null&&o.total_return!==void 0?`${o.total_return.toFixed(2)}%`:"N/A"})]})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(R,{sx:{p:2,backgroundColor:f=>f.palette.background.default,borderRadius:1},children:[e.jsx(u,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"SPY Return"}),e.jsx(u,{variant:"h6",sx:{fontWeight:600,color:"info.main"},children:j.return!==null&&j.return!==void 0?`${j.return.toFixed(2)}%`:"N/A"})]})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(R,{sx:{p:2,backgroundColor:f=>f.palette.background.default,borderRadius:1},children:[e.jsx(u,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"Outperformance"}),o.total_return!==null&&o.total_return!==void 0&&j?.return!==null&&j?.return!==void 0?e.jsxs(u,{variant:"h6",sx:{fontWeight:600,color:o.total_return-j.return>=0?"success.main":"error.main"},children:[(o.total_return-j.return).toFixed(2),"%"]}):e.jsx(u,{variant:"h6",sx:{fontWeight:600,color:"text.secondary"},children:"N/A"})]})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(R,{sx:{p:2,backgroundColor:f=>f.palette.background.default,borderRadius:1},children:[e.jsx(u,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"Correlation"}),e.jsx(u,{variant:"h6",sx:{fontWeight:600},children:o.correlation_with_spy!==null&&o.correlation_with_spy!==void 0?o.correlation_with_spy.toFixed(2):""})]})})]}),e.jsx(Ne,{width:"100%",height:300,children:e.jsxs(vt,{data:[{name:"Portfolio",return:o.total_return,risk:o.volatility_annualized},{name:"SPY",return:j?.return,risk:j?.risk}],children:[e.jsx(qe,{strokeDasharray:"3 3"}),e.jsx(Ke,{dataKey:"name"}),e.jsx(Re,{yAxisId:"left",label:{value:"Return (%)",angle:-90,position:"insideLeft"}}),e.jsx(Re,{yAxisId:"right",orientation:"right",label:{value:"Volatility (%)",angle:90,position:"insideRight"}}),e.jsx(Le,{}),e.jsx(lt,{}),e.jsx(Oe,{yAxisId:"left",dataKey:"return",fill:"#1976d2",name:"Total Return %",radius:[8,8,0,0]}),e.jsx(Oe,{yAxisId:"right",dataKey:"risk",fill:"#ff9800",name:"Volatility %",radius:[8,8,0,0]})]})}),e.jsxs(u,{variant:"body2",sx:{mt:3,p:2,backgroundColor:f=>f.palette.mode==="dark"?"rgba(25, 118, 210, 0.1)":"rgba(25, 118, 210, 0.05)",borderRadius:1},children:[e.jsx("strong",{children:"Analysis:"})," ",o.correlation_with_spy>.8?" Your portfolio moves closely with the market (High correlation)":o.correlation_with_spy>.5?" Moderate correlation with the market":" Low correlation - Good diversification from the broad market",". Your beta of ",o.beta?.toFixed(2)||"1.0"," means ",o.beta>1.2?"your portfolio is MORE volatile than the market.":o.beta<.8?"your portfolio is LESS volatile than the market.":"your portfolio moves roughly with the market."]})]})]}),e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"Daily Performance Impact",subheader:"Win rate, best/worst days, and daily volatility"}),e.jsxs(Q,{children:[e.jsxs(v,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Win Rate",value:o.win_rate!==null&&o.win_rate!==void 0?o.win_rate.toFixed(1):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Best Day",value:o.best_day_gain!==null&&o.best_day_gain!==void 0?o.best_day_gain.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Worst Day",value:o.worst_day_loss!==null&&o.worst_day_loss!==void 0?o.worst_day_loss.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Top 5 Days Impact",value:o.top_5_days_contribution!==null&&o.top_5_days_contribution!==void 0?o.top_5_days_contribution.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Positive Days",value:o.win_rate!==null&&o.win_rate!==void 0?o.win_rate.toFixed(1):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Avg Daily Vol",value:o.volatility_annualized!==null&&o.volatility_annualized!==void 0?(o.volatility_annualized/Math.sqrt(252)).toFixed(3):"N/A",unit:"%"})})]}),e.jsx(Ne,{width:"100%",height:300,children:e.jsxs(vt,{data:[...o.win_rate!==null&&o.win_rate!==void 0?[{metric:"Win Rate",value:o.win_rate}]:[],...o.best_day_gain!==null&&o.best_day_gain!==void 0?[{metric:"Best Day",value:o.best_day_gain}]:[],...o.worst_day_loss!==null&&o.worst_day_loss!==void 0?[{metric:"Worst Day",value:Math.abs(o.worst_day_loss)}]:[],...o.top_5_days_contribution!==null&&o.top_5_days_contribution!==void 0?[{metric:"Top 5 Days",value:o.top_5_days_contribution}]:[]],children:[e.jsx(qe,{strokeDasharray:"3 3"}),e.jsx(Ke,{dataKey:"metric"}),e.jsx(Re,{label:{value:"Return (%)",angle:-90,position:"insideLeft"}}),e.jsx(Le,{formatter:f=>`${f?.toFixed(2)}%`}),e.jsx(Oe,{dataKey:"value",fill:"#43a047",name:"Value",radius:[8,8,0,0]})]})})]})]}),e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"Relative Performance Metrics",subheader:"How you're tracking against SPY in detail"}),e.jsx(Q,{children:e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Tracking Error",value:o.tracking_error!==null&&o.tracking_error!==void 0?o.tracking_error.toFixed(4):"N/A",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Active Return",value:o.active_return!==null&&o.active_return!==void 0?o.active_return.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Information Ratio",value:o.information_ratio!==null&&o.information_ratio!==void 0?o.information_ratio.toFixed(2):"N/A",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Rel Volatility",value:o.relative_volatility!==null&&o.relative_volatility!==void 0?o.relative_volatility.toFixed(2):"N/A",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Beta vs SPY",value:o.beta!==null&&o.beta!==void 0?o.beta.toFixed(2):"N/A",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Alpha",value:o.alpha!==null&&o.alpha!==void 0?o.alpha.toFixed(2):"N/A",unit:"%"})})]})})]})]}),e.jsxs(R,{sx:{mb:4,mt:6},children:[e.jsxs(u,{variant:"h5",sx:{fontWeight:700,mb:3,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Qt,{sx:{color:"error.main"}})," Risk Metrics & Quality Indicators"]}),e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"Volatility & Risk Metrics",subheader:"Core risk indicators for your portfolio"}),e.jsx(Q,{children:e.jsxs(v,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Volatility",value:o.volatility_annualized?.toFixed(2)||"",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Downside Dev",value:o.downside_deviation?.toFixed(2)||"",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Beta vs SPY",value:o.beta?.toFixed(2)||"",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Max Drawdown",value:o.max_drawdown?.toFixed(2)||"",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Return/Risk",value:o.return_risk_ratio?.toFixed(2)||"",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Correlation SPY",value:o.correlation_with_spy!==null&&o.correlation_with_spy!==void 0?o.correlation_with_spy.toFixed(2):"",unit:""})})]})})]}),e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"Risk-Adjusted Return Ratios",subheader:"Sharpe, Sortino, Calmar & Information ratios"}),e.jsxs(Q,{children:[e.jsxs(v,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Sharpe Ratio",value:o.sharpe_ratio?.toFixed(3)||"",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Sortino Ratio",value:o.sortino_ratio?.toFixed(3)||"",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Calmar Ratio",value:o.calmar_ratio?.toFixed(3)||"",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Treynor Ratio",value:o.treynor_ratio?.toFixed(3)||"",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Information Ratio",value:o.information_ratio?.toFixed(2)||"",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Alpha",value:o.alpha?.toFixed(2)||"",unit:"%"})})]}),e.jsx(Ne,{width:"100%",height:320,children:e.jsxs(vt,{data:[{metric:"Sharpe",value:(o.sharpe_ratio||0)*2},{metric:"Sortino",value:(o.sortino_ratio||0)*2},{metric:"Calmar",value:(o.calmar_ratio||0)*10},{metric:"Info",value:(o.information_ratio||0)*5}],children:[e.jsx(qe,{strokeDasharray:"3 3"}),e.jsx(Ke,{dataKey:"metric"}),e.jsx(Re,{label:{value:"Ratio Value (normalized)",angle:-90,position:"insideLeft"}}),e.jsx(Le,{formatter:f=>`${f?.toFixed(3)}`}),e.jsx(Oe,{dataKey:"value",fill:"#1976d2",name:"Ratio",radius:[8,8,0,0]})]})})]})]}),e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"Drawdown & Recovery",subheader:"Portfolio drawdown depth and recovery time"}),e.jsxs(Q,{children:[e.jsxs(v,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Max Drawdown",value:o.max_drawdown?.toFixed(2)||"0.00",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Current DD",value:o.current_drawdown?.toFixed(2)||"0.00",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Avg Drawdown",value:o.avg_drawdown?.toFixed(2)||"0.00",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"DD Duration",value:o.drawdown_duration_days||"0",unit:"days"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Recovery Time",value:o.max_recovery_days||"0",unit:"days"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Calmar Ratio",value:o.calmar_ratio?.toFixed(3)||"0.000",unit:""})})]}),e.jsx(Ne,{width:"100%",height:300,children:e.jsxs(Cl,{data:[{date:"Current",drawdown:o.current_drawdown||0,maxDD:o.max_drawdown||0},{date:"Avg DD",drawdown:o.avg_drawdown||0,maxDD:o.max_drawdown||0}],children:[e.jsx(qe,{strokeDasharray:"3 3"}),e.jsx(Ke,{dataKey:"date"}),e.jsx(Re,{label:{value:"Drawdown (%)",angle:-90,position:"insideLeft"}}),e.jsx(Le,{formatter:f=>`${f?.toFixed(2)}%`}),e.jsx(lt,{}),e.jsx($n,{type:"monotone",dataKey:"drawdown",stackId:"1",stroke:"#ff9800",fill:"#ff9800",opacity:.6,name:"Current Drawdown"}),e.jsx($n,{type:"monotone",dataKey:"maxDD",stackId:"1",stroke:"#f44336",fill:"#f44336",opacity:.6,name:"Max Drawdown"})]})})]})]}),e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"Tail Risk Analysis",subheader:"VaR, CVaR, Skewness, and Kurtosis"}),e.jsxs(Q,{children:[e.jsxs(v,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"VaR 95%",value:o.var_95?.toFixed(2)||"0.00",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"VaR 99%",value:o.var_99?.toFixed(2)||"0.00",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"CVaR 95%",value:o.cvar_95?.toFixed(2)||"0.00",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Skewness",value:o.skewness?.toFixed(3)||"0.000",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Kurtosis",value:o.kurtosis?.toFixed(3)||"0.000",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Semi-Skew",value:o.semi_skewness?.toFixed(3)||"0.000",unit:""})})]}),e.jsx(Ne,{width:"100%",height:300,children:e.jsxs(vt,{data:[{metric:"Skewness",value:o.skewness||0},{metric:"Kurtosis",value:(o.kurtosis||0)/3},{metric:"VaR 95%",value:o.var_95||0},{metric:"CVaR 95%",value:o.cvar_95||0}],children:[e.jsx(qe,{strokeDasharray:"3 3"}),e.jsx(Ke,{dataKey:"metric"}),e.jsx(Re,{label:{value:"Value",angle:-90,position:"insideLeft"}}),e.jsx(Le,{formatter:f=>`${f?.toFixed(3)}`}),e.jsx(Oe,{dataKey:"value",fill:"#e53935",name:"Value",radius:[8,8,0,0]})]})})]})]}),e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"Portfolio Risk Profile (Holistic View)",subheader:"Visual snapshot of all risk dimensions"}),e.jsx(Q,{children:e.jsx(Ne,{width:"100%",height:350,children:e.jsxs(Pl,{data:[...o.volatility_annualized!==null&&o.volatility_annualized!==void 0?[{metric:"Volatility",value:Math.min(o.volatility_annualized,100)}]:[],...o.max_drawdown!==null&&o.max_drawdown!==void 0?[{metric:"Drawdown",value:Math.min(Math.abs(o.max_drawdown),100)}]:[],...o.skewness!==null&&o.skewness!==void 0?[{metric:"Skewness",value:Math.min(Math.abs(o.skewness*20),100)}]:[],...o.kurtosis!==null&&o.kurtosis!==void 0?[{metric:"Kurtosis",value:Math.min(o.kurtosis*5,100)}]:[],...o.portfolio_beta!==null&&o.portfolio_beta!==void 0?[{metric:"Beta",value:Math.min(o.portfolio_beta*50,100)}]:[],...o.diversification_score!==null&&o.diversification_score!==void 0?[{metric:"Diversification",value:Math.min(o.diversification_score/10,100)}]:[]],children:[e.jsx(Dl,{}),e.jsx(Tl,{dataKey:"metric"}),e.jsx(_l,{angle:90,domain:[0,100]}),e.jsx(kl,{name:"Risk Profile",dataKey:"value",stroke:"#ff9800",fill:"#ff9800",fillOpacity:.6}),e.jsx(Le,{formatter:f=>`${f?.toFixed(1)}`})]})})})]})]}),e.jsxs(R,{sx:{mb:4,mt:6},children:[e.jsxs(u,{variant:"h5",sx:{fontWeight:700,mb:3,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ao,{sx:{color:"primary.main"}})," Allocation & Diversification"]}),e.jsx(u,{variant:"h6",sx:{fontWeight:600,mb:3,color:"text.secondary"},children:"Core Allocation Metrics"}),e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"Concentration & Diversification Metrics"}),e.jsx(Q,{children:e.jsxs(v,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Top 1 Position",value:o.top_1_weight!=null?o.top_1_weight.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Top 5 Positions",value:o.top_5_weight!=null?o.top_5_weight.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Top 10 Positions",value:o.top_10_weight!=null?o.top_10_weight.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Herfindahl Index",value:o.herfindahl_index!=null?o.herfindahl_index.toFixed(4):"N/A",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Effective N",value:o.effective_n!=null?o.effective_n.toFixed(2):"N/A",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Diversification Ratio",value:o.diversification_ratio!=null?o.diversification_ratio.toFixed(2):"N/A",unit:""})})]})})]}),e.jsx(u,{variant:"h6",sx:{fontWeight:600,mt:4,mb:3,color:"text.secondary"},children:"Holdings Distribution & Performance"}),e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"Holdings by Weight Distribution"}),e.jsx(Q,{children:e.jsx(Ne,{width:"100%",height:350,children:e.jsxs(vt,{data:i.map(f=>({symbol:f.symbol,weight:f.weight_percent!==null&&f.weight_percent!==void 0?parseFloat(f.weight_percent):null,value:f.market_value_dollars!==null&&f.market_value_dollars!==void 0?parseFloat(f.market_value_dollars):null})),layout:"vertical",margin:{top:5,right:30,left:80,bottom:5},children:[e.jsx(qe,{strokeDasharray:"3 3"}),e.jsx(Ke,{type:"number"}),e.jsx(Re,{dataKey:"symbol",type:"category",width:70}),e.jsx(Le,{formatter:f=>f?.toFixed(2)}),e.jsx(lt,{}),e.jsx(Oe,{dataKey:"weight",fill:"#1976d2",name:"Weight %",radius:[0,8,8,0]})]})})})]}),e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"Position Market Values & Gains"}),e.jsx(Q,{children:e.jsx(Ne,{width:"100%",height:300,children:e.jsxs(vt,{data:i.map(f=>({symbol:f.symbol,value:f.market_value_dollars!==null&&f.market_value_dollars!==void 0?parseFloat(f.market_value_dollars):null,gain:f.gain_loss_dollars!==null&&f.gain_loss_dollars!==void 0?parseFloat(f.gain_loss_dollars):null})),children:[e.jsx(qe,{strokeDasharray:"3 3"}),e.jsx(Ke,{dataKey:"symbol"}),e.jsx(Re,{yAxisId:"left",label:{value:"Market Value ($)",angle:-90,position:"insideLeft"}}),e.jsx(Re,{yAxisId:"right",orientation:"right",label:{value:"Gain/Loss ($)",angle:90,position:"insideRight"}}),e.jsx(Le,{formatter:f=>`$${f?.toFixed(0)}`}),e.jsx(lt,{}),e.jsx(Oe,{yAxisId:"left",dataKey:"value",fill:"#1976d2",name:"Position Value ($)",radius:[8,8,0,0]}),e.jsx(Oe,{yAxisId:"right",dataKey:"gain",fill:"#43a047",name:"Unrealized Gain/Loss ($)",radius:[8,8,0,0]})]})})})]}),e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"Sector & Industry Diversification"}),e.jsxs(Q,{children:[e.jsxs(v,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Num Sectors",value:o.num_sectors||"0",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Num Industries",value:o.num_industries||"0",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Sector Concentration",value:o.sector_concentration?.toFixed(2)||"0.00",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Avg Correlation",value:o.avg_correlation?.toFixed(2)||"0.50",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Top Sector",value:o.top_sector||"N/A",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Best Performer",value:o.best_performer_sector||"N/A",unit:""})})]}),e.jsx(Ne,{width:"100%",height:300,children:e.jsxs(vt,{data:_.length>0?_:[{sector:"No Data",weight:0,return:0}],children:[e.jsx(qe,{strokeDasharray:"3 3"}),e.jsx(Ke,{dataKey:"sector"}),e.jsx(Re,{yAxisId:"left",label:{value:"Weight (%)",angle:-90,position:"insideLeft"}}),e.jsx(Re,{yAxisId:"right",orientation:"right",label:{value:"Avg Return (%)",angle:90,position:"insideRight"}}),e.jsx(Le,{}),e.jsx(lt,{}),e.jsx(Oe,{yAxisId:"left",dataKey:"weight",fill:"#1976d2",name:"Portfolio Weight %",radius:[8,8,0,0]}),e.jsx(Oe,{yAxisId:"right",dataKey:"return",fill:"#43a047",name:"Avg Sector Return %",radius:[8,8,0,0]})]})})]})]}),e.jsx(u,{variant:"h6",sx:{fontWeight:600,mt:4,mb:3,color:"text.secondary"},children:"Position-Level Analysis"}),e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"Volatility & Risk Contribution by Position"}),e.jsx(Q,{children:e.jsx(Ne,{width:"100%",height:300,children:e.jsxs(zr,{data:i.map(f=>({symbol:f.symbol,volatility:parseFloat(f.volatility_percent)||0,risk:parseFloat(f.risk_contribution_percent)||0,weight:parseFloat(f.weight_percent)||0})),children:[e.jsx(qe,{strokeDasharray:"3 3"}),e.jsx(Ke,{dataKey:"symbol"}),e.jsx(Re,{yAxisId:"left",label:{value:"Volatility (%)",angle:-90,position:"insideLeft"}}),e.jsx(Re,{yAxisId:"right",orientation:"right",label:{value:"Risk Contrib (%) / Weight",angle:90,position:"insideRight"}}),e.jsx(Le,{}),e.jsx(lt,{}),e.jsx(Oe,{yAxisId:"left",dataKey:"volatility",fill:"#ff9800",name:"Volatility %",radius:[8,8,0,0]}),e.jsx(Oe,{yAxisId:"right",dataKey:"risk",fill:"#e53935",name:"Risk Contribution %",radius:[8,8,0,0]})]})})})]}),e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"Return Contribution by Holding"}),e.jsx(Q,{children:e.jsx(Ne,{width:"100%",height:300,children:e.jsxs(vt,{data:i.map(f=>({symbol:f.symbol,return:parseFloat(f.return_contribution_percent)||0,beta:parseFloat(f.beta)||0})),children:[e.jsx(qe,{strokeDasharray:"3 3"}),e.jsx(Ke,{dataKey:"symbol"}),e.jsx(Re,{yAxisId:"left",label:{value:"Return Contrib (%)",angle:-90,position:"insideLeft"}}),e.jsx(Re,{yAxisId:"right",orientation:"right",label:{value:"Beta",angle:90,position:"insideRight"}}),e.jsx(Le,{}),e.jsx(lt,{}),e.jsx(Oe,{yAxisId:"left",dataKey:"return",fill:"#43a047",name:"Return Contribution %",radius:[8,8,0,0]}),e.jsx(Oe,{yAxisId:"right",dataKey:"beta",fill:"#1976d2",name:"Beta",radius:[8,8,0,0]})]})})})]}),e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"Position Correlation with Portfolio"}),e.jsxs(Q,{children:[e.jsx(Ne,{width:"100%",height:300,children:e.jsxs(vt,{data:i.filter(f=>f.correlation_with_portfolio!==null&&f.correlation_with_portfolio!==void 0&&f.weight_percent!==null&&f.weight_percent!==void 0).map(f=>({symbol:f.symbol,correlation:parseFloat(f.correlation_with_portfolio),weight:parseFloat(f.weight_percent)})),children:[e.jsx(qe,{strokeDasharray:"3 3"}),e.jsx(Ke,{dataKey:"symbol"}),e.jsx(Re,{label:{value:"Correlation / Weight (%)",angle:-90,position:"insideLeft"}}),e.jsx(Le,{formatter:f=>f?.toFixed(2)}),e.jsx(lt,{}),e.jsx(Oe,{dataKey:"correlation",fill:"#9c27b0",name:"Correlation with Portfolio",radius:[8,8,0,0]})]})}),e.jsx(u,{variant:"caption",color:"text.secondary",sx:{mt:2,display:"block"},children:"Correlation > 0.7: Strong positive correlation with portfolio movements | Correlation < 0.5: Good diversifier"})]})]}),e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"Top Holdings Correlation Matrix",subheader:"Asset correlation structure (top 8 positions)"}),e.jsxs(Q,{children:[e.jsx(Ne,{width:"100%",height:350,children:e.jsxs(zr,{data:i.slice(0,8).filter(f=>f.correlation_with_portfolio!==null&&f.correlation_with_portfolio!==void 0&&f.volatility_percent!==null&&f.volatility_percent!==void 0&&f.weight_percent!==null&&f.weight_percent!==void 0).map((f,C)=>({symbol:f.symbol,correlation_market:parseFloat(f.correlation_with_portfolio),volatility:parseFloat(f.volatility_percent),weight:parseFloat(f.weight_percent)})),layout:"vertical",margin:{top:5,right:30,left:100,bottom:5},children:[e.jsx(qe,{strokeDasharray:"3 3"}),e.jsx(Ke,{type:"number"}),e.jsx(Re,{dataKey:"symbol",type:"category",width:90}),e.jsx(Le,{contentStyle:{backgroundColor:"#fff",border:"1px solid #ccc"},formatter:f=>f?.toFixed(2)||"0"}),e.jsx(lt,{}),e.jsx(Oe,{dataKey:"correlation_market",fill:"#1976d2",name:"Market Correlation",radius:[0,8,8,0]}),e.jsx(Oe,{dataKey:"volatility",fill:"#ff6f00",name:"Volatility (Annualized %)",radius:[0,8,8,0]})]})}),e.jsx(u,{variant:"caption",color:"text.secondary",sx:{mt:2,display:"block"},children:"Shows how each holding correlates with the broader market and its individual volatility. Higher correlation = moves with market; Higher volatility = more price swings."})]})]})]}),e.jsxs(R,{sx:{mb:4,mt:6},children:[e.jsxs(u,{variant:"h5",sx:{fontWeight:700,mb:3,display:"flex",alignItems:"center",gap:1},children:[e.jsx(_n,{sx:{color:"primary.main"}})," Portfolio Efficiency"]}),e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"Portfolio Efficiency Metrics"}),e.jsx(Q,{children:e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Return/Risk Ratio",value:o.return_risk_ratio!=null?o.return_risk_ratio.toFixed(2):"N/A",unit:""})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Cash Drag",value:o.cash_drag!=null?o.cash_drag.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Turnover Ratio",value:o.turnover_ratio!=null?o.turnover_ratio.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Transaction Costs",value:o.transaction_costs!=null?o.transaction_costs.toFixed(2):"N/A",unit:"bps"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Sector Momentum",value:o.sector_momentum!=null?o.sector_momentum.toFixed(2):"N/A",unit:"%"})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,lg:2,children:e.jsx(oe,{label:"Risk-Free Rate",value:c.risk_free_rate!=null?c.risk_free_rate:"N/A",unit:"%"})})]})})]}),e.jsxs(G,{sx:{mb:4},children:[e.jsx(je,{title:"Top Holdings Attribution",action:e.jsx(te,{size:"small",startIcon:e.jsx(Ft,{}),onClick:()=>x(),children:"Refresh"})}),e.jsx(Q,{sx:{overflowX:"auto"},children:i.length===0?e.jsx(u,{color:"text.secondary",align:"center",sx:{py:4},children:"No holdings data available."}):e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:"700px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:`2px solid ${s.palette.divider}`,backgroundColor:s.palette.background.default},children:[e.jsx("th",{style:{textAlign:"left",padding:"12px",fontWeight:700},children:"Symbol"}),e.jsx("th",{style:{textAlign:"right",padding:"12px",fontWeight:700},children:"Weight %"}),e.jsx("th",{style:{textAlign:"right",padding:"12px",fontWeight:700},children:"Value $"}),e.jsx("th",{style:{textAlign:"right",padding:"12px",fontWeight:700},children:"Gain/Loss $"}),e.jsx("th",{style:{textAlign:"right",padding:"12px",fontWeight:700},children:"Return %"})]})}),e.jsx("tbody",{children:i.map((f,C)=>{const P=f.weight_percent!==null&&f.weight_percent!==void 0?parseFloat(f.weight_percent).toFixed(2):"N/A",k=f.market_value_dollars!==null&&f.market_value_dollars!==void 0?`$${parseFloat(f.market_value_dollars).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`:"N/A",M=f.gain_loss_dollars!==null&&f.gain_loss_dollars!==void 0?`$${parseFloat(f.gain_loss_dollars).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`:"N/A",W=f.gain_loss_dollars!==null&&f.gain_loss_dollars!==void 0?parseFloat(f.gain_loss_dollars)>=0?s.palette.success.main:s.palette.error.main:"inherit",$=f.return_percent!==null&&f.return_percent!==void 0?parseFloat(f.return_percent).toFixed(2):"N/A",B=f.return_percent!==null&&f.return_percent!==void 0?parseFloat(f.return_percent)>=0?s.palette.success.main:s.palette.error.main:"inherit";return e.jsxs("tr",{style:{borderBottom:`1px solid ${s.palette.divider}`},children:[e.jsx("td",{style:{padding:"12px",fontWeight:500},children:f.symbol}),e.jsxs("td",{style:{textAlign:"right",padding:"12px"},children:[P,"%"]}),e.jsx("td",{style:{textAlign:"right",padding:"12px"},children:k}),e.jsx("td",{style:{textAlign:"right",padding:"12px",color:W},children:M}),e.jsxs("td",{style:{textAlign:"right",padding:"12px",color:B,fontWeight:600},children:[$,"%"]})]},C)})})]})})]})]}),e.jsx(G,{sx:{backgroundColor:s.palette.background.default},children:e.jsx(Q,{children:e.jsxs(u,{variant:"caption",color:"text.secondary",children:[e.jsx("strong",{children:"Calculation Basis:"})," ",c.calculation_basis??"N/A"," ",e.jsx("strong",{children:" Benchmark:"})," ",c.benchmark??"N/A"," ",e.jsx("strong",{children:" Risk-Free Rate:"})," ",c.risk_free_rate??"N/A"," ",e.jsx("strong",{children:" Data Points:"})," ",c.data_points??"N/A"," ",e.jsx("strong",{children:" Portfolio Value:"})," ",c.portfolio_value!==null&&c.portfolio_value!==void 0?`$${c.portfolio_value.toLocaleString()}`:"N/A"]})})})]})]})}function Yd(){const[t,s]=h.useState(!1),[r,n]=h.useState(null),[a,o]=h.useState(null),i=["#8884d8","#82ca9d","#ffc658","#ff7c7c","#8dd1e1","#d084d0","#a4de6c","#ffb347"],l=async()=>{s(!0),o(null);try{const p=await Ee.get("/api/optimization/analysis");console.log("[PortfolioOptimizerNew] API Response:",p.data);const w=p.data?.data?.analysis||p.data?.analysis||p.data;console.log("[PortfolioOptimizerNew] Analysis Data:",w),w?n(w):(o("No analysis data returned from server"),n(null))}catch(p){console.error("[PortfolioOptimizerNew] Fetch Error:",p),o(p.response?.data?.error||p.message)}finally{s(!1)}};if(h.useEffect(()=>{l()},[]),t&&!r)return e.jsx(ot,{maxWidth:"lg",sx:{py:4,textAlign:"center"},children:e.jsx(rt,{})});if(!r)return e.jsx(ot,{maxWidth:"lg",sx:{py:4},children:e.jsx(Se,{severity:"info",children:"No portfolio data available"})});const c=r.portfolioMetrics?.current||{},d=r.portfolioMetrics?.optimized||{},m={beta:c.beta,sharpeRatio:c.sharpeRatio,volatility:c.volatility,concentration:r.concentration||"",avgQuality:r.avgQuality!==null&&r.avgQuality!==void 0?r.avgQuality:null},x={beta:{expected:d.beta,improved:d.beta!==void 0&&c.beta!==void 0&&d.beta<c.beta},sharpeRatio:{expected:d.sharpeRatio,improved:d.sharpeRatio!==void 0&&c.sharpeRatio!==void 0&&d.sharpeRatio>c.sharpeRatio},volatility:{expected:d.volatility,improved:d.volatility!==void 0&&c.volatility!==void 0&&d.volatility<c.volatility},concentration:{expected:r.targetConcentration||""},quality:{expected:r.expectedQuality!==null&&r.expectedQuality!==void 0?r.expectedQuality:null}};r.issues;const y=r.recommendations||[];y.map((p,w)=>({symbol:p.symbol,weight:p.targetWeight?parseFloat(p.targetWeight.replace("%","")):null,action:p.action,priority:p.priority,reason:p.reason})),r.portfolioValue!==null&&r.portfolioValue!==void 0?r.portfolioValue:r.totalValue!==null&&r.totalValue!==void 0&&r.totalValue;const b=x?[{name:"Beta",current:m?.beta,expected:x.beta?.expected},{name:"Sharpe",current:m?.sharpeRatio,expected:x.sharpeRatio?.expected},{name:"Concentration %",current:parseFloat(m.concentration.replace("%","")),expected:parseFloat(x.concentration.expected.replace("%",""))}]:[],D={high:"#d32f2f",medium:"#f57c00",low:"#388e3c"};return e.jsxs(ot,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(R,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(u,{variant:"h4",children:"Portfolio Optimizer"}),e.jsx(R,{sx:{display:"flex",gap:1},children:e.jsx(te,{variant:"contained",onClick:l,disabled:t,children:t?e.jsx(rt,{size:24}):"Refresh Analysis"})})]}),a&&e.jsx(Se,{severity:"error",sx:{mb:2},children:a}),e.jsxs(e.Fragment,{children:[e.jsxs(v,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(G,{children:e.jsxs(Q,{children:[e.jsx(u,{color:"textSecondary",gutterBottom:!0,children:"Beta"}),e.jsx(u,{variant:"h5",children:m?.beta||""}),e.jsxs(u,{variant:"body2",color:x?.beta?.improved?"success.main":"error.main",children:[x?.beta?.improved?"":""," ",typeof x?.beta?.expected=="number"&&!isNaN(x.beta.expected)?x.beta.expected.toFixed(2):""]})]})})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(G,{children:e.jsxs(Q,{children:[e.jsx(u,{color:"textSecondary",gutterBottom:!0,children:"Sharpe Ratio"}),e.jsx(u,{variant:"h5",children:typeof m?.sharpeRatio=="number"&&!isNaN(m.sharpeRatio)?m.sharpeRatio.toFixed(2):""}),e.jsxs(u,{variant:"body2",color:x?.sharpeRatio?.improved?"success.main":"error.main",children:[x?.sharpeRatio?.improved?"":""," ",typeof x?.sharpeRatio?.expected=="number"&&!isNaN(x?.sharpeRatio?.expected)?x.sharpeRatio.expected.toFixed(2):""]})]})})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(G,{children:e.jsxs(Q,{children:[e.jsx(u,{color:"textSecondary",gutterBottom:!0,children:"Concentration"}),e.jsx(u,{variant:"h5",children:m?.concentration}),e.jsxs(u,{variant:"body2",color:"error.main",children:[""," ",x?.concentration?.expected]})]})})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(G,{children:e.jsxs(Q,{children:[e.jsx(u,{color:"textSecondary",gutterBottom:!0,children:"Quality"}),e.jsx(u,{variant:"h5",children:typeof m.avgQuality=="number"&&!isNaN(m.avgQuality)?m.avgQuality.toFixed(1):""}),e.jsxs(u,{variant:"body2",color:"error.main",children:[""," ",typeof x?.quality?.expected=="number"&&!isNaN(x?.quality?.expected)?x.quality.expected.toFixed(1):""]})]})})})]}),e.jsxs(Ye,{sx:{mb:3,p:2},children:[e.jsxs(u,{variant:"h6",sx:{mb:2},children:["Recommendations (",y.length,")"]}),e.jsx(ft,{children:e.jsxs(mt,{children:[e.jsx(pt,{children:e.jsxs(ke,{sx:{bgcolor:"#f5f5f5"},children:[e.jsx(O,{children:e.jsx("strong",{children:"#"})}),e.jsx(O,{children:e.jsx("strong",{children:"Action"})}),e.jsx(O,{children:e.jsx("strong",{children:"Symbol"})}),e.jsx(O,{children:e.jsx("strong",{children:"Reason"})}),e.jsx(O,{children:e.jsx("strong",{children:"Target Weight"})}),e.jsx(O,{children:e.jsx("strong",{children:"Priority"})})]})}),e.jsx(xt,{children:y.map(p=>e.jsxs(ke,{children:[e.jsx(O,{children:p.id}),e.jsx(O,{children:e.jsx(ze,{label:p.action,color:p.action==="BUY"?"success":"error",size:"small",variant:"outlined"})}),e.jsx(O,{children:e.jsx("strong",{children:p.symbol})}),e.jsx(O,{children:p.reason}),e.jsx(O,{children:p.targetWeight||"-"}),e.jsx(O,{children:e.jsx(ze,{label:p.priority,size:"small",sx:{bgcolor:D[p.priority],color:"white"}})})]},p.id))})]})})]}),e.jsxs(Ye,{sx:{p:3,mb:3},children:[e.jsx(u,{variant:"h6",sx:{mb:2,fontWeight:"bold"},children:" Expected Improvements"}),e.jsx(u,{variant:"caption",sx:{color:"#888",mb:2,display:"block"},children:"Quantified improvements from current to optimized portfolio"}),b.length===0||b.every(p=>p.current===null&&p.expected===null)?e.jsx(Se,{severity:"info",sx:{mb:2},children:"Portfolio metrics unavailable - requires at least 2 days of historical performance data. Once you have sufficient portfolio history, metrics like Beta, Sharpe Ratio, and Volatility will be calculated and displayed here."}):null,e.jsx(Ne,{width:"100%",height:300,children:e.jsxs(vt,{data:b,children:[e.jsx(qe,{strokeDasharray:"3 3"}),e.jsx(Ke,{dataKey:"name"}),e.jsx(Re,{}),e.jsx(Le,{formatter:p=>p?.toFixed?p.toFixed(2):p}),e.jsx(lt,{}),e.jsx(Oe,{dataKey:"current",fill:"#8884d8",name:"Current Portfolio"}),e.jsx(Oe,{dataKey:"expected",fill:"#82ca9d",name:"Optimized Portfolio"})]})}),e.jsx(R,{sx:{mt:3,p:2,bgcolor:"#f5f5f5",borderRadius:1},children:e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(G,{sx:{bgcolor:"white",boxShadow:"none",border:"1px solid #eee",height:"100%"},children:e.jsxs(Q,{sx:{p:2},children:[e.jsxs(R,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#666",fontWeight:"bold",textTransform:"uppercase"},children:"Beta"}),x?.beta?.improved?e.jsx(R,{sx:{color:"#4caf50",fontWeight:"bold"},children:""}):e.jsx(R,{sx:{color:"#999"},children:""})]}),e.jsxs(u,{sx:{color:"#333",fontWeight:"bold",mb:.5},children:[m?.beta||"","  ",x?.beta?.expected?typeof x.beta.expected=="number"?x.beta.expected.toFixed(2):x.beta.expected:""]}),e.jsx(u,{variant:"caption",sx:{color:x?.beta?.improved?"#4caf50":"#999"},children:x?.beta?.improved?" Lower is better":""})]})})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(G,{sx:{bgcolor:"white",boxShadow:"none",border:"1px solid #eee",height:"100%"},children:e.jsxs(Q,{sx:{p:2},children:[e.jsxs(R,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#666",fontWeight:"bold",textTransform:"uppercase"},children:"Sharpe Ratio"}),x?.sharpeRatio?.improved?e.jsx(R,{sx:{color:"#4caf50",fontWeight:"bold"},children:""}):e.jsx(R,{sx:{color:"#999"},children:""})]}),e.jsxs(u,{sx:{color:"#333",fontWeight:"bold",mb:.5},children:[typeof m?.sharpeRatio=="number"?m.sharpeRatio.toFixed(2):"","  ",x?.sharpeRatio?.expected?typeof x.sharpeRatio.expected=="number"?x.sharpeRatio.expected.toFixed(2):x.sharpeRatio.expected:""]}),e.jsx(u,{variant:"caption",sx:{color:x?.sharpeRatio?.improved?"#4caf50":"#999"},children:x?.sharpeRatio?.improved?" Higher is better":""})]})})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(G,{sx:{bgcolor:"white",boxShadow:"none",border:"1px solid #eee",height:"100%"},children:e.jsxs(Q,{sx:{p:2},children:[e.jsxs(R,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#666",fontWeight:"bold",textTransform:"uppercase"},children:"Volatility"}),x?.volatility?.improved?e.jsx(R,{sx:{color:"#4caf50",fontWeight:"bold"},children:""}):e.jsx(R,{sx:{color:"#999"},children:""})]}),e.jsxs(u,{sx:{color:"#333",fontWeight:"bold",mb:.5},children:[m?.volatility?`${m.volatility}%`:"","  ",x?.volatility?.expected?typeof x.volatility.expected=="number"?`${x.volatility.expected.toFixed(2)}%`:x.volatility.expected:""]}),e.jsx(u,{variant:"caption",sx:{color:x?.volatility?.improved?"#4caf50":"#999"},children:x?.volatility?.improved?" Lower is better":""})]})})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(G,{sx:{bgcolor:"white",boxShadow:"none",border:"1px solid #eee",height:"100%"},children:e.jsxs(Q,{sx:{p:2},children:[e.jsxs(R,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#666",fontWeight:"bold",textTransform:"uppercase"},children:"Concentration"}),e.jsx(R,{sx:{color:"#999"},children:""})]}),e.jsxs(u,{sx:{color:"#333",fontWeight:"bold",mb:.5},children:[m?.concentration,"  ",x?.concentration?.expected]}),e.jsx(u,{variant:"caption",sx:{color:"#999"},children:""})]})})})]})})]})]}),e.jsx(ys,{sx:{my:4}}),r?.portfolioMetrics&&(r.portfolioMetrics.current||r.portfolioMetrics.optimized)&&e.jsxs(Ye,{sx:{p:3,mb:3,bgcolor:"#fafafa"},children:[e.jsx(u,{variant:"h5",sx:{mb:1,fontWeight:"bold",color:"#1a1a1a"},children:" Correlation Analysis"}),e.jsx(u,{variant:"caption",sx:{color:"#888",mb:3,display:"block"},children:"Risk metrics comparison | Better = Lower correlation risk"}),e.jsxs(v,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(G,{sx:{height:"100%",bgcolor:"white",border:"2px solid #fff3e0",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:e.jsxs(Q,{sx:{p:2.5},children:[e.jsxs(R,{sx:{display:"flex",alignItems:"center",mb:2.5},children:[e.jsx(R,{sx:{width:10,height:10,borderRadius:"50%",bgcolor:"#ff9800",mr:1}}),e.jsx(u,{variant:"subtitle1",sx:{fontWeight:"600",color:"#333"},children:"Current Portfolio"})]}),r.portfolioMetrics.current&&e.jsxs(v,{container:!0,spacing:1.5,children:[e.jsx(v,{item:!0,xs:6,children:e.jsxs(R,{sx:{bgcolor:"#fff9f0",p:1.5,borderRadius:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#888",fontSize:"0.7rem",fontWeight:"600",textTransform:"uppercase"},children:"Beta"}),e.jsx(u,{variant:"h6",sx:{fontWeight:"700",color:"#ff6f00",mt:.5},children:typeof r.portfolioMetrics.current.beta=="number"&&!isNaN(r.portfolioMetrics.current.beta)?r.portfolioMetrics.current.beta.toFixed(2):""})]})}),e.jsx(v,{item:!0,xs:6,children:e.jsxs(R,{sx:{bgcolor:"#fff9f0",p:1.5,borderRadius:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#888",fontSize:"0.7rem",fontWeight:"600",textTransform:"uppercase"},children:"Volatility"}),e.jsx(u,{variant:"h6",sx:{fontWeight:"700",color:"#ff6f00",mt:.5},children:typeof r.portfolioMetrics.current.volatility=="number"&&!isNaN(r.portfolioMetrics.current.volatility)?r.portfolioMetrics.current.volatility.toFixed(1)+"%":""})]})}),e.jsx(v,{item:!0,xs:6,children:e.jsxs(R,{sx:{bgcolor:"#fff9f0",p:1.5,borderRadius:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#888",fontSize:"0.7rem",fontWeight:"600",textTransform:"uppercase"},children:"Sharpe"}),e.jsx(u,{variant:"h6",sx:{fontWeight:"700",color:"#ff6f00",mt:.5},children:typeof r.portfolioMetrics.current.sharpeRatio=="number"&&!isNaN(r.portfolioMetrics.current.sharpeRatio)?r.portfolioMetrics.current.sharpeRatio.toFixed(2):""})]})}),e.jsx(v,{item:!0,xs:6,children:e.jsxs(R,{sx:{bgcolor:"#fff9f0",p:1.5,borderRadius:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#888",fontSize:"0.7rem",fontWeight:"600",textTransform:"uppercase"},children:"Diversif."}),e.jsx(u,{variant:"h6",sx:{fontWeight:"700",color:"#ff6f00",mt:.5},children:typeof r.portfolioMetrics.current.diversificationScore=="number"&&!isNaN(r.portfolioMetrics.current.diversificationScore)?(r.portfolioMetrics.current.diversificationScore*100).toFixed(0)+"%":""})]})}),e.jsx(v,{item:!0,xs:12,children:e.jsxs(R,{sx:{bgcolor:"#fff9f0",p:1.5,borderRadius:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#888",fontSize:"0.7rem",fontWeight:"600",textTransform:"uppercase"},children:"Concentration Risk"}),e.jsx(u,{variant:"h6",sx:{fontWeight:"700",color:"#ff6f00",mt:.5},children:typeof r.portfolioMetrics.current.concentrationRatio=="number"&&!isNaN(r.portfolioMetrics.current.concentrationRatio)?r.portfolioMetrics.current.concentrationRatio.toFixed(1)+"%":""})]})})]})]})})}),e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(G,{sx:{height:"100%",bgcolor:"white",border:"2px solid #e8f5e9",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:e.jsxs(Q,{sx:{p:2.5},children:[e.jsxs(R,{sx:{display:"flex",alignItems:"center",mb:2.5},children:[e.jsx(R,{sx:{width:10,height:10,borderRadius:"50%",bgcolor:"#4caf50",mr:1}}),e.jsx(u,{variant:"subtitle1",sx:{fontWeight:"600",color:"#333"},children:"Optimized"})]}),r.portfolioMetrics.optimized&&e.jsxs(v,{container:!0,spacing:1.5,children:[e.jsx(v,{item:!0,xs:6,children:e.jsxs(R,{sx:{bgcolor:"#f1f8f5",p:1.5,borderRadius:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#888",fontSize:"0.7rem",fontWeight:"600",textTransform:"uppercase"},children:"Beta"}),e.jsx(u,{variant:"h6",sx:{fontWeight:"700",color:"#2e7d32",mt:.5},children:typeof r.portfolioMetrics.optimized.beta=="number"&&!isNaN(r.portfolioMetrics.optimized.beta)?r.portfolioMetrics.optimized.beta.toFixed(2):""})]})}),e.jsx(v,{item:!0,xs:6,children:e.jsxs(R,{sx:{bgcolor:"#f1f8f5",p:1.5,borderRadius:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#888",fontSize:"0.7rem",fontWeight:"600",textTransform:"uppercase"},children:"Volatility"}),e.jsx(u,{variant:"h6",sx:{fontWeight:"700",color:"#2e7d32",mt:.5},children:typeof r.portfolioMetrics.optimized.volatility=="number"&&!isNaN(r.portfolioMetrics.optimized.volatility)?r.portfolioMetrics.optimized.volatility.toFixed(1)+"%":""})]})}),e.jsx(v,{item:!0,xs:6,children:e.jsxs(R,{sx:{bgcolor:"#f1f8f5",p:1.5,borderRadius:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#888",fontSize:"0.7rem",fontWeight:"600",textTransform:"uppercase"},children:"Sharpe"}),e.jsx(u,{variant:"h6",sx:{fontWeight:"700",color:"#2e7d32",mt:.5},children:typeof r.portfolioMetrics.optimized.sharpeRatio=="number"&&!isNaN(r.portfolioMetrics.optimized.sharpeRatio)?r.portfolioMetrics.optimized.sharpeRatio.toFixed(2):""})]})}),e.jsx(v,{item:!0,xs:6,children:e.jsxs(R,{sx:{bgcolor:"#f1f8f5",p:1.5,borderRadius:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#888",fontSize:"0.7rem",fontWeight:"600",textTransform:"uppercase"},children:"Diversif."}),e.jsx(u,{variant:"h6",sx:{fontWeight:"700",color:"#2e7d32",mt:.5},children:typeof r.portfolioMetrics.optimized.diversificationScore=="number"&&!isNaN(r.portfolioMetrics.optimized.diversificationScore)?(r.portfolioMetrics.optimized.diversificationScore*100).toFixed(0)+"%":""})]})}),e.jsx(v,{item:!0,xs:12,children:e.jsxs(R,{sx:{bgcolor:"#f1f8f5",p:1.5,borderRadius:1},children:[e.jsx(u,{variant:"caption",sx:{color:"#888",fontSize:"0.7rem",fontWeight:"600",textTransform:"uppercase"},children:"Concentration Risk"}),e.jsx(u,{variant:"h6",sx:{fontWeight:"700",color:"#2e7d32",mt:.5},children:typeof r.portfolioMetrics.optimized.concentrationRatio=="number"&&!isNaN(r.portfolioMetrics.optimized.concentrationRatio)?r.portfolioMetrics.optimized.concentrationRatio.toFixed(1)+"%":""})]})})]})]})})})]}),r.portfolioMetrics.improvements&&e.jsxs(v,{container:!0,spacing:1.5,children:[e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsx(G,{sx:{bgcolor:"white",boxShadow:"none",border:"1px solid #eee"},children:e.jsxs(Q,{sx:{p:1.5,textAlign:"center"},children:[e.jsx(u,{variant:"caption",sx:{color:"#999",fontSize:"0.65rem",fontWeight:"600",textTransform:"uppercase"},children:"Beta "}),e.jsx(u,{variant:"body2",sx:{fontWeight:"700",color:r.portfolioMetrics.improvements.betaReduction?.includes("-")?"#f44336":"#4caf50",mt:.5},children:r.portfolioMetrics.improvements.betaReduction})]})})}),e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsx(G,{sx:{bgcolor:"white",boxShadow:"none",border:"1px solid #eee"},children:e.jsxs(Q,{sx:{p:1.5,textAlign:"center"},children:[e.jsx(u,{variant:"caption",sx:{color:"#999",fontSize:"0.65rem",fontWeight:"600",textTransform:"uppercase"},children:"Risk "}),e.jsx(u,{variant:"body2",sx:{fontWeight:"700",color:"#4caf50",mt:.5},children:r.portfolioMetrics.improvements.riskReduction})]})})}),e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsx(G,{sx:{bgcolor:"white",boxShadow:"none",border:"1px solid #eee"},children:e.jsxs(Q,{sx:{p:1.5,textAlign:"center"},children:[e.jsx(u,{variant:"caption",sx:{color:"#999",fontSize:"0.65rem",fontWeight:"600",textTransform:"uppercase"},children:"Sharpe "}),e.jsx(u,{variant:"body2",sx:{fontWeight:"700",color:r.portfolioMetrics.improvements.sharpeImprovement?.includes("-")?"#f44336":"#4caf50",mt:.5},children:r.portfolioMetrics.improvements.sharpeImprovement})]})})}),e.jsx(v,{item:!0,xs:6,sm:3,children:e.jsx(G,{sx:{bgcolor:"white",boxShadow:"none",border:"1px solid #eee"},children:e.jsxs(Q,{sx:{p:1.5,textAlign:"center"},children:[e.jsx(u,{variant:"caption",sx:{color:"#999",fontSize:"0.65rem",fontWeight:"600",textTransform:"uppercase"},children:"Diversif. "}),e.jsx(u,{variant:"body2",sx:{fontWeight:"700",color:r.portfolioMetrics.improvements.diversificationGain?.includes("-")?"#f44336":"#4caf50",mt:.5},children:r.portfolioMetrics.improvements.diversificationGain})]})})})]})]}),r?.sectorRebalance&&(r.sectorRebalance.before?.length>0||r.sectorRebalance.after?.length>0)&&e.jsxs(Ye,{sx:{p:3,mb:3,bgcolor:"#fafafa"},children:[e.jsx(u,{variant:"h5",sx:{mb:1,fontWeight:"bold",color:"#1a1a1a"},children:" Sector Allocation"}),e.jsx(u,{variant:"caption",sx:{color:"#888",mb:3,display:"block"},children:"Diversification impact | More sectors = Lower correlation risk"}),e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(G,{sx:{height:"100%",bgcolor:"white",border:"2px solid #fff3e0",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:e.jsxs(Q,{sx:{p:2.5},children:[e.jsxs(R,{sx:{display:"flex",alignItems:"center",mb:2.5},children:[e.jsx(R,{sx:{width:10,height:10,borderRadius:"50%",bgcolor:"#ff9800",mr:1}}),e.jsx(u,{variant:"subtitle1",sx:{fontWeight:"600",color:"#333"},children:"Current Sectors"})]}),e.jsx(R,{children:r.sectorRebalance.before.map((p,w)=>e.jsxs(R,{sx:{mb:1.5},children:[e.jsxs(R,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5},children:[e.jsx(u,{variant:"body2",sx:{fontWeight:"600",color:"#333",flex:1},children:p.sector}),e.jsx(u,{variant:"body2",sx:{fontWeight:"700",color:"#ff6f00",minWidth:"50px",textAlign:"right"},children:p.weight}),e.jsxs(u,{variant:"caption",sx:{color:"#999",ml:1},children:[p.count,"p"]})]}),e.jsx(R,{sx:{height:6,bgcolor:"#ffe0b2",borderRadius:"3px",overflow:"hidden"},children:e.jsx(R,{sx:{height:"100%",bgcolor:"#ff9800",width:p.weight,transition:"width 0.3s"}})})]},w))}),e.jsx(R,{sx:{mt:2,pt:1.5,borderTop:"1px solid #f0f0f0",textAlign:"center"},children:e.jsxs(u,{variant:"caption",sx:{color:"#ff6f00",fontWeight:"700",fontSize:"0.75rem",textTransform:"uppercase"},children:[r.sectorRebalance.before.length," Sectors"]})})]})})}),e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(G,{sx:{height:"100%",bgcolor:"white",border:"2px solid #e8f5e9",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:e.jsxs(Q,{sx:{p:2.5},children:[e.jsxs(R,{sx:{display:"flex",alignItems:"center",mb:2.5},children:[e.jsx(R,{sx:{width:10,height:10,borderRadius:"50%",bgcolor:"#4caf50",mr:1}}),e.jsx(u,{variant:"subtitle1",sx:{fontWeight:"600",color:"#333"},children:"Target Sectors"}),r.sectorRebalance.after.length>r.sectorRebalance.before.length&&e.jsx(ze,{label:`+${r.sectorRebalance.after.length-r.sectorRebalance.before.length}`,size:"small",sx:{ml:"auto",bgcolor:"#c8e6c9",color:"#2e7d32",fontWeight:"600",height:"22px"}})]}),e.jsx(R,{children:r.sectorRebalance.after.map((p,w)=>e.jsxs(R,{sx:{mb:1.5},children:[e.jsxs(R,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5},children:[e.jsx(u,{variant:"body2",sx:{fontWeight:"600",color:"#333",flex:1},children:p.sector}),e.jsx(u,{variant:"body2",sx:{fontWeight:"700",color:"#2e7d32",minWidth:"50px",textAlign:"right"},children:p.weight}),e.jsxs(u,{variant:"caption",sx:{color:"#999",ml:1},children:[p.count,"p"]})]}),e.jsx(R,{sx:{height:6,bgcolor:"#c8e6c9",borderRadius:"3px",overflow:"hidden"},children:e.jsx(R,{sx:{height:"100%",bgcolor:"#4caf50",width:p.weight,transition:"width 0.3s"}})})]},w))}),e.jsx(R,{sx:{mt:2,pt:1.5,borderTop:"1px solid #f0f0f0",textAlign:"center"},children:e.jsxs(u,{variant:"caption",sx:{color:"#2e7d32",fontWeight:"700",fontSize:"0.75rem",textTransform:"uppercase"},children:[r.sectorRebalance.after.length," Sectors"]})})]})})})]})]}),r?.efficientFrontier&&r.efficientFrontier.length>0&&e.jsxs(Ye,{sx:{p:3,mb:3,bgcolor:"#fafafa"},children:[e.jsx(u,{variant:"h5",sx:{mb:1,fontWeight:"bold",color:"#1a1a1a"},children:" Efficient Frontier"}),e.jsx(u,{variant:"caption",sx:{color:"#888",mb:3,display:"block"},children:"Risk vs Return trade-offs | Current portfolio vs optimized strategies"}),e.jsx(Ne,{width:"100%",height:350,children:e.jsxs(Br,{data:r.efficientFrontier,children:[e.jsx(qe,{strokeDasharray:"3 3"}),e.jsx(Ke,{dataKey:"riskProfile",label:{value:"Risk Profile",position:"insideBottomRight",offset:-5}}),e.jsx(Re,{yAxisId:"left",label:{value:"Return %",angle:-90,position:"insideLeft"}}),e.jsx(Re,{yAxisId:"right",orientation:"right",label:{value:"Sharpe Ratio",angle:90,position:"insideRight"}}),e.jsx(Le,{formatter:p=>typeof p=="number"?p.toFixed(2):p,labelFormatter:p=>`Risk Profile: ${p}`}),e.jsx(lt,{}),e.jsx(Kt,{yAxisId:"left",type:"monotone",dataKey:"return",stroke:"#82ca9d",name:"Expected Return",dot:{r:5}}),e.jsx(Kt,{yAxisId:"right",type:"monotone",dataKey:"sharpeRatio",stroke:"#8884d8",name:"Sharpe Ratio",dot:{r:5}})]})}),e.jsx(R,{sx:{mt:3,p:2,bgcolor:"#f5f5f5",borderRadius:1},children:e.jsxs(v,{container:!0,spacing:2,children:[e.jsxs(v,{item:!0,xs:12,sm:6,md:3,children:[e.jsx(u,{variant:"caption",color:"textSecondary",children:"Frontier Points"}),e.jsx(u,{variant:"body2",sx:{fontWeight:"bold",color:"#1976d2"},children:r.efficientFrontier.length})]}),e.jsxs(v,{item:!0,xs:12,sm:6,md:3,children:[e.jsx(u,{variant:"caption",color:"textSecondary",children:"Risk Range"}),e.jsxs(u,{variant:"body2",sx:{fontWeight:"bold",color:"#f57c00"},children:[Math.min(...r.efficientFrontier.map(p=>p.risk||0)).toFixed(1),"% - ",Math.max(...r.efficientFrontier.map(p=>p.risk||0)).toFixed(1),"%"]})]}),e.jsxs(v,{item:!0,xs:12,sm:6,md:3,children:[e.jsx(u,{variant:"caption",color:"textSecondary",children:"Return Range"}),e.jsxs(u,{variant:"body2",sx:{fontWeight:"bold",color:"#4caf50"},children:[Math.min(...r.efficientFrontier.map(p=>p.return||0)).toFixed(1),"% - ",Math.max(...r.efficientFrontier.map(p=>p.return||0)).toFixed(1),"%"]})]}),e.jsxs(v,{item:!0,xs:12,sm:6,md:3,children:[e.jsx(u,{variant:"caption",color:"textSecondary",children:"Max Sharpe Ratio"}),e.jsx(u,{variant:"body2",sx:{fontWeight:"bold",color:"#2196f3"},children:Math.max(...r.efficientFrontier.map(p=>p.sharpeRatio||0)).toFixed(2)})]})]})})]}),r?.targetAllocation&&r.targetAllocation.length>0&&e.jsxs(Ye,{sx:{p:3,mb:3,bgcolor:"#fafafa"},children:[e.jsx(u,{variant:"h5",sx:{mb:1,fontWeight:"bold",color:"#1a1a1a"},children:" Target Allocation Breakdown"}),e.jsx(u,{variant:"caption",sx:{color:"#888",mb:3,display:"block"},children:"Recommended portfolio weights for optimal risk-adjusted returns"}),e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:12,md:6,children:e.jsx(R,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:350},children:e.jsx(Ne,{width:"100%",height:"100%",children:e.jsxs(Uo,{children:[e.jsx($o,{data:r.targetAllocation.filter(p=>p.weight!==null&&p.weight!==void 0).map(p=>({name:p.symbol,value:parseFloat(p.weight.replace("%",""))})),cx:"50%",cy:"50%",labelLine:!1,label:({name:p,value:w})=>`${p}: ${w.toFixed(1)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:r.targetAllocation.map((p,w)=>e.jsx(Bo,{fill:i[w%i.length]},`cell-${w}`))}),e.jsx(Le,{formatter:p=>`${p.toFixed(2)}%`})]})})})}),e.jsxs(v,{item:!0,xs:12,md:6,children:[e.jsx(ft,{sx:{maxHeight:350,overflow:"auto"},children:e.jsxs(mt,{size:"small",children:[e.jsx(pt,{children:e.jsxs(ke,{sx:{bgcolor:"#e8f5e9",position:"sticky",top:0},children:[e.jsx(O,{sx:{fontWeight:"bold",width:"30%"},children:"Symbol"}),e.jsx(O,{align:"right",sx:{fontWeight:"bold",width:"35%"},children:"Target Weight"}),e.jsx(O,{align:"right",sx:{fontWeight:"bold",width:"35%"},children:"Expected Impact"})]})}),e.jsx(xt,{children:r.targetAllocation.filter(p=>p.weight!==null&&p.weight!==void 0).map((p,w)=>{const T=parseFloat(p.weight.replace("%","")),S=T>15?"High":T>5?"Medium":"Low",_=S==="High"?"#2e7d32":S==="Medium"?"#f57c00":"#666";return e.jsxs(ke,{sx:{"&:hover":{bgcolor:"#f1f8f5"}},children:[e.jsx(O,{sx:{fontWeight:"bold",color:"#333"},children:p.symbol}),e.jsxs(O,{align:"right",sx:{fontWeight:"700",color:"#2e7d32",fontSize:"1rem"},children:[T.toFixed(2),"%"]}),e.jsx(O,{align:"right",sx:{color:_,fontWeight:"bold"},children:S})]},w)})})]})}),e.jsx(R,{sx:{mt:2,p:2,bgcolor:"#f1f8f5",borderRadius:1,borderLeft:"3px solid #4caf50"},children:e.jsxs(u,{variant:"caption",sx:{color:"#2e7d32",fontWeight:"bold"},children:["Total Portfolio: ",r.targetAllocation.filter(p=>p.weight!==null&&p.weight!==void 0).reduce((p,w)=>p+parseFloat(w.weight.replace("%","")),0).toFixed(2),"% | ",r.targetAllocation.filter(p=>p.weight!==null&&p.weight!==void 0).length," positions"]})})]})]})]}),r?.allocationComparison&&r.allocationComparison.before&&r.allocationComparison.after&&e.jsxs(Ye,{sx:{p:2,mb:3},children:[e.jsx(u,{variant:"h6",sx:{mb:3,fontWeight:"bold"},children:" Portfolio Holdings: Before & After Rebalance"}),e.jsx(u,{variant:"body2",color:"textSecondary",sx:{mb:2},children:"Individual position changes | Compare current weights vs target weights | Green = Improvement expected"}),e.jsxs(R,{sx:{display:"flex",gap:3,flexWrap:"wrap"},children:[e.jsxs(R,{sx:{flex:"1 1 400px",minWidth:400},children:[e.jsx(u,{variant:"subtitle2",sx:{mb:2,fontWeight:"bold",color:"#ff6f00",display:"flex",alignItems:"center",gap:1},children:" Current Holdings"}),e.jsx(ft,{children:e.jsxs(mt,{size:"small",children:[e.jsx(pt,{children:e.jsxs(ke,{sx:{bgcolor:"#fff3e0"},children:[e.jsx(O,{sx:{fontWeight:"bold",width:"40%"},children:"Symbol"}),e.jsx(O,{align:"right",sx:{fontWeight:"bold",width:"30%"},children:"Weight"}),e.jsx(O,{align:"right",sx:{fontWeight:"bold",width:"30%"},children:"Sector"})]})}),e.jsx(xt,{children:r.allocationComparison.before&&r.allocationComparison.before.length>0?r.allocationComparison.before.map((p,w)=>e.jsxs(ke,{sx:{"&:hover":{bgcolor:"#fff8f0"}},children:[e.jsx(O,{sx:{fontWeight:"bold",color:"#333"},children:p.symbol}),e.jsx(O,{align:"right",sx:{color:"#ff9800",fontWeight:"bold"},children:p.weight}),e.jsx(O,{align:"right",sx:{fontSize:"0.875rem",color:"#666"},children:p.sector||"N/A"})]},w)):e.jsx(ke,{children:e.jsx(O,{colSpan:3,align:"center",sx:{color:"#999",py:2},children:"No current holdings"})})})]})}),e.jsx(R,{sx:{mt:2,p:1.5,bgcolor:"#fff9e6",borderRadius:1,borderLeft:"3px solid #ff9800"},children:e.jsxs(u,{variant:"caption",sx:{color:"#ff6f00",fontWeight:"bold"},children:[r.allocationComparison.before?r.allocationComparison.before.length:0," positions | Total: 100%"]})})]}),e.jsxs(R,{sx:{flex:"1 1 400px",minWidth:400},children:[e.jsx(u,{variant:"subtitle2",sx:{mb:2,fontWeight:"bold",color:"#2e7d32",display:"flex",alignItems:"center",gap:1},children:" Target Holdings"}),e.jsx(ft,{children:e.jsxs(mt,{size:"small",children:[e.jsx(pt,{children:e.jsxs(ke,{sx:{bgcolor:"#e8f5e9"},children:[e.jsx(O,{sx:{fontWeight:"bold",width:"40%"},children:"Symbol"}),e.jsx(O,{align:"right",sx:{fontWeight:"bold",width:"30%"},children:"Weight"}),e.jsx(O,{align:"right",sx:{fontWeight:"bold",width:"30%"},children:"Sector"})]})}),e.jsx(xt,{children:r.allocationComparison.after&&r.allocationComparison.after.length>0?r.allocationComparison.after.map((p,w)=>{try{const T=r.allocationComparison.before?.find(P=>P.symbol===p.symbol),S=T?.weight?.toString()||"0%",_=p.weight?.toString()||"0%",j=parseFloat(S.replace("%","")),g=parseFloat(_.replace("%","")),f=T&&j!==g,C=!T;return e.jsxs(ke,{sx:{bgcolor:C?"#c8e6c9":f?"#fff8e1":"transparent","&:hover":{bgcolor:C?"#b5ddb5":"#f5f5f5"}},children:[e.jsxs(O,{sx:{fontWeight:"bold",color:"#333"},children:[p.symbol,C&&e.jsx(ze,{label:"NEW",size:"small",sx:{ml:1,bgcolor:"#4caf50",color:"white",height:"20px"}})]}),e.jsx(O,{align:"right",children:e.jsxs(R,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:.5},children:[e.jsx(u,{sx:{color:"#4caf50",fontWeight:"bold"},children:p.weight}),f&&!isNaN(j)&&!isNaN(g)&&e.jsxs(u,{variant:"caption",sx:{color:g>j?"#4caf50":"#f44336",fontWeight:"bold"},children:[g>j?"":""," ",Math.abs((g-j).toFixed(2)),"%"]})]})}),e.jsx(O,{align:"right",sx:{fontSize:"0.875rem",color:"#666"},children:p.sector||"N/A"})]},w)}catch(T){return console.error("Error rendering holding:",T,p),null}}):e.jsx(ke,{children:e.jsx(O,{colSpan:3,align:"center",sx:{color:"#999",py:2},children:"No target holdings"})})})]})}),e.jsx(R,{sx:{mt:2,p:1.5,bgcolor:"#f1f8e9",borderRadius:1,borderLeft:"3px solid #4caf50"},children:e.jsxs(u,{variant:"caption",sx:{color:"#2e7d32",fontWeight:"bold"},children:[r.allocationComparison.after?r.allocationComparison.after.length:0," positions | +",(r.allocationComparison.after?.length||0)-(r.allocationComparison.before?.length||0)," new"]})})]})]}),e.jsx(R,{sx:{mt:3,p:2,bgcolor:"#f5f5f5",borderRadius:1,borderLeft:"4px solid #1976d2"},children:e.jsxs(v,{container:!0,spacing:2,children:[e.jsxs(v,{item:!0,xs:12,sm:6,md:3,children:[e.jsx(u,{variant:"caption",color:"textSecondary",children:"Current Holdings"}),e.jsx(u,{variant:"body2",sx:{fontWeight:"bold",color:"#ff9800"},children:r.allocationComparison.before?.length||0})]}),e.jsxs(v,{item:!0,xs:12,sm:6,md:3,children:[e.jsx(u,{variant:"caption",color:"textSecondary",children:"Target Holdings"}),e.jsx(u,{variant:"body2",sx:{fontWeight:"bold",color:"#4caf50"},children:r.allocationComparison.after?.length||0})]}),e.jsxs(v,{item:!0,xs:12,sm:6,md:3,children:[e.jsx(u,{variant:"caption",color:"textSecondary",children:"New Positions"}),e.jsxs(u,{variant:"body2",sx:{fontWeight:"bold",color:"#2196f3"},children:["+",(r.allocationComparison.after?.length||0)-(r.allocationComparison.before?.length||0)]})]}),e.jsxs(v,{item:!0,xs:12,sm:6,md:3,children:[e.jsx(u,{variant:"caption",color:"textSecondary",children:"Positions Exited"}),e.jsx(u,{variant:"body2",sx:{fontWeight:"bold",color:"#f44336"},children:r.allocationComparison.before?r.allocationComparison.before.filter(p=>!r.allocationComparison.after?.find(w=>w.symbol===p.symbol)).length:0})]})]})})]})]})}function Qd(t){return typeof t=="string"}function Zd(t,s,r){return t===void 0||Qd(t)?s:{...s,ownerState:{...s.ownerState,...r}}}function Jd(t,s=[]){if(t===void 0)return{};const r={};return Object.keys(t).filter(n=>n.match(/^on[A-Z]/)&&typeof t[n]=="function"&&!s.includes(n)).forEach(n=>{r[n]=t[n]}),r}function gn(t,s,r){return typeof t=="function"?t(s,r):t}function Xd(...t){const s=h.useRef(void 0),r=h.useCallback(n=>{const a=t.map(o=>{if(o==null)return null;if(typeof o=="function"){const i=o,l=i(n);return typeof l=="function"?l:()=>{i(null)}}return o.current=n,()=>{o.current=null}});return()=>{a.forEach(o=>o?.())}},t);return h.useMemo(()=>t.every(n=>n==null)?null:n=>{s.current&&(s.current(),s.current=void 0),n!=null&&(s.current=r(n))},t)}function xo(t){if(t===void 0)return{};const s={};return Object.keys(t).filter(r=>!(r.match(/^on[A-Z]/)&&typeof t[r]=="function")).forEach(r=>{s[r]=t[r]}),s}function eu(t){const{getSlotProps:s,additionalProps:r,externalSlotProps:n,externalForwardedProps:a,className:o}=t;if(!s){const b=Je(r?.className,o,a?.className,n?.className),D={...r?.style,...a?.style,...n?.style},p={...r,...a,...n};return b.length>0&&(p.className=b),Object.keys(D).length>0&&(p.style=D),{props:p,internalRef:void 0}}const i=Jd({...a,...n}),l=xo(n),c=xo(a),d=s(i),m=Je(d?.className,r?.className,o,a?.className,n?.className),x={...d?.style,...r?.style,...a?.style,...n?.style},y={...d,...r,...c,...l};return m.length>0&&(y.className=m),Object.keys(x).length>0&&(y.style=x),{props:y,internalRef:d.ref}}function Ue(t){const{elementType:s,externalSlotProps:r,ownerState:n,skipResolvingSlotProps:a=!1,...o}=t,i=a?{}:gn(r,n),{props:l,internalRef:c}=eu({...o,externalSlotProps:i}),d=Xd(c,i?.ref,t.additionalProps?.ref);return Zd(s,{...l,ref:d},n)}const Ds=(t,s)=>t.length!==s.length?!1:s.every(r=>t.includes(r)),tu=({openTo:t,defaultOpenTo:s,views:r,defaultViews:n})=>{const a=r??n;let o;if(t!=null)o=t;else if(a.includes(s))o=s;else if(a.length>0)o=a[0];else throw new Error("MUI: The `views` prop must contain at least one view");return{views:a,openTo:o}},Xs=(t,s,r)=>{let n=s;return n=t.setHours(n,t.getHours(r)),n=t.setMinutes(n,t.getMinutes(r)),n=t.setSeconds(n,t.getSeconds(r)),n},Es=({date:t,disableFuture:s,disablePast:r,maxDate:n,minDate:a,isDateDisabled:o,utils:i,timezone:l})=>{const c=Xs(i,i.dateWithTimezone(void 0,l),t);r&&i.isBefore(a,c)&&(a=c),s&&i.isAfter(n,c)&&(n=c);let d=t,m=t;for(i.isBefore(t,a)&&(d=a,m=null),i.isAfter(t,n)&&(m&&(m=n),d=null);d||m;){if(d&&i.isAfter(d,n)&&(d=null),m&&i.isBefore(m,a)&&(m=null),d){if(!o(d))return d;d=i.addDays(d,1)}if(m){if(!o(m))return m;m=i.addDays(m,-1)}}return null},su=(t,s)=>s==null||!t.isValid(s)?null:s,gt=(t,s,r)=>s==null||!t.isValid(s)?r:s,ru=(t,s,r)=>!t.isValid(s)&&s!=null&&!t.isValid(r)&&r!=null?!0:t.isEqual(s,r),yn=(t,s)=>{const n=[t.startOfYear(s)];for(;n.length<12;){const a=n[n.length-1];n.push(t.addMonths(a,1))}return n},ma=(t,s,r)=>r==="date"?t.startOfDay(t.dateWithTimezone(void 0,s)):t.dateWithTimezone(void 0,s),nu=["year","month","day"],go=t=>nu.includes(t),bn=(t,{format:s,views:r},n)=>{if(s!=null)return s;const a=t.formats;return Ds(r,["year"])?a.year:Ds(r,["month"])?a.month:Ds(r,["day"])?a.dayOfMonth:Ds(r,["month","year"])?`${a.month} ${a.year}`:Ds(r,["day","month"])?`${a.month} ${a.dayOfMonth}`:n?/en/.test(t.getCurrentLocaleCode())?a.normalDateWithWeekday:a.normalDate:a.keyboardDate},ou=(t,s)=>{const r=t.startOfWeek(s);return[0,1,2,3,4,5,6].map(n=>t.addDays(r,n))},au=["hours","minutes","seconds"],iu=t=>au.includes(t),yo=(t,s)=>s.getHours(t)*3600+s.getMinutes(t)*60+s.getSeconds(t),lu=(t,s)=>(r,n)=>t?s.isAfter(r,n):yo(r,s)>yo(n,s),Ct={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},cu=t=>Math.max(...t.map(s=>{var r;return(r=Ct[s.type])!=null?r:1})),Ts=(t,s,r)=>{if(s===Ct.year)return t.startOfYear(r);if(s===Ct.month)return t.startOfMonth(r);if(s===Ct.day)return t.startOfDay(r);let n=r;return s<Ct.minutes&&(n=t.setMinutes(n,0)),s<Ct.seconds&&(n=t.setSeconds(n,0)),s<Ct.milliseconds&&(n=t.setMilliseconds(n,0)),n},du=({props:t,utils:s,granularity:r,timezone:n,getTodayDate:a})=>{var o;let i=a?a():Ts(s,r,ma(s,n));t.minDate!=null&&s.isAfterDay(t.minDate,i)&&(i=Ts(s,r,t.minDate)),t.maxDate!=null&&s.isBeforeDay(t.maxDate,i)&&(i=Ts(s,r,t.maxDate));const l=lu((o=t.disableIgnoringDatePartForTimeValidation)!=null?o:!1,s);return t.minTime!=null&&l(t.minTime,i)&&(i=Ts(s,r,t.disableIgnoringDatePartForTimeValidation?t.minTime:Xs(s,i,t.minTime))),t.maxTime!=null&&l(i,t.maxTime)&&(i=Ts(s,r,t.disableIgnoringDatePartForTimeValidation?t.maxTime:Xs(s,i,t.maxTime))),i},pa=(t,s)=>{const r=t.formatTokenMap[s];if(r==null)throw new Error([`MUI: The token "${s}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof r=="string"?{type:r,contentType:r==="meridiem"?"letter":"digit",maxLength:void 0}:{type:r.sectionType,contentType:r.contentType,maxLength:r.maxLength}},uu=t=>{switch(t){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}},lr=(t,s,r)=>{const n=[],a=t.dateWithTimezone(void 0,s),o=t.startOfWeek(a),i=t.endOfWeek(a);let l=o;for(;t.isBefore(l,i);)n.push(l),l=t.addDays(l,1);return n.map(c=>t.formatByString(c,r))},xa=(t,s,r,n)=>{switch(r){case"month":return yn(t,t.dateWithTimezone(void 0,s)).map(a=>t.formatByString(a,n));case"weekDay":return lr(t,s,n);case"meridiem":{const a=t.dateWithTimezone(void 0,s);return[t.startOfDay(a),t.endOfDay(a)].map(o=>t.formatByString(o,n))}default:return[]}},ga=(t,s,r)=>{let n=s;for(n=Number(n).toString();n.length<r;)n=`0${n}`;return n},ya=(t,s,r,n,a)=>{if(a.type==="day"&&a.contentType==="digit-with-letter"){const i=t.setDate(n.longestMonth,r);return t.formatByString(i,a.format)}const o=r.toString();return a.hasLeadingZerosInInput?ga(t,o,a.maxLength):o},hu=(t,s,r,n,a,o,i)=>{const l=uu(n),c=n==="Home",d=n==="End",m=r.value===""||c||d,x=()=>{const b=a[r.type]({currentDate:o,format:r.format,contentType:r.contentType}),D=S=>ya(t,s,S,b,r),p=r.type==="minutes"&&i!=null&&i.minutesStep?i.minutesStep:1;let T=parseInt(r.value,10)+l*p;if(m){if(r.type==="year"&&!d&&!c)return t.formatByString(t.dateWithTimezone(void 0,s),r.format);l>0||c?T=b.minimum:T=b.maximum}return T%p!==0&&((l<0||c)&&(T+=p-(p+T)%p),(l>0||d)&&(T-=T%p)),T>b.maximum?D(b.minimum+(T-b.maximum-1)%(b.maximum-b.minimum+1)):T<b.minimum?D(b.maximum-(b.minimum-T-1)%(b.maximum-b.minimum+1)):D(T)},y=()=>{const b=xa(t,s,r.type,r.format);if(b.length===0)return r.value;if(m)return l>0||c?b[0]:b[b.length-1];const p=(b.indexOf(r.value)+b.length+l)%b.length;return b[p]};return r.contentType==="digit"||r.contentType==="digit-with-letter"?x():y()},vn=(t,s)=>{let r=t.value||t.placeholder;const n=s==="non-input"?t.hasLeadingZerosInFormat:t.hasLeadingZerosInInput;return s==="non-input"&&t.hasLeadingZerosInInput&&!t.hasLeadingZerosInFormat&&(r=Number(r).toString()),["input-rtl","input-ltr"].includes(s)&&t.contentType==="digit"&&!n&&r.length===1&&(r=`${r}`),s==="input-rtl"&&(r=`${r}`),r},cs=t=>t.replace(/[\u2066\u2067\u2068\u2069]/g,""),ba=(t,s)=>{let r=0,n=s?1:0;const a=[];for(let o=0;o<t.length;o+=1){const i=t[o],l=vn(i,s?"input-rtl":"input-ltr"),c=`${i.startSeparator}${l}${i.endSeparator}`,d=cs(c).length,m=c.length,x=cs(l),y=n+l.indexOf(x[0])+i.startSeparator.length,b=y+x.length;a.push(N({},i,{start:r,end:r+d,startInInput:y,endInInput:b})),r+=d,n+=m}return a},fu=(t,s,r,n,a)=>{switch(n.type){case"year":return r.fieldYearPlaceholder({digitAmount:t.formatByString(t.dateWithTimezone(void 0,s),a).length,format:a});case"month":return r.fieldMonthPlaceholder({contentType:n.contentType,format:a});case"day":return r.fieldDayPlaceholder({format:a});case"weekDay":return r.fieldWeekDayPlaceholder({contentType:n.contentType,format:a});case"hours":return r.fieldHoursPlaceholder({format:a});case"minutes":return r.fieldMinutesPlaceholder({format:a});case"seconds":return r.fieldSecondsPlaceholder({format:a});case"meridiem":return r.fieldMeridiemPlaceholder({format:a});default:return a}},bo=(t,s,r,n)=>t.formatByString(t.parse(s,r),n),va=(t,s,r)=>t.formatByString(t.dateWithTimezone(void 0,s),r).length===4,ja=(t,s,r,n,a)=>{if(r!=="digit")return!1;const o=t.dateWithTimezone(void 0,s);switch(n){case"year":return va(t,s,a)?t.formatByString(t.setYear(o,1),a)==="0001":t.formatByString(t.setYear(o,2001),a)==="01";case"month":return t.formatByString(t.startOfYear(o),a).length>1;case"day":return t.formatByString(t.startOfMonth(o),a).length>1;case"weekDay":return t.formatByString(t.startOfWeek(o),a).length>1;case"hours":return t.formatByString(t.setHours(o,1),a).length>1;case"minutes":return t.formatByString(t.setMinutes(o,1),a).length>1;case"seconds":return t.formatByString(t.setSeconds(o,1),a).length>1;default:throw new Error("Invalid section type")}},mu=(t,s)=>{const r=[],{start:n,end:a}=t.escapedCharacters,o=new RegExp(`(\\${n}[^\\${a}]*\\${a})+`,"g");let i=null;for(;i=o.exec(s);)r.push({start:i.index,end:o.lastIndex-1});return r},vo=(t,s,r,n,a,o,i,l)=>{let c="";const d=[],m=t.date(),x=_=>{if(_==="")return null;const j=pa(t,_),g=ja(t,s,j.contentType,j.type,_),f=i?g:j.contentType==="digit",C=a!=null&&t.isValid(a);let P=C?t.formatByString(a,_):"",k=null;if(f)if(g)k=P===""?t.formatByString(m,_).length:P.length;else{if(j.maxLength==null)throw new Error(`MUI: The token ${_} should have a 'maxDigitNumber' property on it's adapter`);k=j.maxLength,C&&(P=ga(t,P,k))}return d.push(N({},j,{format:_,maxLength:k,value:P,placeholder:fu(t,s,r,j,_),hasLeadingZeros:g,hasLeadingZerosInFormat:g,hasLeadingZerosInInput:f,startSeparator:d.length===0?c:"",endSeparator:"",modified:!1})),null};let y=10,b=n,D=t.expandFormat(n);for(;D!==b;)if(b=D,D=t.expandFormat(b),y-=1,y<0)throw new Error("MUI: The format expansion seems to be  enter in an infinite loop. Please open an issue with the format passed to the picker component");const p=D,w=mu(t,p),T=new RegExp(`^(${Object.keys(t.formatTokenMap).sort((_,j)=>j.length-_.length).join("|")})`,"g");let S="";for(let _=0;_<p.length;_+=1){const j=w.find(k=>k.start<=_&&k.end>=_),g=p[_],f=j!=null,C=`${S}${p.slice(_)}`,P=T.test(C);!f&&g.match(/([A-Za-z]+)/)&&P?(S=C.slice(0,T.lastIndex),_+=T.lastIndex-1):f&&j?.start===_||j?.end===_||(x(S),S="",d.length===0?c+=g:d[d.length-1].endSeparator+=g)}return x(S),d.map(_=>{const j=g=>{let f=g;return l&&f!==null&&f.includes(" ")&&(f=`${f}`),o==="spacious"&&["/",".","-"].includes(f)&&(f=` ${f} `),f};return _.startSeparator=j(_.startSeparator),_.endSeparator=j(_.endSeparator),_})},pu=(t,s)=>{const r=s.some(l=>l.type==="day"),n=[],a=[];for(let l=0;l<s.length;l+=1){const c=s[l];r&&c.type==="weekDay"||(n.push(c.format),a.push(vn(c,"non-input")))}const o=n.join(" "),i=a.join(" ");return t.parse(i,o)},xu=(t,s)=>{const n=t.map(a=>{const o=vn(a,s?"input-rtl":"input-ltr");return`${a.startSeparator}${o}${a.endSeparator}`}).join("");return s?`${n}`:n},gu=(t,s)=>{const r=t.dateWithTimezone(void 0,s),n=t.endOfYear(r),a=t.endOfDay(r),{maxDaysInMonth:o,longestMonth:i}=yn(t,r).reduce((l,c)=>{const d=t.getDaysInMonth(c);return d>l.maxDaysInMonth?{maxDaysInMonth:d,longestMonth:c}:l},{maxDaysInMonth:0,longestMonth:null});return{year:({format:l})=>({minimum:0,maximum:va(t,s,l)?9999:99}),month:()=>({minimum:1,maximum:t.getMonth(n)+1}),day:({currentDate:l})=>({minimum:1,maximum:l!=null&&t.isValid(l)?t.getDaysInMonth(l):o,longestMonth:i}),weekDay:({format:l,contentType:c})=>{if(c==="digit"){const d=lr(t,s,l).map(Number);return{minimum:Math.min(...d),maximum:Math.max(...d)}}return{minimum:1,maximum:7}},hours:({format:l})=>{const c=t.getHours(a);return t.formatByString(t.endOfDay(r),l)!==c.toString()?{minimum:1,maximum:Number(t.formatByString(t.startOfDay(r),l))}:{minimum:0,maximum:c}},minutes:()=>({minimum:0,maximum:t.getMinutes(a)}),seconds:()=>({minimum:0,maximum:t.getSeconds(a)}),meridiem:()=>({minimum:0,maximum:0})}},yu=(t,s,r,n,a)=>{switch(r.type){case"year":return t.setYear(a,t.getYear(n));case"month":return t.setMonth(a,t.getMonth(n));case"weekDay":{const o=lr(t,s,r.format),i=t.formatByString(n,r.format),l=o.indexOf(i),d=o.indexOf(r.value)-l;return t.addDays(n,d)}case"day":return t.setDate(a,t.getDate(n));case"meridiem":{const o=t.getHours(n)<12,i=t.getHours(a);return o&&i>=12?t.addHours(a,-12):!o&&i<12?t.addHours(a,12):a}case"hours":return t.setHours(a,t.getHours(n));case"minutes":return t.setMinutes(a,t.getMinutes(n));case"seconds":return t.setSeconds(a,t.getSeconds(n));default:return a}},jo={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8},wo=(t,s,r,n,a,o)=>[...n].sort((i,l)=>jo[i.type]-jo[l.type]).reduce((i,l)=>!o||l.modified?yu(t,s,l,r,i):i,a),bu=()=>navigator.userAgent.toLowerCase().indexOf("android")>-1,vu=(t,s)=>{const r={};if(!s)return t.forEach((c,d)=>{const m=d===0?null:d-1,x=d===t.length-1?null:d+1;r[d]={leftIndex:m,rightIndex:x}}),{neighbors:r,startIndex:0,endIndex:t.length-1};const n={},a={};let o=0,i=0,l=t.length-1;for(;l>=0;){i=t.findIndex((c,d)=>{var m;return d>=o&&((m=c.endSeparator)==null?void 0:m.includes(" "))&&c.endSeparator!==" / "}),i===-1&&(i=t.length-1);for(let c=i;c>=o;c-=1)a[c]=l,n[l]=c,l-=1;o=i+1}return t.forEach((c,d)=>{const m=a[d],x=m===0?null:n[m-1],y=m===t.length-1?null:n[m+1];r[d]={leftIndex:x,rightIndex:y}}),{neighbors:r,startIndex:n[0],endIndex:n[t.length-1]}},ju=["value","referenceDate"],It={emptyValue:null,getTodayValue:ma,getInitialReferenceValue:t=>{let{value:s,referenceDate:r}=t,n=Te(t,ju);return s!=null&&n.utils.isValid(s)?s:r??du(n)},cleanValue:su,areValuesEqual:ru,isSameError:(t,s)=>t===s,hasError:t=>t!=null,defaultErrorState:null,getTimezone:(t,s)=>s==null||!t.isValid(s)?null:t.getTimezone(s),setTimezone:(t,s,r)=>r==null?null:t.setTimezone(r,s)},wu={updateReferenceValue:(t,s,r)=>s==null||!t.isValid(s)?r:s,getSectionsFromValue:(t,s,r,n,a)=>!t.isValid(s)&&!!r?r:ba(a(s),n),getValueStrFromSections:xu,getActiveDateManager:(t,s)=>({date:s.value,referenceDate:s.referenceValue,getSections:r=>r,getNewValuesFromNewActiveDate:r=>({value:r,referenceValue:r==null||!t.isValid(r)?s.referenceValue:r})}),parseValueStr:(t,s,r)=>r(t.trim(),s)},Su=["localeText"],en=h.createContext(null),jn=function(s){var r;const{localeText:n}=s,a=Te(s,Su),{utils:o,localeText:i}=(r=h.useContext(en))!=null?r:{utils:void 0,localeText:void 0},l=Ge({props:a,name:"MuiLocalizationProvider"}),{children:c,dateAdapter:d,dateFormats:m,dateLibInstance:x,adapterLocale:y,localeText:b}=l,D=h.useMemo(()=>N({},b,i,n),[b,i,n]),p=h.useMemo(()=>{if(!d)return o||null;const S=new d({locale:y,formats:m,instance:x});if(!S.isMUIAdapter)throw new Error(["MUI: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/getting-started/#installation"].join(`
`));return S},[d,y,m,x,o]),w=h.useMemo(()=>p?{minDate:p.date("1900-01-01T00:00:00.000"),maxDate:p.date("2099-12-31T00:00:00.000")}:null,[p]),T=h.useMemo(()=>({utils:p,defaultDates:w,localeText:D}),[w,p,D]);return e.jsx(en.Provider,{value:T,children:c})},Cu=t=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:N({},t)}}}}),wa={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"open previous view",openNextView:"open next view",calendarViewSwitchingButtonAriaLabel:t=>t==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",clockLabelText:(t,s,r)=>`Select ${t}. ${s===null?"No time selected":`Selected time is ${r.format(s,"fullTime")}`}`,hoursClockNumberText:t=>`${t} hours`,minutesClockNumberText:t=>`${t} minutes`,secondsClockNumberText:t=>`${t} seconds`,selectViewText:t=>`Select ${t}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:t=>`Week ${t}`,calendarWeekNumberText:t=>`${t}`,openDatePickerDialogue:(t,s)=>t!==null&&s.isValid(t)?`Choose date, selected date is ${s.format(t,"fullDate")}`:"Choose date",openTimePickerDialogue:(t,s)=>t!==null&&s.isValid(t)?`Choose time, selected time is ${s.format(t,"fullTime")}`:"Choose time",fieldClearLabel:"Clear value",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:t=>"Y".repeat(t.digitAmount),fieldMonthPlaceholder:t=>t.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:t=>t.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa"},Pu=wa;Cu(wa);const ss=()=>{const t=h.useContext(en);if(t===null)throw new Error(["MUI: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(t.utils===null)throw new Error(["MUI: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const s=h.useMemo(()=>N({},Pu,t.localeText),[t.localeText]);return h.useMemo(()=>N({},t,{localeText:s}),[t,s])},Ie=()=>ss().utils,Ls=()=>ss().defaultDates,$t=()=>ss().localeText,cr=t=>{const s=Ie(),r=h.useRef();return r.current===void 0&&(r.current=s.dateWithTimezone(void 0,t)),r.current};function Du(t){return at("MuiPickersToolbar",t)}it("MuiPickersToolbar",["root","content"]);const Tu=t=>{const{classes:s,isLandscape:r}=t;return nt({root:["root"],content:["content"],penIconButton:["penIconButton",r&&"penIconButtonLandscape"]},Du,s)},_u=ve("div",{name:"MuiPickersToolbar",slot:"Root",overridesResolver:(t,s)=>s.root})(({theme:t,ownerState:s})=>N({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:t.spacing(2,3)},s.isLandscape&&{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"})),ku=ve("div",{name:"MuiPickersToolbar",slot:"Content",overridesResolver:(t,s)=>s.content})(({ownerState:t})=>{var s;return{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:t.isLandscape?"flex-start":"space-between",flexDirection:t.isLandscape?(s=t.landscapeDirection)!=null?s:"column":"row",flex:1,alignItems:t.isLandscape?"flex-start":"center"}}),Eu=h.forwardRef(function(s,r){const n=Ge({props:s,name:"MuiPickersToolbar"}),{children:a,className:o,toolbarTitle:i,hidden:l,titleId:c}=n,d=n,m=Tu(d);return l?null:e.jsxs(_u,{ref:r,className:Je(m.root,o),ownerState:d,children:[e.jsx(u,{color:"text.secondary",variant:"overline",id:c,children:i}),e.jsx(ku,{className:m.content,ownerState:d,children:a})]})});function Iu(t){return at("MuiDatePickerToolbar",t)}it("MuiDatePickerToolbar",["root","title"]);const Au=["value","isLandscape","onChange","toolbarFormat","toolbarPlaceholder","views","className"],Ru=t=>{const{classes:s}=t;return nt({root:["root"],title:["title"]},Iu,s)},Mu=ve(Eu,{name:"MuiDatePickerToolbar",slot:"Root",overridesResolver:(t,s)=>s.root})({}),Ou=ve(u,{name:"MuiDatePickerToolbar",slot:"Title",overridesResolver:(t,s)=>s.title})(({ownerState:t})=>N({},t.isLandscape&&{margin:"auto 16px auto auto"})),Fu=h.forwardRef(function(s,r){const n=Ge({props:s,name:"MuiDatePickerToolbar"}),{value:a,isLandscape:o,toolbarFormat:i,toolbarPlaceholder:l="",views:c,className:d}=n,m=Te(n,Au),x=Ie(),y=$t(),b=Ru(n),D=h.useMemo(()=>{if(!a)return l;const w=bn(x,{format:i,views:c},!0);return x.formatByString(a,w)},[a,i,l,x,c]),p=n;return e.jsx(Mu,N({ref:r,toolbarTitle:y.datePickerToolbarTitle,isLandscape:o,className:Je(b.root,d)},m,{children:e.jsx(Ou,{variant:"h4",align:o?"left":"center",ownerState:p,className:b.title,children:D})}))}),Sa=t=>{if(t!==void 0)return Object.keys(t).reduce((s,r)=>N({},s,{[`${r.slice(0,1).toLowerCase()}${r.slice(1)}`]:t[r]}),{})};function Ca(t,s){var r,n,a,o;const i=Ie(),l=Ls(),c=Ge({props:t,name:s}),d=h.useMemo(()=>{var x;return((x=c.localeText)==null?void 0:x.toolbarTitle)==null?c.localeText:N({},c.localeText,{datePickerToolbarTitle:c.localeText.toolbarTitle})},[c.localeText]),m=(r=c.slots)!=null?r:Sa(c.components);return N({},c,{localeText:d},tu({views:c.views,openTo:c.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{disableFuture:(n=c.disableFuture)!=null?n:!1,disablePast:(a=c.disablePast)!=null?a:!1,minDate:gt(i,c.minDate,l.minDate),maxDate:gt(i,c.maxDate,l.maxDate),slots:N({toolbar:Fu},m),slotProps:(o=c.slotProps)!=null?o:c.componentsProps})}const Nu=Ut(e.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Lu=Ut(e.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"ArrowLeft"),Vu=Ut(e.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"ArrowRight"),Wu=Ut(e.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Calendar");Ut(e.jsxs(h.Fragment,{children:[e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),e.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Clock");Ut(e.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),"DateRange");Ut(e.jsxs(h.Fragment,{children:[e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),e.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Time");const Uu=Ut(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");function $u(t){return at("MuiPickersArrowSwitcher",t)}it("MuiPickersArrowSwitcher",["root","spacer","button"]);const Bu=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel"],zu=["ownerState"],Hu=["ownerState"],Gu=ve("div",{name:"MuiPickersArrowSwitcher",slot:"Root",overridesResolver:(t,s)=>s.root})({display:"flex"}),qu=ve("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer",overridesResolver:(t,s)=>s.spacer})(({theme:t})=>({width:t.spacing(3)})),So=ve(We,{name:"MuiPickersArrowSwitcher",slot:"Button",overridesResolver:(t,s)=>s.button})(({ownerState:t})=>N({},t.hidden&&{visibility:"hidden"})),Ku=t=>{const{classes:s}=t;return nt({root:["root"],spacer:["spacer"],button:["button"]},$u,s)},Yu=h.forwardRef(function(s,r){var n,a,o,i;const c=Dt().direction==="rtl",d=Ge({props:s,name:"MuiPickersArrowSwitcher"}),{children:m,className:x,slots:y,slotProps:b,isNextDisabled:D,isNextHidden:p,onGoToNext:w,nextLabel:T,isPreviousDisabled:S,isPreviousHidden:_,onGoToPrevious:j,previousLabel:g}=d,f=Te(d,Bu),C=d,P=Ku(C),k={isDisabled:D,isHidden:p,goTo:w,label:T},M={isDisabled:S,isHidden:_,goTo:j,label:g},W=(n=y?.previousIconButton)!=null?n:So,$=Ue({elementType:W,externalSlotProps:b?.previousIconButton,additionalProps:{size:"medium",title:M.label,"aria-label":M.label,disabled:M.isDisabled,edge:"end",onClick:M.goTo},ownerState:N({},C,{hidden:M.isHidden}),className:P.button}),B=(a=y?.nextIconButton)!=null?a:So,U=Ue({elementType:B,externalSlotProps:b?.nextIconButton,additionalProps:{size:"medium",title:k.label,"aria-label":k.label,disabled:k.isDisabled,edge:"start",onClick:k.goTo},ownerState:N({},C,{hidden:k.isHidden}),className:P.button}),V=(o=y?.leftArrowIcon)!=null?o:Lu,J=Ue({elementType:V,externalSlotProps:b?.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),le=Te(J,zu),X=(i=y?.rightArrowIcon)!=null?i:Vu,E=Ue({elementType:X,externalSlotProps:b?.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),A=Te(E,Hu);return e.jsxs(Gu,N({ref:r,className:Je(P.root,x),ownerState:C},f,{children:[e.jsx(W,N({},$,{children:c?e.jsx(X,N({},A)):e.jsx(V,N({},le))})),m?e.jsx(u,{variant:"subtitle1",component:"span",children:m}):e.jsx(qu,{className:P.spacer,ownerState:C}),e.jsx(B,N({},U,{children:c?e.jsx(V,N({},le)):e.jsx(X,N({},A))}))]}))}),Os=36,dr=2,ur=320,Qu=280,wn=334,Zu=ve(kt)({[`& .${kn.container}`]:{outline:0},[`& .${kn.paper}`]:{outline:0,minWidth:ur}}),Ju=ve(Et)({"&:first-of-type":{padding:0}});function Xu(t){var s,r;const{children:n,onDismiss:a,open:o,slots:i,slotProps:l}=t,c=(s=i?.dialog)!=null?s:Zu,d=(r=i?.mobileTransition)!=null?r:rr;return e.jsx(c,N({open:o,onClose:a},l?.dialog,{TransitionComponent:d,TransitionProps:l?.mobileTransition,PaperComponent:i?.mobilePaper,PaperProps:l?.mobilePaper,children:e.jsx(Ju,{children:n})}))}function eh(t){return at("MuiPickersPopper",t)}it("MuiPickersPopper",["root","paper"]);function th(t,s){return Array.isArray(s)?s.every(r=>t.indexOf(r)!==-1):t.indexOf(s)!==-1}const sh=(t,s)=>r=>{(r.key==="Enter"||r.key===" ")&&(t(r),r.preventDefault(),r.stopPropagation())},er=(t=document)=>{const s=t.activeElement;return s?s.shadowRoot?er(s.shadowRoot):s:null},rh="@media (pointer: fine)",nh="@media (prefers-reduced-motion: reduce)",fs=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),Co=fs&&fs[1]?parseInt(fs[1],10):null,Po=fs&&fs[2]?parseInt(fs[2],10):null,oh=Co&&Co<10||Po&&Po<13||!1,Pa=()=>sr(nh,{defaultMatches:!1})||oh,ah=["PaperComponent","popperPlacement","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],ih=t=>{const{classes:s}=t;return nt({root:["root"],paper:["paper"]},eh,s)},lh=ve(ri,{name:"MuiPickersPopper",slot:"Root",overridesResolver:(t,s)=>s.root})(({theme:t})=>({zIndex:t.zIndex.modal})),ch=ve(Ye,{name:"MuiPickersPopper",slot:"Paper",overridesResolver:(t,s)=>s.paper})(({ownerState:t})=>N({outline:0,transformOrigin:"top center"},t.placement.includes("top")&&{transformOrigin:"bottom center"}));function dh(t,s){return s.documentElement.clientWidth<t.clientX||s.documentElement.clientHeight<t.clientY}function uh(t,s){const r=h.useRef(!1),n=h.useRef(!1),a=h.useRef(null),o=h.useRef(!1);h.useEffect(()=>{if(!t)return;function c(){o.current=!0}return document.addEventListener("mousedown",c,!0),document.addEventListener("touchstart",c,!0),()=>{document.removeEventListener("mousedown",c,!0),document.removeEventListener("touchstart",c,!0),o.current=!1}},[t]);const i=he(c=>{if(!o.current)return;const d=n.current;n.current=!1;const m=jr(a.current);if(!a.current||"clientX"in c&&dh(c,m))return;if(r.current){r.current=!1;return}let x;c.composedPath?x=c.composedPath().indexOf(a.current)>-1:x=!m.documentElement.contains(c.target)||a.current.contains(c.target),!x&&!d&&s(c)}),l=()=>{n.current=!0};return h.useEffect(()=>{if(t){const c=jr(a.current),d=()=>{r.current=!0};return c.addEventListener("touchstart",i),c.addEventListener("touchmove",d),()=>{c.removeEventListener("touchstart",i),c.removeEventListener("touchmove",d)}}},[t,i]),h.useEffect(()=>{if(t){const c=jr(a.current);return c.addEventListener("click",i),()=>{c.removeEventListener("click",i),n.current=!1}}},[t,i]),[a,l,l]}const hh=h.forwardRef((t,s)=>{const{PaperComponent:r,popperPlacement:n,ownerState:a,children:o,paperSlotProps:i,paperClasses:l,onPaperClick:c,onPaperTouchStart:d}=t,m=Te(t,ah),x=N({},a,{placement:n}),y=Ue({elementType:r,externalSlotProps:i,additionalProps:{tabIndex:-1,elevation:8,ref:s},className:l,ownerState:x});return e.jsx(r,N({},m,y,{onClick:b=>{var D;c(b),(D=y.onClick)==null||D.call(y,b)},onTouchStart:b=>{var D;d(b),(D=y.onTouchStart)==null||D.call(y,b)},ownerState:x,children:o}))});function fh(t){var s,r,n,a;const o=Ge({props:t,name:"MuiPickersPopper"}),{anchorEl:i,children:l,containerRef:c=null,shouldRestoreFocus:d,onBlur:m,onDismiss:x,open:y,role:b,placement:D,slots:p,slotProps:w,reduceAnimations:T}=o;h.useEffect(()=>{function E(A){y&&(A.key==="Escape"||A.key==="Esc")&&x()}return document.addEventListener("keydown",E),()=>{document.removeEventListener("keydown",E)}},[x,y]);const S=h.useRef(null);h.useEffect(()=>{b==="tooltip"||d&&!d()||(y?S.current=er(document):S.current&&S.current instanceof HTMLElement&&setTimeout(()=>{S.current instanceof HTMLElement&&S.current.focus()}))},[y,b,d]);const[_,j,g]=uh(y,m??x),f=h.useRef(null),C=Jt(f,c),P=Jt(C,_),k=o,M=ih(k),W=Pa(),$=T??W,B=E=>{E.key==="Escape"&&(E.stopPropagation(),x())},U=((s=p?.desktopTransition)!=null?s:$)?rr:ti,V=(r=p?.desktopTrapFocus)!=null?r:si,J=(n=p?.desktopPaper)!=null?n:ch,le=(a=p?.popper)!=null?a:lh,X=Ue({elementType:le,externalSlotProps:w?.popper,additionalProps:{transition:!0,role:b,open:y,anchorEl:i,placement:D,onKeyDown:B},className:M.root,ownerState:o});return e.jsx(le,N({},X,{children:({TransitionProps:E,placement:A})=>e.jsx(V,N({open:y,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:b==="tooltip",isEnabled:()=>!0},w?.desktopTrapFocus,{children:e.jsx(U,N({},E,w?.desktopTransition,{children:e.jsx(hh,{PaperComponent:J,ownerState:k,popperPlacement:A,ref:P,onPaperClick:j,onPaperTouchStart:g,paperClasses:M.paper,paperSlotProps:w?.desktopPaper,children:l})}))}))}))}const Sn=({timezone:t,value:s,defaultValue:r,onChange:n,valueManager:a})=>{var o,i;const l=Ie(),c=h.useRef(r),d=(o=s??c.current)!=null?o:a.emptyValue,m=h.useMemo(()=>a.getTimezone(l,d),[l,a,d]),x=he(p=>m==null?p:a.setTimezone(l,m,p)),y=(i=t??m)!=null?i:"default",b=h.useMemo(()=>a.setTimezone(l,y,d),[a,l,y,d]),D=he((p,...w)=>{const T=x(p);n?.(T,...w)});return{value:b,handleValueChange:D,timezone:y}},Cn=({name:t,timezone:s,value:r,defaultValue:n,onChange:a,valueManager:o})=>{const[i,l]=Wt({name:t,state:"value",controlled:r,default:n??o.emptyValue}),c=he((d,...m)=>{l(d),a?.(d,...m)});return Sn({timezone:s,value:i,defaultValue:void 0,onChange:c,valueManager:o})};function Da(t,s,r,n){const{value:a,onError:o}=t,i=ss(),l=h.useRef(n),c=s({adapter:i,value:a,props:t});return h.useEffect(()=>{o&&!r(c,l.current)&&o(c,a),l.current=c},[r,o,l,c,a]),c}const mh=t=>{const s=Ie(),r=$t(),n=ss(),o=Dt().direction==="rtl",{valueManager:i,fieldValueManager:l,validator:c,internalProps:d,internalProps:{value:m,defaultValue:x,referenceDate:y,onChange:b,format:D,formatDensity:p="dense",selectedSections:w,onSelectedSectionsChange:T,shouldRespectLeadingZeros:S=!1,timezone:_}}=t,{timezone:j,value:g,handleValueChange:f}=Sn({timezone:_,value:m,defaultValue:x,onChange:b,valueManager:i}),C=h.useMemo(()=>gu(s,j),[s,j]),P=h.useCallback((q,se=null)=>l.getSectionsFromValue(s,q,se,o,ge=>vo(s,j,r,D,ge,p,S,o)),[l,D,r,o,S,s,p,j]),k=h.useMemo(()=>l.getValueStrFromSections(P(i.emptyValue),o),[l,P,i.emptyValue,o]),[M,W]=h.useState(()=>{const q=P(g),se={sections:q,value:g,referenceValue:i.emptyValue,tempValueStrAndroid:null},ge=cu(q),De=i.getInitialReferenceValue({referenceDate:y,value:g,utils:s,props:d,granularity:ge,timezone:j});return N({},se,{referenceValue:De})}),[$,B]=Wt({controlled:w,default:null,name:"useField",state:"selectedSectionIndexes"}),U=q=>{B(q),T?.(q),W(se=>N({},se,{selectedSectionQuery:null}))},V=h.useMemo(()=>{if($==null)return null;if($==="all")return{startIndex:0,endIndex:M.sections.length-1,shouldSelectBoundarySelectors:!0};if(typeof $=="number")return{startIndex:$,endIndex:$};if(typeof $=="string"){const q=M.sections.findIndex(se=>se.type===$);return{startIndex:q,endIndex:q}}return $},[$,M.sections]),J=({value:q,referenceValue:se,sections:ge})=>{if(W(z=>N({},z,{sections:ge,value:q,referenceValue:se,tempValueStrAndroid:null})),i.areValuesEqual(s,M.value,q))return;const De={validationError:c({adapter:n,value:q,props:N({},d,{value:q,timezone:j})})};f(q,De)},le=(q,se)=>{const ge=[...M.sections];return ge[q]=N({},ge[q],{value:se,modified:!0}),ba(ge,o)},X=()=>{J({value:i.emptyValue,referenceValue:M.referenceValue,sections:P(i.emptyValue)})},E=()=>{if(V==null)return;const q=M.sections[V.startIndex],se=l.getActiveDateManager(s,M,q),De=se.getSections(M.sections).filter(_e=>_e.value!=="").length===(q.value===""?0:1),z=le(V.startIndex,""),xe=De?null:s.date(new Date("")),we=se.getNewValuesFromNewActiveDate(xe);(xe!=null&&!s.isValid(xe))!=(se.date!=null&&!s.isValid(se.date))?J(N({},we,{sections:z})):W(_e=>N({},_e,we,{sections:z,tempValueStrAndroid:null}))},A=q=>{const se=(z,xe)=>{const we=s.parse(z,D);if(we==null||!s.isValid(we))return null;const _e=vo(s,j,r,D,we,p,S,o);return wo(s,j,we,_e,xe,!1)},ge=l.parseValueStr(q,M.referenceValue,se),De=l.updateReferenceValue(s,ge,M.referenceValue);J({value:ge,referenceValue:De,sections:P(ge,M.sections)})},ae=({activeSection:q,newSectionValue:se,shouldGoToNextSection:ge})=>{ge&&V&&V.startIndex<M.sections.length-1?U(V.startIndex+1):V&&V.startIndex!==V.endIndex&&U(V.startIndex);const De=l.getActiveDateManager(s,M,q),z=le(V.startIndex,se),xe=De.getSections(z),we=pu(s,xe);let _e,ne;if(we!=null&&s.isValid(we)){const fe=wo(s,j,we,xe,De.referenceDate,!0);_e=De.getNewValuesFromNewActiveDate(fe),ne=!0}else _e=De.getNewValuesFromNewActiveDate(we),ne=(we!=null&&!s.isValid(we))!=(De.date!=null&&!s.isValid(De.date));return ne?J(N({},_e,{sections:z})):W(fe=>N({},fe,_e,{sections:z,tempValueStrAndroid:null}))},K=q=>W(se=>N({},se,{tempValueStrAndroid:q}));return h.useEffect(()=>{const q=P(M.value);W(se=>N({},se,{sections:q}))},[D,s.locale]),h.useEffect(()=>{let q=!1;i.areValuesEqual(s,M.value,g)?q=i.getTimezone(s,M.value)!==i.getTimezone(s,g):q=!0,q&&W(se=>N({},se,{value:g,referenceValue:l.updateReferenceValue(s,g,se.referenceValue),sections:P(g)}))},[g]),{state:M,selectedSectionIndexes:V,setSelectedSections:U,clearValue:X,clearActiveSection:E,updateSectionValue:ae,updateValueFromValueStr:A,setTempAndroidValueStr:K,sectionsValueBoundaries:C,placeholder:k,timezone:j}},ph=5e3,os=t=>t.saveQuery!=null,xh=({sections:t,updateSectionValue:s,sectionsValueBoundaries:r,setTempAndroidValueStr:n,timezone:a})=>{const o=Ie(),[i,l]=h.useState(null),c=he(()=>l(null));h.useEffect(()=>{var b;i!=null&&((b=t[i.sectionIndex])==null?void 0:b.type)!==i.sectionType&&c()},[t,i,c]),h.useEffect(()=>{if(i!=null){const b=setTimeout(()=>c(),ph);return()=>{window.clearTimeout(b)}}return()=>{}},[i,c]);const d=({keyPressed:b,sectionIndex:D},p,w)=>{const T=b.toLowerCase(),S=t[D];if(i!=null&&(!w||w(i.value))&&i.sectionIndex===D){const j=`${i.value}${T}`,g=p(j,S);if(!os(g))return l({sectionIndex:D,value:j,sectionType:S.type}),g}const _=p(T,S);return os(_)&&!_.saveQuery?(c(),null):(l({sectionIndex:D,value:T,sectionType:S.type}),os(_)?null:_)},m=b=>{const D=(T,S,_)=>{const j=S.filter(g=>g.toLowerCase().startsWith(_));return j.length===0?{saveQuery:!1}:{sectionValue:j[0],shouldGoToNextSection:j.length===1}},p=(T,S,_,j)=>{const g=f=>xa(o,a,S.type,f);if(S.contentType==="letter")return D(S.format,g(S.format),T);if(_&&j!=null&&pa(o,_).contentType==="letter"){const f=g(_),C=D(_,f,T);return os(C)?{saveQuery:!1}:N({},C,{sectionValue:j(C.sectionValue,f)})}return{saveQuery:!1}};return d(b,(T,S)=>{switch(S.type){case"month":{const _=j=>bo(o,j,o.formats.month,S.format);return p(T,S,o.formats.month,_)}case"weekDay":{const _=(j,g)=>g.indexOf(j).toString();return p(T,S,o.formats.weekday,_)}case"meridiem":return p(T,S);default:return{saveQuery:!1}}})},x=b=>{const D=(w,T)=>{const S=+`${w}`,_=r[T.type]({currentDate:null,format:T.format,contentType:T.contentType});if(S>_.maximum)return{saveQuery:!1};if(S<_.minimum)return{saveQuery:!0};const j=+`${w}0`>_.maximum||w.length===_.maximum.toString().length;return{sectionValue:ya(o,a,S,_,T),shouldGoToNextSection:j}};return d(b,(w,T)=>{if(T.contentType==="digit"||T.contentType==="digit-with-letter")return D(w,T);if(T.type==="month"){ja(o,a,"digit","month","MM");const S=D(w,{type:T.type,format:"MM",hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2});if(os(S))return S;const _=bo(o,S.sectionValue,"MM",T.format);return N({},S,{sectionValue:_})}if(T.type==="weekDay"){const S=D(w,T);if(os(S))return S;const _=lr(o,a,T.format)[Number(S.sectionValue)-1];return N({},S,{sectionValue:_})}return{saveQuery:!1}},w=>!Number.isNaN(Number(w)))};return{applyCharacterEditing:he(b=>{const D=t[b.sectionIndex],w=b.keyPressed!==" "&&!Number.isNaN(Number(b.keyPressed))?x(b):m(b);w==null?n(null):s({activeSection:D,newSectionValue:w.sectionValue,shouldGoToNextSection:w.shouldGoToNextSection})}),resetCharacterQuery:c}},gh=["onClick","onKeyDown","onFocus","onBlur","onMouseUp","onPaste","error","clearable","onClear","disabled"],yh=t=>{const s=Ie(),{state:r,selectedSectionIndexes:n,setSelectedSections:a,clearValue:o,clearActiveSection:i,updateSectionValue:l,updateValueFromValueStr:c,setTempAndroidValueStr:d,sectionsValueBoundaries:m,placeholder:x,timezone:y}=mh(t),{inputRef:b,internalProps:D,internalProps:{readOnly:p=!1,unstableFieldRef:w,minutesStep:T},forwardedProps:{onClick:S,onKeyDown:_,onFocus:j,onBlur:g,onMouseUp:f,onPaste:C,error:P,clearable:k,onClear:M,disabled:W},fieldValueManager:$,valueManager:B,validator:U}=t,V=Te(t.forwardedProps,gh),{applyCharacterEditing:J,resetCharacterQuery:le}=xh({sections:r.sections,updateSectionValue:l,sectionsValueBoundaries:m,setTempAndroidValueStr:d,timezone:y}),X=h.useRef(null),E=Jt(b,X),A=h.useRef(void 0),K=Dt().direction==="rtl",q=h.useMemo(()=>vu(r.sections,K),[r.sections,K]),se=()=>{var Y;if(p){a(null);return}const L=(Y=X.current.selectionStart)!=null?Y:0;let H;L<=r.sections[0].startInInput||L>=r.sections[r.sections.length-1].endInInput?H=1:H=r.sections.findIndex(pe=>pe.startInInput-pe.startSeparator.length>L);const ie=H===-1?r.sections.length-1:H-1;a(ie)},ge=he((Y,...L)=>{Y.isDefaultPrevented()||(S?.(Y,...L),se())}),De=he(Y=>{f?.(Y),Y.preventDefault()}),z=he((...Y)=>{j?.(...Y);const L=X.current;window.clearTimeout(A.current),A.current=setTimeout(()=>{!L||L!==X.current||n!=null||p||(L.value.length&&Number(L.selectionEnd)-Number(L.selectionStart)===L.value.length?a("all"):se())})}),xe=he((...Y)=>{g?.(...Y),a(null)}),we=he(Y=>{if(C?.(Y),p){Y.preventDefault();return}const L=Y.clipboardData.getData("text");if(n&&n.startIndex===n.endIndex){const H=r.sections[n.startIndex],ie=/^[a-zA-Z]+$/.test(L),pe=/^[0-9]+$/.test(L),Pe=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(L);if(H.contentType==="letter"&&ie||H.contentType==="digit"&&pe||H.contentType==="digit-with-letter"&&Pe){le(),l({activeSection:H,newSectionValue:L,shouldGoToNextSection:!0}),Y.preventDefault();return}if(ie||pe){Y.preventDefault();return}}Y.preventDefault(),le(),c(L)}),_e=he(Y=>{if(p)return;const L=Y.target.value;if(L===""){le(),o();return}const H=Y.nativeEvent.data,ie=H&&H.length>1,pe=ie?H:L,Pe=cs(pe);if(n==null||ie){c(ie?H:Pe);return}let $e;if(n.startIndex===0&&n.endIndex===r.sections.length-1&&Pe.length===1)$e=Pe;else{const Qe=cs($.getValueStrFromSections(r.sections,K));let Bt=-1,zt=-1;for(let Be=0;Be<Qe.length;Be+=1)Bt===-1&&Qe[Be]!==Pe[Be]&&(Bt=Be),zt===-1&&Qe[Qe.length-Be-1]!==Pe[Pe.length-Be-1]&&(zt=Be);const yt=r.sections[n.startIndex];if(Bt<yt.start||Qe.length-zt-1>yt.end)return;const Xe=Pe.length-Qe.length+yt.end-cs(yt.endSeparator||"").length;$e=Pe.slice(yt.start+cs(yt.startSeparator||"").length,Xe)}if($e.length===0){bu()?d(pe):(le(),i());return}J({keyPressed:$e,sectionIndex:n.startIndex})}),ne=he(Y=>{switch(_?.(Y),!0){case(Y.key==="a"&&(Y.ctrlKey||Y.metaKey)):{Y.preventDefault(),a("all");break}case Y.key==="ArrowRight":{if(Y.preventDefault(),n==null)a(q.startIndex);else if(n.startIndex!==n.endIndex)a(n.endIndex);else{const L=q.neighbors[n.startIndex].rightIndex;L!==null&&a(L)}break}case Y.key==="ArrowLeft":{if(Y.preventDefault(),n==null)a(q.endIndex);else if(n.startIndex!==n.endIndex)a(n.startIndex);else{const L=q.neighbors[n.startIndex].leftIndex;L!==null&&a(L)}break}case Y.key==="Delete":{if(Y.preventDefault(),p)break;n==null||n.startIndex===0&&n.endIndex===r.sections.length-1?o():i(),le();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(Y.key):{if(Y.preventDefault(),p||n==null)break;const L=r.sections[n.startIndex],H=$.getActiveDateManager(s,r,L),ie=hu(s,y,L,Y.key,m,H.date,{minutesStep:T});l({activeSection:L,newSectionValue:ie,shouldGoToNextSection:!1});break}}});ps(()=>{if(!X.current)return;if(n==null){X.current.scrollLeft&&(X.current.scrollLeft=0);return}const Y=r.sections[n.startIndex],L=r.sections[n.endIndex];let H=Y.startInInput,ie=L.endInInput;if(n.shouldSelectBoundarySelectors&&(H-=Y.startSeparator.length,ie+=L.endSeparator.length),H!==X.current.selectionStart||ie!==X.current.selectionEnd){const pe=X.current.scrollTop;X.current===er(document)&&X.current.setSelectionRange(H,ie),X.current.scrollTop=pe}});const fe=Da(N({},D,{value:r.value,timezone:y}),U,B.isSameError,B.defaultErrorState),Z=h.useMemo(()=>P!==void 0?P:B.hasError(fe),[B,fe,P]);h.useEffect(()=>{!Z&&!n&&le()},[r.referenceValue,n,Z]),h.useEffect(()=>(X.current&&X.current===document.activeElement&&a("all"),()=>window.clearTimeout(A.current)),[]),h.useEffect(()=>{r.tempValueStrAndroid!=null&&n!=null&&(le(),i())},[r.tempValueStrAndroid]);const I=h.useMemo(()=>{var Y;return(Y=r.tempValueStrAndroid)!=null?Y:$.getValueStrFromSections(r.sections,K)},[r.sections,$,r.tempValueStrAndroid,K]),re=h.useMemo(()=>n==null||r.sections[n.startIndex].contentType==="letter"?"text":"numeric",[n,r.sections]),ye=X.current&&X.current===er(document),Ce=B.areValuesEqual(s,r.value,B.emptyValue),ue=!ye&&Ce;h.useImperativeHandle(w,()=>({getSections:()=>r.sections,getActiveSectionIndex:()=>{var Y,L,H;const ie=(Y=X.current.selectionStart)!=null?Y:0,pe=(L=X.current.selectionEnd)!=null?L:0,Pe=!!((H=X.current)!=null&&H.readOnly);if(ie===0&&pe===0||Pe)return null;const $e=ie<=r.sections[0].startInInput?1:r.sections.findIndex(Qe=>Qe.startInInput-Qe.startSeparator.length>ie);return $e===-1?r.sections.length-1:$e-1},setSelectedSections:Y=>a(Y)}));const me=he((Y,...L)=>{var H;Y.preventDefault(),M?.(Y,...L),o(),X==null||(H=X.current)==null||H.focus(),a(0)});return N({placeholder:x,autoComplete:"off",disabled:!!W},V,{value:ue?"":I,inputMode:re,readOnly:p,onClick:ge,onFocus:z,onBlur:xe,onPaste:we,onChange:_e,onKeyDown:ne,onMouseUp:De,onClear:me,error:Z,ref:E,clearable:!!(k&&!Ce&&!p&&!W)})},bh=({open:t,onOpen:s,onClose:r})=>{const n=h.useRef(typeof t=="boolean").current,[a,o]=h.useState(!1);h.useEffect(()=>{if(n){if(typeof t!="boolean")throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");o(t)}},[n,t]);const i=h.useCallback(l=>{n||o(l),l&&s&&s(),!l&&r&&r()},[n,s,r]);return{isOpen:a,setIsOpen:i}},vh=t=>{const{action:s,hasChanged:r,dateState:n,isControlled:a}=t,o=!a&&!n.hasBeenModifiedSinceMount;return s.name==="setValueFromField"?!0:s.name==="setValueFromAction"?o&&["accept","today","clear"].includes(s.pickerAction)?!0:r(n.lastPublishedValue):s.name==="setValueFromView"&&s.selectionState!=="shallow"||s.name==="setValueFromShortcut"?o?!0:r(n.lastPublishedValue):!1},jh=t=>{const{action:s,hasChanged:r,dateState:n,isControlled:a,closeOnSelect:o}=t,i=!a&&!n.hasBeenModifiedSinceMount;return s.name==="setValueFromAction"?i&&["accept","today","clear"].includes(s.pickerAction)?!0:r(n.lastCommittedValue):s.name==="setValueFromView"&&s.selectionState==="finish"&&o?i?!0:r(n.lastCommittedValue):s.name==="setValueFromShortcut"?s.changeImportance==="accept"&&r(n.lastCommittedValue):!1},wh=t=>{const{action:s,closeOnSelect:r}=t;return s.name==="setValueFromAction"?!0:s.name==="setValueFromView"?s.selectionState==="finish"&&r:s.name==="setValueFromShortcut"?s.changeImportance==="accept":!1},Sh=({props:t,valueManager:s,valueType:r,wrapperVariant:n,validator:a})=>{const{onAccept:o,onChange:i,value:l,defaultValue:c,closeOnSelect:d=n==="desktop",selectedSections:m,onSelectedSectionsChange:x,timezone:y}=t,{current:b}=h.useRef(c),{current:D}=h.useRef(l!==void 0),p=Ie(),w=ss(),[T,S]=Wt({controlled:m,default:null,name:"usePickerValue",state:"selectedSections"}),{isOpen:_,setIsOpen:j}=bh(t),[g,f]=h.useState(()=>{let z;return l!==void 0?z=l:b!==void 0?z=b:z=s.emptyValue,{draft:z,lastPublishedValue:z,lastCommittedValue:z,lastControlledValue:l,hasBeenModifiedSinceMount:!1}}),{timezone:C,handleValueChange:P}=Sn({timezone:y,value:l,defaultValue:b,onChange:i,valueManager:s});Da(N({},t,{value:g.draft,timezone:C}),a,s.isSameError,s.defaultErrorState);const k=he(z=>{const xe={action:z,dateState:g,hasChanged:fe=>!s.areValuesEqual(p,z.value,fe),isControlled:D,closeOnSelect:d},we=vh(xe),_e=jh(xe),ne=wh(xe);if(f(fe=>N({},fe,{draft:z.value,lastPublishedValue:we?z.value:fe.lastPublishedValue,lastCommittedValue:_e?z.value:fe.lastCommittedValue,hasBeenModifiedSinceMount:!0})),we){const Z={validationError:z.name==="setValueFromField"?z.context.validationError:a({adapter:w,value:z.value,props:N({},t,{value:z.value,timezone:C})})};z.name==="setValueFromShortcut"&&z.shortcut!=null&&(Z.shortcut=z.shortcut),P(z.value,Z)}_e&&o&&o(z.value),ne&&j(!1)});if(l!==void 0&&(g.lastControlledValue===void 0||!s.areValuesEqual(p,g.lastControlledValue,l))){const z=s.areValuesEqual(p,g.draft,l);f(xe=>N({},xe,{lastControlledValue:l},z?{}:{lastCommittedValue:l,lastPublishedValue:l,draft:l,hasBeenModifiedSinceMount:!0}))}const M=he(()=>{k({value:s.emptyValue,name:"setValueFromAction",pickerAction:"clear"})}),W=he(()=>{k({value:g.lastPublishedValue,name:"setValueFromAction",pickerAction:"accept"})}),$=he(()=>{k({value:g.lastPublishedValue,name:"setValueFromAction",pickerAction:"dismiss"})}),B=he(()=>{k({value:g.lastCommittedValue,name:"setValueFromAction",pickerAction:"cancel"})}),U=he(()=>{k({value:s.getTodayValue(p,C,r),name:"setValueFromAction",pickerAction:"today"})}),V=he(()=>j(!0)),J=he(()=>j(!1)),le=he((z,xe="partial")=>k({name:"setValueFromView",value:z,selectionState:xe})),X=he((z,xe,we)=>k({name:"setValueFromShortcut",value:z,changeImportance:xe??"accept",shortcut:we})),E=he((z,xe)=>k({name:"setValueFromField",value:z,context:xe})),A=he(z=>{S(z),x?.(z)}),ae={onClear:M,onAccept:W,onDismiss:$,onCancel:B,onSetToday:U,onOpen:V,onClose:J},K={value:g.draft,onChange:E,selectedSections:T,onSelectedSectionsChange:A},q=h.useMemo(()=>s.cleanValue(p,g.draft),[p,s,g.draft]),se={value:q,onChange:le,onClose:J,open:_,onSelectedSectionsChange:A},De=N({},ae,{value:q,onChange:le,onSelectShortcut:X,isValid:z=>{const xe=a({adapter:w,value:z,props:N({},t,{value:z,timezone:C})});return!s.hasError(xe)}});return{open:_,fieldProps:K,viewProps:se,layoutProps:De,actions:ae}};function Ta({onChange:t,onViewChange:s,openTo:r,view:n,views:a,autoFocus:o,focusedView:i,onFocusedViewChange:l}){var c,d;const m=h.useRef(r),x=h.useRef(a),y=h.useRef(a.includes(r)?r:a[0]),[b,D]=Wt({name:"useViews",state:"view",controlled:n,default:y.current}),p=h.useRef(o?b:null),[w,T]=Wt({name:"useViews",state:"focusedView",controlled:i,default:p.current});h.useEffect(()=>{(m.current&&m.current!==r||x.current&&x.current.some(k=>!a.includes(k)))&&(D(a.includes(r)?r:a[0]),x.current=a,m.current=r)},[r,D,b,a]);const S=a.indexOf(b),_=(c=a[S-1])!=null?c:null,j=(d=a[S+1])!=null?d:null,g=he((k,M)=>{T(M?k:W=>k===W?null:W),l?.(k,M)}),f=he(k=>{g(k,!0),k!==b&&(D(k),s&&s(k))}),C=he(()=>{j&&f(j)}),P=he((k,M,W)=>{const $=M==="finish",B=W?a.indexOf(W)<a.length-1:!!j;if(t(k,$&&B?"partial":M,W),W&&W!==b){const V=a[a.indexOf(W)+1];V&&f(V)}else $&&C()});return{view:b,setView:f,focusedView:w,setFocusedView:g,nextView:j,previousView:_,defaultView:a.includes(r)?r:a[0],goToNextView:C,setValueAndGoToNextView:P}}const Ch=["className","sx"],Ph=({props:t,propsFromPickerValue:s,additionalViewProps:r,inputRef:n,autoFocusView:a})=>{const{onChange:o,open:i,onSelectedSectionsChange:l,onClose:c}=s,{view:d,views:m,openTo:x,onViewChange:y,viewRenderers:b,timezone:D}=t,p=Te(t,Ch),{view:w,setView:T,defaultView:S,focusedView:_,setFocusedView:j,setValueAndGoToNextView:g}=Ta({view:d,views:m,openTo:x,onChange:o,onViewChange:y,autoFocus:a}),{hasUIView:f,viewModeLookup:C}=h.useMemo(()=>m.reduce((U,V)=>{let J;return b[V]!=null?J="UI":J="field",U.viewModeLookup[V]=J,J==="UI"&&(U.hasUIView=!0),U},{hasUIView:!1,viewModeLookup:{}}),[b,m]),P=h.useMemo(()=>m.reduce((U,V)=>b[V]!=null&&iu(V)?U+1:U,0),[b,m]),k=C[w],M=he(()=>k==="UI"),[W,$]=h.useState(k==="UI"?w:null);return W!==w&&C[w]==="UI"&&$(w),ps(()=>{k==="field"&&i&&(c(),setTimeout(()=>{n?.current.focus(),l(w)}))},[w]),ps(()=>{if(!i)return;let U=w;k==="field"&&W!=null&&(U=W),U!==S&&C[U]==="UI"&&C[S]==="UI"&&(U=S),U!==w&&T(U),j(U,!0)},[i]),{hasUIView:f,shouldRestoreFocus:M,layoutProps:{views:m,view:W,onViewChange:T},renderCurrentView:()=>{if(W==null)return null;const U=b[W];return U==null?null:U(N({},p,r,s,{views:m,timezone:D,onChange:g,view:W,onViewChange:T,focusedView:_,onFocusedViewChange:j,showViewSwitcher:P>1,timeViewsCount:P}))}}};function Do(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}const Dh=(t,s)=>{const[r,n]=h.useState(Do);return ps(()=>{const o=()=>{n(Do())};return window.addEventListener("orientationchange",o),()=>{window.removeEventListener("orientationchange",o)}},[]),th(t,["hours","minutes","seconds"])?!1:(s||r)==="landscape"},Th=({props:t,propsFromPickerValue:s,propsFromPickerViews:r,wrapperVariant:n})=>{const{orientation:a}=t,o=Dh(r.views,a);return{layoutProps:N({},r,s,{isLandscape:o,wrapperVariant:n,disabled:t.disabled,readOnly:t.readOnly})}},_a=({props:t,valueManager:s,valueType:r,wrapperVariant:n,inputRef:a,additionalViewProps:o,validator:i,autoFocusView:l})=>{const c=Sh({props:t,valueManager:s,valueType:r,wrapperVariant:n,validator:i}),d=Ph({props:t,inputRef:a,additionalViewProps:o,autoFocusView:l,propsFromPickerValue:c.viewProps}),m=Th({props:t,wrapperVariant:n,propsFromPickerValue:c.layoutProps,propsFromPickerViews:d.layoutProps});return{open:c.open,actions:c.actions,fieldProps:c.fieldProps,renderCurrentView:d.renderCurrentView,hasUIView:d.hasUIView,shouldRestoreFocus:d.shouldRestoreFocus,layoutProps:m.layoutProps}};function ka(t){return at("MuiPickersLayout",t)}const Fr=it("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),_h=["onAccept","onClear","onCancel","onSetToday","actions"];function kh(t){const{onAccept:s,onClear:r,onCancel:n,onSetToday:a,actions:o}=t,i=Te(t,_h),l=$t();if(o==null||o.length===0)return null;const c=o?.map(d=>{switch(d){case"clear":return e.jsx(te,{onClick:r,children:l.clearButtonLabel},d);case"cancel":return e.jsx(te,{onClick:n,children:l.cancelButtonLabel},d);case"accept":return e.jsx(te,{onClick:s,children:l.okButtonLabel},d);case"today":return e.jsx(te,{onClick:a,children:l.todayButtonLabel},d);default:return null}});return e.jsx(Vt,N({},i,{children:c}))}const Eh=["items","changeImportance","isLandscape","onChange","isValid"],Ih=["getValue"];function Ah(t){const{items:s,changeImportance:r,onChange:n,isValid:a}=t,o=Te(t,Eh);if(s==null||s.length===0)return null;const i=s.map(l=>{let{getValue:c}=l,d=Te(l,Ih);const m=c({isValid:a});return{label:d.label,onClick:()=>{n(m,r,d)},disabled:!a(m)}});return e.jsx(Qs,N({dense:!0,sx:[{maxHeight:wn,maxWidth:200,overflow:"auto"},...Array.isArray(o.sx)?o.sx:[o.sx]]},o,{children:i.map(l=>e.jsx(qt,{children:e.jsx(ze,N({},l))},l.label))}))}function Rh(t){return t.view!==null}const Mh=t=>{const{classes:s,isLandscape:r}=t;return nt({root:["root",r&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},ka,s)},Oh=t=>{var s,r;const{wrapperVariant:n,onAccept:a,onClear:o,onCancel:i,onSetToday:l,view:c,views:d,onViewChange:m,value:x,onChange:y,onSelectShortcut:b,isValid:D,isLandscape:p,disabled:w,readOnly:T,children:S,components:_,componentsProps:j,slots:g,slotProps:f}=t,C=g??Sa(_),P=f??j,k=Mh(t),M=(s=C?.actionBar)!=null?s:kh,W=Ue({elementType:M,externalSlotProps:P?.actionBar,additionalProps:{onAccept:a,onClear:o,onCancel:i,onSetToday:l,actions:n==="desktop"?[]:["cancel","accept"],className:k.actionBar},ownerState:N({},t,{wrapperVariant:n})}),$=e.jsx(M,N({},W)),B=C?.toolbar,U=Ue({elementType:B,externalSlotProps:P?.toolbar,additionalProps:{isLandscape:p,onChange:y,value:x,view:c,onViewChange:m,views:d,disabled:w,readOnly:T,className:k.toolbar},ownerState:N({},t,{wrapperVariant:n})}),V=Rh(U)&&B?e.jsx(B,N({},U)):null,J=S,le=C?.tabs,X=c&&le?e.jsx(le,N({view:c,onViewChange:m,className:k.tabs},P?.tabs)):null,E=(r=C?.shortcuts)!=null?r:Ah,A=Ue({elementType:E,externalSlotProps:P?.shortcuts,additionalProps:{isValid:D,isLandscape:p,onChange:b,className:k.shortcuts},ownerState:{isValid:D,isLandscape:p,onChange:b,className:k.shortcuts,wrapperVariant:n}}),ae=c&&E?e.jsx(E,N({},A)):null;return{toolbar:V,content:J,tabs:X,actionBar:$,shortcuts:ae}},Fh=t=>{const{isLandscape:s,classes:r}=t;return nt({root:["root",s&&"landscape"],contentWrapper:["contentWrapper"]},ka,r)},Ea=ve("div",{name:"MuiPickersLayout",slot:"Root",overridesResolver:(t,s)=>s.root})(({theme:t,ownerState:s})=>({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${Fr.toolbar}`]:s.isLandscape?{gridColumn:t.direction==="rtl"?3:1,gridRow:"2 / 3"}:{gridColumn:"2 / 4",gridRow:1},[`.${Fr.shortcuts}`]:s.isLandscape?{gridColumn:"2 / 4",gridRow:1}:{gridColumn:t.direction==="rtl"?3:1,gridRow:"2 / 3"},[`& .${Fr.actionBar}`]:{gridColumn:"1 / 4",gridRow:3}}));Ea.propTypes={as:F.elementType,ownerState:F.shape({isLandscape:F.bool.isRequired}).isRequired,sx:F.oneOfType([F.arrayOf(F.oneOfType([F.func,F.object,F.bool])),F.func,F.object])};const Nh=ve("div",{name:"MuiPickersLayout",slot:"ContentWrapper",overridesResolver:(t,s)=>s.contentWrapper})({gridColumn:2,gridRow:2,display:"flex",flexDirection:"column"}),Ia=function(s){const r=Ge({props:s,name:"MuiPickersLayout"}),{toolbar:n,content:a,tabs:o,actionBar:i,shortcuts:l}=Oh(r),{sx:c,className:d,isLandscape:m,ref:x,wrapperVariant:y}=r,b=r,D=Fh(b);return e.jsxs(Ea,{ref:x,sx:c,className:Je(d,D.root),ownerState:b,children:[m?l:n,m?n:l,e.jsx(Nh,{className:D.contentWrapper,children:y==="desktop"?e.jsxs(h.Fragment,{children:[a,o]}):e.jsxs(h.Fragment,{children:[o,a]})}),i]})};function Lh(t,{disableFuture:s,maxDate:r,timezone:n}){const a=Ie();return h.useMemo(()=>{const o=a.dateWithTimezone(void 0,n),i=a.startOfMonth(s&&a.isBefore(o,r)?o:r);return!a.isAfter(i,t)},[s,r,t,a,n])}function Vh(t,{disablePast:s,minDate:r,timezone:n}){const a=Ie();return h.useMemo(()=>{const o=a.dateWithTimezone(void 0,n),i=a.startOfMonth(s&&a.isAfter(o,r)?o:r);return!a.isBefore(i,t)},[s,r,t,a,n])}const Aa=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],Wh=["disablePast","disableFuture","minTime","maxTime","shouldDisableClock","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],Uh=["minDateTime","maxDateTime"],$h=[...Aa,...Wh,...Uh],Ra=t=>$h.reduce((s,r)=>(t.hasOwnProperty(r)&&(s[r]=t[r]),s),{}),Bh=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","readOnly","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef"],zh=(t,s)=>{const r=N({},t),n={},a=o=>{r.hasOwnProperty(o)&&(n[o]=r[o],delete r[o])};return Bh.forEach(a),Aa.forEach(a),{forwardedProps:r,internalProps:n}},hr=({props:t,value:s,adapter:r})=>{if(s===null)return null;const{shouldDisableDate:n,shouldDisableMonth:a,shouldDisableYear:o,disablePast:i,disableFuture:l,timezone:c}=t,d=r.utils.dateWithTimezone(void 0,c),m=gt(r.utils,t.minDate,r.defaultDates.minDate),x=gt(r.utils,t.maxDate,r.defaultDates.maxDate);switch(!0){case!r.utils.isValid(s):return"invalidDate";case!!(n&&n(s)):return"shouldDisableDate";case!!(a&&a(s)):return"shouldDisableMonth";case!!(o&&o(s)):return"shouldDisableYear";case!!(l&&r.utils.isAfterDay(s,d)):return"disableFuture";case!!(i&&r.utils.isBeforeDay(s,d)):return"disablePast";case!!(m&&r.utils.isBeforeDay(s,m)):return"minDate";case!!(x&&r.utils.isAfterDay(s,x)):return"maxDate";default:return null}};function Hh(t){return at("MuiPickersDay",t)}const Ht=it("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]),Gh=["autoFocus","className","day","disabled","disableHighlightToday","disableMargin","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","outsideCurrentMonth","selected","showDaysOutsideCurrentMonth","children","today","isFirstVisibleCell","isLastVisibleCell"],qh=t=>{const{selected:s,disableMargin:r,disableHighlightToday:n,today:a,disabled:o,outsideCurrentMonth:i,showDaysOutsideCurrentMonth:l,classes:c}=t,d=i&&!l;return nt({root:["root",s&&!d&&"selected",o&&"disabled",!r&&"dayWithMargin",!n&&a&&"today",i&&l&&"dayOutsideMonth",d&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},Hh,c)},Ma=({theme:t,ownerState:s})=>N({},t.typography.caption,{width:Os,height:Os,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:t.transitions.create("background-color",{duration:t.transitions.duration.short}),color:(t.vars||t).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:xs(t.palette.primary.main,t.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.focusOpacity})`:xs(t.palette.primary.main,t.palette.action.focusOpacity),[`&.${Ht.selected}`]:{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${Ht.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,fontWeight:t.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${Ht.disabled}:not(.${Ht.selected})`]:{color:(t.vars||t).palette.text.disabled},[`&.${Ht.disabled}&.${Ht.selected}`]:{opacity:.6}},!s.disableMargin&&{margin:`0 ${dr}px`},s.outsideCurrentMonth&&s.showDaysOutsideCurrentMonth&&{color:(t.vars||t).palette.text.secondary},!s.disableHighlightToday&&s.today&&{[`&:not(.${Ht.selected})`]:{border:`1px solid ${(t.vars||t).palette.text.secondary}`}}),Oa=(t,s)=>{const{ownerState:r}=t;return[s.root,!r.disableMargin&&s.dayWithMargin,!r.disableHighlightToday&&r.today&&s.today,!r.outsideCurrentMonth&&r.showDaysOutsideCurrentMonth&&s.dayOutsideMonth,r.outsideCurrentMonth&&!r.showDaysOutsideCurrentMonth&&s.hiddenDaySpacingFiller]},Kh=ve(ni,{name:"MuiPickersDay",slot:"Root",overridesResolver:Oa})(Ma),Yh=ve("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:Oa})(({theme:t,ownerState:s})=>N({},Ma({theme:t,ownerState:s}),{opacity:0,pointerEvents:"none"})),_s=()=>{},Qh=h.forwardRef(function(s,r){const n=Ge({props:s,name:"MuiPickersDay"}),{autoFocus:a=!1,className:o,day:i,disabled:l=!1,disableHighlightToday:c=!1,disableMargin:d=!1,isAnimating:m,onClick:x,onDaySelect:y,onFocus:b=_s,onBlur:D=_s,onKeyDown:p=_s,onMouseDown:w=_s,onMouseEnter:T=_s,outsideCurrentMonth:S,selected:_=!1,showDaysOutsideCurrentMonth:j=!1,children:g,today:f=!1}=n,C=Te(n,Gh),P=N({},n,{autoFocus:a,disabled:l,disableHighlightToday:c,disableMargin:d,selected:_,showDaysOutsideCurrentMonth:j,today:f}),k=qh(P),M=Ie(),W=h.useRef(null),$=Jt(W,r);ps(()=>{a&&!l&&!m&&!S&&W.current.focus()},[a,l,m,S]);const B=V=>{w(V),S&&V.preventDefault()},U=V=>{l||y(i),S&&V.currentTarget.focus(),x&&x(V)};return S&&!j?e.jsx(Yh,{className:Je(k.root,k.hiddenDaySpacingFiller,o),ownerState:P,role:C.role}):e.jsx(Kh,N({className:Je(k.root,o),ref:$,centerRipple:!0,disabled:l,tabIndex:_?0:-1,onKeyDown:V=>p(V,i),onFocus:V=>b(V,i),onBlur:V=>D(V,i),onMouseEnter:V=>T(V,i),onClick:U,onMouseDown:B},C,{ownerState:P,children:g||M.format(i,"dayOfMonth")}))}),Zh=h.memo(Qh),Jh=t=>at("MuiPickersSlideTransition",t),dt=it("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),Xh=["children","className","reduceAnimations","slideDirection","transKey","classes"],ef=t=>{const{classes:s,slideDirection:r}=t,n={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${r}`],exitActive:[`slideExitActiveLeft-${r}`]};return nt(n,Jh,s)},tf=ve(Ro,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(t,s)=>[s.root,{[`.${dt["slideEnter-left"]}`]:s["slideEnter-left"]},{[`.${dt["slideEnter-right"]}`]:s["slideEnter-right"]},{[`.${dt.slideEnterActive}`]:s.slideEnterActive},{[`.${dt.slideExit}`]:s.slideExit},{[`.${dt["slideExitActiveLeft-left"]}`]:s["slideExitActiveLeft-left"]},{[`.${dt["slideExitActiveLeft-right"]}`]:s["slideExitActiveLeft-right"]}]})(({theme:t})=>{const s=t.transitions.create("transform",{duration:t.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${dt["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${dt["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${dt.slideEnterActive}`]:{transform:"translate(0%)",transition:s},[`& .${dt.slideExit}`]:{transform:"translate(0%)"},[`& .${dt["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:s,zIndex:0},[`& .${dt["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:s,zIndex:0}}});function sf(t){const s=Ge({props:t,name:"MuiPickersSlideTransition"}),{children:r,className:n,reduceAnimations:a,transKey:o}=s,i=Te(s,Xh),l=ef(s),c=Dt();if(a)return e.jsx("div",{className:Je(l.root,n),children:r});const d={exit:l.exit,enterActive:l.enterActive,enter:l.enter,exitActive:l.exitActive};return e.jsx(tf,{className:Je(l.root,n),childFactory:m=>h.cloneElement(m,{classNames:d}),role:"presentation",children:e.jsx(oi,N({mountOnEnter:!0,unmountOnExit:!0,timeout:c.transitions.duration.complex,classNames:d},i,{children:r}),o)})}const Fa=({shouldDisableDate:t,shouldDisableMonth:s,shouldDisableYear:r,minDate:n,maxDate:a,disableFuture:o,disablePast:i,timezone:l})=>{const c=ss();return h.useCallback(d=>hr({adapter:c,value:d,props:{shouldDisableDate:t,shouldDisableMonth:s,shouldDisableYear:r,minDate:n,maxDate:a,disableFuture:o,disablePast:i,timezone:l}})!==null,[c,t,s,r,n,a,o,i,l])},rf=t=>at("MuiDayCalendar",t);it("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const nf=["parentProps","day","focusableDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],of=["ownerState"],af=t=>{const{classes:s}=t;return nt({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},rf,s)},Na=(Os+dr*2)*6,lf=ve("div",{name:"MuiDayCalendar",slot:"Root",overridesResolver:(t,s)=>s.root})({}),cf=ve("div",{name:"MuiDayCalendar",slot:"Header",overridesResolver:(t,s)=>s.header})({display:"flex",justifyContent:"center",alignItems:"center"}),df=ve(u,{name:"MuiDayCalendar",slot:"WeekDayLabel",overridesResolver:(t,s)=>s.weekDayLabel})(({theme:t})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(t.vars||t).palette.text.secondary})),uf=ve(u,{name:"MuiDayCalendar",slot:"WeekNumberLabel",overridesResolver:(t,s)=>s.weekNumberLabel})(({theme:t})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:t.palette.text.disabled})),hf=ve(u,{name:"MuiDayCalendar",slot:"WeekNumber",overridesResolver:(t,s)=>s.weekNumber})(({theme:t})=>N({},t.typography.caption,{width:Os,height:Os,padding:0,margin:`0 ${dr}px`,color:t.palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),ff=ve("div",{name:"MuiDayCalendar",slot:"LoadingContainer",overridesResolver:(t,s)=>s.loadingContainer})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:Na}),mf=ve(sf,{name:"MuiDayCalendar",slot:"SlideTransition",overridesResolver:(t,s)=>s.slideTransition})({minHeight:Na}),pf=ve("div",{name:"MuiDayCalendar",slot:"MonthContainer",overridesResolver:(t,s)=>s.monthContainer})({overflow:"hidden"}),xf=ve("div",{name:"MuiDayCalendar",slot:"WeekContainer",overridesResolver:(t,s)=>s.weekContainer})({margin:`${dr}px 0`,display:"flex",justifyContent:"center"});function gf(t){var s,r,n;let{parentProps:a,day:o,focusableDay:i,selectedDays:l,isDateDisabled:c,currentMonthNumber:d,isViewFocused:m}=t,x=Te(t,nf);const{disabled:y,disableHighlightToday:b,isMonthSwitchingAnimating:D,showDaysOutsideCurrentMonth:p,components:w,componentsProps:T,slots:S,slotProps:_,timezone:j}=a,g=Ie(),f=cr(j),C=i!==null&&g.isSameDay(o,i),P=l.some(le=>g.isSameDay(le,o)),k=g.isSameDay(o,f),M=(s=(r=S?.day)!=null?r:w?.Day)!=null?s:Zh,W=Ue({elementType:M,externalSlotProps:(n=_?.day)!=null?n:T?.day,additionalProps:N({disableHighlightToday:b,showDaysOutsideCurrentMonth:p,role:"gridcell",isAnimating:D,"data-timestamp":g.toJsDate(o).valueOf()},x),ownerState:N({},a,{day:o,selected:P})}),$=Te(W,of),B=h.useMemo(()=>y||c(o),[y,c,o]),U=h.useMemo(()=>g.getMonth(o)!==d,[g,o,d]),V=h.useMemo(()=>{const le=g.startOfMonth(g.setMonth(o,d));return p?g.isSameDay(o,g.startOfWeek(le)):g.isSameDay(o,le)},[d,o,p,g]),J=h.useMemo(()=>{const le=g.endOfMonth(g.setMonth(o,d));return p?g.isSameDay(o,g.endOfWeek(le)):g.isSameDay(o,le)},[d,o,p,g]);return e.jsx(M,N({},$,{day:o,disabled:B,autoFocus:m&&C,today:k,outsideCurrentMonth:U,isFirstVisibleCell:V,isLastVisibleCell:J,selected:P,tabIndex:C?0:-1,"aria-selected":P,"aria-current":k?"date":void 0}))}function yf(t){const s=Ge({props:t,name:"MuiDayCalendar"}),{onFocusedDayChange:r,className:n,currentMonth:a,selectedDays:o,focusedDay:i,loading:l,onSelectedDaysChange:c,onMonthSwitchingAnimationEnd:d,readOnly:m,reduceAnimations:x,renderLoading:y=()=>e.jsx("span",{children:"..."}),slideDirection:b,TransitionProps:D,disablePast:p,disableFuture:w,minDate:T,maxDate:S,shouldDisableDate:_,shouldDisableMonth:j,shouldDisableYear:g,dayOfWeekFormatter:f,hasFocus:C,onFocusedViewChange:P,gridLabelId:k,displayWeekNumber:M,fixedWeekNumber:W,autoFocus:$,timezone:B}=s,U=cr(B),V=Ie(),J=af(s),X=Dt().direction==="rtl",E=f||((ue,me)=>V.format(me,"weekdayShort").charAt(0).toUpperCase()),A=Fa({shouldDisableDate:_,shouldDisableMonth:j,shouldDisableYear:g,minDate:T,maxDate:S,disablePast:p,disableFuture:w,timezone:B}),ae=$t(),[K,q]=Wt({name:"DayCalendar",state:"hasFocus",controlled:C,default:$??!1}),[se,ge]=h.useState(()=>i||U),De=he(ue=>{m||c(ue)}),z=ue=>{A(ue)||(r(ue),ge(ue),P?.(!0),q(!0))},xe=he((ue,me)=>{switch(ue.key){case"ArrowUp":z(V.addDays(me,-7)),ue.preventDefault();break;case"ArrowDown":z(V.addDays(me,7)),ue.preventDefault();break;case"ArrowLeft":{const Y=V.addDays(me,X?1:-1),L=V.addMonths(me,X?1:-1),H=Es({utils:V,date:Y,minDate:X?Y:V.startOfMonth(L),maxDate:X?V.endOfMonth(L):Y,isDateDisabled:A,timezone:B});z(H||Y),ue.preventDefault();break}case"ArrowRight":{const Y=V.addDays(me,X?-1:1),L=V.addMonths(me,X?-1:1),H=Es({utils:V,date:Y,minDate:X?V.startOfMonth(L):Y,maxDate:X?Y:V.endOfMonth(L),isDateDisabled:A,timezone:B});z(H||Y),ue.preventDefault();break}case"Home":z(V.startOfWeek(me)),ue.preventDefault();break;case"End":z(V.endOfWeek(me)),ue.preventDefault();break;case"PageUp":z(V.addMonths(me,1)),ue.preventDefault();break;case"PageDown":z(V.addMonths(me,-1)),ue.preventDefault();break}}),we=he((ue,me)=>z(me)),_e=he((ue,me)=>{K&&V.isSameDay(se,me)&&P?.(!1)}),ne=V.getMonth(a),fe=h.useMemo(()=>o.filter(ue=>!!ue).map(ue=>V.startOfDay(ue)),[V,o]),Z=ne,I=h.useMemo(()=>h.createRef(),[Z]),re=V.startOfWeek(U),ye=h.useMemo(()=>{const ue=V.startOfMonth(a),me=V.endOfMonth(a);return A(se)||V.isAfterDay(se,me)||V.isBeforeDay(se,ue)?Es({utils:V,date:se,minDate:ue,maxDate:me,disablePast:p,disableFuture:w,isDateDisabled:A,timezone:B}):se},[a,w,p,se,A,V,B]),Ce=h.useMemo(()=>{const ue=V.setTimezone(a,B),me=V.getWeekArray(ue);let Y=V.addMonths(ue,1);for(;W&&me.length<W;){const L=V.getWeekArray(Y),H=V.isSameDay(me[me.length-1][0],L[0][0]);L.slice(H?1:0).forEach(ie=>{me.length<W&&me.push(ie)}),Y=V.addMonths(Y,1)}return me},[a,W,V,B]);return e.jsxs(lf,{role:"grid","aria-labelledby":k,className:J.root,children:[e.jsxs(cf,{role:"row",className:J.header,children:[M&&e.jsx(uf,{variant:"caption",role:"columnheader","aria-label":ae.calendarWeekNumberHeaderLabel,className:J.weekNumberLabel,children:ae.calendarWeekNumberHeaderText}),ou(V,U).map((ue,me)=>{var Y;const L=V.format(ue,"weekdayShort");return e.jsx(df,{variant:"caption",role:"columnheader","aria-label":V.format(V.addDays(re,me),"weekday"),className:J.weekDayLabel,children:(Y=E?.(L,ue))!=null?Y:L},L+me.toString())})]}),l?e.jsx(ff,{className:J.loadingContainer,children:y()}):e.jsx(mf,N({transKey:Z,onExited:d,reduceAnimations:x,slideDirection:b,className:Je(n,J.slideTransition)},D,{nodeRef:I,children:e.jsx(pf,{ref:I,role:"rowgroup",className:J.monthContainer,children:Ce.map((ue,me)=>e.jsxs(xf,{role:"row",className:J.weekContainer,"aria-rowindex":me+1,children:[M&&e.jsx(hf,{className:J.weekNumber,role:"rowheader","aria-label":ae.calendarWeekNumberAriaLabelText(V.getWeekNumber(ue[0])),children:ae.calendarWeekNumberText(V.getWeekNumber(ue[0]))}),ue.map((Y,L)=>e.jsx(gf,{parentProps:s,day:Y,selectedDays:fe,focusableDay:ye,onKeyDown:xe,onFocus:we,onBlur:_e,onDaySelect:De,isDateDisabled:A,currentMonthNumber:ne,isViewFocused:K,"aria-colindex":L+1},Y.toString()))]},`week-${ue[0]}`))})}))]})}const bf=(t,s,r)=>(n,a)=>{switch(a.type){case"changeMonth":return N({},n,{slideDirection:a.direction,currentMonth:a.newMonth,isMonthSwitchingAnimating:!t});case"finishMonthSwitchingAnimation":return N({},n,{isMonthSwitchingAnimating:!1});case"changeFocusedDay":{if(n.focusedDay!=null&&a.focusedDay!=null&&r.isSameDay(a.focusedDay,n.focusedDay))return n;const o=a.focusedDay!=null&&!s&&!r.isSameMonth(n.currentMonth,a.focusedDay);return N({},n,{focusedDay:a.focusedDay,isMonthSwitchingAnimating:o&&!t&&!a.withoutMonthSwitchingAnimation,currentMonth:o?r.startOfMonth(a.focusedDay):n.currentMonth,slideDirection:a.focusedDay!=null&&r.isAfterDay(a.focusedDay,n.currentMonth)?"left":"right"})}default:throw new Error("missing support")}},vf=t=>{const{value:s,referenceDate:r,defaultCalendarMonth:n,disableFuture:a,disablePast:o,disableSwitchToMonthOnDayFocus:i=!1,maxDate:l,minDate:c,onMonthChange:d,reduceAnimations:m,shouldDisableDate:x,timezone:y}=t,b=Ie(),D=h.useRef(bf(!!m,i,b)).current,p=h.useMemo(()=>{let C=null;return r?C=r:n&&(C=b.startOfMonth(n)),It.getInitialReferenceValue({value:s,utils:b,timezone:y,props:t,referenceDate:C,granularity:Ct.day})},[]),[w,T]=h.useReducer(D,{isMonthSwitchingAnimating:!1,focusedDay:p,currentMonth:b.startOfMonth(p),slideDirection:"left"}),S=h.useCallback(C=>{T(N({type:"changeMonth"},C)),d&&d(C.newMonth)},[d]),_=h.useCallback(C=>{const P=C;b.isSameMonth(P,w.currentMonth)||S({newMonth:b.startOfMonth(P),direction:b.isAfterDay(P,w.currentMonth)?"left":"right"})},[w.currentMonth,S,b]),j=Fa({shouldDisableDate:x,minDate:c,maxDate:l,disableFuture:a,disablePast:o,timezone:y}),g=h.useCallback(()=>{T({type:"finishMonthSwitchingAnimation"})},[]),f=he((C,P)=>{j(C)||T({type:"changeFocusedDay",focusedDay:C,withoutMonthSwitchingAnimation:P})});return{referenceDate:p,calendarState:w,changeMonth:_,changeFocusedDay:f,isDateDisabled:j,onMonthSwitchingAnimationEnd:g,handleChangeMonth:S}},jf=["props","getOpenDialogAriaText"],wf=["ownerState"],Sf=["ownerState"],Cf=t=>{var s,r,n,a,o;let{props:i,getOpenDialogAriaText:l}=t,c=Te(t,jf);const{slots:d,slotProps:m,className:x,sx:y,format:b,formatDensity:D,timezone:p,name:w,label:T,inputRef:S,readOnly:_,disabled:j,autoFocus:g,localeText:f,reduceAnimations:C}=i,P=Ie(),k=h.useRef(null),M=h.useRef(null),W=nn(),$=(s=m==null||(r=m.toolbar)==null?void 0:r.hidden)!=null?s:!1,{open:B,actions:U,hasUIView:V,layoutProps:J,renderCurrentView:le,shouldRestoreFocus:X,fieldProps:E}=_a(N({},c,{props:i,inputRef:k,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"desktop"})),A=(n=d.inputAdornment)!=null?n:Pt,ae=Ue({elementType:A,externalSlotProps:m?.inputAdornment,additionalProps:{position:"end"},ownerState:i}),K=Te(ae,wf),q=(a=d.openPickerButton)!=null?a:We,se=Ue({elementType:q,externalSlotProps:m?.openPickerButton,additionalProps:{disabled:j||_,onClick:B?U.onClose:U.onOpen,"aria-label":l(E.value,P),edge:K.position},ownerState:i}),ge=Te(se,Sf),De=d.openPickerIcon,z=d.field,xe=Ue({elementType:z,externalSlotProps:m?.field,additionalProps:N({},E,$&&{id:W},{readOnly:_,disabled:j,className:x,sx:y,format:b,formatDensity:D,timezone:p,label:T,name:w,autoFocus:g&&!i.open,focused:B?!0:void 0}),ownerState:i});V&&(xe.InputProps=N({},xe.InputProps,{ref:M},!i.disableOpenPicker&&{[`${K.position}Adornment`]:e.jsx(A,N({},K,{children:e.jsx(q,N({},ge,{children:e.jsx(De,N({},m?.openPickerIcon))}))}))}));const we=N({textField:d.textField,clearIcon:d.clearIcon,clearButton:d.clearButton},xe.slots),_e=(o=d.layout)!=null?o:Ia,ne=Jt(k,xe.inputRef,S);let fe=W;$&&(T?fe=`${W}-label`:fe=void 0);const Z=N({},m,{toolbar:N({},m?.toolbar,{titleId:W}),popper:N({"aria-labelledby":fe},m?.popper)});return{renderPicker:()=>e.jsxs(jn,{localeText:f,children:[e.jsx(z,N({},xe,{slots:we,slotProps:Z,inputRef:ne})),e.jsx(fh,N({role:"dialog",placement:"bottom-start",anchorEl:M.current},U,{open:B,slots:d,slotProps:Z,shouldRestoreFocus:X,reduceAnimations:C,children:e.jsx(_e,N({},J,Z?.layout,{slots:d,slotProps:Z,children:le()}))}))]})}},Pf=t=>{var s,r,n;const a=Ie(),o=Ls();return N({},t,{disablePast:(s=t.disablePast)!=null?s:!1,disableFuture:(r=t.disableFuture)!=null?r:!1,format:(n=t.format)!=null?n:a.formats.keyboardDate,minDate:gt(a,t.minDate,o.minDate),maxDate:gt(a,t.maxDate,o.maxDate)})},Df=({props:t,inputRef:s})=>{const r=Pf(t),{forwardedProps:n,internalProps:a}=zh(r);return yh({inputRef:s,forwardedProps:n,internalProps:a,valueManager:It,fieldValueManager:wu,validator:hr})},Tf=["ownerState"],_f=({clearable:t,fieldProps:s,InputProps:r,onClear:n,slots:a,slotProps:o,components:i,componentsProps:l})=>{var c,d,m,x,y,b;const D=$t(),p=(c=(d=a?.clearButton)!=null?d:i?.ClearButton)!=null?c:We,w=Ue({elementType:p,externalSlotProps:(m=o?.clearButton)!=null?m:l?.clearButton,ownerState:{},className:"clearButton",additionalProps:{title:D.fieldClearLabel}}),T=Te(w,Tf),S=(x=(y=a?.clearIcon)!=null?y:i?.ClearIcon)!=null?x:Uu,_=Ue({elementType:S,externalSlotProps:(b=o?.clearIcon)!=null?b:l?.clearIcon,ownerState:{}}),j=N({},r,{endAdornment:e.jsxs(h.Fragment,{children:[t&&e.jsx(Pt,{position:"end",sx:{marginRight:r!=null&&r.endAdornment?-1:-1.5},children:e.jsx(p,N({},T,{onClick:n,children:e.jsx(S,N({fontSize:"small"},_))}))}),r?.endAdornment]})}),g=N({},s,{sx:[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(s.sx)?s.sx:[s.sx]]});return{InputProps:j,fieldProps:g}},kf=["components","componentsProps","slots","slotProps","InputProps","inputProps"],Ef=["inputRef"],If=["ref","onPaste","onKeyDown","inputMode","readOnly","clearable","onClear"],La=h.forwardRef(function(s,r){var n,a,o;const i=Ge({props:s,name:"MuiDateField"}),{components:l,componentsProps:c,slots:d,slotProps:m,InputProps:x,inputProps:y}=i,b=Te(i,kf),D=i,p=(n=(a=d?.textField)!=null?a:l?.TextField)!=null?n:be,w=Ue({elementType:p,externalSlotProps:(o=m?.textField)!=null?o:c?.textField,externalForwardedProps:b,ownerState:D}),{inputRef:T}=w,S=Te(w,Ef);S.inputProps=N({},y,S.inputProps),S.InputProps=N({},x,S.InputProps);const _=Df({props:S,inputRef:T}),{ref:j,onPaste:g,onKeyDown:f,inputMode:C,readOnly:P,clearable:k,onClear:M}=_,W=Te(_,If),{InputProps:$,fieldProps:B}=_f({onClear:M,clearable:k,fieldProps:W,InputProps:W.InputProps,slots:d,slotProps:m,components:l,componentsProps:c});return e.jsx(p,N({ref:r},B,{InputProps:N({},$,{readOnly:P}),inputProps:N({},W.inputProps,{inputMode:C,onPaste:g,onKeyDown:f,ref:j})}))}),Af=t=>at("MuiPickersFadeTransitionGroup",t);it("MuiPickersFadeTransitionGroup",["root"]);const Rf=t=>{const{classes:s}=t;return nt({root:["root"]},Af,s)},Mf=ve(Ro,{name:"MuiPickersFadeTransitionGroup",slot:"Root",overridesResolver:(t,s)=>s.root})({display:"block",position:"relative"});function Va(t){const s=Ge({props:t,name:"MuiPickersFadeTransitionGroup"}),{children:r,className:n,reduceAnimations:a,transKey:o}=s,i=Rf(s),l=Dt();return a?r:e.jsx(Mf,{className:Je(i.root,n),children:e.jsx(rr,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:l.transitions.duration.enteringScreen,enter:l.transitions.duration.enteringScreen,exit:0},children:r},o)})}function Of(t){return at("MuiPickersMonth",t)}const zs=it("MuiPickersMonth",["root","monthButton","disabled","selected"]),Ff=["autoFocus","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","aria-label","monthsPerRow"],Nf=t=>{const{disabled:s,selected:r,classes:n}=t;return nt({root:["root"],monthButton:["monthButton",s&&"disabled",r&&"selected"]},Of,n)},Lf=ve("div",{name:"MuiPickersMonth",slot:"Root",overridesResolver:(t,s)=>[s.root]})(({ownerState:t})=>({flexBasis:t.monthsPerRow===3?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"})),Vf=ve("button",{name:"MuiPickersMonth",slot:"MonthButton",overridesResolver:(t,s)=>[s.monthButton,{[`&.${zs.disabled}`]:s.disabled},{[`&.${zs.selected}`]:s.selected}]})(({theme:t})=>N({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{margin:"8px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:xs(t.palette.action.active,t.palette.action.hoverOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:xs(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${zs.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${zs.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})),Wf=h.memo(function(s){const r=Ge({props:s,name:"MuiPickersMonth"}),{autoFocus:n,children:a,disabled:o,selected:i,value:l,tabIndex:c,onClick:d,onKeyDown:m,onFocus:x,onBlur:y,"aria-current":b,"aria-label":D}=r,p=Te(r,Ff),w=h.useRef(null),T=Nf(r);return ps(()=>{if(n){var S;(S=w.current)==null||S.focus()}},[n]),e.jsx(Lf,N({className:T.root,ownerState:r},p,{children:e.jsx(Vf,{ref:w,disabled:o,type:"button",role:"radio",tabIndex:o?-1:c,"aria-current":b,"aria-checked":i,"aria-label":D,onClick:S=>d(S,l),onKeyDown:S=>m(S,l),onFocus:S=>x(S,l),onBlur:S=>y(S,l),className:T.monthButton,ownerState:r,children:a})}))});function Uf(t){return at("MuiMonthCalendar",t)}it("MuiMonthCalendar",["root"]);const $f=["className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","autoFocus","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId"],Bf=t=>{const{classes:s}=t;return nt({root:["root"]},Uf,s)};function zf(t,s){const r=Ie(),n=Ls(),a=Ge({props:t,name:s});return N({disableFuture:!1,disablePast:!1},a,{minDate:gt(r,a.minDate,n.minDate),maxDate:gt(r,a.maxDate,n.maxDate)})}const Hf=ve("div",{name:"MuiMonthCalendar",slot:"Root",overridesResolver:(t,s)=>s.root})({display:"flex",flexWrap:"wrap",alignContent:"stretch",padding:"0 4px",width:ur,boxSizing:"border-box"}),Gf=h.forwardRef(function(s,r){const n=zf(s,"MuiMonthCalendar"),{className:a,value:o,defaultValue:i,referenceDate:l,disabled:c,disableFuture:d,disablePast:m,maxDate:x,minDate:y,onChange:b,shouldDisableMonth:D,readOnly:p,disableHighlightToday:w,autoFocus:T=!1,onMonthFocus:S,hasFocus:_,onFocusedViewChange:j,monthsPerRow:g=3,timezone:f,gridLabelId:C}=n,P=Te(n,$f),{value:k,handleValueChange:M,timezone:W}=Cn({name:"MonthCalendar",timezone:f,value:o,defaultValue:i,onChange:b,valueManager:It}),$=cr(W),B=Mo(),U=Ie(),V=h.useMemo(()=>It.getInitialReferenceValue({value:k,utils:U,props:n,timezone:W,referenceDate:l,granularity:Ct.month}),[]),J=n,le=Bf(J),X=h.useMemo(()=>U.getMonth($),[U,$]),E=h.useMemo(()=>k!=null?U.getMonth(k):w?null:U.getMonth(V),[k,U,w,V]),[A,ae]=h.useState(()=>E||X),[K,q]=Wt({name:"MonthCalendar",state:"hasFocus",controlled:_,default:T??!1}),se=he(ne=>{q(ne),j&&j(ne)}),ge=h.useCallback(ne=>{const fe=U.startOfMonth(m&&U.isAfter($,y)?$:y),Z=U.startOfMonth(d&&U.isBefore($,x)?$:x),I=U.startOfMonth(ne);return U.isBefore(I,fe)||U.isAfter(I,Z)?!0:D?D(I):!1},[d,m,x,y,$,D,U]),De=he((ne,fe)=>{if(p)return;const Z=U.setMonth(k??V,fe);M(Z)}),z=he(ne=>{ge(U.setMonth(k??V,ne))||(ae(ne),se(!0),S&&S(ne))});h.useEffect(()=>{ae(ne=>E!==null&&ne!==E?E:ne)},[E]);const xe=he((ne,fe)=>{switch(ne.key){case"ArrowUp":z((12+fe-3)%12),ne.preventDefault();break;case"ArrowDown":z((12+fe+3)%12),ne.preventDefault();break;case"ArrowLeft":z((12+fe+(B.direction==="ltr"?-1:1))%12),ne.preventDefault();break;case"ArrowRight":z((12+fe+(B.direction==="ltr"?1:-1))%12),ne.preventDefault();break}}),we=he((ne,fe)=>{z(fe)}),_e=he((ne,fe)=>{A===fe&&se(!1)});return e.jsx(Hf,N({ref:r,className:Je(le.root,a),ownerState:J,role:"radiogroup","aria-labelledby":C},P,{children:yn(U,k??V).map(ne=>{const fe=U.getMonth(ne),Z=U.format(ne,"monthShort"),I=U.format(ne,"month"),re=fe===E,ye=c||ge(ne);return e.jsx(Wf,{selected:re,value:fe,onClick:De,onKeyDown:xe,autoFocus:K&&fe===A,disabled:ye,tabIndex:fe===A?0:-1,onFocus:we,onBlur:_e,"aria-current":X===fe?"date":void 0,"aria-label":I,monthsPerRow:g,children:Z},Z)})}))});function qf(t){return at("MuiPickersYear",t)}const Hs=it("MuiPickersYear",["root","yearButton","selected","disabled"]),Kf=["autoFocus","className","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","yearsPerRow"],Yf=t=>{const{disabled:s,selected:r,classes:n}=t;return nt({root:["root"],yearButton:["yearButton",s&&"disabled",r&&"selected"]},qf,n)},Qf=ve("div",{name:"MuiPickersYear",slot:"Root",overridesResolver:(t,s)=>[s.root]})(({ownerState:t})=>({flexBasis:t.yearsPerRow===3?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"})),Zf=ve("button",{name:"MuiPickersYear",slot:"YearButton",overridesResolver:(t,s)=>[s.yearButton,{[`&.${Hs.disabled}`]:s.disabled},{[`&.${Hs.selected}`]:s.selected}]})(({theme:t})=>N({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{margin:"6px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.focusOpacity})`:xs(t.palette.action.active,t.palette.action.focusOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:xs(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Hs.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${Hs.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})),Jf=h.memo(function(s){const r=Ge({props:s,name:"MuiPickersYear"}),{autoFocus:n,className:a,children:o,disabled:i,selected:l,value:c,tabIndex:d,onClick:m,onKeyDown:x,onFocus:y,onBlur:b,"aria-current":D}=r,p=Te(r,Kf),w=h.useRef(null),T=Yf(r);return h.useEffect(()=>{n&&w.current.focus()},[n]),e.jsx(Qf,N({className:Je(T.root,a),ownerState:r},p,{children:e.jsx(Zf,{ref:w,disabled:i,type:"button",role:"radio",tabIndex:i?-1:d,"aria-current":D,"aria-checked":l,onClick:S=>m(S,c),onKeyDown:S=>x(S,c),onFocus:S=>y(S,c),onBlur:S=>b(S,c),className:T.yearButton,ownerState:r,children:o})}))});function Xf(t){return at("MuiYearCalendar",t)}it("MuiYearCalendar",["root"]);const em=["autoFocus","className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsPerRow","timezone","gridLabelId"],tm=t=>{const{classes:s}=t;return nt({root:["root"]},Xf,s)};function sm(t,s){var r;const n=Ie(),a=Ls(),o=Ge({props:t,name:s});return N({disablePast:!1,disableFuture:!1},o,{yearsPerRow:(r=o.yearsPerRow)!=null?r:3,minDate:gt(n,o.minDate,a.minDate),maxDate:gt(n,o.maxDate,a.maxDate)})}const rm=ve("div",{name:"MuiYearCalendar",slot:"Root",overridesResolver:(t,s)=>s.root})({display:"flex",flexDirection:"row",flexWrap:"wrap",overflowY:"auto",height:"100%",padding:"0 4px",width:ur,maxHeight:Qu,boxSizing:"border-box",position:"relative"}),nm=h.forwardRef(function(s,r){const n=sm(s,"MuiYearCalendar"),{autoFocus:a,className:o,value:i,defaultValue:l,referenceDate:c,disabled:d,disableFuture:m,disablePast:x,maxDate:y,minDate:b,onChange:D,readOnly:p,shouldDisableYear:w,disableHighlightToday:T,onYearFocus:S,hasFocus:_,onFocusedViewChange:j,yearsPerRow:g,timezone:f,gridLabelId:C}=n,P=Te(n,em),{value:k,handleValueChange:M,timezone:W}=Cn({name:"YearCalendar",timezone:f,value:i,defaultValue:l,onChange:D,valueManager:It}),$=cr(W),B=Mo(),U=Ie(),V=h.useMemo(()=>It.getInitialReferenceValue({value:k,utils:U,props:n,timezone:W,referenceDate:c,granularity:Ct.year}),[]),J=n,le=tm(J),X=h.useMemo(()=>U.getYear($),[U,$]),E=h.useMemo(()=>k!=null?U.getYear(k):T?null:U.getYear(V),[k,U,T,V]),[A,ae]=h.useState(()=>E||X),[K,q]=Wt({name:"YearCalendar",state:"hasFocus",controlled:_,default:a??!1}),se=he(Z=>{q(Z),j&&j(Z)}),ge=h.useCallback(Z=>{if(x&&U.isBeforeYear(Z,$)||m&&U.isAfterYear(Z,$)||b&&U.isBeforeYear(Z,b)||y&&U.isAfterYear(Z,y))return!0;if(!w)return!1;const I=U.startOfYear(Z);return w(I)},[m,x,y,b,$,w,U]),De=he((Z,I)=>{if(p)return;const re=U.setYear(k??V,I);M(re)}),z=he(Z=>{ge(U.setYear(k??V,Z))||(ae(Z),se(!0),S?.(Z))});h.useEffect(()=>{ae(Z=>E!==null&&Z!==E?E:Z)},[E]);const xe=he((Z,I)=>{switch(Z.key){case"ArrowUp":z(I-g),Z.preventDefault();break;case"ArrowDown":z(I+g),Z.preventDefault();break;case"ArrowLeft":z(I+(B.direction==="ltr"?-1:1)),Z.preventDefault();break;case"ArrowRight":z(I+(B.direction==="ltr"?1:-1)),Z.preventDefault();break}}),we=he((Z,I)=>{z(I)}),_e=he((Z,I)=>{A===I&&se(!1)}),ne=h.useRef(null),fe=Jt(r,ne);return h.useEffect(()=>{if(a||ne.current===null)return;const Z=ne.current.querySelector('[tabindex="0"]');if(!Z)return;const I=Z.offsetHeight,re=Z.offsetTop,ye=ne.current.clientHeight,Ce=ne.current.scrollTop,ue=re+I;I>ye||re<Ce||(ne.current.scrollTop=ue-ye/2-I/2)},[a]),e.jsx(rm,N({ref:fe,className:Je(le.root,o),ownerState:J,role:"radiogroup","aria-labelledby":C},P,{children:U.getYearRange(b,y).map(Z=>{const I=U.getYear(Z),re=I===E,ye=d||ge(Z);return e.jsx(Jf,{selected:re,value:I,onClick:De,onKeyDown:xe,autoFocus:K&&I===A,disabled:ye,tabIndex:I===A?0:-1,onFocus:we,onBlur:_e,"aria-current":X===I?"date":void 0,yearsPerRow:g,children:U.format(Z,"year")},U.format(Z,"year"))})}))}),om=t=>at("MuiPickersCalendarHeader",t),am=it("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),im=["slots","slotProps","components","componentsProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","timezone"],lm=["ownerState"],cm=t=>{const{classes:s}=t;return nt({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},om,s)},dm=ve("div",{name:"MuiPickersCalendarHeader",slot:"Root",overridesResolver:(t,s)=>s.root})({display:"flex",alignItems:"center",marginTop:16,marginBottom:8,paddingLeft:24,paddingRight:12,maxHeight:30,minHeight:30}),um=ve("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer",overridesResolver:(t,s)=>s.labelContainer})(({theme:t})=>N({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},t.typography.body1,{fontWeight:t.typography.fontWeightMedium})),hm=ve("div",{name:"MuiPickersCalendarHeader",slot:"Label",overridesResolver:(t,s)=>s.label})({marginRight:6}),fm=ve(We,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton",overridesResolver:(t,s)=>s.switchViewButton})(({ownerState:t})=>N({marginRight:"auto"},t.view==="year"&&{[`.${am.switchViewIcon}`]:{transform:"rotate(180deg)"}})),mm=ve(Nu,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon",overridesResolver:(t,s)=>s.switchViewIcon})(({theme:t})=>({willChange:"transform",transition:t.transitions.create("transform"),transform:"rotate(0deg)"})),pm=h.forwardRef(function(s,r){var n,a,o,i;const l=$t(),c=Ie(),d=Ge({props:s,name:"MuiPickersCalendarHeader"}),{slots:m,slotProps:x,components:y,currentMonth:b,disabled:D,disableFuture:p,disablePast:w,maxDate:T,minDate:S,onMonthChange:_,onViewChange:j,view:g,reduceAnimations:f,views:C,labelId:P,className:k,timezone:M}=d,W=Te(d,im),$=d,B=cm(d),U=(n=(a=m?.switchViewButton)!=null?a:y?.SwitchViewButton)!=null?n:fm,V=Ue({elementType:U,externalSlotProps:x?.switchViewButton,additionalProps:{size:"small","aria-label":l.calendarViewSwitchingButtonAriaLabel(g)},ownerState:$,className:B.switchViewButton}),J=(o=(i=m?.switchViewIcon)!=null?i:y?.SwitchViewIcon)!=null?o:mm,le=Ue({elementType:J,externalSlotProps:x?.switchViewIcon,ownerState:void 0,className:B.switchViewIcon}),X=Te(le,lm),E=()=>_(c.addMonths(b,1),"left"),A=()=>_(c.addMonths(b,-1),"right"),ae=Lh(b,{disableFuture:p,maxDate:T,timezone:M}),K=Vh(b,{disablePast:w,minDate:S,timezone:M}),q=()=>{if(!(C.length===1||!j||D))if(C.length===2)j(C.find(se=>se!==g)||C[0]);else{const se=C.indexOf(g)!==0?0:1;j(C[se])}};return C.length===1&&C[0]==="year"?null:e.jsxs(dm,N({},W,{ownerState:$,className:Je(k,B.root),ref:r,children:[e.jsxs(um,{role:"presentation",onClick:q,ownerState:$,"aria-live":"polite",className:B.labelContainer,children:[e.jsx(Va,{reduceAnimations:f,transKey:c.format(b,"monthAndYear"),children:e.jsx(hm,{id:P,ownerState:$,className:B.label,children:c.format(b,"monthAndYear")})}),C.length>1&&!D&&e.jsx(U,N({},V,{children:e.jsx(J,N({},X))}))]}),e.jsx(rr,{in:g==="day",children:e.jsx(Yu,{slots:m,slotProps:x,onGoToPrevious:A,isPreviousDisabled:K,previousLabel:l.previousMonth,onGoToNext:E,isNextDisabled:ae,nextLabel:l.nextMonth})})]}))}),xm=ve("div")({overflow:"hidden",width:ur,maxHeight:wn,display:"flex",flexDirection:"column",margin:"0 auto"}),gm=t=>at("MuiDateCalendar",t);it("MuiDateCalendar",["root","viewTransitionContainer"]);const ym=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","defaultCalendarMonth","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","components","componentsProps","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsPerRow","monthsPerRow","timezone"],bm=t=>{const{classes:s}=t;return nt({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},gm,s)};function vm(t,s){var r,n,a,o,i,l,c;const d=Ie(),m=Ls(),x=Pa(),y=Ge({props:t,name:s});return N({},y,{loading:(r=y.loading)!=null?r:!1,disablePast:(n=y.disablePast)!=null?n:!1,disableFuture:(a=y.disableFuture)!=null?a:!1,openTo:(o=y.openTo)!=null?o:"day",views:(i=y.views)!=null?i:["year","day"],reduceAnimations:(l=y.reduceAnimations)!=null?l:x,renderLoading:(c=y.renderLoading)!=null?c:()=>e.jsx("span",{children:"..."}),minDate:gt(d,y.minDate,m.minDate),maxDate:gt(d,y.maxDate,m.maxDate)})}const jm=ve(xm,{name:"MuiDateCalendar",slot:"Root",overridesResolver:(t,s)=>s.root})({display:"flex",flexDirection:"column",height:wn}),wm=ve(Va,{name:"MuiDateCalendar",slot:"ViewTransitionContainer",overridesResolver:(t,s)=>s.viewTransitionContainer})({}),Sm=h.forwardRef(function(s,r){var n,a,o;const i=Ie(),l=nn(),c=vm(s,"MuiDateCalendar"),{autoFocus:d,onViewChange:m,value:x,defaultValue:y,referenceDate:b,disableFuture:D,disablePast:p,defaultCalendarMonth:w,onChange:T,onYearChange:S,onMonthChange:_,reduceAnimations:j,shouldDisableDate:g,shouldDisableMonth:f,shouldDisableYear:C,view:P,views:k,openTo:M,className:W,disabled:$,readOnly:B,minDate:U,maxDate:V,disableHighlightToday:J,focusedView:le,onFocusedViewChange:X,showDaysOutsideCurrentMonth:E,fixedWeekNumber:A,dayOfWeekFormatter:ae,components:K,componentsProps:q,slots:se,slotProps:ge,loading:De,renderLoading:z,displayWeekNumber:xe,yearsPerRow:we,monthsPerRow:_e,timezone:ne}=c,fe=Te(c,ym),{value:Z,handleValueChange:I,timezone:re}=Cn({name:"DateCalendar",timezone:ne,value:x,defaultValue:y,onChange:T,valueManager:It}),{view:ye,setView:Ce,focusedView:ue,setFocusedView:me,goToNextView:Y,setValueAndGoToNextView:L}=Ta({view:P,views:k,openTo:M,onChange:I,onViewChange:m,autoFocus:d,focusedView:le,onFocusedViewChange:X}),{referenceDate:H,calendarState:ie,changeFocusedDay:pe,changeMonth:Pe,handleChangeMonth:$e,isDateDisabled:Qe,onMonthSwitchingAnimationEnd:Bt}=vf({value:Z,defaultCalendarMonth:w,referenceDate:b,reduceAnimations:j,onMonthChange:_,minDate:U,maxDate:V,shouldDisableDate:g,disablePast:p,disableFuture:D,timezone:re}),zt=$&&Z||U,yt=$&&Z||V,rs=`${l}-grid-label`,Xe=ue!==null,Be=(n=(a=se?.calendarHeader)!=null?a:K?.CalendarHeader)!=null?n:pm,Ha=Ue({elementType:Be,externalSlotProps:(o=ge?.calendarHeader)!=null?o:q?.calendarHeader,additionalProps:{views:k,view:ye,currentMonth:ie.currentMonth,onViewChange:Ce,onMonthChange:(Me,jt)=>$e({newMonth:Me,direction:jt}),minDate:zt,maxDate:yt,disabled:$,disablePast:p,disableFuture:D,reduceAnimations:j,timezone:re,labelId:rs,slots:se,slotProps:ge},ownerState:c}),Ga=he(Me=>{const jt=i.startOfMonth(Me),js=i.endOfMonth(Me),Rt=Qe(Me)?Es({utils:i,date:Me,minDate:i.isBefore(U,jt)?jt:U,maxDate:i.isAfter(V,js)?js:V,disablePast:p,disableFuture:D,isDateDisabled:Qe,timezone:re}):Me;Rt?(L(Rt,"finish"),_?.(jt)):(Y(),Pe(jt)),pe(Rt,!0)}),qa=he(Me=>{const jt=i.startOfYear(Me),js=i.endOfYear(Me),Rt=Qe(Me)?Es({utils:i,date:Me,minDate:i.isBefore(U,jt)?jt:U,maxDate:i.isAfter(V,js)?js:V,disablePast:p,disableFuture:D,isDateDisabled:Qe,timezone:re}):Me;Rt?(L(Rt,"finish"),S?.(Rt)):(Y(),Pe(jt)),pe(Rt,!0)}),Ka=he(Me=>I(Me&&Xs(i,Me,Z??H),"finish",ye));h.useEffect(()=>{Z!=null&&i.isValid(Z)&&Pe(Z)},[Z]);const fr=c,Pn=bm(fr),mr={disablePast:p,disableFuture:D,maxDate:V,minDate:U},pr={disableHighlightToday:J,readOnly:B,disabled:$,timezone:re,gridLabelId:rs},xr=h.useRef(ye);h.useEffect(()=>{xr.current!==ye&&(ue===xr.current&&me(ye,!0),xr.current=ye)},[ue,me,ye]);const Ya=h.useMemo(()=>[Z],[Z]);return e.jsxs(jm,N({ref:r,className:Je(Pn.root,W),ownerState:fr},fe,{children:[e.jsx(Be,N({},Ha)),e.jsx(wm,{reduceAnimations:j,className:Pn.viewTransitionContainer,transKey:ye,ownerState:fr,children:e.jsxs("div",{children:[ye==="year"&&e.jsx(nm,N({},mr,pr,{value:Z,onChange:qa,shouldDisableYear:C,hasFocus:Xe,onFocusedViewChange:Me=>me("year",Me),yearsPerRow:we,referenceDate:H})),ye==="month"&&e.jsx(Gf,N({},mr,pr,{hasFocus:Xe,className:W,value:Z,onChange:Ga,shouldDisableMonth:f,onFocusedViewChange:Me=>me("month",Me),monthsPerRow:_e,referenceDate:H})),ye==="day"&&e.jsx(yf,N({},ie,mr,pr,{onMonthSwitchingAnimationEnd:Bt,onFocusedDayChange:pe,reduceAnimations:j,selectedDays:Ya,onSelectedDaysChange:Ka,shouldDisableDate:g,shouldDisableMonth:f,shouldDisableYear:C,hasFocus:Xe,onFocusedViewChange:Me=>me("day",Me),showDaysOutsideCurrentMonth:E,fixedWeekNumber:A,dayOfWeekFormatter:ae,displayWeekNumber:xe,components:K,componentsProps:q,slots:se,slotProps:ge,loading:De,renderLoading:z}))]})})]}))}),ms=({view:t,onViewChange:s,views:r,focusedView:n,onFocusedViewChange:a,value:o,defaultValue:i,referenceDate:l,onChange:c,className:d,classes:m,disableFuture:x,disablePast:y,minDate:b,maxDate:D,shouldDisableDate:p,shouldDisableMonth:w,shouldDisableYear:T,reduceAnimations:S,onMonthChange:_,monthsPerRow:j,onYearChange:g,yearsPerRow:f,defaultCalendarMonth:C,components:P,componentsProps:k,slots:M,slotProps:W,loading:$,renderLoading:B,disableHighlightToday:U,readOnly:V,disabled:J,showDaysOutsideCurrentMonth:le,dayOfWeekFormatter:X,sx:E,autoFocus:A,fixedWeekNumber:ae,displayWeekNumber:K,timezone:q})=>e.jsx(Sm,{view:t,onViewChange:s,views:r.filter(go),focusedView:n&&go(n)?n:null,onFocusedViewChange:a,value:o,defaultValue:i,referenceDate:l,onChange:c,className:d,classes:m,disableFuture:x,disablePast:y,minDate:b,maxDate:D,shouldDisableDate:p,shouldDisableMonth:w,shouldDisableYear:T,reduceAnimations:S,onMonthChange:_,monthsPerRow:j,onYearChange:g,yearsPerRow:f,defaultCalendarMonth:C,components:P,componentsProps:k,slots:M,slotProps:W,loading:$,renderLoading:B,disableHighlightToday:U,readOnly:V,disabled:J,showDaysOutsideCurrentMonth:le,dayOfWeekFormatter:X,sx:E,autoFocus:A,fixedWeekNumber:ae,displayWeekNumber:K,timezone:q}),Wa=h.forwardRef(function(s,r){var n,a,o,i;const l=$t(),c=Ie(),d=Ca(s,"MuiDesktopDatePicker"),m=N({day:ms,month:ms,year:ms},d.viewRenderers),x=N({},d,{viewRenderers:m,format:bn(c,d,!1),yearsPerRow:(n=d.yearsPerRow)!=null?n:4,slots:N({openPickerIcon:Wu,field:La},d.slots),slotProps:N({},d.slotProps,{field:b=>{var D;return N({},gn((D=d.slotProps)==null?void 0:D.field,b),Ra(d),{ref:r})},toolbar:N({hidden:!0},(a=d.slotProps)==null?void 0:a.toolbar)})}),{renderPicker:y}=Cf({props:x,valueManager:It,valueType:"date",getOpenDialogAriaText:(o=(i=x.localeText)==null?void 0:i.openDatePickerDialogue)!=null?o:l.openDatePickerDialogue,validator:hr});return y()});Wa.propTypes={autoFocus:F.bool,className:F.string,closeOnSelect:F.bool,components:F.object,componentsProps:F.object,dayOfWeekFormatter:F.func,defaultCalendarMonth:F.any,defaultValue:F.any,disabled:F.bool,disableFuture:F.bool,disableHighlightToday:F.bool,disableOpenPicker:F.bool,disablePast:F.bool,displayWeekNumber:F.bool,fixedWeekNumber:F.number,format:F.string,formatDensity:F.oneOf(["dense","spacious"]),inputRef:Oo,label:F.node,loading:F.bool,localeText:F.object,maxDate:F.any,minDate:F.any,monthsPerRow:F.oneOf([3,4]),name:F.string,onAccept:F.func,onChange:F.func,onClose:F.func,onError:F.func,onMonthChange:F.func,onOpen:F.func,onSelectedSectionsChange:F.func,onViewChange:F.func,onYearChange:F.func,open:F.bool,openTo:F.oneOf(["day","month","year"]),orientation:F.oneOf(["landscape","portrait"]),readOnly:F.bool,reduceAnimations:F.bool,referenceDate:F.any,renderLoading:F.func,selectedSections:F.oneOfType([F.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),F.number,F.shape({endIndex:F.number.isRequired,startIndex:F.number.isRequired})]),shouldDisableDate:F.func,shouldDisableMonth:F.func,shouldDisableYear:F.func,showDaysOutsideCurrentMonth:F.bool,slotProps:F.object,slots:F.object,sx:F.oneOfType([F.arrayOf(F.oneOfType([F.func,F.object,F.bool])),F.func,F.object]),timezone:F.string,value:F.any,view:F.oneOf(["day","month","year"]),viewRenderers:F.shape({day:F.func,month:F.func,year:F.func}),views:F.arrayOf(F.oneOf(["day","month","year"]).isRequired),yearsPerRow:F.oneOf([3,4])};const Cm=["props","getOpenDialogAriaText"],Pm=t=>{var s,r,n;let{props:a,getOpenDialogAriaText:o}=t,i=Te(t,Cm);const{slots:l,slotProps:c,className:d,sx:m,format:x,formatDensity:y,timezone:b,name:D,label:p,inputRef:w,readOnly:T,disabled:S,localeText:_}=a,j=Ie(),g=h.useRef(null),f=nn(),C=(s=c==null||(r=c.toolbar)==null?void 0:r.hidden)!=null?s:!1,{open:P,actions:k,layoutProps:M,renderCurrentView:W,fieldProps:$}=_a(N({},i,{props:a,inputRef:g,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"mobile"})),B=l.field,U=Ue({elementType:B,externalSlotProps:c?.field,additionalProps:N({},$,C&&{id:f},!(S||T)&&{onClick:k.onOpen,onKeyDown:sh(k.onOpen)},{readOnly:T??!0,disabled:S,className:d,sx:m,format:x,formatDensity:y,timezone:b,label:p,name:D}),ownerState:a});U.inputProps=N({},U.inputProps,{"aria-label":o($.value,j)});const V=N({textField:l.textField},U.slots),J=(n=l.layout)!=null?n:Ia,le=Jt(g,U.inputRef,w);let X=f;C&&(p?X=`${f}-label`:X=void 0);const E=N({},c,{toolbar:N({},c?.toolbar,{titleId:f}),mobilePaper:N({"aria-labelledby":X},c?.mobilePaper)});return{renderPicker:()=>e.jsxs(jn,{localeText:_,children:[e.jsx(B,N({},U,{slots:V,slotProps:E,inputRef:le})),e.jsx(Xu,N({},k,{open:P,slots:l,slotProps:E,children:e.jsx(J,N({},M,E?.layout,{slots:l,slotProps:E,children:W()}))}))]})}},Ua=h.forwardRef(function(s,r){var n,a,o;const i=$t(),l=Ie(),c=Ca(s,"MuiMobileDatePicker"),d=N({day:ms,month:ms,year:ms},c.viewRenderers),m=N({},c,{viewRenderers:d,format:bn(l,c,!1),slots:N({field:La},c.slots),slotProps:N({},c.slotProps,{field:y=>{var b;return N({},gn((b=c.slotProps)==null?void 0:b.field,y),Ra(c),{ref:r})},toolbar:N({hidden:!1},(n=c.slotProps)==null?void 0:n.toolbar)})}),{renderPicker:x}=Pm({props:m,valueManager:It,valueType:"date",getOpenDialogAriaText:(a=(o=m.localeText)==null?void 0:o.openDatePickerDialogue)!=null?a:i.openDatePickerDialogue,validator:hr});return x()});Ua.propTypes={autoFocus:F.bool,className:F.string,closeOnSelect:F.bool,components:F.object,componentsProps:F.object,dayOfWeekFormatter:F.func,defaultCalendarMonth:F.any,defaultValue:F.any,disabled:F.bool,disableFuture:F.bool,disableHighlightToday:F.bool,disableOpenPicker:F.bool,disablePast:F.bool,displayWeekNumber:F.bool,fixedWeekNumber:F.number,format:F.string,formatDensity:F.oneOf(["dense","spacious"]),inputRef:Oo,label:F.node,loading:F.bool,localeText:F.object,maxDate:F.any,minDate:F.any,monthsPerRow:F.oneOf([3,4]),name:F.string,onAccept:F.func,onChange:F.func,onClose:F.func,onError:F.func,onMonthChange:F.func,onOpen:F.func,onSelectedSectionsChange:F.func,onViewChange:F.func,onYearChange:F.func,open:F.bool,openTo:F.oneOf(["day","month","year"]),orientation:F.oneOf(["landscape","portrait"]),readOnly:F.bool,reduceAnimations:F.bool,referenceDate:F.any,renderLoading:F.func,selectedSections:F.oneOfType([F.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),F.number,F.shape({endIndex:F.number.isRequired,startIndex:F.number.isRequired})]),shouldDisableDate:F.func,shouldDisableMonth:F.func,shouldDisableYear:F.func,showDaysOutsideCurrentMonth:F.bool,slotProps:F.object,slots:F.object,sx:F.oneOfType([F.arrayOf(F.oneOfType([F.func,F.object,F.bool])),F.func,F.object]),timezone:F.string,value:F.any,view:F.oneOf(["day","month","year"]),viewRenderers:F.shape({day:F.func,month:F.func,year:F.func}),views:F.arrayOf(F.oneOf(["day","month","year"]).isRequired),yearsPerRow:F.oneOf([3,4])};const Dm=["desktopModeMediaQuery"],To=h.forwardRef(function(s,r){const n=Ge({props:s,name:"MuiDatePicker"}),{desktopModeMediaQuery:a=rh}=n,o=Te(n,Dm);return sr(a,{defaultMatches:!0})?e.jsx(Wa,N({ref:r},o)):e.jsx(Ua,N({ref:r},o))});var Gs={exports:{}},_o;function Tm(){return _o||(_o=1,(function(t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var r=function(c,d){switch(c){case"P":return d.date({width:"short"});case"PP":return d.date({width:"medium"});case"PPP":return d.date({width:"long"});case"PPPP":default:return d.date({width:"full"})}},n=function(c,d){switch(c){case"p":return d.time({width:"short"});case"pp":return d.time({width:"medium"});case"ppp":return d.time({width:"long"});case"pppp":default:return d.time({width:"full"})}},a=function(c,d){var m=c.match(/(P+)(p+)?/)||[],x=m[1],y=m[2];if(!y)return r(c,d);var b;switch(x){case"P":b=d.dateTime({width:"short"});break;case"PP":b=d.dateTime({width:"medium"});break;case"PPP":b=d.dateTime({width:"long"});break;case"PPPP":default:b=d.dateTime({width:"full"});break}return b.replace("{{date}}",r(x,d)).replace("{{time}}",n(y,d))},o={p:n,P:a},i=o;s.default=i,t.exports=s.default})(Gs,Gs.exports)),Gs.exports}var _m=Tm();const km=Fs(_m),Em={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},Im={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",fullDateWithWeekday:"PPPP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",monthAndYear:"LLLL yyyy",monthAndDate:"MMMM d",fullTime:"p",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",fullDateTime:"PP p",fullDateTime12h:"PP hh:mm aa",fullDateTime24h:"PP HH:mm",keyboardDateTime:"P p",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class Am{constructor(s){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib="date-fns",this.locale=void 0,this.formats=void 0,this.formatTokenMap=Em,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=o=>typeof o>"u"?new Date:o===null?null:new Date(o),this.dateWithTimezone=o=>this.date(o),this.getTimezone=()=>"default",this.setTimezone=o=>o,this.toJsDate=o=>o,this.getCurrentLocaleCode=()=>{var o;return((o=this.locale)==null?void 0:o.code)||"en-US"},this.is12HourCycleInCurrentLocale=()=>this.locale?/a/.test(this.locale.formatLong.time({width:"short"})):!0,this.expandFormat=o=>{const i=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return o.match(i).map(l=>{const c=l[0];if(c==="p"||c==="P"){const d=this.longFormatters[c];return d(l,this.locale.formatLong)}return l}).join("")},this.getFormatHelperText=o=>this.expandFormat(o).replace(/(aaa|aa|a)/g,"(a|p)m").toLocaleLowerCase(),this.isNull=o=>o===null,this.formatNumber=o=>o,this.getMeridiemText=o=>o==="am"?"AM":"PM";const{locale:r,formats:n,longFormatters:a}=s;this.locale=r,this.formats=N({},Im,n),this.longFormatters=a}}class Rm extends Am{constructor({locale:s,formats:r}={}){if(typeof Pr!="function")throw new Error(["MUI: The `date-fns` package v3.x is not compatible with this adapter.","Please, install v2.x of the package or use the `AdapterDateFnsV3` instead."].join(`
`));super({locale:s??Fi,formats:r,longFormatters:km}),this.parseISO=n=>Ni(n),this.toISO=n=>Li(n,{format:"extended"}),this.parse=(n,a)=>n===""?null:Vi(n,a,new Date,{locale:this.locale}),this.isValid=n=>Wi(this.date(n)),this.format=(n,a)=>this.formatByString(n,this.formats[a]),this.formatByString=(n,a)=>Ui(n,a,{locale:this.locale}),this.getDiff=(n,a,o)=>{switch(o){case"years":return Qi(n,this.date(a));case"quarters":return Yi(n,this.date(a));case"months":return Ki(n,this.date(a));case"weeks":return qi(n,this.date(a));case"days":return Gi(n,this.date(a));case"hours":return Hi(n,this.date(a));case"minutes":return zi(n,this.date(a));case"seconds":return Bi(n,this.date(a));default:return $i(n,this.date(a))}},this.isEqual=(n,a)=>n===null&&a===null?!0:Zi(n,a),this.isSameYear=(n,a)=>Ji(n,a),this.isSameMonth=(n,a)=>Xi(n,a),this.isSameDay=(n,a)=>el(n,a),this.isSameHour=(n,a)=>tl(n,a),this.isAfter=(n,a)=>Dr(n,a),this.isAfterYear=(n,a)=>Dr(n,Tr(a)),this.isAfterDay=(n,a)=>Dr(n,Nn(a)),this.isBefore=(n,a)=>ws(n,a),this.isBeforeYear=(n,a)=>ws(n,Vs(a)),this.isBeforeDay=(n,a)=>ws(n,Ln(a)),this.isWithinRange=(n,[a,o])=>sl(n,{start:a,end:o}),this.startOfYear=n=>Vs(n),this.startOfMonth=n=>Vn(n),this.startOfWeek=n=>_r(n,{locale:this.locale}),this.startOfDay=n=>Ln(n),this.endOfYear=n=>Tr(n),this.endOfMonth=n=>Wn(n),this.endOfWeek=n=>kr(n,{locale:this.locale}),this.endOfDay=n=>Nn(n),this.addYears=(n,a)=>Un(n,a),this.addMonths=(n,a)=>Er(n,a),this.addWeeks=(n,a)=>rl(n,a),this.addDays=(n,a)=>Pr(n,a),this.addHours=(n,a)=>nl(n,a),this.addMinutes=(n,a)=>ol(n,a),this.addSeconds=(n,a)=>al(n,a),this.getYear=n=>il(n),this.getMonth=n=>ll(n),this.getDate=n=>cl(n),this.getHours=n=>dl(n),this.getMinutes=n=>ul(n),this.getSeconds=n=>hl(n),this.getMilliseconds=n=>fl(n),this.setYear=(n,a)=>ml(n,a),this.setMonth=(n,a)=>pl(n,a),this.setDate=(n,a)=>xl(n,a),this.setHours=(n,a)=>gl(n,a),this.setMinutes=(n,a)=>yl(n,a),this.setSeconds=(n,a)=>bl(n,a),this.setMilliseconds=(n,a)=>vl(n,a),this.getDaysInMonth=n=>jl(n),this.getNextMonth=n=>Er(n,1),this.getPreviousMonth=n=>Er(n,-1),this.getMonthArray=n=>{const o=[Vs(n)];for(;o.length<12;){const i=o[o.length-1];o.push(this.getNextMonth(i))}return o},this.mergeDateAndTime=(n,a)=>this.setSeconds(this.setMinutes(this.setHours(n,this.getHours(a)),this.getMinutes(a)),this.getSeconds(a)),this.getWeekdays=()=>{const n=new Date;return wl({start:_r(n,{locale:this.locale}),end:kr(n,{locale:this.locale})}).map(a=>this.formatByString(a,"EEEEEE"))},this.getWeekArray=n=>{const a=_r(Vn(n),{locale:this.locale}),o=kr(Wn(n),{locale:this.locale});let i=0,l=a;const c=[];for(;ws(l,o);){const d=Math.floor(i/7);c[d]=c[d]||[],c[d].push(l),l=Pr(l,1),i+=1}return c},this.getWeekNumber=n=>Sl(n,{locale:this.locale}),this.getYearRange=(n,a)=>{const o=Vs(n),i=Tr(a),l=[];let c=o;for(;ws(c,i);)l.push(c),c=Un(c,1);return l}}}const Mm={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"http://localhost:3001",VITE_AWS_REGION:"us-east-1",VITE_BUILD_TIME:"2025-12-13T02:40:17.884Z",VITE_COGNITO_CLIENT_ID:"",VITE_COGNITO_DOMAIN:"",VITE_COGNITO_REDIRECT_SIGN_IN:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",VITE_COGNITO_REDIRECT_SIGN_OUT:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",VITE_COGNITO_USER_POOL_ID:"",VITE_ENABLE_DEBUG:"false",VITE_ENABLE_MOCK_DATA:"false",VITE_ENVIRONMENT:"production",VITE_SERVERLESS:"true",VITE_VERSION:"1.0.0-dev"},ko=Mm&&"http://localhost:3001"||window.__CONFIG__&&window.__CONFIG__.API_URL||"http://localhost:3001",Om=()=>{const[t,s]=h.useState("trades"),[r,n]=h.useState(0),[a,o]=h.useState(1e4),[i,l]=h.useState(null),[c,d]=h.useState(!1),[m,x]=h.useState(!1),[y,b]=h.useState(!1),[D,p]=h.useState(""),[w,T]=h.useState("all"),[S,_]=h.useState("all"),[j,g]=h.useState("execution_date"),[f,C]=h.useState("desc"),[P,k]=h.useState([]),[M,W]=h.useState(!1),[$,B]=h.useState(null),[U,V]=h.useState(""),[J,le]=h.useState("all"),[X,E]=h.useState({start:null,end:null}),[A,ae]=h.useState(null),{data:K,isLoading:q,refetch:se}=hs({queryKey:["tradeHistory",r,a],queryFn:async()=>{const L=new URLSearchParams({page:(r+1).toString(),limit:a.toString()}),H=await fetch(`${ko}/api/trades?${L}`);if(!H.ok)throw new Error("Failed to fetch trades");const ie=await H.json();return{data:{trades:ie.items||[],pagination:ie.pagination||{},summary:{}}}},staleTime:6e4}),{data:ge,isLoading:De}=hs({queryKey:["tradeSummary"],queryFn:async()=>{const L=await fetch(`${ko}/api/trades/summary`);if(!L.ok)throw new Error("Failed to fetch summary");return{data:(await L.json()).data}},staleTime:6e4}),z=K?.data?.trades||[],xe=K?.data?.summary||ge?.data?.summary||{},we=q||De,_e=h.useMemo(()=>{if(!z||z.length===0)return[];const L=[...z].sort((ie,pe)=>new Date(ie.execution_date)-new Date(pe.execution_date)),H={};return L.forEach(ie=>{const pe=new Date(ie.execution_date).toLocaleDateString();H[pe]||(H[pe]={date:pe,buyCount:0,sellCount:0,buyValue:0,sellValue:0,totalValue:0}),ie.type.toLowerCase()==="buy"?(H[pe].buyCount+=1,ie.order_value!==null&&ie.order_value!==void 0&&(H[pe].buyValue+=ie.order_value)):(H[pe].sellCount+=1,ie.order_value!==null&&ie.order_value!==void 0&&(H[pe].sellValue+=ie.order_value)),ie.order_value!==null&&ie.order_value!==void 0&&(H[pe].totalValue+=ie.order_value)}),Object.values(H)},[z]),ne=h.useMemo(()=>{if(!z||z.length===0)return{totalTrades:0,winningTrades:0,losingTrades:0,winRate:0,avgHoldTime:"N/A",totalPnl:0,avgWin:0,avgLoss:0,profitFactor:0};const L=z.filter(Xe=>Xe.type.toLowerCase()==="buy"),H=z.filter(Xe=>Xe.type.toLowerCase()==="sell"),ie=L.reduce((Xe,Be)=>Be.order_value!==null&&Be.order_value!==void 0?Xe+Be.order_value:Xe,0),pe=H.reduce((Xe,Be)=>Be.order_value!==null&&Be.order_value!==void 0?Xe+Be.order_value:Xe,0),Pe=pe-ie,$e=H.length,Qe=L.filter(Xe=>!0).length,Bt=$e>0?pe/$e:0,zt=Qe>0?ie/Qe:0,yt=ie>0?pe/ie:0,rs=xe.total_trades||z.length;return{totalTrades:rs,winningTrades:$e,losingTrades:L.length-$e,winRate:$e>0?$e/rs*100:0,avgHoldTime:"N/A",totalPnl:Pe,avgWin:Bt,avgLoss:zt,profitFactor:isFinite(yt)?yt:0}},[z,xe]),fe=h.useMemo(()=>!P||P.length===0?[]:P.filter(L=>{const H=U.toLowerCase();if(!(L.symbol.toLowerCase().includes(H)||L.buyDate.toString().includes(H)||L.sellDate.toString().includes(H)))return!1;if(J!=="all"){const pe=parseFloat(L.pnl);if(J==="profit"&&pe<=0||J==="loss"&&pe>=0||J==="wash-sale"&&!L.isWashSale)return!1}return!0}),[P,U,J]);h.useEffect(()=>{t==="matched"&&(async()=>{try{W(!0),B(null);const ie=await(await fetch("/api/trades/fifo-analysis")).json();if(ie.success&&ie.data){const Pe=(ie.data?.analysis||null)?.matchedPairs||null,$e=Array.isArray(Pe)&&Pe.length>0?Pe:[];k($e)}else B("Failed to load matched pairs data")}catch(H){B(H.message||"Error fetching matched pairs"),console.error("Error fetching FIFO analysis:",H)}finally{W(!1)}})()},[t]);const Z=()=>{se()},I=async()=>{try{ae(null),se(),x(!1)}catch(L){ae(L.message)}},re=async(L="csv")=>{try{const H=await fetch(`/api/trades/export?format=${L}`);if(H.ok){const ie=await H.blob(),pe=window.URL.createObjectURL(ie),Pe=document.createElement("a");Pe.href=pe,Pe.download=`trades_${new Date().toISOString().split("T")[0]}.${L}`,document.body.appendChild(Pe),Pe.click(),window.URL.revokeObjectURL(pe),document.body.removeChild(Pe)}}catch(H){ae(H.message)}},ye=L=>{switch(L?.toLowerCase()){case"buy":return"success";case"sell":return"error";case"dividend":return"info";case"split":return"warning";default:return"default"}},Ce=L=>L==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(L),ue=L=>L==null?"0.00%":`${(L*100).toFixed(2)}%`,me=h.useMemo(()=>{if(!Array.isArray(z))return[];let L=z.filter(H=>{const ie=!D||H.symbol?.toLowerCase().includes(D.toLowerCase())||H.type?.toLowerCase().includes(D.toLowerCase()),pe=w==="all"||H.type===w,Pe=S==="all"||H.status===S;return ie&&pe&&Pe});return L.sort((H,ie)=>{const pe=H[j]||"",Pe=ie[j]||"";return f==="asc"?pe>Pe?1:-1:pe<Pe?1:-1}),L},[z,D,w,S,j,f]),Y=me.slice(r*a,r*a+a);return e.jsx(jn,{dateAdapter:Rm,children:e.jsxs(ot,{maxWidth:"xl",sx:{py:3},children:[e.jsxs(R,{sx:{mb:3},children:[e.jsx(u,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Trade History"}),e.jsx(u,{variant:"subtitle1",color:"text.secondary",children:"Complete overview of your trading activity and performance"})]}),A&&e.jsx(Se,{severity:"error",sx:{mb:3},onClose:()=>ae(null),children:A}),e.jsx(R,{sx:{mb:3,borderBottom:1,borderColor:"divider"},children:e.jsxs(tn,{value:t,onChange:(L,H)=>s(H),children:[e.jsx(St,{label:"All Trades",value:"trades"}),e.jsx(St,{label:"Matched Pairs (FIFO)",value:"matched"})]})}),ne&&e.jsxs(v,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(G,{children:e.jsxs(Q,{children:[e.jsxs(R,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ai,{color:"primary",sx:{mr:1}}),e.jsx(u,{variant:"h6",children:"Total Trades"})]}),e.jsx(u,{variant:"h4",sx:{mt:1},children:ne.totalTrades||0})]})})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(G,{children:e.jsxs(Q,{children:[e.jsxs(R,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ii,{color:"success",sx:{mr:1}}),e.jsx(u,{variant:"h6",children:"Total P&L"})]}),e.jsx(u,{variant:"h4",sx:{mt:1,color:ne.totalPnl>=0?"success.main":"error.main"},children:Ce(ne.totalPnl)})]})})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(G,{children:e.jsxs(Q,{children:[e.jsxs(R,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Vr,{color:"info",sx:{mr:1}}),e.jsx(u,{variant:"h6",children:"Win Rate"})]}),e.jsx(u,{variant:"h4",sx:{mt:1},children:ue(ne.winRate)})]})})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsx(G,{children:e.jsxs(Q,{children:[e.jsxs(R,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Fo,{color:"secondary",sx:{mr:1}}),e.jsx(u,{variant:"h6",children:"Avg Hold Time"})]}),e.jsx(u,{variant:"h4",sx:{mt:1},children:ne.avgHoldTime||"N/A"})]})})})]}),e.jsxs(R,{sx:{mb:3,display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(te,{variant:"outlined",startIcon:e.jsx(li,{}),onClick:()=>x(!0),children:"Import Trades"}),e.jsx(te,{variant:"outlined",startIcon:e.jsx(ks,{}),onClick:()=>re("csv"),children:"Export CSV"}),e.jsx(te,{variant:"outlined",startIcon:e.jsx(ks,{}),onClick:()=>re("json"),children:"Export JSON"}),e.jsx(te,{variant:"outlined",startIcon:e.jsx(Ft,{}),onClick:Z,disabled:we,children:"Refresh"})]}),e.jsx(v,{container:!0,spacing:3,sx:{mb:4},children:e.jsx(v,{item:!0,xs:12,children:e.jsxs(G,{children:[e.jsx(je,{title:"Trade Activity Over Time - Buy/Sell by Day"}),e.jsxs(Q,{children:[e.jsx(Ne,{width:"100%",height:400,children:e.jsxs(zr,{data:_e,children:[e.jsx(qe,{strokeDasharray:"3 3"}),e.jsx(Ke,{dataKey:"date",angle:-45,textAnchor:"end",height:80}),e.jsx(Re,{}),e.jsx(Le,{contentStyle:{backgroundColor:"#f5f5f5",border:"1px solid #ccc"},formatter:(L,H)=>H==="buyValue"||H==="sellValue"?Ce(L):L,labelFormatter:L=>`Date: ${L}`}),e.jsx(Oe,{dataKey:"buyValue",fill:"#4CAF50",name:"Buy Value"}),e.jsx(Oe,{dataKey:"sellValue",fill:"#F44336",name:"Sell Value"}),e.jsx(Kt,{dataKey:"buyCount",stroke:"#2196F3",yAxisId:"right",strokeWidth:2,name:"Buy Count"}),e.jsx(Kt,{dataKey:"sellCount",stroke:"#FF6F00",yAxisId:"right",strokeWidth:2,name:"Sell Count"}),e.jsx(Re,{yAxisId:"right",orientation:"right"})]})}),e.jsx(u,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"Green bars = Buy Values | Red bars = Sell Values | Blue line = # Buys | Orange line = # Sells"})]})]})})}),ne&&e.jsxs(v,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(v,{item:!0,xs:12,md:6,children:e.jsxs(G,{children:[e.jsx(je,{title:"Trading Statistics"}),e.jsx(Q,{children:e.jsxs(R,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(R,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{children:"Total Trades:"}),e.jsx(u,{fontWeight:"bold",children:ne.totalTrades})]}),e.jsxs(R,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{children:"Winning Trades:"}),e.jsx(u,{fontWeight:"bold",color:"success.main",children:ne.winningTrades})]}),e.jsxs(R,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{children:"Losing Trades:"}),e.jsx(u,{fontWeight:"bold",color:"error.main",children:ne.losingTrades})]}),e.jsxs(R,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{children:"Average Win:"}),e.jsx(u,{fontWeight:"bold",children:Ce(ne.avgWin)})]}),e.jsxs(R,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{children:"Average Loss:"}),e.jsx(u,{fontWeight:"bold",children:Ce(ne.avgLoss)})]}),e.jsxs(R,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{children:"Profit Factor:"}),e.jsx(u,{fontWeight:"bold",children:ne.profitFactor})]})]})})]})}),e.jsx(v,{item:!0,xs:12,md:6,children:e.jsxs(G,{children:[e.jsx(je,{title:"Position Summary"}),e.jsx(Q,{children:e.jsxs(R,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(R,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{children:"Avg Buy Order Value:"}),e.jsx(u,{fontWeight:"bold",children:Ce(ne.avgLoss)})]}),e.jsxs(R,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{children:"Avg Sell Order Value:"}),e.jsx(u,{fontWeight:"bold",children:Ce(ne.avgWin)})]}),e.jsxs(R,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{children:"Net Closed P&L:"}),e.jsx(u,{fontWeight:"bold",color:ne.totalPnl>=0?"success.main":"error.main",children:Ce(ne.totalPnl)})]}),e.jsx(u,{variant:"caption",color:"text.secondary",sx:{mt:1},children:"Based on buy/sell order values"})]})})]})})]}),t==="trades"&&e.jsxs(e.Fragment,{children:[e.jsx(G,{sx:{mb:3},children:e.jsxs(Q,{children:[e.jsxs(R,{sx:{display:"flex",gap:2,flexWrap:"wrap",alignItems:"center"},children:[e.jsx(be,{size:"small",placeholder:"Search by symbol or type...",value:D,onChange:L=>p(L.target.value),InputProps:{startAdornment:e.jsx(Pt,{position:"start",children:e.jsx(En,{})})},sx:{minWidth:200}}),e.jsxs(et,{size:"small",sx:{minWidth:120},children:[e.jsx(tt,{children:"Type"}),e.jsxs(st,{value:w,label:"Type",onChange:L=>T(L.target.value),children:[e.jsx(ee,{value:"all",children:"All Types"}),e.jsx(ee,{value:"buy",children:"Buy"}),e.jsx(ee,{value:"sell",children:"Sell"}),e.jsx(ee,{value:"dividend",children:"Dividend"}),e.jsx(ee,{value:"split",children:"Split"})]})]}),e.jsxs(et,{size:"small",sx:{minWidth:120},children:[e.jsx(tt,{children:"Status"}),e.jsxs(st,{value:S,label:"Status",onChange:L=>_(L.target.value),children:[e.jsx(ee,{value:"all",children:"All Status"}),e.jsx(ee,{value:"filled",children:"Filled"}),e.jsx(ee,{value:"pending",children:"Pending"}),e.jsx(ee,{value:"cancelled",children:"Cancelled"}),e.jsx(ee,{value:"partial",children:"Partial"})]})]}),e.jsx(te,{variant:"outlined",startIcon:e.jsx(ci,{}),onClick:()=>b(!y),children:"Filters"})]}),y&&e.jsx(R,{sx:{mt:2,pt:2,borderTop:1,borderColor:"divider"},children:e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(To,{label:"Start Date",value:X.start,onChange:L=>E(H=>({...H,start:L})),renderInput:L=>e.jsx(be,{...L,fullWidth:!0})})}),e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(To,{label:"End Date",value:X.end,onChange:L=>E(H=>({...H,end:L})),renderInput:L=>e.jsx(be,{...L,fullWidth:!0})})})]})})]})}),e.jsxs(G,{children:[e.jsx(ft,{children:e.jsxs(mt,{children:[e.jsx(pt,{children:e.jsxs(ke,{children:[e.jsx(O,{children:e.jsx(In,{active:j==="symbol",direction:j==="symbol"?f:"asc",onClick:()=>{g("symbol"),C(j==="symbol"&&f==="asc"?"desc":"asc")},children:"Symbol"})}),e.jsx(O,{children:"Type"}),e.jsx(O,{children:"Quantity"}),e.jsx(O,{children:"Price"}),e.jsx(O,{children:"Value"}),e.jsx(O,{children:"Status"}),e.jsx(O,{children:e.jsx(In,{active:j==="executedAt",direction:j==="executedAt"?f:"asc",onClick:()=>{g("executedAt"),C(j==="executedAt"&&f==="asc"?"desc":"asc")},children:"Date"})}),e.jsx(O,{children:"Actions"})]})}),e.jsx(xt,{children:we?e.jsx(ke,{children:e.jsx(O,{colSpan:8,align:"center",children:e.jsx(rt,{})})}):(Y?.length||0)===0?e.jsx(ke,{children:e.jsx(O,{colSpan:8,align:"center",children:e.jsx(u,{variant:"body2",color:"text.secondary",children:"No trades found"})})}):(Y||[]).map(L=>e.jsxs(ke,{hover:!0,children:[e.jsx(O,{children:e.jsx(u,{variant:"body2",fontWeight:"bold",children:L.symbol})}),e.jsx(O,{children:e.jsx(ze,{label:L.type,color:ye(L.type),size:"small",icon:L.type==="buy"?e.jsx(Wr,{}):e.jsx(di,{})})}),e.jsx(O,{children:L.quantity}),e.jsx(O,{children:Ce(L.execution_price)}),e.jsx(O,{children:Ce(L.order_value)}),e.jsx(O,{children:e.jsx(ze,{label:"Filled",color:"success",size:"small"})}),e.jsx(O,{children:new Date(L.execution_date).toLocaleDateString()}),e.jsx(O,{children:e.jsx(We,{size:"small",onClick:()=>{l(L),d(!0)},children:e.jsx(No,{})})})]},L.id))})]})}),e.jsx(ui,{rowsPerPageOptions:[10,25,50,100],component:"div",count:me?.length||0,rowsPerPage:a,page:r,onPageChange:(L,H)=>n(H),onRowsPerPageChange:L=>{o(parseInt(L.target.value,10)),n(0)}})]})]}),t==="matched"&&e.jsx(e.Fragment,{children:M?e.jsxs(G,{sx:{p:3,textAlign:"center"},children:[e.jsx(rt,{}),e.jsx(u,{sx:{mt:2},children:"Loading matched pairs..."})]}):$?e.jsx(Se,{severity:"error",sx:{mb:3},children:$}):e.jsxs(e.Fragment,{children:[e.jsx(G,{sx:{mb:3},children:e.jsx(Q,{children:e.jsxs(R,{sx:{display:"flex",gap:2,flexWrap:"wrap",alignItems:"center"},children:[e.jsx(be,{size:"small",placeholder:"Search by symbol or date...",value:U,onChange:L=>V(L.target.value),InputProps:{startAdornment:e.jsx(Pt,{position:"start",children:e.jsx(En,{})})},sx:{minWidth:200}}),e.jsxs(et,{size:"small",sx:{minWidth:150},children:[e.jsx(tt,{children:"P&L Filter"}),e.jsxs(st,{value:J,label:"P&L Filter",onChange:L=>le(L.target.value),children:[e.jsx(ee,{value:"all",children:"All Pairs"}),e.jsx(ee,{value:"profit",children:"Profits Only"}),e.jsx(ee,{value:"loss",children:"Losses Only"}),e.jsx(ee,{value:"wash-sale",children:"Wash Sales Only"})]})]}),e.jsx(te,{variant:"outlined",onClick:()=>{V(""),le("all")},children:"Clear Filters"})]})})}),e.jsx(G,{children:e.jsx(ft,{children:e.jsxs(mt,{children:[e.jsx(pt,{children:e.jsxs(ke,{sx:{backgroundColor:"#f5f5f5"},children:[e.jsx(O,{children:e.jsx("strong",{children:"Symbol"})}),e.jsx(O,{children:e.jsx("strong",{children:"Buy Date"})}),e.jsx(O,{align:"right",children:e.jsx("strong",{children:"Buy Price"})}),e.jsx(O,{children:e.jsx("strong",{children:"Sell Date"})}),e.jsx(O,{align:"right",children:e.jsx("strong",{children:"Sell Price"})}),e.jsx(O,{align:"right",children:e.jsx("strong",{children:"Qty"})}),e.jsx(O,{align:"right",children:e.jsx("strong",{children:"Cost Basis"})}),e.jsx(O,{align:"right",children:e.jsx("strong",{children:"Proceeds"})}),e.jsx(O,{align:"right",children:e.jsx("strong",{children:"P&L"})}),e.jsx(O,{align:"right",children:e.jsx("strong",{children:"Hold Days"})}),e.jsx(O,{children:e.jsx("strong",{children:"Tax Type"})}),e.jsx(O,{children:e.jsx("strong",{children:"Wash Sale"})})]})}),e.jsx(xt,{children:fe&&fe.length>0?fe.map((L,H)=>{const ie=parseFloat(L.pnl),pe=ie>=0;return e.jsxs(ke,{hover:!0,children:[e.jsx(O,{children:e.jsx(u,{variant:"body2",fontWeight:"bold",children:L.symbol})}),e.jsx(O,{children:e.jsx(u,{variant:"body2",children:new Date(L.buyDate).toLocaleDateString()})}),e.jsx(O,{align:"right",children:e.jsx(u,{variant:"body2",children:Ce(L.buyPrice)})}),e.jsx(O,{children:e.jsx(u,{variant:"body2",children:new Date(L.sellDate).toLocaleDateString()})}),e.jsx(O,{align:"right",children:e.jsx(u,{variant:"body2",children:Ce(L.sellPrice)})}),e.jsx(O,{align:"right",children:e.jsx(u,{variant:"body2",children:L.quantity})}),e.jsx(O,{align:"right",children:e.jsx(u,{variant:"body2",children:Ce(L.costBasis)})}),e.jsx(O,{align:"right",children:e.jsx(u,{variant:"body2",children:Ce(L.proceeds)})}),e.jsx(O,{align:"right",children:e.jsxs(u,{variant:"body2",fontWeight:"bold",sx:{color:pe?"success.main":"error.main"},children:[pe?"+":"",Ce(ie)]})}),e.jsx(O,{align:"right",children:e.jsx(u,{variant:"body2",children:L.holdDays})}),e.jsx(O,{children:e.jsx(ze,{label:L.taxType,size:"small",color:L.taxType==="LONG-TERM"?"success":"warning",variant:"outlined"})}),e.jsx(O,{children:L.isWashSale?e.jsx(ze,{label:"Wash Sale",size:"small",color:"error",variant:"outlined"}):e.jsx(u,{variant:"body2",children:""})})]},H)}):e.jsx(ke,{children:e.jsx(O,{colSpan:12,align:"center",children:e.jsx(u,{variant:"body2",color:"text.secondary",children:"No matched pairs found"})})})})]})})})]})}),e.jsxs(kt,{open:m,onClose:()=>x(!1),children:[e.jsx(Zt,{children:"Import Trades"}),e.jsxs(Et,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Import your trades from connected brokers. This will sync your trade history and update your analytics."}),e.jsx(Se,{severity:"info",children:"Make sure your broker API keys are configured in Settings before importing."})]}),e.jsxs(Vt,{children:[e.jsx(te,{onClick:()=>x(!1),children:"Cancel"}),e.jsx(te,{variant:"contained",onClick:I,children:"Import from Alpaca"})]})]}),e.jsxs(kt,{open:c,onClose:()=>d(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(Zt,{children:"Trade Details"}),e.jsx(Et,{children:i&&e.jsxs(v,{container:!0,spacing:2,sx:{mt:1},children:[e.jsxs(v,{item:!0,xs:12,sm:6,children:[e.jsx(u,{variant:"subtitle2",children:"Symbol"}),e.jsx(u,{variant:"body2",children:i.symbol})]}),e.jsxs(v,{item:!0,xs:12,sm:6,children:[e.jsx(u,{variant:"subtitle2",children:"Type"}),e.jsx(u,{variant:"body2",children:i.type})]}),e.jsxs(v,{item:!0,xs:12,sm:6,children:[e.jsx(u,{variant:"subtitle2",children:"Quantity"}),e.jsx(u,{variant:"body2",children:i.quantity})]}),e.jsxs(v,{item:!0,xs:12,sm:6,children:[e.jsx(u,{variant:"subtitle2",children:"Execution Price"}),e.jsx(u,{variant:"body2",children:Ce(i.execution_price)})]}),e.jsxs(v,{item:!0,xs:12,sm:6,children:[e.jsx(u,{variant:"subtitle2",children:"Total Value"}),e.jsx(u,{variant:"body2",children:Ce(i.order_value)})]}),e.jsxs(v,{item:!0,xs:12,sm:6,children:[e.jsx(u,{variant:"subtitle2",children:"P&L"}),e.jsx(u,{variant:"body2",color:"text.secondary",children:Ce(0)})]}),e.jsxs(v,{item:!0,xs:12,sm:6,children:[e.jsx(u,{variant:"subtitle2",children:"Execution Date"}),e.jsx(u,{variant:"body2",children:new Date(i.execution_date).toLocaleString()})]}),e.jsxs(v,{item:!0,xs:12,sm:6,children:[e.jsx(u,{variant:"subtitle2",children:"Status"}),e.jsx(u,{variant:"body2",children:"Filled"})]}),i.commission?e.jsxs(v,{item:!0,xs:12,sm:6,children:[e.jsx(u,{variant:"subtitle2",children:"Commission"}),e.jsx(u,{variant:"body2",children:Ce(i.commission)})]}):null,e.jsxs(v,{item:!0,xs:12,sm:6,children:[e.jsx(u,{variant:"subtitle2",children:"Order ID"}),e.jsx(u,{variant:"body2",children:i.order_id})]})]})}),e.jsx(Vt,{children:e.jsx(te,{onClick:()=>d(!1),children:"Close"})})]})]})})},Fm={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"http://localhost:3001",VITE_AWS_REGION:"us-east-1",VITE_BUILD_TIME:"2025-12-13T02:40:17.884Z",VITE_COGNITO_CLIENT_ID:"",VITE_COGNITO_DOMAIN:"",VITE_COGNITO_REDIRECT_SIGN_IN:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",VITE_COGNITO_REDIRECT_SIGN_OUT:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",VITE_COGNITO_USER_POOL_ID:"",VITE_ENABLE_DEBUG:"false",VITE_ENABLE_MOCK_DATA:"false",VITE_ENVIRONMENT:"production",VITE_SERVERLESS:"true",VITE_VERSION:"1.0.0-dev"},$a=(t,s,r,n={})=>{new Date().toISOString(),r?.message||r?.toString(),r?.stack,r?.isAxiosError&&(r.config?.url,r.config?.method,r.config?.baseURL,r.config?.timeout,r.response?.status,r.response?.statusText,r.response?.data)},Nm=(t,s,r,n={})=>{$a(t,`Query[${s}]`,r,{...n})},Lm=(t,s,r=null,n={})=>{new Date().toISOString(),r&&(Array.isArray(r)?r?.length:Object.keys(r).length)},Ba=t=>({error:(s,r,n)=>$a(t,s,r,n),queryError:(s,r,n)=>Nm(t,s,r,n),success:(s,r,n)=>Lm(t,s,r,n),info:(s,r)=>Fm&&!1}),Nr={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"http://localhost:3001",VITE_AWS_REGION:"us-east-1",VITE_BUILD_TIME:"2025-12-13T02:40:17.884Z",VITE_COGNITO_CLIENT_ID:"",VITE_COGNITO_DOMAIN:"",VITE_COGNITO_REDIRECT_SIGN_IN:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",VITE_COGNITO_REDIRECT_SIGN_OUT:"https://CLOUDFRONT_DOMAIN_PLACEHOLDER",VITE_COGNITO_USER_POOL_ID:"",VITE_ENABLE_DEBUG:"false",VITE_ENABLE_MOCK_DATA:"false",VITE_ENVIRONMENT:"production",VITE_SERVERLESS:"true",VITE_VERSION:"1.0.0-dev"};function as({children:t,value:s,index:r,...n}){return e.jsx("div",{role:"tabpanel",hidden:s!==r,id:`settings-tabpanel-${r}`,"aria-labelledby":`settings-tab-${r}`,...n,children:s===r&&e.jsx(R,{sx:{py:3},children:t})})}const Vm=()=>{ua("Settings");const{user:t,isAuthenticated:s,isLoading:r,logout:n,checkAuthState:a}=At(),o=ln(),i=h.useMemo(()=>ir(),[]),{apiUrl:l}=i,c=h.useMemo(()=>Ba("Settings"),[]),[d,m]=h.useState(0),[x,y]=h.useState(!1),[b,D]=h.useState({open:!1,message:"",severity:"success"}),[p,w]=h.useState([]),[T,S]=h.useState(!1),[_,j]=h.useState({}),[g,f]=h.useState({brokerName:"",apiKey:"",apiSecret:"",sandbox:!0}),[C,P]=h.useState({firstName:"",lastName:"",email:"",phone:"",timezone:"America/New_York",currency:"USD"}),[k,M]=h.useState({open:!1,currentPassword:"",newPassword:"",confirmPassword:"",errors:{}}),[W,$]=h.useState({email:!0,push:!0,priceAlerts:!0,portfolioUpdates:!0,marketNews:!1,weeklyReports:!0}),[B,U]=h.useState({darkMode:!1,primaryColor:"#1976d2",chartStyle:"candlestick",layout:"standard"}),V=h.useCallback(async()=>{try{const I=await Ee.getApiKeys();if(I&&I.ok){const re=I.data||{},ye=Object.entries(re).map(([Ce,ue])=>({brokerName:Ce,...ue,createdAt:ue.lastValidated||new Date().toISOString()}));w(ye)}else throw new Error(`API keys endpoint failed: ${I?.status||"unknown"}`)}catch(I){throw c.error("Load API Keys Failed",I,{userId:t?.sub||t?.id,apiUrl:l,operation:"loadApiKeys",responseStatus:I.response?.status,responseData:I.response?.data}),w([]),I}},[l,c,t?.id,t?.sub]),J=h.useCallback(async()=>{try{y(!0),P({firstName:t?.firstName||"",lastName:t?.lastName||"",email:t?.email||"",phone:t?.phone||"",timezone:t?.timezone||"America/New_York",currency:t?.currency||"USD"});try{await V()}catch(I){c.error("API Keys Loading Failed",I,{userId:t?.sub||t?.id,apiUrl:l,operation:"loadApiKeys",context:"settings initialization"}),A(`Failed to load API keys: ${I.message}`,"error")}try{const I=await fetch(`${l}/api/settings/preferences`,{headers:{Authorization:`Bearer ${t?.tokens?.accessToken||"dev-token"}`}});if(I.ok){const re=await I.json();$(ye=>({...ye,...re.preferences}))}else I.status===404&&console.log("Notifications endpoint not implemented, using defaults")}catch{console.log("Failed to load notification preferences, using defaults")}try{const I=await fetch(`${l}/api/settings/preferences`,{headers:{Authorization:`Bearer ${t?.tokens?.accessToken||"dev-token"}`}});if(I.ok){const re=await I.json();U(ye=>({...ye,...re.preferences}))}else I.status===404&&console.log("Theme endpoint not implemented, using defaults")}catch{console.log("Failed to load theme preferences, using defaults")}}catch{A("Failed to load settings","error"),P({firstName:"",lastName:"",email:"",phone:"",timezone:"America/New_York",currency:"USD"})}finally{y(!1)}},[l,c,V,t?.currency,t?.email,t?.firstName,t?.id,t?.lastName,t?.phone,t?.sub,t?.timezone,t?.tokens?.accessToken]),le=h.useRef(!1),X=h.useRef(J);h.useEffect(()=>{X.current=J},[J]),h.useEffect(()=>{s&&!le.current&&!x&&(le.current=!0,c.info("User authenticated, loading settings",{userId:t?.sub||t?.id,email:t?.email}),X.current())},[s,x,c,t?.email,t?.id,t?.sub]),h.useEffect(()=>{!r&&!t&&!s&&Nr&&(c.error("No authenticated session found",new Error("Session check failed"),{isAuthenticated:s,isLoading:r,hasUser:!!t}),a().catch(I=>{c.error("Session recovery failed",I)}))},[r,s,t,a,c]);const E=(I,re)=>{m(re)},A=(I,re="success")=>{D({open:!0,message:I,severity:re})},ae=async()=>{try{y(!0);const I=await fetch(`${l}/api/user/profile`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t?.tokens?.accessToken||"dev-token"}`},body:JSON.stringify(C)});if(I.ok){const re=await I.json();A("Profile updated successfully"),re.user&&await J()}else{const re=await I.json();c.error("Profile Update Failed",new Error(`Profile update rejected: ${I.status}`),{userId:t?.sub||t?.id,profileData:C,responseStatus:I.status,errorData:re,operation:"updateProfile"}),A(re.error||"Failed to update profile","error")}}catch(I){c.error("Profile Save Error",I,{userId:t?.sub||t?.id,profileData:C,operation:"handleSaveProfile",context:"network or server error"}),A("Failed to update profile","error")}finally{y(!1)}},K=async()=>{try{y(!0);const I=await Ee.saveApiKey(g);if(I&&I.ok)A("API key added successfully"),S(!1),f({brokerName:"",apiKey:"",apiSecret:"",sandbox:!0}),await V();else{const re=await I.json();A(re.error||"Failed to add API key","error")}}catch{A("Failed to add API key","error")}finally{y(!1)}},q=async I=>{try{await Ee.deleteApiKey(I),A("API key deleted successfully"),await V()}catch{A("Failed to delete API key","error")}},se=async()=>{try{y(!0);const I=await Ee.updateSettings({preferences:{...B,...W}});I.ok?A("Notification preferences updated successfully"):A(I.error||"Failed to update notification preferences","error")}catch{A("Failed to update notification preferences","error")}finally{y(!1)}},ge=async()=>{try{y(!0);const I=await Ee.updateSettings({preferences:{...B,...W}});I.ok?A("Theme preferences updated successfully"):A(I.error||"Failed to update theme preferences","error")}catch{A("Failed to update theme preferences","error")}finally{y(!1)}},De=async()=>{M({open:!0,currentPassword:"",newPassword:"",confirmPassword:"",errors:{}})},z=()=>{const I={};return k.currentPassword||(I.currentPassword="Current password is required"),k.newPassword?k.newPassword.length<8?I.newPassword="Password must be at least 8 characters":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(k.newPassword)||(I.newPassword="Password must contain uppercase, lowercase, and number"):I.newPassword="New password is required",k.newPassword!==k.confirmPassword&&(I.confirmPassword="Passwords do not match"),k.currentPassword===k.newPassword&&(I.newPassword="New password must be different from current password"),I},xe=async()=>{const I=z();if(Object.keys(I).length>0){M(re=>({...re,errors:I}));return}try{y(!0);const re=await fetch(`${l}/api/user/change-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t?.tokens?.accessToken||"dev-token"}`},body:JSON.stringify({currentPassword:k.currentPassword,newPassword:k.newPassword})});if(re.ok)A("Password changed successfully","success"),M({open:!1,currentPassword:"",newPassword:"",confirmPassword:"",errors:{}});else{const ye=await re.json();re.status===401?M(Ce=>({...Ce,errors:{currentPassword:"Current password is incorrect"}})):A(ye.message||"Failed to change password","error")}}catch{A("Network error. Please try again.","error")}finally{y(!1)}},we=()=>{M({open:!1,currentPassword:"",newPassword:"",confirmPassword:"",errors:{}})},_e=async()=>{try{y(!0);const I=t?.twoFactorEnabled?"disable":"enable",re=await fetch(`${l}/api/user/two-factor/${I}`,{method:"POST",headers:{Authorization:`Bearer ${t?.tokens?.accessToken||"dev-token"}`}});if(re.ok){const ye=await re.json();A(t?.twoFactorEnabled?"Two-factor authentication disabled":"Two-factor authentication enabled"),!t?.twoFactorEnabled&&ye.qrCode&&A("Please scan the QR code with your authenticator app","info"),await J()}else{const ye=await re.json();A(ye.error||"Failed to toggle two-factor authentication","error")}}catch{A("Failed to toggle two-factor authentication","error")}finally{y(!1)}},ne=async()=>{try{y(!0);const I=await fetch(`${l}/api/user/recovery-codes`,{headers:{Authorization:`Bearer ${t?.tokens?.accessToken||"dev-token"}`}});if(I.ok){const ye=(await I.json()).codes.join(`
`),Ce=new Blob([ye],{type:"text/plain"}),ue=URL.createObjectURL(Ce),me=document.createElement("a");me.href=ue,me.download="recovery-codes.txt",me.click(),URL.revokeObjectURL(ue),A("Recovery codes downloaded successfully","success")}else{const re=await I.json();A(re.error||"Failed to download recovery codes","error")}}catch{A("Failed to download recovery codes","error")}finally{y(!1)}},fe=async()=>{if(window.confirm("Are you sure you want to delete your account? This action cannot be undone.")&&window.confirm('This will permanently delete all your data. Type "DELETE" to confirm.')&&window.prompt('Type "DELETE" to confirm account deletion:')==="DELETE")try{y(!0);const re=await fetch(`${l}/api/user/delete-account`,{method:"DELETE",headers:{Authorization:`Bearer ${t?.tokens?.accessToken||"dev-token"}`}});if(re.ok)A("Account deleted successfully","success"),await n(),o("/");else{const ye=await re.json();A(ye.error||"Failed to delete account","error")}}catch{A("Failed to delete account","error")}finally{y(!1)}},Z=async()=>{if(window.confirm("This will sign you out of all devices except this one. Continue?"))try{y(!0);const I=await fetch(`${l}/api/user/revoke-sessions`,{method:"POST",headers:{Authorization:`Bearer ${t?.tokens?.accessToken||"dev-token"}`}});if(I.ok)A("All other sessions have been revoked","success");else{const re=await I.json();A(re.error||"Failed to revoke sessions","error")}}catch{A("Failed to revoke sessions","error")}finally{y(!1)}};return x||r?e.jsx(ot,{maxWidth:"lg",sx:{mt:4,mb:4},children:e.jsx(R,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:e.jsx(rt,{size:60})})}):!t&&!r?(Nr?c.error("Authentication Error",new Error("Unable to load user information"),{userObject:t,isAuthenticated:s,isLoading:r,apiUrl:l,reason:"No user object available after authentication loading completed",suggestedActions:["refresh page","login again","check session"],url:window.location.href}):console.log(" DEV: Settings page - no authenticated user, showing login prompt"),e.jsx(ot,{maxWidth:"lg",sx:{mt:4,mb:4},children:e.jsx(Se,{severity:"warning",action:e.jsx(te,{color:"inherit",size:"small",onClick:()=>window.location.reload(),"aria-label":"Refresh page to re-authenticate",children:"Refresh"}),children:"Unable to load user information. This may be due to an expired session or authentication issue."})})):e.jsxs(ot,{maxWidth:"lg",sx:{mt:4,mb:4},"data-testid":"settings-page",children:[e.jsx(u,{variant:"h3",component:"h1",gutterBottom:!0,children:"Account Settings"}),e.jsx(u,{variant:"subtitle1",color:"text.secondary",sx:{mb:4},children:"Manage your account preferences, API connections, and security settings"}),e.jsxs(Ye,{sx:{width:"100%"},children:[e.jsxs(tn,{value:d,onChange:E,variant:"scrollable",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider"},"aria-label":"Settings navigation tabs",children:[e.jsx(St,{value:0,icon:e.jsx(Lo,{}),label:"Profile","aria-label":"Profile settings"}),e.jsx(St,{value:1,icon:e.jsx(Lr,{}),label:"API Keys","data-testid":"api-keys-tab","aria-label":"API keys management"}),e.jsx(St,{value:2,icon:e.jsx(hi,{}),label:"Notifications","aria-label":"Notification preferences"}),e.jsx(St,{value:3,icon:e.jsx(fi,{}),label:"Appearance","aria-label":"Appearance and theme settings"}),e.jsx(St,{value:4,icon:e.jsx(ls,{}),label:"Security","aria-label":"Security and account settings"}),e.jsx(St,{value:5,icon:e.jsx(mi,{}),label:"Privacy","aria-label":"Privacy settings and data management"})]}),e.jsx(as,{value:d,index:0,children:e.jsxs(v,{container:!0,spacing:3,children:[e.jsx(v,{item:!0,xs:12,md:8,children:e.jsxs(G,{children:[e.jsx(je,{title:"Personal Information"}),e.jsxs(Q,{children:[e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(be,{fullWidth:!0,label:"First Name",value:C.firstName,onChange:I=>P({...C,firstName:I.target.value})})}),e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(be,{fullWidth:!0,label:"Last Name",value:C.lastName,onChange:I=>P({...C,lastName:I.target.value})})}),e.jsx(v,{item:!0,xs:12,children:e.jsx(be,{fullWidth:!0,label:"Email",type:"email",value:C.email,onChange:I=>P({...C,email:I.target.value})})}),e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsxs(et,{fullWidth:!0,children:[e.jsx(tt,{children:"Timezone"}),e.jsxs(st,{value:C.timezone,onChange:I=>P({...C,timezone:I.target.value}),children:[e.jsx(ee,{value:"America/New_York",children:"Eastern Time"}),e.jsx(ee,{value:"America/Chicago",children:"Central Time"}),e.jsx(ee,{value:"America/Denver",children:"Mountain Time"}),e.jsx(ee,{value:"America/Los_Angeles",children:"Pacific Time"}),e.jsx(ee,{value:"Europe/London",children:"London"}),e.jsx(ee,{value:"Asia/Tokyo",children:"Tokyo"})]})]})}),e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsxs(et,{fullWidth:!0,children:[e.jsx(tt,{children:"Currency"}),e.jsxs(st,{value:C.currency,onChange:I=>P({...C,currency:I.target.value}),children:[e.jsx(ee,{value:"USD",children:"USD - US Dollar"}),e.jsx(ee,{value:"EUR",children:"EUR - Euro"}),e.jsx(ee,{value:"GBP",children:"GBP - British Pound"}),e.jsx(ee,{value:"CAD",children:"CAD - Canadian Dollar"})]})]})})]}),e.jsxs(R,{sx:{mt:3,display:"flex",gap:2},children:[e.jsx(te,{variant:"contained",startIcon:e.jsx(wr,{}),onClick:ae,disabled:x,"aria-label":"Save profile changes",children:"Save Changes"}),e.jsx(te,{variant:"outlined",startIcon:e.jsx(pi,{}),onClick:J,"aria-label":"Cancel and reset profile changes",children:"Reset"})]})]})]})}),e.jsx(v,{item:!0,xs:12,md:4,children:e.jsxs(G,{children:[e.jsx(je,{title:"Account Overview"}),e.jsxs(Q,{children:[e.jsxs(R,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(Vo,{sx:{mr:2,width:56,height:56},children:(t?.firstName?.[0]||t?.username?.[0]||"U").toUpperCase()}),e.jsxs(R,{children:[e.jsxs(u,{variant:"h6",children:[t?.firstName||"Unknown"," ",t?.lastName||"User"]}),e.jsx(u,{color:"text.secondary",children:t?.email||"No email provided"})]})]}),e.jsx(ys,{sx:{my:2}}),e.jsxs(Qs,{dense:!0,"aria-label":"Account information",children:[e.jsxs(qt,{children:[e.jsx(us,{primary:"Account Status",secondary:"Active"}),e.jsx(An,{children:e.jsx(ze,{label:"Active",color:"success",size:"small"})})]}),e.jsx(qt,{children:e.jsx(us,{primary:"Member Since",secondary:new Date(t?.createdAt||Date.now()).toLocaleDateString()})})]})]})]})})]})}),e.jsx(as,{value:d,index:1,children:e.jsx(v,{container:!0,spacing:4,children:e.jsx(v,{item:!0,xs:12,children:e.jsxs(G,{children:[e.jsx(je,{title:"API Keys",subheader:"Manage your API keys for data providers and trading platforms",action:e.jsx(te,{variant:"contained",startIcon:e.jsx(xi,{}),onClick:()=>S(!0),"data-testid":"add-api-key-button","aria-label":"Add new API key",children:"Add API Key"})}),e.jsx(Q,{children:p.length===0?e.jsx(Se,{severity:"info",sx:{mb:2},children:"No API keys configured. Add your first API key to start accessing real market data."}):e.jsx(v,{container:!0,spacing:2,children:p.map(I=>e.jsx(v,{item:!0,xs:12,md:6,children:e.jsx(G,{variant:"outlined",children:e.jsx(Q,{children:e.jsxs(R,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(R,{children:[e.jsx(u,{variant:"h6",children:I.brokerName}),e.jsxs(u,{variant:"body2",color:"text.secondary",children:["Added:"," ",new Date(I.createdAt).toLocaleDateString()]})]}),e.jsxs(R,{children:[e.jsx(ze,{label:I.status||"Active",color:I.status==="active"?"success":"default",size:"small"}),e.jsx(We,{onClick:()=>q(I.brokerName),color:"error","aria-label":`Delete ${I.brokerName} API key`,children:e.jsx(gi,{})})]})]})})})},I.brokerName))})})]})})})}),e.jsx(as,{value:d,index:2,children:e.jsxs(G,{children:[e.jsx(je,{title:"Notification Preferences",action:e.jsx(te,{variant:"contained",startIcon:e.jsx(wr,{}),onClick:se,disabled:x,"aria-label":"Save notification preferences",children:"Save"})}),e.jsx(Q,{children:e.jsxs(v,{container:!0,spacing:3,children:[e.jsxs(v,{item:!0,xs:12,md:6,children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"Delivery Methods"}),e.jsxs(R,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(ut,{control:e.jsx(bt,{checked:W.email,onChange:I=>$({...W,email:I.target.checked})}),label:"Email Notifications"}),e.jsx(ut,{control:e.jsx(bt,{checked:W.push,onChange:I=>$({...W,push:I.target.checked})}),label:"Push Notifications"})]})]}),e.jsxs(v,{item:!0,xs:12,md:6,children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"Content Types"}),e.jsxs(R,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(ut,{control:e.jsx(bt,{checked:W.priceAlerts,onChange:I=>$({...W,priceAlerts:I.target.checked})}),label:"Price Alerts"}),e.jsx(ut,{control:e.jsx(bt,{checked:W.portfolioUpdates,onChange:I=>$({...W,portfolioUpdates:I.target.checked})}),label:"Portfolio Updates"}),e.jsx(ut,{control:e.jsx(bt,{checked:W.marketNews,onChange:I=>$({...W,marketNews:I.target.checked})}),label:"Market News"}),e.jsx(ut,{control:e.jsx(bt,{checked:W.weeklyReports,onChange:I=>$({...W,weeklyReports:I.target.checked})}),label:"Weekly Reports"})]})]})]})})]})}),e.jsx(as,{value:d,index:3,children:e.jsxs(G,{children:[e.jsx(je,{title:"Appearance Settings",action:e.jsx(te,{variant:"contained",startIcon:e.jsx(wr,{}),onClick:ge,disabled:x,"aria-label":"Save appearance settings",children:"Save"})}),e.jsx(Q,{children:e.jsxs(v,{container:!0,spacing:3,children:[e.jsxs(v,{item:!0,xs:12,md:6,children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"Theme Settings"}),e.jsx(R,{sx:{mb:2},children:e.jsx(ut,{control:e.jsx(bt,{checked:B.darkMode,onChange:I=>U({...B,darkMode:I.target.checked})}),label:"Dark Mode"})}),e.jsxs(et,{fullWidth:!0,sx:{mb:2},children:[e.jsx(tt,{children:"Primary Color"}),e.jsxs(st,{value:B.primaryColor,onChange:I=>U({...B,primaryColor:I.target.value}),children:[e.jsx(ee,{value:"#1976d2",children:"Blue"}),e.jsx(ee,{value:"#2e7d32",children:"Green"}),e.jsx(ee,{value:"#ed6c02",children:"Orange"}),e.jsx(ee,{value:"#9c27b0",children:"Purple"}),e.jsx(ee,{value:"#d32f2f",children:"Red"})]})]}),e.jsxs(et,{fullWidth:!0,children:[e.jsx(tt,{children:"Layout Style"}),e.jsxs(st,{value:B.layout,onChange:I=>U({...B,layout:I.target.value}),children:[e.jsx(ee,{value:"standard",children:"Standard"}),e.jsx(ee,{value:"compact",children:"Compact"}),e.jsx(ee,{value:"spacious",children:"Spacious"})]})]})]}),e.jsxs(v,{item:!0,xs:12,md:6,children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"Chart Settings"}),e.jsxs(et,{fullWidth:!0,sx:{mb:2},children:[e.jsx(tt,{children:"Default Chart Style"}),e.jsxs(st,{value:B.chartStyle,onChange:I=>U({...B,chartStyle:I.target.value}),children:[e.jsx(ee,{value:"candlestick",children:"Candlestick"}),e.jsx(ee,{value:"line",children:"Line"}),e.jsx(ee,{value:"area",children:"Area"}),e.jsx(ee,{value:"bar",children:"Bar"})]})]}),e.jsx(Se,{severity:"info",children:"Theme changes will be applied immediately. Some changes may require a page refresh."})]})]})})]})}),e.jsx(as,{value:d,index:4,children:e.jsxs(v,{container:!0,spacing:3,children:[e.jsx(v,{item:!0,xs:12,md:6,children:e.jsxs(G,{children:[e.jsx(je,{title:"Password & Authentication"}),e.jsxs(Q,{children:[e.jsx(te,{variant:"outlined",fullWidth:!0,sx:{mb:2},startIcon:e.jsx(ls,{}),onClick:De,disabled:x,"aria-label":"Change account password",children:"Change Password"}),e.jsxs(te,{variant:"outlined",fullWidth:!0,sx:{mb:2},startIcon:e.jsx(ls,{}),onClick:_e,disabled:x,"aria-label":`${t?.twoFactorEnabled?"Disable":"Enable"} two-factor authentication`,children:[t?.twoFactorEnabled?"Disable":"Enable"," Two-Factor Authentication"]}),e.jsx(te,{variant:"outlined",fullWidth:!0,startIcon:e.jsx(ks,{}),onClick:ne,disabled:x||!t?.twoFactorEnabled,"aria-label":"Download two-factor authentication recovery codes",children:"Download Recovery Codes"})]})]})}),e.jsx(v,{item:!0,xs:12,md:6,children:e.jsxs(G,{children:[e.jsx(je,{title:"Account Actions"}),e.jsxs(Q,{children:[e.jsx(te,{variant:"outlined",fullWidth:!0,onClick:n,sx:{mb:2},disabled:x,"aria-label":"Sign out of account",children:"Sign Out"}),e.jsx(te,{variant:"outlined",color:"error",fullWidth:!0,startIcon:e.jsx(Qt,{}),onClick:fe,disabled:x,"aria-label":"Delete account permanently",children:"Delete Account"})]})]})}),e.jsx(v,{item:!0,xs:12,children:e.jsxs(G,{children:[e.jsx(je,{title:"Active Sessions"}),e.jsxs(Q,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Manage your active login sessions across different devices."}),e.jsx(Qs,{"aria-label":"Active sessions",children:e.jsxs(qt,{children:[e.jsx(Ur,{children:e.jsx(ds,{color:"success"})}),e.jsx(us,{primary:"Current Session",secondary:`${navigator.userAgent.includes("Chrome")?"Chrome":"Browser"} on ${navigator.platform} - ${new Date().toLocaleString()}`}),e.jsx(An,{children:e.jsx(ze,{label:"Current",color:"primary",size:"small"})})]})}),e.jsx(te,{variant:"outlined",color:"warning",startIcon:e.jsx(ls,{}),onClick:Z,disabled:x,"aria-label":"Revoke all other active sessions",children:"Revoke All Other Sessions"})]})]})})]})}),e.jsx(as,{value:d,index:5,children:e.jsxs(v,{container:!0,spacing:3,children:[e.jsx(v,{item:!0,xs:12,md:6,children:e.jsxs(G,{children:[e.jsx(je,{title:"Data Privacy"}),e.jsxs(Q,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Control how your data is collected, stored, and used."}),e.jsx(ut,{control:e.jsx(bt,{defaultChecked:!0}),label:"Allow analytics collection",sx:{mb:2}}),e.jsx(ut,{control:e.jsx(bt,{defaultChecked:!0}),label:"Share usage data for improvements",sx:{mb:2}}),e.jsx(ut,{control:e.jsx(bt,{}),label:"Allow marketing communications",sx:{mb:2}}),e.jsx(te,{variant:"outlined",fullWidth:!0,startIcon:e.jsx(ks,{}),sx:{mt:2},children:"Download My Data"})]})]})}),e.jsx(v,{item:!0,xs:12,md:6,children:e.jsxs(G,{children:[e.jsx(je,{title:"Data Retention"}),e.jsxs(Q,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Manage how long your data is stored in our systems."}),e.jsxs(et,{fullWidth:!0,sx:{mb:2},children:[e.jsx(tt,{children:"Trading History Retention"}),e.jsxs(st,{defaultValue:"12months",label:"Trading History Retention",children:[e.jsx(ee,{value:"3months",children:"3 Months"}),e.jsx(ee,{value:"6months",children:"6 Months"}),e.jsx(ee,{value:"12months",children:"12 Months"}),e.jsx(ee,{value:"forever",children:"Keep Forever"})]})]}),e.jsxs(et,{fullWidth:!0,sx:{mb:2},children:[e.jsx(tt,{children:"Analytics Data Retention"}),e.jsxs(st,{defaultValue:"6months",label:"Analytics Data Retention",children:[e.jsx(ee,{value:"30days",children:"30 Days"}),e.jsx(ee,{value:"3months",children:"3 Months"}),e.jsx(ee,{value:"6months",children:"6 Months"}),e.jsx(ee,{value:"never",children:"Don't Store"})]})]})]})]})}),e.jsx(v,{item:!0,xs:12,children:e.jsxs(G,{children:[e.jsx(je,{title:"Account Data Management"}),e.jsxs(Q,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Request actions regarding your personal data."}),e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:12,sm:4,children:e.jsx(te,{variant:"outlined",fullWidth:!0,startIcon:e.jsx(ks,{}),children:"Export Data"})}),e.jsx(v,{item:!0,xs:12,sm:4,children:e.jsx(te,{variant:"outlined",color:"warning",fullWidth:!0,startIcon:e.jsx(Qt,{}),children:"Request Data Deletion"})}),e.jsx(v,{item:!0,xs:12,sm:4,children:e.jsx(te,{variant:"outlined",color:"info",fullWidth:!0,children:"Privacy Report"})})]}),e.jsx(Se,{severity:"info",sx:{mt:2},children:"Data export and deletion requests may take up to 30 days to process."})]})]})})]})})]}),e.jsxs(kt,{open:T,onClose:()=>S(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(Zt,{children:"Add Broker API Key"}),e.jsxs(Et,{children:[e.jsxs(v,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(v,{item:!0,xs:12,children:e.jsxs(et,{fullWidth:!0,children:[e.jsx(tt,{id:"broker-select-label",children:"Broker"}),e.jsxs(st,{labelId:"broker-select-label",id:"broker-select",label:"Broker",value:g.brokerName,onChange:I=>f({...g,brokerName:I.target.value}),children:[e.jsx(ee,{value:"alpaca","data-provider":"alpaca",children:"Alpaca"}),e.jsx(ee,{value:"polygon","data-provider":"polygon",children:"Polygon"})]})]})}),e.jsx(v,{item:!0,xs:12,children:e.jsx(be,{fullWidth:!0,label:"API Key",type:_.apiKey?"text":"password",value:g.apiKey,"data-testid":"api-key-input",onChange:I=>f({...g,apiKey:I.target.value}),InputProps:{endAdornment:e.jsx(We,{onClick:()=>j({..._,apiKey:!_.apiKey}),"aria-label":_.apiKey?"Hide API key":"Show API key",children:_.apiKey?e.jsx(Xt,{}):e.jsx(es,{})})}})}),e.jsx(v,{item:!0,xs:12,children:e.jsx(be,{fullWidth:!0,label:"API Secret",type:_.apiSecret?"text":"password",value:g.apiSecret,onChange:I=>f({...g,apiSecret:I.target.value}),InputProps:{endAdornment:e.jsx(We,{onClick:()=>j({..._,apiSecret:!_.apiSecret}),"aria-label":_.apiSecret?"Hide API secret":"Show API secret",children:_.apiSecret?e.jsx(Xt,{}):e.jsx(es,{})})}})}),e.jsx(v,{item:!0,xs:12,children:e.jsx(ut,{control:e.jsx(bt,{checked:g.sandbox,onChange:I=>f({...g,sandbox:I.target.checked})}),label:"Sandbox Environment (recommended for testing)"})})]}),e.jsx(Se,{severity:"info",sx:{mt:2},children:"API keys are encrypted and stored securely. We recommend starting with sandbox mode for testing."})]}),e.jsxs(Vt,{children:[e.jsx(te,{onClick:()=>S(!1),"aria-label":"Cancel adding API key",children:"Cancel"}),e.jsx(te,{onClick:K,variant:"contained",disabled:!g.brokerName||!g.apiKey||x,"aria-label":"Add new API key",children:"Add API Key"})]})]}),e.jsxs(kt,{open:k.open,onClose:we,maxWidth:"sm",fullWidth:!0,children:[e.jsx(Zt,{children:"Change Password"}),e.jsxs(Et,{children:[e.jsx(be,{autoFocus:!0,margin:"dense",label:"Current Password",type:"password",fullWidth:!0,variant:"outlined",value:k.currentPassword,onChange:I=>M(re=>({...re,currentPassword:I.target.value,errors:{...re.errors,currentPassword:""}})),error:!!k.errors.currentPassword,helperText:k.errors.currentPassword,sx:{mb:2}}),e.jsx(be,{margin:"dense",label:"New Password",type:"password",fullWidth:!0,variant:"outlined",value:k.newPassword,onChange:I=>M(re=>({...re,newPassword:I.target.value,errors:{...re.errors,newPassword:""}})),error:!!k.errors.newPassword,helperText:k.errors.newPassword||"Must be at least 8 characters with uppercase, lowercase, and number",sx:{mb:2}}),e.jsx(be,{margin:"dense",label:"Confirm New Password",type:"password",fullWidth:!0,variant:"outlined",value:k.confirmPassword,onChange:I=>M(re=>({...re,confirmPassword:I.target.value,errors:{...re.errors,confirmPassword:""}})),error:!!k.errors.confirmPassword,helperText:k.errors.confirmPassword,onKeyPress:I=>{I.key==="Enter"&&xe()}})]}),e.jsxs(Vt,{children:[e.jsx(te,{onClick:we,children:"Cancel"}),e.jsx(te,{onClick:xe,variant:"contained",disabled:x,startIcon:x&&e.jsx(rt,{size:20}),children:x?"Changing...":"Change Password"})]})]}),e.jsx(yi,{open:b.open,autoHideDuration:6e3,onClose:()=>D({...b,open:!1}),children:e.jsx(Se,{onClose:()=>D({...b,open:!1}),severity:b.severity,sx:{width:"100%"},children:b.message})})]})};function Wm({onSwitchToRegister:t,onSwitchToForgotPassword:s}){const[r,n]=h.useState({username:"",password:""}),[a,o]=h.useState(!1),[i,l]=h.useState(""),[c,d]=h.useState(!1),{login:m,isLoading:x,error:y,clearError:b}=At(),D=T=>{const{name:S,value:_}=T.target;n(j=>({...j,[S]:_})),y&&b(),i&&l("")},p=async T=>{if(T.preventDefault(),l(""),!r.username||!r.password){l("Please enter both username and password");return}localStorage.setItem("rememberMe",c.toString());const S=await m(r.username,r.password);!S.success&&S.error&&l(S.error)},w=y||i;return e.jsx(G,{sx:{maxWidth:400,mx:"auto",mt:4},children:e.jsxs(Q,{sx:{p:4},children:[e.jsxs(R,{display:"flex",alignItems:"center",justifyContent:"center",mb:3,children:[e.jsx($r,{sx:{mr:1,color:"primary.main"}}),e.jsx(u,{variant:"h4",component:"h1",color:"primary",children:"Sign In"})]}),e.jsx(u,{variant:"body1",color:"text.secondary",align:"center",mb:3,children:"Access your Financial Dashboard"}),w&&e.jsx(Se,{severity:"error",sx:{mb:2},children:w}),e.jsxs(R,{component:"form",role:"form",onSubmit:p,noValidate:!0,children:[e.jsx(be,{fullWidth:!0,id:"username",name:"username",label:"Username or Email",type:"text",value:r.username,onChange:D,margin:"normal",required:!0,autoComplete:"username",autoFocus:!0,disabled:x}),e.jsx(be,{fullWidth:!0,id:"password",name:"password",label:"Password",type:a?"text":"password",value:r.password,onChange:D,margin:"normal",required:!0,autoComplete:"current-password",disabled:x,InputProps:{endAdornment:e.jsx(Pt,{position:"end",children:e.jsx(We,{"aria-label":"toggle password visibility",onClick:()=>o(!a),edge:"end",disabled:x,children:a?e.jsx(Xt,{}):e.jsx(es,{})})})}}),e.jsx(ut,{control:e.jsx(bi,{checked:c,onChange:T=>d(T.target.checked),color:"primary",disabled:x}),label:"Remember me for 30 days",sx:{mt:1,mb:1}}),e.jsx(te,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,py:1.5},disabled:x,startIcon:x?e.jsx(rt,{size:20}):e.jsx($r,{}),children:x?"Signing In...":"Sign In"}),e.jsx(R,{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2,children:e.jsx(gs,{component:"button",type:"button",variant:"body2",onClick:s,disabled:x,children:"Forgot password?"})}),e.jsx(ys,{sx:{my:2}}),e.jsx(R,{textAlign:"center",children:e.jsxs(u,{variant:"body2",color:"text.secondary",children:["Don't have an account?"," ",e.jsx(gs,{component:"button",type:"button",variant:"body2",onClick:t,disabled:x,sx:{fontWeight:"medium"},children:"Sign up here"})]})})]})]})})}function Um({onSwitchToLogin:t,onRegistrationSuccess:s}){const[r,n]=h.useState({username:"",email:"",password:"",confirmPassword:"",firstName:"",lastName:""}),[a,o]=h.useState(!1),[i,l]=h.useState(!1),[c,d]=h.useState(""),{register:m,isLoading:x,error:y,clearError:b}=At(),D=S=>{const{name:_,value:j}=S.target;n(g=>({...g,[_]:j})),y&&b(),c&&d("")},p=()=>!r.username||!r.email||!r.password?(d("Please fill in all required fields"),!1):r.password!==r.confirmPassword?(d("Passwords do not match"),!1):(r.password?.length||0)<8?(d("Password must be at least 8 characters long"),!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)?!0:(d("Please enter a valid email address"),!1),w=async S=>{if(S.preventDefault(),d(""),!p())return;const _=await m(r.username,r.password,r.email,r.firstName,r.lastName);_.success?s?.(r.username,_.nextStep):_.error&&d(_.error)},T=y||c;return e.jsx(G,{sx:{maxWidth:500,mx:"auto",mt:4},children:e.jsxs(Q,{sx:{p:4},children:[e.jsxs(R,{display:"flex",alignItems:"center",justifyContent:"center",mb:3,children:[e.jsx(Rn,{sx:{mr:1,color:"primary.main"}}),e.jsx(u,{variant:"h4",component:"h1",color:"primary",children:"Sign Up"})]}),e.jsx(u,{variant:"body1",color:"text.secondary",align:"center",mb:3,children:"Create your Financial Dashboard account"}),T&&e.jsx(Se,{severity:"error",sx:{mb:2},children:T}),e.jsxs(R,{component:"form",onSubmit:w,noValidate:!0,children:[e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(be,{fullWidth:!0,id:"firstName",name:"firstName",label:"First Name",value:r.firstName,onChange:D,autoComplete:"given-name",disabled:x})}),e.jsx(v,{item:!0,xs:12,sm:6,children:e.jsx(be,{fullWidth:!0,id:"lastName",name:"lastName",label:"Last Name",value:r.lastName,onChange:D,autoComplete:"family-name",disabled:x})})]}),e.jsx(be,{fullWidth:!0,id:"username",name:"username",label:"Username",value:r.username,onChange:D,margin:"normal",required:!0,autoComplete:"username",disabled:x,helperText:"This will be your unique identifier for signing in"}),e.jsx(be,{fullWidth:!0,id:"email",name:"email",label:"Email Address",type:"email",value:r.email,onChange:D,margin:"normal",required:!0,autoComplete:"email",disabled:x,helperText:"We'll send verification instructions to this email"}),e.jsx(be,{fullWidth:!0,id:"password",name:"password",label:"Password",type:a?"text":"password",value:r.password,onChange:D,margin:"normal",required:!0,autoComplete:"new-password",disabled:x,helperText:"Must be at least 8 characters long",InputProps:{endAdornment:e.jsx(Pt,{position:"end",children:e.jsx(We,{"aria-label":"toggle password visibility",onClick:()=>o(!a),edge:"end",disabled:x,children:a?e.jsx(Xt,{}):e.jsx(es,{})})})}}),e.jsx(be,{fullWidth:!0,id:"confirmPassword",name:"confirmPassword",label:"Confirm Password",type:i?"text":"password",value:r.confirmPassword,onChange:D,margin:"normal",required:!0,autoComplete:"new-password",disabled:x,InputProps:{endAdornment:e.jsx(Pt,{position:"end",children:e.jsx(We,{"aria-label":"toggle confirm password visibility",onClick:()=>l(!i),edge:"end",disabled:x,children:i?e.jsx(Xt,{}):e.jsx(es,{})})})}}),e.jsx(te,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,py:1.5},disabled:x,startIcon:x?e.jsx(rt,{size:20}):e.jsx(Rn,{}),children:x?"Creating Account...":"Create Account"}),e.jsx(ys,{sx:{my:2}}),e.jsx(R,{textAlign:"center",children:e.jsxs(u,{variant:"body2",color:"text.secondary",children:["Already have an account?"," ",e.jsx(gs,{component:"button",type:"button",variant:"body2",onClick:t,disabled:x,sx:{fontWeight:"medium"},children:"Sign in here"})]})})]})]})})}function $m({username:t,onConfirmationSuccess:s,onSwitchToLogin:r}){const[n,a]=h.useState(""),[o,i]=h.useState(""),[l,c]=h.useState(""),[d,m]=h.useState(0),{confirmRegistration:x,resendConfirmationCode:y,isLoading:b,error:D,clearError:p}=At(),w=j=>{a(j.target.value),D&&p(),o&&i("")},T=async j=>{if(j.preventDefault(),i(""),!n){i("Please enter the confirmation code");return}const g=await x(t,n);g.success?s?.():g.error&&i(g.error)};h.useEffect(()=>{if(d>0){const j=setTimeout(()=>{m(d-1)},1e3);return()=>clearTimeout(j)}},[d]);const S=async()=>{i(""),c("");const j=await y(t);j.success?(c(j.message),m(60)):i(j.error)},_=D||o;return e.jsx(G,{sx:{maxWidth:400,mx:"auto",mt:4},children:e.jsxs(Q,{sx:{p:4},children:[e.jsxs(R,{display:"flex",alignItems:"center",justifyContent:"center",mb:3,children:[e.jsx(ds,{sx:{mr:1,color:"primary.main"}}),e.jsx(u,{variant:"h4",component:"h1",color:"primary",children:"Verify Account"})]}),e.jsx(u,{variant:"body1",color:"text.secondary",align:"center",mb:3,children:"Enter the verification code sent to your email address"}),_&&e.jsx(Se,{severity:"error",sx:{mb:2},children:_}),l&&e.jsx(Se,{severity:"success",sx:{mb:2},children:l}),e.jsxs(R,{component:"form",onSubmit:T,noValidate:!0,children:[e.jsx(be,{fullWidth:!0,id:"confirmationCode",name:"confirmationCode",label:"Verification Code",type:"text",value:n,onChange:w,margin:"normal",required:!0,autoFocus:!0,disabled:b,placeholder:"Enter 6-digit code",inputProps:{maxLength:6}}),e.jsx(te,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,py:1.5},disabled:b,startIcon:b?e.jsx(rt,{size:20}):e.jsx(ds,{}),children:b?"Verifying...":"Verify Account"}),e.jsxs(R,{textAlign:"center",mt:2,children:[e.jsxs(u,{variant:"body2",color:"text.secondary",children:["Didn't receive the code?"," ",e.jsx(gs,{component:"button",type:"button",variant:"body2",onClick:S,disabled:b||d>0,sx:{fontWeight:"medium"},children:d>0?`Resend (${d}s)`:"Resend"})]}),e.jsx(u,{variant:"body2",color:"text.secondary",mt:1,children:e.jsx(gs,{component:"button",type:"button",variant:"body2",onClick:r,disabled:b,sx:{fontWeight:"medium"},children:"Back to Sign In"})})]})]})]})})}const Bm=({onBack:t})=>{const[s,r]=h.useState(""),[n,a]=h.useState(!1),[o,i]=h.useState(""),[l,c]=h.useState(""),{forgotPassword:d}=At(),m=async x=>{x.preventDefault(),a(!0),c(""),i("");try{const y=await d(s);y.success?i(y.message||"Reset code sent to your email"):c(y.error||"Failed to send password reset email.")}catch{c("Failed to send password reset email. Please try again.")}finally{a(!1)}};return e.jsxs(Ye,{elevation:3,sx:{p:4,maxWidth:400,width:"100%"},children:[e.jsx(u,{variant:"h4",gutterBottom:!0,align:"center",children:"Reset Password"}),e.jsx(u,{variant:"body2",color:"text.secondary",sx:{mb:3},align:"center",children:"Enter your email address and we'll send you a password reset link."}),l&&e.jsx(Se,{severity:"error",sx:{mb:2},children:l}),o&&e.jsx(Se,{severity:"success",sx:{mb:2},children:o}),e.jsxs(R,{component:"form",onSubmit:m,sx:{mt:1},children:[e.jsx(be,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,type:"email",value:s,onChange:x=>r(x.target.value),disabled:n}),e.jsx(te,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:n||!s,children:n?"Sending...":"Send Reset Email"}),e.jsx(te,{fullWidth:!0,variant:"text",onClick:t,disabled:n,children:"Back to Sign In"})]})]})};function zm({username:t,onPasswordResetSuccess:s,onSwitchToLogin:r}){const[n,a]=h.useState({confirmationCode:"",newPassword:"",confirmPassword:""}),[o,i]=h.useState(!1),[l,c]=h.useState(!1),[d,m]=h.useState(""),{confirmForgotPassword:x,isLoading:y,error:b,clearError:D}=At(),p=_=>{const{name:j,value:g}=_.target;a(f=>({...f,[j]:g})),b&&D(),d&&m("")},w=()=>!n.confirmationCode||!n.newPassword||!n.confirmPassword?(m("Please fill in all fields"),!1):n.newPassword!==n.confirmPassword?(m("Passwords do not match"),!1):(n.newPassword?.length||0)<8?(m("Password must be at least 8 characters long"),!1):!0,T=async _=>{if(_.preventDefault(),m(""),!w())return;const j=await x(t,n.confirmationCode,n.newPassword);j.success?s?.():j.error&&m(j.error)},S=b||d;return e.jsx(G,{sx:{maxWidth:400,mx:"auto",mt:4},children:e.jsxs(Q,{sx:{p:4},children:[e.jsxs(R,{display:"flex",alignItems:"center",justifyContent:"center",mb:3,children:[e.jsx(Mn,{sx:{mr:1,color:"primary.main"}}),e.jsx(u,{variant:"h4",component:"h1",color:"primary",children:"Set New Password"})]}),e.jsx(u,{variant:"body1",color:"text.secondary",align:"center",mb:3,children:"Enter the code from your email and choose a new password"}),S&&e.jsx(Se,{severity:"error",sx:{mb:2},children:S}),e.jsxs(R,{component:"form",onSubmit:T,noValidate:!0,children:[e.jsx(be,{fullWidth:!0,id:"confirmationCode",name:"confirmationCode",label:"Reset Code",type:"text",value:n.confirmationCode,onChange:p,margin:"normal",required:!0,autoFocus:!0,disabled:y,placeholder:"Enter 6-digit code",inputProps:{maxLength:6}}),e.jsx(be,{fullWidth:!0,id:"newPassword",name:"newPassword",label:"New Password",type:o?"text":"password",value:n.newPassword,onChange:p,margin:"normal",required:!0,disabled:y,autoComplete:"new-password",helperText:"Must be at least 8 characters long",InputProps:{endAdornment:e.jsx(Pt,{position:"end",children:e.jsx(We,{"aria-label":"toggle password visibility",onClick:()=>i(!o),edge:"end",disabled:y,children:o?e.jsx(Xt,{}):e.jsx(es,{})})})}}),e.jsx(be,{fullWidth:!0,id:"confirmPassword",name:"confirmPassword",label:"Confirm New Password",type:l?"text":"password",value:n.confirmPassword,onChange:p,margin:"normal",required:!0,disabled:y,autoComplete:"new-password",InputProps:{endAdornment:e.jsx(Pt,{position:"end",children:e.jsx(We,{"aria-label":"toggle confirm password visibility",onClick:()=>c(!l),edge:"end",disabled:y,children:l?e.jsx(Xt,{}):e.jsx(es,{})})})}}),e.jsx(te,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,py:1.5},disabled:y,startIcon:y?e.jsx(rt,{size:20}):e.jsx(Mn,{}),children:y?"Resetting...":"Reset Password"}),e.jsx(R,{textAlign:"center",mt:2,children:e.jsx(u,{variant:"body2",color:"text.secondary",children:e.jsx(gs,{component:"button",type:"button",variant:"body2",onClick:r,disabled:y,sx:{fontWeight:"medium"},children:"Back to Sign In"})})})]})]})})}function Hm({challengeType:t="SMS_MFA",message:s="Please enter the verification code sent to your device.",onSuccess:r,onCancel:n}){const[a,o]=h.useState(""),[i,l]=h.useState(!1),[c,d]=h.useState(""),m=async y=>{if(y.preventDefault(),!a.trim()){d("Please enter the verification code");return}l(!0),d("");try{a==="123456"?r({username:"testuser",code:a,challengeType:t}):d("Invalid verification code. Please try again.")}catch{d("MFA verification failed. Please try again.")}finally{l(!1)}},x=()=>{switch(t){case"SMS_MFA":return"SMS Verification";case"SOFTWARE_TOKEN_MFA":return"Authenticator App";default:return"Multi-Factor Authentication"}};return e.jsxs(R,{sx:{p:3},children:[e.jsxs(R,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(ls,{sx:{mr:1,color:"primary.main"}}),e.jsx(u,{variant:"h6",component:"h2",children:x()})]}),e.jsx(u,{variant:"body2",color:"text.secondary",mb:3,children:s}),c&&e.jsx(Se,{severity:"error",sx:{mb:2},children:c}),e.jsxs("form",{onSubmit:m,children:[e.jsx(be,{fullWidth:!0,label:"Verification Code",value:a,onChange:y=>o(y.target.value),placeholder:"Enter 6-digit code",inputProps:{maxLength:6,pattern:"[0-9]{6}"},InputProps:{startAdornment:e.jsx(Pt,{position:"start",children:e.jsx(ls,{})})},sx:{mb:3},required:!0}),e.jsxs(R,{display:"flex",gap:2,justifyContent:"flex-end",children:[e.jsx(te,{variant:"outlined",onClick:n,disabled:i,children:"Cancel"}),e.jsx(te,{type:"submit",variant:"contained",disabled:i||!a.trim(),children:i?"Verifying...":"Verify"})]})]}),e.jsx(u,{variant:"caption",display:"block",textAlign:"center",mt:2,children:"Didn't receive a code? Check your spam folder or try again."})]})}const Ae={LOGIN:"login",REGISTER:"register",CONFIRM:"confirm",FORGOT_PASSWORD:"forgot_password",RESET_PASSWORD:"reset_password",MFA_CHALLENGE:"mfa_challenge"};function Gm({open:t,onClose:s,initialMode:r=Ae.LOGIN,email:n="",onSuccess:a}){const[o,i]=h.useState(r),[l,c]=h.useState(n),[d,m]=h.useState(""),x=(_,j)=>{c(_),m("Registration successful! Please check your email for a verification code."),i(Ae.CONFIRM)},y=()=>{m("Account confirmed! You can now sign in."),i(Ae.LOGIN)},b=_=>{c(_),m("Password reset code sent! Please check your email."),i(Ae.RESET_PASSWORD)},D=()=>{m("Password reset successful! You can now sign in with your new password."),i(Ae.LOGIN),a?.()},p=_=>{m("Multi-factor authentication successful!"),i(Ae.LOGIN),console.log("MFA Success:",_)},w=()=>{i(Ae.LOGIN)},T=()=>{i(r),c(""),m(""),s()},S=()=>{switch(o){case Ae.LOGIN:return"Sign In";case Ae.REGISTER:return"Create Account";case Ae.CONFIRM:return"Verify Account";case Ae.FORGOT_PASSWORD:return"Reset Password";case Ae.RESET_PASSWORD:return"Set New Password";case Ae.MFA_CHALLENGE:return"Multi-Factor Authentication";default:return"Authentication"}};return e.jsxs(kt,{open:t,onClose:T,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[e.jsxs(R,{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,borderBottom:1,borderColor:"divider",children:[e.jsx(u,{variant:"h6",component:"h2",children:S()}),e.jsx(We,{onClick:T,size:"small","aria-label":"close",children:e.jsx(vi,{})})]}),e.jsxs(Et,{sx:{p:0},children:[d&&e.jsx(Se,{severity:"success",sx:{m:2,mb:0},children:d}),o===Ae.LOGIN&&e.jsx(Wm,{onSwitchToRegister:()=>{m(""),i(Ae.REGISTER)},onSwitchToForgotPassword:()=>{m(""),i(Ae.FORGOT_PASSWORD)}}),o===Ae.REGISTER&&e.jsx(Um,{onSwitchToLogin:()=>{m(""),i(Ae.LOGIN)},onRegistrationSuccess:x}),o===Ae.CONFIRM&&e.jsx($m,{username:l,onConfirmationSuccess:y,onSwitchToLogin:()=>{m(""),i(Ae.LOGIN)}}),o===Ae.FORGOT_PASSWORD&&e.jsx(Bm,{onForgotPasswordSuccess:b,onSwitchToLogin:()=>{m(""),i(Ae.LOGIN)}}),o===Ae.RESET_PASSWORD&&e.jsx(zm,{username:l,onPasswordResetSuccess:D,onSwitchToLogin:()=>{m(""),i(Ae.LOGIN)}}),o===Ae.MFA_CHALLENGE&&e.jsx(Hm,{challengeType:"SMS_MFA",message:"Please enter the verification code sent to your device.",onSuccess:p,onCancel:w})]})]})}function qs({children:t,_requireAuth:s=!1,_fallback:r=null}){return t}class za extends tr.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static getDerivedStateFromError(s){return{hasError:!0,errorId:`ERR_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}componentDidCatch(s,r){const n=r&&r.componentStack;if(s&&s.message&&(s.message.includes("Network Error")||s.message.includes("fetch")||s.message.includes("ECONNREFUSED")||s.message.includes("timeout"))&&!n){console.warn("API/Network error caught by ErrorBoundary, but not showing error UI:",s);return}console.error("ErrorBoundary caught a React render error:",s,r),this.setState({error:s,errorInfo:r})}handleReload=()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorId:null}),window.location.reload()};handleGoHome=()=>{window.location.href="/"};render(){return this.state.hasError?e.jsx(R,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"grey.50",p:3},children:e.jsx(G,{sx:{maxWidth:600,width:"100%"},children:e.jsx(Q,{sx:{p:4},children:e.jsxs(On,{spacing:3,alignItems:"center",textAlign:"center",children:[e.jsx(ji,{"data-testid":"ErrorOutlineIcon",sx:{fontSize:64,color:"error.main"}}),e.jsxs(R,{children:[e.jsx(u,{variant:"h4",fontWeight:700,gutterBottom:!0,children:"Something went wrong"}),e.jsx(u,{variant:"body1",color:"text.secondary",sx:{mb:2},children:"We apologize for the inconvenience. An unexpected error has occurred in our financial dashboard application."})]}),!1,e.jsxs(Se,{severity:"info",sx:{width:"100%"},children:[e.jsxs(u,{variant:"body2",children:[e.jsx("strong",{children:"Error ID:"})," ",this.state.errorId]}),e.jsx(u,{variant:"caption",color:"text.secondary",children:"Please provide this ID when contacting support for faster assistance."})]}),e.jsx(ys,{sx:{width:"100%"}}),e.jsxs(On,{direction:"row",spacing:2,children:[e.jsx(te,{variant:"contained",startIcon:e.jsx(Ft,{}),onClick:this.handleReload,size:"large",children:"Try Again"}),e.jsx(te,{variant:"outlined",startIcon:e.jsx(wi,{}),onClick:this.handleGoHome,size:"large",children:"Go Home"})]}),e.jsxs(R,{sx:{mt:2},children:[e.jsx(u,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"If this problem persists, please contact our support team:"}),e.jsx(te,{variant:"text",startIcon:e.jsx(Si,{}),size:"small",href:"mailto:support@edgebrooke.com",children:"support@edgebrooke.com"})]}),e.jsx(R,{sx:{mt:3,pt:2,borderTop:1,borderColor:"divider",width:"100%"},children:e.jsxs(u,{variant:"caption",color:"text.secondary",textAlign:"center",children:["Edgebrooke Capital Financial Dashboard",e.jsx("br",{}),"Enterprise-grade financial data platform for professional investors"]})})]})})})}):this.props.children}}const qm=()=>{const t=ln();return tr.useEffect(()=>{t("/portfolio",{replace:!0})},[t]),null},Km=()=>{const t=At(),[s,r]=h.useState([]),n=l=>{const d=`${new Date().toLocaleTimeString()}: ${l}`;r(m=>[...m,d])};h.useEffect(()=>{n("AuthTest component mounted"),n(`Initial auth state: loading=${t.isLoading}, authenticated=${t.isAuthenticated}`)},[]),h.useEffect(()=>{n(`Auth state changed: loading=${t.isLoading}, authenticated=${t.isAuthenticated}, user=${t.user?.username||"none"}`)},[t.isLoading,t.isAuthenticated,t.user]);const a=async()=>{n("Attempting to login with test user...");try{const l=await t.login("testuser","testpass");n(`Login result: ${JSON.stringify(l)}`)}catch(l){n(`Login error: ${l.message}`)}},o=async()=>{n("Attempting to logout...");try{await t.logout(),n("Logout successful")}catch(l){n(`Logout error: ${l.message}`)}},i=async()=>{n("Manually checking auth state...");try{await t.checkAuthState(),n("Auth state check completed")}catch(l){n(`Auth state check error: ${l.message}`)}};return e.jsxs(ot,{maxWidth:"md",children:[e.jsx(u,{variant:"h4",gutterBottom:!0,children:"Authentication Test Page"}),e.jsx(G,{sx:{mb:3},children:e.jsxs(Q,{children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"Current Auth State:"}),e.jsxs(u,{children:["Loading: ",t.isLoading?" Yes":" No"]}),e.jsxs(u,{children:["Authenticated: ",t.isAuthenticated?" Yes":" No"]}),e.jsxs(u,{children:["User: ",t.user?` ${t.user.username}`:" None"]}),e.jsxs(u,{children:["Error: ",t.error||" None"]}),e.jsxs(u,{children:["Tokens: ",t.tokens?" Present":" None"]}),e.jsxs(R,{sx:{mt:2,display:"flex",gap:1,flexWrap:"wrap"},children:[e.jsx(te,{onClick:a,variant:"contained",size:"small",children:"Login Test User"}),e.jsx(te,{onClick:o,variant:"outlined",size:"small",children:"Logout"}),e.jsx(te,{onClick:i,variant:"outlined",size:"small",children:"Check Auth State"})]})]})}),e.jsx(G,{sx:{mb:3},children:e.jsxs(Q,{children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"Local Storage Tokens:"}),e.jsxs(u,{children:["accessToken:"," ",localStorage.getItem("accessToken")?" Present":" Missing"]}),e.jsxs(u,{children:["authToken:"," ",localStorage.getItem("authToken")?" Present":" Missing"]})]})}),e.jsx(G,{children:e.jsxs(Q,{children:[e.jsxs(u,{variant:"h6",gutterBottom:!0,children:["Debug Log (",s?.length||0," entries):"]}),e.jsx(R,{sx:{maxHeight:300,overflow:"auto",bgcolor:"grey.50",p:1},children:(s||[]).map((l,c)=>e.jsx(u,{variant:"body2",sx:{fontFamily:"monospace",marginBottom:"2px",fontSize:"0.75rem"},children:l},c))}),e.jsx(te,{onClick:()=>r([]),variant:"outlined",size:"small",sx:{mt:1},children:"Clear Log"})]})})]})},is=240,Eo=[{text:"Portfolio Holdings",icon:e.jsx(Ao,{}),path:"/portfolio",category:"portfolio"},{text:"Trade History",icon:e.jsx(Fo,{}),path:"/trade-history",category:"portfolio"},{text:"Optimization Tools",icon:e.jsx(No,{}),path:"/optimizer",category:"portfolio",premium:!0},{text:"Settings",icon:e.jsx(Wo,{}),path:"/settings",category:"tools"},{text:"Health",icon:e.jsx(ki,{}),path:"/service-health",category:"tools"}];function Ym(){console.log(" APP COMPONENT: Starting App component render...");const[t,s]=h.useState(!1),[r,n]=h.useState(!1),[a,o]=h.useState(null),[i,l]=h.useState({markets:!0,stocks:!0,sentiment:!1,portfolio:!0,research:!1,tools:!0});console.log(" APP COMPONENT: State initialized");const c=Dt();console.log(" APP COMPONENT: Theme loaded:",c?"":"");const d=sr(c.breakpoints.down("md"));console.log(" APP COMPONENT: isMobile:",d),console.log(" APP COMPONENT: About to call useAuth...");const{isAuthenticated:m,user:x,logout:y}=At();console.log(" APP COMPONENT: Auth state loaded - isAuthenticated:",m,"user:",x);const b=ln();console.log(" APP COMPONENT: Navigate loaded");const D=an();console.log(" APP COMPONENT: Location loaded:",D?.pathname),h.useEffect(()=>{m&&r&&n(!1)},[m,r]);const p=()=>{s(!t)},w=P=>{o(P.currentTarget)},T=()=>{o(null)},S=async()=>{T(),await y()},_=P=>{b(P),d&&s(!1)},j=P=>{l(k=>({...k,[P]:!k[P]}))},g=Eo.reduce((P,k)=>(P[k.category]||(P[k.category]=[]),P[k.category].push(k),P),{}),f={main:"Dashboard",markets:"Markets",stocks:"Stocks",sentiment:"Sentiment Analysis",portfolio:"Portfolio",research:"Research & Education",tools:"Tools"},C=e.jsxs("div",{children:[e.jsx(Sr,{children:e.jsx(u,{variant:"h6",noWrap:!0,component:"div",sx:{fontWeight:700,color:"primary.main"},children:"Financial Platform"})}),e.jsx(Qs,{sx:{px:1},children:Object.entries(g).map(([P,k])=>e.jsx(tr.Fragment,{children:P==="main"?(k||[]).map(M=>e.jsx(qt,{disablePadding:!0,sx:{mb:1},children:e.jsxs(Cr,{selected:D.pathname===M.path,onClick:()=>_(M.path,M.premium),sx:{borderRadius:1,"&.Mui-selected":{backgroundColor:c.palette.primary.main+"20","& .MuiListItemIcon-root":{color:c.palette.primary.main},"& .MuiListItemText-primary":{color:c.palette.primary.main,fontWeight:600}}},children:[e.jsx(Ur,{children:M.icon}),e.jsx(us,{primary:M.text})]})},M.text)):e.jsxs(e.Fragment,{children:[e.jsx(qt,{disablePadding:!0,children:e.jsxs(Cr,{onClick:()=>j(P),"aria-label":`${i[P]?"Collapse":"Expand"} ${f[P]} section`,sx:{py:.5,"&:hover":{backgroundColor:"transparent"}},children:[e.jsx(us,{primary:f[P],primaryTypographyProps:{variant:"subtitle2",fontWeight:600,color:"text.secondary",textTransform:"uppercase",letterSpacing:.5}}),i[P]?e.jsx(Ci,{}):e.jsx(Ys,{})]})}),i[P]&&(k||[]).map(M=>e.jsx(qt,{disablePadding:!0,sx:{pl:2},children:e.jsxs(Cr,{selected:D.pathname===M.path,onClick:()=>_(M.path,M.premium),disabled:!1,sx:{borderRadius:1,py:.5,"&.Mui-selected":{backgroundColor:c.palette.primary.main+"20","& .MuiListItemIcon-root":{color:c.palette.primary.main},"& .MuiListItemText-primary":{color:c.palette.primary.main,fontWeight:600}},"&.Mui-disabled":{opacity:.6}},children:[e.jsx(Ur,{sx:{minWidth:36},children:M.icon}),e.jsx(us,{primary:M.text,primaryTypographyProps:{variant:"body2"}})]})},M.text))]})},P))})]});return console.log(" APP COMPONENT: About to render JSX..."),e.jsx(za,{children:e.jsxs(R,{sx:{display:"flex",width:"100%",overflowX:"hidden"},children:[e.jsx(Pi,{position:"fixed",sx:{width:{md:`calc(100% - ${is}px)`},ml:{md:`${is}px`},backgroundColor:"white",color:"text.primary",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:e.jsxs(Sr,{children:[e.jsx(We,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:p,sx:{mr:2,display:{md:"none"}},children:e.jsx(Di,{})}),e.jsx(u,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1,mr:2,pointerEvents:"none"},children:Eo.find(P=>P.path===D.pathname)?.text||"Dashboard"}),m?e.jsxs(e.Fragment,{children:[e.jsx(We,{onClick:w,size:"large",edge:"end",color:"inherit",children:e.jsx(Vo,{sx:{width:32,height:32,bgcolor:"primary.main"},children:x?.username?.[0]?.toUpperCase()||"U"})}),e.jsxs(Ti,{anchorEl:a,open:!!a,onClose:T,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsxs(ee,{onClick:T,children:[e.jsx(Lo,{sx:{mr:1}}),x?.username||"User"]}),e.jsx(ys,{}),e.jsxs(ee,{onClick:()=>{T(),b("/settings")},children:[e.jsx(Wo,{sx:{mr:1}}),"Settings"]}),e.jsxs(ee,{onClick:S,children:[e.jsx(_i,{sx:{mr:1}}),"Sign Out"]})]})]}):e.jsx(te,{color:"inherit",startIcon:e.jsx($r,{}),onClick:()=>n(!0),sx:{ml:2,zIndex:1e3,position:"relative",flexShrink:0},"data-testid":"auth-sign-in-button",children:"Sign In"})]})}),e.jsxs(R,{component:"nav",sx:{width:{md:is},flexShrink:{md:0}},children:[e.jsx(Fn,{variant:"temporary",open:t,onClose:p,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",md:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:is}},children:C}),e.jsx(Fn,{variant:"permanent",sx:{display:{xs:"none",md:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:is}},open:!0,children:C})]}),e.jsxs(R,{component:"main",sx:{flexGrow:1,p:{xs:1,sm:2,md:3},width:{xs:"100%",md:`calc(100% - ${is}px)`},backgroundColor:c.palette.background.default,minHeight:"100vh",overflowX:"hidden"},children:[e.jsx(Sr,{}),e.jsx(ot,{maxWidth:"xl",sx:{px:{xs:1,sm:2,md:3}},children:e.jsxs(Cc,{children:[e.jsx(_t,{path:"/",element:e.jsx(qm,{})}),e.jsx(_t,{path:"/portfolio",element:e.jsx(qs,{children:e.jsx(Kd,{})})}),e.jsx(_t,{path:"/trade-history",element:e.jsx(qs,{children:e.jsx(Om,{})})}),e.jsx(_t,{path:"/optimizer",element:e.jsx(qs,{children:e.jsx(Yd,{})})}),e.jsx(_t,{path:"/metrics",element:e.jsx(yd,{})}),e.jsx(_t,{path:"/service-health",element:e.jsx(bd,{})}),e.jsx(_t,{path:"/settings",element:e.jsx(qs,{children:e.jsx(Vm,{})})}),e.jsx(_t,{path:"/auth-test",element:e.jsx(Km,{})})]})})]}),e.jsx(Gm,{open:r,onClose:()=>n(!1)})]})})}const Ot=Ba("Main");window.addEventListener("error",function(t){const s={filename:t.filename,lineno:t.lineno,colno:t.colno,userAgent:navigator.userAgent,url:window.location.href,timestamp:new Date().toISOString()};return Ot.error("WindowError",t.error||new Error(t.message),s),!1},!0);window.addEventListener("unhandledrejection",function(t){const s={url:window.location.href,timestamp:new Date().toISOString(),promiseState:"rejected"};return Ot.error("UnhandledPromiseRejection",t.reason,s),!1});"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(function(t){for(let s of t)s.unregister().then(function(r){})}).catch(function(t){console.error("Service Worker unregistration failed:",t)});"caches"in window&&caches.keys().then(function(t){return Promise.all((t||[]).map(function(s){return caches.delete(s)}))}).then(function(){}).catch(function(t){console.error("Cache clearing failed:",t)});window.__CONFIG__||setTimeout(()=>{},1e3);kd();const Qm=Ei({palette:{mode:"light",primary:{main:"#1976d2",light:"#42a5f5",dark:"#1565c0"},secondary:{main:"#dc004e",light:"#ff5983",dark:"#9a0036"},background:{default:"#f5f5f5",paper:"#ffffff"},success:{main:"#2e7d32",light:"#4caf50",dark:"#1b5e20"},error:{main:"#d32f2f",light:"#ef5350",dark:"#c62828"},warning:{main:"#b7700d",light:"#d4951a",dark:"#8a5409"},info:{main:"#0277bd",light:"#29b6f6",dark:"#01579b"}},typography:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif',h1:{fontWeight:600},h2:{fontWeight:600},h3:{fontWeight:600},h4:{fontWeight:600},h5:{fontWeight:600},h6:{fontWeight:600}},components:{MuiButton:{styleOverrides:{root:{textTransform:"none",fontWeight:500,minWidth:"44px",minHeight:"44px","&:focus":{outline:"3px solid #1976d2",outlineOffset:"2px",boxShadow:"0 0 0 3px rgba(25, 118, 210, 0.3)"},"&:focus-visible":{outline:"3px solid #1976d2",outlineOffset:"2px",boxShadow:"0 0 0 3px rgba(25, 118, 210, 0.3)"}}}},MuiIconButton:{styleOverrides:{root:{minWidth:"44px",minHeight:"44px","&:focus":{outline:"3px solid #1976d2",outlineOffset:"2px",boxShadow:"0 0 0 3px rgba(25, 118, 210, 0.3)"},"&:focus-visible":{outline:"3px solid #1976d2",outlineOffset:"2px",boxShadow:"0 0 0 3px rgba(25, 118, 210, 0.3)"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{"&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"#1976d2",borderWidth:"2px"}},"&:focus-within":{outline:"3px solid rgba(25, 118, 210, 0.3)",outlineOffset:"2px"}}}}},MuiCard:{styleOverrides:{root:{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",borderRadius:12}}},MuiPaper:{styleOverrides:{root:{borderRadius:12}}},MuiChip:{styleOverrides:{root:{minHeight:"32px","& .MuiChip-label":{paddingLeft:"12px",paddingRight:"12px"}}}}}}),Zm=new Zc({defaultOptions:{queries:{staleTime:300*1e3,cacheTime:600*1e3,refetchOnWindowFocus:!1,retry:(t,s)=>s.status===404?!1:t<3}}}),Jm=document.getElementById("root");Jm||(console.error(" Root element not found!"),alert("Root element not found!"));try{Ot.info("React application initialization starting");const t=document.getElementById("root");if(!t)throw new Error("Root element not found in DOM");const s=Al.createRoot(t);Ot.info("React root created successfully"),s.render(e.jsx(za,{children:e.jsx(Tc,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(Xc,{client:Zm,children:e.jsxs(Ii,{theme:Qm,children:[e.jsx(Ai,{}),e.jsx(Od,{children:e.jsx(Ym,{})})]})})})})),Ot.success("React application render initiated"),setTimeout(()=>{const r=document.getElementById("root");r&&r.innerHTML.trim()===""?Ot.error("EmptyRender",new Error("React rendered but root is empty"),{innerHTML:r.innerHTML,config:window.__CONFIG__,timestamp:new Date().toISOString()}):r&&Ot.success("React application rendered successfully",{contentLength:r.innerHTML.length,hasContent:r.innerHTML.length>0})},2e3)}catch(t){Ot.error("ReactInitialization",t,{phase:"main_render",config:window.__CONFIG__,userAgent:navigator.userAgent}),alert("Application failed to start. Please refresh the page or contact support.")}
//# sourceMappingURL=index-Cqz34miI.js.map
