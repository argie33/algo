70d5dad3a84d1b5aaf0ac631efdb07af
/**
 * Security Service
 * Central security management and event monitoring
 */

const crypto = require('crypto');
const EventEmitter = require('events');
class SecurityService extends EventEmitter {
  constructor() {
    super();
    this.securityEvents = [];
    this.threatLevel = 'low'; // low, medium, high, critical
    this.maxEventHistory = 10000;
    this.alertThresholds = {
      failedLogins: {
        count: 10,
        timeWindow: 300000
      },
      // 10 in 5 minutes
      suspiciousIPs: {
        count: 5,
        timeWindow: 600000
      },
      // 5 in 10 minutes
      rateLimitViolations: {
        count: 20,
        timeWindow: 300000
      },
      // 20 in 5 minutes
      authenticationAnomalies: {
        count: 3,
        timeWindow: 900000
      } // 3 in 15 minutes
    };

    // Security metrics
    this.metrics = {
      totalEvents: 0,
      criticalEvents: 0,
      blockedAttacks: 0,
      lastThreatAssessment: Date.now()
    };

    // Automated threat response
    this.automatedResponse = {
      enabled: true,
      autoBlock: true,
      alertAdmin: true
    };

    // Start monitoring
    this.startEventProcessor();
  }

  /**
   * Log security event
   */
  logSecurityEvent(eventType, severity, details, req = null) {
    const event = {
      id: crypto.randomUUID(),
      timestamp: Date.now(),
      eventType,
      severity,
      // info, warning, critical
      details,
      sourceIP: req?.ip || req?.connection?.remoteAddress || 'unknown',
      userAgent: req?.get('User-Agent') || 'unknown',
      userId: req?.user?.userId || req?.userId || null,
      sessionId: req?.sessionId || null,
      correlationId: req?.correlationId || null,
      processed: false
    };
    this.securityEvents.push(event);
    this.metrics.totalEvents++;
    if (severity === 'critical') {
      this.metrics.criticalEvents++;
    }

    // Emit event for real-time processing
    this.emit('securityEvent', event);

    // Trim old events to prevent memory issues
    if (this.securityEvents.length > this.maxEventHistory) {
      this.securityEvents = this.securityEvents.slice(-this.maxEventHistory);
    }
    console.log(`🔒 Security event logged: ${eventType} [${severity}] from ${event.sourceIP}`);
    return event.id;
  }

  /**
   * Process security events and detect patterns
   */
  startEventProcessor() {
    setInterval(() => {
      this.processSecurityEvents();
      this.assessThreatLevel();
    }, 30000); // Every 30 seconds
  }

  /**
   * Process recent security events for patterns
   */
  processSecurityEvents() {
    const currentTime = Date.now();
    const recentEvents = this.securityEvents.filter(event => currentTime - event.timestamp < 900000 && !event.processed);

    // Group events by type and IP
    const eventsByType = {};
    const eventsByIP = {};
    recentEvents.forEach(event => {
      // By type
      if (!eventsByType[event.eventType]) {
        eventsByType[event.eventType] = [];
      }
      eventsByType[event.eventType].push(event);

      // By IP
      if (!eventsByIP[event.sourceIP]) {
        eventsByIP[event.sourceIP] = [];
      }
      eventsByIP[event.sourceIP].push(event);

      // Mark as processed
      event.processed = true;
    });

    // Check for threshold violations
    this.checkThresholds(eventsByType, eventsByIP);
  }

  /**
   * Check if events exceed alert thresholds
   */
  checkThresholds(eventsByType, eventsByIP) {
    const currentTime = Date.now();

    // Check event type thresholds
    for (const [eventType, events] of Object.entries(eventsByType)) {
      const threshold = this.alertThresholds[eventType];
      if (!threshold) continue;
      const recentEvents = events.filter(event => currentTime - event.timestamp < threshold.timeWindow);
      if (recentEvents.length >= threshold.count) {
        this.triggerAlert('threshold_exceeded', {
          eventType,
          count: recentEvents.length,
          threshold: threshold.count,
          timeWindow: threshold.timeWindow,
          events: recentEvents.map(e => ({
            id: e.id,
            timestamp: e.timestamp,
            sourceIP: e.sourceIP
          }))
        });
      }
    }

    // Check IP-based patterns
    for (const [ip, events] of Object.entries(eventsByIP)) {
      // Multiple event types from same IP
      const eventTypes = new Set(events.map(e => e.eventType));
      if (eventTypes.size >= 3 && events.length >= 5) {
        this.triggerAlert('multi_vector_attack', {
          sourceIP: ip,
          eventTypes: Array.from(eventTypes),
          totalEvents: events.length,
          timeSpan: Math.max(...events.map(e => e.timestamp)) - Math.min(...events.map(e => e.timestamp))
        });
      }

      // High frequency from single IP
      if (events.length >= 15) {
        this.triggerAlert('high_frequency_attack', {
          sourceIP: ip,
          eventCount: events.length,
          timeSpan: Math.max(...events.map(e => e.timestamp)) - Math.min(...events.map(e => e.timestamp))
        });
      }
    }
  }

  /**
   * Trigger security alert
   */
  triggerAlert(alertType, details) {
    const alert = {
      id: crypto.randomUUID(),
      timestamp: Date.now(),
      alertType,
      details,
      severity: this.getAlertSeverity(alertType),
      acknowledged: false,
      responseActions: []
    };
    console.warn(`🚨 Security alert triggered: ${alertType}`, details);

    // Take automated response if enabled
    if (this.automatedResponse.enabled) {
      this.takeAutomatedResponse(alert);
    }

    // Emit alert for external processing
    this.emit('securityAlert', alert);
    return alert.id;
  }

  /**
   * Take automated response to security threats
   */
  takeAutomatedResponse(alert) {
    const actions = [];
    switch (alert.alertType) {
      case 'threshold_exceeded':
        if (alert.details.eventType === 'failedLogins' && this.automatedResponse.autoBlock) {
          // Could trigger temporary IP blocks
          actions.push('rate_limit_increased');
        }
        break;
      case 'multi_vector_attack':
      case 'high_frequency_attack':
        if (this.automatedResponse.autoBlock) {
          // Could trigger IP blacklisting
          actions.push('ip_blocked');
          this.metrics.blockedAttacks++;
        }
        break;
    }
    alert.responseActions = actions;
    if (actions.length > 0) {
      console.log(`🛡️ Automated response taken for ${alert.alertType}: ${actions.join(', ')}`);
    }
  }

  /**
   * Get alert severity based on type
   */
  getAlertSeverity(alertType) {
    const severityMap = {
      threshold_exceeded: 'medium',
      multi_vector_attack: 'high',
      high_frequency_attack: 'high',
      data_breach_attempt: 'critical',
      unauthorized_access: 'critical',
      privilege_escalation: 'critical'
    };
    return severityMap[alertType] || 'medium';
  }

  /**
   * Assess overall threat level
   */
  assessThreatLevel() {
    const currentTime = Date.now();
    const lastHour = currentTime - 60 * 60 * 1000;
    const recentEvents = this.securityEvents.filter(event => event.timestamp > lastHour);
    const criticalEvents = recentEvents.filter(e => e.severity === 'critical').length;
    const warningEvents = recentEvents.filter(e => e.severity === 'warning').length;
    const totalEvents = recentEvents.length;
    let newThreatLevel = 'low';
    if (criticalEvents >= 5 || totalEvents >= 100) {
      newThreatLevel = 'critical';
    } else if (criticalEvents >= 2 || warningEvents >= 10 || totalEvents >= 50) {
      newThreatLevel = 'high';
    } else if (criticalEvents >= 1 || warningEvents >= 5 || totalEvents >= 20) {
      newThreatLevel = 'medium';
    }
    if (newThreatLevel !== this.threatLevel) {
      console.warn(`🎯 Threat level changed: ${this.threatLevel} → ${newThreatLevel}`);
      this.threatLevel = newThreatLevel;
      this.emit('threatLevelChanged', {
        from: this.threatLevel,
        to: newThreatLevel
      });
    }
    this.metrics.lastThreatAssessment = currentTime;
  }

  /**
   * Get security dashboard data
   */
  getSecurityDashboard() {
    const currentTime = Date.now();
    const last24Hours = currentTime - 24 * 60 * 60 * 1000;
    const lastHour = currentTime - 60 * 60 * 1000;
    const recent24h = this.securityEvents.filter(e => e.timestamp > last24Hours);
    const recent1h = this.securityEvents.filter(e => e.timestamp > lastHour);

    // Event type breakdown
    const eventTypes = {};
    recent24h.forEach(event => {
      eventTypes[event.eventType] = (eventTypes[event.eventType] || 0) + 1;
    });

    // Severity breakdown
    const severities = {
      info: 0,
      warning: 0,
      critical: 0
    };
    recent24h.forEach(event => {
      severities[event.severity] = (severities[event.severity] || 0) + 1;
    });

    // Top source IPs
    const sourceIPs = {};
    recent24h.forEach(event => {
      sourceIPs[event.sourceIP] = (sourceIPs[event.sourceIP] || 0) + 1;
    });
    const topIPs = Object.entries(sourceIPs).sort(([, a], [, b]) => b - a).slice(0, 10).map(([ip, count]) => ({
      ip,
      count
    }));
    return {
      threatLevel: this.threatLevel,
      metrics: this.metrics,
      timeline: {
        last24Hours: recent24h.length,
        lastHour: recent1h.length,
        eventsPerHour: Math.round(recent24h.length / 24)
      },
      breakdown: {
        eventTypes,
        severities,
        topSourceIPs: topIPs
      },
      recentEvents: this.securityEvents.filter(e => e.timestamp > lastHour).sort((a, b) => b.timestamp - a.timestamp).slice(0, 50).map(e => ({
        id: e.id,
        timestamp: e.timestamp,
        eventType: e.eventType,
        severity: e.severity,
        sourceIP: e.sourceIP,
        details: e.details
      }))
    };
  }

  /**
   * Export security events for analysis
   */
  exportSecurityEvents(startTime, endTime, format = 'json') {
    const filteredEvents = this.securityEvents.filter(event => event.timestamp >= startTime && event.timestamp <= endTime);
    if (format === 'csv') {
      const csvHeader = 'timestamp,eventType,severity,sourceIP,userAgent,userId,details\n';
      const csvRows = filteredEvents.map(event => `${event.timestamp},${event.eventType},${event.severity},${event.sourceIP},"${event.userAgent}",${event.userId || ''},"${JSON.stringify(event.details).replace(/"/g, '""')}"`).join('\n');
      return csvHeader + csvRows;
    }
    return {
      exportTime: Date.now(),
      timeRange: {
        startTime,
        endTime
      },
      eventCount: filteredEvents.length,
      events: filteredEvents
    };
  }

  /**
   * Clear old security events
   */
  clearOldEvents(olderThan = 7 * 24 * 60 * 60 * 1000) {
    // 7 days default
    const cutoffTime = Date.now() - olderThan;
    const initialCount = this.securityEvents.length;
    this.securityEvents = this.securityEvents.filter(event => event.timestamp > cutoffTime);
    const removedCount = initialCount - this.securityEvents.length;
    if (removedCount > 0) {
      console.log(`🧹 Removed ${removedCount} old security events`);
    }
    return removedCount;
  }

  /**
   * Get security metrics summary
   */
  getMetrics() {
    const currentTime = Date.now();
    const last24Hours = currentTime - 24 * 60 * 60 * 1000;
    const recentEvents = this.securityEvents.filter(event => event.timestamp > last24Hours);
    return {
      ...this.metrics,
      threatLevel: this.threatLevel,
      recentEventCount: recentEvents.length,
      averageEventsPerHour: Math.round(recentEvents.length / 24),
      criticalEventRate: recentEvents.filter(e => e.severity === 'critical').length / recentEvents.length,
      topEventTypes: this.getTopEventTypes(recentEvents),
      lastAssessment: new Date(this.metrics.lastThreatAssessment).toISOString()
    };
  }

  /**
   * Get top event types from recent events
   */
  getTopEventTypes(events) {
    const eventTypes = {};
    events.forEach(event => {
      eventTypes[event.eventType] = (eventTypes[event.eventType] || 0) + 1;
    });
    return Object.entries(eventTypes).sort(([, a], [, b]) => b - a).slice(0, 5).map(([type, count]) => ({
      type,
      count
    }));
  }
}
module.exports = SecurityService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjcnlwdG8iLCJyZXF1aXJlIiwiRXZlbnRFbWl0dGVyIiwiU2VjdXJpdHlTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJzZWN1cml0eUV2ZW50cyIsInRocmVhdExldmVsIiwibWF4RXZlbnRIaXN0b3J5IiwiYWxlcnRUaHJlc2hvbGRzIiwiZmFpbGVkTG9naW5zIiwiY291bnQiLCJ0aW1lV2luZG93Iiwic3VzcGljaW91c0lQcyIsInJhdGVMaW1pdFZpb2xhdGlvbnMiLCJhdXRoZW50aWNhdGlvbkFub21hbGllcyIsIm1ldHJpY3MiLCJ0b3RhbEV2ZW50cyIsImNyaXRpY2FsRXZlbnRzIiwiYmxvY2tlZEF0dGFja3MiLCJsYXN0VGhyZWF0QXNzZXNzbWVudCIsIkRhdGUiLCJub3ciLCJhdXRvbWF0ZWRSZXNwb25zZSIsImVuYWJsZWQiLCJhdXRvQmxvY2siLCJhbGVydEFkbWluIiwic3RhcnRFdmVudFByb2Nlc3NvciIsImxvZ1NlY3VyaXR5RXZlbnQiLCJldmVudFR5cGUiLCJzZXZlcml0eSIsImRldGFpbHMiLCJyZXEiLCJldmVudCIsImlkIiwicmFuZG9tVVVJRCIsInRpbWVzdGFtcCIsInNvdXJjZUlQIiwiaXAiLCJjb25uZWN0aW9uIiwicmVtb3RlQWRkcmVzcyIsInVzZXJBZ2VudCIsImdldCIsInVzZXJJZCIsInVzZXIiLCJzZXNzaW9uSWQiLCJjb3JyZWxhdGlvbklkIiwicHJvY2Vzc2VkIiwicHVzaCIsImVtaXQiLCJsZW5ndGgiLCJzbGljZSIsImNvbnNvbGUiLCJsb2ciLCJzZXRJbnRlcnZhbCIsInByb2Nlc3NTZWN1cml0eUV2ZW50cyIsImFzc2Vzc1RocmVhdExldmVsIiwiY3VycmVudFRpbWUiLCJyZWNlbnRFdmVudHMiLCJmaWx0ZXIiLCJldmVudHNCeVR5cGUiLCJldmVudHNCeUlQIiwiZm9yRWFjaCIsImNoZWNrVGhyZXNob2xkcyIsImV2ZW50cyIsIk9iamVjdCIsImVudHJpZXMiLCJ0aHJlc2hvbGQiLCJ0cmlnZ2VyQWxlcnQiLCJtYXAiLCJlIiwiZXZlbnRUeXBlcyIsIlNldCIsInNpemUiLCJBcnJheSIsImZyb20iLCJ0aW1lU3BhbiIsIk1hdGgiLCJtYXgiLCJtaW4iLCJldmVudENvdW50IiwiYWxlcnRUeXBlIiwiYWxlcnQiLCJnZXRBbGVydFNldmVyaXR5IiwiYWNrbm93bGVkZ2VkIiwicmVzcG9uc2VBY3Rpb25zIiwid2FybiIsInRha2VBdXRvbWF0ZWRSZXNwb25zZSIsImFjdGlvbnMiLCJqb2luIiwic2V2ZXJpdHlNYXAiLCJ0aHJlc2hvbGRfZXhjZWVkZWQiLCJtdWx0aV92ZWN0b3JfYXR0YWNrIiwiaGlnaF9mcmVxdWVuY3lfYXR0YWNrIiwiZGF0YV9icmVhY2hfYXR0ZW1wdCIsInVuYXV0aG9yaXplZF9hY2Nlc3MiLCJwcml2aWxlZ2VfZXNjYWxhdGlvbiIsImxhc3RIb3VyIiwid2FybmluZ0V2ZW50cyIsIm5ld1RocmVhdExldmVsIiwidG8iLCJnZXRTZWN1cml0eURhc2hib2FyZCIsImxhc3QyNEhvdXJzIiwicmVjZW50MjRoIiwicmVjZW50MWgiLCJzZXZlcml0aWVzIiwiaW5mbyIsIndhcm5pbmciLCJjcml0aWNhbCIsInNvdXJjZUlQcyIsInRvcElQcyIsInNvcnQiLCJhIiwiYiIsInRpbWVsaW5lIiwiZXZlbnRzUGVySG91ciIsInJvdW5kIiwiYnJlYWtkb3duIiwidG9wU291cmNlSVBzIiwiZXhwb3J0U2VjdXJpdHlFdmVudHMiLCJzdGFydFRpbWUiLCJlbmRUaW1lIiwiZm9ybWF0IiwiZmlsdGVyZWRFdmVudHMiLCJjc3ZIZWFkZXIiLCJjc3ZSb3dzIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlcGxhY2UiLCJleHBvcnRUaW1lIiwidGltZVJhbmdlIiwiY2xlYXJPbGRFdmVudHMiLCJvbGRlclRoYW4iLCJjdXRvZmZUaW1lIiwiaW5pdGlhbENvdW50IiwicmVtb3ZlZENvdW50IiwiZ2V0TWV0cmljcyIsInJlY2VudEV2ZW50Q291bnQiLCJhdmVyYWdlRXZlbnRzUGVySG91ciIsImNyaXRpY2FsRXZlbnRSYXRlIiwidG9wRXZlbnRUeXBlcyIsImdldFRvcEV2ZW50VHlwZXMiLCJsYXN0QXNzZXNzbWVudCIsInRvSVNPU3RyaW5nIiwidHlwZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJzZWN1cml0eVNlcnZpY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBTZWN1cml0eSBTZXJ2aWNlXG4gKiBDZW50cmFsIHNlY3VyaXR5IG1hbmFnZW1lbnQgYW5kIGV2ZW50IG1vbml0b3JpbmdcbiAqL1xuXG5jb25zdCBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTtcbmNvbnN0IEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpO1xuXG5jbGFzcyBTZWN1cml0eVNlcnZpY2UgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnNlY3VyaXR5RXZlbnRzID0gW107XG4gICAgICAgIHRoaXMudGhyZWF0TGV2ZWwgPSAnbG93JzsgLy8gbG93LCBtZWRpdW0sIGhpZ2gsIGNyaXRpY2FsXG4gICAgICAgIHRoaXMubWF4RXZlbnRIaXN0b3J5ID0gMTAwMDA7XG4gICAgICAgIHRoaXMuYWxlcnRUaHJlc2hvbGRzID0ge1xuICAgICAgICAgICAgZmFpbGVkTG9naW5zOiB7IGNvdW50OiAxMCwgdGltZVdpbmRvdzogMzAwMDAwIH0sIC8vIDEwIGluIDUgbWludXRlc1xuICAgICAgICAgICAgc3VzcGljaW91c0lQczogeyBjb3VudDogNSwgdGltZVdpbmRvdzogNjAwMDAwIH0sICAvLyA1IGluIDEwIG1pbnV0ZXNcbiAgICAgICAgICAgIHJhdGVMaW1pdFZpb2xhdGlvbnM6IHsgY291bnQ6IDIwLCB0aW1lV2luZG93OiAzMDAwMDAgfSwgLy8gMjAgaW4gNSBtaW51dGVzXG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvbkFub21hbGllczogeyBjb3VudDogMywgdGltZVdpbmRvdzogOTAwMDAwIH0gLy8gMyBpbiAxNSBtaW51dGVzXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBTZWN1cml0eSBtZXRyaWNzXG4gICAgICAgIHRoaXMubWV0cmljcyA9IHtcbiAgICAgICAgICAgIHRvdGFsRXZlbnRzOiAwLFxuICAgICAgICAgICAgY3JpdGljYWxFdmVudHM6IDAsXG4gICAgICAgICAgICBibG9ja2VkQXR0YWNrczogMCxcbiAgICAgICAgICAgIGxhc3RUaHJlYXRBc3Nlc3NtZW50OiBEYXRlLm5vdygpXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQXV0b21hdGVkIHRocmVhdCByZXNwb25zZVxuICAgICAgICB0aGlzLmF1dG9tYXRlZFJlc3BvbnNlID0ge1xuICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgIGF1dG9CbG9jazogdHJ1ZSxcbiAgICAgICAgICAgIGFsZXJ0QWRtaW46IHRydWVcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBTdGFydCBtb25pdG9yaW5nXG4gICAgICAgIHRoaXMuc3RhcnRFdmVudFByb2Nlc3NvcigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvZyBzZWN1cml0eSBldmVudFxuICAgICAqL1xuICAgIGxvZ1NlY3VyaXR5RXZlbnQoZXZlbnRUeXBlLCBzZXZlcml0eSwgZGV0YWlscywgcmVxID0gbnVsbCkge1xuICAgICAgICBjb25zdCBldmVudCA9IHtcbiAgICAgICAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgZXZlbnRUeXBlLFxuICAgICAgICAgICAgc2V2ZXJpdHksIC8vIGluZm8sIHdhcm5pbmcsIGNyaXRpY2FsXG4gICAgICAgICAgICBkZXRhaWxzLFxuICAgICAgICAgICAgc291cmNlSVA6IHJlcT8uaXAgfHwgcmVxPy5jb25uZWN0aW9uPy5yZW1vdGVBZGRyZXNzIHx8ICd1bmtub3duJyxcbiAgICAgICAgICAgIHVzZXJBZ2VudDogcmVxPy5nZXQoJ1VzZXItQWdlbnQnKSB8fCAndW5rbm93bicsXG4gICAgICAgICAgICB1c2VySWQ6IHJlcT8udXNlcj8udXNlcklkIHx8IHJlcT8udXNlcklkIHx8IG51bGwsXG4gICAgICAgICAgICBzZXNzaW9uSWQ6IHJlcT8uc2Vzc2lvbklkIHx8IG51bGwsXG4gICAgICAgICAgICBjb3JyZWxhdGlvbklkOiByZXE/LmNvcnJlbGF0aW9uSWQgfHwgbnVsbCxcbiAgICAgICAgICAgIHByb2Nlc3NlZDogZmFsc2VcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnNlY3VyaXR5RXZlbnRzLnB1c2goZXZlbnQpO1xuICAgICAgICB0aGlzLm1ldHJpY3MudG90YWxFdmVudHMrKztcblxuICAgICAgICBpZiAoc2V2ZXJpdHkgPT09ICdjcml0aWNhbCcpIHtcbiAgICAgICAgICAgIHRoaXMubWV0cmljcy5jcml0aWNhbEV2ZW50cysrO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRW1pdCBldmVudCBmb3IgcmVhbC10aW1lIHByb2Nlc3NpbmdcbiAgICAgICAgdGhpcy5lbWl0KCdzZWN1cml0eUV2ZW50JywgZXZlbnQpO1xuXG4gICAgICAgIC8vIFRyaW0gb2xkIGV2ZW50cyB0byBwcmV2ZW50IG1lbW9yeSBpc3N1ZXNcbiAgICAgICAgaWYgKHRoaXMuc2VjdXJpdHlFdmVudHMubGVuZ3RoID4gdGhpcy5tYXhFdmVudEhpc3RvcnkpIHtcbiAgICAgICAgICAgIHRoaXMuc2VjdXJpdHlFdmVudHMgPSB0aGlzLnNlY3VyaXR5RXZlbnRzLnNsaWNlKC10aGlzLm1heEV2ZW50SGlzdG9yeSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZyhg8J+UkiBTZWN1cml0eSBldmVudCBsb2dnZWQ6ICR7ZXZlbnRUeXBlfSBbJHtzZXZlcml0eX1dIGZyb20gJHtldmVudC5zb3VyY2VJUH1gKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBldmVudC5pZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzIHNlY3VyaXR5IGV2ZW50cyBhbmQgZGV0ZWN0IHBhdHRlcm5zXG4gICAgICovXG4gICAgc3RhcnRFdmVudFByb2Nlc3NvcigpIHtcbiAgICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzU2VjdXJpdHlFdmVudHMoKTtcbiAgICAgICAgICAgIHRoaXMuYXNzZXNzVGhyZWF0TGV2ZWwoKTtcbiAgICAgICAgfSwgMzAwMDApOyAvLyBFdmVyeSAzMCBzZWNvbmRzXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJvY2VzcyByZWNlbnQgc2VjdXJpdHkgZXZlbnRzIGZvciBwYXR0ZXJuc1xuICAgICAqL1xuICAgIHByb2Nlc3NTZWN1cml0eUV2ZW50cygpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCByZWNlbnRFdmVudHMgPSB0aGlzLnNlY3VyaXR5RXZlbnRzLmZpbHRlcihcbiAgICAgICAgICAgIGV2ZW50ID0+IGN1cnJlbnRUaW1lIC0gZXZlbnQudGltZXN0YW1wIDwgOTAwMDAwICYmICFldmVudC5wcm9jZXNzZWRcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBHcm91cCBldmVudHMgYnkgdHlwZSBhbmQgSVBcbiAgICAgICAgY29uc3QgZXZlbnRzQnlUeXBlID0ge307XG4gICAgICAgIGNvbnN0IGV2ZW50c0J5SVAgPSB7fTtcblxuICAgICAgICByZWNlbnRFdmVudHMuZm9yRWFjaChldmVudCA9PiB7XG4gICAgICAgICAgICAvLyBCeSB0eXBlXG4gICAgICAgICAgICBpZiAoIWV2ZW50c0J5VHlwZVtldmVudC5ldmVudFR5cGVdKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRzQnlUeXBlW2V2ZW50LmV2ZW50VHlwZV0gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGV2ZW50c0J5VHlwZVtldmVudC5ldmVudFR5cGVdLnB1c2goZXZlbnQpO1xuXG4gICAgICAgICAgICAvLyBCeSBJUFxuICAgICAgICAgICAgaWYgKCFldmVudHNCeUlQW2V2ZW50LnNvdXJjZUlQXSkge1xuICAgICAgICAgICAgICAgIGV2ZW50c0J5SVBbZXZlbnQuc291cmNlSVBdID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBldmVudHNCeUlQW2V2ZW50LnNvdXJjZUlQXS5wdXNoKGV2ZW50KTtcblxuICAgICAgICAgICAgLy8gTWFyayBhcyBwcm9jZXNzZWRcbiAgICAgICAgICAgIGV2ZW50LnByb2Nlc3NlZCA9IHRydWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENoZWNrIGZvciB0aHJlc2hvbGQgdmlvbGF0aW9uc1xuICAgICAgICB0aGlzLmNoZWNrVGhyZXNob2xkcyhldmVudHNCeVR5cGUsIGV2ZW50c0J5SVApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGV2ZW50cyBleGNlZWQgYWxlcnQgdGhyZXNob2xkc1xuICAgICAqL1xuICAgIGNoZWNrVGhyZXNob2xkcyhldmVudHNCeVR5cGUsIGV2ZW50c0J5SVApIHtcbiAgICAgICAgY29uc3QgY3VycmVudFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICAgIC8vIENoZWNrIGV2ZW50IHR5cGUgdGhyZXNob2xkc1xuICAgICAgICBmb3IgKGNvbnN0IFtldmVudFR5cGUsIGV2ZW50c10gb2YgT2JqZWN0LmVudHJpZXMoZXZlbnRzQnlUeXBlKSkge1xuICAgICAgICAgICAgY29uc3QgdGhyZXNob2xkID0gdGhpcy5hbGVydFRocmVzaG9sZHNbZXZlbnRUeXBlXTtcbiAgICAgICAgICAgIGlmICghdGhyZXNob2xkKSBjb250aW51ZTtcblxuICAgICAgICAgICAgY29uc3QgcmVjZW50RXZlbnRzID0gZXZlbnRzLmZpbHRlcihcbiAgICAgICAgICAgICAgICBldmVudCA9PiBjdXJyZW50VGltZSAtIGV2ZW50LnRpbWVzdGFtcCA8IHRocmVzaG9sZC50aW1lV2luZG93XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAocmVjZW50RXZlbnRzLmxlbmd0aCA+PSB0aHJlc2hvbGQuY291bnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJBbGVydCgndGhyZXNob2xkX2V4Y2VlZGVkJywge1xuICAgICAgICAgICAgICAgICAgICBldmVudFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiByZWNlbnRFdmVudHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IHRocmVzaG9sZC5jb3VudCxcbiAgICAgICAgICAgICAgICAgICAgdGltZVdpbmRvdzogdGhyZXNob2xkLnRpbWVXaW5kb3csXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50czogcmVjZW50RXZlbnRzLm1hcChlID0+ICh7IGlkOiBlLmlkLCB0aW1lc3RhbXA6IGUudGltZXN0YW1wLCBzb3VyY2VJUDogZS5zb3VyY2VJUCB9KSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIElQLWJhc2VkIHBhdHRlcm5zXG4gICAgICAgIGZvciAoY29uc3QgW2lwLCBldmVudHNdIG9mIE9iamVjdC5lbnRyaWVzKGV2ZW50c0J5SVApKSB7XG4gICAgICAgICAgICAvLyBNdWx0aXBsZSBldmVudCB0eXBlcyBmcm9tIHNhbWUgSVBcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50VHlwZXMgPSBuZXcgU2V0KGV2ZW50cy5tYXAoZSA9PiBlLmV2ZW50VHlwZSkpO1xuICAgICAgICAgICAgaWYgKGV2ZW50VHlwZXMuc2l6ZSA+PSAzICYmIGV2ZW50cy5sZW5ndGggPj0gNSkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlckFsZXJ0KCdtdWx0aV92ZWN0b3JfYXR0YWNrJywge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VJUDogaXAsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50VHlwZXM6IEFycmF5LmZyb20oZXZlbnRUeXBlcyksXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRXZlbnRzOiBldmVudHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICB0aW1lU3BhbjogTWF0aC5tYXgoLi4uZXZlbnRzLm1hcChlID0+IGUudGltZXN0YW1wKSkgLSBNYXRoLm1pbiguLi5ldmVudHMubWFwKGUgPT4gZS50aW1lc3RhbXApKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBIaWdoIGZyZXF1ZW5jeSBmcm9tIHNpbmdsZSBJUFxuICAgICAgICAgICAgaWYgKGV2ZW50cy5sZW5ndGggPj0gMTUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJBbGVydCgnaGlnaF9mcmVxdWVuY3lfYXR0YWNrJywge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VJUDogaXAsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50Q291bnQ6IGV2ZW50cy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVTcGFuOiBNYXRoLm1heCguLi5ldmVudHMubWFwKGUgPT4gZS50aW1lc3RhbXApKSAtIE1hdGgubWluKC4uLmV2ZW50cy5tYXAoZSA9PiBlLnRpbWVzdGFtcCkpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyIHNlY3VyaXR5IGFsZXJ0XG4gICAgICovXG4gICAgdHJpZ2dlckFsZXJ0KGFsZXJ0VHlwZSwgZGV0YWlscykge1xuICAgICAgICBjb25zdCBhbGVydCA9IHtcbiAgICAgICAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgYWxlcnRUeXBlLFxuICAgICAgICAgICAgZGV0YWlscyxcbiAgICAgICAgICAgIHNldmVyaXR5OiB0aGlzLmdldEFsZXJ0U2V2ZXJpdHkoYWxlcnRUeXBlKSxcbiAgICAgICAgICAgIGFja25vd2xlZGdlZDogZmFsc2UsXG4gICAgICAgICAgICByZXNwb25zZUFjdGlvbnM6IFtdXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc29sZS53YXJuKGDwn5qoIFNlY3VyaXR5IGFsZXJ0IHRyaWdnZXJlZDogJHthbGVydFR5cGV9YCwgZGV0YWlscyk7XG5cbiAgICAgICAgLy8gVGFrZSBhdXRvbWF0ZWQgcmVzcG9uc2UgaWYgZW5hYmxlZFxuICAgICAgICBpZiAodGhpcy5hdXRvbWF0ZWRSZXNwb25zZS5lbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLnRha2VBdXRvbWF0ZWRSZXNwb25zZShhbGVydCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFbWl0IGFsZXJ0IGZvciBleHRlcm5hbCBwcm9jZXNzaW5nXG4gICAgICAgIHRoaXMuZW1pdCgnc2VjdXJpdHlBbGVydCcsIGFsZXJ0KTtcblxuICAgICAgICByZXR1cm4gYWxlcnQuaWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGFrZSBhdXRvbWF0ZWQgcmVzcG9uc2UgdG8gc2VjdXJpdHkgdGhyZWF0c1xuICAgICAqL1xuICAgIHRha2VBdXRvbWF0ZWRSZXNwb25zZShhbGVydCkge1xuICAgICAgICBjb25zdCBhY3Rpb25zID0gW107XG5cbiAgICAgICAgc3dpdGNoIChhbGVydC5hbGVydFR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ3RocmVzaG9sZF9leGNlZWRlZCc6XG4gICAgICAgICAgICAgICAgaWYgKGFsZXJ0LmRldGFpbHMuZXZlbnRUeXBlID09PSAnZmFpbGVkTG9naW5zJyAmJiB0aGlzLmF1dG9tYXRlZFJlc3BvbnNlLmF1dG9CbG9jaykge1xuICAgICAgICAgICAgICAgICAgICAvLyBDb3VsZCB0cmlnZ2VyIHRlbXBvcmFyeSBJUCBibG9ja3NcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9ucy5wdXNoKCdyYXRlX2xpbWl0X2luY3JlYXNlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnbXVsdGlfdmVjdG9yX2F0dGFjayc6XG4gICAgICAgICAgICBjYXNlICdoaWdoX2ZyZXF1ZW5jeV9hdHRhY2snOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmF1dG9tYXRlZFJlc3BvbnNlLmF1dG9CbG9jaykge1xuICAgICAgICAgICAgICAgICAgICAvLyBDb3VsZCB0cmlnZ2VyIElQIGJsYWNrbGlzdGluZ1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb25zLnB1c2goJ2lwX2Jsb2NrZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXRyaWNzLmJsb2NrZWRBdHRhY2tzKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgYWxlcnQucmVzcG9uc2VBY3Rpb25zID0gYWN0aW9ucztcbiAgICAgICAgXG4gICAgICAgIGlmIChhY3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5uh77iPIEF1dG9tYXRlZCByZXNwb25zZSB0YWtlbiBmb3IgJHthbGVydC5hbGVydFR5cGV9OiAke2FjdGlvbnMuam9pbignLCAnKX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbGVydCBzZXZlcml0eSBiYXNlZCBvbiB0eXBlXG4gICAgICovXG4gICAgZ2V0QWxlcnRTZXZlcml0eShhbGVydFR5cGUpIHtcbiAgICAgICAgY29uc3Qgc2V2ZXJpdHlNYXAgPSB7XG4gICAgICAgICAgICB0aHJlc2hvbGRfZXhjZWVkZWQ6ICdtZWRpdW0nLFxuICAgICAgICAgICAgbXVsdGlfdmVjdG9yX2F0dGFjazogJ2hpZ2gnLFxuICAgICAgICAgICAgaGlnaF9mcmVxdWVuY3lfYXR0YWNrOiAnaGlnaCcsXG4gICAgICAgICAgICBkYXRhX2JyZWFjaF9hdHRlbXB0OiAnY3JpdGljYWwnLFxuICAgICAgICAgICAgdW5hdXRob3JpemVkX2FjY2VzczogJ2NyaXRpY2FsJyxcbiAgICAgICAgICAgIHByaXZpbGVnZV9lc2NhbGF0aW9uOiAnY3JpdGljYWwnXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHNldmVyaXR5TWFwW2FsZXJ0VHlwZV0gfHwgJ21lZGl1bSc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXNzZXNzIG92ZXJhbGwgdGhyZWF0IGxldmVsXG4gICAgICovXG4gICAgYXNzZXNzVGhyZWF0TGV2ZWwoKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgbGFzdEhvdXIgPSBjdXJyZW50VGltZSAtICg2MCAqIDYwICogMTAwMCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZWNlbnRFdmVudHMgPSB0aGlzLnNlY3VyaXR5RXZlbnRzLmZpbHRlcihcbiAgICAgICAgICAgIGV2ZW50ID0+IGV2ZW50LnRpbWVzdGFtcCA+IGxhc3RIb3VyXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY3JpdGljYWxFdmVudHMgPSByZWNlbnRFdmVudHMuZmlsdGVyKGUgPT4gZS5zZXZlcml0eSA9PT0gJ2NyaXRpY2FsJykubGVuZ3RoO1xuICAgICAgICBjb25zdCB3YXJuaW5nRXZlbnRzID0gcmVjZW50RXZlbnRzLmZpbHRlcihlID0+IGUuc2V2ZXJpdHkgPT09ICd3YXJuaW5nJykubGVuZ3RoO1xuICAgICAgICBjb25zdCB0b3RhbEV2ZW50cyA9IHJlY2VudEV2ZW50cy5sZW5ndGg7XG5cbiAgICAgICAgbGV0IG5ld1RocmVhdExldmVsID0gJ2xvdyc7XG5cbiAgICAgICAgaWYgKGNyaXRpY2FsRXZlbnRzID49IDUgfHwgdG90YWxFdmVudHMgPj0gMTAwKSB7XG4gICAgICAgICAgICBuZXdUaHJlYXRMZXZlbCA9ICdjcml0aWNhbCc7XG4gICAgICAgIH0gZWxzZSBpZiAoY3JpdGljYWxFdmVudHMgPj0gMiB8fCB3YXJuaW5nRXZlbnRzID49IDEwIHx8IHRvdGFsRXZlbnRzID49IDUwKSB7XG4gICAgICAgICAgICBuZXdUaHJlYXRMZXZlbCA9ICdoaWdoJztcbiAgICAgICAgfSBlbHNlIGlmIChjcml0aWNhbEV2ZW50cyA+PSAxIHx8IHdhcm5pbmdFdmVudHMgPj0gNSB8fCB0b3RhbEV2ZW50cyA+PSAyMCkge1xuICAgICAgICAgICAgbmV3VGhyZWF0TGV2ZWwgPSAnbWVkaXVtJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXdUaHJlYXRMZXZlbCAhPT0gdGhpcy50aHJlYXRMZXZlbCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGDwn46vIFRocmVhdCBsZXZlbCBjaGFuZ2VkOiAke3RoaXMudGhyZWF0TGV2ZWx9IOKGkiAke25ld1RocmVhdExldmVsfWApO1xuICAgICAgICAgICAgdGhpcy50aHJlYXRMZXZlbCA9IG5ld1RocmVhdExldmVsO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCd0aHJlYXRMZXZlbENoYW5nZWQnLCB7IGZyb206IHRoaXMudGhyZWF0TGV2ZWwsIHRvOiBuZXdUaHJlYXRMZXZlbCB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubWV0cmljcy5sYXN0VGhyZWF0QXNzZXNzbWVudCA9IGN1cnJlbnRUaW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBzZWN1cml0eSBkYXNoYm9hcmQgZGF0YVxuICAgICAqL1xuICAgIGdldFNlY3VyaXR5RGFzaGJvYXJkKCkge1xuICAgICAgICBjb25zdCBjdXJyZW50VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IGxhc3QyNEhvdXJzID0gY3VycmVudFRpbWUgLSAoMjQgKiA2MCAqIDYwICogMTAwMCk7XG4gICAgICAgIGNvbnN0IGxhc3RIb3VyID0gY3VycmVudFRpbWUgLSAoNjAgKiA2MCAqIDEwMDApO1xuXG4gICAgICAgIGNvbnN0IHJlY2VudDI0aCA9IHRoaXMuc2VjdXJpdHlFdmVudHMuZmlsdGVyKGUgPT4gZS50aW1lc3RhbXAgPiBsYXN0MjRIb3Vycyk7XG4gICAgICAgIGNvbnN0IHJlY2VudDFoID0gdGhpcy5zZWN1cml0eUV2ZW50cy5maWx0ZXIoZSA9PiBlLnRpbWVzdGFtcCA+IGxhc3RIb3VyKTtcblxuICAgICAgICAvLyBFdmVudCB0eXBlIGJyZWFrZG93blxuICAgICAgICBjb25zdCBldmVudFR5cGVzID0ge307XG4gICAgICAgIHJlY2VudDI0aC5mb3JFYWNoKGV2ZW50ID0+IHtcbiAgICAgICAgICAgIGV2ZW50VHlwZXNbZXZlbnQuZXZlbnRUeXBlXSA9IChldmVudFR5cGVzW2V2ZW50LmV2ZW50VHlwZV0gfHwgMCkgKyAxO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTZXZlcml0eSBicmVha2Rvd25cbiAgICAgICAgY29uc3Qgc2V2ZXJpdGllcyA9IHsgaW5mbzogMCwgd2FybmluZzogMCwgY3JpdGljYWw6IDAgfTtcbiAgICAgICAgcmVjZW50MjRoLmZvckVhY2goZXZlbnQgPT4ge1xuICAgICAgICAgICAgc2V2ZXJpdGllc1tldmVudC5zZXZlcml0eV0gPSAoc2V2ZXJpdGllc1tldmVudC5zZXZlcml0eV0gfHwgMCkgKyAxO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBUb3Agc291cmNlIElQc1xuICAgICAgICBjb25zdCBzb3VyY2VJUHMgPSB7fTtcbiAgICAgICAgcmVjZW50MjRoLmZvckVhY2goZXZlbnQgPT4ge1xuICAgICAgICAgICAgc291cmNlSVBzW2V2ZW50LnNvdXJjZUlQXSA9IChzb3VyY2VJUHNbZXZlbnQuc291cmNlSVBdIHx8IDApICsgMTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgdG9wSVBzID0gT2JqZWN0LmVudHJpZXMoc291cmNlSVBzKVxuICAgICAgICAgICAgLnNvcnQoKFssYV0sIFssYl0pID0+IGIgLSBhKVxuICAgICAgICAgICAgLnNsaWNlKDAsIDEwKVxuICAgICAgICAgICAgLm1hcCgoW2lwLCBjb3VudF0pID0+ICh7IGlwLCBjb3VudCB9KSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRocmVhdExldmVsOiB0aGlzLnRocmVhdExldmVsLFxuICAgICAgICAgICAgbWV0cmljczogdGhpcy5tZXRyaWNzLFxuICAgICAgICAgICAgdGltZWxpbmU6IHtcbiAgICAgICAgICAgICAgICBsYXN0MjRIb3VyczogcmVjZW50MjRoLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBsYXN0SG91cjogcmVjZW50MWgubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGV2ZW50c1BlckhvdXI6IE1hdGgucm91bmQocmVjZW50MjRoLmxlbmd0aCAvIDI0KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJyZWFrZG93bjoge1xuICAgICAgICAgICAgICAgIGV2ZW50VHlwZXMsXG4gICAgICAgICAgICAgICAgc2V2ZXJpdGllcyxcbiAgICAgICAgICAgICAgICB0b3BTb3VyY2VJUHM6IHRvcElQc1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlY2VudEV2ZW50czogdGhpcy5zZWN1cml0eUV2ZW50c1xuICAgICAgICAgICAgICAgIC5maWx0ZXIoZSA9PiBlLnRpbWVzdGFtcCA+IGxhc3RIb3VyKVxuICAgICAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBiLnRpbWVzdGFtcCAtIGEudGltZXN0YW1wKVxuICAgICAgICAgICAgICAgIC5zbGljZSgwLCA1MClcbiAgICAgICAgICAgICAgICAubWFwKGUgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGUuaWQsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogZS50aW1lc3RhbXAsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50VHlwZTogZS5ldmVudFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiBlLnNldmVyaXR5LFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VJUDogZS5zb3VyY2VJUCxcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsczogZS5kZXRhaWxzXG4gICAgICAgICAgICAgICAgfSkpXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhwb3J0IHNlY3VyaXR5IGV2ZW50cyBmb3IgYW5hbHlzaXNcbiAgICAgKi9cbiAgICBleHBvcnRTZWN1cml0eUV2ZW50cyhzdGFydFRpbWUsIGVuZFRpbWUsIGZvcm1hdCA9ICdqc29uJykge1xuICAgICAgICBjb25zdCBmaWx0ZXJlZEV2ZW50cyA9IHRoaXMuc2VjdXJpdHlFdmVudHMuZmlsdGVyKFxuICAgICAgICAgICAgZXZlbnQgPT4gZXZlbnQudGltZXN0YW1wID49IHN0YXJ0VGltZSAmJiBldmVudC50aW1lc3RhbXAgPD0gZW5kVGltZVxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChmb3JtYXQgPT09ICdjc3YnKSB7XG4gICAgICAgICAgICBjb25zdCBjc3ZIZWFkZXIgPSAndGltZXN0YW1wLGV2ZW50VHlwZSxzZXZlcml0eSxzb3VyY2VJUCx1c2VyQWdlbnQsdXNlcklkLGRldGFpbHNcXG4nO1xuICAgICAgICAgICAgY29uc3QgY3N2Um93cyA9IGZpbHRlcmVkRXZlbnRzLm1hcChldmVudCA9PiBcbiAgICAgICAgICAgICAgICBgJHtldmVudC50aW1lc3RhbXB9LCR7ZXZlbnQuZXZlbnRUeXBlfSwke2V2ZW50LnNldmVyaXR5fSwke2V2ZW50LnNvdXJjZUlQfSxcIiR7ZXZlbnQudXNlckFnZW50fVwiLCR7ZXZlbnQudXNlcklkIHx8ICcnfSxcIiR7SlNPTi5zdHJpbmdpZnkoZXZlbnQuZGV0YWlscykucmVwbGFjZSgvXCIvZywgJ1wiXCInKX1cImBcbiAgICAgICAgICAgICkuam9pbignXFxuJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBjc3ZIZWFkZXIgKyBjc3ZSb3dzO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGV4cG9ydFRpbWU6IERhdGUubm93KCksXG4gICAgICAgICAgICB0aW1lUmFuZ2U6IHsgc3RhcnRUaW1lLCBlbmRUaW1lIH0sXG4gICAgICAgICAgICBldmVudENvdW50OiBmaWx0ZXJlZEV2ZW50cy5sZW5ndGgsXG4gICAgICAgICAgICBldmVudHM6IGZpbHRlcmVkRXZlbnRzXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xlYXIgb2xkIHNlY3VyaXR5IGV2ZW50c1xuICAgICAqL1xuICAgIGNsZWFyT2xkRXZlbnRzKG9sZGVyVGhhbiA9IDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKSB7IC8vIDcgZGF5cyBkZWZhdWx0XG4gICAgICAgIGNvbnN0IGN1dG9mZlRpbWUgPSBEYXRlLm5vdygpIC0gb2xkZXJUaGFuO1xuICAgICAgICBjb25zdCBpbml0aWFsQ291bnQgPSB0aGlzLnNlY3VyaXR5RXZlbnRzLmxlbmd0aDtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2VjdXJpdHlFdmVudHMgPSB0aGlzLnNlY3VyaXR5RXZlbnRzLmZpbHRlcihcbiAgICAgICAgICAgIGV2ZW50ID0+IGV2ZW50LnRpbWVzdGFtcCA+IGN1dG9mZlRpbWVcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCByZW1vdmVkQ291bnQgPSBpbml0aWFsQ291bnQgLSB0aGlzLnNlY3VyaXR5RXZlbnRzLmxlbmd0aDtcbiAgICAgICAgXG4gICAgICAgIGlmIChyZW1vdmVkQ291bnQgPiAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+nuSBSZW1vdmVkICR7cmVtb3ZlZENvdW50fSBvbGQgc2VjdXJpdHkgZXZlbnRzYCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVtb3ZlZENvdW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBzZWN1cml0eSBtZXRyaWNzIHN1bW1hcnlcbiAgICAgKi9cbiAgICBnZXRNZXRyaWNzKCkge1xuICAgICAgICBjb25zdCBjdXJyZW50VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IGxhc3QyNEhvdXJzID0gY3VycmVudFRpbWUgLSAoMjQgKiA2MCAqIDYwICogMTAwMCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZWNlbnRFdmVudHMgPSB0aGlzLnNlY3VyaXR5RXZlbnRzLmZpbHRlcihcbiAgICAgICAgICAgIGV2ZW50ID0+IGV2ZW50LnRpbWVzdGFtcCA+IGxhc3QyNEhvdXJzXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnRoaXMubWV0cmljcyxcbiAgICAgICAgICAgIHRocmVhdExldmVsOiB0aGlzLnRocmVhdExldmVsLFxuICAgICAgICAgICAgcmVjZW50RXZlbnRDb3VudDogcmVjZW50RXZlbnRzLmxlbmd0aCxcbiAgICAgICAgICAgIGF2ZXJhZ2VFdmVudHNQZXJIb3VyOiBNYXRoLnJvdW5kKHJlY2VudEV2ZW50cy5sZW5ndGggLyAyNCksXG4gICAgICAgICAgICBjcml0aWNhbEV2ZW50UmF0ZTogcmVjZW50RXZlbnRzLmZpbHRlcihlID0+IGUuc2V2ZXJpdHkgPT09ICdjcml0aWNhbCcpLmxlbmd0aCAvIHJlY2VudEV2ZW50cy5sZW5ndGgsXG4gICAgICAgICAgICB0b3BFdmVudFR5cGVzOiB0aGlzLmdldFRvcEV2ZW50VHlwZXMocmVjZW50RXZlbnRzKSxcbiAgICAgICAgICAgIGxhc3RBc3Nlc3NtZW50OiBuZXcgRGF0ZSh0aGlzLm1ldHJpY3MubGFzdFRocmVhdEFzc2Vzc21lbnQpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdG9wIGV2ZW50IHR5cGVzIGZyb20gcmVjZW50IGV2ZW50c1xuICAgICAqL1xuICAgIGdldFRvcEV2ZW50VHlwZXMoZXZlbnRzKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50VHlwZXMgPSB7fTtcbiAgICAgICAgZXZlbnRzLmZvckVhY2goZXZlbnQgPT4ge1xuICAgICAgICAgICAgZXZlbnRUeXBlc1tldmVudC5ldmVudFR5cGVdID0gKGV2ZW50VHlwZXNbZXZlbnQuZXZlbnRUeXBlXSB8fCAwKSArIDE7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBPYmplY3QuZW50cmllcyhldmVudFR5cGVzKVxuICAgICAgICAgICAgLnNvcnQoKFssYV0sIFssYl0pID0+IGIgLSBhKVxuICAgICAgICAgICAgLnNsaWNlKDAsIDUpXG4gICAgICAgICAgICAubWFwKChbdHlwZSwgY291bnRdKSA9PiAoeyB0eXBlLCBjb3VudCB9KSk7XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFNlY3VyaXR5U2VydmljZTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUNoQyxNQUFNQyxZQUFZLEdBQUdELE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFFdEMsTUFBTUUsZUFBZSxTQUFTRCxZQUFZLENBQUM7RUFDdkNFLFdBQVdBLENBQUEsRUFBRztJQUNWLEtBQUssQ0FBQyxDQUFDO0lBQ1AsSUFBSSxDQUFDQyxjQUFjLEdBQUcsRUFBRTtJQUN4QixJQUFJLENBQUNDLFdBQVcsR0FBRyxLQUFLLENBQUMsQ0FBQztJQUMxQixJQUFJLENBQUNDLGVBQWUsR0FBRyxLQUFLO0lBQzVCLElBQUksQ0FBQ0MsZUFBZSxHQUFHO01BQ25CQyxZQUFZLEVBQUU7UUFBRUMsS0FBSyxFQUFFLEVBQUU7UUFBRUMsVUFBVSxFQUFFO01BQU8sQ0FBQztNQUFFO01BQ2pEQyxhQUFhLEVBQUU7UUFBRUYsS0FBSyxFQUFFLENBQUM7UUFBRUMsVUFBVSxFQUFFO01BQU8sQ0FBQztNQUFHO01BQ2xERSxtQkFBbUIsRUFBRTtRQUFFSCxLQUFLLEVBQUUsRUFBRTtRQUFFQyxVQUFVLEVBQUU7TUFBTyxDQUFDO01BQUU7TUFDeERHLHVCQUF1QixFQUFFO1FBQUVKLEtBQUssRUFBRSxDQUFDO1FBQUVDLFVBQVUsRUFBRTtNQUFPLENBQUMsQ0FBQztJQUM5RCxDQUFDOztJQUVEO0lBQ0EsSUFBSSxDQUFDSSxPQUFPLEdBQUc7TUFDWEMsV0FBVyxFQUFFLENB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