{"version":3,"names":["__defProp","Object","defineProperty","__getOwnPropDesc","getOwnPropertyDescriptor","__getOwnPropNames","getOwnPropertyNames","__hasOwnProp","prototype","hasOwnProperty","__name","target","value","configurable","__export","all","name","get","enumerable","__copyProps","to","from","except","desc","key","call","__toCommonJS","mod","index_exports","DEFAULT_UA_APP_ID","getUserAgentMiddlewareOptions","getUserAgentPlugin","resolveUserAgentConfig","userAgentMiddleware","module","exports","import_core","require","isValidUserAgentAppId","appId","length","input","normalizedAppIdProvider","normalizeProvider","userAgentAppId","customUserAgent","assign","logger","constructor","console","warn","import_util_endpoints","import_protocol_http","import_core2","ACCOUNT_ID_ENDPOINT_REGEX","checkFeatures","context","config","args","request","headers","setFeature","retryStrategy","acquireInitialRetryToken","includes","accountIdEndpointMode","endpointV2","String","url","hostname","match","identity","__smithy_context","selectedHttpAuthScheme","$source","credentials","accountId","entries","USER_AGENT","X_AMZ_USER_AGENT","SPACE","UA_NAME_SEPARATOR","UA_NAME_ESCAPE_REGEX","UA_VALUE_ESCAPE_REGEX","UA_ESCAPE_CHAR","BYTE_LIMIT","encodeFeatures","features","buffer","val","options","next","HttpRequest","isInstance","userAgent","map","escapeUserAgent","defaultUserAgent","defaultUserAgentProvider","awsContext","push","__aws_sdk_context","prefix","getUserAgentPrefix","sdkUserAgentValue","concat","join","normalUAValue","filter","section","startsWith","runtime","userAgentPair","split","part","replace","version","prefixSeparatorIndex","indexOf","substring","uaName","toLowerCase","item","reduce","acc","index","step","priority","tags","override","applyToStack","clientStack","add"],"sources":["index.js"],"sourcesContent":["\"use strict\";\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: true });\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\n\n// src/index.ts\nvar index_exports = {};\n__export(index_exports, {\n  DEFAULT_UA_APP_ID: () => DEFAULT_UA_APP_ID,\n  getUserAgentMiddlewareOptions: () => getUserAgentMiddlewareOptions,\n  getUserAgentPlugin: () => getUserAgentPlugin,\n  resolveUserAgentConfig: () => resolveUserAgentConfig,\n  userAgentMiddleware: () => userAgentMiddleware\n});\nmodule.exports = __toCommonJS(index_exports);\n\n// src/configurations.ts\nvar import_core = require(\"@smithy/core\");\nvar DEFAULT_UA_APP_ID = void 0;\nfunction isValidUserAgentAppId(appId) {\n  if (appId === void 0) {\n    return true;\n  }\n  return typeof appId === \"string\" && appId.length <= 50;\n}\n__name(isValidUserAgentAppId, \"isValidUserAgentAppId\");\nfunction resolveUserAgentConfig(input) {\n  const normalizedAppIdProvider = (0, import_core.normalizeProvider)(input.userAgentAppId ?? DEFAULT_UA_APP_ID);\n  const { customUserAgent } = input;\n  return Object.assign(input, {\n    customUserAgent: typeof customUserAgent === \"string\" ? [[customUserAgent]] : customUserAgent,\n    userAgentAppId: /* @__PURE__ */ __name(async () => {\n      const appId = await normalizedAppIdProvider();\n      if (!isValidUserAgentAppId(appId)) {\n        const logger = input.logger?.constructor?.name === \"NoOpLogger\" || !input.logger ? console : input.logger;\n        if (typeof appId !== \"string\") {\n          logger?.warn(\"userAgentAppId must be a string or undefined.\");\n        } else if (appId.length > 50) {\n          logger?.warn(\"The provided userAgentAppId exceeds the maximum length of 50 characters.\");\n        }\n      }\n      return appId;\n    }, \"userAgentAppId\")\n  });\n}\n__name(resolveUserAgentConfig, \"resolveUserAgentConfig\");\n\n// src/user-agent-middleware.ts\nvar import_util_endpoints = require(\"@aws-sdk/util-endpoints\");\nvar import_protocol_http = require(\"@smithy/protocol-http\");\n\n// src/check-features.ts\nvar import_core2 = require(\"@aws-sdk/core\");\nvar ACCOUNT_ID_ENDPOINT_REGEX = /\\d{12}\\.ddb/;\nasync function checkFeatures(context, config, args) {\n  const request = args.request;\n  if (request?.headers?.[\"smithy-protocol\"] === \"rpc-v2-cbor\") {\n    (0, import_core2.setFeature)(context, \"PROTOCOL_RPC_V2_CBOR\", \"M\");\n  }\n  if (typeof config.retryStrategy === \"function\") {\n    const retryStrategy = await config.retryStrategy();\n    if (typeof retryStrategy.acquireInitialRetryToken === \"function\") {\n      if (retryStrategy.constructor?.name?.includes(\"Adaptive\")) {\n        (0, import_core2.setFeature)(context, \"RETRY_MODE_ADAPTIVE\", \"F\");\n      } else {\n        (0, import_core2.setFeature)(context, \"RETRY_MODE_STANDARD\", \"E\");\n      }\n    } else {\n      (0, import_core2.setFeature)(context, \"RETRY_MODE_LEGACY\", \"D\");\n    }\n  }\n  if (typeof config.accountIdEndpointMode === \"function\") {\n    const endpointV2 = context.endpointV2;\n    if (String(endpointV2?.url?.hostname).match(ACCOUNT_ID_ENDPOINT_REGEX)) {\n      (0, import_core2.setFeature)(context, \"ACCOUNT_ID_ENDPOINT\", \"O\");\n    }\n    switch (await config.accountIdEndpointMode?.()) {\n      case \"disabled\":\n        (0, import_core2.setFeature)(context, \"ACCOUNT_ID_MODE_DISABLED\", \"Q\");\n        break;\n      case \"preferred\":\n        (0, import_core2.setFeature)(context, \"ACCOUNT_ID_MODE_PREFERRED\", \"P\");\n        break;\n      case \"required\":\n        (0, import_core2.setFeature)(context, \"ACCOUNT_ID_MODE_REQUIRED\", \"R\");\n        break;\n    }\n  }\n  const identity = context.__smithy_context?.selectedHttpAuthScheme?.identity;\n  if (identity?.$source) {\n    const credentials = identity;\n    if (credentials.accountId) {\n      (0, import_core2.setFeature)(context, \"RESOLVED_ACCOUNT_ID\", \"T\");\n    }\n    for (const [key, value] of Object.entries(credentials.$source ?? {})) {\n      (0, import_core2.setFeature)(context, key, value);\n    }\n  }\n}\n__name(checkFeatures, \"checkFeatures\");\n\n// src/constants.ts\nvar USER_AGENT = \"user-agent\";\nvar X_AMZ_USER_AGENT = \"x-amz-user-agent\";\nvar SPACE = \" \";\nvar UA_NAME_SEPARATOR = \"/\";\nvar UA_NAME_ESCAPE_REGEX = /[^\\!\\$\\%\\&\\'\\*\\+\\-\\.\\^\\_\\`\\|\\~\\d\\w]/g;\nvar UA_VALUE_ESCAPE_REGEX = /[^\\!\\$\\%\\&\\'\\*\\+\\-\\.\\^\\_\\`\\|\\~\\d\\w\\#]/g;\nvar UA_ESCAPE_CHAR = \"-\";\n\n// src/encode-features.ts\nvar BYTE_LIMIT = 1024;\nfunction encodeFeatures(features) {\n  let buffer = \"\";\n  for (const key in features) {\n    const val = features[key];\n    if (buffer.length + val.length + 1 <= BYTE_LIMIT) {\n      if (buffer.length) {\n        buffer += \",\" + val;\n      } else {\n        buffer += val;\n      }\n      continue;\n    }\n    break;\n  }\n  return buffer;\n}\n__name(encodeFeatures, \"encodeFeatures\");\n\n// src/user-agent-middleware.ts\nvar userAgentMiddleware = /* @__PURE__ */ __name((options) => (next, context) => async (args) => {\n  const { request } = args;\n  if (!import_protocol_http.HttpRequest.isInstance(request)) {\n    return next(args);\n  }\n  const { headers } = request;\n  const userAgent = context?.userAgent?.map(escapeUserAgent) || [];\n  const defaultUserAgent = (await options.defaultUserAgentProvider()).map(escapeUserAgent);\n  await checkFeatures(context, options, args);\n  const awsContext = context;\n  defaultUserAgent.push(\n    `m/${encodeFeatures(\n      Object.assign({}, context.__smithy_context?.features, awsContext.__aws_sdk_context?.features)\n    )}`\n  );\n  const customUserAgent = options?.customUserAgent?.map(escapeUserAgent) || [];\n  const appId = await options.userAgentAppId();\n  if (appId) {\n    defaultUserAgent.push(escapeUserAgent([`app/${appId}`]));\n  }\n  const prefix = (0, import_util_endpoints.getUserAgentPrefix)();\n  const sdkUserAgentValue = (prefix ? [prefix] : []).concat([...defaultUserAgent, ...userAgent, ...customUserAgent]).join(SPACE);\n  const normalUAValue = [\n    ...defaultUserAgent.filter((section) => section.startsWith(\"aws-sdk-\")),\n    ...customUserAgent\n  ].join(SPACE);\n  if (options.runtime !== \"browser\") {\n    if (normalUAValue) {\n      headers[X_AMZ_USER_AGENT] = headers[X_AMZ_USER_AGENT] ? `${headers[USER_AGENT]} ${normalUAValue}` : normalUAValue;\n    }\n    headers[USER_AGENT] = sdkUserAgentValue;\n  } else {\n    headers[X_AMZ_USER_AGENT] = sdkUserAgentValue;\n  }\n  return next({\n    ...args,\n    request\n  });\n}, \"userAgentMiddleware\");\nvar escapeUserAgent = /* @__PURE__ */ __name((userAgentPair) => {\n  const name = userAgentPair[0].split(UA_NAME_SEPARATOR).map((part) => part.replace(UA_NAME_ESCAPE_REGEX, UA_ESCAPE_CHAR)).join(UA_NAME_SEPARATOR);\n  const version = userAgentPair[1]?.replace(UA_VALUE_ESCAPE_REGEX, UA_ESCAPE_CHAR);\n  const prefixSeparatorIndex = name.indexOf(UA_NAME_SEPARATOR);\n  const prefix = name.substring(0, prefixSeparatorIndex);\n  let uaName = name.substring(prefixSeparatorIndex + 1);\n  if (prefix === \"api\") {\n    uaName = uaName.toLowerCase();\n  }\n  return [prefix, uaName, version].filter((item) => item && item.length > 0).reduce((acc, item, index) => {\n    switch (index) {\n      case 0:\n        return item;\n      case 1:\n        return `${acc}/${item}`;\n      default:\n        return `${acc}#${item}`;\n    }\n  }, \"\");\n}, \"escapeUserAgent\");\nvar getUserAgentMiddlewareOptions = {\n  name: \"getUserAgentMiddleware\",\n  step: \"build\",\n  priority: \"low\",\n  tags: [\"SET_USER_AGENT\", \"USER_AGENT\"],\n  override: true\n};\nvar getUserAgentPlugin = /* @__PURE__ */ __name((config) => ({\n  applyToStack: /* @__PURE__ */ __name((clientStack) => {\n    clientStack.add(userAgentMiddleware(config), getUserAgentMiddlewareOptions);\n  }, \"applyToStack\")\n}), \"getUserAgentPlugin\");\n// Annotate the CommonJS export names for ESM import in node:\n\n0 && (module.exports = {\n  DEFAULT_UA_APP_ID,\n  resolveUserAgentConfig,\n  userAgentMiddleware,\n  getUserAgentMiddlewareOptions,\n  getUserAgentPlugin\n});\n\n"],"mappings":"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","ignoreList":[]}