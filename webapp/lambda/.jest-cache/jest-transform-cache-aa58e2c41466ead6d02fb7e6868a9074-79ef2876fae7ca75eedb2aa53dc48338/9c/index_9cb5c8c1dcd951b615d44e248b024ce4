6983686fddc3594d9176eb32e71052fd
"use strict";

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __name = (target, value) => __defProp(target, "name", {
  value,
  configurable: true
});
var __export = (target, all) => {
  for (var name in all) __defProp(target, name, {
    get: all[name],
    enumerable: true
  });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from)) if (!__hasOwnProp.call(to, key) && key !== except) __defProp(to, key, {
      get: () => from[key],
      enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable
    });
  }
  return to;
};
var __toCommonJS = mod => __copyProps(__defProp({}, "__esModule", {
  value: true
}), mod);

// src/index.ts
var index_exports = {};
__export(index_exports, {
  DEFAULT_UA_APP_ID: () => DEFAULT_UA_APP_ID,
  getUserAgentMiddlewareOptions: () => getUserAgentMiddlewareOptions,
  getUserAgentPlugin: () => getUserAgentPlugin,
  resolveUserAgentConfig: () => resolveUserAgentConfig,
  userAgentMiddleware: () => userAgentMiddleware
});
module.exports = __toCommonJS(index_exports);

// src/configurations.ts
var import_core = require("@smithy/core");
var DEFAULT_UA_APP_ID = void 0;
function isValidUserAgentAppId(appId) {
  if (appId === void 0) {
    return true;
  }
  return typeof appId === "string" && appId.length <= 50;
}
__name(isValidUserAgentAppId, "isValidUserAgentAppId");
function resolveUserAgentConfig(input) {
  const normalizedAppIdProvider = (0, import_core.normalizeProvider)(input.userAgentAppId ?? DEFAULT_UA_APP_ID);
  const {
    customUserAgent
  } = input;
  return Object.assign(input, {
    customUserAgent: typeof customUserAgent === "string" ? [[customUserAgent]] : customUserAgent,
    userAgentAppId: /* @__PURE__ */__name(async () => {
      const appId = await normalizedAppIdProvider();
      if (!isValidUserAgentAppId(appId)) {
        const logger = input.logger?.constructor?.name === "NoOpLogger" || !input.logger ? console : input.logger;
        if (typeof appId !== "string") {
          logger?.warn("userAgentAppId must be a string or undefined.");
        } else if (appId.length > 50) {
          logger?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.");
        }
      }
      return appId;
    }, "userAgentAppId")
  });
}
__name(resolveUserAgentConfig, "resolveUserAgentConfig");

// src/user-agent-middleware.ts
var import_util_endpoints = require("@aws-sdk/util-endpoints");
var import_protocol_http = require("@smithy/protocol-http");

// src/check-features.ts
var import_core2 = require("@aws-sdk/core");
var ACCOUNT_ID_ENDPOINT_REGEX = /\d{12}\.ddb/;
async function checkFeatures(context, config, args) {
  const request = args.request;
  if (request?.headers?.["smithy-protocol"] === "rpc-v2-cbor") {
    (0, import_core2.setFeature)(context, "PROTOCOL_RPC_V2_CBOR", "M");
  }
  if (typeof config.retryStrategy === "function") {
    const retryStrategy = await config.retryStrategy();
    if (typeof retryStrategy.acquireInitialRetryToken === "function") {
      if (retryStrategy.constructor?.name?.includes("Adaptive")) {
        (0, import_core2.setFeature)(context, "RETRY_MODE_ADAPTIVE", "F");
      } else {
        (0, import_core2.setFeature)(context, "RETRY_MODE_STANDARD", "E");
      }
    } else {
      (0, import_core2.setFeature)(context, "RETRY_MODE_LEGACY", "D");
    }
  }
  if (typeof config.accountIdEndpointMode === "function") {
    const endpointV2 = context.endpointV2;
    if (String(endpointV2?.url?.hostname).match(ACCOUNT_ID_ENDPOINT_REGEX)) {
      (0, import_core2.setFeature)(context, "ACCOUNT_ID_ENDPOINT", "O");
    }
    switch (await config.accountIdEndpointMode?.()) {
      case "disabled":
        (0, import_core2.setFeature)(context, "ACCOUNT_ID_MODE_DISABLED", "Q");
        break;
      case "preferred":
        (0, import_core2.setFeature)(context, "ACCOUNT_ID_MODE_PREFERRED", "P");
        break;
      case "required":
        (0, import_core2.setFeature)(context, "ACCOUNT_ID_MODE_REQUIRED", "R");
        break;
    }
  }
  const identity = context.__smithy_context?.selectedHttpAuthScheme?.identity;
  if (identity?.$source) {
    const credentials = identity;
    if (credentials.accountId) {
      (0, import_core2.setFeature)(context, "RESOLVED_ACCOUNT_ID", "T");
    }
    for (const [key, value] of Object.entries(credentials.$source ?? {})) {
      (0, import_core2.setFeature)(context, key, value);
    }
  }
}
__name(checkFeatures, "checkFeatures");

// src/constants.ts
var USER_AGENT = "user-agent";
var X_AMZ_USER_AGENT = "x-amz-user-agent";
var SPACE = " ";
var UA_NAME_SEPARATOR = "/";
var UA_NAME_ESCAPE_REGEX = /[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g;
var UA_VALUE_ESCAPE_REGEX = /[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g;
var UA_ESCAPE_CHAR = "-";

// src/encode-features.ts
var BYTE_LIMIT = 1024;
function encodeFeatures(features) {
  let buffer = "";
  for (const key in features) {
    const val = features[key];
    if (buffer.length + val.length + 1 <= BYTE_LIMIT) {
      if (buffer.length) {
        buffer += "," + val;
      } else {
        buffer += val;
      }
      continue;
    }
    break;
  }
  return buffer;
}
__name(encodeFeatures, "encodeFeatures");

// src/user-agent-middleware.ts
var userAgentMiddleware = /* @__PURE__ */__name(options => (next, context) => async args => {
  const {
    request
  } = args;
  if (!import_protocol_http.HttpRequest.isInstance(request)) {
    return next(args);
  }
  const {
    headers
  } = request;
  const userAgent = context?.userAgent?.map(escapeUserAgent) || [];
  const defaultUserAgent = (await options.defaultUserAgentProvider()).map(escapeUserAgent);
  await checkFeatures(context, options, args);
  const awsContext = context;
  defaultUserAgent.push(`m/${encodeFeatures(Object.assign({}, context.__smithy_context?.features, awsContext.__aws_sdk_context?.features))}`);
  const customUserAgent = options?.customUserAgent?.map(escapeUserAgent) || [];
  const appId = await options.userAgentAppId();
  if (appId) {
    defaultUserAgent.push(escapeUserAgent([`app/${appId}`]));
  }
  const prefix = (0, import_util_endpoints.getUserAgentPrefix)();
  const sdkUserAgentValue = (prefix ? [prefix] : []).concat([...defaultUserAgent, ...userAgent, ...customUserAgent]).join(SPACE);
  const normalUAValue = [...defaultUserAgent.filter(section => section.startsWith("aws-sdk-")), ...customUserAgent].join(SPACE);
  if (options.runtime !== "browser") {
    if (normalUAValue) {
      headers[X_AMZ_USER_AGENT] = headers[X_AMZ_USER_AGENT] ? `${headers[USER_AGENT]} ${normalUAValue}` : normalUAValue;
    }
    headers[USER_AGENT] = sdkUserAgentValue;
  } else {
    headers[X_AMZ_USER_AGENT] = sdkUserAgentValue;
  }
  return next({
    ...args,
    request
  });
}, "userAgentMiddleware");
var escapeUserAgent = /* @__PURE__ */__name(userAgentPair => {
  const name = userAgentPair[0].split(UA_NAME_SEPARATOR).map(part => part.replace(UA_NAME_ESCAPE_REGEX, UA_ESCAPE_CHAR)).join(UA_NAME_SEPARATOR);
  const version = userAgentPair[1]?.replace(UA_VALUE_ESCAPE_REGEX, UA_ESCAPE_CHAR);
  const prefixSeparatorIndex = name.indexOf(UA_NAME_SEPARATOR);
  const prefix = name.substring(0, prefixSeparatorIndex);
  let uaName = name.substring(prefixSeparatorIndex + 1);
  if (prefix === "api") {
    uaName = uaName.toLowerCase();
  }
  return [prefix, uaName, version].filter(item => item && item.length > 0).reduce((acc, item, index) => {
    switch (index) {
      case 0:
        return item;
      case 1:
        return `${acc}/${item}`;
      default:
        return `${acc}#${item}`;
    }
  }, "");
}, "escapeUserAgent");
var getUserAgentMiddlewareOptions = {
  name: "getUserAgentMiddleware",
  step: "build",
  priority: "low",
  tags: ["SET_USER_AGENT", "USER_AGENT"],
  override: true
};
var getUserAgentPlugin = /* @__PURE__ */__name(config => ({
  applyToStack: /* @__PURE__ */__name(clientStack => {
    clientStack.add(userAgentMiddleware(config), getUserAgentMiddlewareOptions);
  }, "applyToStack")
}), "getUserAgentPlugin");
// Annotate the CommonJS export names for ESM import in node:

0 && (module.exports = {
  DEFAULT_UA_APP_ID,
  resolveUserAgentConfig,
  userAgentMiddleware,
  getUserAgentMiddlewareOptions,
  getUserAgentPlugin
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfX2RlZlByb3AiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsIl9fZ2V0T3duUHJvcERlc2MiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJfX2dldE93blByb3BOYW1lcyIsImdldE93blByb3BlcnR5TmFtZXMiLCJfX2hhc093blByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsIl9fbmFtZSIsInRhcmdldCIsInZhbHVlIiwiY29uZmlndXJhYmxlIiwiX19leHBvcnQiLCJhbGwiLCJuYW1lIiwiZ2V0IiwiZW51bWVyYWJsZSIsIl9fY29weVByb3BzIiwidG8iLCJmcm9tIiwiZXhjZXB0IiwiZGVzYyIsImtleSIsImNhbGwiLCJfX3RvQ29tbW9uSlMiLCJtb2QiLCJpbmRleF9leHBvcnRzIiwiREVGQVVMVF9VQV9BUFBfSUQiLCJnZXRVc2VyQWdlbnRNaWRkbGV3YXJlT3B0aW9ucyIsImdldFVzZXJBZ2VudFBsdWdpbiIsInJlc29sdmVVc2VyQWdlbnRDb25maWciLCJ1c2VyQWdlbnRNaWRkbGV3YXJlIiwibW9kdWxlIiwiZXhwb3J0cyIsImltcG9ydF9jb3JlIiwicmVxdWlyZSIsImlzVmFsaWRVc2VyQWdlbnRBcHBJZCIsImFwcElkIiwibGVuZ3RoIiwiaW5wdXQiLCJub3JtYWxpemVkQXBwSWRQcm92aWRlciIsIm5vcm1hbGl6ZVByb3ZpZGVyIiwidXNlckFnZW50QXBwSWQiLCJjdXN0b21Vc2VyQWdlbnQiLCJhc3NpZ24iLCJsb2dnZXIiLCJjb25zdHJ1Y3RvciIsImNvbnNvbGUiLCJ3YXJuIiwiaW1wb3J0X3V0aWxfZW5kcG9pbnRzIiwiaW1wb3J0X3Byb3RvY29sX2h0dHAiLCJpbXBvcnRfY29yZTIiLCJBQ0NPVU5UX0lEX0VORFBPSU5UX1JFR0VYIiwiY2hlY2tGZWF0dXJlcyIsImNvbnRleHQiLCJjb25maWciLCJhcmdzIiwicmVxdWVzdCIsImhlYWRlcnMiLCJzZXRGZWF0dXJlIiwicmV0cnlTdHJhdGVneSIsImFjcXVpcmVJbml0aWFsUmV0cnlUb2tlbiIsImluY2x1ZGVzIiwiYWNjb3VudElkRW5kcG9pbnRNb2RlIiwiZW5kcG9pbnRWMiIsIlN0cmluZyIsInVybCIsImhvc3RuYW1lIiwibWF0Y2giLCJpZGVudGl0eSIsIl9fc21pdGh5X2NvbnRleHQiLCJzZWxlY3RlZEh0dHBBdXRoU2NoZW1lIiwiJHNvdXJjZSIsImNyZWRlbnRpYWxzIiwiYWNjb3VudElkIiwiZW50cmllcyIsIlVTRVJfQUdFTlQiLCJYX0FNWl9VU0VSX0FHRU5UIiwiU1BBQ0UiLCJVQV9OQU1FX1NFUEFSQVRPUiIsIlVBX05BTUVfRVNDQVBFX1JFR0VYIiwiVUFfVkFMVUVfRVNDQVBFX1JFR0VYIiwiVUFfRVNDQVBFX0NIQVIiLCJCWVRFX0xJTUlUIiwiZW5jb2RlRmVhdHVyZXMiLCJmZWF0dXJlcyIsImJ1ZmZlciIsInZhbCIsIm9wdGlvbnMiLCJuZXh0IiwiSHR0cFJlcXVlc3QiLCJpc0luc3RhbmNlIiwidXNlckFnZW50IiwibWFwIiwiZXNjYXBlVXNlckFnZW50IiwiZGVmYXVsdFVzZXJBZ2VudCIsImRlZmF1bHRVc2VyQWdlbnRQcm92aWRlciIsImF3c0NvbnRleHQiLCJwdXNoIiwiX19hd3Nfc2RrX2NvbnRleHQiLCJwcmVmaXgiLCJnZXRVc2VyQWdlbnRQcmVmaXgiLCJzZGtVc2VyQWdlbnRWYWx1ZSIsImNvbmNhdCIsImpvaW4iLCJub3JtYWxVQVZhbHVlIiwiZmlsdGVyIiwic2VjdGlvbiIsInN0YXJ0c1dpdGgiLCJydW50aW1lIiwidXNlckFnZW50UGFpciIsInNwbGl0IiwicGFydCIsInJlcGxhY2UiLCJ2ZXJzaW9uIiwicHJlZml4U2VwYXJhdG9ySW5kZXgiLCJpbmRleE9mIiwic3Vic3RyaW5nIiwidWFOYW1lIiwidG9Mb3dlckNhc2UiLCJpdGVtIiwicmVkdWNlIiwiYWNjIiwiaW5kZXgiLCJzdGVwIiwicHJpb3JpdHkiLCJ0YWdzIiwib3ZlcnJpZGUiLCJhcHBseVRvU3RhY2siLCJjbGllbnRTdGFjayIsImFkZCJdLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX19uYW1lID0gKHRhcmdldCwgdmFsdWUpID0+IF9fZGVmUHJvcCh0YXJnZXQsIFwibmFtZVwiLCB7IHZhbHVlLCBjb25maWd1cmFibGU6IHRydWUgfSk7XG52YXIgX19leHBvcnQgPSAodGFyZ2V0LCBhbGwpID0+IHtcbiAgZm9yICh2YXIgbmFtZSBpbiBhbGwpXG4gICAgX19kZWZQcm9wKHRhcmdldCwgbmFtZSwgeyBnZXQ6IGFsbFtuYW1lXSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbn07XG52YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4ge1xuICBpZiAoZnJvbSAmJiB0eXBlb2YgZnJvbSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZnJvbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIF9fZ2V0T3duUHJvcE5hbWVzKGZyb20pKVxuICAgICAgaWYgKCFfX2hhc093blByb3AuY2FsbCh0bywga2V5KSAmJiBrZXkgIT09IGV4Y2VwdClcbiAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pO1xuICB9XG4gIHJldHVybiB0bztcbn07XG52YXIgX190b0NvbW1vbkpTID0gKG1vZCkgPT4gX19jb3B5UHJvcHMoX19kZWZQcm9wKHt9LCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KSwgbW9kKTtcblxuLy8gc3JjL2luZGV4LnRzXG52YXIgaW5kZXhfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoaW5kZXhfZXhwb3J0cywge1xuICBERUZBVUxUX1VBX0FQUF9JRDogKCkgPT4gREVGQVVMVF9VQV9BUFBfSUQsXG4gIGdldFVzZXJBZ2VudE1pZGRsZXdhcmVPcHRpb25zOiAoKSA9PiBnZXRVc2VyQWdlbnRNaWRkbGV3YXJlT3B0aW9ucyxcbiAgZ2V0VXNlckFnZW50UGx1Z2luOiAoKSA9PiBnZXRVc2VyQWdlbnRQbHVnaW4sXG4gIHJlc29sdmVVc2VyQWdlbnRDb25maWc6ICgpID0+IHJlc29sdmVVc2VyQWdlbnRDb25maWcsXG4gIHVzZXJBZ2VudE1pZGRsZXdhcmU6ICgpID0+IHVzZXJBZ2VudE1pZGRsZXdhcmVcbn0pO1xubW9kdWxlLmV4cG9ydHMgPSBfX3RvQ29tbW9uSlMoaW5kZXhfZXhwb3J0cyk7XG5cbi8vIHNyYy9jb25maWd1cmF0aW9ucy50c1xudmFyIGltcG9ydF9jb3JlID0gcmVxdWlyZShcIkBzbWl0aHkvY29yZVwiKTtcbnZhciBERUZBVUxUX1VBX0FQUF9JRCA9IHZvaWQgMDtcbmZ1bmN0aW9uIGlzVmFsaWRVc2VyQWdlbnRBcHBJZChhcHBJZCkge1xuICBpZiAoYXBwSWQgPT09IHZvaWQgMCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiB0eXBlb2YgYXBwSWQgPT09IFwic3RyaW5nXCIgJiYgYXBwSWQubGVuZ3RoIDw9IDUwO1xufVxuX19uYW1lKGlzVmFsaWRVc2VyQWdlbnRBcHBJZCwgXCJpc1ZhbGlkVXNlckFnZW50QXBwSWRcIik7XG5mdW5jdGlvbiByZXNvbHZlVXNlckFnZW50Q29uZmlnKGlucHV0KSB7XG4gIGNvbnN0IG5vcm1hbGl6ZWRBcHBJZFByb3ZpZGVyID0gKDAsIGltcG9ydF9jb3JlLm5vcm1hbGl6ZVByb3ZpZGVyKShpbnB1dC51c2VyQWdlbnRBcHBJZCA/PyBERUZBVUxUX1VBX0FQUF9JRCk7XG4gIGNvbnN0IHsgY3VzdG9tVXNlckFnZW50IH0gPSBpbnB1dDtcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oaW5wdXQsIHtcbiAgICBjdXN0b21Vc2VyQWdlbnQ6IHR5cGVvZiBjdXN0b21Vc2VyQWdlbnQgPT09IFwic3RyaW5nXCIgPyBbW2N1c3RvbVVzZXJBZ2VudF1dIDogY3VzdG9tVXNlckFnZW50LFxuICAgIHVzZXJBZ2VudEFwcElkOiAvKiBAX19QVVJFX18gKi8gX19uYW1lKGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFwcElkID0gYXdhaXQgbm9ybWFsaXplZEFwcElkUHJvdmlkZXIoKTtcbiAgICAgIGlmICghaXNWYWxpZFVzZXJBZ2VudEFwcElkKGFwcElkKSkge1xuICAgICAgICBjb25zdCBsb2dnZXIgPSBpbnB1dC5sb2dnZXI/LmNvbnN0cnVjdG9yPy5uYW1lID09PSBcIk5vT3BMb2dnZXJcIiB8fCAhaW5wdXQubG9nZ2VyID8gY29uc29sZSA6IGlucHV0LmxvZ2dlcjtcbiAgICAgICAgaWYgKHR5cGVvZiBhcHBJZCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGxvZ2dlcj8ud2FybihcInVzZXJBZ2VudEFwcElkIG11c3QgYmUgYSBzdHJpbmcgb3IgdW5kZWZpbmVkLlwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChhcHBJZC5sZW5ndGggPiA1MCkge1xuICAgICAgICAgIGxvZ2dlcj8ud2FybihcIlRoZSBwcm92aWRlZCB1c2VyQWdlbnRBcHBJZCBleGNlZWRzIHRoZSBtYXhpbXVtIGxlbmd0aCBvZiA1MCBjaGFyYWN0ZXJzLlwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGFwcElkO1xuICAgIH0sIFwidXNlckFnZW50QXBwSWRcIilcbiAgfSk7XG59XG5fX25hbWUocmVzb2x2ZVVzZXJBZ2VudENvbmZpZywgXCJyZXNvbHZlVXNlckFnZW50Q29uZmlnXCIpO1xuXG4vLyBzcmMvdXNlci1hZ2VudC1taWRkbGV3YXJlLnRzXG52YXIgaW1wb3J0X3V0aWxfZW5kcG9pbnRzID0gcmVxdWlyZShcIkBhd3Mtc2RrL3V0aWwtZW5kcG9pbnRzXCIpO1xudmFyIGltcG9ydF9wcm90b2NvbF9odHRwID0gcmVxdWlyZShcIkBzbWl0aHkvcHJvdG9jb2wtaHR0cFwiKTtcblxuLy8gc3JjL2NoZWNrLWZlYXR1cmVzLnRzXG52YXIgaW1wb3J0X2NvcmUyID0gcmVxdWlyZShcIkBhd3Mtc2RrL2NvcmVcIik7XG52YXIgQUNDT1VOVF9JRF9FTkRQT0lOVF9SRUdFWCA9IC9cXGR7MTJ9XFwuZGRiLztcbmFzeW5jIGZ1bmN0aW9uIGNoZWNrRmVhdHVyZXMoY29udGV4dCwgY29uZmlnLCBhcmdzKSB7XG4gIGNvbnN0IHJlcXVlc3QgPSBhcmdzLnJlcXVlc3Q7XG4gIGlmIChyZXF1ZXN0Py5oZWFkZXJzPy5bXCJzbWl0aHktcHJvdG9jb2xcIl0gPT09IFwicnBjLXYyLWNib3JcIikge1xuICAgICgwLCBpbXBvcnRfY29yZTIuc2V0RmVhdHVyZSkoY29udGV4dCwgXCJQUk9UT0NPTF9SUENfVjJfQ0JPUlwiLCBcIk1cIik7XG4gIH1cbiAgaWYgKHR5cGVvZiBjb25maWcucmV0cnlTdHJhdGVneSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgY29uc3QgcmV0cnlTdHJhdGVneSA9IGF3YWl0IGNvbmZpZy5yZXRyeVN0cmF0ZWd5KCk7XG4gICAgaWYgKHR5cGVvZiByZXRyeVN0cmF0ZWd5LmFjcXVpcmVJbml0aWFsUmV0cnlUb2tlbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBpZiAocmV0cnlTdHJhdGVneS5jb25zdHJ1Y3Rvcj8ubmFtZT8uaW5jbHVkZXMoXCJBZGFwdGl2ZVwiKSkge1xuICAgICAgICAoMCwgaW1wb3J0X2NvcmUyLnNldEZlYXR1cmUpKGNvbnRleHQsIFwiUkVUUllfTU9ERV9BREFQVElWRVwiLCBcIkZcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAoMCwgaW1wb3J0X2NvcmUyLnNldEZlYXR1cmUpKGNvbnRleHQsIFwiUkVUUllfTU9ERV9TVEFOREFSRFwiLCBcIkVcIik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICgwLCBpbXBvcnRfY29yZTIuc2V0RmVhdHVyZSkoY29udGV4dCwgXCJSRVRSWV9NT0RFX0xFR0FDWVwiLCBcIkRcIik7XG4gICAgfVxuICB9XG4gIGlmICh0eXBlb2YgY29uZmlnLmFjY291bnRJZEVuZHBvaW50TW9kZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgY29uc3QgZW5kcG9pbnRWMiA9IGNvbnRleHQuZW5kcG9pbnRWMjtcbiAgICBpZiAoU3RyaW5nKGVuZHBvaW50VjI/LnVybD8uaG9zdG5hbWUpLm1hdGNoKEFDQ09VTlRfSURfRU5EUE9JTlRfUkVHRVgpKSB7XG4gICAgICAoMCwgaW1wb3J0X2NvcmUyLnNldEZlYXR1cmUpKGNvbnRleHQsIFwiQUNDT1VOVF9JRF9FTkRQT0lOVFwiLCBcIk9cIik7XG4gICAgfVxuICAgIHN3aXRjaCAoYXdhaXQgY29uZmlnLmFjY291bnRJZEVuZHBvaW50TW9kZT8uKCkpIHtcbiAgICAgIGNhc2UgXCJkaXNhYmxlZFwiOlxuICAgICAgICAoMCwgaW1wb3J0X2NvcmUyLnNldEZlYXR1cmUpKGNvbnRleHQsIFwiQUNDT1VOVF9JRF9NT0RFX0RJU0FCTEVEXCIsIFwiUVwiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwicHJlZmVycmVkXCI6XG4gICAgICAgICgwLCBpbXBvcnRfY29yZTIuc2V0RmVhdHVyZSkoY29udGV4dCwgXCJBQ0NPVU5UX0lEX01PREVfUFJFRkVSUkVEXCIsIFwiUFwiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwicmVxdWlyZWRcIjpcbiAgICAgICAgKDAsIGltcG9ydF9jb3JlMi5zZXRGZWF0dXJlKShjb250ZXh0LCBcIkFDQ09VTlRfSURfTU9ERV9SRVFVSVJFRFwiLCBcIlJcIik7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBjb25zdCBpZGVudGl0eSA9IGNvbnRleHQuX19zbWl0aHlfY29udGV4dD8uc2VsZWN0ZWRIdHRwQXV0aFNjaGVtZT8uaWRlbnRpdHk7XG4gIGlmIChpZGVudGl0eT8uJHNvdXJjZSkge1xuICAgIGNvbnN0IGNyZWRlbnRpYWxzID0gaWRlbnRpdHk7XG4gICAgaWYgKGNyZWRlbnRpYWxzLmFjY291bnRJZCkge1xuICAgICAgKDAsIGltcG9ydF9jb3JlMi5zZXRGZWF0dXJlKShjb250ZXh0LCBcIlJFU09MVkVEX0FDQ09VTlRfSURcIiwgXCJUXCIpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhjcmVkZW50aWFscy4kc291cmNlID8/IHt9KSkge1xuICAgICAgKDAsIGltcG9ydF9jb3JlMi5zZXRGZWF0dXJlKShjb250ZXh0LCBrZXksIHZhbHVlKTtcbiAgICB9XG4gIH1cbn1cbl9fbmFtZShjaGVja0ZlYXR1cmVzLCBcImNoZWNrRmVhdHVyZXNcIik7XG5cbi8vIHNyYy9jb25zdGFudHMudHNcbnZhciBVU0VSX0FHRU5UID0gXCJ1c2VyLWFnZW50XCI7XG52YXIgWF9BTVpfVVNFUl9BR0VOVCA9IFwieC1hbXotdXNlci1hZ2VudFwiO1xudmFyIFNQQUNFID0gXCIgXCI7XG52YXIgVUFfTkFNRV9TRVBBUkFUT1IgPSBcIi9cIjtcbnZhciBVQV9OQU1FX0VTQ0FQRV9SRUdFWCA9IC9bXlxcIVxcJFxcJVxcJlxcJ1xcKlxcK1xcLVxcLlxcXlxcX1xcYFxcfFxcflxcZFxcd10vZztcbnZhciBVQV9WQUxVRV9FU0NBUEVfUkVHRVggPSAvW15cXCFcXCRcXCVcXCZcXCdcXCpcXCtcXC1cXC5cXF5cXF9cXGBcXHxcXH5cXGRcXHdcXCNdL2c7XG52YXIgVUFfRVNDQVBFX0NIQVIgPSBcIi1cIjtcblxuLy8gc3JjL2VuY29kZS1mZWF0dXJlcy50c1xudmFyIEJZVEVfTElNSVQgPSAxMDI0O1xuZnVuY3Rpb24gZW5jb2RlRmVhdHVyZXMoZmVhdHVyZXMpIHtcbiAgbGV0IGJ1ZmZlciA9IFwiXCI7XG4gIGZvciAoY29uc3Qga2V5IGluIGZlYXR1cmVzKSB7XG4gICAgY29uc3QgdmFsID0gZmVhdHVyZXNba2V5XTtcbiAgICBpZiAoYnVmZmVyLmxlbmd0aCArIHZhbC5sZW5ndGggKyAxIDw9IEJZVEVfTElNSVQpIHtcbiAgICAgIGlmIChidWZmZXIubGVuZ3RoKSB7XG4gICAgICAgIGJ1ZmZlciArPSBcIixcIiArIHZhbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJ1ZmZlciArPSB2YWw7XG4gICAgICB9XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgYnJlYWs7XG4gIH1cbiAgcmV0dXJuIGJ1ZmZlcjtcbn1cbl9fbmFtZShlbmNvZGVGZWF0dXJlcywgXCJlbmNvZGVGZWF0dXJlc1wiKTtcblxuLy8gc3JjL3VzZXItYWdlbnQtbWlkZGxld2FyZS50c1xudmFyIHVzZXJBZ2VudE1pZGRsZXdhcmUgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChvcHRpb25zKSA9PiAobmV4dCwgY29udGV4dCkgPT4gYXN5bmMgKGFyZ3MpID0+IHtcbiAgY29uc3QgeyByZXF1ZXN0IH0gPSBhcmdzO1xuICBpZiAoIWltcG9ydF9wcm90b2NvbF9odHRwLkh0dHBSZXF1ZXN0LmlzSW5zdGFuY2UocmVxdWVzdCkpIHtcbiAgICByZXR1cm4gbmV4dChhcmdzKTtcbiAgfVxuICBjb25zdCB7IGhlYWRlcnMgfSA9IHJlcXVlc3Q7XG4gIGNvbnN0IHVzZXJBZ2VudCA9IGNvbnRleHQ/LnVzZXJBZ2VudD8ubWFwKGVzY2FwZVVzZXJBZ2VudCkgfHwgW107XG4gIGNvbnN0IGRlZmF1bHRVc2VyQWdlbnQgPSAoYXdhaXQgb3B0aW9ucy5kZWZhdWx0VXNlckFnZW50UHJvdmlkZXIoKSkubWFwKGVzY2FwZVVzZXJBZ2VudCk7XG4gIGF3YWl0IGNoZWNrRmVhdHVyZXMoY29udGV4dCwgb3B0aW9ucywgYXJncyk7XG4gIGNvbnN0IGF3c0NvbnRleHQgPSBjb250ZXh0O1xuICBkZWZhdWx0VXNlckFnZW50LnB1c2goXG4gICAgYG0vJHtlbmNvZGVGZWF0dXJlcyhcbiAgICAgIE9iamVjdC5hc3NpZ24oe30sIGNvbnRleHQuX19zbWl0aHlfY29udGV4dD8uZmVhdHVyZXMsIGF3c0NvbnRleHQuX19hd3Nfc2RrX2NvbnRleHQ/LmZlYXR1cmVzKVxuICAgICl9YFxuICApO1xuICBjb25zdCBjdXN0b21Vc2VyQWdlbnQgPSBvcHRpb25zPy5jdXN0b21Vc2VyQWdlbnQ/Lm1hcChlc2NhcGVVc2VyQWdlbnQpIHx8IFtdO1xuICBjb25zdCBhcHBJZCA9IGF3YWl0IG9wdGlvbnMudXNlckFnZW50QXBwSWQoKTtcbiAgaWYgKGFwcElkKSB7XG4gICAgZGVmYXVsdFVzZXJBZ2VudC5wdXNoKGVzY2FwZVVzZXJBZ2VudChbYGFwcC8ke2FwcElkfWBdKSk7XG4gIH1cbiAgY29uc3QgcHJlZml4ID0gKDAsIGltcG9ydF91dGlsX2VuZHBvaW50cy5nZXRVc2VyQWdlbnRQcmVmaXgpKCk7XG4gIGNvbnN0IHNka1VzZXJBZ2VudFZhbHVlID0gKHByZWZpeCA/IFtwcmVmaXhdIDogW10pLmNvbmNhdChbLi4uZGVmYXVsdFVzZXJBZ2VudCwgLi4udXNlckFnZW50LCAuLi5jdXN0b21Vc2VyQWdlbnRdKS5qb2luKFNQQUNFKTtcbiAgY29uc3Qgbm9ybWFsVUFWYWx1ZSA9IFtcbiAgICAuLi5kZWZhdWx0VXNlckFnZW50LmZpbHRlcigoc2VjdGlvbikgPT4gc2VjdGlvbi5zdGFydHNXaXRoKFwiYXdzLXNkay1cIikpLFxuICAgIC4uLmN1c3RvbVVzZXJBZ2VudFxuICBdLmpvaW4oU1BBQ0UpO1xuICBpZiAob3B0aW9ucy5ydW50aW1lICE9PSBcImJyb3dzZXJcIikge1xuICAgIGlmIChub3JtYWxVQVZhbHVlKSB7XG4gICAgICBoZWFkZXJzW1hfQU1aX1VTRVJfQUdFTlRdID0gaGVhZGVyc1tYX0FNWl9VU0VSX0FHRU5UXSA/IGAke2hlYWRlcnNbVVNFUl9BR0VOVF19ICR7bm9ybWFsVUFWYWx1ZX1gIDogbm9ybWFsVUFWYWx1ZTtcbiAgICB9XG4gICAgaGVhZGVyc1tVU0VSX0FHRU5UXSA9IHNka1VzZXJBZ2VudFZhbHVlO1xuICB9IGVsc2Uge1xuICAgIGhlYWRlcnNbWF9BTVpfVVNFUl9BR0VOVF0gPSBzZGtVc2VyQWdlbnRWYWx1ZTtcbiAgfVxuICByZXR1cm4gbmV4dCh7XG4gICAgLi4uYXJncyxcbiAgICByZXF1ZXN0XG4gIH0pO1xufSwgXCJ1c2VyQWdlbnRNaWRkbGV3YXJlXCIpO1xudmFyIGVzY2FwZVVzZXJBZ2VudCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHVzZXJBZ2VudFBhaXIpID0+IHtcbiAgY29uc3QgbmFtZSA9IHVzZXJBZ2VudFBhaXJbMF0uc3BsaXQoVUFfTkFNRV9TRVBBUkFUT1IpLm1hcCgocGFydCkgPT4gcGFydC5yZXBsYWNlKFVBX05BTUVfRVNDQVBFX1JFR0VYLCBVQV9FU0NBUEVfQ0hBUikpLmpvaW4oVUFfTkFNRV9TRVBBUkFUT1IpO1xuICBjb25zdCB2ZXJzaW9uID0gdXNlckFnZW50UGFpclsxXT8ucmVwbGFjZShVQV9WQUxVRV9FU0NBUEVfUkVHRVgsIFVBX0VTQ0FQRV9DSEFSKTtcbiAgY29uc3QgcHJlZml4U2VwYXJhdG9ySW5kZXggPSBuYW1lLmluZGV4T2YoVUFfTkFNRV9TRVBBUkFUT1IpO1xuICBjb25zdCBwcmVmaXggPSBuYW1lLnN1YnN0cmluZygwLCBwcmVmaXhTZXBhcmF0b3JJbmRleCk7XG4gIGxldCB1YU5hbWUgPSBuYW1lLnN1YnN0cmluZyhwcmVmaXhTZXBhcmF0b3JJbmRleCArIDEpO1xuICBpZiAocHJlZml4ID09PSBcImFwaVwiKSB7XG4gICAgdWFOYW1lID0gdWFOYW1lLnRvTG93ZXJDYXNlKCk7XG4gIH1cbiAgcmV0dXJuIFtwcmVmaXgsIHVhTmFtZSwgdmVyc2lvbl0uZmlsdGVyKChpdGVtKSA9PiBpdGVtICYmIGl0ZW0ubGVuZ3RoID4gMCkucmVkdWNlKChhY2MsIGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgc3dpdGNoIChpbmRleCkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcmV0dXJuIGAke2FjY30vJHtpdGVtfWA7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gYCR7YWNjfSMke2l0ZW19YDtcbiAgICB9XG4gIH0sIFwiXCIpO1xufSwgXCJlc2NhcGVVc2VyQWdlbnRcIik7XG52YXIgZ2V0VXNlckFnZW50TWlkZGxld2FyZU9wdGlvbnMgPSB7XG4gIG5hbWU6IFwiZ2V0VXNlckFnZW50TWlkZGxld2FyZVwiLFxuICBzdGVwOiBcImJ1aWxkXCIsXG4gIHByaW9yaXR5OiBcImxvd1wiLFxuICB0YWdzOiBbXCJTRVRfVVNFUl9BR0VOVFwiLCBcIlVTRVJfQUdFTlRcIl0sXG4gIG92ZXJyaWRlOiB0cnVlXG59O1xudmFyIGdldFVzZXJBZ2VudFBsdWdpbiA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGNvbmZpZykgPT4gKHtcbiAgYXBwbHlUb1N0YWNrOiAvKiBAX19QVVJFX18gKi8gX19uYW1lKChjbGllbnRTdGFjaykgPT4ge1xuICAgIGNsaWVudFN0YWNrLmFkZCh1c2VyQWdlbnRNaWRkbGV3YXJlKGNvbmZpZyksIGdldFVzZXJBZ2VudE1pZGRsZXdhcmVPcHRpb25zKTtcbiAgfSwgXCJhcHBseVRvU3RhY2tcIilcbn0pLCBcImdldFVzZXJBZ2VudFBsdWdpblwiKTtcbi8vIEFubm90YXRlIHRoZSBDb21tb25KUyBleHBvcnQgbmFtZXMgZm9yIEVTTSBpbXBvcnQgaW4gbm9kZTpcblxuMCAmJiAobW9kdWxlLmV4cG9ydHMgPSB7XG4gIERFRkFVTFRfVUFfQVBQX0lELFxuICByZXNvbHZlVXNlckFnZW50Q29uZmlnLFxuICB1c2VyQWdlbnRNaWRkbGV3YXJlLFxuICBnZXRVc2VyQWdlbnRNaWRkbGV3YXJlT3B0aW9ucyxcbiAgZ2V0VXNlckFnZW50UGx1Z2luXG59KTtcblxuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUNaLElBQUlBLFNBQVMsR0FBR0MsTUFBTSxDQUFDQyxjQUFjO0FBQ3JDLElBQUlD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