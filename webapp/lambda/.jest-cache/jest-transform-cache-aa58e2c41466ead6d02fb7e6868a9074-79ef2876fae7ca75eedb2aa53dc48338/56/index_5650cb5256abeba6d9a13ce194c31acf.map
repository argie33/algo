{"version":3,"names":["__create","Object","create","__defProp","defineProperty","__getOwnPropDesc","getOwnPropertyDescriptor","__getOwnPropNames","getOwnPropertyNames","__getProtoOf","getPrototypeOf","__hasOwnProp","prototype","hasOwnProperty","__name","target","value","configurable","__export","all","name","get","enumerable","__copyProps","to","from","except","desc","key","call","__toESM","mod","isNodeMode","__esModule","__toCommonJS","index_exports","credentialsTreatedAsExpired","credentialsWillNeedRefresh","defaultProvider","module","exports","import_credential_provider_env","require","import_shared_ini_file_loader","import_property_provider","ENV_IMDS_DISABLED","remoteProvider","init","ENV_CMDS_FULL_URI","ENV_CMDS_RELATIVE_URI","fromContainerMetadata","fromInstanceMetadata","Promise","resolve","then","process","env","logger","debug","fromHttp","chain","CredentialsProviderError","multipleCredentialSourceWarningEmitted","memoize","profile","ENV_PROFILE","envStaticCredentialsAreSet","ENV_KEY","ENV_SECRET","warnFn","warn","constructor","console","tryNextLink","fromEnv","ssoStartUrl","ssoAccountId","ssoRegion","ssoRoleName","ssoSession","fromSSO","fromIni","fromProcess","fromTokenFile","credentials","expiration","getTime","Date","now"],"sources":["index.js"],"sourcesContent":["\"use strict\";\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: true });\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\n\n// src/index.ts\nvar index_exports = {};\n__export(index_exports, {\n  credentialsTreatedAsExpired: () => credentialsTreatedAsExpired,\n  credentialsWillNeedRefresh: () => credentialsWillNeedRefresh,\n  defaultProvider: () => defaultProvider\n});\nmodule.exports = __toCommonJS(index_exports);\n\n// src/defaultProvider.ts\nvar import_credential_provider_env = require(\"@aws-sdk/credential-provider-env\");\n\nvar import_shared_ini_file_loader = require(\"@smithy/shared-ini-file-loader\");\n\n// src/remoteProvider.ts\nvar import_property_provider = require(\"@smithy/property-provider\");\nvar ENV_IMDS_DISABLED = \"AWS_EC2_METADATA_DISABLED\";\nvar remoteProvider = /* @__PURE__ */ __name(async (init) => {\n  const { ENV_CMDS_FULL_URI, ENV_CMDS_RELATIVE_URI, fromContainerMetadata, fromInstanceMetadata } = await Promise.resolve().then(() => __toESM(require(\"@smithy/credential-provider-imds\")));\n  if (process.env[ENV_CMDS_RELATIVE_URI] || process.env[ENV_CMDS_FULL_URI]) {\n    init.logger?.debug(\"@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata\");\n    const { fromHttp } = await Promise.resolve().then(() => __toESM(require(\"@aws-sdk/credential-provider-http\")));\n    return (0, import_property_provider.chain)(fromHttp(init), fromContainerMetadata(init));\n  }\n  if (process.env[ENV_IMDS_DISABLED] && process.env[ENV_IMDS_DISABLED] !== \"false\") {\n    return async () => {\n      throw new import_property_provider.CredentialsProviderError(\"EC2 Instance Metadata Service access disabled\", { logger: init.logger });\n    };\n  }\n  init.logger?.debug(\"@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata\");\n  return fromInstanceMetadata(init);\n}, \"remoteProvider\");\n\n// src/defaultProvider.ts\nvar multipleCredentialSourceWarningEmitted = false;\nvar defaultProvider = /* @__PURE__ */ __name((init = {}) => (0, import_property_provider.memoize)(\n  (0, import_property_provider.chain)(\n    async () => {\n      const profile = init.profile ?? process.env[import_shared_ini_file_loader.ENV_PROFILE];\n      if (profile) {\n        const envStaticCredentialsAreSet = process.env[import_credential_provider_env.ENV_KEY] && process.env[import_credential_provider_env.ENV_SECRET];\n        if (envStaticCredentialsAreSet) {\n          if (!multipleCredentialSourceWarningEmitted) {\n            const warnFn = init.logger?.warn && init.logger?.constructor?.name !== \"NoOpLogger\" ? init.logger.warn : console.warn;\n            warnFn(\n              `@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:\n    Multiple credential sources detected: \n    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.\n    This SDK will proceed with the AWS_PROFILE value.\n    \n    However, a future version may change this behavior to prefer the ENV static credentials.\n    Please ensure that your environment only sets either the AWS_PROFILE or the\n    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.\n`\n            );\n            multipleCredentialSourceWarningEmitted = true;\n          }\n        }\n        throw new import_property_provider.CredentialsProviderError(\"AWS_PROFILE is set, skipping fromEnv provider.\", {\n          logger: init.logger,\n          tryNextLink: true\n        });\n      }\n      init.logger?.debug(\"@aws-sdk/credential-provider-node - defaultProvider::fromEnv\");\n      return (0, import_credential_provider_env.fromEnv)(init)();\n    },\n    async () => {\n      init.logger?.debug(\"@aws-sdk/credential-provider-node - defaultProvider::fromSSO\");\n      const { ssoStartUrl, ssoAccountId, ssoRegion, ssoRoleName, ssoSession } = init;\n      if (!ssoStartUrl && !ssoAccountId && !ssoRegion && !ssoRoleName && !ssoSession) {\n        throw new import_property_provider.CredentialsProviderError(\n          \"Skipping SSO provider in default chain (inputs do not include SSO fields).\",\n          { logger: init.logger }\n        );\n      }\n      const { fromSSO } = await Promise.resolve().then(() => __toESM(require(\"@aws-sdk/credential-provider-sso\")));\n      return fromSSO(init)();\n    },\n    async () => {\n      init.logger?.debug(\"@aws-sdk/credential-provider-node - defaultProvider::fromIni\");\n      const { fromIni } = await Promise.resolve().then(() => __toESM(require(\"@aws-sdk/credential-provider-ini\")));\n      return fromIni(init)();\n    },\n    async () => {\n      init.logger?.debug(\"@aws-sdk/credential-provider-node - defaultProvider::fromProcess\");\n      const { fromProcess } = await Promise.resolve().then(() => __toESM(require(\"@aws-sdk/credential-provider-process\")));\n      return fromProcess(init)();\n    },\n    async () => {\n      init.logger?.debug(\"@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile\");\n      const { fromTokenFile } = await Promise.resolve().then(() => __toESM(require(\"@aws-sdk/credential-provider-web-identity\")));\n      return fromTokenFile(init)();\n    },\n    async () => {\n      init.logger?.debug(\"@aws-sdk/credential-provider-node - defaultProvider::remoteProvider\");\n      return (await remoteProvider(init))();\n    },\n    async () => {\n      throw new import_property_provider.CredentialsProviderError(\"Could not load credentials from any providers\", {\n        tryNextLink: false,\n        logger: init.logger\n      });\n    }\n  ),\n  credentialsTreatedAsExpired,\n  credentialsWillNeedRefresh\n), \"defaultProvider\");\nvar credentialsWillNeedRefresh = /* @__PURE__ */ __name((credentials) => credentials?.expiration !== void 0, \"credentialsWillNeedRefresh\");\nvar credentialsTreatedAsExpired = /* @__PURE__ */ __name((credentials) => credentials?.expiration !== void 0 && credentials.expiration.getTime() - Date.now() < 3e5, \"credentialsTreatedAsExpired\");\n// Annotate the CommonJS export names for ESM import in node:\n\n0 && (module.exports = {\n  defaultProvider,\n  credentialsWillNeedRefresh,\n  credentialsTreatedAsExpired\n});\n\n"],"mappings":"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","ignoreList":[]}