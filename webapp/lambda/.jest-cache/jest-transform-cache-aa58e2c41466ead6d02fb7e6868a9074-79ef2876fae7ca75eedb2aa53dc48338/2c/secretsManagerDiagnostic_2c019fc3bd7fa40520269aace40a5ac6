78977130e8b52a431dc9046bfe1b3dc2
/* istanbul ignore next */
function cov_1s4uaidpqk() {
  var path = "/home/stocks/algo/webapp/lambda/utils/secretsManagerDiagnostic.js";
  var hash = "19e9139db16b97a09e5fbd364a6ac53a3438a18e";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/home/stocks/algo/webapp/lambda/utils/secretsManagerDiagnostic.js",
    statementMap: {
      "0": {
        start: {
          line: 6,
          column: 56
        },
        end: {
          line: 6,
          column: 98
        }
      },
      "1": {
        start: {
          line: 10,
          column: 8
        },
        end: {
          line: 12,
          column: 11
        }
      },
      "2": {
        start: {
          line: 19,
          column: 28
        },
        end: {
          line: 19,
          column: 67
        }
      },
      "3": {
        start: {
          line: 20,
          column: 8
        },
        end: {
          line: 20,
          column: 83
        }
      },
      "4": {
        start: {
          line: 21,
          column: 8
        },
        end: {
          line: 21,
          column: 68
        }
      },
      "5": {
        start: {
          line: 22,
          column: 8
        },
        end: {
          line: 22,
          column: 80
        }
      },
      "6": {
        start: {
          line: 24,
          column: 8
        },
        end: {
          line: 137,
          column: 9
        }
      },
      "7": {
        start: {
          line: 26,
          column: 12
        },
        end: {
          line: 26,
          column: 78
        }
      },
      "8": {
        start: {
          line: 27,
          column: 28
        },
        end: {
          line: 27,
          column: 78
        }
      },
      "9": {
        start: {
          line: 28,
          column: 29
        },
        end: {
          line: 28,
          column: 60
        }
      },
      "10": {
        start: {
          line: 30,
          column: 12
        },
        end: {
          line: 30,
          column: 68
        }
      },
      "11": {
        start: {
          line: 31,
          column: 12
        },
        end: {
          line: 31,
          column: 91
        }
      },
      "12": {
        start: {
          line: 34,
          column: 33
        },
        end: {
          line: 34,
          column: 54
        }
      },
      "13": {
        start: {
          line: 35,
          column: 12
        },
        end: {
          line: 35,
          column: 87
        }
      },
      "14": {
        start: {
          line: 36,
          column: 12
        },
        end: {
          line: 36,
          column: 95
        }
      },
      "15": {
        start: {
          line: 37,
          column: 12
        },
        end: {
          line: 37,
          column: 88
        }
      },
      "16": {
        start: {
          line: 40,
          column: 12
        },
        end: {
          line: 52,
          column: 13
        }
      },
      "17": {
        start: {
          line: 41,
          column: 16
        },
        end: {
          line: 41,
          column: 92
        }
      },
      "18": {
        start: {
          line: 42,
          column: 16
        },
        end: {
          line: 42,
          column: 91
        }
      },
      "19": {
        start: {
          line: 43,
          column: 16
        },
        end: {
          line: 43,
          column: 77
        }
      },
      "20": {
        start: {
          line: 46,
          column: 16
        },
        end: {
          line: 51,
          column: 18
        }
      },
      "21": {
        start: {
          line: 55,
          column: 12
        },
        end: {
          line: 99,
          column: 13
        }
      },
      "22": {
        start: {
          line: 56,
          column: 16
        },
        end: {
          line: 56,
          column: 86
        }
      },
      "23": {
        start: {
          line: 58,
          column: 16
        },
        end: {
          line: 98,
          column: 17
        }
      },
      "24": {
        start: {
          line: 59,
          column: 35
        },
        end: {
          line: 59,
          column: 59
        }
      },
      "25": {
        start: {
          line: 60,
          column: 20
        },
        end: {
          line: 60,
          column: 78
        }
      },
      "26": {
        start: {
          line: 61,
          column: 20
        },
        end: {
          line: 61,
          column: 89
        }
      },
      "27": {
        start: {
          line: 63,
          column: 20
        },
        end: {
          line: 68,
          column: 22
        }
      },
      "28": {
        start: {
          line: 70,
          column: 20
        },
        end: {
          line: 70,
          column: 97
        }
      },
      "29": {
        start: {
          line: 73,
          column: 20
        },
        end: {
          line: 73,
          column: 88
        }
      },
      "30": {
        start: {
          line: 76,
          column: 40
        },
        end: {
          line: 76,
          column: 82
        }
      },
      "31": {
        start: {
          line: 77,
          column: 20
        },
        end: {
          line: 77,
          column: 98
        }
      },
      "32": {
        start: {
          line: 78,
          column: 20
        },
        end: {
          line: 78,
          column: 98
        }
      },
      "33": {
        start: {
          line: 80,
          column: 20
        },
        end: {
          line: 97,
          column: 21
        }
      },
      "34": {
        start: {
          line: 81,
          column: 39
        },
        end: {
          line: 81,
          column: 62
        }
      },
      "35": {
        start: {
          line: 82,
          column: 24
        },
        end: {
          line: 82,
          column: 97
        }
      },
      "36": {
        start: {
          line: 83,
          column: 24
        },
        end: {
          line: 88,
          column: 26
        }
      },
      "37": {
        start: {
          line: 90,
          column: 24
        },
        end: {
          line: 90,
          column: 127
        }
      },
      "38": {
        start: {
          line: 93,
          column: 24
        },
        end: {
          line: 93,
          column: 139
        }
      },
      "39": {
        start: {
          line: 96,
          column: 24
        },
        end: {
          line: 96,
          column: 113
        }
      },
      "40": {
        start: {
          line: 102,
          column: 12
        },
        end: {
          line: 120,
          column: 13
        }
      },
      "41": {
        start: {
          line: 103,
          column: 16
        },
        end: {
          line: 103,
          column: 93
        }
      },
      "42": {
        start: {
          line: 104,
          column: 37
        },
        end: {
          line: 104,
          column: 88
        }
      },
      "43": {
        start: {
          line: 105,
          column: 16
        },
        end: {
          line: 105,
          column: 95
        }
      },
      "44": {
        start: {
          line: 106,
          column: 16
        },
        end: {
          line: 106,
          column: 115
        }
      },
      "45": {
        start: {
          line: 108,
          column: 16
        },
        end: {
          line: 119,
          column: 17
        }
      },
      "46": {
        start: {
          line: 109,
          column: 35
        },
        end: {
          line: 109,
          column: 59
        }
      },
      "47": {
        start: {
          line: 110,
          column: 20
        },
        end: {
          line: 115,
          column: 22
        }
      },
      "48": {
        start: {
          line: 117,
          column: 20
        },
        end: {
          line: 117,
          column: 110
        }
      },
      "49": {
        start: {
          line: 118,
          column: 20
        },
        end: {
          line: 118,
          column: 43
        }
      },
      "50": {
        start: {
          line: 122,
          column: 12
        },
        end: {
          line: 122,
          column: 85
        }
      },
      "51": {
        start: {
          line: 125,
          column: 12
        },
        end: {
          line: 130,
          column: 15
        }
      },
      "52": {
        start: {
          line: 132,
          column: 12
        },
        end: {
          line: 136,
          column: 14
        }
      },
      "53": {
        start: {
          line: 144,
          column: 8
        },
        end: {
          line: 144,
          column: 83
        }
      },
      "54": {
        start: {
          line: 146,
          column: 26
        },
        end: {
          line: 146,
          column: 62
        }
      },
      "55": {
        start: {
          line: 148,
          column: 8
        },
        end: {
          line: 150,
          column: 9
        }
      },
      "56": {
        start: {
          line: 149,
          column: 12
        },
        end: {
          line: 149,
          column: 75
        }
      },
      "57": {
        start: {
          line: 152,
          column: 23
        },
        end: {
          line: 152,
          column: 39
        }
      },
      "58": {
        start: {
          line: 153,
          column: 8
        },
        end: {
          line: 153,
          column: 76
        }
      },
      "59": {
        start: {
          line: 156,
          column: 31
        },
        end: {
          line: 156,
          column: 73
        }
      },
      "60": {
        start: {
          line: 157,
          column: 30
        },
        end: {
          line: 157,
          column: 76
        }
      },
      "61": {
        start: {
          line: 157,
          column: 61
        },
        end: {
          line: 157,
          column: 75
        }
      },
      "62": {
        start: {
          line: 159,
          column: 8
        },
        end: {
          line: 161,
          column: 9
        }
      },
      "63": {
        start: {
          line: 160,
          column: 12
        },
        end: {
          line: 160,
          column: 93
        }
      },
      "64": {
        start: {
          line: 163,
          column: 8
        },
        end: {
          line: 169,
          column: 11
        }
      },
      "65": {
        start: {
          line: 171,
          column: 8
        },
        end: {
          line: 178,
          column: 10
        }
      },
      "66": {
        start: {
          line: 185,
          column: 8
        },
        end: {
          line: 192,
          column: 10
        }
      },
      "67": {
        start: {
          line: 186,
          column: 12
        },
        end: {
          line: 191,
          column: 13
        }
      },
      "68": {
        start: {
          line: 187,
          column: 16
        },
        end: {
          line: 187,
          column: 64
        }
      },
      "69": {
        start: {
          line: 189,
          column: 16
        },
        end: {
          line: 189,
          column: 87
        }
      },
      "70": {
        start: {
          line: 190,
          column: 16
        },
        end: {
          line: 190,
          column: 28
        }
      },
      "71": {
        start: {
          line: 196,
          column: 0
        },
        end: {
          line: 196,
          column: 42
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 9,
            column: 4
          },
          end: {
            line: 9,
            column: 5
          }
        },
        loc: {
          start: {
            line: 9,
            column: 18
          },
          end: {
            line: 13,
            column: 5
          }
        },
        line: 9
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 18,
            column: 4
          },
          end: {
            line: 18,
            column: 5
          }
        },
        loc: {
          start: {
            line: 18,
            column: 36
          },
          end: {
            line: 138,
            column: 5
          }
        },
        line: 18
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 143,
            column: 4
          },
          end: {
            line: 143,
            column: 5
          }
        },
        loc: {
          start: {
            line: 143,
            column: 40
          },
          end: {
            line: 179,
            column: 5
          }
        },
        line: 143
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 157,
            column: 52
          },
          end: {
            line: 157,
            column: 53
          }
        },
        loc: {
          start: {
            line: 157,
            column: 61
          },
          end: {
            line: 157,
            column: 75
          }
        },
        line: 157
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 184,
            column: 4
          },
          end: {
            line: 184,
            column: 5
          }
        },
        loc: {
          start: {
            line: 184,
            column: 41
          },
          end: {
            line: 193,
            column: 5
          }
        },
        line: 184
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 185,
            column: 15
          },
          end: {
            line: 185,
            column: 16
          }
        },
        loc: {
          start: {
            line: 185,
            column: 27
          },
          end: {
            line: 192,
            column: 9
          }
        },
        line: 185
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 11,
            column: 20
          },
          end: {
            line: 11,
            column: 90
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 11,
            column: 20
          },
          end: {
            line: 11,
            column: 49
          }
        }, {
          start: {
            line: 11,
            column: 53
          },
          end: {
            line: 11,
            column: 75
          }
        }, {
          start: {
            line: 11,
            column: 79
          },
          end: {
            line: 11,
            column: 90
          }
        }],
        line: 11
      },
      "1": {
        loc: {
          start: {
            line: 31,
            column: 74
          },
          end: {
            line: 31,
            column: 88
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 31,
            column: 74
          },
          end: {
            line: 31,
            column: 82
          }
        }, {
          start: {
            line: 31,
            column: 86
          },
          end: {
            line: 31,
            column: 88
          }
        }],
        line: 31
      },
      "2": {
        loc: {
          start: {
            line: 36,
            column: 68
          },
          end: {
            line: 36,
            column: 93
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 36,
            column: 68
          },
          end: {
            line: 36,
            column: 88
          }
        }, {
          start: {
            line: 36,
            column: 92
          },
          end: {
            line: 36,
            column: 93
          }
        }],
        line: 36
      },
      "3": {
        loc: {
          start: {
            line: 40,
            column: 12
          },
          end: {
            line: 52,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 40,
            column: 12
          },
          end: {
            line: 52,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 40
      },
      "4": {
        loc: {
          start: {
            line: 55,
            column: 12
          },
          end: {
            line: 99,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 55,
            column: 12
          },
          end: {
            line: 99,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 55
      },
      "5": {
        loc: {
          start: {
            line: 102,
            column: 12
          },
          end: {
            line: 120,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 102,
            column: 12
          },
          end: {
            line: 120,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 102
      },
      "6": {
        loc: {
          start: {
            line: 148,
            column: 8
          },
          end: {
            line: 150,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 148,
            column: 8
          },
          end: {
            line: 150,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 148
      },
      "7": {
        loc: {
          start: {
            line: 159,
            column: 8
          },
          end: {
            line: 161,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 159,
            column: 8
          },
          end: {
            line: 161,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 159
      },
      "8": {
        loc: {
          start: {
            line: 165,
            column: 18
          },
          end: {
            line: 165,
            column: 37
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 165,
            column: 18
          },
          end: {
            line: 165,
            column: 29
          }
        }, {
          start: {
            line: 165,
            column: 33
          },
          end: {
            line: 165,
            column: 37
          }
        }],
        line: 165
      },
      "9": {
        loc: {
          start: {
            line: 173,
            column: 18
          },
          end: {
            line: 173,
            column: 47
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 173,
            column: 18
          },
          end: {
            line: 173,
            column: 39
          }
        }, {
          start: {
            line: 173,
            column: 43
          },
          end: {
            line: 173,
            column: 47
          }
        }],
        line: 173
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0
    },
    b: {
      "0": [0, 0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "19e9139db16b97a09e5fbd364a6ac53a3438a18e"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1s4uaidpqk = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1s4uaidpqk();
/**
 * AWS Secrets Manager Diagnostic Tool
 * Comprehensive debugging for JSON parsing errors
 */

const {
  SecretsManagerClient,
  GetSecretValueCommand
} =
/* istanbul ignore next */
(cov_1s4uaidpqk().s[0]++, require('@aws-sdk/client-secrets-manager'));
class SecretsManagerDiagnostic {
  constructor() {
    /* istanbul ignore next */
    cov_1s4uaidpqk().f[0]++;
    cov_1s4uaidpqk().s[1]++;
    this.client = new SecretsManagerClient({
      region:
      /* istanbul ignore next */
      (cov_1s4uaidpqk().b[0][0]++, process.env.WEBAPP_AWS_REGION) ||
      /* istanbul ignore next */
      (cov_1s4uaidpqk().b[0][1]++, process.env.AWS_REGION) ||
      /* istanbul ignore next */
      (cov_1s4uaidpqk().b[0][2]++, 'us-east-1')
    });
  }

  /**
   * Comprehensive secret retrieval with detailed logging
   */
  async diagnoseSecret(secretArn) {
    /* istanbul ignore next */
    cov_1s4uaidpqk().f[1]++;
    const diagnosisId =
    /* istanbul ignore next */
    (cov_1s4uaidpqk().s[2]++, Math.random().toString(36).substr(2, 9));
    /* istanbul ignore next */
    cov_1s4uaidpqk().s[3]++;
    console.log(`🔍 [${diagnosisId}] Starting AWS Secrets Manager diagnostic`);
    /* istanbul ignore next */
    cov_1s4uaidpqk().s[4]++;
    console.log(`🔍 [${diagnosisId}] Secret ARN: ${secretArn}`);
    /* istanbul ignore next */
    cov_1s4uaidpqk().s[5]++;
    console.log(`🔍 [${diagnosisId}] Region: ${this.client.config.region}`);
    /* istanbul ignore next */
    cov_1s4uaidpqk().s[6]++;
    try {
      /* istanbul ignore next */
      cov_1s4uaidpqk().s[7]++;
      // Step 1: Get the raw secret response
      console.log(`🔍 [${diagnosisId}] Calling AWS Secrets Manager...`);
      const command =
      /* istanbul ignore next */
      (cov_1s4uaidpqk().s[8]++, new GetSecretValueCommand({
        SecretId: secretArn
      }));
      const response =
      /* istanbul ignore next */
      (cov_1s4uaidpqk().s[9]++, await this.client.send(command));
      /* istanbul ignore next */
      cov_1s4uaidpqk().s[10]++;
      console.log(`✅ [${diagnosisId}] Raw response received`);
      /* istanbul ignore next */
      cov_1s4uaidpqk().s[11]++;
      console.log(`🔍 [${diagnosisId}] Response keys:`, Object.keys(
      /* istanbul ignore next */
      (cov_1s4uaidpqk().b[1][0]++, response) ||
      /* istanbul ignore next */
      (cov_1s4uaidpqk().b[1][1]++, {})));

      // Step 2: Analyze the SecretString property
      const secretString =
      /* istanbul ignore next */
      (cov_1s4uaidpqk().s[12]++, response.SecretString);
      /* istanbul ignore next */
      cov_1s4uaidpqk().s[13]++;
      console.log(`🔍 [${diagnosisId}] SecretString type:`, typeof secretString);
      /* istanbul ignore next */
      cov_1s4uaidpqk().s[14]++;
      console.log(`🔍 [${diagnosisId}] SecretString length:`,
      /* istanbul ignore next */
      (cov_1s4uaidpqk().b[2][0]++, secretString?.length) ||
      /* istanbul ignore next */
      (cov_1s4uaidpqk().b[2][1]++, 0));
      /* istanbul ignore next */
      cov_1s4uaidpqk().s[15]++;
      console.log(`🔍 [${diagnosisId}] SecretString first 200 chars: [REDACTED]`);

      // Step 3: Check if it's actually an object that needs stringifying
      /* istanbul ignore next */
      cov_1s4uaidpqk().s[16]++;
      if (typeof secretString === 'object') {
        /* istanbul ignore next */
        cov_1s4uaidpqk().b[3][0]++;
        cov_1s4uaidpqk().s[17]++;
        console.log(`⚠️ [${diagnosisId}] SecretString is an object, not a string!`);
        /* istanbul ignore next */
        cov_1s4uaidpqk().s[18]++;
        console.log(`🔍 [${diagnosisId}] Object keys:`, Object.keys(secretString));
        /* istanbul ignore next */
        cov_1s4uaidpqk().s[19]++;
        console.log(`🔍 [${diagnosisId}] Object values: [REDACTED]`);

        // Try to use the object directly
        /* istanbul ignore next */
        cov_1s4uaidpqk().s[20]++;
        return {
          success: true,
          method: 'direct_object',
          config: secretString,
          diagnosticId: diagnosisId
        };
      } else
      /* istanbul ignore next */
      {
        cov_1s4uaidpqk().b[3][1]++;
      }

      // Step 4: Try to parse as JSON
      cov_1s4uaidpqk().s[21]++;
      if (typeof secretString === 'string') {
        /* istanbul ignore next */
        cov_1s4uaidpqk().b[4][0]++;
        cov_1s4uaidpqk().s[22]++;
        console.log(`🔍 [${diagnosisId}] Attempting JSON.parse on string...`);
        /* istanbul ignore next */
        cov_1s4uaidpqk().s[23]++;
        try {
          const parsed =
          /* istanbul ignore next */
          (cov_1s4uaidpqk().s[24]++, JSON.parse(secretString));
          /* istanbul ignore next */
          cov_1s4uaidpqk().s[25]++;
          console.log(`✅ [${diagnosisId}] JSON parsing successful`);
          /* istanbul ignore next */
          cov_1s4uaidpqk().s[26]++;
          console.log(`🔍 [${diagnosisId}] Parsed keys:`, Object.keys(parsed));
          /* istanbul ignore next */
          cov_1s4uaidpqk().s[27]++;
          return {
            success: true,
            method: 'json_parse',
            config: parsed,
            diagnosticId: diagnosisId
          };
        } catch (parseError) {
          /* istanbul ignore next */
          cov_1s4uaidpqk().s[28]++;
          console.error(`❌ [${diagnosisId}] JSON parsing failed:`, parseError.message);

          // Step 5: Try to fix common JSON issues
          /* istanbul ignore next */
          cov_1s4uaidpqk().s[29]++;
          console.log(`🔧 [${diagnosisId}] Attempting to fix JSON issues...`);

          // Remove potential BOM and invisible characters
          const cleanString =
          /* istanbul ignore next */
          (cov_1s4uaidpqk().s[30]++, secretString.replace(/^\uFEFF/, '').trim());
          /* istanbul ignore next */
          cov_1s4uaidpqk().s[31]++;
          console.log(`🔍 [${diagnosisId}] Cleaned string length:`, cleanString.length);
          /* istanbul ignore next */
          cov_1s4uaidpqk().s[32]++;
          console.log(`🔍 [${diagnosisId}] Cleaned string first 200 chars: [REDACTED]`);
          /* istanbul ignore next */
          cov_1s4uaidpqk().s[33]++;
          try {
            const parsed =
            /* istanbul ignore next */
            (cov_1s4uaidpqk().s[34]++, JSON.parse(cleanString));
            /* istanbul ignore next */
            cov_1s4uaidpqk().s[35]++;
            console.log(`✅ [${diagnosisId}] JSON parsing successful after cleaning`);
            /* istanbul ignore next */
            cov_1s4uaidpqk().s[36]++;
            return {
              success: true,
              method: 'json_parse_cleaned',
              config: parsed,
              diagnosticId: diagnosisId
            };
          } catch (cleanParseError) {
            /* istanbul ignore next */
            cov_1s4uaidpqk().s[37]++;
            console.error(`❌ [${diagnosisId}] JSON parsing still failed after cleaning:`, cleanParseError.message);

            // Step 6: Character-by-character analysis
            /* istanbul ignore next */
            cov_1s4uaidpqk().s[38]++;
            console.log(`🔍 [${diagnosisId}] Character analysis: [REDACTED - Logging characters would expose sensitive data]`);
            // Character-by-character analysis removed for security
            /* istanbul ignore next */
            cov_1s4uaidpqk().s[39]++;
            throw new Error(`Unable to parse secret after all attempts: ${cleanParseError.message}`);
          }
        }
      } else
      /* istanbul ignore next */
      {
        cov_1s4uaidpqk().b[4][1]++;
      }

      // Step 7: Handle binary secrets
      cov_1s4uaidpqk().s[40]++;
      if (response.SecretBinary) {
        /* istanbul ignore next */
        cov_1s4uaidpqk().b[5][0]++;
        cov_1s4uaidpqk().s[41]++;
        console.log(`🔍 [${diagnosisId}] Secret is binary, attempting to decode...`);
        const binaryString =
        /* istanbul ignore next */
        (cov_1s4uaidpqk().s[42]++, Buffer.from(response.SecretBinary).toString('utf8'));
        /* istanbul ignore next */
        cov_1s4uaidpqk().s[43]++;
        console.log(`🔍 [${diagnosisId}] Binary decoded length:`, binaryString.length);
        /* istanbul ignore next */
        cov_1s4uaidpqk().s[44]++;
        console.log(`🔍 [${diagnosisId}] Binary decoded first 200 chars:`, binaryString.substring(0, 200));
        /* istanbul ignore next */
        cov_1s4uaidpqk().s[45]++;
        try {
          const parsed =
          /* istanbul ignore next */
          (cov_1s4uaidpqk().s[46]++, JSON.parse(binaryString));
          /* istanbul ignore next */
          cov_1s4uaidpqk().s[47]++;
          return {
            success: true,
            method: 'binary_decode',
            config: parsed,
            diagnosticId: diagnosisId
          };
        } catch (binaryParseError) {
          /* istanbul ignore next */
          cov_1s4uaidpqk().s[48]++;
          console.error(`❌ [${diagnosisId}] Binary JSON parsing failed:`, binaryParseError.message);
          /* istanbul ignore next */
          cov_1s4uaidpqk().s[49]++;
          throw binaryParseError;
        }
      } else
      /* istanbul ignore next */
      {
        cov_1s4uaidpqk().b[5][1]++;
      }
      cov_1s4uaidpqk().s[50]++;
      throw new Error('No valid secret found in SecretString or SecretBinary');
    } catch (error) {
      /* istanbul ignore next */
      cov_1s4uaidpqk().s[51]++;
      console.error(`❌ [${diagnosisId}] Secrets Manager diagnostic failed:`, {
        message: error.message,
        code: error.code,
        statusCode: error.$metadata?.httpStatusCode,
        requestId: error.$metadata?.requestId
      });
      /* istanbul ignore next */
      cov_1s4uaidpqk().s[52]++;
      return {
        success: false,
        error: error.message,
        diagnosticId: diagnosisId
      };
    }
  }

  /**
   * Test database configuration from secrets
   */
  async testDatabaseConfig(secretArn) {
    /* istanbul ignore next */
    cov_1s4uaidpqk().f[2]++;
    cov_1s4uaidpqk().s[53]++;
    console.log(`🧪 Testing database configuration from secret: ${secretArn}`);
    const diagnosis =
    /* istanbul ignore next */
    (cov_1s4uaidpqk().s[54]++, await this.diagnoseSecret(secretArn));
    /* istanbul ignore next */
    cov_1s4uaidpqk().s[55]++;
    if (!diagnosis.success) {
      /* istanbul ignore next */
      cov_1s4uaidpqk().b[6][0]++;
      cov_1s4uaidpqk().s[56]++;
      throw new Error(`Secret diagnosis failed: ${diagnosis.error}`);
    } else
    /* istanbul ignore next */
    {
      cov_1s4uaidpqk().b[6][1]++;
    }
    const config =
    /* istanbul ignore next */
    (cov_1s4uaidpqk().s[57]++, diagnosis.config);
    /* istanbul ignore next */
    cov_1s4uaidpqk().s[58]++;
    console.log(`✅ Secret retrieved using method: ${diagnosis.method}`);

    // Validate required database fields
    const requiredFields =
    /* istanbul ignore next */
    (cov_1s4uaidpqk().s[59]++, ['host', 'username', 'password', 'dbname']);
    const missingFields =
    /* istanbul ignore next */
    (cov_1s4uaidpqk().s[60]++, requiredFields.filter(field => {
      /* istanbul ignore next */
      cov_1s4uaidpqk().f[3]++;
      cov_1s4uaidpqk().s[61]++;
      return !config[field];
    }));
    /* istanbul ignore next */
    cov_1s4uaidpqk().s[62]++;
    if (missingFields.length > 0) {
      /* istanbul ignore next */
      cov_1s4uaidpqk().b[7][0]++;
      cov_1s4uaidpqk().s[63]++;
      throw new Error(`Missing required database fields: ${missingFields.join(', ')}`);
    } else
    /* istanbul ignore next */
    {
      cov_1s4uaidpqk().b[7][1]++;
    }
    cov_1s4uaidpqk().s[64]++;
    console.log(`✅ Database configuration validated:`, {
      host: config.host,
      port:
      /* istanbul ignore next */
      (cov_1s4uaidpqk().b[8][0]++, config.port) ||
      /* istanbul ignore next */
      (cov_1s4uaidpqk().b[8][1]++, 5432),
      database: config.dbname,
      username: config.username,
      hasPassword: !!config.password
    });
    /* istanbul ignore next */
    cov_1s4uaidpqk().s[65]++;
    return {
      host: config.host,
      port:
      /* istanbul ignore next */
      (cov_1s4uaidpqk().b[9][0]++, parseInt(config.port)) ||
      /* istanbul ignore next */
      (cov_1s4uaidpqk().b[9][1]++, 5432),
      database: config.dbname,
      user: config.username,
      password: config.password,
      ssl: false // Match working ECS configuration
    };
  }

  /**
   * Create a fixed database configuration getter
   */
  createFixedDbConfigGetter(secretArn) {
    /* istanbul ignore next */
    cov_1s4uaidpqk().f[4]++;
    cov_1s4uaidpqk().s[66]++;
    return async () => {
      /* istanbul ignore next */
      cov_1s4uaidpqk().f[5]++;
      cov_1s4uaidpqk().s[67]++;
      try {
        /* istanbul ignore next */
        cov_1s4uaidpqk().s[68]++;
        return await this.testDatabaseConfig(secretArn);
      } catch (error) {
        /* istanbul ignore next */
        cov_1s4uaidpqk().s[69]++;
        console.error('❌ Fixed database config getter failed:', error.message);
        /* istanbul ignore next */
        cov_1s4uaidpqk().s[70]++;
        throw error;
      }
    };
  }
}
/* istanbul ignore next */
cov_1s4uaidpqk().s[71]++;
module.exports = SecretsManagerDiagnostic;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMXM0dWFpZHBxayIsImFjdHVhbENvdmVyYWdlIiwiU2VjcmV0c01hbmFnZXJDbGllbnQiLCJHZXRTZWNyZXRWYWx1ZUNvbW1hbmQiLCJzIiwicmVxdWlyZSIsIlNlY3JldHNNYW5hZ2VyRGlhZ25vc3RpYyIsImNvbnN0cnVjdG9yIiwiZiIsImNsaWVudCIsInJlZ2lvbiIsImIiLCJwcm9jZXNzIiwiZW52IiwiV0VCQVBQX0FXU19SRUdJT04iLCJBV1NfUkVHSU9OIiwiZGlhZ25vc2VTZWNyZXQiLCJzZWNyZXRBcm4iLCJkaWFnbm9zaXNJZCIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsImNvbnNvbGUiLCJsb2ciLCJjb25maWciLCJjb21tYW5kIiwiU2VjcmV0SWQiLCJyZXNwb25zZSIsInNlbmQiLCJPYmplY3QiLCJrZXlzIiwic2VjcmV0U3RyaW5nIiwiU2VjcmV0U3RyaW5nIiwibGVuZ3RoIiwic3VjY2VzcyIsIm1ldGhvZCIsImRpYWdub3N0aWNJZCIsInBhcnNlZCIsIkpTT04iLCJwYXJzZSIsInBhcnNlRXJyb3IiLCJlcnJvciIsIm1lc3NhZ2UiLCJjbGVhblN0cmluZyIsInJlcGxhY2UiLCJ0cmltIiwiY2xlYW5QYXJzZUVycm9yIiwiRXJyb3IiLCJTZWNyZXRCaW5hcnkiLCJiaW5hcnlTdHJpbmciLCJCdWZmZXIiLCJmcm9tIiwic3Vic3RyaW5nIiwiYmluYXJ5UGFyc2VFcnJvciIsImNvZGUiLCJzdGF0dXNDb2RlIiwiJG1ldGFkYXRhIiwiaHR0cFN0YXR1c0NvZGUiLCJyZXF1ZXN0SWQiLCJ0ZXN0RGF0YWJhc2VDb25maWciLCJkaWFnbm9zaXMiLCJyZXF1aXJlZEZpZWxkcyIsIm1pc3NpbmdGaWVsZHMiLCJmaWx0ZXIiLCJmaWVsZCIsImpvaW4iLCJob3N0IiwicG9ydCIsImRhdGFiYXNlIiwiZGJuYW1lIiwidXNlcm5hbWUiLCJoYXNQYXNzd29yZCIsInBhc3N3b3JkIiwicGFyc2VJbnQiLCJ1c2VyIiwic3NsIiwiY3JlYXRlRml4ZWREYkNvbmZpZ0dldHRlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJzZWNyZXRzTWFuYWdlckRpYWdub3N0aWMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBV1MgU2VjcmV0cyBNYW5hZ2VyIERpYWdub3N0aWMgVG9vbFxuICogQ29tcHJlaGVuc2l2ZSBkZWJ1Z2dpbmcgZm9yIEpTT04gcGFyc2luZyBlcnJvcnNcbiAqL1xuXG5jb25zdCB7IFNlY3JldHNNYW5hZ2VyQ2xpZW50LCBHZXRTZWNyZXRWYWx1ZUNvbW1hbmQgfSA9IHJlcXVpcmUoJ0Bhd3Mtc2RrL2NsaWVudC1zZWNyZXRzLW1hbmFnZXInKTtcblxuY2xhc3MgU2VjcmV0c01hbmFnZXJEaWFnbm9zdGljIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jbGllbnQgPSBuZXcgU2VjcmV0c01hbmFnZXJDbGllbnQoe1xuICAgICAgICAgICAgcmVnaW9uOiBwcm9jZXNzLmVudi5XRUJBUFBfQVdTX1JFR0lPTiB8fCBwcm9jZXNzLmVudi5BV1NfUkVHSU9OIHx8ICd1cy1lYXN0LTEnXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbXByZWhlbnNpdmUgc2VjcmV0IHJldHJpZXZhbCB3aXRoIGRldGFpbGVkIGxvZ2dpbmdcbiAgICAgKi9cbiAgICBhc3luYyBkaWFnbm9zZVNlY3JldChzZWNyZXRBcm4pIHtcbiAgICAgICAgY29uc3QgZGlhZ25vc2lzSWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5SNIFske2RpYWdub3Npc0lkfV0gU3RhcnRpbmcgQVdTIFNlY3JldHMgTWFuYWdlciBkaWFnbm9zdGljYCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5SNIFske2RpYWdub3Npc0lkfV0gU2VjcmV0IEFSTjogJHtzZWNyZXRBcm59YCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5SNIFske2RpYWdub3Npc0lkfV0gUmVnaW9uOiAke3RoaXMuY2xpZW50LmNvbmZpZy5yZWdpb259YCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFN0ZXAgMTogR2V0IHRoZSByYXcgc2VjcmV0IHJlc3BvbnNlXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UjSBbJHtkaWFnbm9zaXNJZH1dIENhbGxpbmcgQVdTIFNlY3JldHMgTWFuYWdlci4uLmApO1xuICAgICAgICAgICAgY29uc3QgY29tbWFuZCA9IG5ldyBHZXRTZWNyZXRWYWx1ZUNvbW1hbmQoeyBTZWNyZXRJZDogc2VjcmV0QXJuIH0pO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNsaWVudC5zZW5kKGNvbW1hbmQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIFske2RpYWdub3Npc0lkfV0gUmF3IHJlc3BvbnNlIHJlY2VpdmVkYCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UjSBbJHtkaWFnbm9zaXNJZH1dIFJlc3BvbnNlIGtleXM6YCwgT2JqZWN0LmtleXMocmVzcG9uc2UgfHwge30pKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU3RlcCAyOiBBbmFseXplIHRoZSBTZWNyZXRTdHJpbmcgcHJvcGVydHlcbiAgICAgICAgICAgIGNvbnN0IHNlY3JldFN0cmluZyA9IHJlc3BvbnNlLlNlY3JldFN0cmluZztcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SNIFske2RpYWdub3Npc0lkfV0gU2VjcmV0U3RyaW5nIHR5cGU6YCwgdHlwZW9mIHNlY3JldFN0cmluZyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UjSBbJHtkaWFnbm9zaXNJZH1dIFNlY3JldFN0cmluZyBsZW5ndGg6YCwgc2VjcmV0U3RyaW5nPy5sZW5ndGggfHwgMCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UjSBbJHtkaWFnbm9zaXNJZH1dIFNlY3JldFN0cmluZyBmaXJzdCAyMDAgY2hhcnM6IFtSRURBQ1RFRF1gKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU3RlcCAzOiBDaGVjayBpZiBpdCdzIGFjdHVhbGx5IGFuIG9iamVjdCB0aGF0IG5lZWRzIHN0cmluZ2lmeWluZ1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBzZWNyZXRTdHJpbmcgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYOKaoO+4jyBbJHtkaWFnbm9zaXNJZH1dIFNlY3JldFN0cmluZyBpcyBhbiBvYmplY3QsIG5vdCBhIHN0cmluZyFgKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UjSBbJHtkaWFnbm9zaXNJZH1dIE9iamVjdCBrZXlzOmAsIE9iamVjdC5rZXlzKHNlY3JldFN0cmluZykpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SNIFske2RpYWdub3Npc0lkfV0gT2JqZWN0IHZhbHVlczogW1JFREFDVEVEXWApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFRyeSB0byB1c2UgdGhlIG9iamVjdCBkaXJlY3RseVxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ2RpcmVjdF9vYmplY3QnLFxuICAgICAgICAgICAgICAgICAgICBjb25maWc6IHNlY3JldFN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgZGlhZ25vc3RpY0lkOiBkaWFnbm9zaXNJZFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFN0ZXAgNDogVHJ5IHRvIHBhcnNlIGFzIEpTT05cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2VjcmV0U3RyaW5nID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SNIFske2RpYWdub3Npc0lkfV0gQXR0ZW1wdGluZyBKU09OLnBhcnNlIG9uIHN0cmluZy4uLmApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2Uoc2VjcmV0U3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYOKchSBbJHtkaWFnbm9zaXNJZH1dIEpTT04gcGFyc2luZyBzdWNjZXNzZnVsYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SNIFske2RpYWdub3Npc0lkfV0gUGFyc2VkIGtleXM6YCwgT2JqZWN0LmtleXMocGFyc2VkKSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ2pzb25fcGFyc2UnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnOiBwYXJzZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWFnbm9zdGljSWQ6IGRpYWdub3Npc0lkXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgWyR7ZGlhZ25vc2lzSWR9XSBKU09OIHBhcnNpbmcgZmFpbGVkOmAsIHBhcnNlRXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBTdGVwIDU6IFRyeSB0byBmaXggY29tbW9uIEpTT04gaXNzdWVzXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SnIFske2RpYWdub3Npc0lkfV0gQXR0ZW1wdGluZyB0byBmaXggSlNPTiBpc3N1ZXMuLi5gKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBwb3RlbnRpYWwgQk9NIGFuZCBpbnZpc2libGUgY2hhcmFjdGVyc1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGVhblN0cmluZyA9IHNlY3JldFN0cmluZy5yZXBsYWNlKC9eXFx1RkVGRi8sICcnKS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SNIFske2RpYWdub3Npc0lkfV0gQ2xlYW5lZCBzdHJpbmcgbGVuZ3RoOmAsIGNsZWFuU3RyaW5nLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SNIFske2RpYWdub3Npc0lkfV0gQ2xlYW5lZCBzdHJpbmcgZmlyc3QgMjAwIGNoYXJzOiBbUkVEQUNURURdYCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShjbGVhblN0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIFske2RpYWdub3Npc0lkfV0gSlNPTiBwYXJzaW5nIHN1Y2Nlc3NmdWwgYWZ0ZXIgY2xlYW5pbmdgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdqc29uX3BhcnNlX2NsZWFuZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZzogcGFyc2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYWdub3N0aWNJZDogZGlhZ25vc2lzSWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGNsZWFuUGFyc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihg4p2MIFske2RpYWdub3Npc0lkfV0gSlNPTiBwYXJzaW5nIHN0aWxsIGZhaWxlZCBhZnRlciBjbGVhbmluZzpgLCBjbGVhblBhcnNlRXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0ZXAgNjogQ2hhcmFjdGVyLWJ5LWNoYXJhY3RlciBhbmFseXNpc1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCflI0gWyR7ZGlhZ25vc2lzSWR9XSBDaGFyYWN0ZXIgYW5hbHlzaXM6IFtSRURBQ1RFRCAtIExvZ2dpbmcgY2hhcmFjdGVycyB3b3VsZCBleHBvc2Ugc2Vuc2l0aXZlIGRhdGFdYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGFyYWN0ZXItYnktY2hhcmFjdGVyIGFuYWx5c2lzIHJlbW92ZWQgZm9yIHNlY3VyaXR5XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIHBhcnNlIHNlY3JldCBhZnRlciBhbGwgYXR0ZW1wdHM6ICR7Y2xlYW5QYXJzZUVycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFN0ZXAgNzogSGFuZGxlIGJpbmFyeSBzZWNyZXRzXG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuU2VjcmV0QmluYXJ5KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCflI0gWyR7ZGlhZ25vc2lzSWR9XSBTZWNyZXQgaXMgYmluYXJ5LCBhdHRlbXB0aW5nIHRvIGRlY29kZS4uLmApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJpbmFyeVN0cmluZyA9IEJ1ZmZlci5mcm9tKHJlc3BvbnNlLlNlY3JldEJpbmFyeSkudG9TdHJpbmcoJ3V0ZjgnKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UjSBbJHtkaWFnbm9zaXNJZH1dIEJpbmFyeSBkZWNvZGVkIGxlbmd0aDpgLCBiaW5hcnlTdHJpbmcubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UjSBbJHtkaWFnbm9zaXNJZH1dIEJpbmFyeSBkZWNvZGVkIGZpcnN0IDIwMCBjaGFyczpgLCBiaW5hcnlTdHJpbmcuc3Vic3RyaW5nKDAsIDIwMCkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UoYmluYXJ5U3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdiaW5hcnlfZGVjb2RlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZzogcGFyc2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlhZ25vc3RpY0lkOiBkaWFnbm9zaXNJZFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGJpbmFyeVBhcnNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihg4p2MIFske2RpYWdub3Npc0lkfV0gQmluYXJ5IEpTT04gcGFyc2luZyBmYWlsZWQ6YCwgYmluYXJ5UGFyc2VFcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgYmluYXJ5UGFyc2VFcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdmFsaWQgc2VjcmV0IGZvdW5kIGluIFNlY3JldFN0cmluZyBvciBTZWNyZXRCaW5hcnknKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihg4p2MIFske2RpYWdub3Npc0lkfV0gU2VjcmV0cyBNYW5hZ2VyIGRpYWdub3N0aWMgZmFpbGVkOmAsIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIGNvZGU6IGVycm9yLmNvZGUsXG4gICAgICAgICAgICAgICAgc3RhdHVzQ29kZTogZXJyb3IuJG1ldGFkYXRhPy5odHRwU3RhdHVzQ29kZSxcbiAgICAgICAgICAgICAgICByZXF1ZXN0SWQ6IGVycm9yLiRtZXRhZGF0YT8ucmVxdWVzdElkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgICAgICBkaWFnbm9zdGljSWQ6IGRpYWdub3Npc0lkXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGVzdCBkYXRhYmFzZSBjb25maWd1cmF0aW9uIGZyb20gc2VjcmV0c1xuICAgICAqL1xuICAgIGFzeW5jIHRlc3REYXRhYmFzZUNvbmZpZyhzZWNyZXRBcm4pIHtcbiAgICAgICAgY29uc29sZS5sb2coYPCfp6ogVGVzdGluZyBkYXRhYmFzZSBjb25maWd1cmF0aW9uIGZyb20gc2VjcmV0OiAke3NlY3JldEFybn1gKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGRpYWdub3NpcyA9IGF3YWl0IHRoaXMuZGlhZ25vc2VTZWNyZXQoc2VjcmV0QXJuKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghZGlhZ25vc2lzLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgU2VjcmV0IGRpYWdub3NpcyBmYWlsZWQ6ICR7ZGlhZ25vc2lzLmVycm9yfWApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjb25maWcgPSBkaWFnbm9zaXMuY29uZmlnO1xuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIFNlY3JldCByZXRyaWV2ZWQgdXNpbmcgbWV0aG9kOiAke2RpYWdub3Npcy5tZXRob2R9YCk7XG4gICAgICAgIFxuICAgICAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBkYXRhYmFzZSBmaWVsZHNcbiAgICAgICAgY29uc3QgcmVxdWlyZWRGaWVsZHMgPSBbJ2hvc3QnLCAndXNlcm5hbWUnLCAncGFzc3dvcmQnLCAnZGJuYW1lJ107XG4gICAgICAgIGNvbnN0IG1pc3NpbmdGaWVsZHMgPSByZXF1aXJlZEZpZWxkcy5maWx0ZXIoZmllbGQgPT4gIWNvbmZpZ1tmaWVsZF0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKG1pc3NpbmdGaWVsZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIHJlcXVpcmVkIGRhdGFiYXNlIGZpZWxkczogJHttaXNzaW5nRmllbGRzLmpvaW4oJywgJyl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGDinIUgRGF0YWJhc2UgY29uZmlndXJhdGlvbiB2YWxpZGF0ZWQ6YCwge1xuICAgICAgICAgICAgaG9zdDogY29uZmlnLmhvc3QsXG4gICAgICAgICAgICBwb3J0OiBjb25maWcucG9ydCB8fCA1NDMyLFxuICAgICAgICAgICAgZGF0YWJhc2U6IGNvbmZpZy5kYm5hbWUsXG4gICAgICAgICAgICB1c2VybmFtZTogY29uZmlnLnVzZXJuYW1lLFxuICAgICAgICAgICAgaGFzUGFzc3dvcmQ6ICEhY29uZmlnLnBhc3N3b3JkXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGhvc3Q6IGNvbmZpZy5ob3N0LFxuICAgICAgICAgICAgcG9ydDogcGFyc2VJbnQoY29uZmlnLnBvcnQpIHx8IDU0MzIsXG4gICAgICAgICAgICBkYXRhYmFzZTogY29uZmlnLmRibmFtZSxcbiAgICAgICAgICAgIHVzZXI6IGNvbmZpZy51c2VybmFtZSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiBjb25maWcucGFzc3dvcmQsXG4gICAgICAgICAgICBzc2w6IGZhbHNlIC8vIE1hdGNoIHdvcmtpbmcgRUNTIGNvbmZpZ3VyYXRpb25cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBmaXhlZCBkYXRhYmFzZSBjb25maWd1cmF0aW9uIGdldHRlclxuICAgICAqL1xuICAgIGNyZWF0ZUZpeGVkRGJDb25maWdHZXR0ZXIoc2VjcmV0QXJuKSB7XG4gICAgICAgIHJldHVybiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnRlc3REYXRhYmFzZUNvbmZpZyhzZWNyZXRBcm4pO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRml4ZWQgZGF0YWJhc2UgY29uZmlnIGdldHRlciBmYWlsZWQ6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFNlY3JldHNNYW5hZ2VyRGlhZ25vc3RpYzsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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