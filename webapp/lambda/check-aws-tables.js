
const { query } = require('./utils/database');

async function checkAWSTables() {
  try {
    console.log('üîç Checking available tables in AWS database...\n');

    const result = await query(`
      SELECT table_name
      FROM information_schema.tables
      WHERE table_schema = 'public'
      ORDER BY table_name
    `);

    console.log('üìä Available tables:');
    console.log('==================');
    result.rows.forEach(row => {
      console.log(`‚úÖ ${row.table_name}`);
    });

    console.log(`\nüìà Total tables: ${result.rows.length}`);

    // Check for specific tables we need
    const tables = result.rows.map(row => row.table_name);
    const criticalTables = ['technical_data_daily', 'market_data', 'company_profile', 'daily_returns', 'options_data'];

    console.log('\nüîç Checking critical tables:');
    console.log('============================');
    criticalTables.forEach(table => {
      if (tables.includes(table)) {
        console.log(`‚úÖ ${table} - EXISTS`);
      } else {
        console.log(`‚ùå ${table} - MISSING`);
      }
    });

  } catch (error) {
    console.error('‚ùå Error checking tables:', error.message);
  }
}

checkAWSTables();