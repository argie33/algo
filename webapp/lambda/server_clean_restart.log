
> financial-dashboard-lambda@1.0.0 start
> node index.js

Cognito environment variables not set - JWT verification disabled
🚨 Alert System initialized
📊 Monitoring started
🔍 Alert monitoring started
🚨 Alert system integration initialized
🎛️ Live Data Manager initialized
Financial Dashboard API server running on port 3001 (local mode)
Health check: http://localhost:3001/health
Stocks: http://localhost:3001/stocks
Technical: http://localhost:3001/technical/daily
Processing request: GET /health
Endpoint does not require database connection
Starting health check with database...
Database not initialized, initializing now...
Initializing database connection pool...
Using database config from environment variables
Database config loaded from environment: localhost:5432/stocks
✅ Database connection pool initialized successfully
Initializing database schema...
✅ Created/verified table: stock_symbols
✅ Created/verified table: company_profile
✅ Created/verified table: technical_data_daily
✅ Created/verified table: technical_data_weekly
✅ Created/verified table: technical_data_monthly
✅ Created/verified table: stocks
✅ Created/verified table: portfolio_holdings
✅ Created/verified table: portfolio_performance
✅ Created/verified table: buy_sell_daily
✅ Created/verified table: buy_sell_weekly
✅ Created/verified table: buy_sell_monthly
✅ Created/verified table: portfolio_transactions
✅ Created/verified table: technical_indicators
✅ Created/verified table: market_sentiment
✅ Created/verified table: price_alerts
✅ Created/verified table: stock_scores
✅ Created/verified table: key_metrics
✅ Created/verified table: dividend_calendar
✅ Created/verified table: trading_strategies
✅ Created/verified table: user_risk_limits
✅ Created/verified table: trade_history
✅ Created/verified table: portfolio_summary
✅ Created/verified table: user_dashboard_settings
✅ Database schema initialization completed
::1 - - [12/Sep/2025:03:17:54 +0000] "GET /health HTTP/1.1" 200 330 "-" "curl/8.5.0"
Processing request: GET /api/financials/AAPL/annual/balance-sheet
Initializing database connection...
Database connection established successfully
Database connection verified for database-dependent endpoint
::1 - - [12/Sep/2025:03:17:54 +0000] "GET /api/financials/AAPL/annual/balance-sheet HTTP/1.1" 404 686 "-" "curl/8.5.0"
Processing request: GET /api/news/recent
Database connection verified for database-dependent endpoint
📰 Recent news requested, limit: 3, hours: 24
Database query error: {
  error: 'column "title" does not exist',
  query: '\n' +
    '      SELECT \n' +
    '        title, summary, url, source, category, published_at,\n' +
    '        sentiment, symbo...',
  params: '1 parameters',
  code: '42703'
}
Recent news error: error: column "title" does not exist
    at /home/stocks/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async query (/home/stocks/algo/webapp/lambda/utils/database.js:920:20)
    at async /home/stocks/algo/webapp/lambda/routes/news.js:66:20 {
  length: 105,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '24',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
/home/stocks/algo/webapp/lambda/routes/news.js:126
            filters_applied: { symbol, category, limit, offset }
                               ^

ReferenceError: symbol is not defined
    at /home/stocks/algo/webapp/lambda/routes/news.js:126:32
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)

Node.js v20.19.4
