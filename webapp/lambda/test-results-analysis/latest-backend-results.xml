<?xml version="1.0" encoding="UTF-8"?>
<testsuites name="jest tests" tests="769" failures="599" errors="0" time="992.252">
  <testsuite name="Financial Calculations Integration Tests" errors="0" failures="19" skipped="0" timestamp="2025-07-21T02:54:57" time="1.831" tests="19">
    <testcase classname="Financial Calculations Integration Tests › Value at Risk (VaR) Calculations" name="calculates parametric VaR for individual positions" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/financial-calculations-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Financial Calculations Integration Tests › Value at Risk (VaR) Calculations" name="calculates portfolio-level VaR with correlation matrix" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/financial-calculations-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Financial Calculations Integration Tests › Value at Risk (VaR) Calculations" name="calculates historical VaR using market data" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/financial-calculations-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Financial Calculations Integration Tests › Value at Risk (VaR) Calculations" name="handles edge cases in VaR calculations" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/financial-calculations-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Financial Calculations Integration Tests › Modern Portfolio Theory Calculations" name="calculates efficient frontier" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/financial-calculations-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Financial Calculations Integration Tests › Modern Portfolio Theory Calculations" name="optimizes portfolio for maximum Sharpe ratio" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/financial-calculations-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Financial Calculations Integration Tests › Modern Portfolio Theory Calculations" name="calculates portfolio risk metrics" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/financial-calculations-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Financial Calculations Integration Tests › Modern Portfolio Theory Calculations" name="validates covariance matrix calculations" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/financial-calculations-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Financial Calculations Integration Tests › Performance Analytics Calculations" name="calculates time-weighted returns" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/financial-calculations-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Financial Calculations Integration Tests › Performance Analytics Calculations" name="calculates money-weighted returns (IRR)" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/financial-calculations-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Financial Calculations Integration Tests › Performance Analytics Calculations" name="calculates rolling performance metrics" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/financial-calculations-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Financial Calculations Integration Tests › Performance Analytics Calculations" name="validates benchmark comparison calculations" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/financial-calculations-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Financial Calculations Integration Tests › Options Pricing and Greeks Calculations" name="calculates Black-Scholes option prices" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/financial-calculations-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Financial Calculations Integration Tests › Options Pricing and Greeks Calculations" name="calculates put option prices and put-call parity" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/financial-calculations-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Financial Calculations Integration Tests › Options Pricing and Greeks Calculations" name="calculates implied volatility" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/financial-calculations-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Financial Calculations Integration Tests › Stress Testing and Scenario Analysis" name="performs portfolio stress testing" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/financial-calculations-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Financial Calculations Integration Tests › Stress Testing and Scenario Analysis" name="performs Monte Carlo simulation" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/financial-calculations-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Financial Calculations Integration Tests › Currency and Multi-Asset Calculations" name="handles multi-currency portfolio calculations" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/financial-calculations-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Financial Calculations Integration Tests › Currency and Multi-Asset Calculations" name="calculates commodity and alternative asset correlations" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/financial-calculations-integration.test.js:17:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Error Handling Integration Tests" errors="0" failures="1" skipped="0" timestamp="2025-07-21T02:54:58" time="20.694" tests="12">
    <testcase classname="Error Handling Integration Tests › Database Circuit Breaker Testing" name="Database circuit breaker opens after consecutive failures" time="2.4">
    </testcase>
    <testcase classname="Error Handling Integration Tests › Database Circuit Breaker Testing" name="Database circuit breaker recovery after timeout" time="2.064">
    </testcase>
    <testcase classname="Error Handling Integration Tests › Database Circuit Breaker Testing" name="Database connection pool exhaustion handling" time="0.468">
    </testcase>
    <testcase classname="Error Handling Integration Tests › External API Circuit Breaker Testing" name="External API circuit breaker functionality" time="3.374">
    </testcase>
    <testcase classname="Error Handling Integration Tests › External API Circuit Breaker Testing" name="API key validation error handling" time="0.025">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 429
Received array: [400, 401, 403, 503]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/error-handling-integration.test.js:266:38)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Error Handling Integration Tests › External API Circuit Breaker Testing" name="External service timeout handling" time="0.086">
    </testcase>
    <testcase classname="Error Handling Integration Tests › System-Wide Error Resilience" name="Cascading failure prevention" time="0.122">
    </testcase>
    <testcase classname="Error Handling Integration Tests › System-Wide Error Resilience" name="Memory leak prevention during error conditions" time="0.498">
    </testcase>
    <testcase classname="Error Handling Integration Tests › System-Wide Error Resilience" name="Error propagation and logging validation" time="0.078">
    </testcase>
    <testcase classname="Error Handling Integration Tests › Recovery and Fallback Mechanisms" name="Service degradation with fallback responses" time="0.081">
    </testcase>
    <testcase classname="Error Handling Integration Tests › Recovery and Fallback Mechanisms" name="Circuit breaker half-open state testing" time="3.073">
    </testcase>
    <testcase classname="Error Handling Integration Tests › Error Handling Integration Test Summary" name="Complete error handling integration test summary" time="0.013">
    </testcase>
  </testsuite>
  <testsuite name="Alpaca API Integration Tests" errors="0" failures="26" skipped="0" timestamp="2025-07-21T02:55:19" time="1.265" tests="26">
    <testcase classname="Alpaca API Integration Tests › Alpaca Authentication and Connection" name="validates Alpaca API key format" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Alpaca Authentication and Connection" name="rejects invalid Alpaca API key format" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Alpaca Authentication and Connection" name="tests Alpaca API connection" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Alpaca Authentication and Connection" name="handles Alpaca API connection failures gracefully" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Alpaca Account Information" name="retrieves Alpaca account information" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Alpaca Account Information" name="retrieves Alpaca portfolio positions" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Alpaca Account Information" name="handles account retrieval with invalid credentials" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Alpaca Market Data Integration" name="retrieves real-time quotes from Alpaca" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Alpaca Market Data Integration" name="retrieves historical data from Alpaca" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Alpaca Market Data Integration" name="validates market hours and trading status" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Alpaca Trading Operations" name="validates order parameters before submission" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Alpaca Trading Operations" name="submits paper trading order to Alpaca" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Alpaca Trading Operations" name="retrieves order history from Alpaca" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Alpaca Trading Operations" name="cancels pending order" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Alpaca Trading Operations" name="handles invalid order submission gracefully" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Alpaca WebSocket Streaming" name="establishes WebSocket connection to Alpaca" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Alpaca WebSocket Streaming" name="subscribes to real-time data streams" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Alpaca WebSocket Streaming" name="handles WebSocket connection errors" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Alpaca Circuit Breaker Integration" name="implements circuit breaker for Alpaca API failures" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Alpaca Circuit Breaker Integration" name="circuit breaker recovery after timeout" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Alpaca Circuit Breaker Integration" name="monitors Alpaca API performance metrics" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Alpaca Error Handling and Logging" name="logs Alpaca API interactions securely" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Alpaca Error Handling and Logging" name="handles rate limiting from Alpaca gracefully" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Alpaca Error Handling and Logging" name="handles Alpaca API maintenance periods" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Data Consistency and Validation" name="validates data consistency between account and positions" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Alpaca API Integration Tests › Data Consistency and Validation" name="validates order execution and position updates" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/alpaca-api-integration.test.js:17:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Portfolio API Integration Tests" errors="0" failures="25" skipped="0" timestamp="2025-07-21T02:55:20" time="519.665" tests="26">
    <testcase classname="Portfolio API Integration Tests › GET /api/portfolio/holdings" name="returns portfolio holdings with real data structure" time="30.002">
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:74:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:73:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:26:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Portfolio API Integration Tests › GET /api/portfolio/holdings" name="handles authentication errors correctly" time="30.003">
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:114:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:73:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:26:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Portfolio API Integration Tests › GET /api/portfolio/holdings" name="validates query parameters correctly" time="30.002">
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:125:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:73:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:26:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Portfolio API Integration Tests › GET /api/portfolio/holdings" name="handles database connection errors gracefully" time="30.001">
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:141:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:73:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:26:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Portfolio API Integration Tests › GET /api/portfolio/holdings" name="implements proper pagination" time="30.002">
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:158:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:73:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:26:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Portfolio API Integration Tests › GET /api/portfolio/holdings" name="filters out mock data indicators" time="30.002">
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:179:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:73:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:26:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Portfolio API Integration Tests › GET /api/portfolio/performance" name="returns performance metrics with real calculations" time="0.122">
      <failure>Error: expected 200 &quot;OK&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:205:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Portfolio API Integration Tests › GET /api/portfolio/performance" name="validates period parameter" time="0.053">
    </testcase>
    <testcase classname="Portfolio API Integration Tests › GET /api/portfolio/performance" name="calculates risk metrics accurately" time="0.092">
      <failure>Error: expected 200 &quot;OK&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:255:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Portfolio API Integration Tests › GET /api/portfolio/available-accounts" name="returns only real broker accounts" time="0.043">
      <failure>Error: expected 200 &quot;OK&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:282:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Portfolio API Integration Tests › GET /api/portfolio/available-accounts" name="handles missing API keys correctly" time="0.048">
      <failure>Error: expected 200 &quot;OK&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:319:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Portfolio API Integration Tests › POST /api/portfolio/import" name="imports portfolio from real broker API" time="0.031">
      <failure>Error: expected 200 &quot;OK&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:341:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Portfolio API Integration Tests › POST /api/portfolio/import" name="validates broker parameter" time="0.02">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:369:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Portfolio API Integration Tests › POST /api/portfolio/import" name="handles broker API errors gracefully" time="0.018">
      <failure>Error: expected 503 &quot;Service Unavailable&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:388:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Portfolio API Integration Tests › Portfolio Data Quality and Validation" name="ensures all portfolio data has real data flags" time="30.001">
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:399:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:398:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:26:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Portfolio API Integration Tests › Portfolio Data Quality and Validation" name="validates numeric data ranges and types" time="30">
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:448:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:398:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:26:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Portfolio API Integration Tests › Portfolio Data Quality and Validation" name="checks response times for performance" time="30">
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:487:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:398:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:26:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Portfolio API Integration Tests › Portfolio Data Quality and Validation" name="validates correlation IDs in responses" time="30.001">
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:502:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:398:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:26:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Portfolio API Integration Tests › Error Handling and Recovery" name="handles circuit breaker scenarios" time="30.001">
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:515:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:514:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:26:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Portfolio API Integration Tests › Error Handling and Recovery" name="handles concurrent request limits" time="30">
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processTimers (node:internal/timers:509:9)</failure>
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)</failure>
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processTimers (node:internal/timers:509:9)</failure>
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processTimers (node:internal/timers:509:9)</failure>
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)</failure>
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processTimers (node:internal/timers:509:9)</failure>
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processTimers (node:internal/timers:509:9)</failure>
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)</failure>
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processTimers (node:internal/timers:509:9)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:538:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:514:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:26:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Portfolio API Integration Tests › Error Handling and Recovery" name="provides proper error context in failures" time="30.001">
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:558:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:514:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:26:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Portfolio API Security Tests" name="requires authentication for all endpoints" time="30">
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:579:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:578:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Portfolio API Security Tests" name="validates input sanitization" time="0.024">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:613:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Portfolio API Security Tests" name="prevents SQL injection in queries" time="30.001">
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:620:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:578:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Portfolio API Performance Tests" name="handles large portfolio datasets efficiently" time="30.001">
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:642:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:641:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Portfolio API Performance Tests" name="implements proper caching headers" time="30.001">
      <failure>TypeError: res.serverError is not a function
    at serverError (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:1265:9)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:666:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-api.test.js:641:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
  </testsuite>
  <testsuite name="API Routes Integration Tests" errors="0" failures="28" skipped="0" timestamp="2025-07-21T03:04:00" time="36.692" tests="31">
    <testcase classname="API Routes Integration Tests › Health Check Endpoints" name="GET /api/health should return service status" time="0.097">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 500
    at Object.toBe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:223:31)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Health Check Endpoints" name="GET /api/health should handle database errors" time="0.031">
      <failure>Error: expected 200 &quot;OK&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:237:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Health Check Endpoints" name="GET /api/health/detailed should return comprehensive status" time="0.01">
      <failure>Error: expected 200 &quot;OK&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:247:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Authentication Endpoints" name="GET /api/auth/me should return user profile" time="0.009">
      <failure>Error: expected 200 &quot;OK&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:278:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Authentication Endpoints" name="GET /api/auth/me should reject invalid tokens" time="0.008">
      <failure>Error: expected 401 &quot;Unauthorized&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:291:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Authentication Endpoints" name="POST /api/auth/refresh should handle token refresh" time="0.014">
      <failure>Error: expected 200 &quot;OK&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:299:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Settings &amp; API Keys Endpoints" name="GET /api/settings/api-keys should list user API keys" time="0.04">
      <failure>Error: expect(received).toHaveLength(expected)

Matcher error: received value must have a length property whose value must be a number

Received has value: undefined
    at Object.toHaveLength (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:333:34)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Settings &amp; API Keys Endpoints" name="POST /api/settings/api-keys should store new API key" time="0.024">
      <failure>Error: expected 200 &quot;OK&quot;, got 503 &quot;Service Unavailable&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:351:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Settings &amp; API Keys Endpoints" name="POST /api/settings/api-keys should validate API key format" time="0.022">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 503 &quot;Service Unavailable&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:370:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Settings &amp; API Keys Endpoints" name="DELETE /api/settings/api-keys/:provider should remove API key" time="0.014">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;test-user-123&quot;, &quot;alpaca&quot;

Number of calls: 0
    at Object.toHaveBeenCalledWith (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:382:46)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Settings &amp; API Keys Endpoints" name="GET /api/settings/profile should return user settings" time="0.043">
      <failure>Error: expected 200 &quot;OK&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:399:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Portfolio Endpoints" name="GET /api/portfolio should return user portfolio overview" time="30.002">
      <failure>ReferenceError: userId is not defined
    at userId (/home/runner/work/algo/algo/webapp/lambda/routes/portfolio.js:527:15)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:423:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:408:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:86:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Portfolio Endpoints" name="GET /api/portfolio/positions should return portfolio positions" time="0.023">
      <failure>Error: expected 200 &quot;OK&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:463:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Portfolio Endpoints" name="POST /api/portfolio/positions should create new position" time="0.024">
      <failure>Error: expected 200 &quot;OK&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:490:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Portfolio Endpoints" name="PUT /api/portfolio/positions/:id should update position" time="0.019">
      <failure>Error: expected 200 &quot;OK&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:510:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Portfolio Endpoints" name="DELETE /api/portfolio/positions/:id should remove position" time="0.022">
      <failure>Error: expected 200 &quot;OK&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:523:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Market Data Endpoints" name="GET /api/market/quote/:symbol should return stock quote" time="0.009">
      <failure>Error: expected 200 &quot;OK&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:549:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Market Data Endpoints" name="GET /api/market/search should search for symbols" time="0.011">
      <failure>Error: expected 200 &quot;OK&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:571:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Market Data Endpoints" name="GET /api/market/movers should return market movers" time="0.011">
      <failure>Error: expected 200 &quot;OK&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:591:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Error Handling &amp; Edge Cases" name="should handle database connection failures gracefully" time="0.035">
      <failure>Error: expected 200 &quot;OK&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:604:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Error Handling &amp; Edge Cases" name="should handle malformed JSON requests" time="0.01">
    </testcase>
    <testcase classname="API Routes Integration Tests › Error Handling &amp; Edge Cases" name="should handle missing required fields" time="0.016">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:626:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Error Handling &amp; Edge Cases" name="should handle SQL injection attempts" time="0.009">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:632:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Error Handling &amp; Edge Cases" name="should validate input parameters" time="0.017">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 404 &quot;Not Found&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:645:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Error Handling &amp; Edge Cases" name="should handle rate limiting" time="2.675">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 500
Received array: [200, 429]
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:655:14)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:656:34)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Performance &amp; Load Testing" name="should handle concurrent requests efficiently" time="1.494">
      <failure>Error: expected 200 &quot;OK&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:676:14)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Performance &amp; Load Testing" name="should maintain performance under load" time="0.129">
      <failure>Error: expected 200 &quot;OK&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:698:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Security &amp; Compliance" name="should include security headers" time="0.032">
      <failure>Error: expected 200 &quot;OK&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:711:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="API Routes Integration Tests › Security &amp; Compliance" name="should validate authorization on protected endpoints" time="0.019">
    </testcase>
    <testcase classname="API Routes Integration Tests › Security &amp; Compliance" name="should sanitize sensitive data in responses" time="0.021">
    </testcase>
    <testcase classname="API Routes Integration Tests › Security &amp; Compliance" name="should log security events appropriately" time="0.003">
      <failure>Error: Cannot find module &apos;../utils/secureLogger&apos; from &apos;tests/integration/api-routes.test.js&apos;
    at Resolver._throwModNotFoundError (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-resolve/build/resolver.js:427:11)
    at Resolver.resolveModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-resolve/build/resolver.js:358:10)
    at Resolver._getVirtualMockPath (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-resolve/build/resolver.js:619:14)
    at Resolver._getAbsolutePath (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-resolve/build/resolver.js:587:14)
    at Resolver.getModuleID (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-resolve/build/resolver.js:530:31)
    at Runtime._shouldMockCjs (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1713:37)
    at Runtime.requireModuleOrMock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1045:16)
    at Object.require (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-routes.test.js:745:32)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Real-Time Market Data Integration Tests" errors="0" failures="18" skipped="0" timestamp="2025-07-21T03:04:37" time="1.288" tests="18">
    <testcase classname="Real-Time Market Data Integration Tests › WebSocket Connection Management" name="establishes WebSocket connection with authentication" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-time-market-data-integration.test.js:20:5)</failure>
    </testcase>
    <testcase classname="Real-Time Market Data Integration Tests › WebSocket Connection Management" name="rejects WebSocket connection without valid token" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-time-market-data-integration.test.js:20:5)</failure>
    </testcase>
    <testcase classname="Real-Time Market Data Integration Tests › WebSocket Connection Management" name="handles connection cleanup on client disconnect" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-time-market-data-integration.test.js:20:5)</failure>
    </testcase>
    <testcase classname="Real-Time Market Data Integration Tests › WebSocket Connection Management" name="manages multiple concurrent WebSocket connections" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-time-market-data-integration.test.js:20:5)</failure>
    </testcase>
    <testcase classname="Real-Time Market Data Integration Tests › Real-Time Data Streaming" name="streams real-time market data updates" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-time-market-data-integration.test.js:20:5)</failure>
    </testcase>
    <testcase classname="Real-Time Market Data Integration Tests › Real-Time Data Streaming" name="handles symbol subscription and unsubscription" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-time-market-data-integration.test.js:20:5)</failure>
    </testcase>
    <testcase classname="Real-Time Market Data Integration Tests › Real-Time Data Streaming" name="validates data quality and normalization" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-time-market-data-integration.test.js:20:5)</failure>
    </testcase>
    <testcase classname="Real-Time Market Data Integration Tests › Real-Time Data Streaming" name="handles real-time data from multiple providers" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-time-market-data-integration.test.js:20:5)</failure>
    </testcase>
    <testcase classname="Real-Time Market Data Integration Tests › Data Normalization and Processing" name="normalizes data formats across providers" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-time-market-data-integration.test.js:20:5)</failure>
    </testcase>
    <testcase classname="Real-Time Market Data Integration Tests › Data Normalization and Processing" name="detects and handles data anomalies" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-time-market-data-integration.test.js:20:5)</failure>
    </testcase>
    <testcase classname="Real-Time Market Data Integration Tests › Data Normalization and Processing" name="handles missing or incomplete data gracefully" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-time-market-data-integration.test.js:20:5)</failure>
    </testcase>
    <testcase classname="Real-Time Market Data Integration Tests › Performance and Latency Testing" name="measures WebSocket message latency" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-time-market-data-integration.test.js:20:5)</failure>
    </testcase>
    <testcase classname="Real-Time Market Data Integration Tests › Performance and Latency Testing" name="handles high-frequency data updates" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-time-market-data-integration.test.js:20:5)</failure>
    </testcase>
    <testcase classname="Real-Time Market Data Integration Tests › Error Handling and Recovery" name="handles WebSocket connection failures gracefully" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-time-market-data-integration.test.js:20:5)</failure>
    </testcase>
    <testcase classname="Real-Time Market Data Integration Tests › Error Handling and Recovery" name="handles invalid subscription requests" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-time-market-data-integration.test.js:20:5)</failure>
    </testcase>
    <testcase classname="Real-Time Market Data Integration Tests › Error Handling and Recovery" name="implements circuit breaker for data provider failures" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-time-market-data-integration.test.js:20:5)</failure>
    </testcase>
    <testcase classname="Real-Time Market Data Integration Tests › Data Storage and Retrieval" name="stores real-time data for historical access" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-time-market-data-integration.test.js:20:5)</failure>
    </testcase>
    <testcase classname="Real-Time Market Data Integration Tests › Data Storage and Retrieval" name="aggregates real-time data into time buckets" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-time-market-data-integration.test.js:20:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="External API Integration Tests - Alpaca &amp; TD Ameritrade" errors="0" failures="20" skipped="0" timestamp="2025-07-21T03:04:38" time="1.828" tests="20">
    <testcase classname="External API Integration Tests - Alpaca &amp; TD Ameritrade › Alpaca API Integration" name="Validates Alpaca API key format and connectivity" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/external-api-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="External API Integration Tests - Alpaca &amp; TD Ameritrade › Alpaca API Integration" name="Retrieves Alpaca account information" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/external-api-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="External API Integration Tests - Alpaca &amp; TD Ameritrade › Alpaca API Integration" name="Fetches Alpaca positions" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/external-api-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="External API Integration Tests - Alpaca &amp; TD Ameritrade › Alpaca API Integration" name="Places and cancels Alpaca paper trading orders" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/external-api-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="External API Integration Tests - Alpaca &amp; TD Ameritrade › Alpaca API Integration" name="Retrieves Alpaca order history" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/external-api-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="External API Integration Tests - Alpaca &amp; TD Ameritrade › Alpaca API Integration" name="Handles Alpaca API rate limiting gracefully" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/external-api-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="External API Integration Tests - Alpaca &amp; TD Ameritrade › TD Ameritrade API Integration" name="Validates TD Ameritrade API key format and connectivity" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/external-api-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="External API Integration Tests - Alpaca &amp; TD Ameritrade › TD Ameritrade API Integration" name="Handles TD Ameritrade OAuth flow" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/external-api-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="External API Integration Tests - Alpaca &amp; TD Ameritrade › TD Ameritrade API Integration" name="Retrieves TD Ameritrade account information" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/external-api-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="External API Integration Tests - Alpaca &amp; TD Ameritrade › TD Ameritrade API Integration" name="Fetches TD Ameritrade market data" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/external-api-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="External API Integration Tests - Alpaca &amp; TD Ameritrade › TD Ameritrade API Integration" name="Retrieves TD Ameritrade historical data" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/external-api-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="External API Integration Tests - Alpaca &amp; TD Ameritrade › Cross-Provider API Testing" name="Compares market data consistency between providers" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/external-api-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="External API Integration Tests - Alpaca &amp; TD Ameritrade › Cross-Provider API Testing" name="Handles provider-specific error codes correctly" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/external-api-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="External API Integration Tests - Alpaca &amp; TD Ameritrade › Cross-Provider API Testing" name="API key isolation between providers" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/external-api-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="External API Integration Tests - Alpaca &amp; TD Ameritrade › Real Trading Operations Integration" name="Validates order placement workflow end-to-end" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/external-api-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="External API Integration Tests - Alpaca &amp; TD Ameritrade › Real Trading Operations Integration" name="Handles market hours restrictions correctly" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/external-api-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="External API Integration Tests - Alpaca &amp; TD Ameritrade › Real Trading Operations Integration" name="Portfolio synchronization between providers and internal system" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/external-api-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="External API Integration Tests - Alpaca &amp; TD Ameritrade › API Performance and Reliability" name="Measures API response times for performance monitoring" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/external-api-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="External API Integration Tests - Alpaca &amp; TD Ameritrade › API Performance and Reliability" name="Tests API resilience under concurrent load" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/external-api-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="External API Integration Tests - Alpaca &amp; TD Ameritrade › API Performance and Reliability" name="Validates API error recovery and retry mechanisms" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/external-api-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Security Validation Integration Tests" errors="0" failures="26" skipped="0" timestamp="2025-07-21T03:04:40" time="1.229" tests="26">
    <testcase classname="Security Validation Integration Tests › SQL Injection Prevention" name="prevents SQL injection in user registration" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › SQL Injection Prevention" name="prevents SQL injection in portfolio queries" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › SQL Injection Prevention" name="validates parameterized queries in database operations" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › XSS Protection" name="sanitizes script tags in user input" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › XSS Protection" name="validates Content Security Policy headers" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › XSS Protection" name="prevents XSS in market data comments" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › Input Validation and Sanitization" name="validates email format in registration" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › Input Validation and Sanitization" name="validates stock symbol format" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › Input Validation and Sanitization" name="validates numerical inputs in financial calculations" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › Input Validation and Sanitization" name="limits request size and prevents DoS attacks" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › Authentication and Authorization Security" name="prevents JWT token tampering" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › Authentication and Authorization Security" name="enforces role-based access control" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › Authentication and Authorization Security" name="prevents privilege escalation" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › Authentication and Authorization Security" name="validates session timeout and token expiry" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › API Key Security" name="protects API keys from exposure in logs" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › API Key Security" name="validates API key format before processing" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › API Key Security" name="encrypts API keys in database" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › Rate Limiting and Abuse Prevention" name="implements rate limiting on sensitive endpoints" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › Rate Limiting and Abuse Prevention" name="prevents brute force attacks on authentication" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › Rate Limiting and Abuse Prevention" name="monitors and blocks suspicious API patterns" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › Data Protection and Privacy" name="masks sensitive data in API responses" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › Data Protection and Privacy" name="prevents data leakage in error messages" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › Data Protection and Privacy" name="implements secure session management" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › Audit Trail and Compliance" name="logs all security-relevant events" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › Audit Trail and Compliance" name="maintains data integrity with checksums" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Security Validation Integration Tests › Audit Trail and Compliance" name="enforces data retention policies" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-validation-integration.test.js:18:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Route Error Handling Integration Tests" errors="0" failures="8" skipped="0" timestamp="2025-07-21T03:04:41" time="2.336" tests="16">
    <testcase classname="Route Error Handling Integration Tests › Portfolio Creation Route Error Handling" name="should handle valid portfolio creation successfully" time="0.05">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;Growth Portfolio&quot;
Received: &quot;Test Portfolio&quot;
    at Object.toBe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/route-error-handling-integration.test.js:405:39)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Route Error Handling Integration Tests › Portfolio Creation Route Error Handling" name="should handle portfolio validation errors with detailed context" time="0.029">
    </testcase>
    <testcase classname="Route Error Handling Integration Tests › Portfolio Creation Route Error Handling" name="should handle database errors during portfolio creation" time="0.013">
      <failure>Error: expected 503 &quot;Service Unavailable&quot;, got 400 &quot;Bad Request&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/route-error-handling-integration.test.js:441:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Route Error Handling Integration Tests › Trading Order Route Error Handling" name="should handle valid order placement successfully" time="0.009">
    </testcase>
    <testcase classname="Route Error Handling Integration Tests › Trading Order Route Error Handling" name="should handle insufficient buying power errors" time="0.008">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected substring: &quot;Insufficient buying power&quot;
Received string:    &quot;Please check your input and try again.&quot;
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/route-error-handling-integration.test.js:487:43)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Route Error Handling Integration Tests › Trading Order Route Error Handling" name="should handle inactive account errors" time="0.01">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected substring: &quot;Account is not active&quot;
Received string:    &quot;You don&apos;t have permission to perform this action.&quot;
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/route-error-handling-integration.test.js:507:43)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Route Error Handling Integration Tests › Trading Order Route Error Handling" name="should handle order validation errors" time="0.008">
    </testcase>
    <testcase classname="Route Error Handling Integration Tests › Market Data Route Error Handling" name="should handle successful market data retrieval" time="0.009">
    </testcase>
    <testcase classname="Route Error Handling Integration Tests › Market Data Route Error Handling" name="should handle symbol validation errors" time="0.024">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected substring: &quot;Invalid stock symbol format&quot;
Received string:    &quot;Please check your input and try again.&quot;
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/route-error-handling-integration.test.js:547:43)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Route Error Handling Integration Tests › Market Data Route Error Handling" name="should handle timeout errors with retry information" time="0.007">
      <failure>Error: expected 504 &quot;Gateway Timeout&quot;, got 400 &quot;Bad Request&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/route-error-handling-integration.test.js:553:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Route Error Handling Integration Tests › Market Data Route Error Handling" name="should handle rate limiting errors" time="0.007">
      <failure>Error: expected 429 &quot;Too Many Requests&quot;, got 400 &quot;Bad Request&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/route-error-handling-integration.test.js:565:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Route Error Handling Integration Tests › Market Data Route Error Handling" name="should handle not found errors" time="0.009">
      <failure>Error: expected 404 &quot;Not Found&quot;, got 400 &quot;Bad Request&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/route-error-handling-integration.test.js:576:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Route Error Handling Integration Tests › Security Injection Prevention" name="should block SQL injection in portfolio creation" time="0.011">
    </testcase>
    <testcase classname="Route Error Handling Integration Tests › Security Injection Prevention" name="should block XSS attempts in settings" time="0.015">
    </testcase>
    <testcase classname="Route Error Handling Integration Tests › Error Response Consistency" name="should maintain consistent error format across all routes" time="0.029">
    </testcase>
    <testcase classname="Route Error Handling Integration Tests › Performance Under Error Conditions" name="should handle multiple concurrent error requests efficiently" time="0.126">
    </testcase>
  </testsuite>
  <testsuite name="Comprehensive API Endpoints Integration Tests" errors="0" failures="31" skipped="0" timestamp="2025-07-21T03:04:43" time="1.234" tests="31">
    <testcase classname="Comprehensive API Endpoints Integration Tests › Portfolio Endpoints with API Key Authentication" name="GET /api/portfolio - retrieve user portfolio with API key validation" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Portfolio Endpoints with API Key Authentication" name="POST /api/portfolio/positions - add new position with API key validation" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Portfolio Endpoints with API Key Authentication" name="PUT /api/portfolio/positions/:id - update position with ownership validation" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Portfolio Endpoints with API Key Authentication" name="DELETE /api/portfolio/positions/:id - remove position with ownership validation" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Trading Signals Endpoints with API Key Requirements" name="GET /api/signals - retrieve trading signals with API key validation" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Trading Signals Endpoints with API Key Requirements" name="GET /api/signals/:symbol - get signals for specific symbol" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Trading Signals Endpoints with API Key Requirements" name="POST /api/signals/preferences - update signal preferences" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Trading Signals Endpoints with API Key Requirements" name="GET /api/signals/history - retrieve signal history with API keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Market Data Endpoints with Provider-Specific API Keys" name="GET /api/market-data/quotes - real-time quotes with Polygon API key" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Market Data Endpoints with Provider-Specific API Keys" name="GET /api/market-data/historical/:symbol - historical data with API key" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Market Data Endpoints with Provider-Specific API Keys" name="GET /api/market-data/news/:symbol - financial news with Finnhub API key" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Market Data Endpoints with Provider-Specific API Keys" name="GET /api/market-data/earnings/:symbol - earnings data with API key" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Live Data Streaming Endpoints with API Key Authentication" name="POST /api/live-data/subscribe - subscribe to live data stream" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Live Data Streaming Endpoints with API Key Authentication" name="DELETE /api/live-data/unsubscribe/:subscriptionId - unsubscribe from stream" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Live Data Streaming Endpoints with API Key Authentication" name="GET /api/live-data/status - check live data connection status" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Watchlist Endpoints with API Key Integration" name="GET /api/watchlist - retrieve user watchlist" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Watchlist Endpoints with API Key Integration" name="POST /api/watchlist/symbols - add symbol to watchlist" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Watchlist Endpoints with API Key Integration" name="DELETE /api/watchlist/symbols/:symbol - remove symbol from watchlist" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Analytics Endpoints with API Key Dependencies" name="GET /api/analytics/performance - portfolio performance analytics" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Analytics Endpoints with API Key Dependencies" name="GET /api/analytics/risk - portfolio risk metrics" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Analytics Endpoints with API Key Dependencies" name="GET /api/analytics/allocation - portfolio allocation analysis" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Trading Endpoints with Alpaca API Key Integration" name="GET /api/trading/account - get trading account info" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Trading Endpoints with Alpaca API Key Integration" name="POST /api/trading/orders - place trading order" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Trading Endpoints with Alpaca API Key Integration" name="GET /api/trading/orders - get order history" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Trading Endpoints with Alpaca API Key Integration" name="DELETE /api/trading/orders/:orderId - cancel order" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › API Key Validation and Error Handling" name="endpoints reject requests without valid API keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › API Key Validation and Error Handling" name="endpoints handle API key validation failures gracefully" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › API Key Validation and Error Handling" name="endpoints handle provider-specific API key requirements" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Rate Limiting and Performance" name="endpoints respect rate limits" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Rate Limiting and Performance" name="endpoints respond within performance thresholds" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Comprehensive API Endpoints Integration Tests › Rate Limiting and Performance" name="endpoints handle concurrent requests efficiently" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-comprehensive-integration.test.js:17:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Real-Time Data Integration Tests" errors="0" failures="2" skipped="0" timestamp="2025-07-21T03:04:45" time="13.075" tests="17">
    <testcase classname="Real-Time Data Integration Tests › HTTP-Based Real-Time Data Service" name="Live data endpoint responds with real-time format" time="0.092">
    </testcase>
    <testcase classname="Real-Time Data Integration Tests › HTTP-Based Real-Time Data Service" name="Real-time data streaming simulation via HTTP polling" time="1.014">
    </testcase>
    <testcase classname="Real-Time Data Integration Tests › HTTP-Based Real-Time Data Service" name="Live data subscription management" time="0.034">
    </testcase>
    <testcase classname="Real-Time Data Integration Tests › HTTP-Based Real-Time Data Service" name="Live data unsubscription works correctly" time="0.031">
    </testcase>
    <testcase classname="Real-Time Data Integration Tests › WebSocket Connection Testing" name="WebSocket endpoint is available" time="0.063">
    </testcase>
    <testcase classname="Real-Time Data Integration Tests › WebSocket Connection Testing" name="WebSocket connection establishment (if available)" time="0.006">
    </testcase>
    <testcase classname="Real-Time Data Integration Tests › WebSocket Connection Testing" name="WebSocket message format validation" time="0.001">
    </testcase>
    <testcase classname="Real-Time Data Integration Tests › Live Data Feed Management" name="Data feed status monitoring" time="0.016">
      <failure>Error: expect(received).toBeDefined()

Received: undefined
    at Object.toBeDefined (/home/runner/work/algo/algo/webapp/lambda/tests/integration/realtime-data-integration.test.js:273:61)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Real-Time Data Integration Tests › Live Data Feed Management" name="Feed health check and circuit breaker status" time="0.015">
      <failure>Error: expect(received).toBeDefined()

Received: undefined
    at Object.toBeDefined (/home/runner/work/algo/algo/webapp/lambda/tests/integration/realtime-data-integration.test.js:292:62)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Real-Time Data Integration Tests › Live Data Feed Management" name="Feed reconnection and recovery mechanisms" time="3.01">
    </testcase>
    <testcase classname="Real-Time Data Integration Tests › Real-Time Data Performance" name="Concurrent real-time data requests performance" time="0.336">
    </testcase>
    <testcase classname="Real-Time Data Integration Tests › Real-Time Data Performance" name="Data freshness and latency validation" time="0.062">
    </testcase>
    <testcase classname="Real-Time Data Integration Tests › Real-Time Data Performance" name="Memory usage during streaming operations" time="2.043">
    </testcase>
    <testcase classname="Real-Time Data Integration Tests › Real-Time Data Error Scenarios" name="API rate limiting during streaming" time="0.272">
    </testcase>
    <testcase classname="Real-Time Data Integration Tests › Real-Time Data Error Scenarios" name="Connection failure and fallback behavior" time="0.03">
    </testcase>
    <testcase classname="Real-Time Data Integration Tests › Real-Time Data Error Scenarios" name="Circuit breaker activation during streaming failures" time="2.512">
    </testcase>
    <testcase classname="Real-Time Data Integration Tests › Real-Time Data Integration Test Summary" name="Complete real-time data integration test summary" time="0.011">
    </testcase>
  </testsuite>
  <testsuite name="Authentication Flow Integration Tests" errors="0" failures="6" skipped="0" timestamp="2025-07-21T03:04:58" time="4.69" tests="21">
    <testcase classname="Authentication Flow Integration Tests › JWT Token Management" name="JWT token creation and validation works correctly" time="0.007">
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › JWT Token Management" name="JWT token expiration is enforced" time="0.002">
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › JWT Token Management" name="JWT token with invalid signature is rejected" time="0.003">
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › JWT Token Management" name="JWT token with missing required claims is rejected" time="0.003">
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Cognito Integration Testing" name="Cognito configuration is accessible" time="0.003">
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Cognito Integration Testing" name="Cognito JWT token format validation" time="0.001">
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Cognito Integration Testing" name="Cognito error handling for invalid tokens" time="0.001">
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Protected Route Access Control" name="Protected routes require authentication" time="0.105">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 404
Received array: [401, 403, 503]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/authentication-flow-integration.test.js:241:33)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Protected Route Access Control" name="Invalid JWT tokens are rejected by protected routes" time="0.045">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 404
Received array: [401, 403, 503]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/authentication-flow-integration.test.js:260:33)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Protected Route Access Control" name="Valid JWT tokens allow access to protected routes" time="0.034">
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Protected Route Access Control" name="Missing Authorization header is handled correctly" time="0.051">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 404
Received array: [401, 403, 503]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/authentication-flow-integration.test.js:294:31)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Authentication Middleware Functionality" name="Auth middleware extracts user information correctly" time="0.04">
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Authentication Middleware Functionality" name="Auth middleware handles malformed Authorization headers" time="0.037">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 404
Received array: [400, 401, 403, 503]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/authentication-flow-integration.test.js:352:38)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Authentication Middleware Functionality" name="Auth middleware enforces token expiration" time="0.042">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 404
Received array: [401, 403, 503]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/authentication-flow-integration.test.js:373:31)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Session Management and Security" name="Multiple concurrent authentication requests are handled correctly" time="0.179">
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Session Management and Security" name="Authentication bypass is available in test environment" time="0.001">
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Session Management and Security" name="Security headers are properly set in authentication responses" time="0.03">
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Authentication Error Scenarios" name="Database connection failure during authentication" time="0.03">
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Authentication Error Scenarios" name="Cognito service unavailability is handled gracefully" time="0.029">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 429
Received array: [401, 403, 503]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/authentication-flow-integration.test.js:486:31)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Authentication Error Scenarios" name="High authentication load is handled without degradation" time="0.56">
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Authentication Integration Test Summary" name="Complete authentication integration test summary" time="0.012">
    </testcase>
  </testsuite>
  <testsuite name="API Key Dependent Pages Integration Tests" errors="0" failures="28" skipped="0" timestamp="2025-07-21T03:05:02" time="1.227" tests="28">
    <testcase classname="API Key Dependent Pages Integration Tests › Portfolio Page" name="Portfolio page fails gracefully without API keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Portfolio Page" name="Portfolio page works with API keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Portfolio Page" name="Portfolio summary includes all required data" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Portfolio Page" name="Portfolio performance calculation works" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Portfolio Page" name="Portfolio holdings with real-time prices" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Trading Features" name="Trading account info requires API keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Trading Features" name="Order validation works with API keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Trading Features" name="Paper trading order submission works" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Trading Features" name="Order history retrieval works" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Market Data Features" name="Real-time quotes require API keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Market Data Features" name="Historical data works with API keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Market Data Features" name="Market status check works" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Dashboard Features" name="Dashboard overview requires API keys for full data" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Dashboard Features" name="Watchlist with real-time prices" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Dashboard Features" name="Price alerts functionality" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Technical Analysis Features" name="Technical indicators require API keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Technical Analysis Features" name="Pattern recognition works" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Technical Analysis Features" name="Support and resistance levels" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › News and Sentiment Features" name="News with sentiment analysis" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › News and Sentiment Features" name="Social media sentiment" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Real-time Data Streaming" name="WebSocket connection setup requires API keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Real-time Data Streaming" name="Live data feed status" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Error Handling for Missing API Keys" name="All portfolio endpoints return helpful errors without API keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Error Handling for Missing API Keys" name="Trading endpoints return helpful errors without API keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Error Handling for Missing API Keys" name="Market data endpoints return helpful errors without API keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Performance with API Keys" name="Portfolio loading performance is acceptable" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Performance with API Keys" name="Real-time data retrieval is fast" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
    <testcase classname="API Key Dependent Pages Integration Tests › Performance with API Keys" name="Dashboard overview loads efficiently" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-dependent-pages.test.js:18:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Portfolio Calculation Integration Tests" errors="0" failures="0" skipped="0" timestamp="2025-07-21T03:05:04" time="3.988" tests="10">
    <testcase classname="Portfolio Calculation Integration Tests › Basic Portfolio Value Calculations" name="Portfolio positions calculation accuracy" time="0.096">
    </testcase>
    <testcase classname="Portfolio Calculation Integration Tests › Basic Portfolio Value Calculations" name="Portfolio summary aggregation accuracy" time="0.033">
    </testcase>
    <testcase classname="Portfolio Calculation Integration Tests › Basic Portfolio Value Calculations" name="Position percentage allocation calculations" time="0.038">
    </testcase>
    <testcase classname="Portfolio Calculation Integration Tests › Advanced Financial Calculations" name="Portfolio performance metrics calculation" time="0.074">
    </testcase>
    <testcase classname="Portfolio Calculation Integration Tests › Advanced Financial Calculations" name="Risk metrics and Value at Risk (VaR) calculations" time="0.032">
    </testcase>
    <testcase classname="Portfolio Calculation Integration Tests › Advanced Financial Calculations" name="Dividend and income calculations" time="0.034">
    </testcase>
    <testcase classname="Portfolio Calculation Integration Tests › Data Consistency and Mathematical Accuracy" name="Portfolio data consistency across endpoints" time="0.098">
    </testcase>
    <testcase classname="Portfolio Calculation Integration Tests › Data Consistency and Mathematical Accuracy" name="Portfolio calculation performance under load" time="0.15">
    </testcase>
    <testcase classname="Portfolio Calculation Integration Tests › Data Consistency and Mathematical Accuracy" name="Financial mathematics accuracy validation" time="0.003">
    </testcase>
    <testcase classname="Portfolio Calculation Integration Tests › Portfolio Integration Test Summary" name="Complete portfolio calculation integration test summary" time="0.009">
    </testcase>
  </testsuite>
  <testsuite name="External API Real Integration Tests" errors="0" failures="0" skipped="0" timestamp="2025-07-21T03:05:08" time="4.715" tests="11">
    <testcase classname="External API Real Integration Tests › Alpaca Trading API Integration" name="Alpaca authentication and account info retrieval" time="0.559">
    </testcase>
    <testcase classname="External API Real Integration Tests › Alpaca Trading API Integration" name="Alpaca portfolio positions retrieval" time="0.395">
    </testcase>
    <testcase classname="External API Real Integration Tests › Alpaca Trading API Integration" name="Alpaca market data retrieval" time="0.212">
    </testcase>
    <testcase classname="External API Real Integration Tests › Polygon Market Data API Integration" name="Polygon stock quote retrieval" time="0.337">
    </testcase>
    <testcase classname="External API Real Integration Tests › Polygon Market Data API Integration" name="Polygon aggregated data retrieval" time="0.282">
    </testcase>
    <testcase classname="External API Real Integration Tests › Finnhub Financial Data API Integration" name="Finnhub company profile retrieval" time="0.166">
    </testcase>
    <testcase classname="External API Real Integration Tests › Finnhub Financial Data API Integration" name="Finnhub news sentiment retrieval" time="0.132">
    </testcase>
    <testcase classname="External API Real Integration Tests › API Rate Limiting and Error Handling" name="API rate limiting is handled gracefully" time="0.846">
    </testcase>
    <testcase classname="External API Real Integration Tests › API Rate Limiting and Error Handling" name="API circuit breaker functionality" time="0.246">
    </testcase>
    <testcase classname="External API Real Integration Tests › API Data Validation and Schema Compliance" name="API responses match expected schemas" time="0.422">
    </testcase>
    <testcase classname="External API Real Integration Tests › External API Integration Test Summary" name="Complete external API integration test summary" time="0.014">
    </testcase>
  </testsuite>
  <testsuite name="Settings API Key Management Integration Tests" errors="0" failures="22" skipped="0" timestamp="2025-07-21T03:05:12" time="1.208" tests="22">
    <testcase classname="Settings API Key Management Integration Tests › API Key CRUD Operations" name="POST /api/settings/api-keys - Create new API keys" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/settings-api-key-management-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Settings API Key Management Integration Tests › API Key CRUD Operations" name="GET /api/settings/api-keys - Retrieve API keys (masked)" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/settings-api-key-management-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Settings API Key Management Integration Tests › API Key CRUD Operations" name="PUT /api/settings/api-keys - Update existing API keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/settings-api-key-management-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Settings API Key Management Integration Tests › API Key CRUD Operations" name="DELETE /api/settings/api-keys/:provider - Delete specific provider keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/settings-api-key-management-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Settings API Key Management Integration Tests › API Key CRUD Operations" name="DELETE /api/settings/api-keys - Delete all API keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/settings-api-key-management-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Settings API Key Management Integration Tests › API Key Validation and Testing" name="POST /api/settings/api-keys/validate - Validate API key formats" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/settings-api-key-management-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Settings API Key Management Integration Tests › API Key Validation and Testing" name="POST /api/settings/api-keys/test/:provider - Test provider connection" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/settings-api-key-management-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Settings API Key Management Integration Tests › API Key Validation and Testing" name="POST /api/settings/api-keys/test-all - Test all provider connections" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/settings-api-key-management-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Settings API Key Management Integration Tests › API Key Validation and Testing" name="handles invalid provider testing gracefully" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/settings-api-key-management-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Settings API Key Management Integration Tests › API Key Encryption and Security" name="encrypts API keys in database storage" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/settings-api-key-management-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Settings API Key Management Integration Tests › API Key Encryption and Security" name="uses unique encryption salt per user" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/settings-api-key-management-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Settings API Key Management Integration Tests › API Key Encryption and Security" name="prevents API key exposure in error messages" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/settings-api-key-management-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Settings API Key Management Integration Tests › API Key Encryption and Security" name="validates encryption integrity" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/settings-api-key-management-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Settings API Key Management Integration Tests › User Isolation and Access Control" name="prevents cross-user API key access" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/settings-api-key-management-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Settings API Key Management Integration Tests › User Isolation and Access Control" name="prevents unauthorized API key modification" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/settings-api-key-management-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Settings API Key Management Integration Tests › User Isolation and Access Control" name="enforces API key ownership for deletion" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/settings-api-key-management-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Settings API Key Management Integration Tests › API Key Migration and Import/Export" name="POST /api/settings/api-keys/import - Import API keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/settings-api-key-management-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Settings API Key Management Integration Tests › API Key Migration and Import/Export" name="GET /api/settings/api-keys/export - Export API keys (masked)" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/settings-api-key-management-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Settings API Key Management Integration Tests › API Key Migration and Import/Export" name="validates import data format" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/settings-api-key-management-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Settings API Key Management Integration Tests › Performance and Scalability" name="handles large API key payloads efficiently" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/settings-api-key-management-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Settings API Key Management Integration Tests › Performance and Scalability" name="concurrent API key operations" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/settings-api-key-management-integration.test.js:18:5)</failure>
    </testcase>
    <testcase classname="Settings API Key Management Integration Tests › Performance and Scalability" name="encryption/decryption performance under load" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/settings-api-key-management-integration.test.js:18:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Login + API Key Functionality Integration Tests" errors="0" failures="33" skipped="0" timestamp="2025-07-21T03:05:14" time="1.243" tests="33">
    <testcase classname="Login + API Key Functionality Integration Tests › Login Functionality" name="user can authenticate and get valid token" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Login Functionality" name="login fails with wrong password" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Login Functionality" name="protected routes require valid token" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Login Functionality" name="protected routes work with valid token" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › API Key Management" name="user can save Alpaca API key" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › API Key Management" name="user can retrieve their API keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › API Key Management" name="API keys are encrypted in database" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › API Key Management" name="user cannot access other users API keys" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › API Key Management" name="user can update API key description" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › API Key Management" name="user can delete API key" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Portfolio Page with API Keys" name="portfolio page loads with API key" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Portfolio Page with API Keys" name="portfolio page shows error without API key" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Portfolio Page with API Keys" name="portfolio summary works with API key" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Portfolio Page with API Keys" name="portfolio performance calculation works" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Trading Features with API Keys" name="account info retrieval works" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Trading Features with API Keys" name="order validation works" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Trading Features with API Keys" name="paper trading order placement works" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Market Data Features with API Keys" name="real-time quotes work with API key" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Market Data Features with API Keys" name="historical data retrieval works" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Market Data Features with API Keys" name="market status check works" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Dashboard Features with API Keys" name="dashboard data loads with API keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Dashboard Features with API Keys" name="watchlist functionality works" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Dashboard Features with API Keys" name="alerts functionality works" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Settings Page Features" name="settings page loads user preferences" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Settings Page Features" name="user can update preferences" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Settings Page Features" name="password change functionality works" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Error Handling and Edge Cases" name="expired token is handled properly" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Error Handling and Edge Cases" name="invalid API key format is rejected" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Error Handling and Edge Cases" name="missing required fields are handled" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Error Handling and Edge Cases" name="database errors are handled gracefully" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Performance and Load Testing" name="multiple concurrent requests are handled" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Performance and Load Testing" name="API key retrieval is fast" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
    <testcase classname="Login + API Key Functionality Integration Tests › Performance and Load Testing" name="portfolio data loads within reasonable time" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-api-key-functionality.test.js:17:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Comprehensive Error Handling Integration Tests" errors="0" failures="3" skipped="0" timestamp="2025-07-21T03:05:15" time="1.853" tests="26">
    <testcase classname="Comprehensive Error Handling Integration Tests › Error Categorization and Classification" name="should correctly categorize database errors" time="0.001">
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › Error Categorization and Classification" name="should correctly categorize authentication errors" time="0.001">
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › Error Categorization and Classification" name="should correctly categorize external service errors" time="0.008">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;RATE_LIMIT_ERROR&quot;
Received: &quot;EXTERNAL_SERVICE_ERROR&quot;
    at Object.toBe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/comprehensive-error-handling.test.js:154:24)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › Error Categorization and Classification" name="should correctly categorize timeout errors" time="0.001">
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › Error Categorization and Classification" name="should correctly categorize circuit breaker errors" time="0.001">
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › Database Error Handling" name="should handle database connection errors with proper response format" time="0.041">
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › Database Error Handling" name="should log database errors with enhanced context" time="0.018">
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › Authentication and Authorization Error Handling" name="should handle authentication errors correctly" time="0.007">
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › Authentication and Authorization Error Handling" name="should handle authorization errors correctly" time="0.009">
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › Business Validation Error Handling" name="should handle invalid trading order validation" time="0.02">
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › Business Validation Error Handling" name="should handle valid trading order without errors" time="0.009">
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › Business Validation Error Handling" name="should handle limit order validation correctly" time="0.008">
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › External Service Error Handling" name="should handle rate limiting errors with retry information" time="0.011">
      <failure>Error: expected 429 &quot;Too Many Requests&quot;, got 503 &quot;Service Unavailable&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/comprehensive-error-handling.test.js:312:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › External Service Error Handling" name="should handle timeout errors with recovery instructions" time="0.009">
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › Security and Injection Prevention" name="should block SQL injection attempts" time="0.014">
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › Security and Injection Prevention" name="should block XSS attempts" time="0.01">
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › Security and Injection Prevention" name="should block command injection attempts" time="0.013">
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › Circuit Breaker Error Handling" name="should handle circuit breaker errors with proper recovery info" time="0.008">
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › Complex Error Scenarios" name="should handle multiple validation errors in single request" time="0.01">
      <failure>Error: expected 500 &quot;Internal Server Error&quot;, got 400 &quot;Bad Request&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/comprehensive-error-handling.test.js:401:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › Complex Error Scenarios" name="should handle server errors with appropriate response" time="0.012">
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › Error Response Format Consistency" name="should maintain consistent error response format across all error types" time="0.061">
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › Error Response Format Consistency" name="should include retry information for recoverable errors" time="0.023">
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › Error Logging and Monitoring" name="should log errors with proper correlation IDs" time="0.012">
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › Error Logging and Monitoring" name="should log critical errors for monitoring" time="0.009">
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › Performance and Response Times" name="should handle errors efficiently without significant delay" time="0.013">
    </testcase>
    <testcase classname="Comprehensive Error Handling Integration Tests › Performance and Response Times" name="should handle multiple concurrent error requests efficiently" time="0.098">
    </testcase>
  </testsuite>
  <testsuite name="Database Real Integration Tests" errors="0" failures="1" skipped="0" timestamp="2025-07-21T03:05:17" time="8.127" tests="13">
    <testcase classname="Database Real Integration Tests › Database Connection Management" name="Database health check responds appropriately" time="0.007">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: &quot;unhealthy&quot;
Received array: [&quot;error&quot;, &quot;circuit_breaker_open&quot;]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/database-real-integration.test.js:60:51)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Database Real Integration Tests › Database Connection Management" name="Database initialization handles missing connections gracefully" time="6.676">
    </testcase>
    <testcase classname="Database Real Integration Tests › Database Connection Management" name="Connection pooling works under concurrent load" time="0.002">
    </testcase>
    <testcase classname="Database Real Integration Tests › Transaction Management" name="Database transactions work correctly" time="0.001">
    </testcase>
    <testcase classname="Database Real Integration Tests › Transaction Management" name="Transaction rollback works on errors" time="0.001">
    </testcase>
    <testcase classname="Database Real Integration Tests › Data Integrity Operations" name="User creation and retrieval works correctly" time="0.001">
    </testcase>
    <testcase classname="Database Real Integration Tests › Data Integrity Operations" name="API key storage and encryption works correctly" time="0.003">
    </testcase>
    <testcase classname="Database Real Integration Tests › Data Integrity Operations" name="Portfolio data operations maintain consistency" time="0.002">
    </testcase>
    <testcase classname="Database Real Integration Tests › Database Performance and Stress Testing" name="Database handles bulk operations efficiently" time="0.001">
    </testcase>
    <testcase classname="Database Real Integration Tests › Database Performance and Stress Testing" name="Database connection recovery works after failures" time="0.323">
    </testcase>
    <testcase classname="Database Real Integration Tests › Database Schema and Table Validation" name="Required tables exist and have correct structure" time="0.001">
    </testcase>
    <testcase classname="Database Real Integration Tests › Database Schema and Table Validation" name="Database indexes and constraints work correctly" time="0.002">
    </testcase>
    <testcase classname="Database Real Integration Tests › Database Integration Test Summary" name="Complete database integration test summary" time="0.011">
    </testcase>
  </testsuite>
  <testsuite name="Circuit Breaker Integration Tests" errors="0" failures="16" skipped="0" timestamp="2025-07-21T03:05:25" time="1.468" tests="16">
    <testcase classname="Circuit Breaker Integration Tests › Database Circuit Breaker" name="Detects database connection failures and opens circuit" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/circuit-breaker-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Circuit Breaker Integration Tests › Database Circuit Breaker" name="Returns appropriate error when database circuit is open" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/circuit-breaker-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Circuit Breaker Integration Tests › Database Circuit Breaker" name="Circuit breaker transitions to half-open state after timeout" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/circuit-breaker-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Circuit Breaker Integration Tests › Database Circuit Breaker" name="Circuit breaker handles rapid successive failures correctly" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/circuit-breaker-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Circuit Breaker Integration Tests › External API Circuit Breakers" name="Market data API circuit breaker functions correctly" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/circuit-breaker-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Circuit Breaker Integration Tests › External API Circuit Breakers" name="Alpaca API circuit breaker handles trading service failures" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/circuit-breaker-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Circuit Breaker Integration Tests › External API Circuit Breakers" name="External API failures do not cascade to other services" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/circuit-breaker-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Circuit Breaker Integration Tests › Circuit Breaker Configuration and Thresholds" name="Circuit breaker respects failure threshold configuration" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/circuit-breaker-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Circuit Breaker Integration Tests › Circuit Breaker Configuration and Thresholds" name="Circuit breaker timeout configuration is respected" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/circuit-breaker-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Circuit Breaker Integration Tests › Circuit Breaker Configuration and Thresholds" name="Circuit breaker provides detailed failure information" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/circuit-breaker-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Circuit Breaker Integration Tests › Circuit Breaker Recovery Patterns" name="Successful requests reset failure count in half-open state" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/circuit-breaker-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Circuit Breaker Integration Tests › Circuit Breaker Recovery Patterns" name="Circuit breaker provides fallback responses during failures" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/circuit-breaker-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Circuit Breaker Integration Tests › Circuit Breaker Recovery Patterns" name="Circuit breaker maintains service availability during partial failures" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/circuit-breaker-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Circuit Breaker Integration Tests › Circuit Breaker Monitoring and Alerting" name="Circuit breaker state changes are logged properly" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/circuit-breaker-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Circuit Breaker Integration Tests › Circuit Breaker Monitoring and Alerting" name="Circuit breaker metrics are available for monitoring" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/circuit-breaker-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Circuit Breaker Integration Tests › Circuit Breaker Monitoring and Alerting" name="Circuit breaker configuration can be updated dynamically" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/circuit-breaker-integration.test.js:18:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="API Key Management Integration Tests" errors="0" failures="17" skipped="0" timestamp="2025-07-21T03:05:26" time="1.481" tests="17">
    <testcase classname="API Key Management Integration Tests › API Key Storage and Encryption" name="Stores API key with AES-256-GCM encryption" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-management-integration.test.js:21:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="API Key Management Integration Tests › API Key Storage and Encryption" name="Retrieves and decrypts API keys correctly" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-management-integration.test.js:21:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="API Key Management Integration Tests › API Key Storage and Encryption" name="Validates API key format for different providers" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-management-integration.test.js:21:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="API Key Management Integration Tests › API Key Validation and Testing" name="Validates API key connectivity with provider" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-management-integration.test.js:21:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="API Key Management Integration Tests › API Key Validation and Testing" name="Handles invalid API key validation gracefully" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-management-integration.test.js:21:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="API Key Management Integration Tests › API Key Validation and Testing" name="Tests API key permissions and access levels" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-management-integration.test.js:21:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="API Key Management Integration Tests › API Key Security and Access Control" name="Prevents access to other users API keys" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-management-integration.test.js:21:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="API Key Management Integration Tests › API Key Security and Access Control" name="Requires authentication for all API key operations" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-management-integration.test.js:21:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="API Key Management Integration Tests › API Key Security and Access Control" name="Validates input sanitization for API key data" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-management-integration.test.js:21:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="API Key Management Integration Tests › API Key Lifecycle Management" name="Updates existing API key" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-management-integration.test.js:21:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="API Key Management Integration Tests › API Key Lifecycle Management" name="Deletes API key securely" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-management-integration.test.js:21:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="API Key Management Integration Tests › API Key Lifecycle Management" name="Handles multiple provider API keys" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-management-integration.test.js:21:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="API Key Management Integration Tests › API Key Error Handling and Resilience" name="Handles encryption service failures gracefully" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-management-integration.test.js:21:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="API Key Management Integration Tests › API Key Error Handling and Resilience" name="Handles database connection failures during API key operations" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-management-integration.test.js:21:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="API Key Management Integration Tests › API Key Error Handling and Resilience" name="Handles concurrent API key operations safely" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-management-integration.test.js:21:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="API Key Management Integration Tests › API Key Integration with External Services" name="Integration with portfolio data fetching" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-management-integration.test.js:21:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="API Key Management Integration Tests › API Key Integration with External Services" name="Integration with trading operations" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-management-integration.test.js:21:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="📋 Additional Routes Integration Tests" errors="0" failures="24" skipped="0" timestamp="2025-07-21T03:05:28" time="1.507" tests="24">
    <testcase classname="📋 Additional Routes Integration Tests › 🔔 Alerts Routes" name="GET /api/alerts - Get alerts service info" time="0.001">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📋 Additional Routes Integration Tests › 🔔 Alerts Routes" name="GET /api/alerts/types - Get alert types" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📋 Additional Routes Integration Tests › 🔔 Alerts Routes" name="GET /api/alerts/notifications - Get user notifications" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📋 Additional Routes Integration Tests › 🔔 Alerts Routes" name="POST /api/alerts - Create new alert" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📋 Additional Routes Integration Tests › 🔔 Alerts Routes" name="Authentication required for protected alert endpoints" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📋 Additional Routes Integration Tests › 📰 News Routes" name="GET /api/news/health - News service health" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📋 Additional Routes Integration Tests › 📰 News Routes" name="GET /api/news - News service root" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📋 Additional Routes Integration Tests › 📰 News Routes" name="GET /api/news/articles - Get news articles" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📋 Additional Routes Integration Tests › 📰 News Routes" name="GET /api/news/articles with query parameters" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📋 Additional Routes Integration Tests › 📰 News Routes" name="GET /api/news/sentiment - News sentiment analysis" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📋 Additional Routes Integration Tests › 📊 Technical Analysis Routes" name="GET /api/technical - Technical analysis data" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📋 Additional Routes Integration Tests › 📊 Technical Analysis Routes" name="GET /api/technical with different timeframes" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📋 Additional Routes Integration Tests › 📊 Technical Analysis Routes" name="GET /api/technical with pagination" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📋 Additional Routes Integration Tests › 📊 Technical Analysis Routes" name="GET /api/technical with date range" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📋 Additional Routes Integration Tests › 📊 Technical Analysis Routes" name="GET /api/technical input validation" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📋 Additional Routes Integration Tests › 📊 Technical Analysis Routes" name="Technical routes require authentication" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📋 Additional Routes Integration Tests › 👁️ Watchlist Routes" name="GET /api/watchlist - Get user watchlists" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📋 Additional Routes Integration Tests › 👁️ Watchlist Routes" name="POST /api/watchlist - Create new watchlist" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📋 Additional Routes Integration Tests › 👁️ Watchlist Routes" name="GET /api/watchlist/:id/items - Get watchlist items" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📋 Additional Routes Integration Tests › 👁️ Watchlist Routes" name="POST /api/watchlist/:id/items - Add item to watchlist" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📋 Additional Routes Integration Tests › 👁️ Watchlist Routes" name="DELETE /api/watchlist/:id - Delete watchlist" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📋 Additional Routes Integration Tests › 👁️ Watchlist Routes" name="Watchlist routes require authentication" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📋 Additional Routes Integration Tests › ⚡ Performance Testing" name="Additional routes respond within reasonable time" time="0.001">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📋 Additional Routes Integration Tests › 🔄 Integration Summary" name="Additional routes integration test summary" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="" name="Test execution failure: could be caused by test hooks like &apos;afterAll&apos;." time="0">
      <failure>{&quot;message&quot;:&quot;&quot;,&quot;stack&quot;:&quot;TypeError: Cannot read properties of undefined (reading &apos;cleanupTestUser&apos;)\n    at Object.cleanupTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/additional-routes-integration.test.js:33:18)\n    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (&lt;anonymous&gt;)\n    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:154:7)\n    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)&quot;}</failure>
    </testcase>
  </testsuite>
  <testsuite name="Security Integration Tests" errors="0" failures="20" skipped="0" timestamp="2025-07-21T03:05:29" time="1.586" tests="20">
    <testcase classname="Security Integration Tests › Authentication Security" name="Protected endpoints reject requests without authentication" time="0">
      <failure>TypeError: Cannot read properties of null (reading &apos;connect&apos;)
    at DatabaseTestUtils.connect [as createTestUser] (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:162:36)
    at createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:384:28)
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-integration.test.js:26:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Security Integration Tests › Authentication Security" name="Valid JWT tokens allow access to protected endpoints" time="0.001">
      <failure>TypeError: Cannot read properties of null (reading &apos;connect&apos;)
    at DatabaseTestUtils.connect [as createTestUser] (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:162:36)
    at createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:384:28)
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-integration.test.js:26:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Security Integration Tests › Authentication Security" name="Expired JWT tokens are rejected" time="0">
      <failure>TypeError: Cannot read properties of null (reading &apos;connect&apos;)
    at DatabaseTestUtils.connect [as createTestUser] (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:162:36)
    at createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:384:28)
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-integration.test.js:26:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Security Integration Tests › Authentication Security" name="Invalid JWT tokens are rejected" time="0">
      <failure>TypeError: Cannot read properties of null (reading &apos;connect&apos;)
    at DatabaseTestUtils.connect [as createTestUser] (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:162:36)
    at createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:384:28)
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-integration.test.js:26:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Security Integration Tests › Authentication Security" name="Malformed JWT tokens are rejected" time="0">
      <failure>TypeError: Cannot read properties of null (reading &apos;connect&apos;)
    at DatabaseTestUtils.connect [as createTestUser] (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:162:36)
    at createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:384:28)
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-integration.test.js:26:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Security Integration Tests › Authorization Security" name="Users can only access their own data" time="0">
      <failure>TypeError: Cannot read properties of null (reading &apos;connect&apos;)
    at DatabaseTestUtils.connect [as createTestUser] (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:162:36)
    at createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:384:28)
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-integration.test.js:26:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Security Integration Tests › Authorization Security" name="User ID in token must match requested user data" time="0.001">
      <failure>TypeError: Cannot read properties of null (reading &apos;connect&apos;)
    at DatabaseTestUtils.connect [as createTestUser] (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:162:36)
    at createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:384:28)
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-integration.test.js:26:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Security Integration Tests › Input Validation Security" name="SQL injection attempts are prevented" time="0">
      <failure>TypeError: Cannot read properties of null (reading &apos;connect&apos;)
    at DatabaseTestUtils.connect [as createTestUser] (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:162:36)
    at createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:384:28)
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-integration.test.js:26:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Security Integration Tests › Input Validation Security" name="XSS attempts are prevented in API responses" time="0">
      <failure>TypeError: Cannot read properties of null (reading &apos;connect&apos;)
    at DatabaseTestUtils.connect [as createTestUser] (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:162:36)
    at createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:384:28)
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-integration.test.js:26:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Security Integration Tests › Input Validation Security" name="Oversized payloads are rejected" time="0">
      <failure>TypeError: Cannot read properties of null (reading &apos;connect&apos;)
    at DatabaseTestUtils.connect [as createTestUser] (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:162:36)
    at createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:384:28)
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-integration.test.js:26:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Security Integration Tests › API Key Security" name="API keys are encrypted in storage" time="0">
      <failure>TypeError: Cannot read properties of null (reading &apos;connect&apos;)
    at DatabaseTestUtils.connect [as createTestUser] (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:162:36)
    at createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:384:28)
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-integration.test.js:26:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Security Integration Tests › API Key Security" name="API key retrieval requires proper authentication" time="0.001">
      <failure>TypeError: Cannot read properties of null (reading &apos;connect&apos;)
    at DatabaseTestUtils.connect [as createTestUser] (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:162:36)
    at createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:384:28)
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-integration.test.js:26:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Security Integration Tests › API Key Security" name="API key updates are properly validated" time="0">
      <failure>TypeError: Cannot read properties of null (reading &apos;connect&apos;)
    at DatabaseTestUtils.connect [as createTestUser] (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:162:36)
    at createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:384:28)
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-integration.test.js:26:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Security Integration Tests › Rate Limiting Security" name="Rapid requests are rate limited" time="0">
      <failure>TypeError: Cannot read properties of null (reading &apos;connect&apos;)
    at DatabaseTestUtils.connect [as createTestUser] (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:162:36)
    at createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:384:28)
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-integration.test.js:26:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Security Integration Tests › Session Security" name="Tokens have reasonable expiration times" time="0">
      <failure>TypeError: Cannot read properties of null (reading &apos;connect&apos;)
    at DatabaseTestUtils.connect [as createTestUser] (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:162:36)
    at createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:384:28)
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-integration.test.js:26:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Security Integration Tests › Session Security" name="Token refresh mechanism works securely" time="0">
      <failure>TypeError: Cannot read properties of null (reading &apos;connect&apos;)
    at DatabaseTestUtils.connect [as createTestUser] (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:162:36)
    at createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:384:28)
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-integration.test.js:26:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Security Integration Tests › Error Handling Security" name="Error messages do not leak sensitive information" time="0">
      <failure>TypeError: Cannot read properties of null (reading &apos;connect&apos;)
    at DatabaseTestUtils.connect [as createTestUser] (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:162:36)
    at createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:384:28)
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-integration.test.js:26:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Security Integration Tests › Error Handling Security" name="Database errors are properly handled without information disclosure" time="0.001">
      <failure>TypeError: Cannot read properties of null (reading &apos;connect&apos;)
    at DatabaseTestUtils.connect [as createTestUser] (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:162:36)
    at createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:384:28)
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-integration.test.js:26:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Security Integration Tests › HTTPS and Transport Security" name="Security headers are present in responses" time="0">
      <failure>TypeError: Cannot read properties of null (reading &apos;connect&apos;)
    at DatabaseTestUtils.connect [as createTestUser] (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:162:36)
    at createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:384:28)
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-integration.test.js:26:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Security Integration Tests › HTTPS and Transport Security" name="CORS configuration is secure" time="0">
      <failure>TypeError: Cannot read properties of null (reading &apos;connect&apos;)
    at DatabaseTestUtils.connect [as createTestUser] (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:162:36)
    at createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:384:28)
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/security-integration.test.js:26:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
  </testsuite>
  <testsuite name="📈 Market Data Routes Integration Tests" errors="0" failures="17" skipped="0" timestamp="2025-07-21T03:05:31" time="1.485" tests="17">
    <testcase classname="📈 Market Data Routes Integration Tests › 📊 Real-time Market Data" name="GET /api/market-data/quote - Single stock quote" time="0.001">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/market-data-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📈 Market Data Routes Integration Tests › 📊 Real-time Market Data" name="GET /api/market-data/quotes - Multiple stock quotes" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/market-data-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📈 Market Data Routes Integration Tests › 📊 Real-time Market Data" name="GET /api/market-data/bars - Historical bars data" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/market-data-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📈 Market Data Routes Integration Tests › 📊 Real-time Market Data" name="GET /api/market-data/trades - Recent trades" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/market-data-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📈 Market Data Routes Integration Tests › 📋 Market Information" name="GET /api/market-data/status - Market status" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/market-data-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📈 Market Data Routes Integration Tests › 📋 Market Information" name="GET /api/market-data/calendar - Market calendar" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/market-data-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📈 Market Data Routes Integration Tests › 📋 Market Information" name="GET /api/market-data/assets - Available assets" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/market-data-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📈 Market Data Routes Integration Tests › 🔍 Symbol Validation" name="Valid stock symbols work" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/market-data-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📈 Market Data Routes Integration Tests › 🔍 Symbol Validation" name="Invalid symbols rejected" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/market-data-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📈 Market Data Routes Integration Tests › 🔍 Symbol Validation" name="Symbol limits enforced" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/market-data-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📈 Market Data Routes Integration Tests › 📅 Date Range Validation" name="Valid date ranges work" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/market-data-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📈 Market Data Routes Integration Tests › 📅 Date Range Validation" name="Invalid date ranges rejected" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/market-data-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📈 Market Data Routes Integration Tests › ⏱️ Timeframe Validation" name="Valid timeframes work" time="0.001">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/market-data-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📈 Market Data Routes Integration Tests › ⏱️ Timeframe Validation" name="Invalid timeframes rejected" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/market-data-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📈 Market Data Routes Integration Tests › 🔒 Authentication Requirements" name="Market data routes require authentication" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/market-data-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📈 Market Data Routes Integration Tests › ⚡ Performance Testing" name="Market data endpoints respond within reasonable time" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/market-data-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="📈 Market Data Routes Integration Tests › 🔄 Integration Summary" name="Market data integration test summary" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/market-data-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="" name="Test execution failure: could be caused by test hooks like &apos;afterAll&apos;." time="0">
      <failure>{&quot;message&quot;:&quot;&quot;,&quot;stack&quot;:&quot;TypeError: Cannot read properties of undefined (reading &apos;cleanupTestUser&apos;)\n    at Object.cleanupTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/market-data-routes-integration.test.js:33:18)\n    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (&lt;anonymous&gt;)\n    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:154:7)\n    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)&quot;}</failure>
    </testcase>
  </testsuite>
  <testsuite name="Database Circuit Breaker Integration Tests" errors="0" failures="1" skipped="0" timestamp="2025-07-21T03:05:32" time="1.549" tests="13">
    <testcase classname="Database Circuit Breaker Integration Tests › Database Connection Protection" name="should protect database operations with circuit breaker" time="0.002">
    </testcase>
    <testcase classname="Database Circuit Breaker Integration Tests › Database Connection Protection" name="should handle database connection failures gracefully" time="0.002">
    </testcase>
    <testcase classname="Database Circuit Breaker Integration Tests › Database Connection Protection" name="should open circuit breaker after repeated database failures" time="0.027">
    </testcase>
    <testcase classname="Database Circuit Breaker Integration Tests › Database Connection Protection" name="should recover from open state with successful operations" time="0.047">
    </testcase>
    <testcase classname="Database Circuit Breaker Integration Tests › Emergency Database Recovery Integration" name="should perform complete emergency database recovery workflow" time="0.044">
    </testcase>
    <testcase classname="Database Circuit Breaker Integration Tests › Emergency Database Recovery Integration" name="should test database connectivity independently" time="0.012">
    </testcase>
    <testcase classname="Database Circuit Breaker Integration Tests › Circuit Breaker State Management" name="should maintain consistent state across multiple operations" time="0.005">
    </testcase>
    <testcase classname="Database Circuit Breaker Integration Tests › Circuit Breaker State Management" name="should handle concurrent database operations safely" time="0.003">
    </testcase>
    <testcase classname="Database Circuit Breaker Integration Tests › Circuit Breaker State Management" name="should provide accurate metrics during mixed load" time="0.01">
    </testcase>
    <testcase classname="Database Circuit Breaker Integration Tests › Performance and Scalability" name="should handle high-frequency database operations efficiently" time="0.002">
    </testcase>
    <testcase classname="Database Circuit Breaker Integration Tests › Performance and Scalability" name="should manage memory efficiently with large operation history" time="0.143">
    </testcase>
    <testcase classname="Database Circuit Breaker Integration Tests › Error Recovery Scenarios" name="should recover from catastrophic database failure" time="0.116">
    </testcase>
    <testcase classname="Database Circuit Breaker Integration Tests › Error Recovery Scenarios" name="should handle partial recovery scenarios" time="0.047">
      <failure>Error: Circuit breaker is OPEN. Database unavailable for 10 more seconds. Reason: Too many connection failures (26 failures). Last failure: 2025-07-21T03:05:33.394Z
    at DatabaseCircuitBreaker.execute (/home/runner/work/algo/algo/webapp/lambda/utils/databaseCircuitBreaker.js:33:15)
    at Object.execute (/home/runner/work/algo/algo/webapp/lambda/tests/integration/database-circuit-breaker-integration.test.js:377:28)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="API Key Upload Integration Tests" errors="0" failures="20" skipped="0" timestamp="2025-07-21T03:05:34" time="1.202" tests="20">
    <testcase classname="API Key Upload Integration Tests › API Key Upload Workflow" name="can upload new API keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-upload-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="API Key Upload Integration Tests › API Key Upload Workflow" name="can retrieve uploaded API keys (encrypted)" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-upload-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="API Key Upload Integration Tests › API Key Upload Workflow" name="can update existing API keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-upload-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="API Key Upload Integration Tests › API Key Upload Workflow" name="can delete API keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-upload-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="API Key Upload Integration Tests › API Key Validation Tests" name="validates Alpaca API key format" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-upload-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="API Key Upload Integration Tests › API Key Validation Tests" name="validates required API key fields" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-upload-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="API Key Upload Integration Tests › API Key Validation Tests" name="prevents uploading empty or null API keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-upload-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="API Key Upload Integration Tests › API Key Validation Tests" name="validates API key length limits" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-upload-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="API Key Upload Integration Tests › API Key Security Tests" name="encrypts API keys in database" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-upload-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="API Key Upload Integration Tests › API Key Security Tests" name="prevents API key exposure in logs" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-upload-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="API Key Upload Integration Tests › API Key Security Tests" name="validates user ownership of API keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-upload-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="API Key Upload Integration Tests › API Key Service Integration" name="can test Alpaca connection with uploaded keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-upload-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="API Key Upload Integration Tests › API Key Service Integration" name="can test Polygon connection with uploaded keys" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-upload-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="API Key Upload Integration Tests › API Key Service Integration" name="handles API key service failures gracefully" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-upload-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="API Key Upload Integration Tests › API Key Migration and Recovery" name="can migrate API keys from localStorage format" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-upload-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="API Key Upload Integration Tests › API Key Migration and Recovery" name="can export API keys for backup (masked)" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-upload-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="API Key Upload Integration Tests › API Key Migration and Recovery" name="validates import data integrity" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-upload-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="API Key Upload Integration Tests › Performance and Load Tests" name="handles multiple concurrent API key uploads" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-upload-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="API Key Upload Integration Tests › Performance and Load Tests" name="API key encryption/decryption performance" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-upload-integration.test.js:17:5)</failure>
    </testcase>
    <testcase classname="API Key Upload Integration Tests › Performance and Load Tests" name="handles large API key payloads" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-key-upload-integration.test.js:17:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Real CI/CD Integration Tests" errors="0" failures="7" skipped="0" timestamp="2025-07-21T03:05:35" time="4.238" tests="21">
    <testcase classname="Real CI/CD Integration Tests › Application Health and Availability" name="Application starts and is responsive" time="0.002">
    </testcase>
    <testcase classname="Real CI/CD Integration Tests › Application Health and Availability" name="Health endpoint responds (even with errors)" time="0.137">
    </testcase>
    <testcase classname="Real CI/CD Integration Tests › Application Health and Availability" name="API routes are discoverable" time="0.08">
      <failure>Error: expect(received).not.toBe(expected) // Object.is equality

Expected: not 404
    at Object.toBe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/ci-cd-real-integration.test.js:75:37)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Real CI/CD Integration Tests › Authentication System Testing" name="Protected routes handle missing authentication correctly" time="0.055">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 404
Received array: [401, 403, 503]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/ci-cd-real-integration.test.js:88:31)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Real CI/CD Integration Tests › Authentication System Testing" name="Invalid JWT tokens are rejected" time="0.045">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 404
Received array: [401, 403, 503]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/ci-cd-real-integration.test.js:102:31)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Real CI/CD Integration Tests › Authentication System Testing" name="Cognito configuration availability check" time="0.04">
    </testcase>
    <testcase classname="Real CI/CD Integration Tests › Database Integration Testing" name="Database connection error handling" time="0.037">
    </testcase>
    <testcase classname="Real CI/CD Integration Tests › Database Integration Testing" name="Database-dependent endpoints handle connection failures" time="0.035">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 404
Received array: [400, 500, 503]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/ci-cd-real-integration.test.js:158:31)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Real CI/CD Integration Tests › External API Integration Testing" name="API key validation without external calls" time="0.05">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 500
Received array: [400, 401, 403, 503]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/ci-cd-real-integration.test.js:173:36)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Real CI/CD Integration Tests › External API Integration Testing" name="External service timeout handling" time="0.033">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 404
Received array: [400, 401, 403, 500, 503]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/ci-cd-real-integration.test.js:185:41)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Real CI/CD Integration Tests › Environment Configuration Testing" name="Required environment variables" time="0.002">
    </testcase>
    <testcase classname="Real CI/CD Integration Tests › Environment Configuration Testing" name="Database configuration detection" time="0.002">
    </testcase>
    <testcase classname="Real CI/CD Integration Tests › Environment Configuration Testing" name="AWS configuration detection" time="0.002">
    </testcase>
    <testcase classname="Real CI/CD Integration Tests › Error Handling and Resilience" name="Application handles missing dependencies gracefully" time="0.037">
    </testcase>
    <testcase classname="Real CI/CD Integration Tests › Error Handling and Resilience" name="Circuit breaker functionality" time="0.082">
    </testcase>
    <testcase classname="Real CI/CD Integration Tests › Error Handling and Resilience" name="Graceful degradation for API-dependent features" time="0.031">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 429
Received array: [200, 400, 401, 403, 500, 503]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/ci-cd-real-integration.test.js:290:46)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Real CI/CD Integration Tests › Integration Test Infrastructure Validation" name="Test framework is properly configured" time="0.001">
    </testcase>
    <testcase classname="Real CI/CD Integration Tests › Integration Test Infrastructure Validation" name="Supertest integration is working" time="0.029">
    </testcase>
    <testcase classname="Real CI/CD Integration Tests › Integration Test Infrastructure Validation" name="JWT token creation and validation" time="0.003">
    </testcase>
    <testcase classname="Real CI/CD Integration Tests › Integration Test Infrastructure Validation" name="Test artifacts can be generated" time="0.001">
    </testcase>
    <testcase classname="Real CI/CD Integration Tests › Real-World Integration Scenarios" name="Complete user workflow simulation (with expected failures)" time="0.116">
    </testcase>
  </testsuite>
  <testsuite name="Circuit Breaker End-to-End Crisis Resolution" errors="0" failures="0" skipped="0" timestamp="2025-07-21T03:05:39" time="1.295" tests="15">
    <testcase classname="Circuit Breaker End-to-End Crisis Resolution › Circuit Breaker Crisis Simulation and Recovery" name="should simulate database circuit breaker crisis and recover" time="0.009">
    </testcase>
    <testcase classname="Circuit Breaker End-to-End Crisis Resolution › Circuit Breaker Crisis Simulation and Recovery" name="should get circuit breaker status via API" time="0.024">
    </testcase>
    <testcase classname="Circuit Breaker End-to-End Crisis Resolution › Circuit Breaker Crisis Simulation and Recovery" name="should get health check showing degraded status" time="0.01">
    </testcase>
    <testcase classname="Circuit Breaker End-to-End Crisis Resolution › Circuit Breaker Crisis Simulation and Recovery" name="should reset all circuit breakers via emergency API" time="0.017">
    </testcase>
    <testcase classname="Circuit Breaker End-to-End Crisis Resolution › Circuit Breaker Crisis Simulation and Recovery" name="should verify circuit breakers are closed after reset" time="0.009">
    </testcase>
    <testcase classname="Circuit Breaker End-to-End Crisis Resolution › Circuit Breaker Crisis Simulation and Recovery" name="should show healthy status after reset" time="0.008">
    </testcase>
    <testcase classname="Circuit Breaker End-to-End Crisis Resolution › Database Recovery Workflow" name="should perform emergency database recovery" time="0.032">
    </testcase>
    <testcase classname="Circuit Breaker End-to-End Crisis Resolution › Database Recovery Workflow" name="should test database connectivity" time="0.026">
    </testcase>
    <testcase classname="Circuit Breaker End-to-End Crisis Resolution › Circuit Breaker Configuration Validation" name="should validate production circuit breaker thresholds" time="0.004">
    </testcase>
    <testcase classname="Circuit Breaker End-to-End Crisis Resolution › Circuit Breaker Configuration Validation" name="should validate circuit breaker recovery behavior" time="0.009">
    </testcase>
    <testcase classname="Circuit Breaker End-to-End Crisis Resolution › Performance and Metrics Validation" name="should validate circuit breaker metrics collection" time="0.003">
    </testcase>
    <testcase classname="Circuit Breaker End-to-End Crisis Resolution › Performance and Metrics Validation" name="should validate circuit breaker recent activity tracking" time="0.002">
    </testcase>
    <testcase classname="Circuit Breaker End-to-End Crisis Resolution › Error Handling and Edge Cases" name="should handle malformed emergency requests gracefully" time="0.014">
    </testcase>
    <testcase classname="Circuit Breaker End-to-End Crisis Resolution › Error Handling and Edge Cases" name="should handle non-existent circuit breaker gracefully" time="0.002">
    </testcase>
    <testcase classname="Circuit Breaker End-to-End Crisis Resolution › Error Handling and Edge Cases" name="should validate risk level calculations" time="0.014">
    </testcase>
  </testsuite>
  <testsuite name="Integration Test Infrastructure Validation" errors="0" failures="0" skipped="0" timestamp="2025-07-21T03:05:41" time="2.508" tests="19">
    <testcase classname="Integration Test Infrastructure Validation › Test Environment Configuration" name="Jest is configured correctly" time="0.002">
    </testcase>
    <testcase classname="Integration Test Infrastructure Validation › Test Environment Configuration" name="Environment variables are configured for testing" time="0.005">
    </testcase>
    <testcase classname="Integration Test Infrastructure Validation › Test Environment Configuration" name="AWS SDK mocking is working" time="0.002">
    </testcase>
    <testcase classname="Integration Test Infrastructure Validation › Test Dependencies and Imports" name="All required testing dependencies are available" time="0.016">
    </testcase>
    <testcase classname="Integration Test Infrastructure Validation › Test Dependencies and Imports" name="Database utilities are importable" time="0.007">
    </testcase>
    <testcase classname="Integration Test Infrastructure Validation › Test Dependencies and Imports" name="Application modules are importable" time="0.278">
    </testcase>
    <testcase classname="Integration Test Infrastructure Validation › Database Test Infrastructure" name="Database connection configuration is valid" time="0.002">
    </testcase>
    <testcase classname="Integration Test Infrastructure Validation › Database Test Infrastructure" name="Database test utilities are properly initialized" time="0.002">
    </testcase>
    <testcase classname="Integration Test Infrastructure Validation › Database Test Infrastructure" name="Database connection error handling works" time="0.028">
    </testcase>
    <testcase classname="Integration Test Infrastructure Validation › Test File Structure and Organization" name="Integration test directory structure is correct" time="0.002">
    </testcase>
    <testcase classname="Integration Test Infrastructure Validation › Test File Structure and Organization" name="Integration test files are discoverable" time="0.025">
    </testcase>
    <testcase classname="Integration Test Infrastructure Validation › Test Reporting and Artifacts" name="Test results directory can be created" time="0.002">
    </testcase>
    <testcase classname="Integration Test Infrastructure Validation › Test Reporting and Artifacts" name="Jest junit reporter configuration works" time="0.016">
    </testcase>
    <testcase classname="Integration Test Infrastructure Validation › Express Application Testing" name="Express app can be imported and tested" time="0.002">
    </testcase>
    <testcase classname="Integration Test Infrastructure Validation › Mock and Stub Capabilities" name="JWT token creation and verification works" time="0.003">
    </testcase>
    <testcase classname="Integration Test Infrastructure Validation › Mock and Stub Capabilities" name="Crypto operations for API key encryption work" time="0.005">
    </testcase>
    <testcase classname="Integration Test Infrastructure Validation › CI/CD Environment Compatibility" name="Test environment supports CI/CD execution" time="0.002">
    </testcase>
    <testcase classname="Integration Test Infrastructure Validation › CI/CD Environment Compatibility" name="Test timeout configuration is appropriate" time="1.002">
    </testcase>
    <testcase classname="Integration Test Infrastructure Validation › Integration Test Infrastructure Summary" name="Complete infrastructure validation summary" time="0.01">
    </testcase>
  </testsuite>
  <testsuite name="🚀 Basic API Routes Integration Tests" errors="0" failures="23" skipped="0" timestamp="2025-07-21T03:05:43" time="1.461" tests="23">
    <testcase classname="🚀 Basic API Routes Integration Tests › 🏥 Health and Status Routes" name="GET / - Root endpoint" time="0.001">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="🚀 Basic API Routes Integration Tests › 🏥 Health and Status Routes" name="GET /health - Basic health check" time="0.001">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="🚀 Basic API Routes Integration Tests › 🏥 Health and Status Routes" name="GET /api/health - API health check" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="🚀 Basic API Routes Integration Tests › 🏥 Health and Status Routes" name="GET /system-status - System status" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="🚀 Basic API Routes Integration Tests › 🏥 Health and Status Routes" name="GET /debug - Debug endpoint" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="🚀 Basic API Routes Integration Tests › 🔧 Settings API Routes" name="GET /api/settings/api-keys - Get API keys" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="🚀 Basic API Routes Integration Tests › 🔧 Settings API Routes" name="POST /api/settings/api-keys - Add API key" time="0.001">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="🚀 Basic API Routes Integration Tests › 🔧 Settings API Routes" name="GET /api/settings/notifications - Get notification preferences" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="🚀 Basic API Routes Integration Tests › 🔧 Settings API Routes" name="PUT /api/settings/notifications - Update notification preferences" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="🚀 Basic API Routes Integration Tests › 🔧 Settings API Routes" name="GET /api/settings/theme - Get theme preferences" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="🚀 Basic API Routes Integration Tests › 🔧 Settings API Routes" name="PUT /api/settings/theme - Update theme preferences" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="🚀 Basic API Routes Integration Tests › 📊 Existing Route Endpoints" name="Routes load without 500 errors" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="🚀 Basic API Routes Integration Tests › 🔍 Error Handling" name="404 for non-existent routes" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="🚀 Basic API Routes Integration Tests › 🔍 Error Handling" name="Invalid HTTP methods handled" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="🚀 Basic API Routes Integration Tests › 🔍 Error Handling" name="CORS headers present on errors" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="🚀 Basic API Routes Integration Tests › 🛡️ Security Headers" name="Security headers present" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="🚀 Basic API Routes Integration Tests › 🛡️ Security Headers" name="Sensitive headers removed" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="🚀 Basic API Routes Integration Tests › 📝 Request/Response Format" name="JSON content type" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="🚀 Basic API Routes Integration Tests › 📝 Request/Response Format" name="Correlation ID in responses" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="🚀 Basic API Routes Integration Tests › 📝 Request/Response Format" name="Timestamp in responses" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="🚀 Basic API Routes Integration Tests › ⚡ Performance" name="Health endpoints respond quickly" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="🚀 Basic API Routes Integration Tests › ⚡ Performance" name="Basic routes have reasonable response times" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="🚀 Basic API Routes Integration Tests › 🔗 Integration Summary" name="Basic API integration test summary" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="" name="Test execution failure: could be caused by test hooks like &apos;afterAll&apos;." time="0">
      <failure>{&quot;message&quot;:&quot;&quot;,&quot;stack&quot;:&quot;TypeError: Cannot read properties of undefined (reading &apos;cleanupTestUser&apos;)\n    at Object.cleanupTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/basic-api-routes-integration.test.js:28:18)\n    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (&lt;anonymous&gt;)\n    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:154:7)\n    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)&quot;}</failure>
    </testcase>
  </testsuite>
  <testsuite name="🔐 Authentication Routes Integration Tests" errors="0" failures="17" skipped="0" timestamp="2025-07-21T03:05:45" time="1.494" tests="17">
    <testcase classname="🔐 Authentication Routes Integration Tests › 🏥 Auth Health and Status" name="GET /api/auth/health - Auth service health" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;address&apos;)
    at Test.serverAddress (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:46:22)
    at new Test (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:34:14)
    at Object.obj.&lt;computed&gt; [as get] (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/index.js:43:18)
    at Object.get (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-routes-integration.test.js:14:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="🔐 Authentication Routes Integration Tests › 🏥 Auth Health and Status" name="GET /api/auth/status - Auth service status" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;address&apos;)
    at Test.serverAddress (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:46:22)
    at new Test (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:34:14)
    at Object.obj.&lt;computed&gt; [as get] (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/index.js:43:18)
    at Object.get (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-routes-integration.test.js:28:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="🔐 Authentication Routes Integration Tests › 🔑 Token Validation" name="POST /api/auth/validate - Token validation with valid structure" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;address&apos;)
    at Test.serverAddress (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:46:22)
    at new Test (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:34:14)
    at Object.obj.&lt;computed&gt; [as post] (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/index.js:43:18)
    at Object.post (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-routes-integration.test.js:49:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="🔐 Authentication Routes Integration Tests › 🔑 Token Validation" name="POST /api/auth/validate - Token validation without token" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;address&apos;)
    at Test.serverAddress (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:46:22)
    at new Test (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:34:14)
    at Object.obj.&lt;computed&gt; [as post] (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/index.js:43:18)
    at Object.post (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-routes-integration.test.js:63:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="🔐 Authentication Routes Integration Tests › 🔑 Token Validation" name="POST /api/auth/validate - Token validation with empty token" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;address&apos;)
    at Test.serverAddress (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:46:22)
    at new Test (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:34:14)
    at Object.obj.&lt;computed&gt; [as post] (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/index.js:43:18)
    at Object.post (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-routes-integration.test.js:80:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="🔐 Authentication Routes Integration Tests › 🔑 Token Validation" name="POST /api/auth/validate - Token validation with invalid JSON" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;address&apos;)
    at Test.serverAddress (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:46:22)
    at new Test (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:34:14)
    at Object.obj.&lt;computed&gt; [as post] (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/index.js:43:18)
    at Object.post (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-routes-integration.test.js:93:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="🔐 Authentication Routes Integration Tests › 📝 Request/Response Format" name="Auth endpoints return proper JSON format" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;address&apos;)
    at Test.serverAddress (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:46:22)
    at new Test (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:34:14)
    at Object.obj.&lt;computed&gt; [as get] (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/index.js:43:18)
    at Object.get (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-routes-integration.test.js:115:12)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="🔐 Authentication Routes Integration Tests › 📝 Request/Response Format" name="Auth endpoints include timestamps" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;address&apos;)
    at Test.serverAddress (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:46:22)
    at new Test (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:34:14)
    at Object.obj.&lt;computed&gt; [as get] (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/index.js:43:18)
    at Object.get (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-routes-integration.test.js:139:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="🔐 Authentication Routes Integration Tests › 🛡️ Security Headers" name="Auth endpoints include security headers" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;address&apos;)
    at Test.serverAddress (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:46:22)
    at new Test (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:34:14)
    at Object.obj.&lt;computed&gt; [as get] (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/index.js:43:18)
    at Object.get (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-routes-integration.test.js:155:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="🔐 Authentication Routes Integration Tests › 🛡️ Security Headers" name="Auth endpoints remove sensitive headers" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;address&apos;)
    at Test.serverAddress (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:46:22)
    at new Test (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:34:14)
    at Object.obj.&lt;computed&gt; [as get] (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/index.js:43:18)
    at Object.get (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-routes-integration.test.js:167:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="🔐 Authentication Routes Integration Tests › 🌐 CORS Support" name="Auth endpoints support CORS" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;address&apos;)
    at Test.serverAddress (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:46:22)
    at new Test (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:34:14)
    at Object.obj.&lt;computed&gt; [as get] (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/index.js:43:18)
    at Object.get (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-routes-integration.test.js:180:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="🔐 Authentication Routes Integration Tests › 🌐 CORS Support" name="OPTIONS requests handled for auth endpoints" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;address&apos;)
    at Test.serverAddress (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:46:22)
    at new Test (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:34:14)
    at Object.obj.&lt;computed&gt; [as options] (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/index.js:43:18)
    at Object.options (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-routes-integration.test.js:192:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="🔐 Authentication Routes Integration Tests › ⚡ Performance Testing" name="Auth endpoints respond quickly" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;address&apos;)
    at Test.serverAddress (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:46:22)
    at new Test (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:34:14)
    at Object.obj.&lt;computed&gt; [as get] (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/index.js:43:18)
    at Object.get (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-routes-integration.test.js:216:12)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="🔐 Authentication Routes Integration Tests › ⚡ Performance Testing" name="Token validation performance" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;address&apos;)
    at Test.serverAddress (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:46:22)
    at new Test (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:34:14)
    at Object.obj.&lt;computed&gt; [as post] (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/index.js:43:18)
    at Object.post (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-routes-integration.test.js:247:12)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="🔐 Authentication Routes Integration Tests › 🔄 Error Handling" name="Invalid HTTP methods handled" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;address&apos;)
    at Test.serverAddress (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:46:22)
    at new Test (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:34:14)
    at Object.obj.&lt;computed&gt; [as patch] (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/index.js:43:18)
    at Object.patch (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-routes-integration.test.js:273:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="🔐 Authentication Routes Integration Tests › 🔄 Error Handling" name="Malformed requests handled gracefully" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;address&apos;)
    at Test.serverAddress (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:46:22)
    at new Test (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:34:14)
    at Object.obj.&lt;computed&gt; [as post] (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/index.js:43:18)
    at Object.post (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-routes-integration.test.js:286:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="🔐 Authentication Routes Integration Tests › 🔄 Integration Summary" name="Authentication integration test summary" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;address&apos;)
    at Test.serverAddress (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:46:22)
    at new Test (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:34:14)
    at Object.obj.&lt;computed&gt; [as get] (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/index.js:43:18)
    at Object.get (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-routes-integration.test.js:328:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Performance Integration Tests" errors="0" failures="9" skipped="0" timestamp="2025-07-21T03:05:46" time="1.472" tests="9">
    <testcase classname="Performance Integration Tests › API Response Time Performance" name="Health endpoint responds within 200ms" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/performance-integration.test.js:15:12)</failure>
      <failure>TypeError: createTestUser is not a function
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/performance-integration.test.js:42:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Performance Integration Tests › API Response Time Performance" name="Portfolio endpoints respond within 500ms under load" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/performance-integration.test.js:15:12)</failure>
      <failure>TypeError: createTestUser is not a function
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/performance-integration.test.js:42:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Performance Integration Tests › API Response Time Performance" name="Market data endpoints handle concurrent requests efficiently" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/performance-integration.test.js:15:12)</failure>
      <failure>TypeError: createTestUser is not a function
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/performance-integration.test.js:42:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Performance Integration Tests › Database Performance Under Load" name="Database connections handle concurrent queries efficiently" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/performance-integration.test.js:15:12)</failure>
      <failure>TypeError: createTestUser is not a function
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/performance-integration.test.js:42:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Performance Integration Tests › Database Performance Under Load" name="Complex portfolio calculations perform within acceptable limits" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/performance-integration.test.js:15:12)</failure>
      <failure>TypeError: createTestUser is not a function
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/performance-integration.test.js:42:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Performance Integration Tests › Concurrent User Simulation" name="System handles multiple simultaneous users" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/performance-integration.test.js:15:12)</failure>
      <failure>TypeError: createTestUser is not a function
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/performance-integration.test.js:42:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Performance Integration Tests › Memory and Resource Usage" name="API endpoints do not leak memory under repeated requests" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/performance-integration.test.js:15:12)</failure>
      <failure>TypeError: createTestUser is not a function
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/performance-integration.test.js:42:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Performance Integration Tests › Memory and Resource Usage" name="Database connections are properly released after operations" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/performance-integration.test.js:15:12)</failure>
      <failure>TypeError: createTestUser is not a function
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/performance-integration.test.js:42:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Performance Integration Tests › Error Recovery Performance" name="System recovers quickly from temporary failures" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/performance-integration.test.js:15:12)</failure>
      <failure>TypeError: createTestUser is not a function
    at Object.createTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/performance-integration.test.js:42:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Real API Integration Tests - NO MOCKS" errors="0" failures="17" skipped="0" timestamp="2025-07-21T03:05:48" time="1.201" tests="17">
    <testcase classname="Real API Integration Tests - NO MOCKS › Real Health Check Endpoints" name="GET /api/health should return real service status" time="0">
      <failure>TypeError: app.use() requires a middleware function
    at Function.use (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/application.js:217:11)
    at Object.use (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-api-integration.test.js:24:9)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Real API Integration Tests - NO MOCKS › Real Health Check Endpoints" name="GET /api/health/ready should check real database readiness" time="0">
      <failure>TypeError: app.use() requires a middleware function
    at Function.use (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/application.js:217:11)
    at Object.use (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-api-integration.test.js:24:9)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Real API Integration Tests - NO MOCKS › Real Health Check Endpoints" name="GET /api/health/timeout-status should show real circuit breaker status" time="0">
      <failure>TypeError: app.use() requires a middleware function
    at Function.use (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/application.js:217:11)
    at Object.use (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-api-integration.test.js:24:9)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Real API Integration Tests - NO MOCKS › Real Authentication Endpoints" name="GET /api/auth/me should require real authentication" time="0">
      <failure>TypeError: app.use() requires a middleware function
    at Function.use (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/application.js:217:11)
    at Object.use (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-api-integration.test.js:24:9)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Real API Integration Tests - NO MOCKS › Real Authentication Endpoints" name="POST /api/auth/refresh should handle real token refresh" time="0">
      <failure>TypeError: app.use() requires a middleware function
    at Function.use (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/application.js:217:11)
    at Object.use (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-api-integration.test.js:24:9)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Real API Integration Tests - NO MOCKS › Real Market Data Endpoints" name="GET /api/market/quote/AAPL should return real market data" time="0">
      <failure>TypeError: app.use() requires a middleware function
    at Function.use (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/application.js:217:11)
    at Object.use (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-api-integration.test.js:24:9)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Real API Integration Tests - NO MOCKS › Real Market Data Endpoints" name="GET /api/market/search should search real symbols" time="0">
      <failure>TypeError: app.use() requires a middleware function
    at Function.use (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/application.js:217:11)
    at Object.use (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-api-integration.test.js:24:9)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Real API Integration Tests - NO MOCKS › Real Database Operations" name="Real database health check" time="0.001">
      <failure>TypeError: app.use() requires a middleware function
    at Function.use (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/application.js:217:11)
    at Object.use (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-api-integration.test.js:24:9)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Real API Integration Tests - NO MOCKS › Real Database Operations" name="Real database query execution" time="0">
      <failure>TypeError: app.use() requires a middleware function
    at Function.use (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/application.js:217:11)
    at Object.use (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-api-integration.test.js:24:9)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Real API Integration Tests - NO MOCKS › Real Settings &amp; API Keys" name="GET /api/settings/api-keys should require authentication" time="0">
      <failure>TypeError: app.use() requires a middleware function
    at Function.use (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/application.js:217:11)
    at Object.use (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-api-integration.test.js:24:9)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Real API Integration Tests - NO MOCKS › Real Settings &amp; API Keys" name="POST /api/settings/api-keys should validate input" time="0">
      <failure>TypeError: app.use() requires a middleware function
    at Function.use (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/application.js:217:11)
    at Object.use (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-api-integration.test.js:24:9)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Real API Integration Tests - NO MOCKS › Real Portfolio Endpoints" name="GET /api/portfolio should require authentication" time="0">
      <failure>TypeError: app.use() requires a middleware function
    at Function.use (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/application.js:217:11)
    at Object.use (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-api-integration.test.js:24:9)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Real API Integration Tests - NO MOCKS › Real Portfolio Endpoints" name="GET /api/portfolio/positions should require authentication" time="0">
      <failure>TypeError: app.use() requires a middleware function
    at Function.use (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/application.js:217:11)
    at Object.use (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-api-integration.test.js:24:9)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Real API Integration Tests - NO MOCKS › Real Error Handling" name="Invalid endpoints should return 404" time="0">
      <failure>TypeError: app.use() requires a middleware function
    at Function.use (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/application.js:217:11)
    at Object.use (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-api-integration.test.js:24:9)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Real API Integration Tests - NO MOCKS › Real Error Handling" name="Malformed JSON should be handled gracefully" time="0.001">
      <failure>TypeError: app.use() requires a middleware function
    at Function.use (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/application.js:217:11)
    at Object.use (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-api-integration.test.js:24:9)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Real API Integration Tests - NO MOCKS › Real Performance Tests" name="Health endpoint should respond within 10 seconds" time="0">
      <failure>TypeError: app.use() requires a middleware function
    at Function.use (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/application.js:217:11)
    at Object.use (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-api-integration.test.js:24:9)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Real API Integration Tests - NO MOCKS › Real Performance Tests" name="Concurrent requests should be handled" time="0">
      <failure>TypeError: app.use() requires a middleware function
    at Function.use (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/application.js:217:11)
    at Object.use (/home/runner/work/algo/algo/webapp/lambda/tests/integration/real-api-integration.test.js:24:9)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Login and Authentication Integration Tests" errors="0" failures="21" skipped="0" timestamp="2025-07-21T03:05:49" time="1.345" tests="21">
    <testcase classname="Login and Authentication Integration Tests › Authentication Middleware Tests" name="should accept valid JWT token" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-authentication-integration.test.js:27:5)</failure>
    </testcase>
    <testcase classname="Login and Authentication Integration Tests › Authentication Middleware Tests" name="should reject invalid JWT token" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-authentication-integration.test.js:27:5)</failure>
    </testcase>
    <testcase classname="Login and Authentication Integration Tests › Authentication Middleware Tests" name="should reject missing Authorization header" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-authentication-integration.test.js:27:5)</failure>
    </testcase>
    <testcase classname="Login and Authentication Integration Tests › Authentication Middleware Tests" name="should reject malformed Authorization header" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-authentication-integration.test.js:27:5)</failure>
    </testcase>
    <testcase classname="Login and Authentication Integration Tests › Authentication Middleware Tests" name="should reject expired JWT token" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-authentication-integration.test.js:27:5)</failure>
    </testcase>
    <testcase classname="Login and Authentication Integration Tests › Protected Route Access Tests" name="can access settings with valid authentication" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-authentication-integration.test.js:27:5)</failure>
    </testcase>
    <testcase classname="Login and Authentication Integration Tests › Protected Route Access Tests" name="can access portfolio with valid authentication" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-authentication-integration.test.js:27:5)</failure>
    </testcase>
    <testcase classname="Login and Authentication Integration Tests › Protected Route Access Tests" name="cannot access settings without authentication" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-authentication-integration.test.js:27:5)</failure>
    </testcase>
    <testcase classname="Login and Authentication Integration Tests › Protected Route Access Tests" name="cannot access portfolio without authentication" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-authentication-integration.test.js:27:5)</failure>
    </testcase>
    <testcase classname="Login and Authentication Integration Tests › User Session Management" name="can retrieve user profile from token" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-authentication-integration.test.js:27:5)</failure>
    </testcase>
    <testcase classname="Login and Authentication Integration Tests › User Session Management" name="can validate token expiration time" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-authentication-integration.test.js:27:5)</failure>
    </testcase>
    <testcase classname="Login and Authentication Integration Tests › User Session Management" name="handles token refresh flow" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-authentication-integration.test.js:27:5)</failure>
    </testcase>
    <testcase classname="Login and Authentication Integration Tests › Cross-Origin and Security Headers" name="includes proper CORS headers" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-authentication-integration.test.js:27:5)</failure>
    </testcase>
    <testcase classname="Login and Authentication Integration Tests › Cross-Origin and Security Headers" name="includes security headers in authenticated responses" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-authentication-integration.test.js:27:5)</failure>
    </testcase>
    <testcase classname="Login and Authentication Integration Tests › Cross-Origin and Security Headers" name="rate limits authentication attempts" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-authentication-integration.test.js:27:5)</failure>
    </testcase>
    <testcase classname="Login and Authentication Integration Tests › Error Handling and Edge Cases" name="handles JWT verification errors gracefully" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-authentication-integration.test.js:27:5)</failure>
    </testcase>
    <testcase classname="Login and Authentication Integration Tests › Error Handling and Edge Cases" name="handles database connection errors during auth" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-authentication-integration.test.js:27:5)</failure>
    </testcase>
    <testcase classname="Login and Authentication Integration Tests › Error Handling and Edge Cases" name="handles concurrent authentication requests" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-authentication-integration.test.js:27:5)</failure>
    </testcase>
    <testcase classname="Login and Authentication Integration Tests › Error Handling and Edge Cases" name="prevents JWT token replay attacks" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-authentication-integration.test.js:27:5)</failure>
    </testcase>
    <testcase classname="Login and Authentication Integration Tests › Authentication Performance Tests" name="authentication middleware performance" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-authentication-integration.test.js:27:5)</failure>
    </testcase>
    <testcase classname="Login and Authentication Integration Tests › Authentication Performance Tests" name="concurrent authentication performance" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/login-authentication-integration.test.js:27:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="💼 Portfolio Routes Integration Tests" errors="0" failures="13" skipped="0" timestamp="2025-07-21T03:05:50" time="1.458" tests="13">
    <testcase classname="💼 Portfolio Routes Integration Tests › 📊 Portfolio Data Endpoints" name="GET /api/portfolio - Get portfolio overview" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="💼 Portfolio Routes Integration Tests › 📊 Portfolio Data Endpoints" name="GET /api/portfolio/holdings - Get portfolio holdings" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="💼 Portfolio Routes Integration Tests › 📊 Portfolio Data Endpoints" name="GET /api/portfolio/holdings with query parameters" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="💼 Portfolio Routes Integration Tests › 📊 Portfolio Data Endpoints" name="GET /api/portfolio/positions - Get portfolio positions" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="💼 Portfolio Routes Integration Tests › 📊 Portfolio Data Endpoints" name="GET /api/portfolio/performance - Get portfolio performance" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="💼 Portfolio Routes Integration Tests › 📊 Portfolio Data Endpoints" name="GET /api/portfolio/analytics - Get portfolio analytics" time="0.001">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="💼 Portfolio Routes Integration Tests › 🔄 Portfolio Actions" name="POST /api/portfolio/refresh - Refresh portfolio data" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="💼 Portfolio Routes Integration Tests › 🔄 Portfolio Actions" name="POST /api/portfolio/calculate-metrics - Calculate portfolio metrics" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="💼 Portfolio Routes Integration Tests › 🔒 Authentication Requirements" name="Portfolio routes require authentication" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="💼 Portfolio Routes Integration Tests › 📈 Data Validation" name="Invalid portfolio calculation data handled" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="💼 Portfolio Routes Integration Tests › 📈 Data Validation" name="Portfolio query parameter validation" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="💼 Portfolio Routes Integration Tests › ⚡ Performance Testing" name="Portfolio endpoints respond within reasonable time" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="💼 Portfolio Routes Integration Tests › 🔄 Integration Summary" name="Portfolio integration test summary" time="0">
      <failure>Error: Real database required for integration tests
    at setupTestDatabase (/home/runner/work/algo/algo/webapp/lambda/tests/setup/test-database-setup.js:48:11)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-routes-integration.test.js:16:14)</failure>
    </testcase>
    <testcase classname="" name="Test execution failure: could be caused by test hooks like &apos;afterAll&apos;." time="0">
      <failure>{&quot;message&quot;:&quot;&quot;,&quot;stack&quot;:&quot;TypeError: Cannot read properties of undefined (reading &apos;cleanupTestUser&apos;)\n    at Object.cleanupTestUser (/home/runner/work/algo/algo/webapp/lambda/tests/integration/portfolio-routes-integration.test.js:33:18)\n    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (&lt;anonymous&gt;)\n    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:154:7)\n    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)&quot;}</failure>
    </testcase>
  </testsuite>
  <testsuite name="Authentication Flow Integration Tests" errors="0" failures="21" skipped="0" timestamp="2025-07-21T03:05:52" time="1.491" tests="21">
    <testcase classname="Authentication Flow Integration Tests › JWT Token Validation" name="Valid JWT token allows access to protected routes" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-flow-integration.test.js:19:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › JWT Token Validation" name="Expired JWT token is rejected" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-flow-integration.test.js:19:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › JWT Token Validation" name="Malformed JWT token is rejected" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-flow-integration.test.js:19:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › JWT Token Validation" name="Missing Authorization header is rejected" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-flow-integration.test.js:19:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Protected Route Access Control" name="Portfolio routes require authentication" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-flow-integration.test.js:19:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Protected Route Access Control" name="Settings routes require authentication" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-flow-integration.test.js:19:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Protected Route Access Control" name="Trading routes require authentication" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-flow-integration.test.js:19:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Public Route Access" name="Health endpoints are publicly accessible" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-flow-integration.test.js:19:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Public Route Access" name="Public market data is accessible without auth" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-flow-integration.test.js:19:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › User Session Management" name="Valid token provides user context" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-flow-integration.test.js:19:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › User Session Management" name="Token refresh endpoint validates current token" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-flow-integration.test.js:19:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › User Session Management" name="Logout endpoint invalidates token" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-flow-integration.test.js:19:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Role-Based Access Control" name="Admin routes require admin role" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-flow-integration.test.js:19:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Role-Based Access Control" name="User can access own data" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-flow-integration.test.js:19:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Role-Based Access Control" name="User cannot access other user data" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-flow-integration.test.js:19:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Authentication Error Handling" name="Authentication middleware handles database errors" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-flow-integration.test.js:19:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Authentication Error Handling" name="Authentication handles malformed Authorization header" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-flow-integration.test.js:19:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Security Headers and CORS" name="API responses include security headers" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-flow-integration.test.js:19:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Security Headers and CORS" name="CORS preflight requests are handled" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-flow-integration.test.js:19:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Rate Limiting and Security" name="API endpoints handle rapid requests without crashing" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-flow-integration.test.js:19:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication Flow Integration Tests › Rate Limiting and Security" name="Authentication endpoint handles login attempts" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;createTestUserId&apos;)
    at Object.createTestUserId (/home/runner/work/algo/algo/webapp/lambda/tests/integration/auth-flow-integration.test.js:19:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Database CRUD Integration Tests" errors="0" failures="17" skipped="0" timestamp="2025-07-21T03:05:53" time="1.177" tests="17">
    <testcase classname="Database CRUD Integration Tests › User Management CRUD" name="CREATE: Insert new user" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/database-crud-integration.test.js:15:5)</failure>
    </testcase>
    <testcase classname="Database CRUD Integration Tests › User Management CRUD" name="READ: Fetch user by ID" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/database-crud-integration.test.js:15:5)</failure>
    </testcase>
    <testcase classname="Database CRUD Integration Tests › User Management CRUD" name="UPDATE: Modify user data" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/database-crud-integration.test.js:15:5)</failure>
    </testcase>
    <testcase classname="Database CRUD Integration Tests › Portfolio Management CRUD" name="CREATE: Insert new portfolio" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/database-crud-integration.test.js:15:5)</failure>
    </testcase>
    <testcase classname="Database CRUD Integration Tests › Portfolio Management CRUD" name="READ: Fetch portfolio with holdings" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/database-crud-integration.test.js:15:5)</failure>
    </testcase>
    <testcase classname="Database CRUD Integration Tests › Portfolio Management CRUD" name="UPDATE: Modify portfolio value" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/database-crud-integration.test.js:15:5)</failure>
    </testcase>
    <testcase classname="Database CRUD Integration Tests › Portfolio Management CRUD" name="DELETE: Remove portfolio" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/database-crud-integration.test.js:15:5)</failure>
    </testcase>
    <testcase classname="Database CRUD Integration Tests › Holdings Management CRUD" name="CREATE: Add holding to portfolio" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/database-crud-integration.test.js:15:5)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;query&apos;)
    at Object.query (/home/runner/work/algo/algo/webapp/lambda/tests/integration/database-crud-integration.test.js:146:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Database CRUD Integration Tests › Holdings Management CRUD" name="READ: Fetch holdings for portfolio" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/database-crud-integration.test.js:15:5)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;query&apos;)
    at Object.query (/home/runner/work/algo/algo/webapp/lambda/tests/integration/database-crud-integration.test.js:146:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Database CRUD Integration Tests › Holdings Management CRUD" name="UPDATE: Modify holding price" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/database-crud-integration.test.js:15:5)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;query&apos;)
    at Object.query (/home/runner/work/algo/algo/webapp/lambda/tests/integration/database-crud-integration.test.js:146:22)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:95:7)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Database CRUD Integration Tests › Transaction Management CRUD" name="CREATE: Record transaction" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/database-crud-integration.test.js:15:5)</failure>
    </testcase>
    <testcase classname="Database CRUD Integration Tests › Transaction Management CRUD" name="READ: Fetch transaction history" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/database-crud-integration.test.js:15:5)</failure>
    </testcase>
    <testcase classname="Database CRUD Integration Tests › Database Connection Management" name="Connection pool handles multiple concurrent queries" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/database-crud-integration.test.js:15:5)</failure>
    </testcase>
    <testcase classname="Database CRUD Integration Tests › Database Connection Management" name="Database handles transaction rollback" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/database-crud-integration.test.js:15:5)</failure>
    </testcase>
    <testcase classname="Database CRUD Integration Tests › Database Connection Management" name="Database handles connection errors gracefully" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/database-crud-integration.test.js:15:5)</failure>
    </testcase>
    <testcase classname="Database CRUD Integration Tests › Data Integrity and Constraints" name="Enforces foreign key constraints" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/database-crud-integration.test.js:15:5)</failure>
    </testcase>
    <testcase classname="Database CRUD Integration Tests › Data Integrity and Constraints" name="Validates data types and constraints" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/database-crud-integration.test.js:15:5)</failure>
    </testcase>
    <testcase classname="" name="Test execution failure: could be caused by test hooks like &apos;afterAll&apos;." time="0">
      <failure>{&quot;message&quot;:&quot;&quot;,&quot;stack&quot;:&quot;TypeError: Cannot read properties of undefined (reading &apos;query&apos;)\n    at Object.query (/home/runner/work/algo/algo/webapp/lambda/tests/integration/database-crud-integration.test.js:153:22)\n    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (&lt;anonymous&gt;)\n    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:281:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:154:7)\n    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)&quot;}</failure>
    </testcase>
  </testsuite>
  <testsuite name="Backend API Integration Tests" errors="0" failures="18" skipped="0" timestamp="2025-07-21T03:05:54" time="1.73" tests="19">
    <testcase classname="Backend API Integration Tests › Health Check Endpoints" name="GET /health should return system status" time="0.026">
      <failure>Error: expected 200 &quot;OK&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-integration.test.js:86:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Backend API Integration Tests › Health Check Endpoints" name="GET /health/database should check database connectivity" time="0.012">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 500
Received array: [200, 503]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-integration.test.js:98:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Backend API Integration Tests › Authentication Endpoints" name="POST /auth/validate should validate JWT tokens" time="0.018">
      <failure>Error: expected 401 &quot;Unauthorized&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-integration.test.js:109:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Backend API Integration Tests › Authentication Endpoints" name="GET /auth/user should return user information for valid session" time="0.011">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 500
Received array: [200, 401]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-integration.test.js:121:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Backend API Integration Tests › Portfolio Endpoints" name="GET /portfolio should require authentication" time="0.014">
      <failure>Error: expected 401 &quot;Unauthorized&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-integration.test.js:129:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Backend API Integration Tests › Portfolio Endpoints" name="GET /portfolio/:id should validate portfolio ID format" time="0.011">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 500
Received array: [400, 401]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-integration.test.js:139:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Backend API Integration Tests › Market Data Endpoints" name="GET /market/stocks should return stock data" time="0.017">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 500
Received array: [200, 401]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-integration.test.js:150:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Backend API Integration Tests › Market Data Endpoints" name="GET /market/quotes should handle symbol validation" time="0.01">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 500
Received array: [200, 400, 401]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-integration.test.js:164:31)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Backend API Integration Tests › Settings Endpoints" name="GET /settings/api-keys should require authentication" time="0.014">
      <failure>Error: expected 401 &quot;Unauthorized&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-integration.test.js:172:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Backend API Integration Tests › Settings Endpoints" name="POST /settings/api-keys should validate input format" time="0.012">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 500
Received array: [400, 401]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-integration.test.js:183:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Backend API Integration Tests › Live Data Endpoints" name="GET /live-data/status should return service status" time="0.015">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 500
Received array: [200, 503]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-integration.test.js:193:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Backend API Integration Tests › Live Data Endpoints" name="POST /live-data/subscribe should validate subscription data" time="0.01">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 500
Received array: [200, 400, 401]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-integration.test.js:206:31)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Backend API Integration Tests › Trading Endpoints" name="GET /trading/signals should return trading signals" time="0.013">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 500
Received array: [200, 401]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-integration.test.js:216:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Backend API Integration Tests › Trading Endpoints" name="GET /trading/buy-signals should validate query parameters" time="0.011">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value: 500
Received array: [200, 400, 401]
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-integration.test.js:229:31)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Backend API Integration Tests › Database Integration" name="Endpoints should handle database connection failures gracefully" time="0.014">
      <failure>Error: expect(received).not.toBe(expected) // Object.is equality

Expected: not 500
    at Object.toBe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-integration.test.js:250:37)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Backend API Integration Tests › Error Handling" name="Invalid routes should return 404" time="0.011">
      <failure>Error: expected 404 &quot;Not Found&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-integration.test.js:259:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Backend API Integration Tests › Error Handling" name="Malformed JSON should return 400" time="0.012">
      <failure>Error: expect(received).toHaveProperty(path)

Expected path: &quot;error&quot;
Received path: []

Received value: {}
    at Object.toHaveProperty (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-integration.test.js:271:29)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Backend API Integration Tests › Performance" name="Health endpoint should respond within 1 second" time="0.011">
      <failure>Error: expected 200 &quot;OK&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.expect (/home/runner/work/algo/algo/webapp/lambda/tests/integration/api-endpoints-integration.test.js:280:10)
    at Promise.then.completed (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)
----
    at Test._assertStatus (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:252:14)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:308:13
    at Test._assertFunction (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:285:13)
    at Test.assert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:164:23)
    at Server.localAssert (/home/runner/work/algo/algo/webapp/lambda/node_modules/supertest/lib/test.js:120:14)
    at Object.onceWrapper (node:events:631:28)
    at Server.emit (node:events:517:28)
    at emitCloseNT (node:net:2221:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Backend API Integration Tests › Performance" name="Market data endpoints should respond within 2 seconds" time="0.013">
    </testcase>
  </testsuite>
  <testsuite name="Table Structure Integration Tests" errors="0" failures="12" skipped="0" timestamp="2025-07-21T03:05:56" time="1.123" tests="12">
    <testcase classname="Table Structure Integration Tests › Critical Table Verification" name="users table has correct structure" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/table-structure-integration.test.js:10:5)</failure>
    </testcase>
    <testcase classname="Table Structure Integration Tests › Critical Table Verification" name="portfolio table has correct structure" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/table-structure-integration.test.js:10:5)</failure>
    </testcase>
    <testcase classname="Table Structure Integration Tests › Critical Table Verification" name="api_keys table has correct structure" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/table-structure-integration.test.js:10:5)</failure>
    </testcase>
    <testcase classname="Table Structure Integration Tests › Critical Table Verification" name="price_daily table has correct structure" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/table-structure-integration.test.js:10:5)</failure>
    </testcase>
    <testcase classname="Table Structure Integration Tests › Critical Table Verification" name="stock_symbols table has correct structure" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/table-structure-integration.test.js:10:5)</failure>
    </testcase>
    <testcase classname="Table Structure Integration Tests › Critical Table Verification" name="news table has correct structure" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/table-structure-integration.test.js:10:5)</failure>
    </testcase>
    <testcase classname="Table Structure Integration Tests › Data Integrity Tests" name="can create portfolio with test user relationship" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/table-structure-integration.test.js:10:5)</failure>
    </testcase>
    <testcase classname="Table Structure Integration Tests › Data Integrity Tests" name="can create API keys linked to test user" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/table-structure-integration.test.js:10:5)</failure>
    </testcase>
    <testcase classname="Table Structure Integration Tests › Data Integrity Tests" name="can create price data for symbol" time="0.001">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/table-structure-integration.test.js:10:5)</failure>
    </testcase>
    <testcase classname="Table Structure Integration Tests › Data Integrity Tests" name="database operations are properly isolated between tests" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/table-structure-integration.test.js:10:5)</failure>
    </testcase>
    <testcase classname="Table Structure Integration Tests › Performance Tests" name="bulk insert performance test" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/table-structure-integration.test.js:10:5)</failure>
    </testcase>
    <testcase classname="Table Structure Integration Tests › Performance Tests" name="concurrent user creation test" time="0">
      <failure>Error: connect ECONNREFUSED ::1:5432
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at DatabaseTestUtils.initialize (/home/runner/work/algo/algo/webapp/lambda/tests/utils/database-test-utils.js:45:22)
    at Object.&lt;anonymous&gt; (/home/runner/work/algo/algo/webapp/lambda/tests/integration/table-structure-integration.test.js:10:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Performance Analytics API Routes" errors="0" failures="12" skipped="0" timestamp="2025-07-21T03:05:57" time="331.562" tests="12">
    <testcase classname="Performance Analytics API Routes › GET /api/performance-analytics/health" name="returns health status" time="30.001">
      <failure>TypeError: formatResponse is not a function
    at formatResponse (/home/runner/work/algo/algo/webapp/lambda/routes/performance-analytics.js:434:26)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:280:10)
    at Function.handle (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:175:3)
    at router (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:280:10)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/compliance.js:289:7)
    at /home/runner/work/algo/algo/webapp/lambda/index.js:386:50
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/compliance.js:254:7)
    at /home/runner/work/algo/algo/webapp/lambda/index.js:384:49
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/compliance.js:131:7)
    at /home/runner/work/algo/algo/webapp/lambda/index.js:381:42
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/compliance.js:33:7)
    at /home/runner/work/algo/algo/webapp/lambda/index.js:379:31
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:280:10)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/performanceMonitoring.js:123:7)
    at /home/runner/work/algo/algo/webapp/lambda/index.js:370:41
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/performanceMonitoring.js:46:7)
    at /home/runner/work/algo/algo/webapp/lambda/index.js:368:42
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:280:10)
    at next (/home/runner/work/algo/algo/webapp/lambda/index.js:360:3)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:280:10)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/rateLimiting.js:216:13)
    at /home/runner/work/algo/algo/webapp/lambda/middleware/rateLimiting.js:238:37
    at /home/runner/work/algo/algo/webapp/lambda/index.js:343:37
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/rateLimiting.js:324:13)
    at /home/runner/work/algo/algo/webapp/lambda/index.js:341:32
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:280:10)
    at next (/home/runner/work/algo/algo/webapp/lambda/index.js:329:7)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/inputValidation.js:358:13)
    at middleware (/home/runner/work/algo/algo/webapp/lambda/index.js:327:7)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/inputValidation.js:283:13)
    at middleware (/home/runner/work/algo/algo/webapp/lambda/index.js:327:7)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/inputValidation.js:248:13)
    at middleware (/home/runner/work/algo/algo/webapp/lambda/index.js:327:7)
    at runNextMiddleware (/home/runner/work/algo/algo/webapp/lambda/index.js:333:3)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:280:10)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/sqlInjectionProtection.js:220:7)
    at /home/runner/work/algo/algo/webapp/lambda/index.js:308:31
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:280:10)
    at next (/home/runner/work/algo/algo/webapp/lambda/index.js:298:3)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:280:10)
    at next (/home/runner/work/algo/algo/webapp/lambda/index.js:288:3)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:280:10)
    at next (/home/runner/work/algo/algo/webapp/lambda/utils/responseFormatter.js:271:3)
    at formatter (/home/runner/work/algo/algo/webapp/lambda/index.js:280:3)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:280:10)
    at urlencodedParser (/home/runner/work/algo/algo/webapp/lambda/node_modules/body-parser/lib/types/urlencoded.js:94:7)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:280:10)
    at jsonParser (/home/runner/work/algo/algo/webapp/lambda/node_modules/body-parser/lib/types/json.js:113:7)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:18:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:17:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:9:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Performance Analytics API Routes › GET /api/performance-analytics/portfolio" name="requires authentication" time="30.003">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;substring&apos;)
    at substring (/home/runner/work/algo/algo/webapp/lambda/routes/performance-analytics.js:99:25)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:149:13)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/validation.js:298:9)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:149:13)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/auth.js:206:16)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:280:10)
    at Function.handle (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:175:3)
    at router (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:280:10)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/compliance.js:289:7)
    at /home/runner/work/algo/algo/webapp/lambda/index.js:386:50
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/compliance.js:254:7)
    at /home/runner/work/algo/algo/webapp/lambda/index.js:384:49
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/compliance.js:131:7)
    at /home/runner/work/algo/algo/webapp/lambda/index.js:381:42
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/compliance.js:33:7)
    at /home/runner/work/algo/algo/webapp/lambda/index.js:379:31
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:280:10)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/performanceMonitoring.js:123:7)
    at /home/runner/work/algo/algo/webapp/lambda/index.js:370:41
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/performanceMonitoring.js:46:7)
    at /home/runner/work/algo/algo/webapp/lambda/index.js:368:42
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:280:10)
    at next (/home/runner/work/algo/algo/webapp/lambda/index.js:360:3)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:280:10)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/rateLimiting.js:216:13)
    at /home/runner/work/algo/algo/webapp/lambda/middleware/rateLimiting.js:238:37
    at /home/runner/work/algo/algo/webapp/lambda/index.js:343:37
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/rateLimiting.js:324:13)
    at /home/runner/work/algo/algo/webapp/lambda/index.js:341:32
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:280:10)
    at next (/home/runner/work/algo/algo/webapp/lambda/index.js:329:7)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/inputValidation.js:358:13)
    at middleware (/home/runner/work/algo/algo/webapp/lambda/index.js:327:7)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/inputValidation.js:283:13)
    at middleware (/home/runner/work/algo/algo/webapp/lambda/index.js:327:7)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/inputValidation.js:248:13)
    at middleware (/home/runner/work/algo/algo/webapp/lambda/index.js:327:7)
    at runNextMiddleware (/home/runner/work/algo/algo/webapp/lambda/index.js:333:3)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:280:10)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/sqlInjectionProtection.js:220:7)
    at /home/runner/work/algo/algo/webapp/lambda/index.js:308:31
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:280:10)
    at next (/home/runner/work/algo/algo/webapp/lambda/index.js:298:3)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:280:10)
    at next (/home/runner/work/algo/algo/webapp/lambda/index.js:288:3)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:280:10)
    at next (/home/runner/work/algo/algo/webapp/lambda/utils/responseFormatter.js:271:3)
    at formatter (/home/runner/work/algo/algo/webapp/lambda/index.js:280:3)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/index.js:280:10)
    at urlencodedParser (/home/runner/work/algo/algo/webapp/lambda/node_modules/body-parser/lib/types/urlencoded.js:94:7)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:31:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:30:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:9:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Performance Analytics API Routes › GET /api/performance-analytics/portfolio" name="validates date parameters" time="30.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;substring&apos;)
    at substring (/home/runner/work/algo/algo/webapp/lambda/routes/performance-analytics.js:99:25)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:149:13)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/validation.js:298:9)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:149:13)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/auth.js:277:16)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:43:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:30:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:9:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Performance Analytics API Routes › GET /api/performance-analytics/portfolio" name="returns portfolio performance metrics" time="30.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;substring&apos;)
    at substring (/home/runner/work/algo/algo/webapp/lambda/routes/performance-analytics.js:99:25)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:149:13)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/validation.js:298:9)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:149:13)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/auth.js:277:16)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:56:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:30:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:9:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Performance Analytics API Routes › GET /api/performance-analytics/portfolio" name="returns basic format when requested" time="30">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;substring&apos;)
    at substring (/home/runner/work/algo/algo/webapp/lambda/routes/performance-analytics.js:99:25)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:149:13)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/validation.js:298:9)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:149:13)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/auth.js:277:16)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:73:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:30:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:9:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Performance Analytics API Routes › GET /api/performance-analytics/report" name="generates performance report" time="30.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;substring&apos;)
    at substring (/home/runner/work/algo/algo/webapp/lambda/routes/performance-analytics.js:148:25)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:149:13)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/validation.js:298:9)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:149:13)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/auth.js:277:16)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:92:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:91:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:9:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Performance Analytics API Routes › GET /api/performance-analytics/attribution" name="returns attribution analysis" time="30">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;substring&apos;)
    at substring (/home/runner/work/algo/algo/webapp/lambda/routes/performance-analytics.js:195:25)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:149:13)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/validation.js:298:9)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:149:13)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/auth.js:277:16)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:112:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:111:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:9:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Performance Analytics API Routes › GET /api/performance-analytics/risk-metrics" name="returns comprehensive risk metrics" time="30.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;substring&apos;)
    at substring (/home/runner/work/algo/algo/webapp/lambda/routes/performance-analytics.js:257:25)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:149:13)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/validation.js:298:9)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:149:13)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/auth.js:277:16)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:130:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:129:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:9:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Performance Analytics API Routes › GET /api/performance-analytics/sector-analysis" name="returns sector analysis" time="30.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;substring&apos;)
    at substring (/home/runner/work/algo/algo/webapp/lambda/routes/performance-analytics.js:300:25)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:149:13)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/validation.js:298:9)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:149:13)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/auth.js:277:16)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:151:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:150:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:9:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Performance Analytics API Routes › GET /api/performance-analytics/factor-exposure" name="returns factor exposure analysis" time="30.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;substring&apos;)
    at substring (/home/runner/work/algo/algo/webapp/lambda/routes/performance-analytics.js:343:25)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:149:13)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/validation.js:298:9)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:149:13)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/auth.js:277:16)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:169:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:168:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:9:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Performance Analytics API Routes › Error Handling" name="handles invalid date ranges" time="30">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;substring&apos;)
    at substring (/home/runner/work/algo/algo/webapp/lambda/routes/performance-analytics.js:99:25)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:149:13)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/validation.js:298:9)
    at Layer.handle [as handle_request] (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/work/algo/algo/webapp/lambda/node_modules/express/lib/router/route.js:149:13)
    at next (/home/runner/work/algo/algo/webapp/lambda/middleware/auth.js:277:16)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at test (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:187:5)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:186:3)
    at _dispatchDescribe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:91:26)
    at describe (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/index.js:55:5)
    at Object.describe (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:9:1)
    at Runtime._execModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at runTestInternal (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/runner/work/algo/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Performance Analytics API Routes › Error Handling" name="handles missing required parameters" time="0.026">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected substring: &quot;required&quot;
Received string:    &quot;Validation failed&quot;
    at Object.toContain (/home/runner/work/algo/algo/webapp/lambda/tests/integration/routes/performance-analytics.test.js:206:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
  </testsuite>
</testsuites>