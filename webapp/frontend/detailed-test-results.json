{"numFailedTestSuites":2,"numFailedTests":27,"numPassedTestSuites":6,"numPassedTests":205,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":8,"numTotalTests":232,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1753066184949,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["AdvancedPerformanceAnalytics","calculateBaseMetrics"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedPerformanceAnalytics calculateBaseMetrics calculates basic performance metrics correctly","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"calculates basic performance metrics correctly"},{"ancestorTitles":["AdvancedPerformanceAnalytics","calculateBaseMetrics"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedPerformanceAnalytics calculateBaseMetrics handles empty portfolio history","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"handles empty portfolio history"},{"ancestorTitles":["AdvancedPerformanceAnalytics","calculateRiskMetrics"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedPerformanceAnalytics calculateRiskMetrics calculates risk metrics correctly","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"calculates risk metrics correctly"},{"ancestorTitles":["AdvancedPerformanceAnalytics","calculateMaxDrawdown"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedPerformanceAnalytics calculateMaxDrawdown calculates maximum drawdown correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"calculates maximum drawdown correctly"},{"ancestorTitles":["AdvancedPerformanceAnalytics","calculateAttributionAnalysis"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedPerformanceAnalytics calculateAttributionAnalysis calculates attribution analysis correctly","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"calculates attribution analysis correctly"},{"ancestorTitles":["AdvancedPerformanceAnalytics","calculateSectorAnalysis"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedPerformanceAnalytics calculateSectorAnalysis calculates sector analysis correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"calculates sector analysis correctly"},{"ancestorTitles":["AdvancedPerformanceAnalytics","calculateDiversificationScore"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedPerformanceAnalytics calculateDiversificationScore calculates diversification score correctly","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"calculates diversification score correctly"},{"ancestorTitles":["AdvancedPerformanceAnalytics","generatePerformanceReport"],"duration":31,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedPerformanceAnalytics generatePerformanceReport generates comprehensive performance report","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"generates comprehensive performance report"},{"ancestorTitles":["AdvancedPerformanceAnalytics","getPerformanceGrade"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedPerformanceAnalytics getPerformanceGrade assigns correct performance grades","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"assigns correct performance grades"},{"ancestorTitles":["AdvancedPerformanceAnalytics","assessRiskProfile"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedPerformanceAnalytics assessRiskProfile assesses risk profile correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"assesses risk profile correctly"},{"ancestorTitles":["AdvancedPerformanceAnalytics","calculateDaysInPeriod"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedPerformanceAnalytics calculateDaysInPeriod calculates days in period correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"calculates days in period correctly"}],"endTime":1753066186815,"message":"","name":"/home/stocks/algo/webapp/lambda/tests/unit/utils/advancedPerformanceAnalytics.test.js","startTime":1753066185337,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Database Circuit Breaker Unit Tests","Circuit Breaker Initialization"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Circuit Breaker Initialization initializes with correct default state","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"initializes with correct default state"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Circuit Breaker Initialization"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Circuit Breaker Initialization sets production-ready configuration values","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"sets production-ready configuration values"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Closed State Operations"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Closed State Operations executes operations successfully when circuit is closed","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"executes operations successfully when circuit is closed"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Closed State Operations"],"duration":15,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Closed State Operations records failure but stays closed below threshold","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"records failure but stays closed below threshold"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Closed State Operations"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Closed State Operations decrements failure count on successful operations","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"decrements failure count on successful operations"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Closed State Operations"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Closed State Operations opens circuit when failure threshold is reached","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"opens circuit when failure threshold is reached"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Open State Operations"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Open State Operations rejects operations immediately when circuit is open","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"rejects operations immediately when circuit is open"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Open State Operations"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Open State Operations includes remaining time in error message","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"includes remaining time in error message"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Open State Operations"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Open State Operations transitions to half-open after recovery timeout","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"transitions to half-open after recovery timeout"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Half-Open State Operations"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Half-Open State Operations allows limited operations in half-open state","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"allows limited operations in half-open state"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Half-Open State Operations"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Half-Open State Operations closes circuit after sufficient successes","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"closes circuit after sufficient successes"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Half-Open State Operations"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Half-Open State Operations reopens circuit on failure in half-open state","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"reopens circuit on failure in half-open state"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Half-Open State Operations"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Half-Open State Operations tracks success count correctly in half-open state","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"tracks success count correctly in half-open state"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Metrics and History Tracking"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Metrics and History Tracking tracks comprehensive metrics","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"tracks comprehensive metrics"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Metrics and History Tracking"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Metrics and History Tracking maintains request history with limited size","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"maintains request history with limited size"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Metrics and History Tracking"],"duration":52,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Metrics and History Tracking records operation duration in history","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"records operation duration in history"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Metrics and History Tracking"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Metrics and History Tracking records error details in failure history","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"records error details in failure history"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Health Assessment"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Health Assessment reports healthy when failures are below 50% of threshold","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"reports healthy when failures are below 50% of threshold"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Health Assessment"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Health Assessment reports unhealthy when failures are above 50% of threshold","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"reports unhealthy when failures are above 50% of threshold"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Health Assessment"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Health Assessment reports unhealthy when circuit is not closed","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"reports unhealthy when circuit is not closed"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Health Assessment"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Health Assessment calculates time to recovery correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"calculates time to recovery correctly"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Force Reset Functionality"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Force Reset Functionality resets circuit breaker to clean state","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"resets circuit breaker to clean state"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Force Reset Functionality"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Force Reset Functionality allows operations after force reset","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"allows operations after force reset"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Concurrent Operations"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Concurrent Operations handles concurrent operations safely","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"handles concurrent operations safely"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Concurrent Operations"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Concurrent Operations handles mixed concurrent success and failure operations","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"handles mixed concurrent success and failure operations"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Edge Cases and Error Scenarios"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Edge Cases and Error Scenarios handles operations that throw non-Error objects","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"handles operations that throw non-Error objects"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Edge Cases and Error Scenarios"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Edge Cases and Error Scenarios handles operations that return undefined","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"handles operations that return undefined"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Edge Cases and Error Scenarios"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Edge Cases and Error Scenarios maintains state consistency during rapid state transitions","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"maintains state consistency during rapid state transitions"},{"ancestorTitles":["Database Circuit Breaker Unit Tests","Edge Cases and Error Scenarios"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Circuit Breaker Unit Tests Edge Cases and Error Scenarios handles timestamp edge cases","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"handles timestamp edge cases"}],"endTime":1753066186925,"message":"","name":"/home/stocks/algo/webapp/lambda/tests/unit/real-database-circuit-breaker.test.js","startTime":1753066185336,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Authentication Middleware Unit Tests","Development Mode Authentication"],"duration":27,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Development Mode Authentication allows access without token in development mode","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"allows access without token in development mode"},{"ancestorTitles":["Authentication Middleware Unit Tests","Development Mode Authentication"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Development Mode Authentication validates development JWT tokens correctly","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"validates development JWT tokens correctly"},{"ancestorTitles":["Authentication Middleware Unit Tests","Development Mode Authentication"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Development Mode Authentication generates valid development tokens","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"generates valid development tokens"},{"ancestorTitles":["Authentication Middleware Unit Tests","Development Mode Authentication"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Development Mode Authentication falls back to development mode when Cognito is unavailable","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"falls back to development mode when Cognito is unavailable"},{"ancestorTitles":["Authentication Middleware Unit Tests","Production Mode Authentication"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Production Mode Authentication requires authentication token in production mode","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"requires authentication token in production mode"},{"ancestorTitles":["Authentication Middleware Unit Tests","Production Mode Authentication"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Production Mode Authentication rejects invalid tokens in production mode","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"rejects invalid tokens in production mode"},{"ancestorTitles":["Authentication Middleware Unit Tests","Production Mode Authentication"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Production Mode Authentication handles malformed authorization headers","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"handles malformed authorization headers"},{"ancestorTitles":["Authentication Middleware Unit Tests","JWT Token Validation"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests JWT Token Validation handles expired JWT tokens","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"handles expired JWT tokens"},{"ancestorTitles":["Authentication Middleware Unit Tests","JWT Token Validation"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests JWT Token Validation validates JWT token structure and claims","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"validates JWT token structure and claims"},{"ancestorTitles":["Authentication Middleware Unit Tests","JWT Token Validation"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests JWT Token Validation handles malformed JWT tokens gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles malformed JWT tokens gracefully"},{"ancestorTitles":["Authentication Middleware Unit Tests","Role-Based Authorization"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Role-Based Authorization allows access when user has required role","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"allows access when user has required role"},{"ancestorTitles":["Authentication Middleware Unit Tests","Role-Based Authorization"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Role-Based Authorization allows access when user is in required group","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"allows access when user is in required group"},{"ancestorTitles":["Authentication Middleware Unit Tests","Role-Based Authorization"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Role-Based Authorization denies access when user lacks required role","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"denies access when user lacks required role"},{"ancestorTitles":["Authentication Middleware Unit Tests","Role-Based Authorization"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Role-Based Authorization denies access when user is not authenticated","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"denies access when user is not authenticated"},{"ancestorTitles":["Authentication Middleware Unit Tests","Role-Based Authorization"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Role-Based Authorization handles multiple role requirements","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles multiple role requirements"},{"ancestorTitles":["Authentication Middleware Unit Tests","Optional Authentication"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Optional Authentication continues without authentication when no token provided","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"continues without authentication when no token provided"},{"ancestorTitles":["Authentication Middleware Unit Tests","Optional Authentication"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Optional Authentication authenticates when valid token is provided","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"authenticates when valid token is provided"},{"ancestorTitles":["Authentication Middleware Unit Tests","Optional Authentication"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Optional Authentication continues silently when authentication fails","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"continues silently when authentication fails"},{"ancestorTitles":["Authentication Middleware Unit Tests","Request Context Enhancement"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Request Context Enhancement enriches user object with request context","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"enriches user object with request context"},{"ancestorTitles":["Authentication Middleware Unit Tests","Request Context Enhancement"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Request Context Enhancement generates request ID when not provided","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"generates request ID when not provided"},{"ancestorTitles":["Authentication Middleware Unit Tests","Request Context Enhancement"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Request Context Enhancement handles missing client IP gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles missing client IP gracefully"},{"ancestorTitles":["Authentication Middleware Unit Tests","Cognito Configuration Management"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Cognito Configuration Management loads configuration from environment variables","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"loads configuration from environment variables"},{"ancestorTitles":["Authentication Middleware Unit Tests","Cognito Configuration Management"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Cognito Configuration Management handles missing Cognito configuration gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles missing Cognito configuration gracefully"},{"ancestorTitles":["Authentication Middleware Unit Tests","Cognito Configuration Management"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Cognito Configuration Management uses default region when not specified","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"uses default region when not specified"},{"ancestorTitles":["Authentication Middleware Unit Tests","Authentication Status Endpoint"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Authentication Status Endpoint returns comprehensive authentication status","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns comprehensive authentication status"},{"ancestorTitles":["Authentication Middleware Unit Tests","Authentication Status Endpoint"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Authentication Status Endpoint handles status check errors gracefully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"handles status check errors gracefully"},{"ancestorTitles":["Authentication Middleware Unit Tests","Error Handling and Edge Cases"],"duration":48,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Error Handling and Edge Cases handles network errors during token verification","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"handles network errors during token verification"},{"ancestorTitles":["Authentication Middleware Unit Tests","Error Handling and Edge Cases"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Error Handling and Edge Cases handles concurrent authentication requests safely","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"status":"passed","title":"handles concurrent authentication requests safely"},{"ancestorTitles":["Authentication Middleware Unit Tests","Error Handling and Edge Cases"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Error Handling and Edge Cases preserves original user data when authentication fails in development","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"preserves original user data when authentication fails in development"},{"ancestorTitles":["Authentication Middleware Unit Tests","Error Handling and Edge Cases"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Error Handling and Edge Cases handles missing authorization header gracefully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"handles missing authorization header gracefully"},{"ancestorTitles":["Authentication Middleware Unit Tests","Token Generation and Validation"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Token Generation and Validation generates tokens with correct expiration","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"generates tokens with correct expiration"},{"ancestorTitles":["Authentication Middleware Unit Tests","Token Generation and Validation"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Token Generation and Validation generates unique tokens for different users","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"generates unique tokens for different users"},{"ancestorTitles":["Authentication Middleware Unit Tests","Token Generation and Validation"],"duration":23,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Unit Tests Token Generation and Validation uses custom JWT secret when provided","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"uses custom JWT secret when provided"}],"endTime":1753066186972,"message":"","name":"/home/stocks/algo/webapp/lambda/tests/unit/auth-middleware.test.js","startTime":1753066185340,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Circuit Breaker Utilities Unit Tests","TimeoutHelper Circuit Breaker"],"duration":27,"failureDetails":[],"failureMessages":[],"fullName":"Circuit Breaker Utilities Unit Tests TimeoutHelper Circuit Breaker should initialize with production-ready thresholds","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should initialize with production-ready thresholds"},{"ancestorTitles":["Circuit Breaker Utilities Unit Tests","TimeoutHelper Circuit Breaker"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Circuit Breaker Utilities Unit Tests TimeoutHelper Circuit Breaker should track failure counts correctly","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"should track failure counts correctly"},{"ancestorTitles":["Circuit Breaker Utilities Unit Tests","TimeoutHelper Circuit Breaker"],"duration":16,"failureDetails":[],"failureMessages":[],"fullName":"Circuit Breaker Utilities Unit Tests TimeoutHelper Circuit Breaker should transition states correctly (closed -> open -> half-open -> closed)","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should transition states correctly (closed -> open -> half-open -> closed)"},{"ancestorTitles":["Circuit Breaker Utilities Unit Tests","TimeoutHelper Circuit Breaker"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Circuit Breaker Utilities Unit Tests TimeoutHelper Circuit Breaker should record event history correctly","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should record event history correctly"},{"ancestorTitles":["Circuit Breaker Utilities Unit Tests","TimeoutHelper Circuit Breaker"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Circuit Breaker Utilities Unit Tests TimeoutHelper Circuit Breaker should calculate metrics correctly","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should calculate metrics correctly"},{"ancestorTitles":["Circuit Breaker Utilities Unit Tests","TimeoutHelper Circuit Breaker"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"Circuit Breaker Utilities Unit Tests TimeoutHelper Circuit Breaker should handle recent activity tracking","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should handle recent activity tracking"},{"ancestorTitles":["Circuit Breaker Utilities Unit Tests","TimeoutHelper Circuit Breaker"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Circuit Breaker Utilities Unit Tests TimeoutHelper Circuit Breaker should calculate risk levels accurately","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should calculate risk levels accurately"},{"ancestorTitles":["Circuit Breaker Utilities Unit Tests","DatabaseCircuitBreaker Class"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Circuit Breaker Utilities Unit Tests DatabaseCircuitBreaker Class should initialize with correct production configuration","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should initialize with correct production configuration"},{"ancestorTitles":["Circuit Breaker Utilities Unit Tests","DatabaseCircuitBreaker Class"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Circuit Breaker Utilities Unit Tests DatabaseCircuitBreaker Class should execute operations and track results","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should execute operations and track results"},{"ancestorTitles":["Circuit Breaker Utilities Unit Tests","DatabaseCircuitBreaker Class"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Circuit Breaker Utilities Unit Tests DatabaseCircuitBreaker Class should handle operation failures correctly","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should handle operation failures correctly"},{"ancestorTitles":["Circuit Breaker Utilities Unit Tests","DatabaseCircuitBreaker Class"],"duration":20,"failureDetails":[],"failureMessages":[],"fullName":"Circuit Breaker Utilities Unit Tests DatabaseCircuitBreaker Class should open circuit after threshold failures","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should open circuit after threshold failures"},{"ancestorTitles":["Circuit Breaker Utilities Unit Tests","DatabaseCircuitBreaker Class"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Circuit Breaker Utilities Unit Tests DatabaseCircuitBreaker Class should provide detailed status information","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"should provide detailed status information"},{"ancestorTitles":["Circuit Breaker Utilities Unit Tests","DatabaseCircuitBreaker Class"],"duration":39,"failureDetails":[],"failureMessages":[],"fullName":"Circuit Breaker Utilities Unit Tests DatabaseCircuitBreaker Class should force reset correctly","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should force reset correctly"},{"ancestorTitles":["Circuit Breaker Utilities Unit Tests","Circuit Breaker Reset Utilities"],"duration":20,"failureDetails":[],"failureMessages":[],"fullName":"Circuit Breaker Utilities Unit Tests Circuit Breaker Reset Utilities should reset all circuit breakers","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"should reset all circuit breakers"},{"ancestorTitles":["Circuit Breaker Utilities Unit Tests","Circuit Breaker Reset Utilities"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Circuit Breaker Utilities Unit Tests Circuit Breaker Reset Utilities should reset specific circuit breaker","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should reset specific circuit breaker"},{"ancestorTitles":["Circuit Breaker Utilities Unit Tests","Circuit Breaker Reset Utilities"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Circuit Breaker Utilities Unit Tests Circuit Breaker Reset Utilities should get comprehensive circuit breaker status","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"should get comprehensive circuit breaker status"},{"ancestorTitles":["Circuit Breaker Utilities Unit Tests","Circuit Breaker Reset Utilities"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Circuit Breaker Utilities Unit Tests Circuit Breaker Reset Utilities should handle non-existent circuit breaker reset gracefully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle non-existent circuit breaker reset gracefully"},{"ancestorTitles":["Circuit Breaker Utilities Unit Tests","Performance and Memory Management"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Circuit Breaker Utilities Unit Tests Performance and Memory Management should limit history size to prevent memory leaks","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should limit history size to prevent memory leaks"},{"ancestorTitles":["Circuit Breaker Utilities Unit Tests","Performance and Memory Management"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Circuit Breaker Utilities Unit Tests Performance and Memory Management should handle rapid state changes efficiently","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle rapid state changes efficiently"}],"endTime":1753066186992,"message":"","name":"/home/stocks/algo/webapp/lambda/tests/unit/circuit-breaker-utils.test.js","startTime":1753066185353,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Database Utilities Unit Tests (Industry Standard)","Table Name Extraction"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests (Industry Standard) Table Name Extraction extracts table names from simple SELECT queries","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"extracts table names from simple SELECT queries"},{"ancestorTitles":["Database Utilities Unit Tests (Industry Standard)","Table Name Extraction"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests (Industry Standard) Table Name Extraction extracts table names from INSERT queries","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"extracts table names from INSERT queries"},{"ancestorTitles":["Database Utilities Unit Tests (Industry Standard)","Table Name Extraction"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests (Industry Standard) Table Name Extraction extracts table names from CTE queries","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"extracts table names from CTE queries"},{"ancestorTitles":["Database Utilities Unit Tests (Industry Standard)","Table Name Extraction"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests (Industry Standard) Table Name Extraction returns \"unknown\" for malformed queries","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"returns \"unknown\" for malformed queries"},{"ancestorTitles":["Database Utilities Unit Tests (Industry Standard)","Query Validation"],"duration":37,"failureDetails":[{}],"failureMessages":["Error: Required tables not found: portfolio\n    at Object.safeQuery (/home/stocks/algo/webapp/lambda/utils/database.js:1081:19)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (/home/stocks/algo/webapp/lambda/tests/unit/database-utils-proper-unit.test.js:91:22)"],"fullName":"Database Utilities Unit Tests (Industry Standard) Query Validation validates safe queries with required tables","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"validates safe queries with required tables"},{"ancestorTitles":["Database Utilities Unit Tests (Industry Standard)","Query Validation"],"duration":30,"failureDetails":[{"matcherResult":{"message":"expect(received).rejects.toThrow(expected)\n\nExpected substring: \"Required tables not found\"\nReceived message:   \"Cannot read properties of undefined (reading 'rows')\"\n\n      630 |         const duration = Date.now() - startTime;\n      631 |         console.log(`✅ [${queryId}] Query completed in ${duration}ms`);\n    > 632 |         console.log(`✅ [${queryId}] Rows returned: ${result.rows?.length || 0}`);\n          |                                                             ^\n      633 |         \n      634 |         // Track performance metrics (legacy compatibility)\n      635 |         try {\n\n      at rows (utils/database.js:632:61)\n      at Object.safeQuery (utils/database.js:1085:12)\n      at Object.<anonymous> (tests/unit/database-utils-proper-unit.test.js:109:7)","pass":false},"message":"expect(received).rejects.toThrow(expected)\n\nExpected substring: \"Required tables not found\"\nReceived message:   \"Cannot read properties of undefined (reading 'rows')\"\n\n      630 |         const duration = Date.now() - startTime;\n      631 |         console.log(`✅ [${queryId}] Query completed in ${duration}ms`);\n    > 632 |         console.log(`✅ [${queryId}] Rows returned: ${result.rows?.length || 0}`);\n          |                                                             ^\n      633 |         \n      634 |         // Track performance metrics (legacy compatibility)\n      635 |         try {\n\n      at rows (utils/database.js:632:61)\n      at Object.safeQuery (utils/database.js:1085:12)\n      at Object.<anonymous> (tests/unit/database-utils-proper-unit.test.js:109:7)"}],"failureMessages":["Error: expect(received).rejects.toThrow(expected)\n\nExpected substring: \"Required tables not found\"\nReceived message:   \"Cannot read properties of undefined (reading 'rows')\"\n\n      630 |         const duration = Date.now() - startTime;\n      631 |         console.log(`✅ [${queryId}] Query completed in ${duration}ms`);\n    > 632 |         console.log(`✅ [${queryId}] Rows returned: ${result.rows?.length || 0}`);\n          |                                                             ^\n      633 |         \n      634 |         // Track performance metrics (legacy compatibility)\n      635 |         try {\n\n      at rows (utils/database.js:632:61)\n      at Object.safeQuery (utils/database.js:1085:12)\n      at Object.<anonymous> (tests/unit/database-utils-proper-unit.test.js:109:7)\n    at Object.toThrow (/home/stocks/algo/webapp/lambda/node_modules/expect/build/index.js:218:22)\n    at Object.toThrow (/home/stocks/algo/webapp/lambda/tests/unit/database-utils-proper-unit.test.js:111:17)\n    at Promise.then.completed (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"Database Utilities Unit Tests (Industry Standard) Query Validation rejects queries when required tables are missing","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"rejects queries when required tables are missing"},{"ancestorTitles":["Database Utilities Unit Tests (Industry Standard)","Connection Pool Configuration"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests (Industry Standard) Connection Pool Configuration calculates optimal pool size for Lambda environment","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"calculates optimal pool size for Lambda environment"},{"ancestorTitles":["Database Utilities Unit Tests (Industry Standard)","Connection Pool Configuration"],"duration":3,"failureDetails":[{"matcherResult":{"actual":5,"expected":25,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 25\nReceived: 5","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 25\nReceived: 5\n    at Object.toBe (/home/stocks/algo/webapp/lambda/tests/unit/database-utils-proper-unit.test.js:135:26)\n    at Promise.then.completed (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"Database Utilities Unit Tests (Industry Standard) Connection Pool Configuration uses default configuration for non-Lambda environment","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"uses default configuration for non-Lambda environment"},{"ancestorTitles":["Database Utilities Unit Tests (Industry Standard)","Transaction Management"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests (Industry Standard) Transaction Management executes transaction with proper commit","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"executes transaction with proper commit"},{"ancestorTitles":["Database Utilities Unit Tests (Industry Standard)","Transaction Management"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests (Industry Standard) Transaction Management rolls back transaction on error","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"rolls back transaction on error"},{"ancestorTitles":["Database Utilities Unit Tests (Industry Standard)","Health Checks"],"duration":4,"failureDetails":[{"matcherResult":{"message":"expect(received).toMatchObject(expected)\n\n- Expected  - 3\n+ Received  + 1\n\n  Object {\n-   \"database\": \"testdb\",\n-   \"status\": \"healthy\",\n-   \"version\": StringContaining \"PostgreSQL\",\n+   \"status\": \"unhealthy\",\n  }","pass":false}}],"failureMessages":["Error: expect(received).toMatchObject(expected)\n\n- Expected  - 3\n+ Received  + 1\n\n  Object {\n-   \"database\": \"testdb\",\n-   \"status\": \"healthy\",\n-   \"version\": StringContaining \"PostgreSQL\",\n+   \"status\": \"unhealthy\",\n  }\n    at Object.toMatchObject (/home/stocks/algo/webapp/lambda/tests/unit/database-utils-proper-unit.test.js:243:22)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Database Utilities Unit Tests (Industry Standard) Health Checks reports healthy status when database is responsive","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"reports healthy status when database is responsive"},{"ancestorTitles":["Database Utilities Unit Tests (Industry Standard)","Health Checks"],"duration":1,"failureDetails":[{"matcherResult":{"message":"expect(received).toMatchObject(expected)\n\n- Expected  - 1\n+ Received  + 1\n\n  Object {\n-   \"error\": \"Connection timeout\",\n+   \"error\": \"Cannot read properties of undefined (reading 'rows')\",\n    \"status\": \"unhealthy\",\n  }","pass":false}}],"failureMessages":["Error: expect(received).toMatchObject(expected)\n\n- Expected  - 1\n+ Received  + 1\n\n  Object {\n-   \"error\": \"Connection timeout\",\n+   \"error\": \"Cannot read properties of undefined (reading 'rows')\",\n    \"status\": \"unhealthy\",\n  }\n    at Object.toMatchObject (/home/stocks/algo/webapp/lambda/tests/unit/database-utils-proper-unit.test.js:255:22)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Database Utilities Unit Tests (Industry Standard) Health Checks reports unhealthy status on database error","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"reports unhealthy status on database error"}],"endTime":1753066187004,"message":"  ● Database Utilities Unit Tests (Industry Standard) › Query Validation › validates safe queries with required tables\n\n    Required tables not found: portfolio\n\n      1079 |         \n      1080 |         if (missingTables.length > 0) {\n    > 1081 |             throw new Error(`Required tables not found: ${missingTables.join(', ')}`);\n           |                   ^\n      1082 |         }\n      1083 |     }\n      1084 |     \n\n      at Object.safeQuery (utils/database.js:1081:19)\n      at Object.<anonymous> (tests/unit/database-utils-proper-unit.test.js:91:22)\n\n  ● Database Utilities Unit Tests (Industry Standard) › Query Validation › rejects queries when required tables are missing\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Required tables not found\"\n    Received message:   \"Cannot read properties of undefined (reading 'rows')\"\n\n          630 |         const duration = Date.now() - startTime;\n          631 |         console.log(`✅ [${queryId}] Query completed in ${duration}ms`);\n        > 632 |         console.log(`✅ [${queryId}] Rows returned: ${result.rows?.length || 0}`);\n              |                                                             ^\n          633 |         \n          634 |         // Track performance metrics (legacy compatibility)\n          635 |         try {\n\n      at rows (utils/database.js:632:61)\n      at Object.safeQuery (utils/database.js:1085:12)\n      at Object.<anonymous> (tests/unit/database-utils-proper-unit.test.js:109:7)\n      at Object.toThrow (node_modules/expect/build/index.js:218:22)\n      at Object.toThrow (tests/unit/database-utils-proper-unit.test.js:111:17)\n\n  ● Database Utilities Unit Tests (Industry Standard) › Connection Pool Configuration › uses default configuration for non-Lambda environment\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 25\n    Received: 5\n\n      133 |       const config = database.calculateOptimalPoolConfig();\n      134 |       \n    > 135 |       expect(config.max).toBe(25); // Default max for production\n          |                          ^\n      136 |       expect(config.min).toBe(4); // Default min for production\n      137 |       expect(config.acquireTimeoutMillis).toBe(10000);\n      138 |       expect(config.createTimeoutMillis).toBe(20000);\n\n      at Object.toBe (tests/unit/database-utils-proper-unit.test.js:135:26)\n\n  ● Database Utilities Unit Tests (Industry Standard) › Health Checks › reports healthy status when database is responsive\n\n    expect(received).toMatchObject(expected)\n\n    - Expected  - 3\n    + Received  + 1\n\n      Object {\n    -   \"database\": \"testdb\",\n    -   \"status\": \"healthy\",\n    -   \"version\": StringContaining \"PostgreSQL\",\n    +   \"status\": \"unhealthy\",\n      }\n\n      241 |       const health = await database.healthCheck();\n      242 |\n    > 243 |       expect(health).toMatchObject({\n          |                      ^\n      244 |         status: 'healthy',\n      245 |         database: 'testdb',\n      246 |         version: expect.stringContaining('PostgreSQL')\n\n      at Object.toMatchObject (tests/unit/database-utils-proper-unit.test.js:243:22)\n\n  ● Database Utilities Unit Tests (Industry Standard) › Health Checks › reports unhealthy status on database error\n\n    expect(received).toMatchObject(expected)\n\n    - Expected  - 1\n    + Received  + 1\n\n      Object {\n    -   \"error\": \"Connection timeout\",\n    +   \"error\": \"Cannot read properties of undefined (reading 'rows')\",\n        \"status\": \"unhealthy\",\n      }\n\n      253 |       const health = await database.healthCheck();\n      254 |\n    > 255 |       expect(health).toMatchObject({\n          |                      ^\n      256 |         status: 'unhealthy',\n      257 |         error: 'Connection timeout'\n      258 |       });\n\n      at Object.toMatchObject (tests/unit/database-utils-proper-unit.test.js:255:22)\n","name":"/home/stocks/algo/webapp/lambda/tests/unit/database-utils-proper-unit.test.js","startTime":1753066185312,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Database Utilities Unit Tests","Database Configuration Management"],"duration":92,"failureDetails":[{"message":"expect(received).rejects.toThrow()\n\nReceived promise resolved instead of rejected\nResolved to value: {\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}"}],"failureMessages":["Error: expect(received).rejects.toThrow()\n\nReceived promise resolved instead of rejected\nResolved to value: {\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}\n    at expect (/home/stocks/algo/webapp/lambda/node_modules/expect/build/index.js:113:15)\n    at Object.expect (/home/stocks/algo/webapp/lambda/tests/unit/database-utils.test.js:117:15)\n    at Promise.then.completed (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"Database Utilities Unit Tests Database Configuration Management loads configuration from complete environment variables","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"loads configuration from complete environment variables"},{"ancestorTitles":["Database Utilities Unit Tests","Database Configuration Management"],"duration":3,"failureDetails":[{"message":"expect(received).rejects.toThrow()\n\nReceived promise resolved instead of rejected\nResolved to value: {\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}"}],"failureMessages":["Error: expect(received).rejects.toThrow()\n\nReceived promise resolved instead of rejected\nResolved to value: {\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}\n    at expect (/home/stocks/algo/webapp/lambda/node_modules/expect/build/index.js:113:15)\n    at Object.expect (/home/stocks/algo/webapp/lambda/tests/unit/database-utils.test.js:141:15)\n    at Promise.then.completed (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"Database Utilities Unit Tests Database Configuration Management calculates optimal pool configuration for Lambda environment","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"failed","title":"calculates optimal pool configuration for Lambda environment"},{"ancestorTitles":["Database Utilities Unit Tests","Database Configuration Management"],"duration":33,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests Database Configuration Management handles missing database configuration gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles missing database configuration gracefully"},{"ancestorTitles":["Database Utilities Unit Tests","Database Configuration Management"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests Database Configuration Management validates SSL configuration settings","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"validates SSL configuration settings"},{"ancestorTitles":["Database Utilities Unit Tests","Connection Pool Management"],"duration":11,"failureDetails":[{}],"failureMessages":["ReferenceError: Pool is not defined\n    at Object.Pool (/home/stocks/algo/webapp/lambda/tests/unit/database-utils.test.js:190:14)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Database Utilities Unit Tests Connection Pool Management initializes connection pool with proper configuration","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"initializes connection pool with proper configuration"},{"ancestorTitles":["Database Utilities Unit Tests","Connection Pool Management"],"duration":11,"failureDetails":[{"message":"expect(received).rejects.toThrow()\n\nReceived promise resolved instead of rejected\nResolved to value: {\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}"}],"failureMessages":["Error: expect(received).rejects.toThrow()\n\nReceived promise resolved instead of rejected\nResolved to value: {\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}\n    at expect (/home/stocks/algo/webapp/lambda/node_modules/expect/build/index.js:113:15)\n    at Object.expect (/home/stocks/algo/webapp/lambda/tests/unit/database-utils.test.js:213:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Database Utilities Unit Tests Connection Pool Management tests database connection during initialization","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"tests database connection during initialization"},{"ancestorTitles":["Database Utilities Unit Tests","Connection Pool Management"],"duration":17,"failureDetails":[{"message":"expect(received).rejects.toThrow()\n\nReceived promise resolved instead of rejected\nResolved to value: {\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}"}],"failureMessages":["Error: expect(received).rejects.toThrow()\n\nReceived promise resolved instead of rejected\nResolved to value: {\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}\n    at expect (/home/stocks/algo/webapp/lambda/node_modules/expect/build/index.js:113:15)\n    at Object.expect (/home/stocks/algo/webapp/lambda/tests/unit/database-utils.test.js:229:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Database Utilities Unit Tests Connection Pool Management handles connection pool initialization errors","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"handles connection pool initialization errors"},{"ancestorTitles":["Database Utilities Unit Tests","Connection Pool Management"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'min')\n    at Object.min [as getPoolStatus] (/home/stocks/algo/webapp/lambda/utils/database.js:598:27)\n    at Object.getPoolStatus (/home/stocks/algo/webapp/lambda/tests/unit/database-utils.test.js:237:25)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Database Utilities Unit Tests Connection Pool Management provides pool status and metrics","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"provides pool status and metrics"},{"ancestorTitles":["Database Utilities Unit Tests","Connection Pool Management"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests Connection Pool Management handles pool warming for Lambda optimization","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles pool warming for Lambda optimization"},{"ancestorTitles":["Database Utilities Unit Tests","Query Execution and Management"],"duration":12,"failureDetails":[{"message":"expect(received).rejects.toThrow()\n\nReceived promise resolved instead of rejected\nResolved to value: {\"rows\": [{\"test\": 1}]}"}],"failureMessages":["Error: expect(received).rejects.toThrow()\n\nReceived promise resolved instead of rejected\nResolved to value: {\"rows\": [{\"test\": 1}]}\n    at expect (/home/stocks/algo/webapp/lambda/node_modules/expect/build/index.js:113:15)\n    at Object.expect (/home/stocks/algo/webapp/lambda/tests/unit/database-utils.test.js:305:15)\n    at Promise.then.completed (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"Database Utilities Unit Tests Query Execution and Management executes queries through database manager with circuit breaker","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"executes queries through database manager with circuit breaker"},{"ancestorTitles":["Database Utilities Unit Tests","Query Execution and Management"],"duration":4,"failureDetails":[{"message":"expect(received).rejects.toThrow()\n\nReceived promise resolved instead of rejected\nResolved to value: {\"rows\": [{\"test\": 1}]}"}],"failureMessages":["Error: expect(received).rejects.toThrow()\n\nReceived promise resolved instead of rejected\nResolved to value: {\"rows\": [{\"test\": 1}]}\n    at expect (/home/stocks/algo/webapp/lambda/node_modules/expect/build/index.js:113:15)\n    at Object.expect (/home/stocks/algo/webapp/lambda/tests/unit/database-utils.test.js:315:13)\n    at Promise.then.completed (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"Database Utilities Unit Tests Query Execution and Management handles query errors and provides detailed logging","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"handles query errors and provides detailed logging"},{"ancestorTitles":["Database Utilities Unit Tests","Query Execution and Management"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests Query Execution and Management extracts table names from SQL queries correctly","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"extracts table names from SQL queries correctly"},{"ancestorTitles":["Database Utilities Unit Tests","Query Execution and Management"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests Query Execution and Management handles safe queries with table existence validation","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles safe queries with table existence validation"},{"ancestorTitles":["Database Utilities Unit Tests","Query Execution and Management"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests Query Execution and Management rejects safe queries when required tables are missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects safe queries when required tables are missing"},{"ancestorTitles":["Database Utilities Unit Tests","Transaction Management"],"duration":0,"failureDetails":[{"message":"expect(received).rejects.toThrow()\n\nReceived promise resolved instead of rejected\nResolved to value: undefined"}],"failureMessages":["Error: expect(received).rejects.toThrow()\n\nReceived promise resolved instead of rejected\nResolved to value: undefined\n    at expect (/home/stocks/algo/webapp/lambda/node_modules/expect/build/index.js:113:15)\n    at Object.expect (/home/stocks/algo/webapp/lambda/tests/unit/database-utils.test.js:417:15)\n    at Promise.then.completed (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"Database Utilities Unit Tests Transaction Management executes successful transactions with proper commit","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"executes successful transactions with proper commit"},{"ancestorTitles":["Database Utilities Unit Tests","Transaction Management"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests Transaction Management rolls back transactions on errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rolls back transactions on errors"},{"ancestorTitles":["Database Utilities Unit Tests","Transaction Management"],"duration":1,"failureDetails":[{"matcherResult":{"actual":false,"expected":true,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: true\nReceived: false","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: true\nReceived: false\n    at Object.toBe (/home/stocks/algo/webapp/lambda/tests/unit/database-utils.test.js:506:29)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Database Utilities Unit Tests Transaction Management ensures client release even on transaction errors","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"ensures client release even on transaction errors"},{"ancestorTitles":["Database Utilities Unit Tests","Schema Validation and Table Management"],"duration":10,"failureDetails":[{"message":"expect(received).rejects.toThrow()\n\nReceived promise resolved instead of rejected\nResolved to value: undefined"}],"failureMessages":["Error: expect(received).rejects.toThrow()\n\nReceived promise resolved instead of rejected\nResolved to value: undefined\n    at expect (/home/stocks/algo/webapp/lambda/node_modules/expect/build/index.js:113:15)\n    at Object.expect (/home/stocks/algo/webapp/lambda/tests/unit/database-utils.test.js:551:15)\n    at Promise.then.completed (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"Database Utilities Unit Tests Schema Validation and Table Management validates database schema comprehensively","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"validates database schema comprehensively"},{"ancestorTitles":["Database Utilities Unit Tests","Schema Validation and Table Management"],"duration":4,"failureDetails":[{"message":"expect(received).rejects.toThrow()\n\nReceived promise resolved instead of rejected\nResolved to value: undefined"}],"failureMessages":["Error: expect(received).rejects.toThrow()\n\nReceived promise resolved instead of rejected\nResolved to value: undefined\n    at expect (/home/stocks/algo/webapp/lambda/node_modules/expect/build/index.js:113:15)\n    at Object.expect (/home/stocks/algo/webapp/lambda/tests/unit/database-utils.test.js:578:15)\n    at Promise.then.completed (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"Database Utilities Unit Tests Schema Validation and Table Management checks individual table existence","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"checks individual table existence"},{"ancestorTitles":["Database Utilities Unit Tests","Schema Validation and Table Management"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests Schema Validation and Table Management checks multiple table existence efficiently","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"checks multiple table existence efficiently"},{"ancestorTitles":["Database Utilities Unit Tests","Schema Validation and Table Management"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests Schema Validation and Table Management provides detailed schema requirements structure","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"provides detailed schema requirements structure"},{"ancestorTitles":["Database Utilities Unit Tests","Schema Validation and Table Management"],"duration":10,"failureDetails":[{"matcherResult":{"message":"expect(received).toBeDefined()\n\nReceived: undefined","pass":false}}],"failureMessages":["Error: expect(received).toBeDefined()\n\nReceived: undefined\n    at Object.toBeDefined (/home/stocks/algo/webapp/lambda/tests/unit/database-utils.test.js:650:32)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Database Utilities Unit Tests Schema Validation and Table Management handles schema validation errors gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"handles schema validation errors gracefully"},{"ancestorTitles":["Database Utilities Unit Tests","Health Checks and Monitoring"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests Health Checks and Monitoring performs comprehensive health checks","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"performs comprehensive health checks"},{"ancestorTitles":["Database Utilities Unit Tests","Health Checks and Monitoring"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests Health Checks and Monitoring handles circuit breaker open state in health checks","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"handles circuit breaker open state in health checks"},{"ancestorTitles":["Database Utilities Unit Tests","Health Checks and Monitoring"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests Health Checks and Monitoring reports unhealthy state for database connection failures","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"reports unhealthy state for database connection failures"},{"ancestorTitles":["Database Utilities Unit Tests","Lambda Optimization Features"],"duration":4,"failureDetails":[{"matcherResult":{"actual":true,"expected":false,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: false\nReceived: true","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: false\nReceived: true\n    at Object.toBe (/home/stocks/algo/webapp/lambda/tests/unit/database-utils.test.js:773:25)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Database Utilities Unit Tests Lambda Optimization Features initializes database optimally for Lambda environment","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"initializes database optimally for Lambda environment"},{"ancestorTitles":["Database Utilities Unit Tests","Lambda Optimization Features"],"duration":4,"failureDetails":[{"matcherResult":{"actual":true,"expected":false,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: false\nReceived: true","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: false\nReceived: true\n    at Object.toBe (/home/stocks/algo/webapp/lambda/tests/unit/database-utils.test.js:792:23)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Database Utilities Unit Tests Lambda Optimization Features handles Lambda initialization failures gracefully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"handles Lambda initialization failures gracefully"},{"ancestorTitles":["Database Utilities Unit Tests","Lambda Optimization Features"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests Lambda Optimization Features calculates appropriate pool sizes for Lambda concurrency","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"calculates appropriate pool sizes for Lambda concurrency"},{"ancestorTitles":["Database Utilities Unit Tests","Connection Cleanup and Resource Management"],"duration":1,"failureDetails":[{}],"failureMessages":["ReferenceError: mockPool is not defined\n    at Object.mockPool (/home/stocks/algo/webapp/lambda/tests/unit/database-utils.test.js:822:14)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Database Utilities Unit Tests Connection Cleanup and Resource Management closes database connections properly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"closes database connections properly"},{"ancestorTitles":["Database Utilities Unit Tests","Connection Cleanup and Resource Management"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests Connection Cleanup and Resource Management handles connection cleanup errors gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles connection cleanup errors gracefully"},{"ancestorTitles":["Database Utilities Unit Tests","Connection Cleanup and Resource Management"],"duration":10,"failureDetails":[{}],"failureMessages":["ReferenceError: mockPool is not defined\n    at Object.mockPool (/home/stocks/algo/webapp/lambda/tests/unit/database-utils.test.js:850:25)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Database Utilities Unit Tests Connection Cleanup and Resource Management provides pool instance access with validation","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"provides pool instance access with validation"},{"ancestorTitles":["Database Utilities Unit Tests","Performance Monitoring and Metrics"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'min')\n    at Object.min [as getPoolStatus] (/home/stocks/algo/webapp/lambda/utils/database.js:598:27)\n    at Object.getPoolStatus (/home/stocks/algo/webapp/lambda/tests/unit/database-utils.test.js:869:25)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Database Utilities Unit Tests Performance Monitoring and Metrics tracks pool utilization metrics","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"tracks pool utilization metrics"},{"ancestorTitles":["Database Utilities Unit Tests","Performance Monitoring and Metrics"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'min')\n    at Object.min [as getPoolStatus] (/home/stocks/algo/webapp/lambda/utils/database.js:598:27)\n    at Object.getPoolStatus (/home/stocks/algo/webapp/lambda/tests/unit/database-utils.test.js:884:25)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Database Utilities Unit Tests Performance Monitoring and Metrics provides adaptive pool sizing recommendations","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"provides adaptive pool sizing recommendations"},{"ancestorTitles":["Database Utilities Unit Tests","Performance Monitoring and Metrics"],"duration":1,"failureDetails":[{}],"failureMessages":["ReferenceError: mockPool is not defined\n    at Object.mockPool (/home/stocks/algo/webapp/lambda/tests/unit/database-utils.test.js:899:14)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Database Utilities Unit Tests Performance Monitoring and Metrics monitors pool events and connections","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"monitors pool events and connections"},{"ancestorTitles":["Database Utilities Unit Tests","Edge Cases and Error Scenarios"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests Edge Cases and Error Scenarios handles malformed SQL queries gracefully","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"handles malformed SQL queries gracefully"},{"ancestorTitles":["Database Utilities Unit Tests","Edge Cases and Error Scenarios"],"duration":2,"failureDetails":[{"message":"expect(received).rejects.toThrow()\n\nReceived promise resolved instead of rejected\nResolved to value: [{\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}, {\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}, {\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}]"}],"failureMessages":["Error: expect(received).rejects.toThrow()\n\nReceived promise resolved instead of rejected\nResolved to value: [{\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}, {\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}, {\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}]\n    at expect (/home/stocks/algo/webapp/lambda/node_modules/expect/build/index.js:113:15)\n    at Object.expect (/home/stocks/algo/webapp/lambda/tests/unit/database-utils.test.js:951:15)\n    at Promise.then.completed (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"Database Utilities Unit Tests Edge Cases and Error Scenarios handles concurrent initialization requests","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"handles concurrent initialization requests"},{"ancestorTitles":["Database Utilities Unit Tests","Edge Cases and Error Scenarios"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests Edge Cases and Error Scenarios validates environment variable data types","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"validates environment variable data types"},{"ancestorTitles":["Database Utilities Unit Tests","Edge Cases and Error Scenarios"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Database Utilities Unit Tests Edge Cases and Error Scenarios handles missing optional configuration gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles missing optional configuration gracefully"},{"ancestorTitles":["Database Utilities Unit Tests","Edge Cases and Error Scenarios"],"duration":1,"failureDetails":[{"message":"expect(received).rejects.toThrow()\n\nReceived promise resolved instead of rejected\nResolved to value: {\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}"}],"failureMessages":["Error: expect(received).rejects.toThrow()\n\nReceived promise resolved instead of rejected\nResolved to value: {\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}\n    at expect (/home/stocks/algo/webapp/lambda/node_modules/expect/build/index.js:113:15)\n    at Object.expect (/home/stocks/algo/webapp/lambda/tests/unit/database-utils.test.js:998:15)\n    at Promise.then.completed (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/stocks/algo/webapp/lambda/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/home/stocks/algo/webapp/lambda/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"Database Utilities Unit Tests Edge Cases and Error Scenarios preserves state consistency during error recovery","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"preserves state consistency during error recovery"}],"endTime":1753066187111,"message":"  ● Database Utilities Unit Tests › Database Configuration Management › loads configuration from complete environment variables\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: {\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}\n\n      115 |       } else {\n      116 |         // Test configuration loading fails gracefully when database unavailable\n    > 117 |         await expect(db.initializeDatabase()).rejects.toThrow();\n          |               ^\n      118 |       }\n      119 |     });\n      120 |\n\n      at expect (node_modules/expect/build/index.js:113:15)\n      at Object.expect (tests/unit/database-utils.test.js:117:15)\n\n  ● Database Utilities Unit Tests › Database Configuration Management › calculates optimal pool configuration for Lambda environment\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: {\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}\n\n      139 |         await expect(db.initializeDatabase()).resolves.not.toThrow();\n      140 |       } else {\n    > 141 |         await expect(db.initializeDatabase()).rejects.toThrow();\n          |               ^\n      142 |       }\n      143 |     });\n      144 |\n\n      at expect (node_modules/expect/build/index.js:113:15)\n      at Object.expect (tests/unit/database-utils.test.js:141:15)\n\n  ● Database Utilities Unit Tests › Connection Pool Management › initializes connection pool with proper configuration\n\n    ReferenceError: Pool is not defined\n\n      188 |       await db.initializeDatabase();\n      189 |       \n    > 190 |       expect(Pool).toHaveBeenCalledWith(\n          |              ^\n      191 |         expect.objectContaining({\n      192 |           host: 'localhost',\n      193 |           user: 'testuser',\n\n      at Object.Pool (tests/unit/database-utils.test.js:190:14)\n\n  ● Database Utilities Unit Tests › Connection Pool Management › tests database connection during initialization\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: {\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}\n\n      211 |       } else {\n      212 |         // Test graceful handling when database is not available\n    > 213 |         await expect(db.initializeDatabase()).rejects.toThrow('Database connection test failed');\n          |               ^\n      214 |       }\n      215 |     }, TEST_CONFIG.testTimeout);\n      216 |\n\n      at expect (node_modules/expect/build/index.js:113:15)\n      at Object.expect (tests/unit/database-utils.test.js:213:15)\n\n  ● Database Utilities Unit Tests › Connection Pool Management › handles connection pool initialization errors\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: {\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}\n\n      227 |       process.env.DB_SSL = 'false';\n      228 |       \n    > 229 |       await expect(db.initializeDatabase()).rejects.toThrow();\n          |             ^\n      230 |     }, TEST_CONFIG.testTimeout);\n      231 |\n      232 |     it('provides pool status and metrics', async () => {\n\n      at expect (node_modules/expect/build/index.js:113:15)\n      at Object.expect (tests/unit/database-utils.test.js:229:13)\n\n  ● Database Utilities Unit Tests › Connection Pool Management › provides pool status and metrics\n\n    TypeError: Cannot read properties of undefined (reading 'min')\n\n      596 |         idleCount: pool.idleCount,\n      597 |         waitingCount: pool.waitingCount,\n    > 598 |         min: pool.options.min,\n          |                           ^\n      599 |         max: pool.options.max,\n      600 |         connectionTimeoutMillis: pool.options.connectionTimeoutMillis,\n      601 |         idleTimeoutMillis: pool.options.idleTimeoutMillis,\n\n      at Object.min [as getPoolStatus] (utils/database.js:598:27)\n      at Object.getPoolStatus (tests/unit/database-utils.test.js:237:25)\n\n  ● Database Utilities Unit Tests › Query Execution and Management › executes queries through database manager with circuit breaker\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: {\"rows\": [{\"test\": 1}]}\n\n      303 |       } else {\n      304 |         // Test that query fails gracefully when no database available\n    > 305 |         await expect(\n          |               ^\n      306 |           db.query('SELECT * FROM test_table', ['param1'])\n      307 |         ).rejects.toThrow();\n      308 |       }\n\n      at expect (node_modules/expect/build/index.js:113:15)\n      at Object.expect (tests/unit/database-utils.test.js:305:15)\n\n  ● Database Utilities Unit Tests › Query Execution and Management › handles query errors and provides detailed logging\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: {\"rows\": [{\"test\": 1}]}\n\n      313 |       \n      314 |       // Test query error handling by using invalid SQL\n    > 315 |       await expect(\n          |             ^\n      316 |         db.query('INVALID SQL SYNTAX HERE', [])\n      317 |       ).rejects.toThrow();\n      318 |     }, TEST_CONFIG.testTimeout);\n\n      at expect (node_modules/expect/build/index.js:113:15)\n      at Object.expect (tests/unit/database-utils.test.js:315:13)\n\n  ● Database Utilities Unit Tests › Transaction Management › executes successful transactions with proper commit\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: undefined\n\n      415 |       } else {\n      416 |         // Test that transaction function exists and handles missing database gracefully\n    > 417 |         await expect(async () => {\n          |               ^\n      418 |           await db.transaction(async (client) => {\n      419 |             await client.query('SELECT 1');\n      420 |           });\n\n      at expect (node_modules/expect/build/index.js:113:15)\n      at Object.expect (tests/unit/database-utils.test.js:417:15)\n\n  ● Database Utilities Unit Tests › Transaction Management › ensures client release even on transaction errors\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n      504 |         }\n      505 |         \n    > 506 |         expect(errorThrown).toBe(true);\n          |                             ^\n      507 |       }\n      508 |     });\n      509 |   });\n\n      at Object.toBe (tests/unit/database-utils.test.js:506:29)\n\n  ● Database Utilities Unit Tests › Schema Validation and Table Management › validates database schema comprehensively\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: undefined\n\n      549 |       } else {\n      550 |         // Test graceful handling when database unavailable\n    > 551 |         await expect(async () => {\n          |               ^\n      552 |           await db.validateDatabaseSchema();\n      553 |         }).rejects.toThrow();\n      554 |       }\n\n      at expect (node_modules/expect/build/index.js:113:15)\n      at Object.expect (tests/unit/database-utils.test.js:551:15)\n\n  ● Database Utilities Unit Tests › Schema Validation and Table Management › checks individual table existence\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: undefined\n\n      576 |       } else {\n      577 |         // Test graceful handling when database unavailable\n    > 578 |         await expect(async () => {\n          |               ^\n      579 |           await db.tableExists('users');\n      580 |         }).rejects.toThrow();\n      581 |       }\n\n      at expect (node_modules/expect/build/index.js:113:15)\n      at Object.expect (tests/unit/database-utils.test.js:578:15)\n\n  ● Database Utilities Unit Tests › Schema Validation and Table Management › handles schema validation errors gracefully\n\n    expect(received).toBeDefined()\n\n    Received: undefined\n\n      648 |       \n      649 |       expect(validation.valid).toBe(false);\n    > 650 |       expect(validation.error).toBeDefined();\n          |                                ^\n      651 |     });\n      652 |   });\n      653 |\n\n      at Object.toBeDefined (tests/unit/database-utils.test.js:650:32)\n\n  ● Database Utilities Unit Tests › Lambda Optimization Features › initializes database optimally for Lambda environment\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n      771 |         // Test graceful failure when database unavailable\n      772 |         const success = await db.initForLambda();\n    > 773 |         expect(success).toBe(false);\n          |                         ^\n      774 |       }\n      775 |     });\n      776 |\n\n      at Object.toBe (tests/unit/database-utils.test.js:773:25)\n\n  ● Database Utilities Unit Tests › Lambda Optimization Features › handles Lambda initialization failures gracefully\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n      790 |       const success = await dbWithInvalidConfig.initForLambda();\n      791 |       \n    > 792 |       expect(success).toBe(false);\n          |                       ^\n      793 |     });\n      794 |\n      795 |     it('calculates appropriate pool sizes for Lambda concurrency', () => {\n\n      at Object.toBe (tests/unit/database-utils.test.js:792:23)\n\n  ● Database Utilities Unit Tests › Connection Cleanup and Resource Management › closes database connections properly\n\n    ReferenceError: mockPool is not defined\n\n      820 |       await db.closeDatabase();\n      821 |       \n    > 822 |       expect(mockPool.end).toHaveBeenCalled();\n          |              ^\n      823 |     });\n      824 |\n      825 |     it('handles connection cleanup errors gracefully', async () => {\n\n      at Object.mockPool (tests/unit/database-utils.test.js:822:14)\n\n  ● Database Utilities Unit Tests › Connection Cleanup and Resource Management › provides pool instance access with validation\n\n    ReferenceError: mockPool is not defined\n\n      848 |       // Should return pool after initialization\n      849 |       const pool = db.getPool();\n    > 850 |       expect(pool).toBe(mockPool);\n          |                         ^\n      851 |     });\n      852 |   });\n      853 |\n\n      at Object.mockPool (tests/unit/database-utils.test.js:850:25)\n\n  ● Database Utilities Unit Tests › Performance Monitoring and Metrics › tracks pool utilization metrics\n\n    TypeError: Cannot read properties of undefined (reading 'min')\n\n      596 |         idleCount: pool.idleCount,\n      597 |         waitingCount: pool.waitingCount,\n    > 598 |         min: pool.options.min,\n          |                           ^\n      599 |         max: pool.options.max,\n      600 |         connectionTimeoutMillis: pool.options.connectionTimeoutMillis,\n      601 |         idleTimeoutMillis: pool.options.idleTimeoutMillis,\n\n      at Object.min [as getPoolStatus] (utils/database.js:598:27)\n      at Object.getPoolStatus (tests/unit/database-utils.test.js:869:25)\n\n  ● Database Utilities Unit Tests › Performance Monitoring and Metrics › provides adaptive pool sizing recommendations\n\n    TypeError: Cannot read properties of undefined (reading 'min')\n\n      596 |         idleCount: pool.idleCount,\n      597 |         waitingCount: pool.waitingCount,\n    > 598 |         min: pool.options.min,\n          |                           ^\n      599 |         max: pool.options.max,\n      600 |         connectionTimeoutMillis: pool.options.connectionTimeoutMillis,\n      601 |         idleTimeoutMillis: pool.options.idleTimeoutMillis,\n\n      at Object.min [as getPoolStatus] (utils/database.js:598:27)\n      at Object.getPoolStatus (tests/unit/database-utils.test.js:884:25)\n\n  ● Database Utilities Unit Tests › Performance Monitoring and Metrics › monitors pool events and connections\n\n    ReferenceError: mockPool is not defined\n\n      897 |       \n      898 |       // Verify pool event listeners were registered\n    > 899 |       expect(mockPool.on).toHaveBeenCalledWith('connect', expect.any(Function));\n          |              ^\n      900 |       expect(mockPool.on).toHaveBeenCalledWith('acquire', expect.any(Function));\n      901 |       expect(mockPool.on).toHaveBeenCalledWith('remove', expect.any(Function));\n      902 |       expect(mockPool.on).toHaveBeenCalledWith('error', expect.any(Function));\n\n      at Object.mockPool (tests/unit/database-utils.test.js:899:14)\n\n  ● Database Utilities Unit Tests › Edge Cases and Error Scenarios › handles concurrent initialization requests\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: [{\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}, {\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}, {\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}]\n\n      949 |         \n      950 |         // All should fail consistently\n    > 951 |         await expect(Promise.all(promises)).rejects.toThrow();\n          |               ^\n      952 |       }\n      953 |     });\n      954 |\n\n      at expect (node_modules/expect/build/index.js:113:15)\n      at Object.expect (tests/unit/database-utils.test.js:951:15)\n\n  ● Database Utilities Unit Tests › Edge Cases and Error Scenarios › preserves state consistency during error recovery\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: {\"connect\": [Function mockConstructor], \"end\": [Function mockConstructor], \"idleCount\": 0, \"on\": [Function mockConstructor], \"once\": [Function mockConstructor], \"query\": [Function mockConstructor], \"removeListener\": [Function mockConstructor], \"totalCount\": 0, \"waitingCount\": 0}\n\n       996 |       } else {\n       997 |         // Test graceful failure when database not available\n    >  998 |         await expect(db.initializeDatabase()).rejects.toThrow();\n           |               ^\n       999 |         \n      1000 |         // State should remain consistent even after failure\n      1001 |         await expect(db.initializeDatabase()).rejects.toThrow();\n\n      at expect (node_modules/expect/build/index.js:113:15)\n      at Object.expect (tests/unit/database-utils.test.js:998:15)\n","name":"/home/stocks/algo/webapp/lambda/tests/unit/database-utils.test.js","startTime":1753066185344,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Universal Error Handler Unit Tests","Error Categorization"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Categorization categorizes circuit breaker errors correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"categorizes circuit breaker errors correctly"},{"ancestorTitles":["Universal Error Handler Unit Tests","Error Categorization"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Categorization categorizes database errors correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"categorizes database errors correctly"},{"ancestorTitles":["Universal Error Handler Unit Tests","Error Categorization"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Categorization categorizes timeout errors correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"categorizes timeout errors correctly"},{"ancestorTitles":["Universal Error Handler Unit Tests","Error Categorization"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Categorization categorizes authentication errors correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"categorizes authentication errors correctly"},{"ancestorTitles":["Universal Error Handler Unit Tests","Error Categorization"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Categorization categorizes authorization errors correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"categorizes authorization errors correctly"},{"ancestorTitles":["Universal Error Handler Unit Tests","Error Categorization"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Categorization categorizes validation errors correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"categorizes validation errors correctly"},{"ancestorTitles":["Universal Error Handler Unit Tests","Error Categorization"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Categorization categorizes external service errors correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"categorizes external service errors correctly"},{"ancestorTitles":["Universal Error Handler Unit Tests","Error Categorization"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Categorization categorizes rate limit errors correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"categorizes rate limit errors correctly"},{"ancestorTitles":["Universal Error Handler Unit Tests","Error Categorization"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Categorization categorizes business logic errors correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"categorizes business logic errors correctly"},{"ancestorTitles":["Universal Error Handler Unit Tests","Error Categorization"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Categorization categorizes server errors correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"categorizes server errors correctly"},{"ancestorTitles":["Universal Error Handler Unit Tests","Error Categorization"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Categorization returns UNKNOWN_ERROR for unrecognized errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns UNKNOWN_ERROR for unrecognized errors"},{"ancestorTitles":["Universal Error Handler Unit Tests","Severity Determination"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Severity Determination assigns CRITICAL severity to database and server errors","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"assigns CRITICAL severity to database and server errors"},{"ancestorTitles":["Universal Error Handler Unit Tests","Severity Determination"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Severity Determination assigns HIGH severity to external service and circuit breaker errors","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"assigns HIGH severity to external service and circuit breaker errors"},{"ancestorTitles":["Universal Error Handler Unit Tests","Severity Determination"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Severity Determination assigns MEDIUM severity to auth and timeout errors","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"assigns MEDIUM severity to auth and timeout errors"},{"ancestorTitles":["Universal Error Handler Unit Tests","Severity Determination"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Severity Determination assigns LOW severity to validation and rate limit errors","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"assigns LOW severity to validation and rate limit errors"},{"ancestorTitles":["Universal Error Handler Unit Tests","Severity Determination"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Severity Determination returns UNKNOWN for unrecognized error types","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns UNKNOWN for unrecognized error types"},{"ancestorTitles":["Universal Error Handler Unit Tests","Recoverability Assessment"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Recoverability Assessment identifies recoverable errors correctly","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"identifies recoverable errors correctly"},{"ancestorTitles":["Universal Error Handler Unit Tests","Recoverability Assessment"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Recoverability Assessment identifies non-recoverable errors correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"identifies non-recoverable errors correctly"},{"ancestorTitles":["Universal Error Handler Unit Tests","User Message Generation"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests User Message Generation generates appropriate user messages for each category","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"generates appropriate user messages for each category"},{"ancestorTitles":["Universal Error Handler Unit Tests","User Message Generation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests User Message Generation uses custom message for business logic errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"uses custom message for business logic errors"},{"ancestorTitles":["Universal Error Handler Unit Tests","User Message Generation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests User Message Generation falls back to default message for unknown categories","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"falls back to default message for unknown categories"},{"ancestorTitles":["Universal Error Handler Unit Tests","Error Context Enrichment"],"duration":30,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Context Enrichment enriches error with comprehensive context","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"enriches error with comprehensive context"},{"ancestorTitles":["Universal Error Handler Unit Tests","Error Context Enrichment"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Context Enrichment handles missing user context gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles missing user context gracefully"},{"ancestorTitles":["Universal Error Handler Unit Tests","Error Context Enrichment"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Context Enrichment calculates performance metrics correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"calculates performance metrics correctly"},{"ancestorTitles":["Universal Error Handler Unit Tests","Error Response Formatting"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Response Formatting formats error response with correct structure","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"formats error response with correct structure"},{"ancestorTitles":["Universal Error Handler Unit Tests","Error Response Formatting"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Response Formatting includes development details when NODE_ENV is development","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"includes development details when NODE_ENV is development"},{"ancestorTitles":["Universal Error Handler Unit Tests","Error Response Formatting"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Response Formatting excludes development details in production","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"excludes development details in production"},{"ancestorTitles":["Universal Error Handler Unit Tests","Error Response Formatting"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Response Formatting includes retry information for recoverable errors","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"includes retry information for recoverable errors"},{"ancestorTitles":["Universal Error Handler Unit Tests","Error Response Formatting"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Response Formatting maps status codes correctly by category","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"maps status codes correctly by category"},{"ancestorTitles":["Universal Error Handler Unit Tests","Async Handler Wrapper"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Async Handler Wrapper catches async errors and passes them to next","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"catches async errors and passes them to next"},{"ancestorTitles":["Universal Error Handler Unit Tests","Async Handler Wrapper"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Async Handler Wrapper handles non-promise functions gracefully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"handles non-promise functions gracefully"},{"ancestorTitles":["Universal Error Handler Unit Tests","Async Handler Wrapper"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Async Handler Wrapper handles functions that return non-promise values","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"handles functions that return non-promise values"},{"ancestorTitles":["Universal Error Handler Unit Tests","Error Handler Middleware"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Handler Middleware processes error and sends formatted response","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"processes error and sends formatted response"},{"ancestorTitles":["Universal Error Handler Unit Tests","Error Handler Middleware"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Handler Middleware handles errors without correlation ID gracefully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"handles errors without correlation ID gracefully"},{"ancestorTitles":["Universal Error Handler Unit Tests","Database Error Handler"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Database Error Handler executes fallback function when provided","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"executes fallback function when provided"},{"ancestorTitles":["Universal Error Handler Unit Tests","Database Error Handler"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Database Error Handler throws original error when fallback fails","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"throws original error when fallback fails"},{"ancestorTitles":["Universal Error Handler Unit Tests","Database Error Handler"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Database Error Handler throws original error when no fallback provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"throws original error when no fallback provided"},{"ancestorTitles":["Universal Error Handler Unit Tests","External Service Error Handler"],"duration":1002,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests External Service Error Handler throws retry error for retryable errors within retry limit","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"throws retry error for retryable errors within retry limit"},{"ancestorTitles":["Universal Error Handler Unit Tests","External Service Error Handler"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests External Service Error Handler throws original error when retry limit exceeded","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"throws original error when retry limit exceeded"},{"ancestorTitles":["Universal Error Handler Unit Tests","External Service Error Handler"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests External Service Error Handler throws original error for non-retryable errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"throws original error for non-retryable errors"},{"ancestorTitles":["Universal Error Handler Unit Tests","External Service Error Handler"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests External Service Error Handler applies exponential backoff with maximum delay","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"applies exponential backoff with maximum delay"},{"ancestorTitles":["Universal Error Handler Unit Tests","Error Logging"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Logging logs errors with appropriate severity levels","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"logs errors with appropriate severity levels"},{"ancestorTitles":["Universal Error Handler Unit Tests","Error Logging"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Logging triggers critical error alert for critical errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"triggers critical error alert for critical errors"},{"ancestorTitles":["Universal Error Handler Unit Tests","Error Logging"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Error Logging uses fallback logger when request logger not available","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"uses fallback logger when request logger not available"},{"ancestorTitles":["Universal Error Handler Unit Tests","Edge Cases and Error Handling"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Edge Cases and Error Handling handles errors with undefined message","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles errors with undefined message"},{"ancestorTitles":["Universal Error Handler Unit Tests","Edge Cases and Error Handling"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Edge Cases and Error Handling handles errors with null properties","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"handles errors with null properties"},{"ancestorTitles":["Universal Error Handler Unit Tests","Edge Cases and Error Handling"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Edge Cases and Error Handling handles request objects with missing properties gracefully","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"handles request objects with missing properties gracefully"},{"ancestorTitles":["Universal Error Handler Unit Tests","Edge Cases and Error Handling"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Universal Error Handler Unit Tests Edge Cases and Error Handling handles circular reference in error objects","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles circular reference in error objects"}],"endTime":1753066187874,"message":"","name":"/home/stocks/algo/webapp/lambda/tests/unit/real-universal-error-handler.test.js","startTime":1753066185352,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Timeout Helper Unit Tests","Default Configuration"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Default Configuration has correct default timeout values","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"has correct default timeout values"},{"ancestorTitles":["Timeout Helper Unit Tests","Default Configuration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Default Configuration initializes with empty circuit breakers map","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"initializes with empty circuit breakers map"},{"ancestorTitles":["Timeout Helper Unit Tests","Basic Timeout Functionality"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Basic Timeout Functionality executes operation successfully within timeout","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"executes operation successfully within timeout"},{"ancestorTitles":["Timeout Helper Unit Tests","Basic Timeout Functionality"],"duration":65,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Basic Timeout Functionality throws timeout error when operation exceeds timeout","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"throws timeout error when operation exceeds timeout"},{"ancestorTitles":["Timeout Helper Unit Tests","Basic Timeout Functionality"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Basic Timeout Functionality propagates operation errors correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"propagates operation errors correctly"},{"ancestorTitles":["Timeout Helper Unit Tests","Basic Timeout Functionality"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Basic Timeout Functionality uses default timeout when not specified","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"uses default timeout when not specified"},{"ancestorTitles":["Timeout Helper Unit Tests","Retry Logic"],"duration":32,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Retry Logic retries failed operations according to retry count","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retries failed operations according to retry count"},{"ancestorTitles":["Timeout Helper Unit Tests","Retry Logic"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Retry Logic succeeds on retry after initial failure","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"succeeds on retry after initial failure"},{"ancestorTitles":["Timeout Helper Unit Tests","Retry Logic"],"duration":153,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Retry Logic applies exponential backoff for retry delays","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"applies exponential backoff for retry delays"},{"ancestorTitles":["Timeout Helper Unit Tests","Retry Logic"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Retry Logic does not retry without explicit retry count","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"does not retry without explicit retry count"},{"ancestorTitles":["Timeout Helper Unit Tests","Circuit Breaker Integration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Circuit Breaker Integration records success and resets circuit breaker","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"records success and resets circuit breaker"},{"ancestorTitles":["Timeout Helper Unit Tests","Circuit Breaker Integration"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Circuit Breaker Integration records failure and updates circuit breaker","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"records failure and updates circuit breaker"},{"ancestorTitles":["Timeout Helper Unit Tests","Circuit Breaker Integration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Circuit Breaker Integration opens circuit after threshold failures","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"opens circuit after threshold failures"},{"ancestorTitles":["Timeout Helper Unit Tests","Circuit Breaker Integration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Circuit Breaker Integration rejects operations when circuit is open","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"rejects operations when circuit is open"},{"ancestorTitles":["Timeout Helper Unit Tests","Circuit Breaker Integration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Circuit Breaker Integration transitions to half-open after timeout period","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"transitions to half-open after timeout period"},{"ancestorTitles":["Timeout Helper Unit Tests","HTTP Request Functionality"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests HTTP Request Functionality makes successful HTTP request with default options","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"makes successful HTTP request with default options"},{"ancestorTitles":["Timeout Helper Unit Tests","HTTP Request Functionality"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests HTTP Request Functionality handles POST requests with JSON body","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles POST requests with JSON body"},{"ancestorTitles":["Timeout Helper Unit Tests","HTTP Request Functionality"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests HTTP Request Functionality throws error for non-OK HTTP responses","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"throws error for non-OK HTTP responses"},{"ancestorTitles":["Timeout Helper Unit Tests","HTTP Request Functionality"],"duration":3155,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests HTTP Request Functionality handles request timeout with AbortController","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles request timeout with AbortController"},{"ancestorTitles":["Timeout Helper Unit Tests","Database Query Functionality"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Database Query Functionality executes database query with circuit breaker","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"executes database query with circuit breaker"},{"ancestorTitles":["Timeout Helper Unit Tests","Database Query Functionality"],"duration":1101,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Database Query Functionality applies database-specific timeout","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"applies database-specific timeout"},{"ancestorTitles":["Timeout Helper Unit Tests","Database Query Functionality"],"duration":1003,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Database Query Functionality retries failed database queries","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retries failed database queries"},{"ancestorTitles":["Timeout Helper Unit Tests","Alpaca API Integration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Alpaca API Integration executes Alpaca API call with service-specific settings","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"executes Alpaca API call with service-specific settings"},{"ancestorTitles":["Timeout Helper Unit Tests","Alpaca API Integration"],"duration":6002,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Alpaca API Integration uses Alpaca-specific timeout and retry settings","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"uses Alpaca-specific timeout and retry settings"},{"ancestorTitles":["Timeout Helper Unit Tests","News API Integration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests News API Integration executes news API call without circuit breaker","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"executes news API call without circuit breaker"},{"ancestorTitles":["Timeout Helper Unit Tests","Batch Processing"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Batch Processing processes items in batches with concurrency limit","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"processes items in batches with concurrency limit"},{"ancestorTitles":["Timeout Helper Unit Tests","Batch Processing"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Batch Processing handles errors in batch processing","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"handles errors in batch processing"},{"ancestorTitles":["Timeout Helper Unit Tests","Batch Processing"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Batch Processing stops on first error when continueOnError is false","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"stops on first error when continueOnError is false"},{"ancestorTitles":["Timeout Helper Unit Tests","Multiple Promise Handling"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Multiple Promise Handling handles Promise.all with timeout and fail-fast","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles Promise.all with timeout and fail-fast"},{"ancestorTitles":["Timeout Helper Unit Tests","Multiple Promise Handling"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Multiple Promise Handling handles Promise.allSettled for partial success","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"handles Promise.allSettled for partial success"},{"ancestorTitles":["Timeout Helper Unit Tests","Multiple Promise Handling"],"duration":101,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Multiple Promise Handling times out batch operations","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"times out batch operations"},{"ancestorTitles":["Timeout Helper Unit Tests","Circuit Breaker Metrics and Monitoring"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Circuit Breaker Metrics and Monitoring provides comprehensive circuit breaker status","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"provides comprehensive circuit breaker status"},{"ancestorTitles":["Timeout Helper Unit Tests","Circuit Breaker Metrics and Monitoring"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Circuit Breaker Metrics and Monitoring provides detailed metrics with performance data","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"provides detailed metrics with performance data"},{"ancestorTitles":["Timeout Helper Unit Tests","Circuit Breaker Metrics and Monitoring"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Circuit Breaker Metrics and Monitoring calculates recent activity correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"calculates recent activity correctly"},{"ancestorTitles":["Timeout Helper Unit Tests","Circuit Breaker Metrics and Monitoring"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Circuit Breaker Metrics and Monitoring provides risk level assessment","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"provides risk level assessment"},{"ancestorTitles":["Timeout Helper Unit Tests","Circuit Breaker Metrics and Monitoring"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Circuit Breaker Metrics and Monitoring provides recovery predictions","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"provides recovery predictions"},{"ancestorTitles":["Timeout Helper Unit Tests","Delay Utility"],"duration":51,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Delay Utility provides accurate delay functionality","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"provides accurate delay functionality"},{"ancestorTitles":["Timeout Helper Unit Tests","Edge Cases and Error Scenarios"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Edge Cases and Error Scenarios handles operations that return null or undefined","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"handles operations that return null or undefined"},{"ancestorTitles":["Timeout Helper Unit Tests","Edge Cases and Error Scenarios"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Edge Cases and Error Scenarios handles concurrent access to circuit breakers safely","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"handles concurrent access to circuit breakers safely"},{"ancestorTitles":["Timeout Helper Unit Tests","Edge Cases and Error Scenarios"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Edge Cases and Error Scenarios maintains circuit breaker history size limit","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"maintains circuit breaker history size limit"},{"ancestorTitles":["Timeout Helper Unit Tests","Edge Cases and Error Scenarios"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Timeout Helper Unit Tests Edge Cases and Error Scenarios handles malformed options gracefully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"handles malformed options gracefully"}],"endTime":1753066198512,"message":"","name":"/home/stocks/algo/webapp/lambda/tests/unit/real-timeout-helper.test.js","startTime":1753066185350,"status":"passed","summary":""}],"wasInterrupted":false}
